/*! For license information please see mathalea2iep.e774e39ecc960ac6d941.js.LICENSE.txt */
(()=>{var __webpack_modules__={87739:e=>{e.exports=function(){var e,t=["navigation","request","process","log","user","state","error","manual"],r=function(e,t,r){for(var n=r,i=0,s=e.length;i<s;i++)n=t(n,e[i],i,e);return n},n=function(e,t){return r(e,(function(e,r,n,i){return t(r,n,i)?e.concat(r):e}),[])},i=function(e,t){return r(e,(function(e,r,n,i){return!0===e||r===t}),!1)},s=function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);if(!o)return r;for(var n=0,i=a.length;n<i;n++)Object.prototype.hasOwnProperty.call(e,a[n])&&r.push(a[n]);return r},u=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1/0),function(r){return"number"==typeof r&&parseInt(""+r,10)===r&&r>=e&&r<=t}},c=function(e){return"function"==typeof e||s(e)&&n(e,(function(e){return"function"==typeof e})).length===e.length},p=function(e){return"string"==typeof e&&!!e.length},h={},d=function(){return{unhandledExceptions:!0,unhandledRejections:!0}};h.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:p},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||p(e)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||p(e)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},enabledErrorTypes:{defaultValue:function(){return d()},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(e){if("object"!=typeof e||!e)return!1;var t=l(e),r=l(d());return!(n(t,(function(e){return i(r,e)})).length<t.length||n(l(e),(function(t){return"boolean"!=typeof e[t]})).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:c},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(e){return e&&"object"==typeof e&&p(e.notify)&&p(e.sessions)&&0===n(l(e),(function(e){return!i(["notify","sessions"],e)})).length}},autoTrackSessions:{defaultValue:function(e){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return null===e||s(e)&&n(e,(function(e){return"string"==typeof e})).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return"string"==typeof e&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number ≤100",validate:function(e){return u(0,100)(e)}},enabledBreadcrumbTypes:{defaultValue:function(){return t},message:"should be null or a list of available breadcrumb types ("+t.join(",")+")",validate:function(e){return null===e||s(e)&&r(e,(function(e,r){return!1===e?e:i(t,r)}),!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||"string"==typeof e}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(e){return null===e||e&&r(l(e),(function(e,t){return e&&i(["id","email","name"],t)}),!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(e){return"object"==typeof e&&null!==e}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&r(["debug","info","warn","error"],(function(t,r){return t&&"function"==typeof e[r]}),!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return s(e)&&e.length===n(e,(function(e){return"string"==typeof e||e&&"function"==typeof e.test})).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(e){return s(e)&&e.length===n(e,(function(e){return e&&"object"==typeof e&&"function"==typeof e.load})).length}}};var f=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m=function(e,t){return r(e,(function(e,r,n,i){return e.concat(t(r,n,i))}),[])};function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}var y=h.schema,v={releaseStage:f({},y.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),appType:g({},y.appType,{defaultValue:function(){return"browser"}}),logger:f({},y.logger,{defaultValue:function(){return"undefined"!=typeof console&&"function"==typeof console.debug?b():void 0}})},b=function(){var e={},t=console.log;return m(["debug","info","warn","error"],(function(r){var n=console[r];e[r]="function"==typeof n?n.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")})),e},x=function(){function e(e,t,r,n){void 0===n&&(n=new Date),this.type=r,this.message=e,this.metadata=t,this.timestamp=n}return e.prototype.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},e}(),w={};!function(t,r){"use strict";"function"==typeof e&&e.amd?e("stackframe",[],r):"object"==typeof w?w=r():t.StackFrame=r()}(this,(function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function r(e){return function(){return this[e]}}var n=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],s=["fileName","functionName","source"],o=["args"],a=n.concat(i,s,o);function l(e){if(e instanceof Object)for(var r=0;r<a.length;r++)e.hasOwnProperty(a[r])&&void 0!==e[a[r]]&&this["set"+t(a[r])](e[a[r]])}l.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof l)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new l(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<n.length;u++)l.prototype["get"+t(n[u])]=r(n[u]),l.prototype["set"+t(n[u])]=function(e){return function(t){this[e]=Boolean(t)}}(n[u]);for(var c=0;c<i.length;c++)l.prototype["get"+t(i[c])]=r(i[c]),l.prototype["set"+t(i[c])]=function(t){return function(r){if(!e(r))throw new TypeError(t+" must be a Number");this[t]=Number(r)}}(i[c]);for(var p=0;p<s.length;p++)l.prototype["get"+t(s[p])]=r(s[p]),l.prototype["set"+t(s[p])]=function(e){return function(t){this[e]=String(t)}}(s[p]);return l}));var _={};!function(t,r){"use strict";"function"==typeof e&&e.amd?e("error-stack-parser",["stackframe"],r):"object"==typeof _?_=r(w):t.ErrorStackParser=r(t.StackFrame)}(this,(function(e){"use strict";var t=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,n=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter((function(e){return!!e.match(r)}),this).map((function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),n=r.match(/ (\((.+):(\d+):(\d+)\)$)/),i=(r=n?r.replace(n[0],""):r).split(/\s+/).slice(1),s=this.extractLocation(n?n[1]:i.pop()),o=i.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(s[0])>-1?void 0:s[0];return new e({functionName:o,fileName:a,lineNumber:s[1],columnNumber:s[2],source:t})}),this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=t.match(r),i=n&&n[1]?n[1]:void 0,s=this.extractLocation(t.replace(r,""));return new e({functionName:i,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:t})}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),i=[],s=2,o=n.length;s<o;s+=2){var a=r.exec(n[s]);a&&i.push(new e({fileName:a[2],lineNumber:a[1],source:n[s]}))}return i},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),i=[],s=0,o=n.length;s<o;s+=2){var a=r.exec(n[s]);a&&i.push(new e({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[s]}))}return i},parseOpera11:function(r){return r.stack.split("\n").filter((function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this).map((function(t){var r,n=t.split("@"),i=this.extractLocation(n.pop()),s=n.shift()||"",o=s.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;s.match(/\(([^\)]*)\)/)&&(r=s.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e({functionName:o,args:a,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}),this)}}}));var E=_,S=function(e){return!(!e||!e.stack&&!e.stacktrace&&!e["opera#sourceloc"]||"string"!=typeof(e.stack||e.stacktrace||e["opera#sourceloc"])||e.stack===e.name+": "+e.message)};function A(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}var N=A,k=function(e,t,r,n){var i;if(t){var s;if(null===r)return M(e,t);"object"==typeof r&&(s=r),"string"==typeof r&&((i={})[r]=n,s=i),s&&(e[t]||(e[t]={}),e[t]=f({},e[t],s))}},M=function(e,t,r){"string"==typeof t&&(r?e[t]&&delete e[t][r]:delete e[t])},C={add:k,get:function(e,t,r){if("string"==typeof t)return r?e[t]?e[t][r]:void 0:e[t]},clear:M},T={};!function(t,r){"use strict";"function"==typeof e&&e.amd?e("stack-generator",["stackframe"],r):"object"==typeof T?T=r(w):t.StackGenerator=r(t.StackFrame)}(this,(function(e){return{backtrace:function(t){var r=[],n=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(n=t.maxStackSize);for(var i=arguments.callee;i&&r.length<n&&i.arguments;){for(var s=new Array(i.arguments.length),o=0;o<s.length;++o)s[o]=i.arguments[o];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?r.push(new e({functionName:RegExp.$1||void 0,args:s})):r.push(new e({args:s}));try{i=i.caller}catch(a){break}}return r}}}));var O=function(){function e(t,n,i,s,o){void 0===i&&(i=[]),void 0===s&&(s=D()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=o,this._handledState=s,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._user={},this._session=void 0,this.errors=[{errorClass:R(t),errorMessage:R(n),type:e.__type,stacktrace:r(i,(function(e,t){var r=I(t);try{return"{}"===JSON.stringify(r)?e:e.concat(r)}catch(n){return e}}),[])}]}var t=e.prototype;return t.addMetadata=function(e,t,r){return C.add(this._metadata,e,t,r)},t.getMetadata=function(e,t){return C.get(this._metadata,e,t)},t.clearMetadata=function(e,t){return C.clear(this._metadata,e,t)},t.getUser=function(){return this._user},t.setUser=function(e,t,r){this._user={id:e,email:t,name:r}},t.toJSON=function(){return{payloadVersion:"4",exceptions:m(this.errors,(function(e){return f({},e,{message:e.errorMessage})})),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session}},e}(),I=function(e){var t={file:e.fileName,method:P(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return t.lineNumber>-1&&!t.file&&!t.method&&(t.file="global code"),t},P=function(e){return/^global code$/i.test(e)?"global code":e},D=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},R=function(e){return"string"==typeof e?e:""};O.getStacktrace=function(e,t,r){if(S(e))return E.parse(e).slice(t);try{return n(T.backtrace(),(function(e){return-1===(e.functionName||"").indexOf("StackGenerator$$")})).slice(1+r)}catch(i){return[]}},O.create=function(e,t,r,n,i,s){void 0===i&&(i=0);var o,a=q(e,t,n,s),l=a[0],u=a[1];try{var c=O.getStacktrace(l,u>0?1+u+i:0,1+i);o=new O(l.name,l.message,c,r,e)}catch(p){o=new O(l.name,l.message,[],r,e)}return"InvalidError"===l.name&&o.addMetadata(""+n,"non-error parameter",L(e)),o};var L=function(e){return null===e?"null":void 0===e?"undefined":e},q=function(e,t,r,n){var i,s=0,o=function(e){n&&n.warn(r+' received a non-error: "'+e+'"');var t=new Error(r+' received a non-error. See "'+r+'" tab for more detail.');return t.name="InvalidError",t};if(t)switch(typeof e){case"string":case"number":case"boolean":i=new Error(String(e)),s+=1;break;case"function":i=o("function"),s+=2;break;case"object":null!==e&&N(e)?i=e:null!==e&&$(e)?((i=new Error(e.message||e.errorMessage)).name=e.name||e.errorClass,s+=1):(i=o(null===e?"null":"unsupported object"),s+=2);break;default:i=o("nothing"),s+=2}else N(e)?i=e:(i=o(typeof e),s+=2);if(!S(i))try{throw i}catch(a){S(a)&&(i=a,s=1)}return[i,s]};O.__type="browserjs";var $=function(e){return!("string"!=typeof e.name&&"string"!=typeof e.errorClass||"string"!=typeof e.message&&"string"!=typeof e.errorMessage)},B=O,z=function(e,t,r){var n=0,i=function(){if(n>=e.length)return r(null,!0);t(e[n],(function(e,t){return e?r(e):!1===t?r(null,!1):(n++,void i())}))};i()},F=function(e,t,r,n){var i=function(e,n){if("function"!=typeof e)return n(null);try{if(2!==e.length){var i=e(t);return i&&"function"==typeof i.then?i.then((function(e){return setTimeout((function(){return n(null,e)}))}),(function(e){setTimeout((function(){return r(e),n(null,!0)}))})):n(null,i)}e(t,(function(e,t){if(e)return r(e),n(null);n(null,t)}))}catch(s){r(s),n(null)}};z(e,i,n)},U=function(e,t,r,n){for(var i=!1,s=e.slice();!i&&s.length;)try{i=!1===s.pop()(t)}catch(o){n.error("Error occurred in "+r+" callback, continuing anyway…"),n.error(o)}return i},j=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},G="object"==typeof window?window:self,V=0;for(var H in G)Object.hasOwnProperty.call(G,H)&&V++;var W=navigator.mimeTypes?navigator.mimeTypes.length:0,Y=j((W+navigator.userAgent.length).toString(36)+V.toString(36),4),X=function(){return Y},Z=0,Q=4,K=36,J=Math.pow(K,Q);function ee(){return j((Math.random()*J<<0).toString(K),Q)}function te(){return Z=Z<J?Z:0,++Z-1}function re(){return"c"+(new Date).getTime().toString(K)+j(te().toString(K),Q)+X()+(ee()+ee())}re.fingerprint=X;var ne=re,ie=function(){function e(){this.id=ne(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var t=e.prototype;return t.getUser=function(){return this._user},t.setUser=function(e,t,r){this._user={id:e,email:t,name:r}},t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t._track=function(e){this[e._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),se=ie,oe=function(){},ae=function(){function e(t,r,n,i){var s=this;void 0===r&&(r=h.schema),void 0===n&&(n=[]),this._notifier=i,this._config={},this._schema=r,this._delivery={sendSession:oe,sendEvent:oe},this._logger={debug:oe,info:oe,warn:oe,error:oe},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=e,this.Event=B,this.Breadcrumb=x,this.Session=se,this._config=this._configure(t,n),m(n.concat(this._config.plugins),(function(e){e&&s._loadPlugin(e)})),this._depth=1;var o=this,a=this.notify;this.notify=function(){return a.apply(o,arguments)}}var s=e.prototype;return s.addMetadata=function(e,t,r){return C.add(this._metadata,e,t,r)},s.getMetadata=function(e,t){return C.get(this._metadata,e,t)},s.clearMetadata=function(e,t){return C.clear(this._metadata,e,t)},s.getContext=function(){return this._context},s.setContext=function(e){this._context=e},s._configure=function(e,t){var n=r(t,(function(e,t){return t&&t.configSchema?f({},e,t.configSchema):e}),this._schema),i=r(l(n),(function(t,r){var i=n[r].defaultValue(e[r]);return void 0!==e[r]?n[r].validate(e[r])?n[r].allowPartialObject?t.config[r]=f(i,e[r]):t.config[r]=e[r]:(t.errors[r]=n[r].message,t.config[r]=i):t.config[r]=i,t}),{errors:{},config:{}}),s=i.errors,o=i.config;if(n.apiKey){if(!o.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(o.apiKey)||(s.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=f({},o.metadata),this._user=f({},o.user),this._context=o.context,o.logger&&(this._logger=o.logger),o.onError&&(this._cbs.e=this._cbs.e.concat(o.onError)),o.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(o.onBreadcrumb)),o.onSession&&(this._cbs.s=this._cbs.s.concat(o.onSession)),l(s).length&&this._logger.warn(le(s,e)),o},s.getUser=function(){return this._user},s.setUser=function(e,t,r){this._user={id:e,email:t,name:r}},s._loadPlugin=function(e){var t=e.load(this);return e.name&&(this._plugins["~"+e.name+"~"]=t),this},s.getPlugin=function(e){return this._plugins["~"+e+"~"]},s._setDelivery=function(e){this._delivery=e(this)},s.startSession=function(){var e=new se;return e.app.releaseStage=this._config.releaseStage,e.app.version=this._config.appVersion,e.app.type=this._config.appType,e._user=f({},this._user),U(this._cbs.s,e,"onSession",this._logger)?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,e)},s.addOnError=function(e,t){void 0===t&&(t=!1),this._cbs.e[t?"unshift":"push"](e)},s.removeOnError=function(e){this._cbs.e=n(this._cbs.e,(function(t){return t!==e}))},s._addOnSessionPayload=function(e){this._cbs.sp.push(e)},s.addOnSession=function(e){this._cbs.s.push(e)},s.removeOnSession=function(e){this._cbs.s=n(this._cbs.s,(function(t){return t!==e}))},s.addOnBreadcrumb=function(e,t){void 0===t&&(t=!1),this._cbs.b[t?"unshift":"push"](e)},s.removeOnBreadcrumb=function(e){this._cbs.b=n(this._cbs.b,(function(t){return t!==e}))},s.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},s.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},s.leaveBreadcrumb=function(e,r,n){if(e="string"==typeof e?e:"",n="string"==typeof n&&i(t,n)?n:"manual",r="object"==typeof r&&null!==r?r:{},e){var s=new x(e,r,n);U(this._cbs.b,s,"onBreadcrumb",this._logger)?this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback"):(this._breadcrumbs.push(s),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs)))}},s._isBreadcrumbTypeEnabled=function(e){var t=this._config.enabledBreadcrumbTypes;return null===t||i(t,e)},s.notify=function(e,t,r){void 0===r&&(r=oe);var n=B.create(e,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(n,t,r)},s._notify=function(t,r,n){var s=this;if(void 0===n&&(n=oe),t.app=f({},t.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),t.context=t.context||this._context,t._metadata=f({},t._metadata,this._metadata),t._user=f({},t._user,this._user),t.breadcrumbs=this._breadcrumbs.slice(),null!==this._config.enabledReleaseStages&&!i(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),n(null,t);var o=t.severity,a=function(e){s._logger.error("Error occurred in onError callback, continuing anyway…"),s._logger.error(e)},l=[].concat(this._cbs.e).concat(r);F(l,t,a,(function(r,i){if(r&&a(r),!i)return s._logger.debug("Event not sent due to onError callback"),n(null,t);s._isBreadcrumbTypeEnabled("error")&&e.prototype.leaveBreadcrumb.call(s,t.errors[0].errorClass,{errorClass:t.errors[0].errorClass,errorMessage:t.errors[0].errorMessage,severity:t.severity},"error"),o!==t.severity&&(t._handledState.severityReason={type:"userCallbackSetSeverity"}),t.unhandled!==t._handledState.unhandled&&(t._handledState.severityReason.unhandledOverridden=!0,t._handledState.unhandled=t.unhandled),s._session&&(s._session._track(t),t._session=s._session),s._delivery.sendEvent({apiKey:t.apiKey||s._config.apiKey,notifier:s._notifier,events:[t]},(function(e){return n(e,t)}))}))},e}(),le=function(e,t){return new Error("Invalid configuration\n"+m(l(e),(function(r){return"  - "+r+" "+e[r]+", got "+ue(t[r])})).join("\n\n"))},ue=function(e){switch(typeof e){case"string":case"number":case"object":return JSON.stringify(e);default:return String(e)}},ce=ae,pe=function(e,t,r,n){var i=n&&n.redactedKeys?n.redactedKeys:[],s=n&&n.redactedPaths?n.redactedPaths:[];return JSON.stringify(Ee(e,i,s),t,r)},he=20,de=25e3,fe=8,me="...";function ge(e){return e instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))}function ye(e){return"[Throws: "+(e?e.message:"?")+"]"}function ve(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return!0;return!1}function be(e,t){for(var r=0,n=e.length;r<n;r++)if(0===t.indexOf(e[r]))return!0;return!1}function xe(e,t){for(var r=0,n=e.length;r<n;r++){if("string"==typeof e[r]&&e[r].toLowerCase()===t.toLowerCase())return!0;if(e[r]&&"function"==typeof e[r].test&&e[r].test(t))return!0}return!1}function we(e){return"[object Array]"===Object.prototype.toString.call(e)}function _e(e,t){try{return e[t]}catch(r){return ye(r)}}function Ee(e,t,r){var n=[],i=0;function s(e,o){function a(){return o.length>fe&&i>de}if(i++,o.length>he)return me;if(a())return me;if(null===e||"object"!=typeof e)return e;if(ve(n,e))return"[Circular]";if(n.push(e),"function"==typeof e.toJSON)try{i--;var l=s(e.toJSON(),o);return n.pop(),l}catch(m){return ye(m)}if(ge(e)){i--;var u=s({name:e.name,message:e.message},o);return n.pop(),u}if(we(e)){for(var c=[],p=0,h=e.length;p<h;p++){if(a()){c.push(me);break}c.push(s(e[p],o.concat("[]")))}return n.pop(),c}var d={};try{for(var f in e)if(Object.prototype.hasOwnProperty.call(e,f))if(be(r,o.join("."))&&xe(t,f))d[f]="[REDACTED]";else{if(a()){d[f]=me;break}d[f]=s(_e(e,f),o.concat(f))}}catch(g){}return n.pop(),d}return s(e,[])}var Se={},Ae=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];Se.event=function(e,t){var r=pe(e,null,null,{redactedPaths:Ae,redactedKeys:t});if(r.length>1e6&&(e.events[0]._metadata={notifier:"WARNING!\nSerialized payload was "+r.length/1e6+"MB (limit = 1MB)\nmetadata was removed"},(r=pe(e,null,null,{redactedPaths:Ae,redactedKeys:t})).length>1e6))throw new Error("payload exceeded 1MB limit");return r},Se.session=function(e,t){var r=pe(e,null,null);if(r.length>1e6)throw new Error("payload exceeded 1MB limit");return r};var Ne={};Ne=function(e,t){return void 0===t&&(t=window),{sendEvent:function(r,n){void 0===n&&(n=function(){});var i=ke(e._config,"notify","4",t),s=new t.XDomainRequest;s.onload=function(){n(null)},s.open("POST",i),setTimeout((function(){try{s.send(Se.event(r,e._config.redactedKeys))}catch(t){e._logger.error(t),n(t)}}),0)},sendSession:function(r,n){void 0===n&&(n=function(){});var i=ke(e._config,"sessions","1",t),s=new t.XDomainRequest;s.onload=function(){n(null)},s.open("POST",i),setTimeout((function(){try{s.send(Se.session(r,e._config.redactedKeys))}catch(t){e._logger.error(t),n(t)}}),0)}}};var ke=function(e,t,r,n){var i=JSON.parse(JSON.stringify(new Date));return Me(e.endpoints[t],n.location.protocol)+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+r+"&sentAt="+encodeURIComponent(i)},Me=Ne._matchPageProtocol=function(e,t){return"http:"===t?e.replace(/^https:/,"http:"):e},Ce=function(e,t){return void 0===t&&(t=window),{sendEvent:function(r,n){void 0===n&&(n=function(){});try{var i=e._config.endpoints.notify,s=new t.XMLHttpRequest;s.onreadystatechange=function(){s.readyState===t.XMLHttpRequest.DONE&&n(null)},s.open("POST",i),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Bugsnag-Api-Key",r.apiKey||e._config.apiKey),s.setRequestHeader("Bugsnag-Payload-Version","4"),s.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),s.send(Se.event(r,e._config.redactedKeys))}catch(o){e._logger.error(o)}},sendSession:function(r,n){void 0===n&&(n=function(){});try{var i=e._config.endpoints.sessions,s=new t.XMLHttpRequest;s.onreadystatechange=function(){s.readyState===t.XMLHttpRequest.DONE&&n(null)},s.open("POST",i),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Bugsnag-Api-Key",e._config.apiKey),s.setRequestHeader("Bugsnag-Payload-Version","1"),s.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),s.send(Se.session(r,e._config.redactedKeys))}catch(o){e._logger.error(o)}}}},Te=new Date,Oe=function(){Te=new Date},Ie={name:"appDuration",load:function(e){return e.addOnError((function(e){var t=new Date;e.app.duration=t-Te}),!0),{reset:Oe}}},Pe=function(e){return void 0===e&&(e=window),{load:function(t){t.addOnError((function(t){void 0===t.context&&(t.context=e.location.pathname)}),!0)}}},De=function(e,t){var r="000000000"+e;return r.substr(r.length-t)},Re="object"==typeof window?window:self,Le=0;for(var qe in Re)Object.hasOwnProperty.call(Re,qe)&&Le++;var $e=navigator.mimeTypes?navigator.mimeTypes.length:0,Be=De(($e+navigator.userAgent.length).toString(36)+Le.toString(36),4),ze=function(){return Be},Fe=0,Ue=4,je=36,Ge=Math.pow(je,Ue);function Ve(){return De((Math.random()*Ge<<0).toString(je),Ue)}function He(){return Fe=Fe<Ge?Fe:0,++Fe-1}function We(){return"c"+(new Date).getTime().toString(je)+De(He().toString(je),Ue)+ze()+(Ve()+Ve())}We.fingerprint=ze;var Ye=We,Xe="bugsnag-anonymous-id",Ze=function(){try{var e=window.localStorage,t=e.getItem(Xe);return t&&/^c[a-z0-9]{20,32}$/.test(t)||(t=Ye(),e.setItem(Xe,t)),t}catch(r){}},Qe=function(e,t){return void 0===e&&(e=navigator),void 0===t&&(t=window.screen),{load:function(r){var n={locale:e.browserLanguage||e.systemLanguage||e.userLanguage||e.language,userAgent:e.userAgent};t&&t.orientation&&t.orientation.type?n.orientation=t.orientation.type:n.orientation=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait",r._config.generateAnonymousId&&(n.id=Ze()),r.addOnSession((function(e){e.device=f({},e.device,n),r._config.collectUserIp||Ke(e)})),r.addOnError((function(e){e.device=f({},e.device,n,{time:new Date}),r._config.collectUserIp||Ke(e)}),!0)},configSchema:{generateAnonymousId:{validate:function(e){return!0===e||!1===e},defaultValue:function(){return!0},message:"should be true|false"}}}},Ke=function(e){var t=e.getUser();t&&t.id||e.setUser(e.device.id)},Je=function(e){return void 0===e&&(e=window),{load:function(t){t.addOnError((function(t){t.request&&t.request.url||(t.request=f({},t.request,{url:e.location.href}))}),!0)}}},et={load:function(e){e._sessionDelegate=tt}},tt={startSession:function(e,t){var r=e;return r._session=t,r._pausedSession=null,null===r._config.enabledReleaseStages||i(r._config.enabledReleaseStages,r._config.releaseStage)?(r._delivery.sendSession({notifier:r._notifier,device:t.device,app:t.app,sessions:[{id:t.id,startedAt:t.startedAt,user:t._user}]}),r):(r._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),r)},resumeSession:function(e){return e._session?e:e._pausedSession?(e._session=e._pausedSession,e._pausedSession=null,e):e.startSession()},pauseSession:function(e){e._pausedSession=e._session,e._session=null}},rt={load:function(e){e._config.collectUserIp||e.addOnError((function(e){e._user&&void 0===e._user.id&&delete e._user.id,e._user=f({id:"[REDACTED]"},e._user),e.request=f({clientIp:"[REDACTED]"},e.request)}))},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}}}},nt={load:function(e){!/^(local-)?dev(elopment)?$/.test(e._config.releaseStage)&&e._isBreadcrumbTypeEnabled("log")&&m(it,(function(t){var n=console[t];console[t]=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];e.leaveBreadcrumb("Console output",r(s,(function(e,t,r){var n="[Unknown value]";try{n=String(t)}catch(i){}if("[object Object]"===n)try{n=JSON.stringify(t)}catch(i){}return e["["+r+"]"]=n,e}),{severity:0===t.indexOf("group")?"log":t}),"log"),n.apply(console,s)},console[t]._restore=function(){console[t]=n}}))}},it=n(["log","debug","info","warn","error"],(function(e){return"undefined"!=typeof console&&"function"==typeof console[e]})),st=200,ot=5e5,at=function(e,t){return void 0===e&&(e=document),void 0===t&&(t=window),{load:function(i){if(i._config.trackInlineScripts){var s=t.location.href,o="",a=e.attachEvent?"complete"===e.readyState:"loading"!==e.readyState,l=function(){return e.documentElement.outerHTML};o=l();var u=e.onreadystatechange;e.onreadystatechange=function(){"interactive"===e.readyState&&(o=l(),a=!0);try{u.apply(this,arguments)}catch(t){}};var c=null,p=function(e){c=e},h=function(){var t=e.currentScript||c;if(!t&&!a){var r=e.scripts||e.getElementsByTagName("script");t=r[r.length-1]}return t},d=function(e){a&&o||(o=l());var t=["\x3c!-- DOC START --\x3e"].concat(o.split("\n")),n=e-1,i=Math.max(n-3,0),s=Math.min(n+3,t.length);return r(t.slice(i,s),(function(e,t,r){return e[i+1+r]=t.length<=st?t:t.substr(0,st),e}),{})};i.addOnError((function(e){e.errors[0].stacktrace=n(e.errors[0].stacktrace,(function(e){return!/__trace__$/.test(e.method)}));var t=e.errors[0].stacktrace[0];if(!t||!t.file||t.file.replace(/#.*$/,"")===s.replace(/#.*$/,"")){var r=h();if(r){var i=r.innerHTML;e.addMetadata("script","content",i.length<=ot?i:i.substr(0,ot)),t&&t.lineNumber&&(t.code=d(t.lineNumber))}}}),!0);var f=m(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],(function(e){return lt(t,e,(function(e){return g(e,(function(e){return{get:function(){return e[0]},replace:function(t){e[0]=t}}}))}))}))[0];m(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],(function(e){t[e]&&t[e].prototype&&Object.prototype.hasOwnProperty.call(t[e].prototype,"addEventListener")&&(lt(t[e].prototype,"addEventListener",(function(e){return g(e,ut)})),lt(t[e].prototype,"removeEventListener",(function(e){return g(e,ut,!0)})))}))}function g(e,t,r){return void 0===r&&(r=!1),function(){var n=[].slice.call(arguments);try{var i=t(n),s=i.get();if(r&&e.apply(this,n),"function"!=typeof s)return e.apply(this,n);if(s.__trace__)i.replace(s.__trace__);else{var o=h();s.__trace__=function(){p(o),f((function(){p(null)}),0);var e=s.apply(this,arguments);return p(null),e},s.__trace__.__trace__=s.__trace__,i.replace(s.__trace__)}}catch(a){}if(e.apply)return e.apply(this,n);switch(n.length){case 1:return e(n[0]);case 2:return e(n[0],n[1]);default:return e()}}}},configSchema:{trackInlineScripts:{validate:function(e){return!0===e||!1===e},defaultValue:function(){return!0},message:"should be true|false"}}}};function lt(e,t,r){var n=e[t];if(!n)return n;var i=r(n);return e[t]=i,n}function ut(e){var t=!!e[1]&&"function"==typeof e[1].handleEvent;return{get:function(){return t?e[1].handleEvent:e[1]},replace:function(r){t?e[1].handleEvent=r:e[1]=r}}}var ct=function(e){return void 0===e&&(e=window),{load:function(t){"addEventListener"in e&&t._isBreadcrumbTypeEnabled("user")&&e.addEventListener("click",(function(r){var n,i;try{n=pt(r.target),i=ht(r.target,e)}catch(s){n="[hidden]",i="[hidden]",t._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}t.leaveBreadcrumb("UI click",{targetText:n,targetSelector:i},"user")}),!0)}}},pt=function(e){var t=e.textContent||e.innerText||"";return t||"submit"!==e.type&&"button"!==e.type||(t=e.value),dt(t=t.replace(/^\s+|\s+$/g,""),140)};function ht(e,t){var r=[e.tagName];if(e.id&&r.push("#"+e.id),e.className&&e.className.length&&r.push("."+e.className.split(" ").join(".")),!t.document.querySelectorAll||!Array.prototype.indexOf)return r.join("");try{if(1===t.document.querySelectorAll(r.join("")).length)return r.join("")}catch(i){return r.join("")}if(e.parentNode.childNodes.length>1){var n=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;r.push(":nth-child("+n+")")}return 1===t.document.querySelectorAll(r.join("")).length?r.join(""):e.parentNode?ht(e.parentNode,t)+" > "+r.join(""):r.join("")}function dt(e,t){var r="(...)";return e&&e.length<=t?e:e.slice(0,t-r.length)+r}var ft={};ft=function(e){void 0===e&&(e=window);var t={load:function(t){if("addEventListener"in e&&t._isBreadcrumbTypeEnabled("navigation")){var r=function(e){return function(){return t.leaveBreadcrumb(e,{},"navigation")}};e.addEventListener("pagehide",r("Page hidden"),!0),e.addEventListener("pageshow",r("Page shown"),!0),e.addEventListener("load",r("Page loaded"),!0),e.document.addEventListener("DOMContentLoaded",r("DOMContentLoaded"),!0),e.addEventListener("load",(function(){return e.addEventListener("popstate",r("Navigated back"),!0)})),e.addEventListener("hashchange",(function(r){var n=r.oldURL?{from:mt(r.oldURL,e),to:mt(r.newURL,e),state:vt(e)}:{to:mt(e.location.href,e)};t.leaveBreadcrumb("Hash changed",n,"navigation")}),!0),e.history.replaceState&&yt(t,e.history,"replaceState",e),e.history.pushState&&yt(t,e.history,"pushState",e)}}};return t};var mt=function(e,t){var r=t.document.createElement("A");return r.href=e,""+r.pathname+r.search+r.hash},gt=function(e,t,r,n){var i=mt(e.location.href,e);return{title:r,state:t,prevState:vt(e),to:n||i,from:i}},yt=function(e,t,r,n){var i=t[r];t[r]=function(s,o,a){e.leaveBreadcrumb("History "+r,gt(n,s,o,a),"navigation"),"function"==typeof e.resetEventCount&&e.resetEventCount(),e._config.autoTrackSessions&&e.startSession(),i.apply(t,[s,o].concat(void 0!==a?a:[]))}},vt=function(e){try{return e.history.state}catch(t){}},bt="request",xt="BS~~S",wt="BS~~U",_t="BS~~M",Et=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=window);var r={load:function(r){if(r._isBreadcrumbTypeEnabled("request")){var n=[r._config.endpoints.notify,r._config.endpoints.sessions].concat(e);a(),c();var s=function(e,t,n){var i={status:e.status,request:t+" "+n};e.status>=400?r.leaveBreadcrumb("fetch() failed",i,bt):r.leaveBreadcrumb("fetch() succeeded",i,bt)},o=function(e,t){r.leaveBreadcrumb("fetch() error",{request:e+" "+t},bt)}}function a(){if("addEventListener"in t.XMLHttpRequest.prototype){var e=t.XMLHttpRequest.prototype.open;t.XMLHttpRequest.prototype.open=function(t,r){this[wt]=r,this[_t]=t,this[xt]&&(this.removeEventListener("load",l),this.removeEventListener("error",u)),this.addEventListener("load",l),this.addEventListener("error",u),this[xt]=!0,e.apply(this,arguments)}}}function l(){var e=this[wt];if(void 0!==e){if("string"!=typeof e||!i(n,e.replace(/\?.*$/,""))){var t={status:this.status,request:this[_t]+" "+this[wt]};this.status>=400?r.leaveBreadcrumb("XMLHttpRequest failed",t,bt):r.leaveBreadcrumb("XMLHttpRequest succeeded",t,bt)}}else r._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.")}function u(){var e=this[wt];void 0!==e?"string"==typeof e&&i(n,e.replace(/\?.*$/,""))||r.leaveBreadcrumb("XMLHttpRequest error",{request:this[_t]+" "+this[wt]},bt):r._logger.warn("The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.")}function c(){if("fetch"in t&&!t.fetch.polyfill){var e=t.fetch;t.fetch=function(){var t,r=arguments,n=arguments[0],i=arguments[1],a=null;return n&&"object"==typeof n?(a=n.url,i&&"method"in i?t=i.method:n&&"method"in n&&(t=n.method)):(a=n,i&&"method"in i&&(t=i.method)),void 0===t&&(t="GET"),new Promise((function(n,i){e.apply(void 0,r).then((function(e){s(e,t,a),n(e)})).catch((function(e){o(t,a),i(e)}))}))}}}}};return r},St={load:function(e){var t=0;e.addOnError((function(r){if(t>=e._config.maxEvents)return!1;t++})),e.resetEventCount=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer ≤100",validate:function(e){return u(1,100)(e)}}}},At={},Nt=(At={load:function(e){e.addOnError((function(e){var t=r(e.errors,(function(e,t){return e.concat(t.stacktrace)}),[]);m(t,(function(e){e.file=Nt(e.file)}))}))}})._strip=function(e){return"string"==typeof e?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},kt=function(e){return void 0===e&&(e=window),{load:function(t){if(t._config.autoDetectErrors&&t._config.enabledErrorTypes.unhandledExceptions){var r=e.onerror;e.onerror=n}function n(e,n,i,s,o){if(0===i&&/Script error\.?/.test(e))t._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var a,l={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}};if(o)a=t.Event.create(o,!0,l,"window onerror",1),Mt(a.errors[0].stacktrace,n,i,s);else if("object"!=typeof e||null===e||n&&"string"==typeof n||i||s||o)a=t.Event.create(e,!0,l,"window onerror",1),Mt(a.errors[0].stacktrace,n,i,s);else{var u=e.type?"Event: "+e.type:"Error",c=e.message||e.detail||"";(a=t.Event.create({name:u,message:c},!0,l,"window onerror",1)).originalError=e,a.addMetadata("window onerror",{event:e,extraParameters:n})}t._notify(a)}"function"==typeof r&&r.apply(this,arguments)}}}},Mt=function(e,t,r,n){e[0]||e.push({});var i=e[0];i.file||"string"!=typeof t||(i.file=t),!i.lineNumber&&Ct(r)&&(i.lineNumber=r),i.columnNumber||(Ct(n)?i.columnNumber=n:window.event&&Ct(window.event.errorCharacter)&&(i.columnNumber=window.event.errorCharacter))},Ct=function(e){return"number"==typeof e&&"NaN"!==String.call(e)},Tt=function(e){return void 0===e&&(e=window),{load:function(t){if(t._config.autoDetectErrors&&t._config.enabledErrorTypes.unhandledRejections){var r=function(e){var r=e.reason,n=!1;try{e.detail&&e.detail.reason&&(r=e.detail.reason,n=!0)}catch(s){}var i=t.Event.create(r,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,t._logger);n&&m(i.errors[0].stacktrace,Ot(r)),t._notify(i,(function(e){var t;N(e.originalError)&&!e.originalError.stack&&e.addMetadata("unhandledRejection handler",((t={})[Object.prototype.toString.call(e.originalError)]={name:e.originalError.name,message:e.originalError.message,code:e.originalError.code},t))}))};"addEventListener"in e?e.addEventListener("unhandledrejection",r):e.onunhandledrejection=function(e,t){r({detail:{reason:e,promise:t}})}}}}},Ot=function(e){return function(t){t.file!==e.toString()&&t.method&&(t.method=t.method.replace(/^\s+/,""))}},It={},Pt="Bugsnag JavaScript",Dt="7.14.1",Rt="https://github.com/bugsnag/bugsnag-js",Lt=f({},h.schema,v),qt={_client:null,createClient:function(e){"string"==typeof e&&(e={apiKey:e}),e||(e={});var t=[Ie,Qe(),Pe(),Je(),St,et,rt,At,kt(),Tt(),ft(),ct(),Et(),nt,at()],r=new ce(e,Lt,t,{name:Pt,version:Dt,url:Rt});return r._setDelivery(window.XDomainRequest?Ne:Ce),r._logger.debug("Loaded!"),r.leaveBreadcrumb("Bugsnag loaded",{},"state"),r._config.autoTrackSessions?r.startSession():r},start:function(e){return qt._client?(qt._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),qt._client):(qt._client=qt.createClient(e),qt._client)}};return m(["resetEventCount"].concat(l(ce.prototype)),(function(e){/^_/.test(e)||(qt[e]=function(){if(!qt._client)return console.log("Bugsnag."+e+"() was called before Bugsnag.start()");qt._client._depth+=1;var t=qt._client[e].apply(qt._client,arguments);return qt._client._depth-=1,t})})),(It=qt).Client=ce,It.Event=B,It.Session=se,It.Breadcrumb=x,It.default=qt,It}()},37047:(e,t,r)=>{e.exports=r(87739)},70420:function(e,t,r){!function(e){"use strict";function t(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(13===n&&10===e.charCodeAt(r+1)&&(n=10,r++),13!==n&&12!==n||(n=10),0===n&&(n=65533),n>=55296&&n<=56319){const t=e.charCodeAt(r+1);if(t>=56320&&t<=57343){const e=n-55296,i=t-56320;n=Math.pow(2,16)+e*Math.pow(2,10)+i,r++}}t.push(n)}return t}const n=8205,i=[[n,1],[65038,2],[127995,5],[129456,4],[917536,96]];let s;const o=[127462,127487];function a(e){var t;return void 0===s&&(s={},i.forEach((e=>{for(let t=e[0];t<=e[0]+e[1]-1;t++)s[t]=!0}))),null!==(t=s[e])&&void 0!==t&&t}function l(e){return e>=o[0]&&e<=o[1]}function u(e){if(/^[\x20-\xFF]*$/.test(e))return e;const r=[],i=t(e);let s=0;for(;s<i.length;){const e=i[s++],t=i[s];if(t===n){const e=s-1;for(s+=2;i[s]===n;)s+=2;r.push(String.fromCodePoint(...i.slice(e,s-e+1)))}else if(a(t)){const e=s-1;for(;a(i[s]);)s+=i[s]===n?2:1;r.push(String.fromCodePoint(...i.slice(e,s-e)))}else l(e)?(s+=1,r.push(String.fromCodePoint(...i.slice(s-2,2)))):r.push(String.fromCodePoint(e))}return r}class c{constructor(e){this.obeyspaces=!1,this.s=u(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let t;return t="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join("")),(null==t?void 0:t[0])?(this.pos+=t[0].length,t[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/))return"<space>";if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";const e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z*]+/);if(e)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(e=this.get()," "===e)return"<space>";return"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();const e=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(e)return String.fromCodePoint(parseInt(e.slice(e.lastIndexOf("^")+1),16))}return e}if("#"===e){if(!this.end()){let e=!1;if(/[0-9?]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){const t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}}function p(e,t){var r,n,i,s;let o=[],a=e.next();if(a)if("\\relax"===a);else if("\\noexpand"===a)a=e.next(),a&&o.push(a);else if("\\obeyspaces"===a)e.obeyspaces=!0;else if("\\space"===a||"~"===a)o.push("<space>");else if("\\bgroup"===a)o.push("<{>");else if("\\egroup"===a)o.push("<}>");else if("\\string"===a)a=e.next(),a&&("\\"===a[0]?Array.from(a).forEach((e=>o.push("\\"===e?"\\backslash":e))):"<{>"===a?o.push("\\{"):"<space>"===a?o.push("~"):"<}>"===a&&o.push("\\}"));else if("\\csname"===a){for(;"<space>"===e.peek();)e.next();let i="",s=!1,l=[];do{if(0===l.length)if(/^#[0-9?]$/.test(e.peek())){const i=e.get().slice(1);l=h(null!==(n=null!==(r=null==t?void 0:t[i])&&void 0!==r?r:null==t?void 0:t["?"])&&void 0!==n?n:"\\placeholder{}",t),a=l[0]}else a=e.next(),l=a?[a]:[];s=0===l.length,s||"\\endcsname"!==a||(s=!0,l.shift()),s||(s="<$>"===a||"<$$>"===a||"<{>"===a||"<}>"===a||a.length>1&&"\\"===a[0]),s||(i+=l.shift())}while(!s);i&&o.push("\\"+i),o=o.concat(l)}else if("\\endcsname"===a);else if(a.length>1&&"#"===a[0]){const e=a.slice(1);o=o.concat(h(null!==(s=null!==(i=null==t?void 0:t[e])&&void 0!==i?i:null==t?void 0:t["?"])&&void 0!==s?s:"\\placeholder{}",t))}else o.push(a);return o}function h(e,t){const r=e.toString().split(/\r?\n/);let n="",i="";for(const a of r){n+=i,i=" ";const e=a.match(/((?:\\%)|[^%])*/);null!==e&&(n+=e[0])}const s=new c(n);let o=[];do{o=o.concat(p(s,t))}while(!s.end());return o}function d(e){let t="",r="";for(const n of e)n&&(/[a-zA-Z*]/.test(n[0])&&(r+=t),t=/\\[a-zA-Z]+\*?$/.test(n)?" ":"",r+=n);return r}function f(e){let t=[];if(Array.isArray(e))for(const r of e)Array.isArray(r)?t=[...t,...r]:t.push(r);else t=[e];return d(t.map((e=>{var t;return null!==(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])&&void 0!==t?t:e})))}const m=[{name:"NotLess",trigger:{infix:["!","<"]},associativity:"right",precedence:246},{name:"NotLess",trigger:{infix:"\\nless"},associativity:"right",precedence:246},{name:"Less",trigger:{infix:"<"},associativity:"right",precedence:245},{name:"Less",trigger:{infix:"\\lt"},associativity:"right",precedence:245},{name:"LessEqual",trigger:{infix:["<","="]},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\le"},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\leq"},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\leqslant"},associativity:"right",precedence:265},{name:"LessNotEqual",trigger:{infix:"\\lneqq"},associativity:"right",precedence:260},{name:"NotLessNotEqual",trigger:{infix:"\\nleqq"},associativity:"right",precedence:260},{name:"LessOverEqual",trigger:{infix:"\\leqq"},associativity:"right",precedence:265},{name:"GreaterOverEqual",trigger:{infix:"\\geqq"},associativity:"right",precedence:265},{name:"Equal",trigger:{infix:"="},associativity:"right",precedence:260},{name:"StarEqual",trigger:{infix:["*","="]},associativity:"right",precedence:260},{name:"StarEqual",trigger:{infix:["\\star","="]},associativity:"right",precedence:260},{name:"PlusEqual",trigger:{infix:["+","="]},associativity:"right",precedence:260},{name:"MinusEqual",trigger:{infix:["-","="]},associativity:"right",precedence:260},{name:"SlashEqual",trigger:{infix:["/","="]},associativity:"right",precedence:260},{name:"EqualEqual",trigger:{infix:["=","="]},associativity:"right",precedence:260},{name:"EqualEqualEqual",trigger:{infix:["=","=","="]},associativity:"right",precedence:265},{name:"TildeFullEqual",trigger:{infix:"\\cong"},associativity:"right",precedence:260},{name:"NotTildeFullEqual",trigger:{infix:"\\ncong"},associativity:"right",precedence:260},{name:"Assign",trigger:{infix:[":","="]},associativity:"right",precedence:260},{name:"Assign",trigger:{infix:"\\coloneq"},associativity:"right",precedence:260},{name:"Approx",trigger:{infix:"\\approx"},associativity:"right",precedence:247},{name:"NotApprox",trigger:{infix:"\\approx"},associativity:"right",precedence:247},{name:"ApproxEqual",trigger:{infix:"\\approxeq"},associativity:"right",precedence:260},{name:"NotApproxEqual",trigger:{infix:["!","\\approxeq"]},associativity:"right",precedence:250},{name:"NotEqual",trigger:{infix:"\\ne"},associativity:"right",precedence:255},{name:"Unequal",trigger:{infix:["!","="]},associativity:"right",precedence:260},{name:"GreaterEqual",trigger:{infix:"\\ge"},associativity:"right",precedence:242},{name:"GreaterEqual",trigger:{infix:"\\geq"},associativity:"right",precedence:242},{name:"GreaterEqual",trigger:{infix:[">","="]},associativity:"right",precedence:243},{name:"GreaterEqual",trigger:{infix:"\\geqslant"},associativity:"right",precedence:265},{name:"GreaterNotEqual",trigger:{infix:"\\gneqq"},associativity:"right",precedence:260},{name:"NotGreaterNotEqual",trigger:{infix:"\\ngeqq"},associativity:"right",precedence:260},{name:"Greater",trigger:{infix:">"},associativity:"right",precedence:245},{name:"Greater",trigger:{infix:"\\gt"},associativity:"right",precedence:245},{name:"NotGreater",trigger:{infix:"\\ngtr"},associativity:"right",precedence:244},{name:"NotGreater",trigger:{infix:["!",">"]},associativity:"right",precedence:244},{name:"RingEqual",trigger:{infix:"\\circeq"},associativity:"right",precedence:260},{name:"TriangleEqual",trigger:{infix:"\\triangleq"},associativity:"right",precedence:260},{name:"DotEqual",trigger:{infix:"\\doteq"},associativity:"right",precedence:265},{name:"DotEqualDot",trigger:{infix:"\\doteqdot"},associativity:"right",precedence:265},{name:"FallingDotEqual",trigger:{infix:"\\fallingdotseq"},associativity:"right",precedence:265},{name:"RisingDotEqual",trigger:{infix:"\\fallingdotseq"},associativity:"right",precedence:265},{name:"QuestionEqual",trigger:{infix:"\\questeq"},associativity:"right",precedence:260},{name:"Equivalent",trigger:{infix:"\\equiv"},associativity:"right",precedence:260},{name:"MuchLess",trigger:{infix:"\\ll"},associativity:"right",precedence:260},{name:"MuchGreater",trigger:{infix:"\\gg"},associativity:"right",precedence:260},{name:"Precedes",trigger:{infix:"\\prec"},associativity:"right",precedence:260},{name:"Succeeds",trigger:{infix:"\\succ"},associativity:"right",precedence:260},{name:"PrecedesEqual",trigger:{infix:"\\preccurlyeq"},associativity:"right",precedence:260},{name:"SucceedsEqual",trigger:{infix:"\\curlyeqprec"},associativity:"right",precedence:260},{name:"NotPrecedes",trigger:{infix:"\\nprec"},associativity:"right",precedence:260},{name:"NotSucceeds",trigger:{infix:"\\nsucc"},associativity:"right",precedence:260},{name:"ElementOf",trigger:{infix:"\\in"},associativity:"right",precedence:240},{name:"NotElementOf",trigger:{infix:"\\notin"},associativity:"right",precedence:240},{name:"Contains",trigger:{infix:"\\ni"},associativity:"right",precedence:160},{name:"Subset",trigger:{infix:"\\subset"},associativity:"right",precedence:240},{name:"SquareSubset",trigger:{infix:"\\sqsubset"},associativity:"right",precedence:265},{name:"SquareSubsetEqal",trigger:{infix:"\\sqsubseteq"},associativity:"right",precedence:265},{name:"Superset",trigger:{infix:"\\supset"},associativity:"right",precedence:240},{name:"SquareSuperset",trigger:{infix:"\\sqsupset"},associativity:"right",precedence:265},{name:"SquareSupersetEuqal",trigger:{infix:"\\sqsupseteq"},associativity:"right",precedence:265},{name:"NotSubset",trigger:{infix:"\\nsubset"},associativity:"right",precedence:240},{name:"NotSuperset",trigger:{infix:"\\nsupset"},associativity:"right",precedence:240},{name:"SubsetEqual",trigger:{infix:"\\subseteq"},associativity:"right",precedence:240},{name:"SupersetEqual",trigger:{infix:"\\supseteq"},associativity:"right",precedence:240},{name:"NotSubsetNotEqual",trigger:{infix:"\\nsubseteq"},associativity:"right",precedence:240},{name:"NotSupersetNotEqual",trigger:{infix:"\\nsupseteq"},associativity:"right",precedence:240},{name:"SubsetNotEqual",trigger:{infix:"\\subsetneq"},associativity:"right",precedence:240},{name:"SupersetNotEqual",trigger:{infix:"\\supsetneq"},associativity:"right",precedence:240},{name:"SubsetNotEqual",trigger:{infix:"\\varsupsetneqq"},associativity:"right",precedence:240},{name:"SupersetNotEqual",trigger:{infix:"\\varsupsetneq"},associativity:"right",precedence:240},{name:"Between",trigger:{infix:"\\between"},associativity:"right",precedence:265}],g="Parentheses",y="Identity",v="LatexTokens",b="List",x="Missing",w="Nothing",_="Sequence",E="Sequence2",S="Add",A="Derivative",N="Divide",k="Exp",M="InverseFunction",C="Multiply",T="Negate",O="Power",I="Prime",P="Root",D="Sqrt",R="Subtract",L="ComplexInfinity",q="Pi",$="ExponentialE",B="ImaginaryI";function z(e){return Boolean(e)&&"object"==typeof e&&"num"in e}function F(e){return Boolean(e)&&"object"==typeof e&&"sym"in e}function U(e){return Boolean(e)&&"object"==typeof e&&"str"in e}function j(e){return Boolean(e)&&"object"==typeof e&&"fn"in e}function G(e){return"number"==typeof e?e:z(e)?parseFloat(e.num):null}function V(e){return"object"==typeof e&&"str"in e?e.str:"string"!=typeof e||e.length<2||"'"!==e[0]||"'"!==e[e.length-1]?null:e.substring(1,e.length-1)}function H(e){var t,r,n,i,s;let o=NaN,a=NaN;if("number"==typeof e)o=e,a=1;else if(z(e))o=null!==(t=G(e))&&void 0!==t?t:NaN,a=1;else{if(Y(e))return null;{const t=X(e);if(t===O){const t=G(ee(e,2));if(1===t)o=G(ee(e,1)),a=1;else{if(-1!==t)return null;o=1,a=G(ee(e,1))}}else t===N?(o=null!==(r=G(ee(e,1)))&&void 0!==r?r:NaN,a=null!==(n=G(ee(e,2)))&&void 0!==n?n:NaN):t===C&&X(ee(e,2))===O&&-1===G(ee(ee(e,2),2))&&(o=null!==(i=G(ee(e,1)))&&void 0!==i?i:NaN,a=null!==(s=G(ee(ee(e,2),1)))&&void 0!==s?s:NaN)}}return Number.isInteger(o)&&Number.isInteger(a)?(a<0&&(a=-a,o=-o),[o,a]):null}function W(e){return Array.isArray(e)?e[0]:j(e)?e.fn[0]:null}function Y(e){return null===e||!Array.isArray(e)&&("object"!=typeof e||!("fn"in e))}function X(e){const t=W(e);return"string"==typeof t?t:""}function Z(e){return"string"==typeof e?e.length>=2&&"'"===e[0]&&"'"===e[e.length-1]?null:e:F(e)?e.sym:null}function Q(e){return Array.isArray(e)?e.slice(1):j(e)?e.fn.slice(1):[]}function K(e,t){return Array.isArray(e)?e.map(((e,r)=>0===r?e:t(e))):j(e)?e.fn.map(((e,r)=>0===r?e:t(e))):e}function J(e,t){let r=null;if(Array.isArray(e)&&(r=e),j(e)&&(r=e.fn),null===r)return[];let n=1;const i=[];for(;n<r.length;)i.push(t(r[n])),n+=1;return i}function ee(e,t){return Array.isArray(e)?e[t]:j(e)?e.fn[t]:null}function te(e){return Array.isArray(e)?Math.max(0,e.length-1):j(e)?Math.max(0,e.fn.length-1):0}function re(e){var t;const r=H(e);if(null!==r){const[e,t]=r;if(!Number.isNaN(e)&&!Number.isNaN(t))return 0===e?"NumberZero":1!==t?"RationalNumber":ie.has(e)?"PrimeNumber":e>=1&&e<se?"CompositeNumber":e>0?"NaturalNumber":"Integer"}return e===L?"ComplexInfinity":X(e)===O&&X(ee(e,2))===N&&1===ee(ee(e,2),1)&&2===ee(ee(e,2),2)&&ie.has(G(ee(e,1)))?"IrrationalNumber":Number.isFinite(null!==(t=G(e))&&void 0!==t?t:NaN)?"RealNumber":"SignedInfinity"}function ne(e){return"object"==typeof e&&"dict"in e?e.dict:null}const ie=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]),se=7919,oe=[{name:"Overscript",trigger:{infix:"\\overset"},precedence:700},{name:"Underscript",trigger:{infix:"\\underset"},precedence:700},{name:"Increment",trigger:{postfix:["+","+"]},precedence:880},{name:"Decrement",trigger:{postfix:["-","-"]},precedence:880},{name:"PreIncrement",trigger:{prefix:["+","+"]},precedence:880},{name:"PreDecrement",trigger:{prefix:["-","-"]},precedence:880},{name:"Ring",trigger:{infix:"\\circ"},precedence:265},{name:"Transpose",trigger:{superfix:"T"}},{name:"ConjugateTranspose",trigger:{superfix:"H"}},{name:"StringJoin",trigger:{infix:["\\lt","\\gt"]},precedence:780},{name:"Starstar",trigger:{infix:["\\star","\\star"]},precedence:780},{name:"PartialDerivative",trigger:{prefix:"\\partial"},parse:(e,t,r)=>{var n;let i=!1,s=w,o=w;for(;!i;)t.skipSpace(),t.match("_")?o=t.matchRequiredLatexArgument():t.match("^")?s=t.matchRequiredLatexArgument():i=!0;X(o)===_&&(o=[b,...Q(o)]);let a=null!==(n=t.matchRequiredLatexArgument())&&void 0!==n?n:w;return a!==w&&(a=[a,...t.matchArguments("group")]),[null,["PartialDerivative",a,o,s]]},serialize:(e,t)=>{let r="\\partial";const n=ee(t,1),i=ee(t,2),s=ee(t,3);return null!==i&&i!==w&&(W(i)===b?r+="_{"+e.serialize([_,...Q(i)])+"}":r+="_{"+e.serialize(i)+"}"),null!==s&&s!==w&&(r+="^{"+e.serialize(s)+"}"),null!==n&&n!==w&&(r+=e.serialize(n)),r},precedence:740},{name:"OverBar",trigger:{symbol:"\\overline"},requiredLatexArg:1},{name:"UnderBar",trigger:{symbol:"\\underline"},requiredLatexArg:1},{name:"OverVector",trigger:{symbol:"\\vec"},requiredLatexArg:1},{name:"OverTile",trigger:{symbol:"\\tilde"},requiredLatexArg:1},{name:"OverHat",trigger:{symbol:"\\hat"},requiredLatexArg:1},{name:"OverHat",trigger:{symbol:"\\hat"},requiredLatexArg:1},{name:"OverRightArrow",trigger:{symbol:"\\overrightarrow"},requiredLatexArg:1},{name:"OverLeftArrow",trigger:{symbol:"\\overleftarrow"},requiredLatexArg:1},{name:"OverRightDoubleArrow",trigger:{symbol:"\\Overrightarrow"},requiredLatexArg:1},{name:"OverLeftHarpoon",trigger:{symbol:"\\overleftharpoon"},requiredLatexArg:1},{name:"OverRightHarpoon",trigger:{symbol:"\\overrightharpoon"},requiredLatexArg:1},{name:"OverLeftRightArrow",trigger:{symbol:"\\overleftrightarrow"},requiredLatexArg:1},{name:"OverBrace",trigger:{symbol:"\\overbrace"},requiredLatexArg:1},{name:"OverLineSegment",trigger:{symbol:"\\overlinesegment"},requiredLatexArg:1},{name:"OverGroup",trigger:{symbol:"\\overgroup"},requiredLatexArg:1}];function ae(e,t){return"paren"}function le(e,t){return"paren"}function ue(e,t){return t>1?"solidus":"radical"}function ce(e,t){return t>3?"inline-solidus":"quotient"}function pe(e){return"<space>"===e||"\\qquad"===e||"\\quad"===e||"\\enskip"===e||"\\;"===e||"\\,"===e||"\\ "===e||"~"===e}function he(e,t,r){return(n,i,s)=>{if(s>=t)return[n,null];i.skipSpace(),i.match(r);const o=[e,null!=n?n:w];let a=!1;for(;!a;){for(a=!0,i.skipSpace();i.match(r);)o.push(w),i.skipSpace();if(i.atEnd)o.push(w);else{const e=i.matchExpression(t);o.push(null!=e?e:w),a=null===e}a||(i.skipSpace(),a=!i.match(r))}return[null,o]}}function de(e){return(t,r)=>Q(r).map((e=>t.serialize(e))).join(e)}function fe(e,t){return console.assert(W(t)===v),Q(t).map((t=>{const r=V(t);return null===r?e.serialize(t):"<{>"===r?"{":"<}>"===r?"}":"<$>"===r?"$":"<$$>"===r?"$$":"<space>'"===r?" ":r})).join("")}const me=[{name:v,serialize:fe},{name:g,trigger:{matchfix:"("},parse:(e,t,r)=>{var n;const i=t.index;if(!t.match("("))return[e,null];let s=!1,o=!0,a=!1,l=0,u="";for(;!s&&o;){const e=t.next();t.atEnd||")"===e?s=!0:"\\mathtt"===e?(t.match("<{>"),a=!0):pe(e)||(/^[0-9a-zA-Z]$/.test(e)?(l=Math.max(l,parseInt(e,36)),u+=e):o=!1),a&&t.match("<}>")}if(t.skipSpace(),o&&t.match("_")){const r=null!==(n=G(t.matchRequiredLatexArgument()))&&void 0!==n?n:NaN;return!isFinite(r)||r<2||r>36||l>=r?(t.onError({code:"base-out-of-range"}),[e,w]):[e,["BaseForm",parseInt(u,r),r]]}t.index=i;const c=t.matchBalancedExpression("(",")",t.onError);return c?X(c)===_?[e,[g,...Q(c)]]:[e,[g,c]]:[e,[g]]},serialize:(e,t)=>e.wrapString(de(",")(e,t),le(t,e.level)),separator:",",closeFence:")",precedence:20},{name:b,trigger:{matchfix:"\\lbrack"},separator:",",closeFence:"\\rbrack",precedence:20,parse:(e,t,r)=>{if(null===e){const r=t.matchBalancedExpression("\\lbrack","\\rbrack",t.onError);return r?X(r)===_?[e,[b,...Q(r)]]:[e,[b,r]]:[null,[b]]}return[e,null]}},{name:"BaseForm",serialize:(e,t)=>{var r,n;const i=null!==(r=G(ee(t,2)))&&void 0!==r?r:NaN;if(isFinite(i)&&i>=2&&i<=36){const e=null!==(n=G(ee(t,1)))&&void 0!==n?n:NaN;if(isFinite(e)){let t=Number(e).toString(i),r=0;if(2===i||10===i?r=4:16===i?r=2:i>16&&(r=4),r>0){const e=t;t="";for(let n=0;n<e.length;n++)n>0&&n%r==0&&(t="\\, "+t),t=e[e.length-n-1]+t}return`(\\mathtt{${t}})_{${i}}`}}return"\\operatorname{BaseForm}("+e.serialize(ee(t,1))+", "+e.serialize(ee(t,2))+")"}},{name:"Set",trigger:{matchfix:"\\lbrace"},separator:",",closeFence:"\\rbrace",precedence:20},{name:_,trigger:{infix:","},parse:he(_,20,","),serialize:de(", "),precedence:20},{name:E,trigger:{infix:";"},parse:he(E,19,";"),serialize:de("; "),precedence:19},{name:x,trigger:"\\placeholder",serialize:"\\placeholder",requiredLatexArg:1},{name:"Subscript",trigger:{infix:"_"},precedence:720,serialize:(e,t)=>2===te(t)?e.serialize(ee(t,1))+"_{"+e.serialize(ee(t,2))+"}":"_{"+e.serialize(ee(t,1))+"}",parse:(e,t,r)=>{const n=t.matchRequiredLatexArgument();return e?[null,["Subscript",e,n]]:[null,["Subscript",n]]}},{name:"Superplus",trigger:{superfix:"+"}},{name:"Subplus",trigger:{subfix:"+"}},{name:"Superminus",trigger:{superfix:"-"}},{name:"Subminus",trigger:{subfix:"-"}},{name:"Superstar",trigger:{superfix:"*"}},{name:"Superstar",trigger:{superfix:"\\star"}},{name:"Substar",trigger:{subfix:"*"}},{name:"Substar",trigger:{subfix:"\\star"}},{name:"Superdagger",trigger:{superfix:"\\dagger"}},{name:"Superdagger",trigger:{superfix:"\\dag"}},{name:I,trigger:{superfix:"\\prime"},arguments:"group"},{trigger:{superfix:"\\doubleprime"},parse:(e,t)=>[null,[I,null!=e?e:w,2]],arguments:"group"},{name:M,serialize:(e,t)=>e.serialize(ee(t,1))+"^{-1}"},{name:A,trigger:"D",parse:(e,t)=>[e,[A,1]],serialize:(e,t)=>{var r;const n=null!==(r=G(ee(t,1)))&&void 0!==r?r:NaN;if(!isFinite(n))return"";const i=e.serialize(ee(t,2));return 1===n?i+"^{\\prime}":2===n?i+"^{\\doubleprime}":i+"^{("+Number(n).toString()+")}"}},{name:"Piecewise",trigger:{environment:"cases"},parse:(e,t)=>[e,["Piecewise",t.matchTabular()]],serialize:(e,t)=>{if(X(ee(t,1))!==b)return"";const r=Q(ee(t,1));let n="",i="";for(const s of r){n+=i;const t=ee(s,1);if(null!==t){n+=e.serialize(t);const r=ee(s,2);null!==r&&(n+="&"+e.serialize(r))}i="\\\\"}return"\\begin{cases}"+n+"\\end{cases}"}}];function ge(e,t){const r=be(e),n=be(t);if(r<n)return-1;if(r>n)return 1;let i=we(e);isNaN(i)&&(i=Number(1/0));let s=we(t);if(isNaN(s)&&(s=Number(1/0)),i<s)return-1;if(i>s)return 1;const o=xe(e),a=xe(t);if(o===a)for(let l=1;l<=o;l++){const r=ge(ee(e,l),ee(t,l));if(0!==r)return r}return a-o}function ye(e,t){var r;if(0===e)return-1/0;const n=X(e);if(n===O){const t=null!==(r=G(ee(e,2)))&&void 0!==r?r:NaN;return isFinite(t)?t:0}if(n===C){let r=0;return Q(e).forEach((e=>{r+=ye(e,t)})),r}return t.includes(Z(e))?1:0}function ve(e,t){var r;const n=X(e);if(n===O){if(Z(ee(e,1))===t){const t=null!==(r=G(ee(e,2)))&&void 0!==r?r:NaN;if(isFinite(t))return t}return 0}if(n===C){let r=0;for(const n of Q(e))r+=ve(n,t);return r}return Z(e)===t?1:0}function be(e){return"string"==typeof e?e:F(e)?e.sym:W(e)?Q(e).map(be).join(" "):""}function xe(e){return W(e)?Q(e).map(xe).reduce(((e,t)=>e+t),0):"string"==typeof e||Z(e)?1:0}function we(e){var t;return W(e)?NaN:"number"==typeof e?e:z(e)?null!==(t=G(e))&&void 0!==t?t:NaN:0}function _e(e,t,r){const n=ye(e,r),i=ye(t,r);if(n<i)return 1;if(n>i)return-1;for(const a of r){const r=ve(e,a),n=ve(t,a);if(r!==n)return n-r}const s=be(e),o=be(t);return s>o?-1:s<o?1:ge(e,t)}function Ee(e,t,r){var n;let i=Q(r);if(0===i.length)return r;i=i.map((r=>Ee(e,t,r)));const s=X(r);if(s===S)i.sort(((e,r)=>_e(e,r,t)));else{const t=e.getFunctionDefinition(s);null!==(n=null==t?void 0:t.commutative)&&void 0!==n&&n&&i.sort(ge)}return[W(r),...i]}function Se(e){const t=W(e);return t?t===g&&1===te(e)?Se(ee(e,1)):K(e,Se):e}function Ae(e){if(null===e)return null;const t=W(e=Se(e));return t===O&&2===te(e)?[O,ee(e,1),Ne(ee(e,2))]:t===N&&2===te(e)?[C,[O,ee(e,1),-1],ee(e,2)]:[O,e,-1]}function Ne(e){if(null===e)return e;if("number"==typeof(e=Se(e)))e=-e;else if(e&&z(e))e="-"===e.num[0]?{num:e.num.slice(1)}:{num:"-"+e.num};else{const t=X(e),r=te(e);if(t===T&&1===r)return ee(e,1);if(t===C){let t=ee(e,1);return t="number"==typeof t?-t:z(t)?"-"===t.num[0]?{num:t.num.slice(1)}:{num:"-"+t.num}:[T,t],[C,t,...Q(e).slice(1)]}if(t===g&&1===r)return Ne(ee(ee(e,1),1));e=[T,e]}return e}function ke(e,t){const r=W(e);if(!r)return e;if(e=K(e,(e=>ke(e,t))),r!==t)return e;const n=Q(e);let i=[];for(let s=0;s<n.length;s++)X(n[s])===t?i=i.concat(Q(n[s])):i.push(n[s]);return[r,...i]}function Me(e,t){const r=X(e),n=t.getFunctionDefinition(r);if(null==n?void 0:n.involution){const t=Q(e);if(1===t.length&&X(t[0])===r)return ke(t[0],r)}return K(e,(e=>Me(e,t)))}function Ce(e,t){const r=X(e),n=t.getFunctionDefinition(r);return(null==n?void 0:n.idempotent)?ke(e,r):K(e,(e=>Ce(e,t)))}function Te(e,t){const r=X(e),n=t.getFunctionDefinition(r);return(null==n?void 0:n.associative)?ke(e,r):K(e,(e=>Te(e,t)))}function Oe(e,t){const r=W(e);if(!r)return e;if(r!==S)return K(e,(e=>Oe(e)));let n=Q(e=ke(Se(e),S));n=n.map((e=>Oe(e))).filter((e=>0!==G(e)));const i=n.length;return 0===i?0:1===i?n[0]:[S,...n]}function Ie(e,t){const r=W(e);if(!r)return e;if(r!==N)return K(e,(e=>Ie(e)));if(2!==te(e))return e;const n=Ie(ee(e,1)),i=Ie(ee(e,2));return 1===G(i)?n:1===G(n)?Ae(i):[C,n,Ae(i)]}function Pe(e,t){const r=W(e);return r?r!==k?K(e,(e=>Pe(e))):1!==te(e)?e:[O,$,Pe(ee(e,1))]:e}function De(e,t){var r;if(Y(e))return e;const n=X(e);if(n!==b&&n!==_&&n!==E)return K(e,(e=>De(e,t)));const i=n===b,s=Q(e),o=[];if(i){for(let e of s){e=De(e,t);const r=X(e);if(r===y){const t=ee(e,1);null!=t&&o.push(t)}else r!==w&&o.push(e)}return[b,...o]}const a=t.getFunctionDefinition(n),l=null!==(r=null==a?void 0:a.sequenceHold)&&void 0!==r&&r;for(let u of s){u=De(u,t);const r=X(u);if(r===y){const e=ee(u,1);null!=e&&o.push(e)}else if(r!==n||l)o.push(u);else{const t=W(e);for(const e of Q(u))X(e)===r?o.push([t,...Q(e)]):o.push(e)}}return[W(e),...o]}function Re(e){var t,r;const n=X(e);if(n===D)return 2;if(n===P)return null!==(t=G(ee(e,2)))&&void 0!==t?t:NaN;if(n!==O)return 1;const i=ee(e,2);if(!i)return 1;if(X(i)===O&&-1===G(ee(i,2))){const e=null!==(r=G(ee(i,1)))&&void 0!==r?r:NaN;if(isFinite(e))return e}return 1}function Le(e){const t=Q(e),r=[],n=[];for(const i of t)2===Re(i)?r.push(ee(i,1)):n.push(i);return[r,n]}function qe(e,t){var r;const n=W(e);if(!n)return e;if(e=K(e,(e=>qe(e))),n!==C)return e;e=ke(Se(e),C);const[i,s]=Le(e);let o;o=0===i.length?s:1===i.length?Q(e=[C,...s,[O,i[0],[O,2,-1]]]):Q(e=[C,...s,[O,[C,...i],[O,2,-1]]]);let a=!1,l=!1;if(o=o.map((e=>{var t;if(X(e)===T)return l=!0,a=!a,ee(e,1);const r=null!==(t=G(e))&&void 0!==t?t:NaN;return r<0?(l=!0,a=!a,-r):e})),a){const e=null!==(r=G(o[0]))&&void 0!==r?r:NaN;o=isFinite(e)?Q(ke([C,-e,...o.slice(1)],C)):Q(ke([C,-1,...o],C))}else o=Q(ke([C,...o],C));return o=o.filter((e=>1!==G(e))),0===o.length?1:1===o.length?o[0]:[C,...o]}function $e(e,t){var r,n;const i=W(e);if(!i)return e;if(i!==O)return K(e,(e=>$e(e)));if(2!==te(e=Se(e)))return e;const s=$e(ee(e,1)),o=null!==(r=G(s))&&void 0!==r?r:NaN,a=null!==(n=G($e(ee(e,2))))&&void 0!==n?n:NaN;return 0===a?1:1===a?s:-1===o&&-1===a?-1:1===o&&-1===a||1===o?1:e}function Be(e,t){const r=W(e);if(r===T){const t=ee(e=Se(e),1);if("number"==typeof t)e=-t;else{if(!t||!z(t)){if(X(t)===C){let e=ee(t,1);if("number"==typeof e)e=-e;else{if(!z(e))return[C,-1,e,...Q(t).slice(1)];e="-"===e.num[0]?{num:e.num.slice(1)}:{num:"-"+e.num}}return[C,e,...Q(t).slice(1)]}return[C,-1,t]}if(0===G(t))return 0;e="-"===t.num[0]?{num:t.num.slice(1)}:"+"===t.num[0]?{num:"-"+t.num.slice(1)}:{num:"-"+t.num}}}else if(r)return K(e,(e=>Be(e)));return e}function ze(e,t){if(W(e))return K(e,(e=>ze(e)));if("number"==typeof e){if(isNaN(e))return{num:"NaN"};if(!isFinite(e)&&e>0)return{num:"Infinity"};if(!isFinite(e)&&e<0)return{num:"-Infinity"}}else if(z(e)){if(isNaN(Number(e.num)))return{num:"NaN"};if(e.num.endsWith("n"))return{num:e.num.slice(0,-1)}}return e}function Fe(e,t){const r=W(e);if(!r)return e;if(r!==R)return K(e,(e=>Fe(e)));if(2!==te(e))return e;const n=Fe(ee(e,1)),i=G(n),s=Fe(ee(e,2)),o=G(s);return 0===i&&0===o?0:Fe([S,n,Ne(s)])}function Ue(e,t){const r=W(e);if(!r)return e;if(r!==P&&r!==D)return K(e,(e=>Ue(e)));if(te(e)<1)return e;const n=Ue(ee(e,1));let i=2;return te(e)>1&&(i=$e(ee(e,2))),1===G(i)?n:[O,n,[N,1,i]]}function je(e){if("string"==typeof e){const t=Number(e);if("+"===e[0]&&(e=e.slice(1)),t.toString()===e)return isNaN(t)||!isFinite(t)?t.toString():t}return e}function Ge(e,t){if(null===e)return null;if(Array.isArray(e))return e.map(((e,t)=>0===t?e:Ge(e)));if("object"==typeof e)if(1===Object.keys(e).length){if(z(e)){const t=je(e.num);return"number"==typeof t?t:{num:t}}if(j(e))return e.fn.map((e=>Ge(e)));if(F(e))return e.sym}else j(e)&&(e.fn=e.fn.map((e=>Ge(e))));return e}function Ve(e,t){if("number"==typeof e||"string"==typeof e)return e;if(Array.isArray(e))return e.map((e=>Ve(e)));if("object"==typeof e){if("num"in e){const t=je(e.num);return"number"==typeof t?t:{num:t}}if("fn"in e)return e.fn.map((e=>Ve(e)));if("dict"in e)return{dict:Object.fromEntries(Object.entries(e.dict).map((e=>[e[0],Ve(e[1])])))}}return null}function He(e,t){return"number"==typeof e?{num:e.toString()}:"string"==typeof e?{sym:e}:Array.isArray(e)&&e.length>0?{fn:e.map((e=>He(e)))}:"object"==typeof e&&"fn"in e?Object.assign(Object.assign({},e),{fn:e.fn.map((e=>He(e)))}):e}function We(e,t){const r=t.getVars(e);return Ee(t,Array.from(r).sort(),e)}function Ye(e,t){return e}function Xe(e,t){return t.format(e,["canonical-number","canonical-exp","canonical-root","canonical-subtract","canonical-divide","canonical-power","canonical-multiply","canonical-negate","canonical-add","flatten","canonical-list","canonical-domain","sorted","full"])}function Ze(e,t){return Te(Ce(Me(e,t),t),t)}function Qe(e,t,r){let n=e;for(const i of t){const e={canonical:Xe,"canonical-add":Oe,"canonical-divide":Ie,"canonical-exp":Pe,"canonical-list":De,"canonical-multiply":qe,"canonical-power":$e,"canonical-negate":Be,"canonical-number":ze,"canonical-root":Ue,"canonical-subtract":Fe,full:Ge,flatten:Ze,sorted:We,"stripped-metadata":Ve,"object-literal":He,"canonical-domain":Ye}[i];if(!e)return console.error("Unknown form "+i),null;n=e(n,r)}return n}function Ke(e){var t;if(X(e)!==C)return[null,null];const r=[],n=[],i=Q(e);for(const s of i)if(X(s)===O)if(X(ee(s,2))===T)n.push([O,ee(s,1),ee(ee(s,2),1)]);else{const e=null!==(t=G(ee(s,2)))&&void 0!==t?t:NaN;-1===e?n.push(ee(s,1)):e<0?n.push([O,ee(s,1),Ne(ee(s,2))]):r.push(s)}else r.push(s);return[r,n]}function Je(e,t,r,n){return n=null!=n?n:2,"solidus"===t?e.wrapShort(r)+"^{1\\/"+e.serialize(n)+"}":"quotient"===t?e.wrapShort(r)+"^{\\frac{1}{"+e.serialize(n)+"}}":2===G(n)?"\\sqrt{"+e.serialize(r)+"}":"\\sqrt["+e.serialize(n)+"]{"+e.serialize(r)+"}"}function et(e,t,r){if(!t.match("\\sqrt"))return[e,null];const n=t.matchOptionalLatexArgument(),i=t.matchRequiredLatexArgument();return null===i?null!==n?[e,[P,w,n]]:[e,[D]]:null!==n?[e,[P,i,n]]:[e,[D,i]]}function tt(e,t,r){if(276<r)return[e,null];const n=t.index;if(!t.match("-"))return[e,null];const i=t.matchExpression(null===e?400:277);return null===i?(t.index=n,[e,null]):null===e?[null,[T,i]]:[null,[R,e,i]]}function rt(e,t,r){if(275<r)return[e,null];const n=t.index;if(!t.match("+"))return[e,null];const i=t.matchExpression(null===e?400:275);return null===i?(t.index=n,[e,null]):null===e?[null,i]:t.applyOperator(S,e,i)}function nt(e,t){var r,n;e.level-=1;const i=X(t);let s="",o=ee(t,1),a=!Number.isNaN(null!==(r=G(o))&&void 0!==r?r:NaN);if(i===T)s="-"+e.wrap(o,276);else if(i===S){s=e.serialize(o);const r=te(t)+1;for(let i=2;i<r;i++){o=ee(t,i);const r=null!==(n=G(o))&&void 0!==n?n:NaN,l=!Number.isNaN(r);let u=!1;if(null!==o&&a){const t=H(o);if(t){const[r,n]=t;isFinite(r)&&isFinite(n)&&1!==n&&(s+=e.options.invisiblePlus+e.serialize(o),u=!0)}}if(!u)if(r<0)s+=e.serialize(o);else if(X(o)===T)s+=e.wrap(o,275);else{const t=e.wrap(o,275);"-"===t[0]||"+"===t[0]?s+=t:s=s+"+"+t}a=l}}else if(i===R){const r=ee(t,2);s=null!==r?e.wrap(o,275)+"-"+e.wrap(r,275):e.wrap(o,275)}return e.level+=1,s}function it(e,t){var r;if(null===t)return"";e.level-=1;let n="";const[i,s]=Ke(t);if(null!==i&&null!==s&&s.length>0&&(n=1===s.length&&1===s[0]?0===i.length?"1":1===i.length?e.serialize(i[0]):it(e,[C,...i]):e.serialize([N,1===i.length?i[0]:[C,...i],1===s.length?s[0]:[C,...s]])),n)return e.level+=1,n;let o=!1,a=null;const l=te(t)+1;for(let u=1;u<l;u++)if(a=ee(t,u),null!==a){let t;"number"==typeof a||z(a)?(t=e.serialize(a),"-1"!==t||n?("-"===t[0]&&(t=t.slice(1),o=!o),n=n?d([n,e.options.multiply,t]):t):n="-"):X(a)!==O||isNaN(G(null!==(r=ee(a,1))&&void 0!==r?r:NaN))?(X(a)===T&&(a=ee(a,1),o=!o),t=e.wrap(a,390),n=n?e.options.invisibleMultiply?d([n,e.options.invisibleMultiply,t]):d([n,t]):t):n=n?d([n,e.options.multiply,e.serialize(a)]):e.serialize(a)}return e.level+=1,o?"-"+n:n}function st(e,t,r){var n,i,s,o;if(!t.match("\\frac"))return[e,null];const a=null!==(n=t.matchRequiredLatexArgument())&&void 0!==n?n:x,l=null!==(i=t.matchRequiredLatexArgument())&&void 0!==i?i:x;if("PartialDerivative"===X(a)&&("PartialDerivative"===X(l)||X(l)===C&&"PartialDerivative"===X(ee(l,1)))){const r=null!==(s=ee(a,3))&&void 0!==s?s:w;let n=ee(a,1);null!==n&&n!==w||(n=null!==(o=t.matchExpression())&&void 0!==o?o:w);let i=[];if(X(l)===C)for(const e of Q(l))"PartialDerivative"===W(e)&&i.push(ee(e,2));else i.push(ee(l,2));return i.length>1&&(i=[b,...i]),[e,["PartialDerivative",n,i,r===w?1:r]]}return[e,[N,a,l]]}function ot(e,t){if(console.assert(X(t)===N),1===te(t))return e.serialize(ee(t,1));const r=ce(t,e.level);if("inline-solidus"===r||"nice-solidus"===r){const n=e.wrapShort(ee(t,1)),i=e.wrapShort(ee(t,2));return"nice-solidus"===r?`^{${n}}\\!\\!/\\!_{${i}}`:`${n}\\/${i}`}return"reciprocal"===r?e.wrap(ee(t,1))+e.wrap(ee(t,2))+"^{-1}":"factor"===r?"\\frac{1}{"+e.serialize(ee(t,2))+"}"+e.wrap(ee(t,1)):"\\frac{"+e.serialize(ee(t,1))+"}{"+e.serialize(ee(t,2))+"}"}function at(e,t){const r=ee(t,1),n=ee(t,2);if(null===n)return e.serialize(r);if(null===r)return"";const i=X(t);if(i===D||i===P)return Je(e,ue(t,e.level),ee(t,1),ee(t,2));const s=G(n);if(-1===s)return e.serialize([N,"1",r]);if(s<0)return e.serialize([N,"1",[O,r,-s]]);if(X(n)===N){if(1===G(ee(n,1)))return Je(e,ue(t,e.level),r,ee(n,2))}else if(X(n)===O&&-1===G(ee(n,2)))return Je(e,ue(t,e.level),r,ee(n,1));return e.wrapShort(r)+"^{"+e.serialize(n)+"}"}function lt(e,t,r){var n;const i=t.next();let s=!1,o=0;if(t.skipSpace(),t.match("^")){if(t.skipSpace(),t.match("<{>")){t.skipSpace(),t.match("-")&&t.match("1")&&(s=!0);do{t.match("\\doubleprime")&&(o+=2),t.match("\\prime")&&(o+=1),t.match("'")&&(o+=1)}while(!t.match("<}>")&&!t.atEnd)}let e=!1;for(;!e;)t.skipSpace(),t.match("\\doubleprime")?o+=2:t.match("\\prime")||t.match("'")?o+=1:e=!0}let a=null!==(n={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arctan","\\arcsec":"Arcsec","\\arccsc":" Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arcosh","\\artanh":"Artanh","\\arcsech":"Arcsech","\\arccsch":"Arcsch","\\ch":"Cosh","\\cos":"Cos","\\cosec":"Csc","\\cosh":"Csch","\\cot":"Cot","\\cotg":"Cot","\\coth":"Coth","\\csc":"Csc","\\ctg":"Cot","\\cth":"Coth","\\sec":"Sec","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tanh":"Tanh","\\tg":"Tan","\\th":"Tanh"}[i])&&void 0!==n?n:i;s&&(a=[M,a]),o>=1&&(a=[A,o,a]);const l=t.matchArguments("implicit");return null===l?[null,a]:[null,[a,...l]]}function ut(e,t,r){if(!t.match("\\int"))return[e,null];let n=w,i=w,s=!1;for(;!s;)t.skipSpace(),t.match("_")?i=t.matchRequiredLatexArgument():t.match("^")?n=t.matchRequiredLatexArgument():s=!0;const o=t.matchBalancedExpression("<{>","<}>");return[e,["Integral",null!=o?o:"",n,i]]}function ct(e,t){return""}function pt(e){return Array.isArray(e)?e.length:1}function ht(e){return f(e)}function dt(e,t){var r,n,i,s,o,a,l,u,c,p,h,d,f,m,g;const y={lookahead:1,name:new Map,prefix:[],infix:[],postfix:[],matchfix:[],superfix:[],subfix:[],symbol:[],environment:new Map};for(const v of e)void 0===v.parse&&(v.parse=v.name),"string"==typeof v.trigger&&(v.trigger={symbol:v.trigger}),"string"==typeof v.serialize&&void 0!==(null===(r=v.trigger)||void 0===r?void 0:r.symbol)&&/#[0-9]/.test(v.serialize)&&t({code:"unexpected-argument",arg:v.name}),void 0===v.serialize&&(void 0!==(null===(n=v.trigger)||void 0===n?void 0:n.postfix)?v.serialize="#1"+ht(v.trigger.postfix):void 0!==(null===(i=v.trigger)||void 0===i?void 0:i.prefix)?v.serialize=ht(v.trigger.prefix)+"#1":void 0!==(null===(s=v.trigger)||void 0===s?void 0:s.infix)?v.serialize="#1"+ht(v.trigger.infix)+"#2":void 0!==(null===(o=v.trigger)||void 0===o?void 0:o.symbol)?v.serialize=ht(v.trigger.symbol):void 0!==(null===(a=v.trigger)||void 0===a?void 0:a.superfix)?v.serialize="#1^{"+ht(null===(l=v.trigger)||void 0===l?void 0:l.superfix)+"}":void 0!==(null===(u=v.trigger)||void 0===u?void 0:u.subfix)?v.serialize="#1_{"+ht(null===(c=v.trigger)||void 0===c?void 0:c.subfix)+"}":v.serialize=""),void 0!==(null===(p=v.trigger)||void 0===p?void 0:p.infix)&&(void 0===v.precedence&&t({code:"syntax-error",arg:"Infix operators require a precedence"}),v.associativity||(v.associativity="non")),void 0!==(null===(h=v.trigger)||void 0===h?void 0:h.symbol)&&(v.arguments=null!==(d=v.arguments)&&void 0!==d?d:"",v.optionalLatexArg=null!==(f=v.optionalLatexArg)&&void 0!==f?f:0,v.requiredLatexArg=null!==(m=v.requiredLatexArg)&&void 0!==m?m:0),void 0!==(null===(g=v.trigger)||void 0===g?void 0:g.matchfix)&&("function"===v.parse||v.closeFence||t({code:"syntax-error",arg:"Matchfix operators require a close fence or a custom parse function"})),void 0!==v.trigger&&(["infix","prefix","postfix","symbol","matchfix","superfix","subfix"].forEach((e=>{const t=pt(v.trigger[e]);y.lookahead=Math.max(y.lookahead,t),void 0===y[e][t]&&(y[e][t]=new Map),y[e][t].set(ht(v.trigger[e]),v)})),void 0!==v.trigger.environment&&y.environment.set(v.trigger.environment,v)),v.name&&y.name.set(ht(v.name),v),void 0!==v.trigger||v.name||t({code:"syntax-error",arg:"Need at least a trigger or a name"});return y}const ft={algebra:[{name:"To",trigger:{infix:"\\to"},precedence:270}],arithmetic:[{trigger:{symbol:"\\infty"},parse:{num:"Infinity"}},{name:L,trigger:{symbol:["\\tilde","\\infty"]},serialize:"\\tilde\\infty"},{name:L,trigger:{symbol:["\\tilde","<{>","\\infty","<}>"]},serialize:"\\tilde\\infty"},{name:q,trigger:{symbol:"\\pi"}},{name:q,trigger:{symbol:"π"},serialize:"\\pi"},{name:$,trigger:{symbol:"e"},serialize:"e"},{name:B,trigger:{symbol:"i"},serialize:"\\imaginaryI"},{name:B,trigger:{symbol:"\\imaginaryI"}},{name:S,trigger:{prefix:"+",infix:"+"},parse:rt,serialize:nt,associativity:"both",precedence:275},{name:T,trigger:{prefix:"-"},parse:tt,associativity:"left",precedence:665},{name:R,trigger:{infix:"-"},parse:tt,associativity:"both",precedence:275},{name:C,trigger:{infix:"\\times"},serialize:it,associativity:"both",precedence:390},{name:C,trigger:{infix:"\\cdot"},serialize:it,associativity:"both",precedence:390},{name:C,trigger:{infix:"*"},serialize:it,associativity:"both",precedence:390},{name:N,trigger:"\\frac",parse:st,serialize:ot,requiredLatexArg:2},{name:N,trigger:{infix:"\\/"},serialize:ot,associativity:"non",precedence:660},{name:N,trigger:{infix:"/"},serialize:ot,associativity:"non",precedence:660},{name:N,trigger:{infix:"\\div"},serialize:ot,associativity:"non",precedence:660},{name:O,trigger:{infix:"^"},associativity:"non",precedence:720,serialize:at},{name:O,trigger:{infix:["*","*"]},associativity:"non",precedence:720,serialize:at},{name:D,trigger:"\\sqrt",optionalLatexArg:1,requiredLatexArg:1,parse:et,serialize:at},{name:P,trigger:"\\sqrt",optionalLatexArg:1,requiredLatexArg:1,parse:et},{name:"Norm",trigger:{matchfix:"\\lVert"},closeFence:"\\rVert"},{name:"Norm",trigger:{matchfix:"\\|"},closeFence:"\\|"},{name:"Norm",trigger:{matchfix:["|","|"]},closeFence:["|","|"]},{name:"Abs",trigger:{matchfix:"|"},closeFence:"|"},{name:"Abs",trigger:{matchfix:"\\lvert"},closeFence:"\\rvert"},{name:"Factorial",trigger:{postfix:"!"},precedence:810},{name:"Factorial2",trigger:{postfix:["!","!"]},precedence:810}],calculus:[{trigger:{symbol:"\\int"},parse:ut,serialize:ct}],core:me,inequalities:m,other:oe,physics:[{name:"mu-0",trigger:{symbol:["\\mu","_","0"]}}],symbols:[{trigger:{symbol:"\\alpha"},parse:"α"},{trigger:{symbol:"\\beta"},parse:"β"},{trigger:{symbol:"\\gamma"},parse:"γ"},{trigger:{symbol:"\\delta"},parse:"δ"},{trigger:{symbol:"\\epsilon"},parse:"ϵ"},{trigger:{symbol:"\\varepsilon"},parse:"ε"},{trigger:{symbol:"\\zeta"},parse:"ζ"},{trigger:{symbol:"\\eta"},parse:"η"},{trigger:{symbol:"\\theta"},parse:"θ"},{trigger:{symbol:"\\vartheta"},parse:"ϑ"},{trigger:{symbol:"\\iota"},parse:"ι"},{trigger:{symbol:"\\kappa"},parse:"κ"},{trigger:{symbol:"\\varkappa"},parse:"ϰ"},{trigger:{symbol:"\\lambda"},parse:"λ"},{trigger:{symbol:"\\mu"},parse:"μ"},{trigger:{symbol:"\\nu"},parse:"ν"},{trigger:{symbol:"\\xi"},parse:"ξ"},{trigger:{symbol:"\\omicron"},parse:"ο"},{trigger:{symbol:"\\varpi"},parse:"ϖ"},{trigger:{symbol:"\\rho"},parse:"ρ"},{trigger:{symbol:"\\varrho"},parse:"ϱ"},{trigger:{symbol:"\\sigma"},parse:"σ"},{trigger:{symbol:"\\varsigma"},parse:"ς"},{trigger:{symbol:"\\tau"},parse:"τ"},{trigger:{symbol:"\\phi"},parse:"ϕ"},{trigger:{symbol:"\\varphi"},parse:"φ"},{trigger:{symbol:"\\upsilon"},parse:"υ"},{trigger:{symbol:"\\chi"},parse:"χ"},{trigger:{symbol:"\\psi"},parse:"ψ"},{trigger:{symbol:"\\omega"},parse:"ω"},{trigger:{symbol:"\\Gamma"},parse:"Γ"},{trigger:{symbol:"\\Delta"},parse:"Δ"},{trigger:{symbol:"\\Theta"},parse:"Θ"},{trigger:{symbol:"\\Lambda"},parse:"Λ"},{trigger:{symbol:"\\Xi"},parse:"Ξ"},{trigger:{symbol:"\\Pi"},parse:"Π"},{trigger:{symbol:"\\Sigma"},parse:"Σ"},{trigger:{symbol:"\\Upsilon"},parse:"Υ"},{trigger:{symbol:"\\Phi"},parse:"Φ"},{trigger:{symbol:"\\Psi"},parse:"Ψ"},{trigger:{symbol:"\\Omega"},parse:"Ω"},{trigger:{symbol:"\\digamma"},parse:"ϝ"},{trigger:{symbol:"\\aleph"},parse:"ℵ"},{trigger:{symbol:"\\beth"},parse:"ℶ"},{trigger:{symbol:"\\daleth"},parse:"ℸ"},{trigger:{symbol:"\\gimel"},parse:"ℷ"},{trigger:{symbol:"\\Finv"},parse:"Ⅎ"},{trigger:{symbol:"\\Game"},parse:"⅁"},{trigger:{symbol:"\\wp"},parse:"℘"},{trigger:{symbol:"\\eth"},parse:"ð"},{trigger:{symbol:"\\mho"},parse:"℧"},{trigger:{symbol:"\\clubsuit"},parse:"♣"},{trigger:{symbol:"\\heartsuit"},parse:"♡"},{trigger:{symbol:"\\spadesuit"},parse:"♠"},{trigger:{symbol:"\\diamondsuit"},parse:"♢"},{trigger:{symbol:"\\sharp"},parse:"♯"},{trigger:{symbol:"\\flat"},parse:"♭"},{trigger:{symbol:"\\natural"},parse:"♮"}],trigonometry:[{name:"Arcsin",trigger:"\\arcsin",arguments:"implicit",parse:lt},{name:"Arccos",trigger:"\\arccos",arguments:"implicit",parse:lt},{name:"Arctan",trigger:"\\arctan",arguments:"implicit",parse:lt},{name:"Arctan",trigger:"\\arctg",arguments:"implicit",parse:lt},{name:"Arccot",trigger:"\\arcctg",arguments:"implicit",parse:lt},{name:"Arcsec",trigger:"\\arcsec",arguments:"implicit",parse:lt},{name:"Arccsc",trigger:"\\arccsc",arguments:"implicit",parse:lt},{name:"Arsinh",trigger:"\\arsinh",arguments:"implicit",parse:lt},{name:"Arcosh",trigger:"\\arcosh",arguments:"implicit",parse:lt},{name:"Artanh",trigger:"\\artanh",arguments:"implicit",parse:lt},{name:"Arsech",trigger:"\\arsech",arguments:"implicit",parse:lt},{name:"Arcsch",trigger:"\\arcsch",arguments:"implicit",parse:lt},{name:"Cosh",trigger:"\\ch",arguments:"implicit",parse:lt},{name:"Cosec",trigger:"\\cosec",arguments:"implicit",parse:lt},{name:"Cosh",trigger:"\\cosh",arguments:"implicit",parse:lt},{name:"Cot",trigger:"\\cot",arguments:"implicit",parse:lt},{name:"Cot",trigger:"\\cotg",arguments:"implicit",parse:lt},{name:"Coth",trigger:"\\coth",arguments:"implicit",parse:lt},{name:"Csc",trigger:"\\csc",arguments:"implicit",parse:lt},{name:"Cot",trigger:"\\ctg",arguments:"implicit",parse:lt},{name:"Coth",trigger:"\\cth",arguments:"implicit",parse:lt},{name:"Sec",trigger:"\\sec",arguments:"implicit",parse:lt},{name:"Sinh",trigger:"\\sinh",arguments:"implicit",parse:lt},{name:"Sinh",trigger:"\\sh",arguments:"implicit",parse:lt},{name:"Tan",trigger:"\\tan",arguments:"implicit",parse:lt},{name:"Tanh",trigger:"\\tanh",arguments:"implicit",parse:lt},{name:"Tan",trigger:"\\tg",arguments:"implicit",parse:lt},{name:"Tanh",trigger:"\\th",arguments:"implicit",parse:lt},{name:"Cos",trigger:"\\cos",arguments:"implicit",parse:lt},{name:"Sin",trigger:"\\sin",arguments:"implicit",parse:lt},{name:"Tan",trigger:"\\tan",arguments:"implicit",parse:lt}]},mt={precision:15,positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalMarker:".",groupSeparator:",",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",notation:"auto",truncationMarker:"\\ldots",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}",imaginaryNumber:"\\imaginaryI"},gt=Object.assign(Object.assign({},mt),{invisibleOperator:C,skipSpace:!0,parseArgumentsOfUnknownLatexCommands:!0,parseNumbers:!0,promoteUnknownSymbols:/^[a-zA-Z]$/,promoteUnknownFunctions:/^[fg]$/,invisiblePlusOperator:S,preserveLatex:!1}),yt=Object.assign(Object.assign({},mt),{invisibleMultiply:"",invisiblePlus:"",multiply:"\\times"});function vt(e,t){var r;console.assert("string"==typeof e),console.assert(e.length>0);let n=e;for(let i=0;i<t.length;i++){let e=null!==(r=t[i])&&void 0!==r?r:"";if(/[a-zA-Z*]/.test(e[0])){const t=n.match(new RegExp("(.*)#"+Number(i+1).toString()));t&&/\\[a-zA-Z*]+/.test(t[1])&&(e=" "+e)}n=n.replace("#"+Number(i+1).toString(),e)}return n}class bt{constructor(e,t,r,n){let i;this.index=0,this.options=Object.assign(Object.assign({},gt),t),this.tokens=e,this.onError=e=>n(Object.assign(Object.assign({},e),{before:this.latexBefore(),after:this.latexAfter()})),this.dictionary=r,this.invisibleOperatorPrecedence=0,this.options.invisibleOperator&&(i=this.dictionary.name.get(this.options.invisibleOperator),void 0===i?n({code:"unknown-operator",arg:"invisible operator "+this.options.invisibleOperator}):void 0===i.precedence?n({code:"expected-operator",arg:"invisible operator "+this.options.invisibleOperator}):this.invisibleOperatorPrecedence=i.precedence)}clone(e,t){return new bt(this.tokens.slice(e,t),this.options,this.dictionary,this.onError)}balancedClone(e,t,r=!0){if(!this.matchAll(e))return r||this.onError({code:"syntax-error",arg:"Expected "+f(e)}),null;const n=this.index;let i=n,s=1;for(;!this.atEnd&&0!==s;)this.skipSpace(),i=this.index,this.matchAll(t)?s-=1:this.matchAll(e)?s+=1:this.next();return 0!==s?(r||this.onError({code:"unbalanced-symbols",arg:f(e)+f(t)}),this.index=n,null):this.clone(n,i)}get atEnd(){return this.index>=this.tokens.length}get peek(){return this.tokens[this.index]}latex(e,t){return f(this.tokens.slice(e,t))}latexAhead(e){return f(this.tokens.slice(this.index,this.index+e))}latexBefore(){return this.latex(0,this.index)}latexAfter(){return this.latex(this.index)}lookAhead(){let e=Math.min(this.dictionary.lookahead,this.tokens.length-this.index);const t=[];for(;e>0;)t[e]=this.latexAhead(e--);return t}peekDefinition(e){let t;t="operator"===e?this.lookAhead().map(((e,t)=>{var r,n,i,s,o;return null!==(s=null!==(n=null===(r=this.dictionary.infix[t])||void 0===r?void 0:r.get(e))&&void 0!==n?n:null===(i=this.dictionary.postfix[t])||void 0===i?void 0:i.get(e))&&void 0!==s?s:null===(o=this.dictionary.prefix[t])||void 0===o?void 0:o.get(e)})):this.lookAhead().map(((t,r)=>{var n;return null===(n=this.dictionary[e][r])||void 0===n?void 0:n.get(t)}));for(let r=t.length;r>0;r--)if(void 0!==t[r])return[t[r],r];return[null,0]}next(){return this.tokens[this.index++]}skipSpace(){if("<{>"===this.peek&&!this.atEnd&&"<}>"===this.tokens[this.index+1])return this.index+=2,!0;if(!this.options.skipSpace)return!1;let e=!1;for(;this.match("<space>");)e=!0;return e}match(e){return this.tokens[this.index]===e&&(this.index++,!0)}matchAll(e){let t=!0;"string"==typeof e&&(e=[e]);let r=0;do{t=this.tokens[this.index+r]===e[r++]}while(t&&r<e.length);return t&&(this.index+=r),t}matchAny(e){return e.includes(this.tokens[this.index])?this.tokens[this.index++]:""}matchWhile(e){const t=[];for(;e.includes(this.tokens[this.index]);)t.push(this.tokens[this.index++]);return t}matchSign(){let e=!1,t=!1;for(;!t;)this.skipSpace()?t=!1:this.match("-")?(e=!e,t=!1):t=!this.match("+");return e?"-":"+"}matchDecimalDigits(){let e="",t=!1;for(;!t;)if(e+=this.matchWhile(["0","1","2","3","4","5","6","7","8","9"]).join(""),t=!0,this.options.groupSeparator){const e=this.index;this.match(this.options.groupSeparator)&&(/[0-9]/.test(this.peek)?t=!1:this.index=e)}return e}matchSignedInteger(){const e=this.index,t=this.matchSign(),r=this.matchDecimalDigits();return r?("-"===t?"-":"")+r:(this.index=e,"")}matchExponent(){const e=this.index;let t="";if(this.matchAny(["e","E","d","D"])){const e=this.matchSignedInteger();e&&(t="e"+e)}if(t)return t;if(this.match("\\times")&&(this.skipSpace(),this.match("1")&&this.match("0")&&this.match("^"))){if(/[0-9]/.test(this.peek))return"e"+this.next();if(this.match("<{>")){this.skipSpace();const e=this.matchSignedInteger();if(this.skipSpace(),this.match("<}>")&&e)return"e"+e}}return this.index=e,""}matchNumber(){var e,t,r;if(!this.options.parseNumbers)return"";const n=this.index,i=this.matchSign();let s=this.matchDecimalDigits();return s?(this.match(null!==(e=this.options.decimalMarker)&&void 0!==e?e:"")&&(s+="."+(null!==(t=this.matchDecimalDigits())&&void 0!==t?t:"")),s+=null!==(r=this.matchExponent())&&void 0!==r?r:"",s?("-"===i?"-":"")+s:(this.index=n,"")):(this.index=n,"")}matchOperator(e,t=null,r=0){const[n,i]=this.peekDefinition(e);if(null===n)return null;if("function"==typeof n.parse){let e=null;return[t,e]=n.parse(t,this,r),null===e?null:this.applyInvisibleOperator(t,e)}let s=n.precedence;if(s<r)return null;s+="left"===n.associativity?1:0,this.index+=i;const o=this.matchExpression(s);return this.applyInvisibleOperator(...this.applyOperator(n.parse,t,o))}matchArguments(e){if(!e)return null;const t=this.index;let r=null;const n=this.matchMatchfixOperator();if("group"===e&&X(n)===g)r=Q(n);else if("implicit"===e)if(X(n)===g)r=Q(n);else if(null!==n)r=[n];else{const e=this.matchPrimary();null!==e&&(r=[e])}else this.index=t;return r}matchMatchfixOperator(){const[e]=this.peekDefinition("matchfix");if(null===e)return null;if("function"==typeof e.parse)return this.applyInvisibleOperator(...e.parse(null,this,0));const t="object"==typeof e.trigger?e.trigger.matchfix:e.trigger,r=this.matchBalancedExpression(t,e.closeFence,this.onError);return r?[e.parse,r]:[e.parse]}matchDefinition(e){const[t,r]=this.peekDefinition(e);if("function"==typeof(null==t?void 0:t.parse)){const[,e]=t.parse(null,this,0);return[t,e]}return this.index+=r,[t,null]}matchSymbol(){var e,t,r,n;const[i,s]=this.matchDefinition("symbol");if(null!==s)return s;if(null===i){if(null===(e=this.options.promoteUnknownFunctions)||void 0===e?void 0:e.test(this.peek)){const e=this.next(),t=this.matchMatchfixOperator();return null===t?e:X(t)!==g?null:[e,...Q(t)]}return(null===(t=this.options.promoteUnknownSymbols)||void 0===t?void 0:t.test(this.peek))?this.next():this.matchUnknownLatexCommand()}const o=[],a=[];let l,u=null!==(r=i.optionalLatexArg)&&void 0!==r?r:0;for(;u>0;)l=this.matchOptionalLatexArgument(),null!==l&&a.push(l),u--;for(u=null!==(n=i.requiredLatexArg)&&void 0!==n?n:0;u>0;)l=this.matchRequiredLatexArgument(),null===l&&this.onError({code:"expected-argument"}),null!==l&&o.push(l),u--;const c=this.matchArguments(i.arguments);return null===c?0===o.length&&0===a.length?i.parse:[i.parse,...o,...a]:[i.parse,...o,...c,...a]}matchOptionalLatexArgument(){return this.skipSpace(),this.matchBalancedExpression("[","]")}matchRequiredLatexArgument(){this.skipSpace();const e=this.matchBalancedExpression("<{>","<}>");return e||(/^[0-9]$/.test(this.peek)?parseFloat(this.next()):/^[^\\#]$/.test(this.peek)?this.next():this.matchExpression())}matchSupsub(e){let t=null;return this.skipSpace(),[["^","superfix"],["_","subfix"]].forEach((r=>{var n,i,s;if(null!==t)return;const[o,a]=r;if(!this.match(o))return;this.skipSpace();const l=this.index;let u,c=0;if(this.match("<{>")?(this.skipSpace(),[u,c]=this.peekDefinition(a),this.index+=c,this.skipSpace(),(null==u?void 0:u.name)&&this.match("<}>")?t="function"==typeof u.parse?u.parse(e,this,0)[1]:[null!==(n=u.parse)&&void 0!==n?n:u.name,e]:this.index=l):([u,c]=this.peekDefinition(a),(null==u?void 0:u.name)&&(this.index+=c,t="function"==typeof u.parse?u.parse(e,this,0)[1]:[null!==(i=u.parse)&&void 0!==i?i:u.name,e])),null===t&&(u=null===(s=this.dictionary.infix[1])||void 0===s?void 0:s.get(o),"function"==typeof(null==u?void 0:u.parse)?t=u.parse(e,this,0)[1]:"string"==typeof(null==u?void 0:u.parse)?([e,t]=this.applyOperator(u.parse,e,this.matchRequiredLatexArgument()),t=this.applyInvisibleOperator(e,t)):t=this.applyInvisibleOperator(e,o)),null!==t){const e=this.matchArguments(null==u?void 0:u.arguments);null!==e&&(t=[t,...e])}})),t}matchPostfix(e){if(null===e)return null;const[t,r]=this.peekDefinition("postfix");return null===t?null:"function"==typeof t.parse?([,e]=t.parse(e,this,0),null===e?null:e):(this.index+=r,[t.parse,e])}matchString(){let e="",t=this.atEnd;for(;!t;){if(this.match("<space>"))e+=" ";else{const r=this.peek;"]"===r?t=!0:/^<({|}|\$|\$\$|space)>$/.test(r)?"\\"===r[0]?(this.onError({code:"unexpected-command"}),e+=this.next()):t=!0:e+=this.next()}t=t||this.atEnd}return e}matchEnvironmentName(e,t){if(this.match(e)){const e=this.index;if(this.match("<{>")){const e=this.matchString();if(this.match("<}>")&&e===t)return!0}this.index=e}return!1}matchTabular(){const e=["list"];let t=["list"],r=null,n=!1;for(;!this.atEnd&&!n;)if(this.match("&"))t.push(r),r=null;else if(this.match("\\\\")||this.match("\\cr"))this.skipSpace(),this.matchOptionalLatexArgument(),null!==r&&t.push(r),e.push(t),t=["list"],r=null;else{const e=this.matchExpression();null===e&&(n=!0),r=null!==r?this.applyInvisibleOperator(r,e):e}return t.length>1&&e.push(t),e}matchEnvironment(){var e;if(this.match("\\begin")&&this.match("<{>")){const t=this.matchString();if(this.match("<}>")){const r=this.index;let n=this.index,i=1;for(;!this.atEnd&&0!==i;)n=this.index,this.matchEnvironmentName("\\begin",t)?i+=1:this.matchEnvironmentName("\\end",t)?i-=1:this.next();const s=this.dictionary.environment.get(t);return"function"==typeof(null==s?void 0:s.parse)?s.parse(null,this.clone(r,n),0)[1]:null!==(e=null==s?void 0:s.parse)&&void 0!==e?e:null}}return null}applyOperator(e,t,r){var n,i,s,o;const a=this.dictionary.name.get(e);if(void 0===a)return this.onError({code:"unknown-operator"}),[t,r];if(void 0!==(null===(n=a.trigger)||void 0===n?void 0:n.prefix)&&null===t&&null!==r)return[null,[a.name,r]];if(void 0!==(null===(i=a.trigger)||void 0===i?void 0:i.postfix)&&null!==t)return[null,[a.name,t]];if((void 0!==(null===(s=a.trigger)||void 0===s?void 0:s.matchfix)||void 0!==(null===(o=a.trigger)||void 0===o?void 0:o.infix))&&null!==t&&null!==r){if("non"===a.associativity)return[null,[e,t,r]];if(X(t)===e){if("both"===a.associativity){if(X(r)===e){if(Array.isArray(t))return[null,t.concat(Q(r))];if(j(t))return[null,t.fn.concat(Q(r))]}else Array.isArray(t)&&t.push(r),j(t)&&t.fn.push(r);return[null,t]}return"left"===a.associativity?[null,[e,t,r]]:Array.isArray(t)?[null,[e,t[1],[e,t[2],r]]]:(j(t)&&(t.fn[2]=[e,t.fn[2],r]),[null,t])}return X(r)===e?"both"===a.associativity?(Array.isArray(r)&&r.splice(1,0,t),j(r)&&r.fn.splice(1,0,t),[null,r]):"right"===a.associativity?[null,[e,t,r]]:Array.isArray(r)?[null,[e,r[1],[e,r[2],t]]]:(j(r)&&(r.fn[2]=[e,r.fn[2],t]),[null,r]):[null,[e,t,r]]}return void 0!==a.trigger.infix?(this.onError({code:"expected-operand"}),[t,null]):[t,null]}applyInvisibleOperator(e,t){if(null===e)return t;if(null===t)return e;if(this.options.invisiblePlusOperator&&("number"==typeof e||z(e))&&X(t)===N)return[e,t]=this.applyOperator(this.options.invisiblePlusOperator,e,t),null===e?t:null;if(this.options.invisibleOperator)return[e,t]=this.applyOperator(this.options.invisibleOperator,e,t),null===e?t:null;let r=[v];return X(e)===v?r=r.concat(Q(e)):r.push(e),null!==t&&(X(t)===v?r=r.concat(Q(t)):r.push(t)),this.options.invisibleOperator&&this.onError({code:"unexpected-sequence"}),r}matchUnknownLatexCommand(){const e=this.peek;if(!e||"\\"!==e[0])return null;this.next();const t=[],r=[];let n=!1;do{n=!0;let e=this.matchOptionalLatexArgument();null!==e&&(t.push(e),n=!1),this.skipSpace(),"<{>"===this.peek&&(e=this.matchRequiredLatexArgument(),null!==e&&(r.push(e),n=!1))}while(!n);return t.length>0||r.length>0?[e,...r,...t]:e}matchPrimary(e){let t=null;const r=this.index,n=this.matchNumber();n&&(t={num:n}),null===t&&(t=this.matchMatchfixOperator()),null===t&&(t=this.matchEnvironment()),null===t&&(t=this.matchSymbol());let i=null;do{i=this.matchSupsub(t),t=null!=i?i:t}while(null!==i);let s=null;do{s=this.matchPostfix(t),t=null!=s?s:t}while(null!==s);return this.decorate(t,r)}matchBalancedExpression(e,t,r){const n=this.balancedClone(e,t);if(!n)return null==r||r({code:"unbalanced-symbols",arg:f(e)+f(t)}),null;const i=n.matchExpression();return n.atEnd||null==r||r({code:"unbalanced-symbols",arg:f(e)+f(t)}),i}matchExpression(e=0){let t=null;const r=this.index;if(this.skipSpace(),t=this.matchPrimary(e),null===t&&(t=this.matchOperator("prefix")),null===t)return null;let n=!1;for(;!this.atEnd&&!n;){this.skipSpace();let r=this.matchOperator("infix",t,e);if(null===r){const[e]=this.peekDefinition("operator");if(null===e){const e=this.matchExpression(this.invisibleOperatorPrecedence);null===e?n=!0:r=this.applyInvisibleOperator(t,e)}}null!==r?t=r:n=!0}return this.decorate(t,r)}decorate(e,t){if(this.options.preserveLatex){const r=this.latex(t,this.index);Array.isArray(e)?e={latex:r,fn:e}:"number"==typeof e?e={latex:r,num:Number(e).toString()}:"string"==typeof e?e={latex:r,sym:e}:"object"==typeof e&&null!==e&&(e.latex=r)}return e}}function xt(e,t){const r=e.length;e=e.substr(0,t.precision-2);for(let i=0;i<e.length-16;i++){const r=e.substr(0,i);for(let n=0;n<17;n++){const s=e.substr(i,n+1),o=Math.floor((e.length-r.length)/s.length);if(o>1&&(r+s.repeat(o+1)).startsWith(e))return"0"===s?r.replace(/(\d{3})/g,"$1"+t.groupSeparator):r.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.beginRepeatingDigits+s.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.endRepeatingDigits}}const n=r!==e.length;return(e=e.replace(/(\d{3})/g,"$1"+t.groupSeparator)).endsWith(t.groupSeparator)&&(e=e.slice(0,-1)),e+(n?t.truncationMarker:"")}function wt(e,t){var r;return e?t.beginExponentMarker?t.beginExponentMarker+e+(null!==(r=t.endExponentMarker)&&void 0!==r?r:""):"10^{"+e+"}":""}function _t(e){return parseFloat(Number(e).toPrecision(15))}function Et(e,t){var r,n;let i;if("number"==typeof e)i=e;else{if(!z(e))return"";i=e.num}if(i===1/0||"Infinity"===i)return t.positiveInfinity;if(i===-1/0||"-Infinity"===i)return t.negativeInfinity;if("NaN"===i||"number"==typeof i&&Number.isNaN(i))return t.notANumber;if("number"==typeof i)return"engineering"===t.notation?St(_t(i),t):At(i.toString(),t);let s="";for("-"===i[0]?(s="-",i=i.substr(1)):"+"===i[0]&&(i=i.substr(1));"0"===i[0];)i=i.substr(1);if(0===i.length)return"0";"."===i[0]&&(i="0"+i);let o="";if(i.indexOf(".")>=0){const e=i.match(/(\d*)\.(\d*)([e|E]([-+]?[0-9]*))?/);if(!e)return"";const n=e[1],a=e[2].substring(0,Math.min(t.precision-n.length,e[2].length));if(o=null!==(r=e[4])&&void 0!==r?r:"","0"===n){let e=0;for(;"0"===a[e]&&e<a.length;)e+=1;let r="";if(e<=4)r="0"+t.decimalMarker,r+=a.substr(0,e),r+=xt(i.substr(r.length),t);else if(e+1>=t.precision)r="0",s="";else{r=i[e];const n=xt(i.substr(e+1),t);n&&(r+=t.decimalMarker+n)}"0"!==r&&(!(i.length-1>t.precision)||t.endRepeatingDigits&&r.endsWith(t.endRepeatingDigits)||t.truncationMarker&&r.endsWith(t.truncationMarker)||(r+=t.truncationMarker),e>4&&(r+=t.exponentProduct+wt((1-e).toString(),t))),i=r}else{i=n.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator);const e=xt(a,t);e&&(i+=t.decimalMarker+e)}}else if(i.length>t.precision){const e=i.length;let r=i[0];const n=xt(i.substr(1),t);n&&(r+=t.decimalMarker+n,t.endRepeatingDigits&&!r.endsWith(t.endRepeatingDigits)&&(r+=t.truncationMarker)),"1"!==r?r+=t.exponentProduct:r="",i=r+wt((e-2).toString(),t)}else{const e=i.match(/([0-9]*)\.?([0-9]*)([e|E]([-+]?[0-9]+))?/);e&&(i=e[1],e[2]&&(i+=t.decimalMarker+e[2]),o=null!==(n=e[4])&&void 0!==n?n:""),i=i.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator)}const a=wt(o,t);return s+i+(a?t.exponentProduct+a:"")}function St(e,t){if(0===e)return"0";const r=Math.abs(e);let n=Math.round(Math.log10(r));n-=n%3,r<1e3&&(n=0);const i=r/Math.pow(10,n);let s="";const o=i.toString().match(/^(.*)\.(.*)$/);(null==o?void 0:o[1])&&o[2]&&(s=o[1]+t.decimalMarker+o[2]),t.groupSeparator&&(s=xt(i.toExponential(),t));let a="";return 0!==n&&(a=wt(n.toString(),t)),(e<0?"-":"")+s+a}function At(e,t){let r,n=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/i);(null==n?void 0:n[1])&&n[2]&&(r=wt(n[2],t),r&&(r=t.exponentProduct+r));let i=e,s="";return n=(r?n[1]:e).match(/^(.*)\.(.*)$/),(null==n?void 0:n[1])&&n[2]&&(i=n[1],s=n[2]),t.groupSeparator&&(i=i.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator),s=xt(s,t)),s&&(s=t.decimalMarker+s),i+s+(null!=r?r:"")}function Nt(e){console.assert(Number.isFinite(e)&&!Number.isInteger(e));const t="0123456789abcdef",r=e<0?"-":"";e=Math.abs(e);let n="",i=0,s=Math.trunc(e),o=e-s;if(0!==s)for(;s%2==0&&s>0;)s/=2,o/=2,i+=1;else{let e=o;for(;2*e<2;)e*=2,i-=1;s=Math.trunc(e),o=e-s}for(;0!==s;)n=t[s%16]+n,s=Math.trunc(s/16);if(n?n+=".":n="0.",0===o)n+="0";else for(;o>0;){const e=Math.trunc(16*o);n+=t[e],o=16*o-e}return r+"0x"+n+"p"+(i<0?"-":"")+Number(Math.abs(i)).toString()}function kt(e,t){console.assert("string"==typeof e||F(e));const r=Z(e);return null===r?"asis":r.length>1?"upright":"asis"}function Mt(e,t,r){let n=[];if("string"==typeof r.trigger.matchfix?n.push(r.trigger.matchfix):Array.isArray(r.trigger.matchfix)&&(n=[...r.trigger.matchfix]),te(t)>=1){let i="";for(const s of Q(t))s&&(n.push(i),n.push(e.serialize(s)),i=r.separator)}return n.push(f(r.closeFence)),d(n)}function Ct(e,t,r){let n="";const i=te(t),s=X(t);if(r.trigger.superfix||r.trigger.subfix)return 1!==i&&e.onError({code:"operator-requires-one-operand",arg:e.serializeSymbol(s)}),vt(r.serialize,[e.serialize(ee(t,1))]);if(r.trigger.postfix)return 1!==i&&e.onError({code:"postfix-operator-requires-one-operand",arg:e.serializeSymbol(s)}),vt(r.serialize,[e.wrap(ee(t,1),r.precedence)]);if(r.trigger.prefix)return 1!==i&&e.onError({code:"prefix-operator-requires-one-operand",arg:e.serializeSymbol(s)}),vt(r.serialize,[e.wrap(ee(t,1),r.precedence+1)]);if(r.trigger.infix){n=e.wrap(ee(t,1),r.precedence);for(let s=2;s<i+1;s++){const i=ee(t,s);null!==i&&(n=vt(r.serialize,[n,e.wrap(i,r.precedence)]))}}return n}class Tt{constructor(e,t,r){this.level=-1,this.options=e,e.invisibleMultiply&&(/#1/.test(e.invisibleMultiply)&&/#2/.test(e.invisibleMultiply)||r({code:"expected-argument",arg:"invisibleMultiply"})),this.onError=r,this.dictionary=t}wrap(e,t){if(null===e)return"";if(void 0===t)return"("+this.serialize(e)+")";if("number"==typeof e||z(e)||"string"==typeof e||F(e))return this.serialize(e);const r=X(e);if(r&&r!==g){const n=this.dictionary.name.get(r);if(n&&void 0!==n.precedence&&n.precedence<t)return this.wrapString(this.serialize(e),ae(e,this.level))}return this.serialize(e)}wrapShort(e){const t=this.serialize(e);return X(e)===g||"number"==typeof e||z(e)||/(^(.|\\[a-zA-Z*]+))$/.test(t)?t:this.wrapString(t,le(e,this.level+1))}wrapString(e,t){return"none"===t?e:"("+e+")"}serializeSymbol(e,t){const r=W(e);if(!r){if(console.assert("string"==typeof e||F(e)),"string"==typeof(null==t?void 0:t.serialize))return t.serialize;const r=Z(e);return null===r?"":"upright"===kt(e,this.level)?"\\operatorname{"+r+"}":r}const n=Q(e);if(!t){if("string"==typeof r&&r.length>0&&"\\"===r[0]){let e=r;for(const t of n)e+="{"+this.serialize(t)+"}";return e}return`${this.serialize(r)}(${n.map((e=>this.serialize(e))).join(", ")})`}if(t.requiredLatexArg>0){let e="",r="",i=0;for(;i<t.requiredLatexArg;)r+="{"+this.serialize(n[i++])+"}";for(;i<Math.min(n.length,t.optionalLatexArg+t.requiredLatexArg);){const t=this.serialize(n[1+i++]);t&&(e+="["+t+"]")}return t.serialize+(e+r)}return ae(e,this.level),t.serialize+this.serialize([g,...n])}serializeDictionary(e){return`\\left[\\begin{array}{lll}${Object.keys(e).map((t=>`\\textbf{${t}} & \\rightarrow & ${this.serialize(e[t])}`)).join("\\\\")}\\end{array}\\right]`}serialize(e){if(null===e)return"";this.level+=1;const t=(()=>{const t=Et(e,this.options);if(t)return t;const r=V(e);if(null!==r)return`\\text{${r}}`;const n=Z(e);if(null!==n)return this.serializeSymbol(e,this.dictionary.name.get(n));const i=ne(e);if(null!==i)return this.serializeDictionary(i);const s=X(e);if(s){if("\\"===s[0]){const t=Q(e);return 0===t.length?s:s+"{"+t.map((e=>this.serialize(e))).filter((e=>Boolean(e))).join("}{")+"}"}const t=this.dictionary.name.get(s);if(t){let r;return"function"==typeof t.serialize&&(r=t.serialize(this,e)),r||void 0===t.precedence&&!t.trigger.superfix&&!t.trigger.subfix||(r=Ct(this,e,t)),!r&&t.trigger.matchfix&&(r=Mt(this,e,t)),!r&&t.trigger.symbol&&(r=this.serializeSymbol(e,t)),r}}if(Array.isArray(e)||j(e))return this.serializeSymbol(e);this.onError({code:"syntax-error",arg:JSON.stringify(e)})})();return this.level-=1,t}}class Ot{constructor(e){var t,r;const n=e=>{"undefined"!=typeof window&&(e.before&&e.after?console.warn(e.code+(e.arg?": "+e.arg:"")+"\n%c|  "+e.before+"%c"+e.after+"\n%c|  "+String(" ").repeat(e.before.length)+"▲","font-weight: bold","font-weight: normal; color: rgba(160, 160, 160)","font-weight: bold; color: hsl(4deg, 90%, 50%)"):console.warn(e.code+(e.arg?": "+e.arg:"")))};this.onError=null!==(t=null==e?void 0:e.onError)&&void 0!==t?t:n;const i=Object.assign({},null!=e?e:{});delete i.dictionary,delete i.onError,this.options=Object.assign(Object.assign(Object.assign(Object.assign({},mt),yt),gt),i),this.dictionary=dt(null!==(r=null==e?void 0:e.dictionary)&&void 0!==r?r:Ot.getDictionary(),this.onError)}static getDictionary(e="all"){if("all"===e){let e=[];for(const t of Object.keys(ft))e=[...e,...ft[t]];return e}return[...ft[e]]}parse(e){var t;const r=new bt(h(e,[]),this.options,this.dictionary,this.onError),n=r.matchExpression();return r.atEnd||null===(t=this.onError)||void 0===t||t.call(this,{code:"syntax-error"}),null!=n?n:""}serialize(e){return new Tt(this.options,this.dictionary,this.onError).serialize(e)}}function It(e,t){return new Ot(t).parse(e)}function Pt(e,t){return new Ot(t).serialize(e)}const Dt={Anything:[],Expression:"Anything",Domain:["Set","Symbol"],ParametricDomain:["Domain","Function"],MaybeBoolean:"Expression",Boolean:"MaybeBoolean",Collection:"Expression",Dictionary:"Collection",List:"Collection",Sequence:"Collection",Tuple:"Collection",Set:"Collection",FiniteSet:"Set",InfiniteSet:"Set",EmptySet:"FiniteSet",String:"Expression",Symbol:"String",Function:"Expression",Predicate:"Function",LogicalFunction:"Predicate",TranscendentalFunction:"Function",AlgebraicFunction:"Function",PeriodicFunction:"Function",TrigonometricFunction:["PeriodicFunction","TranscendentalFunction"],HyperbolicFunction:"TranscendentalFunction",MonotonicFunction:"Function",StrictMonotonicFunction:"MonotonicFunction",ContinuousFunction:"Function",DifferentiableFunction:"ContinuousFunction",InfinitelyDifferentiableFunction:"DifferentiableFunction",RationalFunction:["AlgebraicFunction","ContinuousFunction"],PolynomialFunction:["AlgebraicFunction","InfinitelyDifferentiableFunction"],QuadraticFunction:"PolynomialFunction",LinearFunction:["QuadraticFunction","MonotonicFunction"],ConstantFunction:"LinearFunction",Number:"Set",ImaginaryNumber:["ComplexNumber","InfiniteSet"],ComplexNumber:"ExtendedComplexNumber",ExtendedComplexNumber:"Number",ComplexInfinity:"ExtendedComplexNumber",NumberZero:["CompositeNumber","ImaginaryNumber","FiniteSet"],NaturalNumber:"Integer",CompositeNumber:"NaturalNumber",PrimeNumber:"NaturalNumber",Integer:["RationalNumber","ExtendedInteger"],ExtendedInteger:"ExtendedRationalNumber",RationalNumber:["AlgebraicNumber","ExtendedRationalNumber"],IrrationalNumber:"RealNumber",TranscendentalNumber:["IrrationalNumber","ImaginaryNumber"],AlgebraicNumber:"IrrationalNumber",RealNumber:["ComplexNumber","ExtendedRealNumber"],ExtendedRealNumber:"ExtendedComplexNumber",ExtendedNaturalNumber:"ExtendedInteger",ExtendedRationalNumber:"ExtendedRealNumber",SignedInfinity:"ExtendedNaturalNumber",Tensor:"Expression",Scalar:"Tensor",Vector:"Matrix",Row:"Vector",Column:"Vector",Matrix:"Tensor",ComplexTensor:"Tensor",RealTensor:"ComplexTensor",IntegerTensor:"RealTensor",LogicalTensor:"IntegerTensor",SquareMatrix:"Matrix",MonomialMatrix:"SquareMatrix",TriangularMatrix:"SquareMatrix",UpperTriangularMatrix:"TriangularMatrix",LowerTriangularMatrix:"TriangularMatrix",PermutationMatrix:["MonomialMatrix","LogicalTensor","OrthogonalMatrix"],OrthogonalMatrix:["SquareMatrix","RealTensor"],DiagonalMatrix:["UpperTriangularMatrix","LowerTriangularMatrix"],IdentityMatrix:["DiagonalMatrix","SymmetricMatrix","PermutationMatrix"],ZeroMatrix:["DiagonalMatrix","SymmetricMatrix","PermutationMatrix"],SymmetricMatrix:["HermitianMatrix","SquareMatrix","RealTensor"],HermitianMatrix:"ComplexTensor",Quaternion:["SquareMatrix","ComplexTensor"]},Rt={Function:"Q11348",ComplexNumber:"Q26851286",Integer:"Q47007735",ImaginaryNumber:"Q47310259",NaturalNumber:"Q28920052"},Lt={MaybeBoolean:["Union","Boolean",["Set","Maybe"]],NaturalNumber:["Union","CompositeNumber","PrimeNumber"],Scalar:["Intersection","Row","Column"],TriangularMatrix:["Union","UpperTriangularMatrix","LowerTriangularMatrix"],Vector:["Union","Row","Column"]},qt={Boolean:2,MaybeBoolean:3,EmptySet:0,IdentityMatrix:1,ZeroMatrix:1,NumberZero:1},$t={String:{signatures:[{args:[],result:"Domain",evaluate:()=>"String"},{args:["NaturalNumber"],result:"ParametricDomain",evaluate:(e,t)=>(t=Math.round(t),Number.isNaN(t)||t<0||t===1/0?"EmptySet":["String",t,t])},{args:["NaturalNumber"],result:"ParametricDomain",evaluate:(e,t,r)=>(t=Math.round(t),r=Math.round(r),Number.isNaN(t)||Number.isNaN(r)||t<0||t===1/0||t>r||0===t&&r===1/0?"EmptySet":["String",t,r])}]}};function Bt(){var e;const t={Nothing:{countable:!0,supersets:[],domain:"Domain"}};for(const n of Object.keys(Dt)){const r=Array.isArray(Dt[n])?Dt[n]:[Dt[n]];t[n]=null!==(e=$t[n])&&void 0!==e?e:{},t[n]=Object.assign({domain:$t[n]?"ParametricDomain":"Domain",wikidata:Rt[n],supersets:r,value:Lt,countable:void 0!==qt[n],size:()=>qt[n]},t[n]);for(const e of r)if("Anything"!==e&&!Dt[e])throw new Error(`Unknown parent of domain "${n}": "${e}"`)}const r=new Set;for(const n of Object.keys(t))r.add(n);for(const n of Object.keys(t))for(const e of t[n].supersets)r.delete(e);r.delete("Nothing"),t.Nothing.supersets=[...r.values()];for(const n of Object.keys(t)){let e=!1,r=0,i=[n];for(;r<512&&!e;){const n=i.pop();e="Anything"===n,e||(i=[...n,...t[n].supersets]),r++}if(!e)throw new Error(`The "${n}" domain cannot reach "Anything"`)}return t}const zt={Pi:{domain:"IrrationalNumber",constant:!0,wikidata:"Q167",value:Math.PI},ImaginaryI:{domain:"ImaginaryNumber",constant:!0,wikidata:"Q193796"},ExponentialE:{domain:"IrrationalNumber",wikidata:"Q82435",constant:!0,value:{num:"2.7182818284590452354"}},Abs:{domain:"Function",wikidata:"Q3317982",threadable:!0,idempotent:!0,signatures:[{args:["RealNumber"],result:"RealNumber"}]},Add:{domain:"Function",wikidata:"Q32043",associative:!0,commutative:!0,threadable:!0,idempotent:!0,signatures:[{rest:["RealNumber"],result:"RealNumber"}]},Chop:{domain:"Function",associative:!0,threadable:!0,idempotent:!0,signatures:[{args:["RealNumber"],result:"RealNumber"}]},Ceil:{domain:"Function"},Exp:{domain:["ContinuousFunction","MonotonicFunction"],wikidata:"Q168698",threadable:!0,signatures:[{args:["RealNumber"],result:"RealNumber"}]},Erf:{domain:["ContinuousFunction","MonotonicFunction"],signatures:[{args:["RealNumber"],result:"RealNumber"}]},Erfc:{domain:["ContinuousFunction","MonotonicFunction"],signatures:[{args:["RealNumber"],result:"RealNumber"}]},Factorial:{wikidata:"Q120976",domain:"MonotonicFunction",signatures:[{args:["NaturalNumber"],result:"NaturalNumber"}]},Floor:{domain:"Function",wikidata:"Q56860783"},Gamma:{domain:"Function",wikidata:"Q190573"},LogGamma:{domain:"Function"},Log:{domain:"Function",wikidata:"Q11197",signatures:[{args:["RealNumber"],result:"RealNumber"},{args:["RealNumber",["base","NaturalNumber"]],result:"RealNumber"}]},Log2:{domain:"Function",wikidata:"Q581168",signatures:[{args:["RealNumber"],result:"RealNumber"}]},Log10:{domain:"Function",wikidata:"Q966582",signatures:[{args:["RealNumber"],result:"RealNumber"}]},MachineEpsilon:{domain:"RealNumber",constant:!0,value:{num:"2.220446049250313e-16"}},Multiply:{domain:"Function",wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,signatures:[{rest:["RealNumber"],result:"RealNumber"}]},Negate:{domain:"Function",wikidata:"Q715358",signatures:[{args:["RealNumber"],result:"RealNumber"}]},Power:{domain:"Function",wikidata:"Q33456",commutative:!1,signatures:[{args:["RealNumber","RealNumber"],result:"RealNumber"}]},Round:{domain:"Function",signatures:[{args:["RealNumber","RealNumber"],result:"RealNumber"}]},SignGamma:{domain:"Function"},Sqrt:{domain:"Function",wikidata:"Q134237",signatures:[{args:["RealNumber"],result:"RealNumber"},{args:["Number"],result:"Number"}]},Root:{domain:"Function",commutative:!1,signatures:[{args:["NaturalNumber"],result:"RealNumber"}]},Subtract:{domain:"Function",wikidata:"Q32043",commutative:!1,signatures:[{args:["RealNumber","RealNumber"],result:"RealNumber"},{args:["Number","Number"],result:"Number"}]}},Ft={True:{domain:"Boolean",constant:!0},False:{domain:"Boolean",constant:!0},Maybe:{domain:"MaybeBoolean",constant:!0},And:{domain:"LogicalFunction",threadable:!0,associative:!0,commutative:!0,idempotent:!0},Or:{domain:"LogicalFunction",threadable:!0,associative:!0,commutative:!0,idempotent:!0},Not:{domain:"LogicalFunction",involution:!0},Equivalent:{domain:"LogicalFunction"},Implies:{domain:"LogicalFunction"},Exists:{domain:"LogicalFunction"},Equal:{domain:"LogicalFunction"},NotEqual:{domain:"Function",wikidata:"Q28113351",commutative:!0,signatures:[{args:["Expression","Expression"],result:"MaybeBoolean"}]}},Ut={EmptySet:{domain:"EmptySet",constant:!0,wikidata:"Q226183"},CartesianProduct:{domain:"Function",wikidata:"Q173740",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"Set",evaluate:Yt}]},Intersection:{domain:"Function",wikidata:"Q185837",threadable:!0,associative:!0,commutative:!0,idempotent:!0,involution:!0,signatures:[{rest:["sets","Set"],result:"Set",evaluate:Ht}]},Complement:{domain:"Function",wikidata:"Q242767"},Union:{domain:"Function",wikidata:"Q185359",threadable:!0,associative:!0,commutative:!0,idempotent:!0,involution:!0,signatures:[{rest:["sets","Set"],result:"Set",evaluate:Vt}]},SymmetricDifference:{domain:"Function",wikidata:"Q1147242"},Subset:{domain:"Predicate",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"MaybeBoolean",evaluate:jt}]},SubsetEqual:{domain:"Predicate",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"MaybeBoolean",evaluate:Gt}]},SetMinus:{domain:"Function",wikidata:"Q18192442",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"Set",evaluate:Wt}]}};function jt(e,t,r){return"False"}function Gt(e,t,r){return"False"}function Vt(e,...t){return"EmptySet"}function Ht(e,...t){return"EmptySet"}function Wt(e,t,r){return"EmptySet"}function Yt(e,t,r){return"EmptySet"}const Xt={KeyValue:{domain:"Function"},Keys:{domain:"Function"},Entries:{domain:"Function"},Dictionary:{domain:"Collection"},List:{domain:"Collection"},Tuple:{domain:"Collection"},Sequence:{domain:"Collection"}},Zt={Arcosh:{domain:"HyperbolicFunction"},Arccos:{domain:"TrigonometricFunction"},Arcsin:{domain:"TrigonometricFunction"},Arctan:{wikidata:"Q2257242",domain:"TrigonometricFunction"},Arctan2:{wikidata:"Q776598",domain:"TrigonometricFunction"},Arsinh:{domain:"HyperbolicFunction"},Artanh:{domain:"HyperbolicFunction"},Cos:{domain:"TrigonometricFunction"},Degrees:{domain:"Real",constant:!0,value:.017453292519943295},FromPolarCoordinates:{domain:"Function"},Haversine:{wikidata:"Q2528380",domain:"TrigonometricFunction"},Hypot:{domain:"Function"},InverseHaversine:{domain:"TrigonometricFunction"},Sin:{domain:"TrigonometricFunction"},Sinh:{domain:"HyperbolicFunction"},Tan:{domain:"TrigonometricFunction"},Tanh:{domain:"HyperbolicFunction"},ToPolarCoordinates:{domain:"Function"}};function Qt(e){return"object"==typeof e&&"supersets"in e}function Kt(e){return"object"==typeof e&&"constant"in e}function Jt(e){return"object"==typeof e&&"signatures"in e}function er(e){return"object"==typeof e&&"countable"in e}function tr(e="all"){if("all"===e)return tr(["domains","core","collections","algebra","arithmetic","calculus","complex","combinatorics","dimensions","inequalities","intervals","linear-algebra","logic","numeric","other","physics","polynomials","relations","statistics","transcendentals","trigonometry","rounding","units"]);const t=[];for(const r of e)t.push(rr[r]);return t}const rr={arithmetic:zt,algebra:{},calculus:{},combinatorics:{},complex:{},core:{Apply:{domain:"Function",signatures:[{args:[["head","Expression"],["tail","List"]],result:"Expression"}]},About:{domain:"Function",signatures:[{args:["Expression"],result:"Dictionary"}]},BaseForm:{domain:"Function",signatures:[{args:[["value","Integer"],["base",["Integer",2,16]]],result:"Integer"}]},Block:{domain:"Function"},Dictionary:{domain:"Collection"},Domain:{domain:"Function",signatures:[{args:["Expression"],result:"Domain"}]},Evaluate:{domain:"Function",signatures:[{args:["Expression"],result:"Expression"}]},Parentheses:{domain:"Function",threadable:!0,pure:!1,signatures:[{rest:"Expression",result:"Expression"}]},Head:{domain:"Function",signatures:[{args:["Expression"],result:"Expression"}]},Lambda:{domain:"Function",wikidata:"Q567612",hold:"all"},Latex:{domain:"Function",signatures:[{rest:["tokens","String"],result:"String"}]},String:{domain:"Function",threadable:!0,signatures:[{rest:["string","String"],result:"String"}]},Symbol:{domain:"Function",threadable:!0,signatures:[{args:["String"],result:"Symbol"}]},Tail:{domain:"Function",signatures:[{args:["Expression"],result:"List"}]}},collections:Object.assign(Object.assign({},Ut),Xt),domains:Bt(),dimensions:{},logic:Ft,inequalities:{},intervals:{},"linear-algebra":{},numeric:{},other:{},polynomials:{},physics:{"Mu-0":{constant:!0,wikidata:"Q1515261",domain:"RealNumber",value:125663706212e-17,unit:[C,"H",[O,"m",-1]]}},relations:{},rounding:{},statistics:{},transcendentals:{},trigonometry:Zt,units:{}};function nr(e,t){const r=new Map;for(const n of Object.keys(e)){const[i,s]=ir(e[n],t);s&&t.signal({severity:i?"warning":"error",message:["invalid-dictionary-entry",s],head:n}),i&&r.set(n,i)}return t.context={parentScope:t.context,dictionary:r},sr(t,r),t.context=t.context.parentScope,r}function ir(e,t){if("number"==typeof e)return[{domain:re(e),constant:!1,value:e}];let r=e.domain;if(Kt(e)){let t;return r||(t="no domain provided.",r="Anything"),[e=Object.assign({domain:r,constant:!1},e),t]}if(er(e)||t.isSubsetOf(r,"Collection")){let t=Object.assign({},e);return t=Object.assign({iterable:void 0!==t.iterator,indexable:void 0!==t.at,countable:void 0!==t.size},e),[t,void 0]}if(Jt(e)||t.isSubsetOf(r,"Function")){let t,r=Object.assign({},e);if(r=Object.assign({wikidata:"",scope:null,threadable:!1,associative:!1,commutative:!1,additive:!1,multiplicative:!1,outtative:!1,idempotent:!1,involution:!1,pure:!0,hold:"none",sequenceHold:!1,signatures:[]},e),0===r.signatures.length)t="no function signature provided.";else if(1===r.signatures.length){const e=r.signatures[0];"Boolean"!==e.result&&"MaybeBoolean"!==e.result||(2===e.args.length&&("Boolean"!==e.args[0]&&"MaybeBoolean"!==e.args[0]||"Boolean"!==e.args[1]&&"MaybeBoolean"!==e.args[1]||(t='looks like a "LogicalFunction"?')),t||(t='looks like a "Predicate"?'))}return[r,t]}if(Qt(e)||t.isSubsetOf(r,"Function"))return[e];if(e){if(r&&t.isSubsetOf(r,"Number")){if(void 0===e.value)return[null,'expected "value" property in definition'];const t=re(e.value);return[Object.assign({domain:t,constant:!1},e),t!==r?'inferred domain "${inferredDomain}"':""]}if(r&&t.isSubsetOf(r,"Function"))return[Object.assign({signatures:[{rest:"Anything",result:"Anything"}]},e),'a "Function" should have a "signatures" property in its definition'];if(r&&t.isSubsetOf(r,"Set"))return[e,'a "Set" should have a "supersets" property in its definition']}return[e,"could not be validate"]}function sr(e,t){const r=new Set;for(const[n,i]of t){if(/[A-Za-z][A-Za-z0-9-]*/.test(n)||1===n.length||e.signal({severity:"error",message:"invalid-name",head:n}),i.wikidata&&(r.has(i.wikidata)&&e.signal({severity:"warning",message:["duplicate-wikidata",i.wikidata],head:n}),r.add(i.wikidata)),Kt(i)&&(e.isSubsetOf(i.domain,"Anything")||e.signal({severity:"warning",message:["unknown-domain",i.domain],head:n})),Jt(i))for(const t of i.signatures)if("function"==typeof t.result||e.isSubsetOf(t.result,"Anything")||e.signal({severity:"warning",message:["unknown-domain",t.result],head:n}),t.rest&&!e.isSubsetOf(t.rest,"Anything")&&e.signal({severity:"warning",message:["unknown-domain",i.domain],head:n}),t.args)for(const r of t.args)e.isSubsetOf(r,"Anything")||e.signal({severity:"warning",message:["unknown-domain",i.domain],head:n});if(Qt(i)){0===i.supersets.length&&"Anything"!==n&&e.signal({severity:"warning",message:"expected-supersets",head:n});for(const r of i.supersets)e.isSubsetOf(r,"Anything")||e.signal({severity:"warning",message:["expected-supersets",r],head:n}),e.isSubsetOf(r,n)&&(e.signal({severity:"warning",message:["cyclic-definition",or(e,n)],head:n}),t.delete(n))}}}function or(e,t,r){var n;const i=[`${t}`],s="string"==typeof t?t:X(t);if(r){if(r.includes(s))return`${s} ↩︎ `;r.push(s)}else r=[s];const o=e.getSetDefinition(s);if(!o)return`${s}?!`;if(!o.supersets.length||0===o.supersets.length)return"";for(const a of null==o?void 0:o.supersets)"string"==typeof a&&i.push(or(e,a,[...r]));return i.length<=1?null!==(n=i[0])&&void 0!==n?n:"":"["+i.join(" ➔ ")+"]"}function ar(e,t,r){const n=ge(t,r);return n<0?-1:n>0?1:0}async function lr(e,t){return t.shouldContinueExecution()?"Nothing":null}function ur(e,t){return null}const cr=Math.pow(10,-10);function pr(e){return Math.abs(e)<cr?0:e}class hr{constructor(e){this.signal=Object.assign({severity:"error"},e)}toString(){let e="";if(this.signal.head&&(e+=this.signal.head+": "),"string"==typeof this.signal.message)e+=this.signal.message;else{e+=" ";for(const t of this.signal.message)e+=t.toString()+" "}return e}}function dr(e,t){var r,n;if("object"==typeof e&&"object"==typeof t&&"wikidata"in e&&"wikidata"in t&&e.wikidata!==t.wikidata)return!1;if(("number"==typeof e||z(e))&&("number"==typeof t||z(t)))return 0===pr((null!==(r=G(e))&&void 0!==r?r:NaN)-(null!==(n=G(t))&&void 0!==n?n:NaN));const i=Z(e);if(null!==i)return i===Z(t);const s=ne(e);if(null!==s){const e=ne(t);if(!e)return!1;const r=Object.keys(s);if(Object.keys(e).length!==r.length)return!1;for(const t of r)if(!dr(s[t],e[t]))return!1;return!0}const o=W(e);if(null===o)return!1;const a=W(t);if(null===a)return!1;if(!dr(o,a))return!1;const l=te(e);if(l!==te(t))return!1;let u=1;for(;u<=l;){if(!dr(ee(e,u),ee(t,u)))return!1;u+=1}return!0}class fr{constructor(e){var t;const r=null!==(t=null==e?void 0:e.dictionaries)&&void 0!==t?t:fr.getDictionaries();for(const n of r)this.context?this.pushScope(n):this.pushScope(n,{warn:e=>{for(const t of e)"string"==typeof t.message?console.warn(t.message):console.warn(...t.message)},timeLimit:2,memoryLimit:1,recursionLimit:1024});this.pushScope({})}static getDictionaries(e="all"){return tr(e)}pushScope(e,t){this.context=Object.assign(Object.assign({},t),{parentScope:this.context,dictionary:nr(e,this)})}popScope(){var e;const t=null===(e=this.context)||void 0===e?void 0:e.parentScope;if(this.context.warnings){const e=[...this.context.warnings];this.context.warnings=[],this.context.warn&&this.context.warn(e)}t&&this.context.warnings.length>0&&(t.warnings?t.warnings=[...t.warnings,...this.context.warnings]:t.warnings=[...this.context.warnings]),this.context=t}shouldContinueExecution(){if(this.context.timeLimit&&this.context.deadline<r.g.performance.now())throw new hr({message:"timeout"});return!0}getVars(e){const t=new Set;return mr(e,t,this),t}getFunctionDefinition(e){let t=this.context,r=null;for(;t&&!r;)r=t.dictionary.get(e),r&&!("signatures"in r)&&(r=null),r||(t=t.parentScope);return r&&(r.scope=t),r}getSymbolDefinition(e){let t=this.context,r=null;for(;t&&!r;)r=t.dictionary.get(e),r&&!("constant"in r)&&(r=null),r||(t=t.parentScope);return r&&(r.scope=t),r}getSetDefinition(e){let t=this.context,r=null;for(;t&&!r;)r=t.dictionary.get(e),Qt(r)||(r=null),r||(t=t.parentScope);return r&&(r.scope=t),r}getDefinition(e){let t=this.context,r=null;for(;t&&!r;)r=t.dictionary.get(e),r||(t=t.parentScope);return r&&(r.scope=t),r}signal(e){}isSubsetOf(e,t){var r,n,i;if(!e||!t)return!1;if("string"==typeof e&&e===t)return!0;if("Anything"===t)return!0;if("Nothing"===t)return!1;const s=X(e);if("Union"===s)return Q(e).some((e=>this.isSubsetOf(e,t)));if("Intersection"===s)return Q(e).every((e=>this.isSubsetOf(e,t)));if("SetMinus"===s)return this.isSubsetOf(ee(e,1),t)&&!this.isSubsetOf(ee(e,2),t);const o=X(t);if("Union"===o)return Q(t).some((t=>this.isSubsetOf(e,t)));if("Intersection"===o)return Q(t).every((t=>this.isSubsetOf(e,t)));if("SetMinus"===o)return this.isSubsetOf(e,ee(t,1))&&!this.isSubsetOf(e,ee(t,2));const a=null!==(r=Z(t))&&void 0!==r?r:o;if(!a){const e=null!==(n=G(t))&&void 0!==n?n:NaN;if(Number.isNaN(e))return!1;t=0===t?"NumberZero":["Set",t]}const l=this.getSetDefinition(a);if(!l)return!1;if("function"==typeof l.isSubsetOf)return l.isSubsetOf(this,e,t);const u=null!==(i=Z(e))&&void 0!==i?i:s;if(!u)return!1;const c=this.getSetDefinition(u);if(!c)return!1;for(const p of c.supersets)if(this.isSubsetOf(p,t))return!0;return!1}format(e,t){return Qe(e,Array.isArray(t)?t:[null!=t?t:"canonical"],this)}canonical(e){return this.format(e)}evaluate(e){return lr(e,this)}domain(e){return ur()}isInfinity(e){}isZero(e){return this.equal(e,0)}isOne(e){return this.equal(e,1)}isMinusOne(e){return this.equal(e,-1)}isNonNegative(e){const t=this.isZero(e);if(void 0!==t)return!0===t||this.isPositive(e)}isPositive(e){}isNegative(e){const t=this.isNonNegative(e);if(void 0!==t)return!t}isNonPositive(e){const t=this.isPositive(e);if(void 0!==t)return!t}isInteger(e){}isRational(e){}isReal(e){}isExtendedReal(e){}isAlgebraic(e){}isComplex(e){}isElement(e,t){}match(e,t){return null}same(e,t){return dr(e,t)}compare(e,t){return ar(this,e,t)}equal(e,t){const r=ar(this,e,t);return void 0===r?void 0:0===r}less(e,t){const r=ar(this,e,t);return void 0===r?void 0:r<0}lessEqual(e,t){const r=ar(this,e,t);return void 0===r?void 0:r<=0}greater(e,t){const r=ar(this,e,t);return void 0===r?void 0:r>0}greaterEqual(e,t){const r=ar(this,e,t);return void 0===r?void 0:r>=0}}function mr(e,t,r){const n=Q(e);if(n.length>0)n.forEach((e=>mr(e,t,r)));else{const n=Z(e);if(n&&!t.has(n)){const e=r.getSymbolDefinition(n);e&&!1!==e.constant||t.add(n)}}}function gr(e,t,r){return Qe(e,Array.isArray(t)?t:[t],new fr(r))}function yr(e,t){return lr(e,new fr(t))}const vr=/\r\n|[\n\r\u2028\u2029]/,br={joinLines:e=>`<div>${e.join("</div><div>")}</div>`,grey:e=>`<span style="opacity:.5">${e}</span>`,red:e=>`<span style="color:#F33">${e}</span>`,highlightBackground:e=>`<span style="background:rgba(255, 100, 100, .1);display:block;border-radius: 4px">${e}</span>`};class xr{constructor(e,t){this.source=e,this.url=t}get lines(){return this._lines||(this._lines=this.source.split(vr)),this._lines}get lineOffsets(){if(null==this._lineOffsets){const e=[],t=this.source;let r=!0,n=0;for(;n<t.length;){r&&(e.push(n),r=!1);const i=t.charCodeAt(n);r=13===i||10===i||8232===i||8233===i,13===i&&n+1<t.length&&10===t.charCodeAt(n+1)&&n++,n++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}getLinecol(e){e=Math.max(Math.min(e,this.source.length),0);const t=this.lineOffsets;let r=0,n=t.length;if(0===n)return[1,e+1];for(;r<n;){const i=Math.floor((r+n)/2);t[i]>e?n=i:r=i+1}return[r,e-t[r-1]+1]}signalOrigin(e){const[t,r]=this.getLinecol(e);return{url:this.url,source:this.source,offset:e,line:t,column:r,around:this.sourceAround(t,r)}}chalkGutter(e){return br.grey(e)}chalkMarker(e){return br.red(e)}chalkMessage(e){return br.red(e)}sourceAround(e,t,r){const n=2,i=3,s=Math.max(e-1-(n+1),0),o=Math.min(this.lines.length,e+i)-1,a="number"==typeof t,l=String(o).length,u=[];for(let c=s;c<=o;c++){const n=` ${` ${c+1}`.slice(-l)} ┆ `;let i="";if(c===e-1){if(a){const e=this.lines[c].slice(0,Math.max(t-1,0)).replace(/[^\t]/g," ");i=br.joinLines(["",[" ",this.chalkGutter(n.replace(/\d/g," ")),e,this.chalkMarker("^")].join("")]),r&&(i+=" "+this.chalkMessage(r))}else r&&(i=br.joinLines(["",this.chalkGutter(n.replace(/\d/g," "))+r]));u.push(br.highlightBackground([this.chalkMarker(">"),this.chalkGutter(n),this.lines[c],i].join("")))}else u.push(` ${this.chalkGutter(n)}${this.lines[c]}`)}return br.joinLines(u)}}const wr=[10,13,8232,8233],_r=[9,10,11,12,13,32,133,8206,8207,8232,8233],Er=Dr([[33,47],[58,64],[91,94],96,[123,126],[161,167],169,[171,172],174,[176,177],182,187,191,215,247,[8208,8254],[8257,8275],[8592,8730],[8731,10101],[10132,11903],[12289,12291],[12296,12320],12336,[64830,64831],[65093,65094]]),Sr=Dr([[0,32],[127,159],92,96,[65534,65535]]),Ar=[...Sr,33,34,35,36,37,38,39,40,41,46,58,60,63,64,91,93,94,123,125,126],Nr=[..._r,0,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288],kr=[2042,65101,65102,65103,8208,8209,8210,8211,65112,8259,727,65374,65306,1417,1795,1796,65072,8282,1475,760,42889,8758,42237,894,65281,451,660,2429,8228,1748,1793,1794,1632,1776,12539,65381,903,65793,8231,65282,8220,8221],Mr=Dr([...Nr,...kr,[0,31],[127,159],173,1564,6158,8203,8204,8205,8206,8207,8288,8289,8290,8291,8292,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,[64976,65007],65279,65534,65535]),Cr=new Map([[0,"\\0"],[8,"\\b"],[9,"\\t"],[10,"\\n"],[12,"\\f"],[13,"\\r"],[32," "],[92,"\\\\"],[39,"\\'"],[34,'\\"']]),Tr=new Map([[48,0],[92,92],[39,39],[34,34],[98,8],[102,12],[110,10],[114,13],[115,32],[116,9]]),Or=new Map([[48,0],[49,1],[50,2],[51,3],[52,4],[53,5],[54,6],[55,7],[56,8],[57,9],[97,10],[65,10],[98,11],[66,11],[99,12],[67,12],[100,13],[68,13],[101,14],[69,14],[102,15],[70,15],[65296,0],[65297,1],[65298,2],[65299,3],[65300,4],[65301,5],[65302,6],[65303,7],[65304,8],[65305,9],[65313,10],[65314,11],[65315,12],[65316,13],[65317,14],[65318,15],[65345,10],[65346,11],[65347,12],[65348,13],[65349,14],[65350,15]]),Ir=new Map([[48,0],[49,1],[50,2],[51,3],[52,4],[53,5],[54,6],[55,7],[56,8],[57,9],[65296,0],[65297,1],[65298,2],[65299,3],[65300,4],[65301,5],[65302,6],[65303,7],[65304,8],[65305,9]]);function Pr(e){const t=new Map;for(const[r,n]of Object.entries(e))if(t.has(n)){const e=t.get(n);e.push(parseInt(r)),t.set(n,e)}else t.set(n,[parseInt(r)]);return t}function Dr(e){const t=[];for(const r of e)if("number"==typeof r)t.push(r);else for(let e=r[0];e<=r[1];e++)t.push(e);return t}function Rr(e){return wr.includes(e)}function Lr(e){return 9===e||32===e}function qr(e){return Nr.includes(e)}function $r(e){return Nr.includes(e)||Er.includes(e)}function Br(e){return Sr.includes(e)}function zr(e){return Ar.includes(e)}function Fr(e){return Mr.includes(e)}function Ur(e){return console.assert(String.fromCodePoint(e).length===(e>65535?2:1)),e>65535?2:1}Pr(new Map([[172,"!"],[177,"+-"],[8723,"-+"],[215,"*"],[247,"/"],[8725,"/"],[8228,"."],[8229,".."],[8230,"..."],[8231,"."],[8242,"'"],[8243,"''"],[8244,"'''"],[8258,"***"],[8260,"/"],[8263,"??"],[8264,"?!"],[8265,"!?"],[8270,"*"],[8273,"**"],[8278,"..."],[8281,"....."],[8282,":"],[8283,".:."],[8290,"*"],[8292,"+"],[960,"Pi"],[8252,"!!"],[8520,"ImaginaryI"],[8519,"ExponentialE"],[8450,"ComplexNumber"],[8477,"RealNumber"],[8469,"NaturalNumber"],[8484,"Integer"],[8474,"RationalNumber"],[8592,"<-"],[8594,"->"],[8596,"<->"],[8614,"|->"],[8656,"=>"],[8660,"<=>"],[8709,"EmptySet"],[8734,"Infinity"],[10717,"ComplexInfinity"],[8722,"-"],[8728,"."],[8896,"&&"],[8897,"||"],[8743,"&&"],[8744,"||"],[8759,"::"],[8800,"!="],[8801,"=="],[8802,"!=="],[8803,"==="],[10877,"<="],[10878,">="],[8804,"<="],[8805,">="],[8806,"<="],[8807,">="],[8810,"<<"],[8811,">>"],[9655,"|>"],[9665,"<|"],[10704,"||>"],[10703,"<||"],[8669,"~>"],[8668,"<~"],[8712,"in"],[8713,"!in"],[10869,"=="],[10870,"==="],[9216,"\\0"],[9224,"\\b"],[9225,"\\t"],[9226,"\\n"],[9252,"\\n"],[9229,"\\r"]]));class jr extends Error{constructor(e){super(),this.message=e}}class Gr{constructor(e,t,r){this._offset=0,this.length=0,this.rules=e,this.source=t,this.url=r,this.length=t.length,this._trace=[]}get(e){return this.source.codePointAt(e)}atEnd(){return this.offset>=this.source.length}atLinebreak(){return Rr(this.source.codePointAt(this.offset))}atString(e){let t=0,r=!0;const n=this.offset;for(;r&&t<e.length&&t<this.source.length;)r=this.get(n+t)===e.codePointAt(t),t+=1;return r}slice(e,t){return this.source.slice(e,t)}get offset(){return this._offset}trace(e){return[...this._trace,"string"==typeof e?e:"function"==typeof e?"???":e[0]]}skipTo(e){return this._offset=e,this}fatalError(e){throw new jr(e)}hasRule(e){return this.rules.has(e)}parse(e,t){let r;return this._trace.push("string"==typeof e?e:"function"==typeof e?"???":e[0]),void 0!==t&&this.skipTo(t),r="string"==typeof e?this.rules.parse(e,this):"function"==typeof e?e(this):e[1](this),this._trace.pop(),r}parseWhitespace(){return this.hasRule("whitespace")?this.parse("whitespace"):this.ignore()}ignore(){return new Vr(this).ignore()}failure(){return new Vr(this).failure()}}class Vr{constructor(e){this._parser=e,this._range=[e.offset,e.offset]}copyDiagnostics(e){e.isError&&(void 0===this._diagnostics&&(this._diagnostics=[]),this._diagnostics=[...this._diagnostics,...e._diagnostics])}get parser(){return this._parser}get diagnostics(){return this._diagnostics}get isFailure(){return void 0===this._diagnostics&&void 0===this._value}get isEmpty(){return void 0===this._diagnostics&&null===this._value}get isSuccess(){return void 0===this._diagnostics&&void 0!==this._value&&null!==this._value}get isError(){return void 0!==this._diagnostics}get start(){return this._range[0]}get end(){return this._range[1]}set end(e){this._range[1]=e}set range(e){this._range=e}get value(){return this._value}set value(e){this._value=e}success(e){return this._value=e,this._range[1]=this._parser.offset-1,this}failure(){return this._parser.skipTo(this._range[0]),this}ignore(){return this._value=null,this}ignoreUntil(e){return this._parser.skipTo(e),this._range[1]=this._parser.offset,this._value=null,this}error(e,t,r){return this._value=e,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"error",range:[this._range[0],this._range[1]],message:"function"==typeof t?t(this):t,fixits:r}),this}errorAt(e,t,r,n){return this._value=e,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"error",range:[this._range[0],this._range[1],r],message:"function"==typeof t?t(this):t,fixits:n}),this}errorFrom(e,t){return this._value=t,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics=[...this._diagnostics,...e._diagnostics],this}warning(e,t){return this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"warning",range:[this._range[0],this._range[1]],message:e,fixits:t}),this}}function Hr(e,t){let r=e.offset;const n=[...t].map((e=>e.codePointAt(0)));for(;r<t.length-n.length;){let t=e.get(r);if(t===n[0]){let i=!0,s=1;for(;i&&s<n.length;)t=e.get(r),i=t===n[s],i&&(s+=1,r+=Ur(t));if(i)return r}r+=Ur(t)}return-1}function Wr(e){return"string"==typeof e?e:e[0]}function Yr(e,t){const r=new Vr(e),n=e.offset;return e.get(n)!==t&&r.failure(),e.skipTo(n+Ur(t)),r.success(String.fromCodePoint(t))}function Xr(e){return[`U+${("0000"+e.toString(16)).slice(-4)} (${String.fromCodePoint(e)})`,t=>Yr(t,e)]}function Zr(e,t,r,n,i){const s=new Vr(e);let o=0,a=1/0;for(const l of r)s.copyDiagnostics(l),(l.isSuccess||l.isError)&&(o=Math.max(o,l.end),a=Math.min(a,l.end));if(s.range=[a,o],s.value=r.length>0?t(...r):null,i&&s.error(s.value,i),n)for(const l of n)s.copyDiagnostics(l);return s}function Qr(e,t){const r=new Vr(e);let n=0,i=!0;const s=e.offset;for(;n<t.length&&i&&n<e.length;)i=e.get(s+n)===t.codePointAt(n),n++;return i&&n===t.length&&(e.skipTo(e.offset+n),r.success(t)),r}function Kr(e){return console.assert(e.length>0),1===e.length?Xr(e.codePointAt(0)):[`**\`${e}\`**`,t=>Qr(t,e)]}function Jr(e,t){return[e.map((e=>Wr(e))).join(" "),r=>{const n=[],i=[];let s=!0;i.push(r.parseWhitespace());for(const o of e){const e=r.offset,a=r.parse(o);if(n.push(a),a.isFailure&&s)return a;if(a.isFailure)return Zr(r,t,n,i,["unexpected-symbol",String.fromCodePoint(r.get(e)),r.trace(o)]);s=!1,i.push(r.parseWhitespace())}return Zr(r,t,n,i)}]}function en(e,t){return[e.map((e=>Wr(e))).join(" | "),r=>{const n=r.offset;let i;for(const s of e){r.skipTo(n);const e=r.parse(s);if(t&&(e.isSuccess||e.isError)&&(e.value=t(e)),e.isSuccess)return e;!i&&e.isError&&(i=e)}return i?(r.skipTo(i.end+1),i):(r.skipTo(n),r.failure())}]}function tn(e,t){return[`(${Wr(e)})*`,r=>{const n=[r.parseWhitespace()];let i=r.parse(e);const s=[i];for(;!r.atEnd()&&(i.isSuccess||i.isEmpty);)n.push(r.parseWhitespace()),i=r.parse(e),s.push(i);return Zr(r,t,s,n)}]}function rn(e){return[`\\[${Wr(e)}\\]`,t=>{const r=t.offset,n=t.parse(e);return n.isSuccess||n.isEmpty?n:n.isFailure?(t.skipTo(r),t.ignore()):n}]}function nn(e,t){return[`(${Wr(e)})!`,r=>{const n=r.parse(e);if(n.isSuccess||n.isEmpty||n.isError)return n;let i=5;const s=r.offset;let o=t;for(o||(o=r.atEnd()?["expression-expected"]:["unexpected-symbol",String.fromCodePoint(r.get(s)),r.trace(e)]);i>0&&!r.atEnd();){r.skipTo(r.offset+1);const t=r.parse(e);if(t.isSuccess||t.isEmpty)return n.errorAt(t.value,o,s),n.copyDiagnostics(t),n;i-=1}return n.errorAt(n.value,o,s)}]}function sn(){return["_eof_",e=>{const t=new Vr(e);return e.atEnd()?t.success(!0):t.failure()}]}function on(e,t,r){return[`**\`${e}\`** (${Wr(t)})* **\`${r}\`**`,n=>{const i=new Vr(n);if(!n.atString(e))return i.failure();const s=n.offset;n.skipTo(s+e.length);const o=n.parse(t);return o.isError?(i.copyDiagnostics(o),i.range=[i.start,Hr(n,r)],i):n.atString(r)?(n.skipTo(n.offset+r.length),i.value=o.value,i):i.error(o.value,["closing-bracket-expected",r])}]}function an(e,t,r,n,i){return[`**\`${e}\`** (${Wr(t)}+#**\`${r}\`** **\`${n}\`**`,s=>{const o=new Vr(s);if(!s.parse(Kr(e)).isSuccess)return o.failure();const a=[];let l=!1;for(;!l&&!s.atEnd();){const e=s.parse(t);o.copyDiagnostics(e),l=!e.isSuccess,l||(a.push(e),l=!s.parse(Kr(r)).isSuccess)}return 0===a.length?o.error(i([]),"expression-expected"):s.parse(Kr(n)).isSuccess?o.success(i(a)):o.error(i(a),["closing-bracket-expected",n])}]}function ln(e,t,r){const n=Wr(t);return[e.map((e=>{var t;const[r,i,s]=e,o=null!==(t=e[3])&&void 0!==t?t:"right";return"prefix"===o?`**\`${i}\`**<sub>${s}</sub> ${n}`:"suffix"===o?`${n} **\`${i}\`**<sub>${s}</sub>`:"left"===o?`_···_ **\`${i}\`**<sub>${s}L</sub> ${n}`:`${n} **\`${i}\`**<sub>${s}R</sub> _···_`})).join(" | "),r=>un(r,e,t)]}function un(e,t,r,n){return e.parse(r)}function cn(e,t){const r=new Vr(e);let n=e.offset;if(n>=e.length)return r.failure();if("p"===t){if(112!==e.get(n)&&80!==e.get(n))return r.failure()}else if(101!==e.get(n)&&69!==e.get(n))return r.failure();n+=1;let i=1;if(45===e.get(n)?(n++,i=-1):43===e.get(n)&&n++,e.offset!==n&&!Ir.has(e.get(n)))return e.skipTo(n),r.error(0,"exponent-expected");let s=0;for(;Ir.has(e.get(n));)s=10*s+Ir.get(e.get(n++));return e.skipTo(n),r.success(i*s)}function pn(e,t,r){const n=new Vr(e);let i=cn(e,"e");return i.isSuccess?r=Number.parseFloat(r.toString()+"e"+i.value.toString()):i.isFailure&&(i=cn(e,"p"),i.isSuccess&&(r*=Math.pow(2,i.value))),i.isSuccess||i.isFailure?n.success(r):n.error(r,"exponent-expected")}function hn(e){const t=new Vr(e),r=e.offset;let n=r;if(48!==e.get(n++)||98!==e.get(n++))return t.failure();let i=0,s=!1;for(;!s&&n<e.length;){const t=Or.get(e.get(n++));0===t?i<<=1:1===t?i=1+(i<<1):95===e.get(n-1)||(s=!0,n-=1)}if(46===e.get(n)){n+=1;let t=.5,r=0;for(s=!1;!s&&n<e.length;){const i=Or.get(e.get(n++));0===i?t/=2:1===i?(r+=t,t/=2):95===e.get(n-1)||(s=!0,n-=1)}i+=r}return e.skipTo(n),pn(e,r,i)}function dn(e){const t=new Vr(e),r=e.offset;let n=r;if(48!==e.get(n++)||120!==e.get(n++))return t.failure();let i=0,s=!1;for(;!s&&n<e.length;){const t=e.get(n++);Or.has(t)?i=16*i+Or.get(t):95!==t&&(s=!0,n-=1)}if(46===e.get(n++)){let r=.0625;s=!1;let o=0;for(;!s&&n<e.length;){const a=e.get(n++);if(Or.has(a))o+=r*Or.get(a),r/=16;else{if(95===a)return e.skipTo(n),t.error(i+o,"hexadecimal-number-expected");s=!0,n-=1}}i+=o}return e.skipTo(n),pn(e,r,i)}function fn(e){const t=new Vr(e),r=e.offset;if(!Ir.has(e.get(r)))return t.failure();let n=r,i=0,s=!1;for(;!s&&n<e.length;){const t=e.get(n++);Ir.has(t)?i=10*i+Ir.get(t):95!==t&&(s=!0,n-=1)}if(46===e.get(n)){n+=1;let r=.1;s=!1;let o=0;for(;!s&&n<e.length;){const a=e.get(n++);if(Ir.has(a))o+=r*Ir.get(a),r/=10;else{if(95===a)return e.skipTo(n),t.error(i+o,"decimal-number-expected");s=!0,n-=1}}i+=o}return e.skipTo(n),pn(e,r,i)}function mn(e){let t=hn(e);return t.isFailure&&(t=dn(e)),t.isFailure&&(t=fn(e)),t}function gn(e){const t=new Vr(e);let r=e.offset,n=1;45===e.get(r)?(r++,n=-1):43===e.get(r)&&r++,e.skipTo(r);const i=mn(e);return i.isSuccess?t.success(n*i.value):i.isError?t.errorFrom(i,n*i.value):t.failure()}function yn(e){let t,r=e.offset;do{t=e.get(r++)}while(32===t||9===t);e.skipTo(r-1)}function vn(e){let t=!1,r=e.offset;for(;!t&&r<e.length;){const n=e.get(r++);13!==n&&8232!==n&&8233!==n||(t=!0),10===n&&(13===e.get(r)&&(r+=1),t=!0)}e.skipTo(r)}function bn(e){const t=e.get(e.offset);13!==t&&8232!==t&&8233!==t?10===t&&(13===e.get(e.offset+1)?e.skipTo(e.offset+2):e.skipTo(e.offset+1)):e.skipTo(e.offset+1)}function xn(e){let t=!1;const r=new Vr(e);let n=e.offset;for(;!t&&n<e.length;){const i=e.offset;for(;!t;){const r=e.get(n);t=!qr(r),t||(n+=Ur(r))}if(r.copyDiagnostics(wn(e.skipTo(n))),r.copyDiagnostics(_n(e)),r.isError)return r;t=i===e.offset,n=e.offset}return e.skipTo(n),r.ignore()}function wn(e){const t=new Vr(e);return 47===e.get(e.offset)&&47===e.get(e.offset+1)&&vn(e),t.ignore()}function _n(e){const t=new Vr(e);let r=e.offset;if(47!==e.get(r)||42!==e.get(r+1))return t.failure();r+=2;let n=1;for(;n>0&&r<e.length;){const t=e.get(r);47===t&&42===e.get(r+1)?(n+=1,r+=2):42===t&&47===e.get(r+1)?(n-=1,r+=2):r+=Ur(t)}return n>0?(e.skipTo(e.offset+r),t.errorAt(null,"end-of-comment-expected",t.start)):t.ignoreUntil(r)}function En(e){const t=new Vr(e);return 0!==e.offset||35!==e.get(0)||33!==e.get(1)?t.failure():(vn(e),t.success(!0))}function Sn(e){const t=new Vr(e);if(92!==e.get(e.offset))return t.failure();const r=e.offset,n=Tr.get(e.get(r+1));if(void 0!==n)return e.skipTo(r+2),t.success(String.fromCodePoint(n));let i=r+1;const s=e.get(i++);if(117!==s)return e.skipTo(i),t.errorAt(String.fromCodePoint(s),["invalid-escape-sequence","\\"+String.fromCodePoint(s)],r);let o=0,a=!1,l=!1,u="";if(123===e.get(i)){for(i+=1;!l&&i<r+11;){const t=e.get(i++);u+=String.fromCodePoint(t),a=a||!Or.has(t),a||(o=16*o+Or.get(t)),l=125===e.get(i)}l&&(i+=1)}else{for(;!a&&i<=e.offset+5;){const t=e.get(i++);u+=String.fromCodePoint(t),a=!Or.has(t),a||(o=16*o+Or.get(t))}l=i<=e.length}return e.skipTo(i),a||!l?t.errorAt("�",["invalid-unicode-codepoint-string",u],r):o>1114111?t.errorAt("�",["invalid-unicode-codepoint-value","U+"+("00000"+o.toString(16)).slice(-8).toUpperCase()],r):o>=55296&&o<=57343?t.errorAt("�",["invalid-unicode-codepoint-value","U+"+("0000"+o.toString(16)).slice(-4).toUpperCase()],r):t.success(String.fromCodePoint(o))}function An(e){const t=e.offset,r=new Vr(e);if(35!==e.get(t))return r.failure();let n=0,i=t;for(;35===e.get(i++);)n+=1;if(i-=1,34!==e.get(i++))return r.failure();let s="",o=!1,a=!1;do{const t=e.get(i++);if(o=i>=e.length||Rr(t),34===t){let t=n;for(;t>0&&35===e.get(i+t-1);)t-=1;a=0===t,a&&(i+=n)}o||a||(s+=String.fromCodePoint(t))}while(!o&&!a);return e.skipTo(i),a?r.success(s):r.error(s,["string-literal-closing-delimiter-expected","#".repeat(n)+'"'])}function Nn(e,t){const r=new Vr(e);if(void 0===t||92!==e.get(e.offset)||40!==e.get(e.offset+1))return r.failure();const n=e.offset+2,i=e.parse(t,n);return r.copyDiagnostics(i),41!==e.get(e.offset)?r.error(i.value,["closing-bracket-expected",")"]):(e.skipTo(e.offset+1),r.value=i.value,r)}function kn(e,t){const r=new Vr(e),n=e.offset;if(34!==e.get(n))return r.failure();if(34===e.get(n+1)&&34!==e.get(n+2))return e.skipTo(e.offset+2),r.success([""]);if(34===e.get(n+1)&&34===e.get(n+2))return r.failure();let i=!1,s=!1;e.skipTo(n+1);const o=[];let a="";for(;!i&&!s&&!e.atEnd();){const n=e.get(e.offset);if(s=34===n,i=Rr(n),92===n){const n=Nn(e,t);if(n.isFailure){const t=Sn(e);r.copyDiagnostics(t),t.isSuccess?a+=t.value:t.isError&&(a+="\\"+t.value)}else o.push(a),a="",r.copyDiagnostics(n),o.push(n.value)}else i||s||(a+=String.fromCodePoint(n)),e.skipTo(e.offset+1)}return a&&(o.push(a),a=""),s?(r.success(o),r):0===o.length&&(e.atEnd()||e.atLinebreak())?r.error([""],["string-literal-opening-delimiter-expected",'"']):r.error(o,["string-literal-closing-delimiter-expected",'"'])}function Mn(e,t){const r=new Vr(e),n=e.offset;if(34!==e.get(n)||34!==e.get(n+1)||34!==e.get(n+2))return r.failure();if(yn(e.skipTo(n+3)),!e.atLinebreak())return r.error([""],"multiline-string-expected");bn(e);let i=!1,s=e.offset;const o=[];let a=[],l="";for(;!i&&s<e.length;){const n=e.get(s);if(Rr(n))l&&a.push(l),l="",o.push(a),a=[],bn(e.skipTo(s)),s=e.offset;else if(i=34===n&&34===e.get(s+1)&&34===e.get(s+2),92===n)if(Rr(e.get(s+1)))l+="\\\n",s+=2;else{e.skipTo(s);const i=Nn(e,t);if(i.isFailure){const t=Sn(e);s=e.offset,t.isSuccess?l+=t.value:t.isError&&(l+=String.fromCodePoint(n),r.copyDiagnostics(t))}else s=e.offset,a.push(l),l="",r.copyDiagnostics(i),a.push(i.value)}else i||(l+=String.fromCodePoint(n)),s+=1}e.skipTo(s+2);const u=l;let c=!0;if(u.length>0){for(const e of u)Lr(e.codePointAt(0))||(c=!1);if(c)for(const e of o)"string"==typeof e[0]&&e[0].startsWith(u)&&(e[0]=e[0].slice(u.length))}let p=[];for(let h=0;h<=o.length-1;h++){const e=o[h],t=e[e.length-1];"string"==typeof t&&"\\"===t[t.length-1]?(e[e.length-1]=t.slice(-1),p=[...p,...e]):p=h===o.length-1?[...p,...e]:[...p,...e,"\n"]}return c?(r.value=p,r):r.error(p,"multiline-whitespace-expected")}function Cn(e){const t=Tn(e);if(!t.isFailure)return t;const r=e.offset;let n=e.get(r);if(zr(n)||$r(n))return t.failure();let i=!1,s=r,o="";for(;!i&&s<e.length;)if(n=e.get(s),i=$r(n)||Br(n),!i){const e=String.fromCodePoint(n);o+=e,s+=e.length}return 0===o.length?t.failure():(e.skipTo(s),t.success(o))}function Tn(e){const t=new Vr(e);if(96!==e.get(e.offset))return t.failure();let r=!1,n=!1,i=e.offset+1,s="",o=!1;for(;!r&&!o&&i<e.length;){const t=e.get(i);if(o=Rr(t),r=96===t,!r)if(92===t){e.skipTo(i);const t=Sn(e);t.isSuccess&&(s+=t.value),i=e.offset}else{n=n||Br(t);const e=String.fromCodePoint(t);s+=e,i+=e.length}}return r?(e.skipTo(i+1),0===s.length?t.errorAt("Missing","empty-verbatim-symbol",t.start):n||zr(s.charCodeAt(0))?t.errorAt("Missing",["invalid-symbol-name",s],t.start):t.success(s)):(e.skipTo(i),t.errorAt("Missing",["unbalanced-verbatim-symbol",s],t.start))}class On{constructor(){this.rules={},this.ruleDescription={},this.rule("quoted-text-item","U+0000-U+0009 U+000B-U+000C U+000E-U+0021 U+0023-U+2027 U+202A-U+D7FF | U+E000-U+10FFFF"),this.rule("linebreak","(U+000A \\[U+000D\\]) | U+000D | U+2028 | U+2029"),this.rule("unicode-char","_quoted-text-item_ | _linebreak_ | U+0022"),this.rule("pattern-syntax","U+0021-U+002F | U+003A-U+0040 | U+005b-U+005E | U+0060 | U+007b-U+007e | U+00A1-U+00A7 | U+00A9 | U+00AB-U+00AC | U+00AE | U+00B0-U+00B1 | U+00B6 | U+00BB | U+00BF | U+00D7 | U+00F7 | U+2010-U+203E | U+2041-U+2053 | U+2190-U+2775 | U+2794-U+27EF | U+3001-U+3003 | U+3008-U+3020 | U+3030 | U+FD3E | U+FD3F | U+FE45 | U+FE46"),this.rule("inline-space","U+0009 | U+0020"),this.rule("pattern-whitespace","_inline-space_ | U+000A | U+000B | U+000C | U+000D | U+0085 | U+200E | U+200F | U+2028 | U+2029"),this.rule("whitespace","_pattern-whitespace_ | U+0000 | U+00A0 | U+1680 | U+180E | U+2000-U+200A | U+202f | U+205f | U+3000"),this.rule("line-comment","**`//`** (_unicode-char_)* _linebreak_)"),this.rule("block-comment","**`/*`** (((_unicode-char_)\\* _linebreak_)) | _block-comment_) **`*/`**"),this.rule("digit","U+0030-U+0039 | U+FF10-U+FF19"),this.rule("hex-digit","_digit_ | U+0041-U+0046 | U+0061-U+0066 | U+FF21-FF26 | U+FF41-U+FF46"),this.rule("binary-digit","U+0030 | U+0031 | U+FF10 | U+FF11"),this.rule("numerical-constant","**`NaN`** | **`Infinity`** | **`+Infinity`** | **`-Infinity`**"),this.rule("base-10-exponent","(**`e`** | **`E`**) \\[_sign_\\](_digit_)+"),this.rule("base-2-exponent","(**`p`** | **`P`**) \\[_sign_\\](_digit_)+"),this.rule("binary-number","**`0b`** (_binary-digit_)+ \\[**`.`** (_binary-digit_)+ \\]\\[_exponent_\\]"),this.rule("hexadecimal-number","**`0x`** (_hex-digit_)+ \\[**`.`** (_hex-digit_)+ \\]\\[_exponent_\\]"),this.rule("decimal-number","(_digit_)+ \\[**`.`** (_digit_)+ \\]\\[_exponent_\\]"),this.rule("sign","**`+`** | **`-`**"),this.rule("symbol","_verbatim-symbol_ | _inline-symbol_"),this.rule("verbatim-symbol","**``` ` ```** (_escape-sequence_ | _symbol_start_) (_escape-sequence_ | _symbol_continue_)* **``` ` ```**"),this.rule("inline-symbol","_symbol-start_ (_symbol_continue_)*"),this.rule("escape-expression","**`\\(`** _expression_ **`)`**"),this.rule("single-line-string",'**`"`** (_escape-sequence_ | _escape-expression_ | _quoted-text-item_)* **`"`**'),this.rule("multiline-string",'**`"""`** _multiline-string-line_ **`"""`**'),this.rule("extended-string","..."),this.rule("shebang","**`#!`** (unicode-char)* (_linebreak | _eof_)"),this.rule("shebang",En)}rule(e,t){"string"==typeof t?this.ruleDescription[e]=t:"function"==typeof t?(this.ruleDescription[e]||(this.ruleDescription[e]=`_${e}_`),this.rules[e]=t):(this.ruleDescription[e]=t[0],this.rules[e]=t[1])}toString(){return Object.keys(this.ruleDescription).map((e=>`_${e}_ → ${this.ruleDescription[e]}`)).join("\n\n")}parse(e,t,r){if("string"==typeof t&&(t=new Gr(this,t,r)),!this.has(e))throw new Error("Unexpected rule "+e);return this.rules[e](t)}has(e){return"function"==typeof this.rules[e]}get(e){return this.rules[e]}}const In=new On;function Pn(e){const t=V(e);if(null!==t)return t;const r=G(e);return null!==r?Number(r).toString():e.toString()}const Dn={0:"\\u0000",1:"\\u0001",2:"\\u0002",3:"\\u0003",4:"\\u0004",5:"\\u0005",6:"\\u0006",7:"\\u0007",8:"\\b",9:"\\t",10:"\\n",11:"\\u000b",12:"\\f",13:"\\r",14:"\\u000e",15:"\\u000f",16:"\\u0010",17:"\\u0011",18:"\\u0012",19:"\\u0013",20:"\\u0014",21:"\\u0015",22:"\\u0016",23:"\\u0017",24:"\\u0018",25:"\\u0019",26:"\\u001a",27:"\\u001b",28:"\\u001c",29:"\\u001d",30:"\\u001e",31:"\\u001f",34:'\\"',47:"\\/",92:"\\\\"};function Rn(e){var t;let r="";for(const n of e)r+=null!==(t=Dn[n.codePointAt(0)])&&void 0!==t?t:n;return r}function Ln(e,t){return Array.isArray(t)||(t=t.range),Array.isArray(e)?{fn:e,sourceOffsets:t}:"object"==typeof e?Object.assign(Object.assign({},e),{sourceOffsets:t}):"number"==typeof e?{num:e.toString(),sourceOffsets:t}:"string"==typeof e&&"'"===e[0]&&"'"===e[e.length-1]?{str:e.slice(1,-1),sourceOffsets:t}:{sym:e,sourceOffsets:t}}function qn(e){return[...e]}function $n(e,t){const r=In.parse("cortex",e,t);if(r.isSuccess)return[r.value,[]];const n=new xr(e);return r.isError?[r.value,qn(r.diagnostics).map((e=>{var t;return Object.assign(Object.assign({},e),{origin:n.signalOrigin(null!==(t=e.range[2])&&void 0!==t?t:e.range[1])})}))]:r.isEmpty||r.isFailure?["Nothing",[]]:void 0}function Bn(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>=55296&&n<=56319){const t=e.charCodeAt(r+1);t>=56320&&t<=57343&&(n=65536+1024*(n-55296)+(t-56320),r++)}t.push(n)}return t}In.rule("whitespace",(e=>xn(e))),In.rule("pragma",en(["pragma-symbol","pragma-function"])),In.rule("pragma-symbol",en([Kr("#line"),Kr("#column"),Kr("#filename"),Kr("#url"),Kr("#date"),Kr("#time")],(e=>{var t;if("#date"===e.value){const e=new Date;return e.getFullYear()+"-"+("00"+(1+e.getMonth())).slice(-2)+"-"+("00"+(1+e.getDay())).slice(-2)}if("#time"===e.value){const e=new Date;return("00"+e.getHours().toString()).slice(-2)+":"+("00"+e.getMinutes().toString()).slice(-2)+":"+("00"+e.getSeconds().toString()).slice(-2)}return"#url"===e.value?null!==(t=e.parser.url)&&void 0!==t?t:"Nothing":"#filename"===e.value?e.parser.url?e.parser.url.substring(e.parser.url.lastIndexOf("/")+1):"Nothing":"#line"===e.value?new xr(e.parser.source,e.parser.url).getLinecol(e.parser.offset)[0]:"#column"===e.value?new xr(e.parser.source,e.parser.url).getLinecol(e.parser.offset)[1]:"Nothing"}))),In.rule("pragma-function",Jr([en([Kr("#warning"),Kr("#error"),Kr("#env"),Kr("#navigator")]),"function-call-argument-clause"],((e,t)=>{if("#warning"===e.value){const e=J(t.value,(e=>Pn(e))).join(" ");return console.log(e),{str:e}}if("#error"===e.value){const e=J(t.value,(e=>Pn(e))).join(" ");throw console.error(e),new jr(e)}if("#env"===e.value){if("process"in globalThis&&process.env)return{str:process.env[Pn(ee(t.value,1))]}}else if("#navigator"===e.value&&"navigator"in globalThis)return{str:navigator[Pn(ee(t.value,1))]};return"Nothing"}))),In.rule("function-call-argument-clause",an("(","expression",",",")",(e=>["List",...e.map((e=>e.value))]))),In.rule("signed-number","_numerical-constant_ | (\\[_sign_\\] (_binary-number_ | _hexadecimal-number_ | _decimal-number_)"),In.rule("signed-number",(e=>{const t=new Vr(e);let r=Qr(e,"NaN");if(r.isFailure&&(r=Qr(e,"Infinity")),r.isFailure&&(r=Qr(e,"+Infinity")),r.isFailure&&(r=Qr(e,"-Infinity")),r.isSuccess)return t.success(Ln({num:r.value},r));const n=gn(e);return n.isSuccess?t.success(Ln(n.value,n)):n})),In.rule("symbol","_verbatim-symbol_ | _inline-symbol_"),In.rule("symbol",(e=>{const t=new Vr(e),r=Cn(e);return t.copyDiagnostics(r),t.end=r.end,(r.isSuccess||r.isError)&&t.success(Ln(r.value,r)),t})),In.rule("string","_single-line-string_ | _multiline-string_ | _extended-string_"),In.rule("string",(e=>{let t=kn(e,"expression");if(t.isFailure&&(t=Mn(e,"expression")),t.isFailure&&(t=An(e),t.isSuccess))return t.success(Ln({str:t.value},t));if(t.isFailure||t.isEmpty)return t;const r=[];let n,i;for(const s of t.value)"string"==typeof s?n=(null!=n?n:"")+s:U(s)?n=(null!=n?n:"")+s.str:("string"==typeof n&&(r.push(n),n=void 0),r.push(s));return"string"==typeof n&&r.push(n),i=1===r.length&&"string"==typeof r[0]?Ln({str:Rn(r[0])},t):Ln(["String",...r.map((e=>"string"==typeof e?{str:e}:e))],t),t.value=i,t})),In.rule("primary",en(["pragma","signed-number","symbol","string","parenthesized-expression"])),In.rule("expression",ln([["NotMemberOf","!in",160],["MemberOf","in",240],["LessEqual","<=",241],["GreaterEqual",">=",242],["Less","<",245],["Greater",">",245],["NotEqual","!=",255],["Assign","=",258],["Equal","==",260],["Same","===",260],["KeyValue","->",265],["Add","+",275],["Subtract","-",275],["Multiply","*",390],["Divide","/",660],["Negate","-",665,"prefix"],["Power","^",720,"left"],["Pipe","|>",790],["BackPipe","~>",790],["Or","||",800],["And","&&",810],["Not","!",820,"prefix"]],"primary")),In.rule("parenthesized-expression",on("(","expression",")")),In.rule("cortex",nn(Jr([rn("shebang"),tn("expression",((...e)=>{var t;console.assert(e&&e.length>0);const r=e.filter((e=>!e.isEmpty&&!e.isFailure));return 0===r.length?Ln("Nothing",e[0]):1===r.length?Ln(null!==(t=r[0].value)&&void 0!==t?t:"Nothing",r[0]):Ln(["Do",...r.map((e=>e.value))],[r[0].start,r[r.length-1].end])})),nn(sn())],((e,t,r)=>{var n;return Ln(null!==(n=t.value)&&void 0!==n?n:"Nothing",t)}))));const zn=8205,Fn=[127462,127487];function Un(e){return e===zn||65038===e||65039===e||e>=127995&&e<=128e3||e>=129456&&e<=129460||e>=917536&&e<=917632}function jn(e){return e>=Fn[0]&&e<=Fn[1]}function Gn(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;const t=[],r=Bn(e);let n=0;for(;n<r.length;){const e=r[n++],i=r[n];if(i===zn){const e=n-1;for(n+=2;r[n]===zn;)n+=2;t.push(String.fromCodePoint(...r.slice(e,n-e+1)))}else if(Un(i)){const e=n-1;for(;Un(r[n]);)n+=r[n]===zn?2:1;t.push(String.fromCodePoint(...r.slice(e,n-e)))}else jn(e)?(n+=1,t.push(String.fromCodePoint(...r.slice(n-2,2)))):t.push(String.fromCodePoint(e))}return t}class Vn{constructor(e){this.fmt=e}}class Hn extends Vn{constructor(e){super(e)}debug(){return"EmptyBlock"}serialize(e){return""}nextCol(e){return e}cost(e){return 0}}class Wn extends Vn{constructor(e,t){super(e),this.s=t}debug(){return" "===this.s?'" "':'"'+this.s+'"'}serialize(e){return this.s}nextCol(e){return e+this.s.length}cost(e){const t=this.nextCol(e);return t>=this.fmt.margin?(t-this.fmt.margin)*this.fmt.cost.margin+(this.fmt.margin-this.fmt.softMargin)*this.fmt.cost.softMargin:t>=this.fmt.softMargin?(t-this.fmt.softMargin)*this.fmt.cost.softMargin:0}}class Yn extends Vn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Line("+this.blocks.map((e=>e.debug())).join(", ")+")"}serialize(e){const t=[];for(const r of this.blocks)t.push(r.serialize(e)),e=r.nextCol(e);return t.join("")}nextCol(e){return this.blocks.reduce(((e,t)=>t.nextCol(e)),e)}cost(e){let t=0;for(const r of this.blocks)t+=r.cost(e),e=r.nextCol(e);return t}}class Xn extends Vn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Stack("+this.blocks.map((e=>e.debug())).join(", ")+")"}serialize(e){let t="",r="";for(const n of this.blocks)t+=r+n.serialize(e),r||(r=this.fmt.linebreak()+this.fmt.indentChars(e));return t}nextCol(e){return e}cost(e){return this.blocks.reduce(((t,r)=>this.fmt.cost.linebreak+t+r.cost(e)),0)}}class Zn extends Vn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Wrap("+this.blocks.map((e=>e.debug())).join(", ")+")"}solution(e){const t=[];let r=[];for(const n of this.blocks)0===r.length||new Yn(this.fmt,...r,n).nextCol(e)<=this.fmt.margin?r.push(n):(t.push(r),r=[n]);return 0!==r.length&&t.push(r),new Xn(this.fmt,...t.map((e=>new Yn(this.fmt,...e))))}serialize(e){return this.solution(e).serialize(e)}nextCol(e){return this.solution(e).nextCol(e)}cost(e){return this.solution(e).cost(e)}}class Qn extends Vn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Choice(\n  "+this.blocks.map((e=>e.debug())).join("\n  ")+"\n)"}choice(e){let t,r=1/0;return this.blocks.forEach((n=>{const i=n.cost(e);i<r&&(r=i,t=n)})),t}serialize(e){return this.choice(e).serialize(e)}nextCol(e){return this.choice(e).nextCol(e)}cost(e){return Math.min(...this.blocks.map((t=>t.cost(e))))}}class Kn{constructor(e){var t;"space"===(null==e?void 0:e.indentChar)?e.indentChar=" ":"tab"===(null==e?void 0:e.indentChar)&&(e.indentChar="\t"),this.options=Object.assign({cost:Object.assign({softMargin:.05,margin:100,linebreak:2,commentLinebreak:.5,flowLinebreak:.3,callLinebreak:.5,argLinebreak:5},null!==(t=null==e?void 0:e.cost)&&void 0!==t?t:{}),indentChar:" ",indentCharWidth:1,indentWidth:2,margin:80,softMargin:50,aroundInfixOperator:" ",aroundRelationalOperator:" ",afterSeparator:" "},null!=e?e:{})}get cost(){return this.options.cost}get margin(){return this.options.margin}get softMargin(){return this.options.softMargin}indentChars(e=1){return("tab"===this.options.indentChar?"\t":" ").repeat(e*this.options.indentWidth)}indentLength(e=1){return e*this.options.indentWidth*this.options.indentCharWidth}linebreak(e,t){return e||t?t?e+"\n"+t:e+"\n":"\n"}countLinebreaks(e){return e.split(/\r\n|\r|\n/).length}normalizedBlocks(e){return e.map((e=>"string"==typeof e?new Wn(this,e):e)).filter((e=>!(e instanceof Hn)))}infixOperator(e){return new Wn(this,this.options.aroundInfixOperator+e+this.options.aroundInfixOperator)}relationalOperator(e){return new Wn(this,this.options.aroundRelationalOperator+e+this.options.aroundRelationalOperator)}separator(e){return new Wn(this,e+this.options.afterSeparator)}fence(e){return new Wn(this,e)}text(e){return e&&0!==e.length?new Wn(this,e):new Hn(this)}line(...e){const t=this.normalizedBlocks(e),r=[];let n="";for(const i of t)i instanceof Wn?n?(r.pop(),n+=i.s,r.push(new Wn(this,n))):(r.push(i),n=i.s):(n="",r.push(i));return 1===r.length?r[0]:new Yn(this,...r)}stack(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Xn(this,...t)}wrap(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Zn(this,...t)}indent(e,t=1){return new Yn(this,new Wn(this,this.indentChars(t)),e)}choice(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Qn(this,...t)}fencedBlock(e,t,r){return t?this.fencedList(e,"",r,[t]):this.line(this.fence(e),this.fence(r))}fencedList(e,t,r,n){const i=this.fence(e),s=this.fence(r);if(0===n.length)return this.line(i,s);if(1===n.length)return this.line(i,n[0],s);const o=n.map((e=>this.line(e,t))),a=[...o];return a.pop(),a.push(n[n.length-1]),e||r?this.choice(this.line(i,...a,s),this.stack(i,this.indent(this.stack(...o)),s)):this.choice(this.line(...a),this.wrap(...o))}list(e,t){return this.fencedList(void 0,e,void 0,t)}}const Jn=new Set(["abstract","at","and","as","assert","await","begin","break","case","catch","class","const","continue","debugger","default","delete","dynamic","do","each","else","end","export","extern","finally","for","from","function","get","global","goto","if","in","inline","interface","internal","import","label","lazy","local","loop","match","module","namespace","native","new","not","of","on","optional","or","package","private","protected","protocol","public","repeat","return","self","set","static","super","switch","this","throw","to","try","until","using","var","warn","when","where","while","with","xor","yield"]),ei={precision:15,decimalMarker:".",groupSeparator:"_",exponentProduct:"",beginExponentMarker:"e",endExponentMarker:"",notation:"auto",imaginaryNumber:"i",truncationMarker:"",beginRepeatingDigits:"",endRepeatingDigits:"",positiveInfinity:"Infinity",negativeInfinity:"-Infinity",notANumber:"NaN"};function ti(e,t){const r=new Kn(Object.assign(Object.assign({},(null==t?void 0:t.fancySymbols)?{aroundInfixOperator:" ",aroundRelationalOperator:" ",afterSeparator:" "}:{}),t));function n(e){var t,o;const a=V(e);if(null!==a)return i(a);const p=s(e);let h;if(null!==W(e)&&(h=null!==(o=null!==(t=l(e))&&void 0!==t?t:c(e))&&void 0!==o?o:u(e)),!h){const t=Z(e);null!==t&&(h=r.text(ii(t)))}if(h||("number"==typeof e||z(e))&&(h=r.text(Et(e,ei))),!h){const t=ne(e);if(null!==t){const e=Object.keys(t).map((e=>r.line(ni(e),r.relationalOperator("->"),n(t[e]))));if(0===e.length)return r.line(r.fence("{"),r.relationalOperator("->"),r.fence("}"));h=r.fencedList("{",r.separator(","),"}",e)}}return h?p instanceof Hn?h:r.choice(r.line(p,h),r.stack(p,h)):r.text()}function i(e){return r.text(`"${ni(e)}"`)}function s(e){return"object"!=typeof e?r.text():"comment"in e&&e.comment.length>0?r.text(`/* ${e.comment} */`):r.text()}const o={NotElementOf:{symbol:"!in",fancySymbol:"∉",relational:!0,precedence:160},ElementOf:{symbol:"in",fancySymbol:"∈",relational:!0,precedence:240},LessEqual:{symbol:"<=",relational:!0,fancySymbol:"⩽",precedence:241},GreaterEqual:{symbol:">=",fancySymbol:"⩾",relational:!0,precedence:242},Less:{symbol:"<",relational:!0,precedence:245},Greater:{symbol:">",relational:!0,precedence:245},NotEqual:{symbol:"!=",fancySymbol:"≠",relational:!0,precedence:255},Assign:{symbol:"=",relational:!0,precedence:258},Equal:{symbol:"==",relational:!0,precedence:260},Same:{symbol:"===",fancySymbol:"≣",relational:!0,precedence:260},KeyValue:{symbol:"->",fancySymbol:"→",precedence:265},Add:{symbol:"+",precedence:275},Subtract:{symbol:"-",fancySymbol:"−",precedence:275},Multiply:{symbol:"*",fancySymbol:"×",precedence:390},Divide:{symbol:"/",fancySymbol:"÷",precedence:660},Negate:{symbol:"-",unary:!0,fancySymbol:"−",precedence:665},Power:{symbol:"^",precedence:720},Or:{symbol:"||",fancySymbol:"⋁",precedence:800},And:{symbol:"&&",fancySymbol:"⋀",precedence:810},Not:{symbol:"!",unary:!0,fancySymbol:"¬",precedence:820}},a={BaseForm:e=>{var t;const n=null!==(t=G(ee(e,2)))&&void 0!==t?t:16,i=ee(e,1),s=G(i);return null===s||Number.isNaN(s)||!Number.isFinite(s)||2!==n&&10!==n&&16!==n?u(e):2===n?r.text("0b"+Number(s).toString(2)):10===n?r.text(Et(i,ei)):16===n?Number.isFinite(s)?Number.isInteger(s)?r.text("0x"+Number(s).toString(16)):r.text(Nt(s)):r.text(Et(i,ei)):u(e)},String:e=>r.wrap('"',...J(e,(e=>{const t=V(e);return null!==t?r.text(ni(t)):r.fencedBlock("\\(",n(e),")")})),'"'),List:e=>r.fencedList("{",r.separator(","),"}",J(e,n)),Set:e=>0===te(e)?r.text("EmptySet"):r.fencedList("[",r.separator(","),"]",J(e,n))};function l(e){var t,r;return null!==(r=null===(t=a[X(e)])||void 0===t?void 0:t.call(a,e))&&void 0!==r?r:null}function u(e){const t=W(e);return"string"==typeof t?r.line(ii(t),r.fencedList("(",r.separator(","),")",J(e,n))):r.line("Apply(",n(t),r.separator(","),r.fencedList("[",r.separator(","),"]",J(e,n)),")")}function c(e){var i;const s=X(e);if(!s)return null;const a=o[s];if(!a)return null;const l=(null==t?void 0:t.fancySymbols)&&null!==(i=a.fancySymbol)&&void 0!==i?i:a.symbol;if(a.unary){if(1!==te(e))return null;const t=ee(e,1),i=X(t),s=o[i];return s&&s.precedence<a.precedence?r.line(l,"(",n(t),")"):r.line(l,n(t))}const u=J(e,(e=>{const t=X(e),i=o[t];return i&&i.precedence<a.precedence?r.line("(",n(e),")"):n(e)}));return u?r.list(a.relational?r.relationalOperator(l):r.infixOperator(l),u):null}return n(e).serialize(0)}function ri(e){return Cr.has(e)?Cr.get(e):Fr(e)?e<65536?`\\u${("0000"+e.toString(16)).slice(-4)}`:`\\u{${("000000000"+e.toString(16)).slice(-8)}}`:String.fromCodePoint(e)}function ni(e){let t="";const r=Gn(e);if("string"==typeof r)for(const n of r)t+=ri(n.codePointAt(0));else for(const n of r)1===n.length?t+=ri(n.codePointAt(0)):t+=n;return t}function ii(e){if(Jn.has(e))return`\`${e}\``;if(/^[a-zA-Z][a-zA-Z\d_]*$/.test(e))return e;const t=e.codePointAt(0);if(Ir.has(t))return`\`${ni(e)}\``;let r=!1;const n=Gn(e);let i=0;for(;!r&&i<n.length;){const e=n[i].codePointAt(0);r=Cr.has(e)||Fr(e)||$r(e),i+=1}return r?`\`${ni(e)}\``:e}e.ComputeEngine=fr,e.LatexSyntax=Ot,e.evaluate=yr,e.format=gr,e.parse=It,e.parseCortex=$n,e.serialize=Pt,e.serializeCortex=ti,Object.defineProperty(e,"__esModule",{value:!0})}(t)},13786:function(__unused_webpack_module,exports,__webpack_require__){(function(){var $,ABS,ADD,ADJ,AND,APPROXRATIO,ARCCOS,ARCCOSH,ARCSIN,ARCSINH,ARCTAN,ARCTANH,ARG,ASSUME_REAL_VARIABLES,ATOMIZE,AUTOEXPAND,BAKE,BESSELJ,BESSELY,BINDING,BINOMIAL,BINOM_check_args,BUF,C1,C2,C3,C4,C5,C6,CEILING,CHECK,CHOOSE,CIRCEXP,CLEAR,CLEARALL,CLEARPATTERNS,CLOCK,COEFF,COFACTOR,CONDENSE,CONJ,CONS,CONTRACT,COS,COSH,Condense,DEBUG,DEBUG_ABS,DEBUG_ARG,DEBUG_CLOCKFORM,DEBUG_IMAG,DEBUG_IS,DEBUG_MULTIPLY,DEBUG_POWER,DEBUG_RATIONALIZE,DEBUG_RECT,DEBUG_SIMPLIFY,DECOMP,DEFINT,DEGREE,DENOMINATOR,DERIVATIVE,DET,DET_check_arg,DIM,DIRAC,DIVISORS,DO,DOT,DOUBLE,DRAW,DRAWX,DSOLVE,E,EIGEN,EIGENVAL,EIGENVEC,EIG_N,EIG_check_arg,EIG_yydd,EIG_yyqq,ERF,ERFC,EVAL,EXP,EXPAND,EXPCOS,EXPSIN,Eval,Eval_Eval,Eval_abs,Eval_add,Eval_adj,Eval_and,Eval_approxratio,Eval_arccos,Eval_arccosh,Eval_arcsin,Eval_arcsinh,Eval_arctan,Eval_arctanh,Eval_arg,Eval_besselj,Eval_bessely,Eval_binding,Eval_binomial,Eval_ceiling,Eval_check,Eval_choose,Eval_circexp,Eval_clear,Eval_clearall,Eval_clearpatterns,Eval_clock,Eval_coeff,Eval_cofactor,Eval_condense,Eval_conj,Eval_cons,Eval_contract,Eval_cos,Eval_cosh,Eval_decomp,Eval_defint,Eval_degree,Eval_denominator,Eval_derivative,Eval_det,Eval_dim,Eval_dirac,Eval_divisors,Eval_do,Eval_dsolve,Eval_eigen,Eval_eigenval,Eval_eigenvec,Eval_erf,Eval_erfc,Eval_exp,Eval_expand,Eval_expcos,Eval_expsin,Eval_factor,Eval_factorial,Eval_factorpoly,Eval_filter,Eval_float,Eval_floor,Eval_for,Eval_function_reference,Eval_gamma,Eval_gcd,Eval_hermite,Eval_hilbert,Eval_imag,Eval_index,Eval_inner,Eval_integral,Eval_inv,Eval_invg,Eval_isinteger,Eval_isprime,Eval_laguerre,Eval_lcm,Eval_leading,Eval_legendre,Eval_log,Eval_lookup,Eval_mod,Eval_multiply,Eval_noexpand,Eval_not,Eval_nroots,Eval_number,Eval_numerator,Eval_operator,Eval_or,Eval_outer,Eval_pattern,Eval_patternsinfo,Eval_polar,Eval_power,Eval_predicate,Eval_prime,Eval_print,Eval_print2dascii,Eval_printcomputer,Eval_printhuman,Eval_printlatex,Eval_printlist,Eval_product,Eval_quote,Eval_quotient,Eval_rank,Eval_rationalize,Eval_real,Eval_rect,Eval_roots,Eval_round,Eval_setq,Eval_sgn,Eval_shape,Eval_silentpattern,Eval_simfac,Eval_simplify,Eval_sin,Eval_sinh,Eval_sqrt,Eval_stop,Eval_subst,Eval_sum,Eval_sym,Eval_symbolsinfo,Eval_tan,Eval_tanh,Eval_taylor,Eval_tensor,Eval_test,Eval_testeq,Eval_testge,Eval_testgt,Eval_testle,Eval_testlt,Eval_transpose,Eval_unit,Eval_user_function,Eval_zero,Evalpoly,FACTOR,FACTORIAL,FACTORPOLY,FILTER,FLOATF,FLOOR,FOR,FORCE_FIXED_PRINTOUT,FUNCTION,Find,GAMMA,GCD,HERMITE,HILBERT,IMAG,INDEX,INNER,INTEGRAL,INV,INVG,INV_check_arg,INV_decomp,ISINTEGER,ISPRIME,LAGUERRE,LAST,LAST_2DASCII_PRINT,LAST_FULL_PRINT,LAST_LATEX_PRINT,LAST_LIST_PRINT,LAST_PLAIN_PRINT,LAST_PRINT,LCM,LEADING,LEGENDRE,LOG,LOOKUP,M,MAXDIM,MAXPRIMETAB,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE,MAX_FIXED_PRINTOUT_DIGITS,MAX_PROGRAM_SIZE,MEQUAL,METAA,METAB,METAX,MLENGTH,MOD,MSIGN,MULTIPLY,MZERO,N,NIL,NOT,NROOTS,NROOTS_ABS,NROOTS_DELTA,NROOTS_EPSILON,NROOTS_RANDOM,NROOTS_YMAX,NROOTS_divpoly,NSYM,NUM,NUMBER,NUMERATOR,OPERATOR,OR,OUTER,PATTERN,PATTERNSINFO,PI,POLAR,POWER,PRIME,PRINT,PRINT2DASCII,PRINTFULL,PRINTLATEX,PRINTLIST,PRINTMODE_2DASCII,PRINTMODE_COMPUTER,PRINTMODE_HUMAN,PRINTMODE_LATEX,PRINTMODE_LIST,PRINTOUTRESULT,PRINTPLAIN,PRINT_LEAVE_E_ALONE,PRINT_LEAVE_X_ALONE,PRODUCT,QUOTE,QUOTIENT,RANK,RATIONALIZE,REAL,ROOTS,ROUND,SECRETX,SELFTEST,SETQ,SGN,SHAPE,SILENTPATTERN,SIMPLIFY,SIN,SINH,SPACE_BETWEEN_COLUMNS,SPACE_BETWEEN_ROWS,SQRT,STOP,STR,SUBST,SUM,SYM,SYMBOLSINFO,SYMBOL_A,SYMBOL_A_UNDERSCORE,SYMBOL_B,SYMBOL_B_UNDERSCORE,SYMBOL_C,SYMBOL_D,SYMBOL_I,SYMBOL_IDENTITY_MATRIX,SYMBOL_J,SYMBOL_N,SYMBOL_R,SYMBOL_S,SYMBOL_T,SYMBOL_X,SYMBOL_X_UNDERSCORE,SYMBOL_Y,SYMBOL_Z,TAN,TANH,TAYLOR,TENSOR,TEST,TESTEQ,TESTGE,TESTGT,TESTLE,TESTLT,TIMING_DEBUGS,TOS,TRACE,TRANSPOSE,T_DOUBLE,T_EQ,T_FUNCTION,T_GTEQ,T_INTEGER,T_LTEQ,T_NEQ,T_NEWLINE,T_QUOTASSIGN,T_STRING,T_SYMBOL,U,UNIT,USR_SYMBOLS,VERSION,YMAX,YYE,YYRECT,ZERO,__emit_char,__emit_str,__factor_add,__factorial,__is_negative,__is_radical_number,__lcm,__legendre,__legendre2,__legendre3,__normalize_radical_factors,__rationalize_tensor,_print,abs,absValFloat,absval,absval_tensor,add,addSymbolLeftOfAssignment,addSymbolRightOfAssignment,add_all,add_factor_to_accumulator,add_numbers,add_terms,addf,adj,alloc_tensor,allocatedId,any_denominators,approxAll,approxLogs,approxLogsOfRationals,approxOneRatioOnly,approxRadicals,approxRadicalsOfRationals,approxRationalsOfLogs,approxRationalsOfPowersOfE,approxRationalsOfPowersOfPI,approxRationalsOfRadicals,approxSineOfRationalMultiplesOfPI,approxSineOfRationals,approxTrigonometric,approx_just_an_integer,approx_logarithmsOfRationals,approx_nothingUseful,approx_radicalOfRatio,approx_ratioOfRadical,approx_rationalOfE,approx_rationalOfPi,approx_rationalsOfLogarithms,approx_sine_of_pi_times_rational,approx_sine_of_rational,approxratioRecursive,arccos,arccosh,arcsin,arcsinh,arctan,arctanh,areunivarpolysfactoredorexpandedform,arg,arglist,assignmentFound,avoidCalculatingPowersIntoArctans,bake,bake_poly,bake_poly_term,besselj,bessely,bigInt,bignum_factorial,bignum_float,bignum_power_number,bignum_scan_float,bignum_scan_integer,bignum_truncate,binding,binomial,buffer,build_tensor,caaddr,caadr,caar,cadaddr,cadadr,cadar,caddaddr,caddadr,caddar,caddddr,cadddr,caddr,cadr,called_from_Algebra_block,car,cdaddr,cdadr,cdar,cddaddr,cddar,cdddaddr,cddddr,cdddr,cddr,cdr,ceiling,chainOfUserSymbolsNotFunctionsBeingEvaluated,charTabIndex,chartab,checkFloatHasWorkedOutCompletely,check_esc_flag,check_stack,check_tensor_dimensions,choose,choose_check_args,circexp,clearAlgebraEnvironment,clearRenamedVariablesToAvoidBindingToExternalScope,clear_symbols,clear_term,clearall,clockform,cmpGlyphs,cmp_args,cmp_expr,cmp_terms,cmp_terms_count,codeGen,coeff,cofactor,collectLatexStringFromReturnValue,collectUserSymbols,combine_factors,combine_gammas,combine_terms,compareState,compare_numbers,compare_rationals,compare_tensors,compatible,computeDependenciesFromAlgebra,computeResultsAndJavaScriptFromAlgebra,compute_fa,conjugate,cons,consCount,contract,convert_bignum_to_double,convert_rational_to_double,copy_tensor,cosine,cosine_of_angle,cosine_of_angle_sum,count,countOccurrencesOfSymbol,count_denominators,counter,countsize,d_scalar_scalar,d_scalar_scalar_1,d_scalar_tensor,d_tensor_scalar,d_tensor_tensor,dabs,darccos,darccosh,darcsin,darcsinh,darctan,darctanh,dbesselj0,dbesseljn,dbessely0,dbesselyn,dcos,dcosh,dd,decomp,decomp_product,decomp_sum,defineSomeHandyConstants,define_user_function,defn,defn_str,degree,denominator,derf,derfc,derivative,derivative_of_integral,det,determinant,detg,dfunction,dhermite,dirac,display,display_flag,displaychar,divide,divide_numbers,divisors,divisors_onstack,divpoly,dlog,do_clearPatterns,do_clearall,do_simplify_nested_radicals,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication,dotprod_unicode,doubleToReasonableString,dpow,dpower,dproduct,draw_flag,draw_stop_return,dsgn,dsin,dsinh,dsum,dtan,dtanh,dupl,eigen,elelmIndex,elem,emit_denominator,emit_denominators,emit_expr,emit_factor,emit_factorial_function,emit_flat_tensor,emit_fraction,emit_function,emit_index_function,emit_multiply,emit_number,emit_numerators,emit_numerical_fraction,emit_power,emit_string,emit_subexpr,emit_symbol,emit_tensor,emit_tensor_inner,emit_term,emit_top_expr,emit_unsigned_expr,emit_x,equal,equaln,equalq,erfc,errorMessage,esc_flag,evaluatingAsFloats,evaluatingPolar,exec,expand,expand_get_A,expand_get_AF,expand_get_B,expand_get_C,expand_get_CF,expand_tensor,expanding,expcos,exponential,expr_level,expsin,f1,f10,f2,f3,f4,f5,f9,f_equals_a,factor,factor_a,factor_again,factor_b,factor_number,factor_small_number,factor_term,factorial,factorpoly,factors,fill_buf,filter,filter_main,filter_sum,filter_tensor,findDependenciesInScript,findPossibleClockForm,findPossibleExponentialForm,findroot,fixup_fraction,fixup_power,flag,floatToRatioRoutine,fmt_index,fmt_level,fmt_x,frame,freeze,functionInvokationsScanningStack,gamma,gamma_of_sum,gammaf,gcd,gcd_main,gcd_numbers,gcd_polys,gcd_powers_with_same_base,gcd_product_product,gcd_product_sum,gcd_sum,gcd_sum_product,gcd_sum_sum,gen,getSimpleRoots,getStateHash,get_binding,get_factor_from_complex_root,get_factor_from_real_root,get_innerprod_factors,get_next_token,get_printname,get_size,get_token,getdisplaystr,glyph,gp,guess,hasImaginaryCoeff,hasNegativeRationalExponent,hash_addition,hash_function,hash_multiplication,hash_power,hashcode_values,hashed_itab,hermite,hilbert,i1,imag,imaginaryunit,index_function,init,initNRoots,inited,inner,inner_f,input_str,integral,integral_of_form,integral_of_product,integral_of_sum,inv,inverse,invert_number,invg,isNumberOneOverSomething,isNumericAtom,isNumericAtomOrTensor,isSimpleRoot,isSmall,isSymbolLeftOfAssignment,isSymbolReclaimable,isZeroAtom,isZeroAtomOrTensor,isZeroLikeOrNonZeroLikeOrUndetermined,isZeroTensor,is_denominator,is_factor,is_small_integer,is_square_matrix,is_usr_symbol,isadd,isalnumorunderscore,isalpha,isalphaOrUnderscore,iscomplexnumber,iscomplexnumberdouble,iscons,isdenominator,isdigit,isdouble,iseveninteger,isfactor,isfactorial,isfloating,isfraction,isidentitymatrix,isimaginarynumber,isimaginarynumberdouble,isimaginaryunit,isinnerordot,isinteger,isintegerfactor,isintegerorintegerfloat,isinv,iskeyword,isminusone,isminusoneoversqrttwo,isminusoneovertwo,isminussqrtthreeovertwo,ismultiply,isnegative,isnegativenumber,isnegativeterm,isnonnegativeinteger,isnpi,isone,isoneover,isoneoversqrttwo,isoneovertwo,isplusone,isplustwo,ispolyexpandedform,ispolyexpandedform_expr,ispolyexpandedform_factor,ispolyexpandedform_term,ispolyfactoredorexpandedform,ispolyfactoredorexpandedform_factor,ispolyfactoredorexpandedform_power,isposint,ispositivenumber,ispower,isquarterturn,isrational,isspace,issqrtthree,issqrtthreeovertwo,isstr,issymbol,issymbolic,istensor,istranspose,isunderscore,isunivarpolyfactoredorexpandedform,itab,italu_hashcode,j1,laguerre,laguerre2,lastFoundSymbol,latexErrorSign,lcm,leading,legendre,length,lessp,level,list,listLength,logarithm,logbuf,lookupsTotal,lu_decomp,madd,makePositive,makeSignSameAs,make_hashed_itab,mask,mcmp,mcmpint,mdiv,mdivrem,meta_mode,mgcd,mini_solve,mint,mmod,mmul,mod,monic,move,moveTos,mp_clr_bit,mp_denominator,mp_numerator,mp_set_bit,mpow,mprime,mroot,mshiftright,msub,mtotal,multinomial_sum,multiply,multiply_all,multiply_all_noexpand,multiply_consecutive_constants,multiply_denominators,multiply_denominators_factor,multiply_denominators_term,multiply_noexpand,multiply_numbers,n_factor_number,negate,negate_expand,negate_noexpand,negate_number,new_integer,new_string,newline_flag,nil_symbols,normaliseDots,normalisedCoeff,normalize_angle,nroots_a,nroots_b,nroots_c,nroots_df,nroots_dx,nroots_fa,nroots_fb,nroots_x,nroots_y,nterms,nthCadr,numerator,numericRootOfPolynomial,o,one,oneElement,one_as_double,out_buf,out_count,out_of_memory,outer,p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,parse,parse_internal,parse_p1,parse_p2,parse_time_simplifications,partition,patternHasBeenFound,patternsinfo,performing_roots,polar,polarRectAMinusOneBase,polyform,pop,pop_double,pop_frame,pop_integer,power,power_str,power_sum,power_tensor,predefinedSymbolsInGlobalScope_doNotTrackInDependencies,prime,primetab,print2dascii,printMode,print_ABS_latex,print_ARCCOS_codegen,print_ARCSIN_codegen,print_ARCTAN_codegen,print_BINOMIAL_latex,print_COS_codegen,print_DEFINT_latex,print_DOT_codegen,print_DOT_latex,print_DO_codegen,print_FOR_codegen,print_INV_codegen,print_INV_latex,print_PRODUCT_codegen,print_PRODUCT_latex,print_SETQ_codegen,print_SIN_codegen,print_SQRT_latex,print_SUM_codegen,print_SUM_latex,print_TAN_codegen,print_TESTEQ_latex,print_TESTGE_latex,print_TESTGT_latex,print_TESTLE_latex,print_TESTLT_latex,print_TEST_codegen,print_TEST_latex,print_TRANSPOSE_codegen,print_TRANSPOSE_latex,print_UNIT_codegen,print_a_over_b,print_base,print_base_of_denom,print_char,print_denom,print_double,print_expo_of_denom,print_exponent,print_expr,print_factor,print_factorial_function,print_glyphs,print_index_function,print_list,print_multiply_sign,print_number,print_power,print_str,print_subexpr,print_tensor,print_tensor_inner,print_tensor_inner_latex,print_tensor_latex,print_term,printchar,printchar_nowrap,printline,program_buf,promote_tensor,push,pushTryNotToDuplicate,push_cars,push_double,push_factor,push_frame,push_identity_matrix,push_integer,push_rational,push_symbol,push_term_factors,push_terms,push_zero_matrix,qadd,qdiv,qmul,qpow,qpowf,quickfactor,quickpower,rational,rationalize,rationalize_coefficients,real,reciprocate,rect,recursionLevelNestedRadicalsRemoval,recursiveDependencies,ref,ref1,rememberPrint,remove_negative_exponents,reset_after_error,restore,restoreMetaBindings,rewrite_args,rewrite_args_tensor,roots,roots2,roots3,run,runUserDefinedSimplifications,save,saveMetaBindings,scalar_times_tensor,scan,scan_error,scan_expression,scan_factor,scan_function_call_with_function_name,scan_function_call_without_function_name,scan_index,scan_meta,scan_power,scan_relation,scan_stmt,scan_str,scan_string,scan_subexpr,scan_symbol,scan_tensor,scan_term,scanned,scanningParameters,setM,setSignTo,set_binding,set_component,setq_indexed,sfac_product,sfac_product_f,sgn,shape,show_power_debug,sign,sign_of_term,simfac,simfac_term,simpleComplexityMeasure,simplify,simplifyForCodeGeneration,simplify_1_in_products,simplify_main,simplify_nested_radicals,simplify_polar,simplify_polarRect,simplify_rational_expressions,simplify_rectToClock,simplify_tensor,simplify_trig,simplifyfactorials,sine,sine_of_angle,sine_of_angle_sum,skipRootVariableToBeSolved,sort_stack,square,ssqrt,stack,stackAddsCount,std_symbol,step,step2,stop,strcmp,stringsEmittedByUserPrintouts,subf,subst,subtract,subtract_numbers,swap,symbol,symbolsDependencies,symbolsHavingReassignments,symbolsInExpressionsWithoutAssignments,symbolsLeftOfAssignment,symbolsRightOfAssignment,symbolsinfo,symnum,symtab,take_care_of_nested_radicals,tangent,taylor,tensor,tensor_plus_tensor,tensor_times_scalar,testApprox,test_flag,text_metric,theRandom,token,token_buf,token_str,top,top_level_eval,tos,transform,transpose,transpose_unicode,trigmode,trivial_divide,try_kth_prime,turnErrorMessageToLatex,ucmp,unfreeze,unique,unique_f,update_token_buf,userSimplificationsInListForm,userSimplificationsInStringForm,usr_symbol,verbosing,version,will_be_displayed_as_fraction,ybinomial,ycosh,ydirac,yerf,yerfc,yfloor,yindex,yround,ysinh,yyarg,yybesselj,yybessely,yyceiling,yycondense,yycontract,yycosh,yydegree,yydetg,yydivpoly,yyerf,yyerfc,yyexpand,yyfactorpoly,yyfloat,yyfloor,yyhermite,yyhermite2,yyinvg,yylcm,yylog,yymultiply,yyouter,yypower,yyrationalize,yyround,yysgn,yysimfac,yysinh,yytangent,zero,zzfloat,hasProp={}.hasOwnProperty;for(bigInt=__webpack_require__(15046),version="1.4.0",SELFTEST=1,NSYM=1e3,DEBUG=!1,PRINTOUTRESULT=!1,PRINTMODE_LATEX="PRINTMODE_LATEX",PRINTMODE_2DASCII="PRINTMODE_2DASCII",PRINTMODE_COMPUTER="PRINTMODE_COMPUTER",PRINTMODE_HUMAN="PRINTMODE_HUMAN",PRINTMODE_LIST="PRINTMODE_LIST",printMode=PRINTMODE_COMPUTER,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=!0,recursionLevelNestedRadicalsRemoval=0,do_simplify_nested_radicals=!0,avoidCalculatingPowersIntoArctans=!0,rational=function(){class e{}return e.prototype.a=null,e.prototype.b=null,e}.call(this),U=function(){class e{toString(){return print_expr(this)}toLatexString(){return collectLatexStringFromReturnValue(this)}constructor(){this.cons={},this.cons.car=null,this.cons.cdr=null,this.q=new rational}}return e.prototype.cons=null,e.prototype.printname="",e.prototype.str="",e.prototype.tensor=null,e.prototype.q=null,e.prototype.d=0,e.prototype.k=0,e.prototype.tag=0,e}.call(this),errorMessage="",CONS=0,NUM=1,DOUBLE=2,STR=3,TENSOR=4,SYM=5,counter=0,ABS=counter++,ADD=counter++,ADJ=counter++,AND=counter++,APPROXRATIO=counter++,ARCCOS=counter++,ARCCOSH=counter++,ARCSIN=counter++,ARCSINH=counter++,ARCTAN=counter++,ARCTANH=counter++,ARG=counter++,ATOMIZE=counter++,BESSELJ=counter++,BESSELY=counter++,BINDING=counter++,BINOMIAL=counter++,CEILING=counter++,CHECK=counter++,CHOOSE=counter++,CIRCEXP=counter++,CLEAR=counter++,CLEARALL=counter++,CLEARPATTERNS=counter++,CLOCK=counter++,COEFF=counter++,COFACTOR=counter++,CONDENSE=counter++,CONJ=counter++,CONTRACT=counter++,COS=counter++,COSH=counter++,DECOMP=counter++,DEFINT=counter++,DEGREE=counter++,DENOMINATOR=counter++,DERIVATIVE=counter++,DET=counter++,DIM=counter++,DIRAC=counter++,DIVISORS=counter++,DO=counter++,DOT=counter++,DRAW=counter++,DSOLVE=counter++,EIGEN=counter++,EIGENVAL=counter++,EIGENVEC=counter++,ERF=counter++,ERFC=counter++,EVAL=counter++,EXP=counter++,EXPAND=counter++,EXPCOS=counter++,EXPSIN=counter++,FACTOR=counter++,FACTORIAL=counter++,FACTORPOLY=counter++,FILTER=counter++,FLOATF=counter++,FLOOR=counter++,FOR=counter++,FUNCTION=counter++,GAMMA=counter++,GCD=counter++,HERMITE=counter++,HILBERT=counter++,IMAG=counter++,INDEX=counter++,INNER=counter++,INTEGRAL=counter++,INV=counter++,INVG=counter++,ISINTEGER=counter++,ISPRIME=counter++,LAGUERRE=counter++,LCM=counter++,LEADING=counter++,LEGENDRE=counter++,LOG=counter++,LOOKUP=counter++,MOD=counter++,MULTIPLY=counter++,NOT=counter++,NROOTS=counter++,NUMBER=counter++,NUMERATOR=counter++,OPERATOR=counter++,OR=counter++,OUTER=counter++,PATTERN=counter++,PATTERNSINFO=counter++,POLAR=counter++,POWER=counter++,PRIME=counter++,PRINT_LEAVE_E_ALONE=counter++,PRINT_LEAVE_X_ALONE=counter++,PRINT=counter++,PRINT2DASCII=counter++,PRINTFULL=counter++,PRINTLATEX=counter++,PRINTLIST=counter++,PRINTPLAIN=counter++,PRODUCT=counter++,QUOTE=counter++,QUOTIENT=counter++,RANK=counter++,RATIONALIZE=counter++,REAL=counter++,ROUND=counter++,YYRECT=counter++,ROOTS=counter++,SETQ=counter++,SGN=counter++,SILENTPATTERN=counter++,SIMPLIFY=counter++,SIN=counter++,SINH=counter++,SHAPE=counter++,SQRT=counter++,STOP=counter++,SUBST=counter++,SUM=counter++,SYMBOLSINFO=counter++,TAN=counter++,TANH=counter++,TAYLOR=counter++,TEST=counter++,TESTEQ=counter++,TESTGE=counter++,TESTGT=counter++,TESTLE=counter++,TESTLT=counter++,TRANSPOSE=counter++,UNIT=counter++,ZERO=counter++,NIL=counter++,LAST=counter++,LAST_PRINT=counter++,LAST_2DASCII_PRINT=counter++,LAST_FULL_PRINT=counter++,LAST_LATEX_PRINT=counter++,LAST_LIST_PRINT=counter++,LAST_PLAIN_PRINT=counter++,AUTOEXPAND=counter++,BAKE=counter++,ASSUME_REAL_VARIABLES=counter++,TRACE=counter++,FORCE_FIXED_PRINTOUT=counter++,MAX_FIXED_PRINTOUT_DIGITS=counter++,YYE=counter++,DRAWX=counter++,METAA=counter++,METAB=counter++,METAX=counter++,SECRETX=counter++,VERSION=counter++,PI=counter++,SYMBOL_A=counter++,SYMBOL_B=counter++,SYMBOL_C=counter++,SYMBOL_D=counter++,SYMBOL_I=counter++,SYMBOL_J=counter++,SYMBOL_N=counter++,SYMBOL_R=counter++,SYMBOL_S=counter++,SYMBOL_T=counter++,SYMBOL_X=counter++,SYMBOL_Y=counter++,SYMBOL_Z=counter++,SYMBOL_IDENTITY_MATRIX=counter++,SYMBOL_A_UNDERSCORE=counter++,SYMBOL_B_UNDERSCORE=counter++,SYMBOL_X_UNDERSCORE=counter++,C1=counter++,C2=counter++,C3=counter++,C4=counter++,C5=counter++,C6=counter++,USR_SYMBOLS=counter++,E=YYE,TOS=1e5,BUF=1e4,MAX_PROGRAM_SIZE=100001,MAXPRIMETAB=1e4,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=5,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=10,MAXDIM=24,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,predefinedSymbolsInGlobalScope_doNotTrackInDependencies=["rationalize","abs","e","i","pi","sin","ceiling","cos","roots","integral","derivative","defint","sqrt","eig","cov","deig","dcov","float","floor","product","root","round","sum","test","unit"],parse_time_simplifications=!0,chainOfUserSymbolsNotFunctionsBeingEvaluated=[],stringsEmittedByUserPrintouts="",called_from_Algebra_block=!1,tensor=function(){class e{constructor(){this.dim=function(){var e,t,r;for(r=[],e=0,t=MAXDIM;0<=t?e<=t:e>=t;0<=t?e++:e--)r.push(0);return r}(),this.elem=[]}}return e.prototype.ndim=0,e.prototype.dim=null,e.prototype.nelem=0,e.prototype.elem=null,e}.call(this),display=function(){class e{}return e.prototype.h=0,e.prototype.w=0,e.prototype.n=0,e.prototype.a=[],e}.call(this),text_metric=function(){class e{}return e.prototype.ascent=0,e.prototype.descent=0,e.prototype.width=0,e}.call(this),tos=0,expanding=0,evaluatingAsFloats=0,evaluatingPolar=0,fmt_x=0,fmt_index=0,fmt_level=0,verbosing=0,primetab=function(){var e,t,r,n;for(n=[2],t=3;n.length<MAXPRIMETAB;){for(r=0,e=Math.sqrt(t);r<n.length&&n[r]<=e;){if(t%n[r]==0){r=-1;break}r++}-1!==r&&n.push(t),t+=2}return n[MAXPRIMETAB]=0,n}(),esc_flag=0,draw_flag=0,mtotal=0,trigmode=0,logbuf="",program_buf="",symtab=[],binding=[],isSymbolReclaimable=[],arglist=[],stack=[],frame=0,p0=null,p1=null,p2=null,p3=null,p4=null,p5=null,p6=null,p7=null,p8=null,p9=null,zero=null,one=null,one_as_double=null,imaginaryunit=null,out_buf="",out_count=0,test_flag=0,codeGen=!1,draw_stop_return=null,userSimplificationsInListForm=[],userSimplificationsInStringForm=[],transpose_unicode=7488,dotprod_unicode=183,symbol=function(e){return symtab[e]},iscons=function(e){return e.k===CONS},isrational=function(e){return e.k===NUM},isdouble=function(e){return e.k===DOUBLE},isNumericAtom=function(e){return isrational(e)||isdouble(e)},isstr=function(e){return e.k===STR},istensor=function(e){if(null!=e)return e.k===TENSOR},isNumericAtomOrTensor=function(e){var t,r,n,i,s;if(isNumericAtom(e)||e===symbol(SYMBOL_IDENTITY_MATRIX))return 1;if(!istensor(e)&&!isNumericAtom(e))return 0;for(n=e.tensor.nelem,t=e.tensor.elem,r=i=0,s=n;0<=s?i<s:i>s;r=0<=s?++i:--i)if(!isNumericAtomOrTensor(t[r]))return 0;return 1},issymbol=function(e){return e.k===SYM},iskeyword=function(e){return issymbol(e)&&symnum(e)<NIL},car=function(e){return iscons(e)?e.cons.car:symbol(NIL)},cdr=function(e){return iscons(e)?e.cons.cdr:symbol(NIL)},caar=function(e){return car(car(e))},cadr=function(e){return car(cdr(e))},cdar=function(e){return cdr(car(e))},cddr=function(e){return cdr(cdr(e))},caadr=function(e){return car(car(cdr(e)))},caddr=function(e){return car(cdr(cdr(e)))},cadar=function(e){return car(cdr(car(e)))},cdadr=function(e){return cdr(car(cdr(e)))},cddar=function(e){return cdr(cdr(car(e)))},cdddr=function(e){return cdr(cdr(cdr(e)))},caaddr=function(e){return car(car(cdr(cdr(e))))},cadadr=function(e){return car(cdr(car(cdr(e))))},caddar=function(e){return car(cdr(cdr(car(e))))},cdaddr=function(e){return cdr(car(cdr(cdr(e))))},cadddr=function(e){return car(cdr(cdr(cdr(e))))},cddddr=function(e){return cdr(cdr(cdr(cdr(e))))},caddddr=function(e){return car(cdr(cdr(cdr(cdr(e)))))},cadaddr=function(e){return car(cdr(car(cdr(cdr(e)))))},cddaddr=function(e){return cdr(cdr(car(cdr(cdr(e)))))},caddadr=function(e){return car(cdr(cdr(car(cdr(e)))))},cdddaddr=function(e){return cdr(cdr(cdr(car(cdr(cdr(e))))))},caddaddr=function(e){return car(cdr(cdr(car(cdr(cdr(e))))))},listLength=function(e){var t;for(t=-1;iscons(e);)e=cdr(e),t++;return t},nthCadr=function(e,t){var r;for(r=0;r<=t;)e=cdr(e),r++;return car(e)},isadd=function(e){return car(e)===symbol(ADD)},ismultiply=function(e){return car(e)===symbol(MULTIPLY)},ispower=function(e){return car(e)===symbol(POWER)},isfactorial=function(e){return car(e)===symbol(FACTORIAL)},isinnerordot=function(e){return car(e)===symbol(INNER)||car(e)===symbol(DOT)},istranspose=function(e){return car(e)===symbol(TRANSPOSE)},isinv=function(e){return car(e)===symbol(INV)},isidentitymatrix=function(e){return e===symbol(SYMBOL_IDENTITY_MATRIX)},MSIGN=function(e){return e.isPositive()?1:e.isZero()?0:-1},MLENGTH=function(e){return e.toString().length},MZERO=function(e){return e.isZero()},MEQUAL=function(e,t){return e.equals(t)},reset_after_error=function(){return moveTos(0),esc_flag=0,draw_flag=0,frame=TOS,evaluatingAsFloats=0,evaluatingPolar=0},$=null!==exports?exports:this,$.version=version,$.isadd=isadd,$.ismultiply=ismultiply,$.ispower=ispower,$.isfactorial=isfactorial,$.car=car,$.cdr=cdr,$.caar=caar,$.cadr=cadr,$.cdar=cdar,$.cddr=cddr,$.caadr=caadr,$.caddr=caddr,$.cadar=cadar,$.cdadr=cdadr,$.cddar=cddar,$.cdddr=cdddr,$.caaddr=caaddr,$.cadadr=cadadr,$.caddar=caddar,$.cdaddr=cdaddr,$.cadddr=cadddr,$.cddddr=cddddr,$.caddddr=caddddr,$.cadaddr=cadaddr,$.cddaddr=cddaddr,$.caddadr=caddadr,$.cdddaddr=cdddaddr,$.caddaddr=caddaddr,$.symbol=symbol,$.iscons=iscons,$.isrational=isrational,$.isdouble=isdouble,$.isNumericAtom=isNumericAtom,$.isstr=isstr,$.istensor=istensor,$.issymbol=issymbol,$.iskeyword=iskeyword,$.CONS=CONS,$.NUM=NUM,$.DOUBLE=DOUBLE,$.STR=STR,$.TENSOR=TENSOR,$.SYM=SYM,DEBUG_ABS=!1,Eval_abs=function(){return push(cadr(p1)),Eval(),abs()},absValFloat=function(){return Eval(),absval(),Eval(),zzfloat()},abs=function(){var e;if(e=top(),DEBUG_ABS&&console.trace(">>>>  ABS of "+e),numerator(),DEBUG_ABS&&console.log("ABS numerator "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL numerator: "+stack[tos-1]),push(e),denominator(),DEBUG_ABS&&console.log("ABS denominator: "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL denominator: "+stack[tos-1]),divide(),DEBUG_ABS&&console.log("ABSVAL divided: "+stack[tos-1]),DEBUG_ABS)return console.log("<<<<<<<  ABS")},absval=function(){var e,t;if(save(),t=p1=pop(),DEBUG_ABS&&console.log("ABS of "+p1),isZeroAtomOrTensor(p1))return DEBUG_ABS&&console.log(" abs: "+p1+" just zero"),push(zero),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore();if(isnegativenumber(p1))return DEBUG_ABS&&console.log(" abs: "+p1+" just a negative"),push(p1),negate(),void restore();if(ispositivenumber(p1))return DEBUG_ABS&&console.log(" abs: "+p1+" just a positive"),push(p1),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore();if(p1===symbol(PI))return DEBUG_ABS&&console.log(" abs: "+p1+" of PI"),push(p1),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(ADD)&&(findPossibleClockForm(p1)||findPossibleExponentialForm(p1)||Find(p1,imaginaryunit)))return DEBUG_ABS&&console.log(" abs: "+p1+" is a sum"),DEBUG_ABS&&console.log("abs of a sum"),push(p1),rect(),p1=pop(),push(p1),real(),push_integer(2),power(),push(p1),imag(),push_integer(2),power(),add(),push_rational(1,2),power(),simplify_trig(),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))return DEBUG_ABS&&console.log(" abs: "+p1+" is -1 to any power"),evaluatingAsFloats?(DEBUG_ABS&&console.log(" abs: numeric, so result is 1.0"),push_double(1)):(DEBUG_ABS&&console.log(" abs: symbolic, so result is 1"),push_integer(1)),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(POWER)&&ispositivenumber(caddr(p1)))return DEBUG_ABS&&console.log(" abs: "+p1+" is something to the power of a positive number"),push(cadr(p1)),abs(),push(caddr(p1)),power(),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))return DEBUG_ABS&&console.log(" abs: "+p1+" is an exponential"),push(caddr(p1)),real(),exponential(),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(MULTIPLY)){for(DEBUG_ABS&&console.log(" abs: "+p1+" is a product"),e=!1,p1=cdr(p1);iscons(p1);)push(car(p1)),absval(),e&&multiply(),e=!0,p1=cdr(p1);return DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore()}return car(p1)===symbol(ABS)?(DEBUG_ABS&&console.log(" abs: "+p1+" is abs of a abs"),push_symbol(ABS),push(cadr(p1)),list(2),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),void restore()):istensor(p1)?(absval_tensor(),void restore()):((isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),DEBUG_ABS&&console.log(" abs: "+p1+" is nothing decomposable"),push_symbol(ABS),push(p1),list(2),DEBUG_ABS&&console.log(" --\x3e ABS of "+t+" : "+stack[tos-1]),restore())},absval_tensor=function(){return 1!==p1.tensor.ndim&&stop("abs(tensor) with tensor rank > 1"),push(p1),push(p1),conjugate(),inner(),push_rational(1,2),power(),simplify(),Eval()},flag=0,Eval_add=function(){var e;for(e=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p2=pop(),push_terms(p2),p1=cdr(p1);return add_terms(tos-e)},stackAddsCount=0,add_terms=function(e){var t,r,n,i,s,o,a,l,u;if(stackAddsCount++,r=0,t=tos-e,DEBUG&&console.log("stack before adding terms #"+stackAddsCount),DEBUG)for(r=s=0,o=tos;0<=o?s<o:s>o;r=0<=o?++s:--s)console.log(print_list(stack[r]));for(r=n=0;n<10&&!(e<2)&&(flag=0,(u=stack.slice(t,t+e)).sort(cmp_terms),stack=stack.slice(0,t).concat(u).concat(stack.slice(t+e)),0!==flag);r=++n)e=combine_terms(t,e);switch(moveTos(t+e),e){case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:break;default:list(e),p1=pop(),push_symbol(ADD),push(p1),cons()}if(DEBUG&&console.log("stack after adding terms #"+stackAddsCount),DEBUG){for(l=[],r=i=0,a=tos;0<=a?i<a:i>a;r=0<=a?++i:--i)l.push(console.log(print_list(stack[r])));return l}},cmp_terms_count=0,cmp_terms=function(e,t){var r,n,i,s;if(cmp_terms_count++,r=0,isNumericAtom(e)&&isNumericAtom(t))return flag=1,0;if(istensor(e)&&istensor(t)){if(e.tensor.ndim<t.tensor.ndim)return-1;if(e.tensor.ndim>t.tensor.ndim)return 1;for(r=n=0,i=e.tensor.ndim;0<=i?n<i:n>i;r=0<=i?++n:--n){if(e.tensor.dim[r]<t.tensor.dim[r])return-1;if(e.tensor.dim[r]>t.tensor.dim[r])return 1}return flag=1,0}return car(e)===symbol(MULTIPLY)&&(e=cdr(e),isNumericAtom(car(e))&&(e=cdr(e),cdr(e)===symbol(NIL)&&(e=car(e)))),car(t)===symbol(MULTIPLY)&&(t=cdr(t),isNumericAtom(car(t))&&(t=cdr(t),cdr(t)===symbol(NIL)&&(t=car(t)))),0===(s=cmp_expr(e,t))&&(flag=1),s},combine_terms=function(e,t){var r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b;for(r=0;r<t-1;)if(check_esc_flag(),p3=stack[e+r],p4=stack[e+r+1],istensor(p3)&&istensor(p4)){if(push(p3),push(p4),tensor_plus_tensor(),(p1=pop())!==symbol(NIL)){for(stack[e+r]=p1,i=l=u=r+1,c=t-1;u<=c?l<c:l>c;i=u<=c?++l:--l)stack[e+i]=stack[e+i+1];t--,r--}r++}else if(istensor(p3)||istensor(p4))r++;else if(isNumericAtom(p3)&&isNumericAtom(p4)){if(push(p3),push(p4),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(i=n=p=r,h=t-2;p<=h?n<h:n>h;i=p<=h?++n:--n)stack[e+i]=stack[e+i+2];t-=2}else{for(stack[e+r]=p1,i=s=d=r+1,f=t-1;d<=f?s<f:s>f;i=d<=f?++s:--s)stack[e+i]=stack[e+i+1];t--}r--,r++}else if(isNumericAtom(p3)||isNumericAtom(p4))r++;else if(evaluatingAsFloats?(p1=one_as_double,p2=one_as_double):(p1=one,p2=one),b=0,car(p3)===symbol(MULTIPLY)&&(p3=cdr(p3),b=1,isNumericAtom(car(p3))&&(p1=car(p3),p3=cdr(p3),cdr(p3)===symbol(NIL)&&(p3=car(p3),b=0))),car(p4)===symbol(MULTIPLY)&&(p4=cdr(p4),isNumericAtom(car(p4))&&(p2=car(p4),p4=cdr(p4),cdr(p4)===symbol(NIL)&&(p4=car(p4)))),equal(p3,p4))if(push(p1),push(p2),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(i=o=m=r,g=t-2;m<=g?o<g:o>g;i=m<=g?++o:--o)stack[e+i]=stack[e+i+2];t-=2,r--,r++}else{for(push(p1),b?(push(symbol(MULTIPLY)),push(p3),cons()):push(p3),multiply(),stack[e+r]=pop(),i=a=y=r+1,v=t-1;y<=v?a<v:a>v;i=y<=v?++a:--a)stack[e+i]=stack[e+i+1];t--,r--,r++}else r++;return t},push_terms=function(e){var t;if(car(e)===symbol(ADD)){for(e=cdr(e),t=[];iscons(e);)push(car(e)),t.push(e=cdr(e));return t}if(!isZeroAtom(e))return push(e)},add=function(){var e;return save(),p2=pop(),p1=pop(),e=tos,push_terms(p1),push_terms(p2),add_terms(tos-e),restore()},add_all=function(e){var t,r,n,i,s;for(r=0,save(),s=tos-e,t=tos,r=n=0,i=e;0<=i?n<i:n>i;r=0<=i?++n:--n)push_terms(stack[s+r]);return add_terms(tos-t),p1=pop(),moveTos(tos-e),push(p1),restore()},subtract=function(){return negate(),add()},Eval_adj=function(){return push(cadr(p1)),Eval(),adj()},adj=function(){var e,t,r,n,i,s,o;for(e=0,r=0,0,save(),p1=pop(),istensor(p1)&&2===p1.tensor.ndim&&p1.tensor.dim[0]===p1.tensor.dim[1]?1:stop("adj: square matrix expected"),n=p1.tensor.dim[0],(p2=alloc_tensor(n*n)).tensor.ndim=2,p2.tensor.dim[0]=n,p2.tensor.dim[1]=n,e=i=0,s=n;0<=s?i<s:i>s;e=0<=s?++i:--i)for(r=t=0,o=n;0<=o?t<o:t>o;r=0<=o?++t:--t)cofactor(p1,n,e,r),p2.tensor.elem[n*r+e]=pop();return push(p2),restore()},Eval_approxratio=function(){var e;return e=cadr(p1),push(e),approxratioRecursive()},approxratioRecursive=function(){var e,t,r,n,i;if(e=0,save(),p1=pop(),istensor(p1)){for((p4=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,e=r=0,n=p1.tensor.ndim;0<=n?r<n:r>n;e=0<=n?++r:--r)p4.tensor.dim[e]=p1.tensor.dim[e];for(e=t=0,i=p1.tensor.nelem;0<=i?t<i:t>i;e=0<=i?++t:--t)push(p1.tensor.elem[e]),approxratioRecursive(),p4.tensor.elem[e]=pop(),check_tensor_dimensions(p4);push(p4)}else p1.k===DOUBLE?(push(p1),approxOneRatioOnly()):iscons(p1)?(push(car(p1)),approxratioRecursive(),push(cdr(p1)),approxratioRecursive(),cons()):push(p1);return restore()},approxOneRatioOnly=function(){var e,t,r,n,i,s;if(zzfloat(),(n=pop()).k!==DOUBLE)return push_symbol(APPROXRATIO),push(theArgument),list(2);2===(r=(i=n.d).toString().split(".")).length?(e=r[1].length,t=1/Math.pow(10,e),s=floatToRatioRoutine(i,t),push_rational(s[0],s[1])):push_integer(i)},floatToRatioRoutine=function(e,t){var r,n,i,s,o,a,l;if(i=void 0,n=void 0,r=void 0,a=void 0,s=void 0,o=void 0,l=[0,0],isNaN(e))return l;if(Infinity===e)return l[0]=1,l[1]=0,l;if(-Infinity===e)return l[0]=-1,l[1]=0,l;if(r=e<0?-1:1,e=Math.abs(e),Math.abs(e-Math.floor(e))<t)return i=e*r,n=1,l[0]=i,l[1]=n,l;if(e<1e-19)return i=r,n=1e19,l[0]=i,l[1]=n,l;if(e>1e19)return i=1e19*r,n=1,l[0]=i,l[1]=n,l;for(a=e,s=0,n=1;a=1/(a-Math.floor(a)),o=n,n=n*Math.floor(a)+s,s=o,i=Math.floor(e*n+.5),Math.abs(e-i/n)>t&&a!==Math.floor(a););return i*=r,l[0]=i,l[1]=n,l},approx_just_an_integer=0,approx_sine_of_rational=1,approx_sine_of_pi_times_rational=2,approx_rationalOfPi=3,approx_radicalOfRatio=4,approx_nothingUseful=5,approx_ratioOfRadical=6,approx_rationalOfE=7,approx_logarithmsOfRationals=8,approx_rationalsOfLogarithms=9,approxRationalsOfRadicals=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g;if(2!==(g=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(p=g[1].length,d=1/Math.pow(10,p),console.log("precision: "+d),t=null,c=Number.MAX_VALUE,h=0,l=(m=[2,3,5,6,7,8,10]).length;h<l;h++)for(s=m[h],a=o=1;o<=10;a=++o)i=Math.sqrt(s)/a,Math.abs(i)>1e-10?(f=e/i,u=Math.round(f),n=Math.abs(1-f/u)):(f=1,u=1,n=Math.abs(e-i)),n<2*d&&(r=simpleComplexityMeasure(u,s,a))<c&&(c=r,t=[u+" * sqrt( "+s+" ) / "+a,approx_ratioOfRadical,u,s,a]);return t},approxRadicalsOfRationals=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v;if(2!==(v=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(h=v[1].length,f=1/Math.pow(10,h),console.log("precision: "+f),t=null,p=Number.MAX_VALUE,d=0,l=(g=[1,2,3,5,6,7,8,10]).length;d<l;d++)for(s=g[d],o=0,u=(y=[1,2,3,5,6,7,8,10]).length;o<u;o++)a=y[o],i=Math.sqrt(s/a),Math.abs(i)>1e-10?(m=e/i,c=Math.round(m),n=Math.abs(1-m/c)):(m=1,c=1,n=Math.abs(e-i)),n<2*f&&(r=simpleComplexityMeasure(c,s,a))<p&&(p=r,t=[c+" * (sqrt( "+s+" / "+a+" )",approx_radicalOfRatio,c,s,a]);return t},approxRadicals=function(e){var t,r,n,i,s;return 2!==(s=e.toString().split(".")).length?[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2]:(n=s[1].length,i=1/Math.pow(10,n),console.log("precision: "+i),null!=(r=approxRationalsOfRadicals(e))?r:null!=(t=approxRadicalsOfRationals(e))?t:null)},approxLogs=function(e){var t,r,n,i,s;return 2!==(s=e.toString().split(".")).length?[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2]:(n=s[1].length,i=1/Math.pow(10,n),console.log("precision: "+i),null!=(r=approxRationalsOfLogs(e))?r:null!=(t=approxLogsOfRationals(e))?t:null)},approxRationalsOfLogs=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f;if(2!==(f=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(c=f[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),t=null,u=Number.MAX_VALUE,s=p=2;p<=5;s=++p)for(a=o=1;o<=5;a=++o)i=Math.log(s)/a,Math.abs(i)>1e-10?(d=e/i,l=Math.round(d),n=Math.abs(1-d/l)):(d=1,l=1,n=Math.abs(e-i)),1!==l&&Math.abs(Math.floor(l/a))===Math.abs(l/a)||n<2.2*h&&(r=simpleComplexityMeasure(l,s,a))<u&&(u=r,t=[l+" * log( "+s+" ) / "+a,approx_rationalsOfLogarithms,l,s,a]);return t},approxLogsOfRationals=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f;if(2!==(f=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(c=f[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),t=null,u=Number.MAX_VALUE,s=p=1;p<=5;s=++p)for(a=o=1;o<=5;a=++o)i=Math.log(s/a),Math.abs(i)>1e-10?(d=e/i,l=Math.round(d),n=Math.abs(1-d/l)):(d=1,l=1,n=Math.abs(e-i)),n<1.96*h&&(r=simpleComplexityMeasure(l,s,a))<u&&(u=r,t=[l+" * log( "+s+" / "+a+" )",approx_logarithmsOfRationals,l,s,a]);return t},approxRationalsOfPowersOfE=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f;if(2!==(f=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(c=f[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),t=null,u=Number.MAX_VALUE,s=p=1;p<=2;s=++p)for(a=o=1;o<=12;a=++o)i=Math.pow(Math.E,s)/a,Math.abs(i)>1e-10?(d=e/i,l=Math.round(d),n=Math.abs(1-d/l)):(d=1,l=1,n=Math.abs(e-i)),n<2*h&&(r=simpleComplexityMeasure(l,s,a))<u&&(u=r,t=[l+" * (e ^ "+s+" ) / "+a,approx_rationalOfE,l,s,a]);return t},approxRationalsOfPowersOfPI=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f;if(2!==(f=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(c=f[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),t=null,u=Number.MAX_VALUE,s=p=1;p<=5;s=++p)for(a=o=1;o<=12;a=++o)i=Math.pow(Math.PI,s)/a,Math.abs(i)>1e-10?(d=e/i,l=Math.round(d),n=Math.abs(1-d/l)):(d=1,l=1,n=Math.abs(e-i)),n<2*h&&(r=simpleComplexityMeasure(l,s,a))<u&&(u=r,t=[l+" * (pi ^ "+s+" ) / "+a+" )",approx_rationalOfPi,l,s,a]);return t},approxTrigonometric=function(e){var t,r,n,i,s;return 2!==(s=e.toString().split(".")).length?[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2]:(n=s[1].length,i=1/Math.pow(10,n),console.log("precision: "+i),null!=(r=approxSineOfRationals(e))?r:null!=(t=approxSineOfRationalMultiplesOfPI(e))?t:null)},approxSineOfRationals=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m;if(2!==(m=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(p=m[1].length,d=1/Math.pow(10,p),console.log("precision: "+d),t=null,c=Number.MAX_VALUE,o=h=1;h<=4;o=++h)for(l=a=1;a<=4;l=++a)i=o/l,s=Math.sin(i),Math.abs(s)>1e-10?(f=e/s,u=Math.round(f),n=Math.abs(1-f/u)):(f=1,u=1,n=Math.abs(e-s)),n<2*d&&(r=simpleComplexityMeasure(u,o,l))<c&&(c=r,t=[u+" * sin( "+o+"/"+l+" )",approx_sine_of_rational,u,o,l]);return t},approxSineOfRationalMultiplesOfPI=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m;if(2!==(m=e.toString().split(".")).length)return[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2];for(p=m[1].length,d=1/Math.pow(10,p),console.log("precision: "+d),t=null,c=Number.MAX_VALUE,o=h=1;h<=13;o=++h)for(l=a=1;a<=13;l=++a)i=o/l,s=Math.sin(Math.PI*i),Math.abs(s)>1e-10?(f=e/s,u=Math.round(f),n=Math.abs(1-f/u)):(f=1,u=1,n=Math.abs(e-s)),n<23*d&&(r=simpleComplexityMeasure(u,o,l))<c&&(c=r,t=[u+" * sin( "+o+"/"+l+" * pi )",approx_sine_of_pi_times_rational,u,o,l]);return t},approxAll=function(e){var t,r,n,i,s,o,a,l,u,c,p;return 2!==(p=e.toString().split(".")).length?[""+Math.floor(e),approx_just_an_integer,Math.floor(e),1,2]:(u=p[1].length,c=1/Math.pow(10,u),console.log("precision: "+c),l=Number.MAX_VALUE,a=0,o=null,!0,null!=(r=approxRadicals(e))&&((a=simpleComplexityMeasure(r))<l?(console.log("better explanation by approxRadicals: "+r+" complexity: "+a),l=a,o=r):console.log("subpar explanation by approxRadicals: "+r+" complexity: "+a)),null!=(t=approxLogs(e))&&((a=simpleComplexityMeasure(t))<l?(console.log("better explanation by approxLogs: "+t+" complexity: "+a),l=a,o=t):console.log("subpar explanation by approxLogs: "+t+" complexity: "+a)),null!=(n=approxRationalsOfPowersOfE(e))&&((a=simpleComplexityMeasure(n))<l?(console.log("better explanation by approxRationalsOfPowersOfE: "+n+" complexity: "+a),l=a,o=n):console.log("subpar explanation by approxRationalsOfPowersOfE: "+n+" complexity: "+a)),null!=(i=approxRationalsOfPowersOfPI(e))&&((a=simpleComplexityMeasure(i))<l?(console.log("better explanation by approxRationalsOfPowersOfPI: "+i+" complexity: "+a),l=a,o=i):console.log("subpar explanation by approxRationalsOfPowersOfPI: "+i+" complexity: "+a)),null!=(s=approxTrigonometric(e))&&((a=simpleComplexityMeasure(s))<l?(console.log("better explanation by approxTrigonometric: "+s+" complexity: "+a),l=a,o=s):console.log("subpar explanation by approxTrigonometric: "+s+" complexity: "+a)),o)},simpleComplexityMeasure=function(e,t,r){var n;if(n=null,e instanceof Array){switch(e[1]){case approx_sine_of_pi_times_rational:n=4;break;case approx_rationalOfPi:n=Math.pow(4,Math.abs(e[3]))*Math.abs(e[2]);break;case approx_rationalOfE:n=Math.pow(3,Math.abs(e[3]))*Math.abs(e[2]);break;default:n=0}n+=Math.abs(e[2])*(Math.abs(e[3])+Math.abs(e[4]))}else n+=Math.abs(e)*(Math.abs(t)+Math.abs(r));return 1===e[2]?n-=1:n+=1,1===e[3]?n-=1:n+=1,1===e[4]?n-=1:n+=1,n<0&&(n=0),n},testApprox=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A,N,k,M,C,T,O,I,P,D,R,L,q,$,B,z,F,U,j,G,V,H,W,Y,X,Z,Q,K,J,ee,te,re,ne,ie;for(k=0,f=(R=[2,3,5,6,7,8,10]).length;k<f;k++)for(r=R[k],n=0,m=(L=[2,3,5,6,7,8,10]).length;n<m;n++)r!==(o=L[n])&&(console.log("testapproxRadicals testing: 1 * sqrt( "+r+" ) / "+o),t=r/o,ee=Math.sqrt(r)/o,V=(j=approxRadicals(ee))[2]*Math.sqrt(j[3])/j[4],Math.abs(ee-V)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+r+" ) / "+o+" . obtained: "+j));for(a=0,g=(q=[2,3,5,6,7,8,10]).length;a<g;a++)for(r=q[a],p=0,y=($=[2,3,5,6,7,8,10]).length;p<y;p++)r!==(o=$[p])&&(console.log("testapproxRadicals testing with 4 digits: 1 * sqrt( "+r+" ) / "+o),t=r/o,ee=(T=Math.sqrt(r)/o).toFixed(4),V=(j=approxRadicals(ee))[2]*Math.sqrt(j[3])/j[4],Math.abs(T-V)>1e-15&&console.log("fail testapproxRadicals with 4 digits: 1 * sqrt( "+r+" ) / "+o+" . obtained: "+j));for(_=0,v=(B=[2,3,5,6,7,8,10]).length;_<v;_++)for(r=B[_],A=0,b=(z=[2,3,5,6,7,8,10]).length;A<b;A++)r!==(o=z[A])&&(console.log("testapproxRadicals testing: 1 * sqrt( "+r+" / "+o+" )"),t=r/o,ee=Math.sqrt(r/o),null!=(j=approxRadicals(ee))&&(V=j[2]*Math.sqrt(j[3]/j[4]),j[1]===approx_radicalOfRatio&&Math.abs(ee-V)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+r+" / "+o+" ) . obtained: "+j)));for(M=0,x=(F=[1,2,3,5,6,7,8,10]).length;M<x;M++)for(r=F[M],O=0,w=(U=[1,2,3,5,6,7,8,10]).length;O<w;O++)o=U[O],1===r&&1===o||(console.log("testapproxRadicals testing with 4 digits:: 1 * sqrt( "+r+" / "+o+" )"),t=r/o,ee=(T=Math.sqrt(r/o)).toFixed(4),V=(j=approxRadicals(ee))[2]*Math.sqrt(j[3]/j[4]),j[1]===approx_radicalOfRatio&&Math.abs(T-V)>1e-15&&console.log("fail testapproxRadicals with 4 digits:: 1 * sqrt( "+r+" / "+o+" ) . obtained: "+j));for(r=P=1;P<=5;r=++P)for(o=H=1;H<=5;o=++H)console.log("testApproxAll testing: 1 * log("+r+" ) / "+o),t=r/o,ee=Math.log(r)/o,V=(j=approxAll(ee))[2]*Math.log(j[3])/j[4],Math.abs(ee-V)>1e-15&&console.log("fail testApproxAll: 1 * log("+r+" ) / "+o+" . obtained: "+j);for(r=Y=1;Y<=5;r=++Y)for(o=Z=1;Z<=5;o=++Z)console.log("testApproxAll testing with 4 digits: 1 * log("+r+" ) / "+o),t=r/o,ee=(T=Math.log(r)/o).toFixed(4),V=(j=approxAll(ee))[2]*Math.log(j[3])/j[4],Math.abs(T-V)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+r+" ) / "+o+" . obtained: "+j);for(r=K=1;K<=5;r=++K)for(o=te=1;te<=5;o=++te)console.log("testApproxAll testing: 1 * log("+r+" / "+o+" )"),t=r/o,ee=Math.log(r/o),V=(j=approxAll(ee))[2]*Math.log(j[3]/j[4]),Math.abs(ee-V)>1e-15&&console.log("fail testApproxAll: 1 * log("+r+" / "+o+" ) . obtained: "+j);for(r=ne=1;ne<=5;r=++ne)for(o=i=1;i<=5;o=++i)console.log("testApproxAll testing with 4 digits: 1 * log("+r+" / "+o+" )"),t=r/o,ee=(T=Math.log(r/o)).toFixed(4),V=(j=approxAll(ee))[2]*Math.log(j[3]/j[4]),Math.abs(T-V)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+r+" / "+o+" ) . obtained: "+j);for(r=l=1;l<=2;r=++l)for(o=h=1;h<=12;o=++h)console.log("testApproxAll testing: 1 * (e ^ "+r+" ) / "+o),t=r/o,ee=Math.pow(Math.E,r)/o,V=(j=approxAll(ee))[2]*Math.pow(Math.E,j[3])/j[4],Math.abs(ee-V)>1e-15&&console.log("fail testApproxAll: 1 * (e ^ "+r+" ) / "+o+" . obtained: "+j);for(r=E=1;E<=2;r=++E)for(o=N=1;N<=12;o=++N)console.log("approxRationalsOfPowersOfE testing with 4 digits: 1 * (e ^ "+r+" ) / "+o),t=r/o,ee=(T=Math.pow(Math.E,r)/o).toFixed(4),V=(j=approxRationalsOfPowersOfE(ee))[2]*Math.pow(Math.E,j[3])/j[4],Math.abs(T-V)>1e-15&&console.log("fail approxRationalsOfPowersOfE with 4 digits: 1 * (e ^ "+r+" ) / "+o+" . obtained: "+j);for(r=C=1;C<=2;r=++C)for(o=I=1;I<=12;o=++I)console.log("testApproxAll testing: 1 * pi ^ "+r+" / "+o),t=r/o,ee=Math.pow(Math.PI,r)/o,V=(j=approxAll(ee))[2]*Math.pow(Math.PI,j[3])/j[4],Math.abs(ee-V)>1e-15&&console.log("fail testApproxAll: 1 * pi ^ "+r+" / "+o+" ) . obtained: "+j);for(r=D=1;D<=2;r=++D)for(o=W=1;W<=12;o=++W)console.log("approxRationalsOfPowersOfPI testing with 4 digits: 1 * pi ^ "+r+" / "+o),t=r/o,ee=(T=Math.pow(Math.PI,r)/o).toFixed(4),V=(j=approxRationalsOfPowersOfPI(ee))[2]*Math.pow(Math.PI,j[3])/j[4],Math.abs(T-V)>1e-15&&console.log("fail approxRationalsOfPowersOfPI with 4 digits: 1 * pi ^ "+r+" / "+o+" ) . obtained: "+j);for(r=X=1;X<=4;r=++X)for(o=Q=1;Q<=4;o=++Q)console.log("testApproxAll testing: 1 * sin( "+r+"/"+o+" )"),t=r/o,ee=Math.sin(t),G=(j=approxAll(ee))[3]/j[4],V=j[2]*Math.sin(G),Math.abs(ee-V)>1e-15&&console.log("fail testApproxAll: 1 * sin( "+r+"/"+o+" ) . obtained: "+j);for(r=J=1;J<=4;r=++J)for(o=re=1;re<=4;o=++re)console.log("testApproxAll testing with 5 digits: 1 * sin( "+r+"/"+o+" )"),t=r/o,ee=(T=Math.sin(t)).toFixed(5),null==(j=approxAll(ee))&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+r+"/"+o+" ) . obtained:  undefined "),G=j[3]/j[4],V=j[2]*Math.sin(G),(e=Math.abs(T-V))>1e-14&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+r+"/"+o+" ) . obtained: "+j+" error: "+e);for(r=ie=1;ie<=4;r=++ie)for(o=s=1;s<=4;o=++s)console.log("testApproxAll testing with 4 digits: 1 * sin( "+r+"/"+o+" )"),t=r/o,ee=(T=Math.sin(t)).toFixed(4),null==(j=approxAll(ee))&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+r+"/"+o+" ) . obtained:  undefined "),G=j[3]/j[4],V=j[2]*Math.sin(G),(e=Math.abs(T-V))>1e-14&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+r+"/"+o+" ) . obtained: "+j+" error: "+e);for("0"!==approxAll(ee=0)[0]&&console.log("fail testApproxAll: 0"),"0"!==approxAll(ee=0)[0]&&console.log("fail testApproxAll: 0.0"),"0"!==approxAll(ee=0)[0]&&console.log("fail testApproxAll: 0.00"),"0"!==approxAll(ee=0)[0]&&console.log("fail testApproxAll: 0.000"),"0"!==approxAll(ee=0)[0]&&console.log("fail testApproxAll: 0.0000"),"1"!==approxAll(ee=1)[0]&&console.log("fail testApproxAll: 1"),"1"!==approxAll(ee=1)[0]&&console.log("fail testApproxAll: 1.0"),"1"!==approxAll(ee=1)[0]&&console.log("fail testApproxAll: 1.00"),"1"!==approxAll(ee=1)[0]&&console.log("fail testApproxAll: 1.000"),"1"!==approxAll(ee=1)[0]&&console.log("fail testApproxAll: 1.0000"),"1"!==approxAll(ee=1)[0]&&console.log("fail testApproxAll: 1.00000"),ee=Math.sqrt(2),"1 * sqrt( 2 ) / 1"!==approxAll(ee)[0]&&console.log("fail testApproxAll: Math.sqrt(2)"),"1 * sqrt( 2 ) / 1"!==approxAll(ee=1.41)[0]&&console.log("fail testApproxAll: 1.41"),"1 * sqrt( 2 ) / 1"!==approxRadicals(ee=1.4)[0]&&console.log("fail approxRadicals: 1.4"),"1 * log( 2 ) / 1"!==approxLogs(ee=.6)[0]&&console.log("fail approxLogs: 0.6"),"1 * log( 2 ) / 1"!==approxLogs(ee=.69)[0]&&console.log("fail approxLogs: 0.69"),"1 * log( 2 ) / 1"!==approxLogs(ee=.7)[0]&&console.log("fail approxLogs: 0.7"),"1 * log( 3 ) / 1"!==approxLogs(ee=1.09)[0]&&console.log("fail approxLogs: 1.09"),"1 * log( 3 ) / 1"!==approxAll(ee=1.09)[0]&&console.log("fail approxAll: 1.09"),"1 * log( 3 ) / 1"!==approxAll(ee=1.098)[0]&&console.log("fail approxAll: 1.098"),"1 * log( 3 ) / 1"!==approxAll(ee=1.1)[0]&&console.log("fail approxAll: 1.1"),"1 * log( 3 ) / 1"!==approxAll(ee=1.11)[0]&&console.log("fail approxAll: 1.11"),ee=Math.sqrt(3),"1 * sqrt( 3 ) / 1"!==approxAll(ee)[0]&&console.log("fail testApproxAll: Math.sqrt(3)"),"1"!==approxAll(ee=1)[0]&&console.log("fail testApproxAll: 1.0000"),"1 * (pi ^ 1 ) / 1 )"!==approxAll(ee=3.141592)[0]&&console.log("fail testApproxAll: 3.141592"),"10 * (pi ^ 1 ) / 1 )"!==approxAll(ee=31.41592)[0]&&console.log("fail testApproxAll: 31.41592"),"100 * (pi ^ 1 ) / 1 )"!==approxAll(ee=314.1592)[0]&&console.log("fail testApproxAll: 314.1592"),"10000000 * (pi ^ 1 ) / 1 )"!==approxAll(ee=31415926.53589793)[0]&&console.log("fail testApproxAll: 31415926.53589793"),ee=Math.sqrt(2),"2 * sin( 1/4 * pi )"!==approxTrigonometric(ee)[0]&&console.log("fail approxTrigonometric: Math.sqrt(2)"),ee=Math.sqrt(3),"2 * sin( 1/3 * pi )"!==approxTrigonometric(ee)[0]&&console.log("fail approxTrigonometric: Math.sqrt(3)"),ee=(Math.sqrt(6)-Math.sqrt(2))/4,"1 * sin( 1/12 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: (Math.sqrt(6) - Math.sqrt(2))/4"),ee=Math.sqrt(2-Math.sqrt(2))/2,"1 * sin( 1/8 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: Math.sqrt(2 - Math.sqrt(2))/2"),ee=(Math.sqrt(6)+Math.sqrt(2))/4,"1 * sin( 5/12 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: (Math.sqrt(6) + Math.sqrt(2))/4"),ee=Math.sqrt(2+Math.sqrt(3))/2,"1 * sin( 5/12 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: Math.sqrt(2 + Math.sqrt(3))/2"),ee=(Math.sqrt(5)-1)/4,"1 * sin( 1/10 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: (Math.sqrt(5) - 1)/4"),ee=Math.sqrt(10-2*Math.sqrt(5))/4,"1 * sin( 1/5 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: Math.sqrt(10 - 2*Math.sqrt(5))/4"),ee=Math.sin(Math.PI/7),"1 * sin( 1/7 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: Math.sin(Math.PI/7)"),ee=Math.sin(Math.PI/9),"1 * sin( 1/9 * pi )"!==approxAll(ee)[0]&&console.log("fail testApproxAll: Math.sin(Math.PI/9)"),"6 * (pi ^ 5 ) / 1 )"!==approxRationalsOfPowersOfPI(ee=1836.15267)[0]&&console.log("fail approxRationalsOfPowersOfPI: 1836.15267"),r=u=1;u<=13;r=++u)for(o=c=1;c<=13;o=++c)console.log("approxTrigonometric testing: 1 * sin( "+r+"/"+o+" * pi )"),t=r/o,ee=Math.sin(Math.PI*t),G=(j=approxTrigonometric(ee))[3]/j[4],V=j[2]*Math.sin(Math.PI*G),Math.abs(ee-V)>1e-15&&console.log("fail approxTrigonometric: 1 * sin( "+r+"/"+o+" * pi ) . obtained: "+j);for(r=d=1;d<=13;r=++d)for(o=S=1;S<=13;o=++S)5===r&&11===o||6===r&&11===o||(console.log("approxTrigonometric testing with 4 digits: 1 * sin( "+r+"/"+o+" * pi )"),t=r/o,ee=(T=Math.sin(Math.PI*t)).toFixed(4),G=(j=approxTrigonometric(ee))[3]/j[4],V=j[2]*Math.sin(Math.PI*G),(e=Math.abs(T-V))>1e-14&&console.log("fail approxTrigonometric with 4 digits: 1 * sin( "+r+"/"+o+" * pi ) . obtained: "+j+" error: "+e));return console.log("testApprox done")},$.approxRadicals=approxRadicals,$.approxRationalsOfLogs=approxRationalsOfLogs,$.approxAll=approxAll,$.testApprox=testApprox,Eval_arccos=function(){return push(cadr(p1)),Eval(),arccos()},arccos=function(){var e;if(0,e=0,save(),p1=pop(),car(p1)===symbol(COS))return push(cadr(p1)),void restore();if(isdouble(p1))return 0,e=Math.acos(p1.d),push_double(e),void restore();if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return evaluatingAsFloats?push_double(Math.PI/4):(push_rational(1,4),push_symbol(PI),multiply()),void restore();if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return evaluatingAsFloats?push_double(3*Math.PI/4):(push_rational(3,4),push_symbol(PI),multiply()),void restore();if(issqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply()),void restore();if(isminussqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(5*Math.PI/6):(push_rational(5,6),push_symbol(PI),multiply()),void restore();if(!isrational(p1))return push_symbol(ARCCOS),push(p1),list(2),void restore();switch(push(p1),push_integer(2),multiply(),pop_integer()){case-2:evaluatingAsFloats?push_double(Math.PI):push_symbol(PI);break;case-1:evaluatingAsFloats?push_double(2*Math.PI/3):(push_rational(2,3),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;case 1:evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(0):push(zero);break;default:push_symbol(ARCCOS),push(p1),list(2)}return restore()},Eval_arccosh=function(){return push(cadr(p1)),Eval(),arccosh()},arccosh=function(){var e;return e=0,save(),p1=pop(),car(p1)===symbol(COSH)?(push(cadr(p1)),void restore()):isdouble(p1)?((e=p1.d)<1&&stop("arccosh function argument is less than 1.0"),e=Math.log(e+Math.sqrt(e*e-1)),push_double(e),void restore()):isplusone(p1)?(push(zero),void restore()):(push_symbol(ARCCOSH),push(p1),list(2),restore())},Eval_arcsin=function(){return push(cadr(p1)),Eval(),arcsin()},arcsin=function(){var e;if(0,e=0,save(),p1=pop(),car(p1)===symbol(SIN))return push(cadr(p1)),void restore();if(isdouble(p1))return 0,e=Math.asin(p1.d),push_double(e),void restore();if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return push_rational(1,4),push_symbol(PI),multiply(),void restore();if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return evaluatingAsFloats?push_double(-Math.PI/4):(push_rational(-1,4),push_symbol(PI),multiply()),void restore();if(issqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply()),void restore();if(isminussqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(-Math.PI/3):(push_rational(-1,3),push_symbol(PI),multiply()),void restore();if(!isrational(p1))return push_symbol(ARCSIN),push(p1),list(2),void restore();switch(push(p1),push_integer(2),multiply(),pop_integer()){case-2:evaluatingAsFloats?push_double(-Math.PI/2):(push_rational(-1,2),push_symbol(PI),multiply());break;case-1:evaluatingAsFloats?push_double(-Math.PI/6):(push_rational(-1,6),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;default:push_symbol(ARCSIN),push(p1),list(2)}return restore()},Eval_arcsinh=function(){return push(cadr(p1)),Eval(),arcsinh()},arcsinh=function(){var e;return e=0,save(),p1=pop(),car(p1)===symbol(SINH)?(push(cadr(p1)),void restore()):isdouble(p1)?(e=p1.d,e=Math.log(e+Math.sqrt(e*e+1)),push_double(e),void restore()):isZeroAtomOrTensor(p1)?(push(zero),void restore()):(push_symbol(ARCSINH),push(p1),list(2),restore())},Eval_arctan=function(){return push(cadr(p1)),Eval(),arctan()},arctan=function(){var e;return e=0,save(),p1=pop(),car(p1)===symbol(TAN)?(push(cadr(p1)),void restore()):isdouble(p1)?(0,e=Math.atan(p1.d),push_double(e),void restore()):isZeroAtomOrTensor(p1)?(push(zero),void restore()):isnegative(p1)?(push(p1),negate(),arctan(),negate(),void restore()):Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&(push(p1),numerator(),p2=pop(),push(p1),denominator(),p3=pop(),car(p2)===symbol(SIN)&&car(p3)===symbol(COS)&&equal(cadr(p2),cadr(p3)))?(push(cadr(p2)),void restore()):car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),-1,2)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,3)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),3)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)?(push_rational(1,6),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),void restore()):equaln(p1,1)?(push_rational(1,4),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),void restore()):car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),1,2)?(push_rational(1,3),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),void restore()):(push_symbol(ARCTAN),push(p1),list(2),restore())},Eval_arctanh=function(){return push(cadr(p1)),Eval(),arctanh()},arctanh=function(){var e;return e=0,save(),p1=pop(),car(p1)===symbol(TANH)?(push(cadr(p1)),void restore()):isdouble(p1)?(((e=p1.d)<-1||e>1)&&stop("arctanh function argument is not in the interval [-1,1]"),e=Math.log((1+e)/(1-e))/2,push_double(e),void restore()):isZeroAtomOrTensor(p1)?(push(zero),void restore()):(push_symbol(ARCTANH),push(p1),list(2),restore())},DEBUG_ARG=!1,Eval_arg=function(){return push(cadr(p1)),Eval(),arg()},arg=function(){return save(),p1=pop(),push(p1),numerator(),yyarg(),push(p1),denominator(),yyarg(),subtract(),restore()},yyarg=function(){if(save(),p1=pop(),ispositivenumber(p1)||p1===symbol(PI))isdouble(p1)||evaluatingAsFloats?push_double(0):push_integer(0);else if(isnegativenumber(p1))isdouble(p1)||evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),negate();else if(issymbol(p1))push_symbol(ARG),push(p1),list(2);else if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),push(caddr(p1)),multiply();else if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))push(caddr(p1)),imag();else if(car(p1)===symbol(POWER)&&isoneovertwo(caddr(p1)))DEBUG_ARG&&console.log("arg of a sqrt: "+p1),push(cadr(p1)),arg(),DEBUG_ARG&&console.log(" = 1/2 * "+stack[tos-1]),push(caddr(p1)),multiply();else if(car(p1)===symbol(MULTIPLY))for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),arg(),add(),p1=cdr(p1);else car(p1)===symbol(ADD)?(push(p1),rect(),p1=pop(),push(p1),real(),p2=pop(),push(p1),imag(),p3=pop(),isZeroAtomOrTensor(p2)?(evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),isnegative(p3)&&negate()):(push(p3),push(p2),divide(),arctan(),isnegative(p2)&&(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),isnegative(p3)?subtract():add()))):isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(ARG),push(p1),list(2)):push_integer(0);return restore()},bake=function(){var e,t,r,n,i,s;if(e=0,0,0,0,0,0,expanding++,save(),p1=pop(),t=ispolyexpandedform(p1,symbol(SYMBOL_S)),r=ispolyexpandedform(p1,symbol(SYMBOL_T)),n=ispolyexpandedform(p1,symbol(SYMBOL_X)),i=ispolyexpandedform(p1,symbol(SYMBOL_Y)),s=ispolyexpandedform(p1,symbol(SYMBOL_Z)),1===t&&0===r&&0===n&&0===i&&0===s)p2=symbol(SYMBOL_S),bake_poly();else if(0===t&&1===r&&0===n&&0===i&&0===s)p2=symbol(SYMBOL_T),bake_poly();else if(0===t&&0===r&&1===n&&0===i&&0===s)p2=symbol(SYMBOL_X),bake_poly();else if(0===t&&0===r&&0===n&&1===i&&0===s)p2=symbol(SYMBOL_Y),bake_poly();else if(0===t&&0===r&&0===n&&0===i&&1===s)p2=symbol(SYMBOL_Z),bake_poly();else if(iscons(p1)&&car(p1)!==symbol(FOR)){for(e=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),bake(),p1=cdr(p1);list(tos-e)}else push(p1);return restore(),expanding--},polyform=function(){var e;if(e=0,save(),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2))bake_poly();else if(iscons(p1)){for(e=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),polyform(),p1=cdr(p1);list(tos-e)}else push(p1);return restore()},bake_poly=function(){var e,t,r,n,i,s;for(0,r=0,0,0,e=tos,n=coeff(p2,p1),t=tos,r=s=n-1;s>=0;r=s+=-1)p1=stack[e+r],bake_poly_term(r);return(i=tos-t)>1&&(list(i),push(symbol(ADD)),swap(),cons()),p1=pop(),moveTos(tos-n),push(p1)},bake_poly_term=function(e){var t,r;if(0,0,!isZeroAtomOrTensor(p1)){if(0!==e){if(t=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else equaln(p1,1)||push(p1);return 1===e?push(p2):(push(symbol(POWER)),push(p2),push_integer(e),list(3)),(r=tos-t)>1?(list(r),push(symbol(MULTIPLY)),swap(),cons()):void 0}if(car(p1)===symbol(ADD))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1)}},Eval_besselj=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),besselj()},besselj=function(){return save(),yybesselj(),restore()},yybesselj=function(){var e,t;if(e=0,0,p2=pop(),p1=pop(),push(p2),t=pop_integer(),isdouble(p1)&&!isNaN(t))return e=jn(t,p1.d),void push_double(e);if(isZeroAtomOrTensor(p1)&&isZeroAtomOrTensor(p2))push_integer(1);else{if(!isZeroAtomOrTensor(p1)||isNaN(t))return p2.k===NUM&&MEQUAL(p2.q.b,2)?MEQUAL(p2.q.a,1)?(evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),sine(),void multiply()):MEQUAL(p2.q.a,-1)?(evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),cosine(),void multiply()):(push_integer(MSIGN(p2.q.a)),p3=pop(),push_integer(2),push(p1),divide(),push(p2),push(p3),subtract(),multiply(),push(p1),push(p2),push(p3),subtract(),besselj(),multiply(),push(p1),push(p2),push_integer(2),push(p3),multiply(),subtract(),besselj(),void subtract()):isnegativeterm(p1)?(push(p1),negate(),push(p2),power(),push(p1),push(p2),negate(),power(),multiply(),push_symbol(BESSELJ),push(p1),negate(),push(p2),list(3),void multiply()):isnegativeterm(p2)?(push_integer(-1),push(p2),power(),push_symbol(BESSELJ),push(p1),push(p2),negate(),list(3),void multiply()):(push(symbol(BESSELJ)),push(p1),push(p2),list(3));push_integer(0)}},Eval_bessely=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),bessely()},bessely=function(){return save(),yybessely(),restore()},yybessely=function(){var e,t;return e=0,0,p2=pop(),p1=pop(),push(p2),t=pop_integer(),isdouble(p1)&&!isNaN(t)?(e=yn(t,p1.d),void push_double(e)):isnegativeterm(p2)?(push_integer(-1),push(p2),power(),push_symbol(BESSELY),push(p1),push(p2),negate(),list(3),void multiply()):(push_symbol(BESSELY),push(p1),push(p2),void list(3))},mint=function(e){return bigInt(e)},isSmall=function(e){return e.geq(Number.MIN_SAFE_INTEGER)&&e.leq(Number.MAX_SAFE_INTEGER)},setSignTo=function(e,t){if(e.isPositive()){if(t<0)return e.multiply(bigInt(-1))}else if(t>0)return e.multiply(bigInt(-1));return e},makeSignSameAs=function(e,t){if(e.isPositive()){if(t.isNegative())return e.multiply(bigInt(-1))}else if(t.isPositive())return e.multiply(bigInt(-1));return e},makePositive=function(e){return e.isNegative()?e.multiply(bigInt(-1)):e},add_numbers=function(){var e,t;if(e=1,t=1,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),e=isdouble(p1)?p1.d:convert_rational_to_double(p1),t=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(e+t),restore();qadd()},subtract_numbers=function(){var e,t;if(e=0,t=0,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),e=isdouble(p1)?p1.d:convert_rational_to_double(p1),t=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(e-t),restore();qsub()},multiply_numbers=function(){var e,t;if(e=0,t=0,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),e=isdouble(p1)?p1.d:convert_rational_to_double(p1),t=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(e*t),restore();qmul()},divide_numbers=function(){var e,t;if(e=0,t=0,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("divide by zero"),e=isdouble(p1)?p1.d:convert_rational_to_double(p1),t=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(e/t),restore();qdiv()},invert_number=function(){var e,t;return save(),p1=pop(),isZeroAtomOrTensor(p1)&&stop("divide by zero"),isdouble(p1)?(push_double(1/p1.d),void restore()):(e=bigInt(p1.q.a),t=bigInt(p1.q.b),t=makeSignSameAs(t,e),e=setSignTo(e,1),(p1=new U).k=NUM,p1.q.a=t,p1.q.b=e,push(p1),restore())},compare_rationals=function(e,t){var r,n;return 0,r=mmul(e.q.a,t.q.b),n=mmul(e.q.b,t.q.a),mcmp(r,n)},compare_numbers=function(e,t){var r,n;return r=0,n=0,isrational(e)&&isrational(t)?compare_rationals(e,t):(r=isdouble(e)?e.d:convert_rational_to_double(e))<(n=isdouble(t)?t.d:convert_rational_to_double(t))?-1:r>n?1:0},negate_number=function(){if(save(),p1=pop(),isZeroAtomOrTensor(p1))return push(p1),void restore();switch(p1.k){case NUM:(p2=new U).k=NUM,p2.q.a=bigInt(p1.q.a.multiply(bigInt.minusOne)),p2.q.b=bigInt(p1.q.b),push(p2);break;case DOUBLE:push_double(-p1.d);break;default:stop("bug caught in mp_negate_number")}return restore()},bignum_truncate=function(){var e;return save(),p1=pop(),e=mdiv(p1.q.a,p1.q.b),(p1=new U).k=NUM,p1.q.a=e,p1.q.b=bigInt(1),push(p1),restore()},mp_numerator=function(){return save(),(p1=pop()).k!==NUM?(push(one),void restore()):((p2=new U).k=NUM,p2.q.a=bigInt(p1.q.a),p2.q.b=bigInt(1),push(p2),restore())},mp_denominator=function(){return save(),(p1=pop()).k!==NUM?(push(one),void restore()):((p2=new U).k=NUM,p2.q.a=bigInt(p1.q.b),p2.q.b=bigInt(1),push(p2),restore())},bignum_power_number=function(e){var t,r,n;return save(),p1=pop(),t=mpow(p1.q.a,Math.abs(e)),r=mpow(p1.q.b,Math.abs(e)),e<0&&(n=t,t=makeSignSameAs(t=r,r=n),r=setSignTo(r,1)),(p1=new U).k=NUM,p1.q.a=t,p1.q.b=r,push(p1),restore()},convert_bignum_to_double=function(e){return e.toJSNumber()},convert_rational_to_double=function(e){var t;return e.q,(t=e.q.a.divmod(e.q.b)).quotient+t.remainder/e.q.b.toJSNumber()},new_integer=function(e){var t;return(t=new U).k=NUM,t.q.a=bigInt(e),t.q.b=bigInt(1),t},push_integer=function(e){return DEBUG&&console.log("pushing integer "+e),push(new_integer(e))},push_double=function(e){return save(),(p1=new U).k=DOUBLE,p1.d=e,push(p1),restore()},push_rational=function(e,t){var r;return(r=new U).k=NUM,r.q.a=bigInt(e),r.q.b=bigInt(t),push(r)},pop_integer=function(){var e;switch(e=NaN,save(),(p1=pop()).k){case NUM:isinteger(p1)&&isSmall(p1.q.a)&&(e=p1.q.a.toJSNumber());break;case DOUBLE:DEBUG&&console.log("popping integer but double is found"),Math.floor(p1.d)===p1.d&&(DEBUG&&console.log("...altough it's an integer"),e=p1.d)}return restore(),e},print_double=function(e,t){var r,n;return r="",n=doubleToReasonableString(e.d),r+=print_str(1===t&&"-"===n?n+1:n)},bignum_scan_integer=function(e){var t,r,n;return save(),"+"!==(n=e[r=0])&&"-"!==n||r++,t=bigInt(e.substring(r)),(p1=new U).k=NUM,p1.q.a=t,p1.q.b=bigInt(1),push(p1),"-"===n&&negate(),restore()},bignum_scan_float=function(e){return push_double(parseFloat(e))},print_number=function(e,t){var r,n,i;switch(n="",i="","",e.k){case NUM:r=e.q.a.toString(),t||"-"===r[0]&&(r=r.substring(1)),printMode===PRINTMODE_LATEX&&isfraction(e)&&(r="\\frac{"+r+"}{"),n+=r,isfraction(e)&&(printMode!==PRINTMODE_LATEX&&(n+="/"),i=e.q.b.toString(),printMode===PRINTMODE_LATEX&&(i+="}"),n+=i);break;case DOUBLE:r=doubleToReasonableString(e.d),t||"-"===r[0]&&(r=r.substring(1)),n+=r}return n},gcd_numbers=function(){return save(),p2=pop(),p1=pop(),(p3=new U).k=NUM,p3.q.a=mgcd(p1.q.a,p2.q.a),p3.q.b=mgcd(p1.q.b,p2.q.b),p3.q.a=setSignTo(p3.q.a,1),push(p3),restore()},pop_double=function(){var e;switch(e=0,save(),(p1=pop()).k){case NUM:e=convert_rational_to_double(p1);break;case DOUBLE:e=p1.d;break;default:e=0}return restore(),e},bignum_float=function(){var e;return 0,e=convert_rational_to_double(pop()),push_double(e)},bignum_factorial=function(e){return save(),(p1=new U).k=NUM,p1.q.a=__factorial(e),p1.q.b=bigInt(1),push(p1),restore()},__factorial=function(e){var t,r,n,i,s;if(n=0,0===e||1===e)return t=bigInt(1);if(t=bigInt(2),r=bigInt(0),3<=e)for(n=i=3,s=e;3<=s?i<=s:i>=s;n=3<=s?++i:--i)r=bigInt(n),t=mmul(t,r);return t},mask=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648],mp_set_bit=function(e,t){return console.log("not implemented yet"),e[t/32]|=mask[t%32]},mp_clr_bit=function(e,t){return console.log("not implemented yet"),e[t/32]&=~mask[t%32]},mshiftright=function(e){return e.shiftRight()},Eval_binomial=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),binomial()},binomial=function(){return save(),ybinomial(),restore()},ybinomial=function(){if(p2=pop(),p1=pop(),0!==BINOM_check_args())return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide();push(zero)},BINOM_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_ceiling=function(){return push(cadr(p1)),Eval(),ceiling()},ceiling=function(){return save(),yyceiling(),restore()},yyceiling=function(){var e;return e=0,p1=pop(),isNumericAtom(p1)?isdouble(p1)?(e=Math.ceil(p1.d),void push_double(e)):isinteger(p1)?void push(p1):((p3=new U).k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?1:(push_integer(1),add())):(push_symbol(CEILING),push(p1),void list(2))},Eval_choose=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),choose()},choose=function(){return save(),p2=pop(),p1=pop(),0===choose_check_args()?(push_integer(0),void restore()):(push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide(),restore())},choose_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_circexp=function(){return push(cadr(p1)),Eval(),circexp(),Eval()},circexp=function(){var e,t,r,n;if(t=0,e=0,save(),p1=pop(),car(p1)===symbol(COS))return push(cadr(p1)),expcos(),void restore();if(car(p1)===symbol(SIN))return push(cadr(p1)),expsin(),void restore();if(car(p1)===symbol(TAN))return p1=cadr(p1),push(imaginaryunit),push(p1),multiply(),exponential(),p2=pop(),push(imaginaryunit),push(p1),multiply(),negate(),exponential(),p3=pop(),push(p3),push(p2),subtract(),push(imaginaryunit),multiply(),push(p2),push(p3),add(),divide(),void restore();if(car(p1)===symbol(COSH))return p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),add(),push_rational(1,2),multiply(),void restore();if(car(p1)===symbol(SINH))return p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),subtract(),push_rational(1,2),multiply(),void restore();if(car(p1)===symbol(TANH))return p1=cadr(p1),push(p1),push_integer(2),multiply(),exponential(),p1=pop(),push(p1),push_integer(1),subtract(),push(p1),push_integer(1),add(),divide(),void restore();if(iscons(p1)){for(e=tos;iscons(p1);)push(car(p1)),circexp(),p1=cdr(p1);return list(tos-e),void restore()}if(p1.k===TENSOR){for(push(p1),copy_tensor(),t=r=0,n=(p1=pop()).tensor.nelem;0<=n?r<n:r>n;t=0<=n?++r:--r)push(p1.tensor.elem[t]),circexp(),p1.tensor.elem[t]=pop();return push(p1),void restore()}return push(p1),restore()},Eval_clearall=function(){return do_clearall(),push(symbol(NIL))},do_clearall=function(){return 0===test_flag&&clear_term(),do_clearPatterns(),clear_symbols(),defn(),codeGen=!1},clearall=function(){return run("clearall")},clearRenamedVariablesToAvoidBindingToExternalScope=function(){var e,t,r,n;for(n=[],e=t=0,r=symtab.length;0<=r?t<r:t>r;e=0<=r?++t:--t)-1!==symtab[e].printname.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")?(symtab[e].k=SYM,symtab[e].printname="",binding[e]=symtab[e],n.push(isSymbolReclaimable[e]=!0)):n.push(void 0);return n},Eval_clear=function(){var e,t;for(p2=cdr(p1);iscons(p2);)(t=car(p2)).k!==SYM&&stop("symbol error"),e=symtab.indexOf(t),symtab[e].k=SYM,symtab[e].printname="",binding[e]=symtab[e],isSymbolReclaimable[e]=!0,p2=cdr(p2);return push(symbol(NIL))},DEBUG_CLOCKFORM=!1,Eval_clock=function(){return push(cadr(p1)),Eval(),clockform()},clockform=function(){return save(),p1=pop(),push(p1),abs(),DEBUG_CLOCKFORM&&console.log("clockform: abs of "+p1+" : "+stack[tos-1]),push_symbol(POWER),push_integer(-1),push(p1),arg(),DEBUG_CLOCKFORM&&console.log("clockform: arg of "+p1+" : "+stack[tos-1]),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),divide(),DEBUG_CLOCKFORM&&console.log("clockform: divide : "+stack[tos-1]),list(3),DEBUG_CLOCKFORM&&console.log("clockform: power : "+stack[tos-1]),multiply(),DEBUG_CLOCKFORM&&console.log("clockform: multiply : "+stack[tos-1]),restore()},Eval_coeff=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p3=pop(),p2=pop(),p1=pop(),p3===symbol(NIL)&&(p3=p2,p2=symbol(SYMBOL_X)),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter()},coeff=function(e,t){var r,n,i,s;for(DEBUG&&console.log("coeff: "+e+" "+t),r=0;;){if(push(t),push(e),push(zero),subst(),Eval(),n=pop(),push(n),r++,push(t),push(n),subtract(),i=pop(),equal(i,zero))return DEBUG&&console.log("coeff: result: "+r),r;push(i),push(e),s=expanding,expanding=1,divide(),expanding=s,t=pop()}},Eval_cofactor=function(){var e,t,r;return 0,0,0,push(cadr(p1)),Eval(),p2=pop(),istensor(p2)&&2===p2.tensor.ndim&&p2.tensor.dim[0]===p2.tensor.dim[1]?1:stop("cofactor: 1st arg: square matrix expected"),r=p2.tensor.dim[0],push(caddr(p1)),Eval(),((e=pop_integer())<1||e>r)&&stop("cofactor: 2nd arg: row index expected"),push(cadddr(p1)),Eval(),((t=pop_integer())<1||t>r)&&stop("cofactor: 3rd arg: column index expected"),cofactor(p2,r,e-1,t-1)},cofactor=function(e,t,r,n){var i,s,o,a,l,u;for(i=0,o=0,i=a=0,l=t;0<=l?a<l:a>l;i=0<=l?++a:--a)for(o=s=0,u=t;0<=u?s<u:s>u;o=0<=u?++s:--s)i!==r&&o!==n&&push(e.tensor.elem[t*i+o]);if(determinant(t-1),(r+n)%2)return negate()},Eval_condense=function(){return push(cadr(p1)),Eval(),Condense()},Condense=function(){var e;return e=expanding,expanding=0,save(),yycondense(),restore(),expanding=e},yycondense=function(){if(p1=pop(),car(p1)===symbol(ADD)){for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),DEBUG&&console.log("calculating gcd between: "+stack[tos-1]+" and "+stack[tos-2]),gcd(),DEBUG&&console.log("partial gcd: "+stack[tos-1]),p3=cdr(p3);for(DEBUG&&console.log("condense: this is the gcd of all the terms: "+stack[tos-1]),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply_noexpand(),add(),p3=cdr(p3);return yyexpand(),push(p2),divide()}push(p1)},Eval_conj=function(){return push(cadr(p1)),Eval(),p1=pop(),push(p1),Find(p1,imaginaryunit)?conjugate():(polar(),conjugate(),clockform())},conjugate=function(){return push(imaginaryunit),push(imaginaryunit),negate(),subst(),Eval()},consCount=0,cons=function(){var e;return consCount++,DEBUG&&console.log("cons tos: "+tos+" # "+consCount),(e=new U).k=CONS,e.cons.cdr=pop(),e===e.cons.cdr&&console.log("something wrong p == its cdr"),e.cons.car=pop(),push(e)},Eval_contract=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),contract()},contract=function(){return save(),yycontract(),restore()},yycontract=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A,N;if(i=0,s=0,a=0,u=0,c=0,h=0,0,0,y=0,t=[],r=[],p3=pop(),p2=pop(),p1=pop(),!istensor(p1))return isZeroAtomOrTensor(p1)||stop("contract: tensor expected, 1st arg is not a tensor"),void push(zero);for(push(p2),c=pop_integer(),push(p3),h=pop_integer(),g=p1.tensor.ndim,(c<1||c>g||h<1||h>g||c===h||p1.tensor.dim[c-1]!==p1.tensor.dim[h-1])&&stop("contract: index out of range"),c--,h--,f=p1.tensor.dim[c],y=1,s=v=0,x=g;0<=x?v<x:v>x;s=0<=x?++v:--v)s!==c&&s!==h&&(y*=p1.tensor.dim[s]);for((p2=alloc_tensor(y)).tensor.ndim=g-2,a=0,s=o=0,w=g;0<=w?o<w:o>w;s=0<=w?++o:--o)s!==c&&s!==h&&(p2.tensor.dim[a++]=p1.tensor.dim[s]);for(e=p1.tensor.elem,n=p2.tensor.elem,s=l=0,_=g;0<=_?l<_:l>_;s=0<=_?++l:--l)t[s]=0,r[s]=p1.tensor.dim[s];for(s=p=0,E=y;0<=E?p<E:p>E;s=0<=E?++p:--p){for(push(zero),a=d=0,S=f;0<=S?d<S:d>S;a=0<=S?++d:--d){for(t[c]=a,t[h]=a,i=0,u=m=0,A=g;0<=A?m<A:m>A;u=0<=A?++m:--m)i=i*r[u]+t[u];push(e[i]),add()}for(n[s]=pop(),a=b=N=g-1;N<=0?b<=0:b>=0;a=N<=0?++b:--b)if(a!==c&&a!==h){if(++t[a]<r[a])break;t[a]=0}}return push(1===y?n[0]:p2)},Eval_cos=function(){return push(cadr(p1)),Eval(),cosine()},cosine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?cosine_of_angle_sum():cosine_of_angle(),restore()},cosine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4))return push(p1),push(p4),subtract(),p3=pop(),push(p3),cosine(),push(p4),cosine(),multiply(),push(p3),sine(),push(p4),sine(),multiply(),void subtract();p2=cdr(p2)}return cosine_of_angle()},cosine_of_angle=function(){var e,t;if(car(p1)!==symbol(ARCCOS)){if(isdouble(p1))return e=Math.cos(p1.d),Math.abs(e)<1e-10&&(e=0),void push_double(e);if(isnegative(p1)&&(push(p1),negate(),p1=pop()),car(p1)===symbol(ARCTAN))return push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),void power();if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),(t=pop_integer())<0||isNaN(t))return push(symbol(COS)),push(p1),void list(2);switch(t%360){case 90:case 270:return push_integer(0);case 60:case 300:return push_rational(1,2);case 120:case 240:return push_rational(-1,2);case 45:case 315:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 135:case 225:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 30:case 330:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 210:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 0:return push_integer(1);case 180:return push_integer(-1);default:return push(symbol(COS)),push(p1),list(2)}}else push(cadr(p1))},Eval_cosh=function(){return push(cadr(p1)),Eval(),ycosh()},ycosh=function(){return save(),yycosh(),restore()},yycosh=function(){var e;if(e=0,p1=pop(),car(p1)!==symbol(ARCCOSH)){if(isdouble(p1))return e=Math.cosh(p1.d),Math.abs(e)<1e-10&&(e=0),void push_double(e);if(!isZeroAtomOrTensor(p1))return push_symbol(COSH),push(p1),list(2);push(one)}else push(cadr(p1))},Eval_decomp=function(){var e;return save(),console.log("Eval_decomp is being called!!!!!!!!!!!!!!!!!!!!"),e=tos,push(symbol(NIL)),push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p1=pop())===symbol(NIL)?guess():push(p1),decomp(!1),list(tos-e),restore()},pushTryNotToDuplicate=function(e){if(!(tos>0&&(DEBUG&&console.log("comparing "+e+" to: "+stack[tos-1]),equal(e,stack[tos-1]))))return push(e);DEBUG&&console.log("skipping "+e+" because it's already on stack ")},decomp=function(e){if(save(),p2=pop(),p1=pop(),DEBUG&&console.log("DECOMPOSING "+p1),e){if(!iscons(p1))return DEBUG&&console.log(" ground thing: "+p1),pushTryNotToDuplicate(p1),void restore()}else if(0===Find(p1,p2))return DEBUG&&console.log(" entire expression is constant"),pushTryNotToDuplicate(p1),void restore();if(isadd(p1))return decomp_sum(e),void restore();if(ismultiply(p1))return decomp_product(e),void restore();for(DEBUG&&console.log(" naive decomp"),p3=cdr(p1),DEBUG&&console.log("startig p3: "+p3);iscons(p3);)e&&push(car(p3)),DEBUG&&console.log("recursive decomposition"),push(car(p3)),DEBUG&&console.log("car(p3): "+car(p3)),push(p2),DEBUG&&console.log("p2: "+p2),decomp(e),p3=cdr(p3);return restore()},decomp_sum=function(e){var t;for(DEBUG&&console.log(" decomposing the sum "),0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||e)&&(push(car(p3)),push(p2),decomp(e)),p3=cdr(p3);for(t=tos,p3=cdr(p1);iscons(p3);)0===Find(car(p3),p2)&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-t)return add_all(tos-t),p3=pop(),pushTryNotToDuplicate(p3),push(p3),negate()},decomp_product=function(e){var t;for(DEBUG&&console.log(" decomposing the product "),0,p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||e)&&(push(car(p3)),push(p2),decomp(e)),p3=cdr(p3);for(t=tos,p3=cdr(p1);iscons(p3);)0===Find(car(p3),p2)&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-t)return multiply_all(tos-t)},define_user_function=function(){return p3=caadr(p1),p4=cdadr(p1),p5=caddr(p1),issymbol(p3)||stop("function name?"),car(p5)===symbol(EVAL)&&(push(cadr(p5)),Eval(),p5=pop()),push_symbol(FUNCTION),push(p5),push(p4),list(3),p5=pop(),set_binding(p3,p5),push_symbol(NIL)},Eval_function_reference=function(){return push(p1)},Eval_defint=function(){for(push(cadr(p1)),Eval(),p2=pop(),p1=cddr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1),Eval(),p3=pop(),push(car(p1)),p1=cdr(p1),Eval(),p4=pop(),push(car(p1)),p1=cdr(p1),Eval(),p5=pop(),push(p2),push(p3),integral(),p2=pop(),push(p2),push(p3),push(p5),subst(),Eval(),push(p2),push(p3),push(p4),subst(),Eval(),subtract(),p2=pop();return push(p2)},Eval_degree=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p1=pop())===symbol(NIL)?guess():push(p1),degree()},degree=function(){return save(),p2=pop(),p1=pop(),p3=zero,yydegree(p1),push(p3),restore()},yydegree=function(e){var t;if(equal(e,p2)){if(isZeroAtomOrTensor(p3))return p3=one}else if(car(e)===symbol(POWER)){if(equal(cadr(e),p2)&&isNumericAtom(caddr(e))&&lessp(p3,caddr(e)))return p3=caddr(e)}else if(iscons(e)){for(e=cdr(e),t=[];iscons(e);)yydegree(car(e)),t.push(e=cdr(e));return t}},Eval_denominator=function(){return push(cadr(p1)),Eval(),denominator()},denominator=function(){var e,t;if(e=0,t=pop(),car(t)===symbol(ADD)&&(push(t),rationalize(),t=pop()),car(t)!==symbol(MULTIPLY)||isplusone(car(cdr(t))))return isrational(t)?(push(t),mp_denominator()):car(t)===symbol(POWER)&&isnegativeterm(caddr(t))?(push(t),reciprocate()):push(one);for(e=tos,t=cdr(t);iscons(t);)push(car(t)),denominator(),t=cdr(t);return multiply_all(tos-e)},Eval_derivative=function(){var e,t,r,n,i;for(0,p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),t=pop_integer(),isNaN(t)&&stop("nth derivative: check n")):t=1,push(p3),t>=0)for(r=0,n=t;0<=n?r<n:r>n;0<=n?++r:--r)push(p4),derivative();else for(e=0,i=t=-t;0<=i?e<i:e>i;0<=i?++e:--e)push(p4),integral();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),(p5=pop())===symbol(NIL))break;isNumericAtom(p5)?1:(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},derivative=function(){return save(),p2=pop(),p1=pop(),isNumericAtom(p2)&&stop("undefined function"),istensor(p1)?istensor(p2)?d_tensor_tensor():d_tensor_scalar():istensor(p2)?d_scalar_tensor():d_scalar_scalar(),restore()},d_scalar_scalar=function(){return issymbol(p2)?d_scalar_scalar_1():(push(p1),push(p2),push(symbol(SECRETX)),subst(),push(symbol(SECRETX)),derivative(),push(symbol(SECRETX)),push(p2),subst())},d_scalar_scalar_1=function(){if(equal(p1,p2))push(one);else if(iscons(p1))if(isadd(p1))dsum();else if(car(p1)!==symbol(MULTIPLY))if(car(p1)!==symbol(POWER))if(car(p1)!==symbol(DERIVATIVE))if(car(p1)!==symbol(LOG))if(car(p1)!==symbol(SIN))if(car(p1)!==symbol(COS))if(car(p1)!==symbol(TAN))if(car(p1)!==symbol(ARCSIN))if(car(p1)!==symbol(ARCCOS))if(car(p1)!==symbol(ARCTAN))if(car(p1)!==symbol(SINH))if(car(p1)!==symbol(COSH))if(car(p1)!==symbol(TANH))if(car(p1)!==symbol(ARCSINH))if(car(p1)!==symbol(ARCCOSH))if(car(p1)!==symbol(ARCTANH))if(car(p1)!==symbol(ABS))if(car(p1)!==symbol(SGN))if(car(p1)!==symbol(HERMITE))if(car(p1)!==symbol(ERF))if(car(p1)!==symbol(ERFC))if(car(p1)!==symbol(BESSELJ))if(car(p1)!==symbol(BESSELY)){if(car(p1)!==symbol(INTEGRAL)||caddr(p1)!==p2)return dfunction();derivative_of_integral()}else isZeroAtomOrTensor(caddr(p1))?dbessely0():dbesselyn();else isZeroAtomOrTensor(caddr(p1))?dbesselj0():dbesseljn();else derfc();else derf();else dhermite();else dsgn();else dabs();else darctanh();else darccosh();else darcsinh();else dtanh();else dcosh();else dsinh();else darctan();else darccos();else darcsin();else dtan();else dcos();else dsin();else dlog();else dd();else dpower();else dproduct();else push(zero)},dsum=function(){var e;for(e=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),derivative(),p1=cdr(p1);return add_all(tos-e)},dproduct=function(){var e,t,r,n,i,s,o;for(e=0,r=0,0,e=i=0,s=n=length(p1)-1;0<=s?i<s:i>s;e=0<=s?++i:--i){for(p3=cdr(p1),r=t=0,o=n;0<=o?t<o:t>o;r=0<=o?++t:--t)push(car(p3)),e===r&&(push(p2),derivative()),p3=cdr(p3);multiply_all(n)}return add_all(n)},dpower=function(){return push(caddr(p1)),push(cadr(p1)),divide(),push(cadr(p1)),push(p2),derivative(),multiply(),push(cadr(p1)),logarithm(),push(caddr(p1)),push(p2),derivative(),multiply(),add(),push(p1),multiply()},dlog=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),divide()},dd=function(){return push(cadr(p1)),push(p2),derivative(),p3=pop(),car(p3)===symbol(DERIVATIVE)?(push_symbol(DERIVATIVE),push_symbol(DERIVATIVE),push(cadr(p3)),lessp(caddr(p3),caddr(p1))?(push(caddr(p3)),list(3),push(caddr(p1))):(push(caddr(p1)),list(3),push(caddr(p3))),list(3)):(push(p3),push(caddr(p1)),derivative())},dfunction=function(){return(p3=cdr(p1))===symbol(NIL)||Find(p3,p2)?(push_symbol(DERIVATIVE),push(p1),push(p2),list(3)):push(zero)},dsin=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),multiply()},dcos=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sine(),multiply(),negate()},dtan=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),push_integer(-2),power(),multiply()},darcsin=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply()},darccos=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply(),negate()},darctan=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),inverse(),multiply(),simplify()},dsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),multiply()},dcosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ysinh(),multiply()},dtanh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),push_integer(-2),power(),multiply()},darcsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(1),add(),push_rational(-1,2),power(),multiply()},darccosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(-1),add(),push_rational(-1,2),power(),multiply()},darctanh=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),inverse(),multiply()},dabs=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sgn(),multiply()},dsgn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),dirac(),multiply(),push_integer(2),multiply()},dhermite=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(2),push(caddr(p1)),multiply(),multiply(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),hermite(),multiply()},derf=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},derfc=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(-2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},dbesselj0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesseljn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),besselj(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),besselj(),multiply(),add(),multiply()},dbessely0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesselyn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),bessely(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),bessely(),multiply(),add(),multiply()},derivative_of_integral=function(){return push(cadr(p1))},DET_check_arg=function(){return istensor(p1)?2!==p1.tensor.ndim||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},det=function(){var e,t,r,n,i,s,o;if(t=0,0,save(),p1=pop(),0===DET_check_arg())return push_symbol(DET),push(p1),list(2),void restore();for(n=p1.tensor.nelem,e=p1.tensor.elem,t=i=0,s=n;(0<=s?i<s:i>s)&&isNumericAtom(e[t]);t=0<=s?++i:--i);if(t===n)yydetg();else{for(t=r=0,o=p1.tensor.nelem;0<=o?r<o:r>o;t=0<=o?++r:--r)push(p1.tensor.elem[t]);determinant(p1.tensor.dim[0])}return restore()},determinant=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f;for(0,i=0,o=0,a=0,u=0,h=0,d=0,f=0,t=[],n=tos-e*e,i=l=0,c=e;0<=c?l<c:l>c;i=0<=c?++l:--l)t[i]=i,t[i+e]=0,t[i+e+e]=1;for(d=1,push(zero);;){for(push_integer(1===d?1:-1),i=s=0,p=e;0<=p?s<p:s>p;i=0<=p?++s:--s)a=e*t[i]+i,push(stack[n+a]),multiply();for(add(),o=e-1,h=0,r=!1;;)if((u=t[e+o]+t[e+e+o])<0)t[e+e+o]=-t[e+e+o],o--;else{if(u!==o+1)break;if(0===o){r=!0;break}h++,t[e+e+o]=-t[e+e+o],o--}if(r)break;f=t[o-t[e+o]+h],t[o-t[e+o]+h]=t[o-u+h],t[o-u+h]=f,t[e+o]=u,d=-d}return stack[n]=stack[tos-1],moveTos(n+1)},detg=function(){return save(),p1=pop(),0===DET_check_arg()?(push_symbol(DET),push(p1),list(2),void restore()):(yydetg(),restore())},yydetg=function(){var e,t,r,n;for(e=0,0,e=r=0,n=(t=p1.tensor.dim[0])*t;0<=n?r<n:r>n;e=0<=n?++r:--r)push(p1.tensor.elem[e]);return lu_decomp(t),moveTos(tos-t*t),push(p1)},M=function(e,t,r,n){return stack[e+t*r+n]},setM=function(e,t,r,n,i){return stack[e+t*r+n]=i},lu_decomp=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v;for(t=0,0,n=0,s=0,r=tos-e*e,p1=one,t=u=0,c=e-1;0<=c?u<c:u>c;t=0<=c?++u:--u){if(equal(M(r,e,t,t),zero)){for(n=i=p=t+1,h=e;(p<=h?i<h:i>h)&&equal(M(r,e,n,t),zero);n=p<=h?++i:--i);if(n===e){p1=zero;break}for(s=o=d=t,f=e;d<=f?o<f:o>f;s=d<=f?++o:--o)p2=M(r,e,t,s),setM(r,e,t,s,M(r,e,n,s)),setM(r,e,n,s,p2);push(p1),negate(),p1=pop()}for(push(p1),push(M(r,e,t,t)),multiply(),p1=pop(),n=a=m=t+1,g=e;m<=g?a<g:a>g;n=m<=g?++a:--a)for(push(M(r,e,n,t)),push(M(r,e,t,t)),divide(),negate(),p2=pop(),setM(r,e,n,t,zero),s=l=y=t+1,v=e;y<=v?l<v:l>v;s=y<=v?++l:--l)push(M(r,e,t,s)),push(p2),multiply(),push(M(r,e,n,s)),add(),setM(r,e,n,s,pop())}return push(p1),push(M(r,e,e-1,e-1)),multiply(),p1=pop()},Eval_dirac=function(){return push(cadr(p1)),Eval(),dirac()},dirac=function(){return save(),ydirac(),restore()},ydirac=function(){return p1=pop(),isdouble(p1)?0===p1.d?void push_integer(1):void push_integer(0):isrational(p1)?MZERO(mmul(p1.q.a,p1.q.b))?void push_integer(1):void push_integer(0):car(p1)===symbol(POWER)?(push_symbol(DIRAC),push(cadr(p1)),void list(2)):isnegativeterm(p1)?(push_symbol(DIRAC),push(p1),negate(),void list(2)):((isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),push_symbol(DIRAC),push(p1),list(2))},divisors=function(){var e,t,r,n,i,s;for(t=0,0,0,save(),e=tos-1,divisors_onstack(),r=tos-e,(s=stack.slice(e,e+r)).sort(cmp_expr),stack=stack.slice(0,e).concat(s).concat(stack.slice(e+r)),(p1=alloc_tensor(r)).tensor.ndim=1,p1.tensor.dim[0]=r,t=n=0,i=r;0<=i?n<i:n>i;t=0<=i?++n:--n)p1.tensor.elem[t]=stack[e+t];return moveTos(e),push(p1),restore()},divisors_onstack=function(){var e,t,r,n,i,s;if(0,t=0,0,0,save(),p1=pop(),e=tos,isNumericAtom(p1))push(p1),factor_small_number();else if(car(p1)===symbol(ADD))push(p1),__factor_add();else if(car(p1)===symbol(MULTIPLY))for(p1=cdr(p1),isNumericAtom(car(p1))&&(push(car(p1)),factor_small_number(),p1=cdr(p1));iscons(p1);)p2=car(p1),car(p2)===symbol(POWER)?(push(cadr(p2)),push(caddr(p2))):(push(p2),push(one)),p1=cdr(p1);else car(p1)===symbol(POWER)?(push(cadr(p1)),push(caddr(p1))):(push(p1),push(one));for(r=tos,push(one),gen(e,r),t=i=0,s=n=tos-r;0<=s?i<s:i>s;t=0<=s?++i:--i)stack[e+t]=stack[r+t];return moveTos(e+n),restore()},gen=function(e,t){var r,n,i,s;if(0,n=0,save(),p1=pop(),e===t)return push(p1),void restore();if(p2=stack[e+0],p3=stack[e+1],push(p3),r=pop_integer(),!isNaN(r))for(n=i=0,s=Math.abs(r);0<=s?i<=s:i>=s;n=0<=s?++i:--i)push(p1),push(p2),push_integer(sign(r)*n),power(),multiply(),gen(e+2,t);return restore()},__factor_add=function(){for(save(),p1=pop(),p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);if(p2=pop(),isplusone(p2))return push(p1),push(one),void restore();if(isNumericAtom(p2))push(p2),factor_small_number();else if(car(p2)===symbol(MULTIPLY))for(p3=cdr(p2),isNumericAtom(car(p3))?(push(car(p3)),factor_small_number()):(push(car(p3)),push(one)),p3=cdr(p3);iscons(p3);)push(car(p3)),push(one),p3=cdr(p3);else push(p2),push(one);for(push(p2),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply(),add(),p3=cdr(p3);return push(one),restore()},dpow=function(){var e,t,r,n,i,s;return e=0,t=0,0,0,i=0,0,n=pop_double(),0===(r=pop_double())&&n<0&&stop("divide by zero"),r>=0||n%1==0?(i=Math.pow(r,n),void push_double(i)):(i=Math.pow(Math.abs(r),n),s=Math.PI*n,n%.5==0?(e=0,t=Math.sin(s)):(e=Math.cos(s),t=Math.sin(s)),push_double(e*i),push_double(t*i),push(imaginaryunit),multiply(),add())},EIG_N=0,EIG_yydd=[],EIG_yyqq=[],Eval_eigen=function(){return 0===EIG_check_arg()&&stop("eigen: argument is not a square matrix"),eigen(EIGEN),p1=usr_symbol("D"),set_binding(p1,p2),p1=usr_symbol("Q"),set_binding(p1,p3),push(symbol(NIL))},Eval_eigenval=function(){return 0===EIG_check_arg()?(push_symbol(EIGENVAL),push(p1),void list(2)):(eigen(EIGENVAL),push(p2))},Eval_eigenvec=function(){return 0===EIG_check_arg()?(push_symbol(EIGENVEC),push(p1),void list(2)):(eigen(EIGENVEC),push(p3))},EIG_check_arg=function(){var e,t,r,n,i,s,o,a,l,u,c;if(e=0,r=0,push(cadr(p1)),Eval(),yyfloat(),Eval(),p1=pop(),!istensor(p1))return 0;for(2===p1.tensor.ndim&&p1.tensor.dim[0]===p1.tensor.dim[1]||stop("eigen: argument is not a square matrix"),e=s=0,o=EIG_N=p1.tensor.dim[0];0<=o?s<o:s>o;e=0<=o?++s:--s)for(r=t=0,a=EIG_N;0<=a?t<a:t>a;r=0<=a?++t:--t)isdouble(p1.tensor.elem[EIG_N*e+r])||stop("eigen: matrix is not numerical");for(e=n=0,l=EIG_N-1;0<=l?n<l:n>l;e=0<=l?++n:--n)for(r=i=u=e+1,c=EIG_N;u<=c?i<c:i>c;r=u<=c?++i:--i)Math.abs(p1.tensor.elem[EIG_N*e+r].d-p1.tensor.elem[EIG_N*r+e].d)>1e-10&&stop("eigen: matrix is not symmetrical");return 1},eigen=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S;for(t=0,n=0,t=l=0,h=EIG_N*EIG_N;0<=h?l<h:l>h;t=0<=h?++l:--l)EIG_yydd[t]=0;for(t=r=0,d=EIG_N*EIG_N;0<=d?r<d:r>d;t=0<=d?++r:--r)EIG_yyqq[t]=0;for(t=i=0,m=EIG_N;0<=m?i<m:i>m;t=0<=m?++i:--i)for(EIG_yydd[EIG_N*t+t]=p1.tensor.elem[EIG_N*t+t].d,n=s=g=t+1,y=EIG_N;g<=y?s<y:s>y;n=g<=y?++s:--s)EIG_yydd[EIG_N*t+n]=p1.tensor.elem[EIG_N*t+n].d,EIG_yydd[EIG_N*n+t]=p1.tensor.elem[EIG_N*t+n].d;for(t=o=0,v=EIG_N;0<=v?o<v:o>v;t=0<=v?++o:--o)for(EIG_yyqq[EIG_N*t+t]=1,n=a=b=t+1,x=EIG_N;b<=x?a<x:a>x;n=b<=x?++a:--a)EIG_yyqq[EIG_N*t+n]=0,EIG_yyqq[EIG_N*n+t]=0;for(t=u=0;u<100&&0!==step();t=++u);if(100===t&&printstr("\nnote: eigen did not converge\n"),e===EIGEN||e===EIGENVAL)for(push(p1),copy_tensor(),p2=pop(),t=c=0,w=EIG_N;0<=w?c<w:c>w;t=0<=w?++c:--c)for(n=p=0,_=EIG_N;0<=_?p<_:p>_;n=0<=_?++p:--p)push_double(EIG_yydd[EIG_N*t+n]),p2.tensor.elem[EIG_N*t+n]=pop();if(e===EIGEN||e===EIGENVEC){for(push(p1),copy_tensor(),p3=pop(),E=[],t=S=0,f=EIG_N;0<=f?S<f:S>f;t=0<=f?++S:--S)E.push(function(){var e,r,i;for(r=[],n=i=0,e=EIG_N;0<=e?i<e:i>e;n=0<=e?++i:--i)push_double(EIG_yyqq[EIG_N*t+n]),r.push(p3.tensor.elem[EIG_N*t+n]=pop());return r}());return E}},step=function(){var e,t,r,n,i,s,o,a;for(t=0,n=0,e=0,t=i=0,s=EIG_N-1;0<=s?i<s:i>s;t=0<=s?++i:--i)for(n=r=o=t+1,a=EIG_N;o<=a?r<a:r>a;n=o<=a?++r:--r)0!==EIG_yydd[EIG_N*t+n]&&(step2(t,n),e++);return e},step2=function(e,t){var r,n,i,s,o,a,l,u,c,p,h,d,f;for(o=0,d=0,0,0,n=0,0,h=0,f=.5*(EIG_yydd[EIG_N*e+e]-EIG_yydd[EIG_N*t+t])/EIG_yydd[EIG_N*e+t],d=1/(Math.abs(f)+Math.sqrt(f*f+1)),f<0&&(d=-d),p=d*(r=1/Math.sqrt(d*d+1)),o=a=0,l=EIG_N;0<=l?a<l:a>l;o=0<=l?++a:--a)n=EIG_yydd[EIG_N*e+o],h=EIG_yydd[EIG_N*t+o],EIG_yydd[EIG_N*e+o]=r*n+p*h,EIG_yydd[EIG_N*t+o]=r*h-p*n;for(o=i=0,u=EIG_N;0<=u?i<u:i>u;o=0<=u?++i:--i)n=EIG_yydd[EIG_N*o+e],h=EIG_yydd[EIG_N*o+t],EIG_yydd[EIG_N*o+e]=r*n+p*h,EIG_yydd[EIG_N*o+t]=r*h-p*n;for(o=s=0,c=EIG_N;0<=c?s<c:s>c;o=0<=c?++s:--s)n=EIG_yyqq[EIG_N*e+o],h=EIG_yyqq[EIG_N*t+o],EIG_yyqq[EIG_N*e+o]=r*n+p*h,EIG_yyqq[EIG_N*t+o]=r*h-p*n;return EIG_yydd[EIG_N*e+t]=0,EIG_yydd[EIG_N*t+e]=0},Eval_erf=function(){return push(cadr(p1)),Eval(),yerf()},yerf=function(){return save(),yyerf(),restore()},yyerf=function(){var e;if(e=0,p1=pop(),isdouble(p1))return e=1-erfc(p1.d),void push_double(e);if(isZeroAtomOrTensor(p1))push(zero);else{if(isnegativeterm(p1))return push_symbol(ERF),push(p1),negate(),list(2),void negate();push_symbol(ERF),push(p1),list(2)}},Eval_erfc=function(){return push(cadr(p1)),Eval(),yerfc()},yerfc=function(){return save(),yyerfc(),restore()},yyerfc=function(){var e;if(e=0,p1=pop(),isdouble(p1))return e=erfc(p1.d),void push_double(e);isZeroAtomOrTensor(p1)?push(one):(push_symbol(ERFC),push(p1),list(2))},erfc=function(e){var t,r,n;return 0===e?1:(0,0,0,t=(r=1/(1+.5*(n=Math.abs(e))))*Math.exp(-n*n-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(r*(.27886807+r*(r*(1.48851587+r*(.17087277*r-.82215223))-1.13520398))-.18628806))))),e>=0?t:2-t)},Eval=function(){var e;switch(check_esc_flag(),save(),p1=pop(),!evaluatingAsFloats&&isfloating(p1)&&(e=!0,evaluatingAsFloats++),p1.k){case CONS:Eval_cons();break;case NUM:evaluatingAsFloats?push_double(convert_rational_to_double(p1)):push(p1);break;case DOUBLE:case STR:push(p1);break;case TENSOR:Eval_tensor();break;case SYM:Eval_sym();break;default:stop("atom?")}return e&&evaluatingAsFloats--,restore()},Eval_sym=function(){var e,t,r,n,i,s;if(iskeyword(p1))return push(p1),push(symbol(LAST)),list(2),void Eval();if(p1===symbol(PI)&&evaluatingAsFloats)push_double(Math.PI);else if(p2=get_binding(p1),DEBUG&&console.log("looked up: "+p1+" which contains: "+p2),push(p2),p1!==p2){if(-1!==(n=chainOfUserSymbolsNotFunctionsBeingEvaluated.indexOf(p1))){for(e="",t=r=i=n,s=chainOfUserSymbolsNotFunctionsBeingEvaluated.length;i<=s?r<s:r>s;t=i<=s?++r:--r)e+=chainOfUserSymbolsNotFunctionsBeingEvaluated[t].printname+" -> ";return e+=p1.printname,void stop("recursive evaluation of symbols: "+e)}return chainOfUserSymbolsNotFunctionsBeingEvaluated.push(p1),Eval(),chainOfUserSymbolsNotFunctionsBeingEvaluated.pop()}},Eval_cons=function(){var e;if(e=car(p1),car(e)!==symbol(EVAL))switch(issymbol(e)||stop("cons?"),symnum(e)){case ABS:return Eval_abs();case ADD:return Eval_add();case ADJ:return Eval_adj();case AND:return Eval_and();case ARCCOS:return Eval_arccos();case ARCCOSH:return Eval_arccosh();case ARCSIN:return Eval_arcsin();case ARCSINH:return Eval_arcsinh();case ARCTAN:return Eval_arctan();case ARCTANH:return Eval_arctanh();case ARG:return Eval_arg();case ATOMIZE:return Eval_atomize();case BESSELJ:return Eval_besselj();case BESSELY:return Eval_bessely();case BINDING:return Eval_binding();case BINOMIAL:return Eval_binomial();case CEILING:return Eval_ceiling();case CHECK:return Eval_check();case CHOOSE:return Eval_choose();case CIRCEXP:return Eval_circexp();case CLEAR:return Eval_clear();case CLEARALL:return Eval_clearall();case CLEARPATTERNS:return Eval_clearpatterns();case CLOCK:return Eval_clock();case COEFF:return Eval_coeff();case COFACTOR:return Eval_cofactor();case CONDENSE:return Eval_condense();case CONJ:return Eval_conj();case CONTRACT:return Eval_contract();case COS:return Eval_cos();case COSH:return Eval_cosh();case DECOMP:return Eval_decomp();case DEGREE:return Eval_degree();case DEFINT:return Eval_defint();case DENOMINATOR:return Eval_denominator();case DERIVATIVE:return Eval_derivative();case DET:return Eval_det();case DIM:return Eval_dim();case DIRAC:return Eval_dirac();case DIVISORS:return Eval_divisors();case DO:return Eval_do();case DOT:return Eval_inner();case DRAW:return Eval_draw();case DSOLVE:return Eval_dsolve();case EIGEN:return Eval_eigen();case EIGENVAL:return Eval_eigenval();case EIGENVEC:return Eval_eigenvec();case ERF:return Eval_erf();case ERFC:return Eval_erfc();case EVAL:return Eval_Eval();case EXP:return Eval_exp();case EXPAND:return Eval_expand();case EXPCOS:return Eval_expcos();case EXPSIN:return Eval_expsin();case FACTOR:return Eval_factor();case FACTORIAL:return Eval_factorial();case FACTORPOLY:return Eval_factorpoly();case FILTER:return Eval_filter();case FLOATF:return Eval_float();case APPROXRATIO:return Eval_approxratio();case FLOOR:return Eval_floor();case FOR:return Eval_for();case FUNCTION:return Eval_function_reference();case GAMMA:return Eval_gamma();case GCD:return Eval_gcd();case HERMITE:return Eval_hermite();case HILBERT:return Eval_hilbert();case IMAG:return Eval_imag();case INDEX:return Eval_index();case INNER:return Eval_inner();case INTEGRAL:return Eval_integral();case INV:return Eval_inv();case INVG:return Eval_invg();case ISINTEGER:return Eval_isinteger();case ISPRIME:return Eval_isprime();case LAGUERRE:return Eval_laguerre();case LCM:return Eval_lcm();case LEADING:return Eval_leading();case LEGENDRE:return Eval_legendre();case LOG:return Eval_log();case LOOKUP:return Eval_lookup();case MOD:return Eval_mod();case MULTIPLY:return Eval_multiply();case NOT:return Eval_not();case NROOTS:return Eval_nroots();case NUMBER:return Eval_number();case NUMERATOR:return Eval_numerator();case OPERATOR:return Eval_operator();case OR:return Eval_or();case OUTER:return Eval_outer();case PATTERN:return Eval_pattern();case PATTERNSINFO:return Eval_patternsinfo();case POLAR:return Eval_polar();case POWER:return Eval_power();case PRIME:return Eval_prime();case PRINT:return Eval_print();case PRINT2DASCII:return Eval_print2dascii();case PRINTFULL:return Eval_printcomputer();case PRINTLATEX:return Eval_printlatex();case PRINTLIST:return Eval_printlist();case PRINTPLAIN:return Eval_printhuman();case PRODUCT:return Eval_product();case QUOTE:return Eval_quote();case QUOTIENT:return Eval_quotient();case RANK:return Eval_rank();case RATIONALIZE:return Eval_rationalize();case REAL:return Eval_real();case ROUND:return Eval_round();case YYRECT:return Eval_rect();case ROOTS:return Eval_roots();case SETQ:return Eval_setq();case SGN:return Eval_sgn();case SILENTPATTERN:return Eval_silentpattern();case SIMPLIFY:return Eval_simplify();case SIN:return Eval_sin();case SINH:return Eval_sinh();case SHAPE:return Eval_shape();case SQRT:return Eval_sqrt();case STOP:return Eval_stop();case SUBST:return Eval_subst();case SUM:return Eval_sum();case SYMBOLSINFO:return Eval_symbolsinfo();case TAN:return Eval_tan();case TANH:return Eval_tanh();case TAYLOR:return Eval_taylor();case TEST:return Eval_test();case TESTEQ:return Eval_testeq();case TESTGE:return Eval_testge();case TESTGT:return Eval_testgt();case TESTLE:return Eval_testle();case TESTLT:return Eval_testlt();case TRANSPOSE:return Eval_transpose();case UNIT:return Eval_unit();case ZERO:return Eval_zero();default:return Eval_user_function()}else Eval_user_function()},Eval_binding=function(){return push(get_binding(cadr(p1)))},Eval_check=function(){var e;return null==(e=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)))?push(p1):push_integer(e)},Eval_det=function(){return push(cadr(p1)),Eval(),det()},Eval_dim=function(){var e;return push(cadr(p1)),Eval(),p2=pop(),iscons(cddr(p1))?(push(caddr(p1)),Eval(),e=pop_integer()):e=1,istensor(p2)?e<1||e>p2.tensor.ndim?push(p1):push_integer(p2.tensor.dim[e-1]):push_integer(1)},Eval_divisors=function(){return push(cadr(p1)),Eval(),divisors()},Eval_do=function(){var e;for(push(car(p1)),p1=cdr(p1),e=[];iscons(p1);)pop(),push(car(p1)),Eval(),e.push(p1=cdr(p1));return e},Eval_dsolve=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),dsolve()},Eval_Eval=function(){for(push(cadr(p1)),Eval(),p1=cddr(p1);iscons(p1);)push(car(p1)),Eval(),push(cadr(p1)),Eval(),subst(),p1=cddr(p1);return Eval()},Eval_exp=function(){return push(cadr(p1)),Eval(),exponential()},Eval_factorial=function(){return push(cadr(p1)),Eval(),factorial()},Eval_factorpoly=function(){var e;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),factorpoly(),p1=cdr(p1),e=[];iscons(p1);)push(car(p1)),Eval(),factorpoly(),e.push(p1=cdr(p1));return e},Eval_hermite=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),hermite()},Eval_hilbert=function(){return push(cadr(p1)),Eval(),hilbert()},Eval_index=function(){var e,t,r;if(e=tos,t=p1,p1=cdr(p1),push(car(p1)),Eval(),r=stack[tos-1],isNumericAtom(r)&&stop("trying to access a scalar as a tensor"),!istensor(r))return moveTos(e),void push(t);for(p1=cdr(p1);iscons(p1);){if(push(car(p1)),Eval(),!isintegerorintegerfloat(stack[tos-1]))return moveTos(e),void push(t);p1=cdr(p1)}return index_function(tos-e)},Eval_inv=function(){return push(cadr(p1)),Eval(),inv()},Eval_invg=function(){return push(cadr(p1)),Eval(),invg()},Eval_isinteger=function(){if(push(cadr(p1)),Eval(),p1=pop(),isrational(p1))isinteger(p1)?push(one):push(zero);else{if(!isdouble(p1))return push_symbol(ISINTEGER),push(p1),list(2);Math.floor(p1.d)===p1.d?push(one):push(zero)}},Eval_number=function(){return push(cadr(p1)),Eval(),(p1=pop()).k===NUM||p1.k===DOUBLE?push_integer(1):push_integer(0)},Eval_operator=function(){var e;for(e=tos,push_symbol(OPERATOR),p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);return list(tos-e)},Eval_quote=function(){return push(cadr(p1))},Eval_rank=function(){return push(cadr(p1)),Eval(),p1=pop(),istensor(p1)?push_integer(p1.tensor.ndim):push(zero)},Eval_setq=function(){if(caadr(p1)!==symbol(INDEX)){if(!iscons(cadr(p1)))return issymbol(cadr(p1))||stop("symbol assignment: error in symbol"),push(caddr(p1)),Eval(),p2=pop(),set_binding(cadr(p1),p2),push(symbol(NIL));define_user_function()}else setq_indexed()},setq_indexed=function(){var e;for(p4=cadadr(p1),issymbol(p4)||stop("indexed assignment: expected a symbol name"),e=tos,push(caddr(p1)),Eval(),p2=cdadr(p1);iscons(p2);)push(car(p2)),Eval(),p2=cdr(p2);return set_component(tos-e),p3=pop(),set_binding(p4,p3),push(symbol(NIL))},Eval_sqrt=function(){return push(cadr(p1)),Eval(),push_rational(1,2),power()},Eval_stop=function(){return stop("user stop")},Eval_subst=function(){return push(cadddr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadr(p1)),Eval(),subst(),Eval()},Eval_unit=function(){var e,t,r,n;if(e=0,0,push(cadr(p1)),Eval(),t=pop_integer(),isNaN(t))push(p1);else{if(!(t<1)){for((p1=alloc_tensor(t*t)).tensor.ndim=2,p1.tensor.dim[0]=t,p1.tensor.dim[1]=t,e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)p1.tensor.elem[t*e+e]=one;return check_tensor_dimensions(p1),push(p1)}push(p1)}},Eval_noexpand=function(){var e;return e=expanding,expanding=0,Eval(),expanding=e},Eval_predicate=function(){return save(),p1=top(),car(p1)===symbol(SETQ)&&(pop(),push_symbol(TESTEQ),push(cadr(p1)),push(caddr(p1)),list(3)),Eval(),restore()},Eval_expand=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),expand()},expand=function(){var e;if(save(),p9=pop(),p5=pop(),istensor(p5))return expand_tensor(),void restore();if(car(p5)!==symbol(ADD))return push(p5),numerator(),p3=pop(),push(p5),denominator(),p2=pop(),remove_negative_exponents(),push(p3),push(p2),push(p9),!isone(p3)&&!isone(p2)||ispolyexpandedform(p2,p9)&&!isone(p2)?(divpoly(),p7=pop(),push(p3),push(p2),push(p7),multiply(),subtract(),p3=pop(),isZeroAtomOrTensor(p3)?(push(p7),void restore()):(push(p2),push(p9),factorpoly(),p2=pop(),expand_get_C(),expand_get_B(),expand_get_A(),istensor(p4)?(push(p4),e=expanding,expanding=1,inv(),expanding=e,push(p3),inner(),push(p2),inner()):(push(p3),push(p4),e=expanding,expanding=1,divide(),expanding=e,push(p2),multiply()),push(p7),add(),restore())):(pop(),pop(),pop(),push(p5),void restore());for(push_integer(0),p1=cdr(p5);iscons(p1);)push(car(p1)),push(p9),expand(),add(),p1=cdr(p1);restore()},expand_tensor=function(){var e,t,r;for(e=0,push(p5),copy_tensor(),e=t=0,r=(p5=pop()).tensor.nelem;0<=r?t<r:t>r;e=0<=r?++t:--t)push(p5.tensor.elem[e]),push(p9),expand(),p5.tensor.elem[e]=pop();return push(p5)},remove_negative_exponents=function(){var e,t,r,n,i,s;for(0,t=0,r=0,n=0,0,e=tos,factors(p2),factors(p3),r=0,t=i=0,s=tos-e;0<=s?i<s:i>s;t=0<=s?++i:--i)p1=stack[e+t],car(p1)===symbol(POWER)&&cadr(p1)===p9&&(push(caddr(p1)),n=pop_integer(),isNaN(n)||n<r&&(r=n));if(moveTos(e),0!==r)return push(p2),push(p9),push_integer(-r),power(),multiply(),p2=pop(),push(p3),push(p9),push_integer(-r),power(),multiply(),p3=pop()},expand_get_C=function(){var e,t,r,n,i,s,o,a,l,u;if(0,r=0,i=0,0,t=tos,car(p2)===symbol(MULTIPLY))for(p1=cdr(p2);iscons(p1);)p5=car(p1),expand_get_CF(),p1=cdr(p1);else p5=p2,expand_get_CF();if(1!==(s=tos-t)){for((p4=alloc_tensor(s*s)).tensor.ndim=2,p4.tensor.dim[0]=s,p4.tensor.dim[1]=s,e=t,r=o=0,l=s;0<=l?o<l:o>l;r=0<=l?++o:--o)for(i=n=0,u=s;0<=u?n<u:n>u;i=0<=u?++n:--n)push(stack[e+i]),push(p9),push_integer(r),power(),a=expanding,expanding=1,divide(),expanding=a,push(p9),filter(),p4.tensor.elem[s*r+i]=pop();return moveTos(tos-s)}p4=pop()},expand_get_CF=function(){var e,t,r,n,i,s,o,a;if(0,t=0,r=0,n=0,Find(p5,p9)){for(s=expanding,expanding=1,trivial_divide(),expanding=s,car(p5)===symbol(POWER)?(push(caddr(p5)),n=pop_integer(),p6=cadr(p5)):(n=1,p6=p5),push(p6),push(p9),degree(),e=pop_integer(),a=[],t=i=0,o=n;0<=o?i<o:i>o;t=0<=o?++i:--i)a.push(function(){var n,i,o;for(o=[],r=n=0,i=e;0<=i?n<i:n>i;r=0<=i?++n:--n)push(p8),push(p6),push_integer(t),power(),s=expanding,expanding=1,multiply(),expanding=s,push(p9),push_integer(r),power(),s=expanding,expanding=1,multiply(),o.push(expanding=s);return o}());return a}},trivial_divide=function(){var e;if(e=0,car(p2)===symbol(MULTIPLY)){for(e=tos,p0=cdr(p2);iscons(p0);)equal(car(p0),p5)||(push(car(p0)),Eval()),p0=cdr(p0);multiply_all(tos-e)}else push_integer(1);return p8=pop()},expand_get_B=function(){var e,t,r,n,i;if(e=0,0,istensor(p4)){for(t=p4.tensor.dim[0],(p8=alloc_tensor(t)).tensor.ndim=1,p8.tensor.dim[0]=t,e=r=0,i=t;0<=i?r<i:r>i;e=0<=i?++r:--r)push(p3),push(p9),push_integer(e),power(),n=expanding,expanding=1,divide(),expanding=n,push(p9),filter(),p8.tensor.elem[e]=pop();return p3=p8}},expand_get_A=function(){var e,t,r,n,i;if(0,t=0,0,!istensor(p4))return push(p2),reciprocate(),void(p2=pop());if(e=tos,car(p2)===symbol(MULTIPLY))for(p8=cdr(p2);iscons(p8);)p5=car(p8),expand_get_AF(),p8=cdr(p8);else p5=p2,expand_get_AF();for((p8=alloc_tensor(r=tos-e)).tensor.ndim=1,p8.tensor.dim[0]=r,t=n=0,i=r;0<=i?n<i:n>i;t=0<=i?++n:--n)p8.tensor.elem[t]=stack[e+t];return moveTos(e),p2=p8},expand_get_AF=function(){var e,t,r,n,i,s,o;if(0,t=0,r=0,n=1,Find(p5,p9)){for(car(p5)===symbol(POWER)&&(push(caddr(p5)),n=pop_integer(),p5=cadr(p5)),push(p5),push(p9),degree(),e=pop_integer(),o=[],t=i=s=n;s<=0?i<0:i>0;t=s<=0?++i:--i)o.push(function(){var n,i,s;for(s=[],r=n=0,i=e;0<=i?n<i:n>i;r=0<=i?++n:--n)push(p5),push_integer(t),power(),reciprocate(),push(p9),push_integer(r),power(),s.push(multiply());return s}());return o}},Eval_expcos=function(){return push(cadr(p1)),Eval(),expcos()},expcos=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),add(),restore()},Eval_expsin=function(){return push(cadr(p1)),Eval(),expsin()},expsin=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),subtract(),restore()},Eval_factor=function(){var e;for(push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),factor(),p1=cdddr(p1),e=[];iscons(p1);)push(car(p1)),Eval(),factor_again(),e.push(p1=cdr(p1));return e},factor_again=function(){var e,t;if(save(),p2=pop(),p1=pop(),e=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),factor_term(),p1=cdr(p1);else push(p1),push(p2),factor_term();return(t=tos-e)>1&&multiply_all_noexpand(t),restore()},factor_term=function(){if(save(),factorpoly(),p1=pop(),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return restore()},factor=function(){return save(),p2=pop(),p1=pop(),isinteger(p1)?(push(p1),factor_number()):(push(p1),push(p2),factorpoly()),restore()},factor_small_number=function(){var e,t,r,n,i,s;for(r=0,save(),n=pop_integer(),isNaN(n)&&stop("number too big to factor"),n<0&&(n=-n),r=i=0,s=MAXPRIMETAB;(0<=s?i<s:i>s)&&!((e=primetab[r])>n/e);r=0<=s?++i:--i){for(t=0;n%e==0;)n/=e,t++;t&&(push_integer(e),push_integer(t))}return n>1&&(push_integer(n),push_integer(1)),restore()},factorial=function(){var e;return 0,save(),p1=pop(),push(p1),(e=pop_integer())<0||isNaN(e)?(push_symbol(FACTORIAL),push(p1),list(2),void restore()):(bignum_factorial(e),restore())},simplifyfactorials=function(){var e;if(0,save(),e=expanding,expanding=0,p1=pop(),car(p1)===symbol(ADD)){for(push(zero),p1=cdr(p1);iscons(p1);)push(car(p1)),simplifyfactorials(),add(),p1=cdr(p1);return expanding=e,void restore()}return car(p1)===symbol(MULTIPLY)?(sfac_product(),expanding=e,void restore()):(push(p1),expanding=e,restore())},sfac_product=function(){var e,t,r,n,i,s,o,a,l,u,c;for(e=0,r=0,i=0,c=tos,p1=cdr(p1),i=0;iscons(p1);)push(car(p1)),p1=cdr(p1),i++;for(e=s=0,o=i-1;0<=o?s<o:s>o;e=0<=o?++s:--s)if(stack[c+e]!==symbol(NIL))for(r=t=a=e+1,l=i;a<=l?t<l:t>l;r=a<=l?++t:--t)stack[c+r]!==symbol(NIL)&&sfac_product_f(c,e,r);for(push(one),e=n=0,u=i;0<=u?n<u:n>u;e=0<=u?++n:--n)stack[c+e]!==symbol(NIL)&&(push(stack[c+e]),multiply());return p1=pop(),moveTos(tos-i),push(p1)},sfac_product_f=function(e,t,r){var n,i,s,o;if(n=0,i=0,p1=stack[e+t],p2=stack[e+r],ispower(p1)?(p3=caddr(p1),p1=cadr(p1)):p3=one,ispower(p2)?(p4=caddr(p2),p2=cadr(p2)):p4=one,isfactorial(p1)&&isfactorial(p2)){if(push(p3),push(p4),add(),yyexpand(),0!==(i=pop_integer()))return;if(push(cadr(p1)),push(cadr(p2)),subtract(),yyexpand(),0===(i=pop_integer())||isNaN(i))return;for(i<0&&(i=-i,p5=p1,p1=p2,p2=p5,p5=p3,p3=p4,p4=p5),push(one),n=s=1,o=i;1<=o?s<=o:s>=o;n=1<=o?++s:--s)push(cadr(p2)),push_integer(n),add(),push(p3),power(),multiply();return stack[e+t]=pop(),stack[e+r]=symbol(NIL)}},factorpoly=function(){var e,t;return DEBUG&&console.log("factorpoly: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),t=pop(),e=pop(),Find(e,t)&&ispolyexpandedform(e,t)&&issymbol(t)?yyfactorpoly(t,e):push(e),restore()},yyfactorpoly=function(e,t){var r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A,N,k,M;for(DEBUG&&(l=e,k=t,console.log("yyfactorpoly: "+l+" "+k)),save(),p=tos,isfloating(t)&&stop("floating point numbers in polynomial"),v=tos,a=coeff(e,t)-1,DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" factpoly_expo before rationalize_coefficients: "+a),y=rationalize_coefficients(p),DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" factpoly_expo  after rationalize_coefficients: "+a),M="real",A=null;a>0;)if(DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" factpoly_expo inside while loop: "+a),isZeroAtomOrTensor(stack[v+0])?(DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" isZeroAtomOrTensor"),r=one,i=zero):"real"===M?[c,r,i]=get_factor_from_real_root(e,a,v):"complex"===M&&([u,r]=get_factor_from_complex_root(A,a,v)),"real"===M){if(0===c){M="complex";continue}for(push(r),push(e),multiply(),push(i),add(),n=pop(),DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" success\nFACTOR="+n),push(y),push(n),multiply_noexpand(),y=pop(),yydivpoly(a,v,r,i);a&&isZeroAtomOrTensor(stack[v+a]);)a--;for(push(zero),h=g=0,w=a;0<=w?g<=w:g>=w;h=0<=w?++g:--g)push(stack[v+h]),push(e),push_integer(h),power(),multiply(),add();A=pop()}else if("complex"===M){if(0===u)break;if(push(r),push(e),subtract(),push(r),conjugate(),push(e),subtract(),multiply(),N=pop(),DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" success\nFACTOR="+N),push(y),x=pop(),push(y),push(N),multiply_noexpand(),y=pop(),null==A){for(push(zero),h=d=0,_=a;0<=_?d<=_:d>=_;h=0<=_?++d:--d)push(stack[v+h]),push(e),push_integer(h),power(),multiply(),add();A=pop()}if(push(o=A),push(N),push(e),divpoly(),A=pop(),push(A),push(N),multiply(),s=pop(),!equal(s,o))return DEBUG&&console.log("we found a polynomial based on complex root and its conj but it doesn't divide the poly, quitting"),DEBUG&&console.log("so just returning previousFactorisation times dividend: "+x+" * "+o),push(x),push(o),b=expanding,expanding=0,yycondense(),expanding=b,multiply_noexpand(),y=pop(),stack[p]=y,moveTos(p+1),void restore();for(h=f=0,E=a;0<=E?f<=E:f>=E;h=0<=E?++f:--f)pop();coeff(e,A),a-=2}for(DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" building the remaining unfactored part of the polynomial"),push(zero),h=m=0,S=a;0<=S?m<=S:m>=S;h=0<=S?++m:--m)push(stack[v+h]),push(e),push_integer(h),power(),multiply(),add();return t=pop(),DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" remaining unfactored part of the polynomial: "+t.toString()),push(t),b=expanding,expanding=0,yycondense(),expanding=b,t=pop(),DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" new poly with extracted common factor: "+t.toString()),a>0&&isnegativeterm(stack[v+a])&&(push(t),negate(),t=pop(),push(y),negate_noexpand(),y=pop()),push(y),push(t),multiply_noexpand(),y=pop(),DEBUG&&console.log("yyfactorpoly: "+l+" "+k+" result: "+y),stack[p]=y,moveTos(p+1),restore()},rationalize_coefficients=function(e){var t,r,n,i,s,o,a,l,u;for(i=one,t=n=o=e,a=tos;o<=a?n<a:n>a;t=o<=a?++n:--n)push(stack[t]),denominator(),push(i),lcm(),i=pop();for(t=r=l=e,u=tos;l<=u?r<u:r>u;t=l<=u?++r:--r)push(i),push(stack[t]),multiply(),stack[t]=pop();return push(i),reciprocate(),s=pop(),DEBUG&&console.log("rationalize_coefficients result: "+s.toString()),s},get_factor_from_real_root=function(e,t,r){var n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A;if(DEBUG&&console.log("get_factor_from_real_root"),a=0,0,0,0,0,0,0,DEBUG){for(push(zero),a=f=0,g=t;0<=g?f<=g:f>=g;a=0<=g?++f:--f)push(stack[r+a]),push(e),push_integer(a),power(),multiply(),add();m=pop(),console.log("POLY="+m)}if(o=tos,i=tos,push(stack[r+t]),divisors_onstack(),d=tos-i,n=tos,push(stack[r+0]),divisors_onstack(),h=tos-n,DEBUG){for(console.log("divisors of base term"),a=l=0,y=h;0<=y?l<y:l>y;a=0<=y?++l:--l)console.log(", "+stack[n+a]);for(console.log("divisors of leading term"),a=u=0,v=d;0<=v?u<v:u>v;a=0<=v?++u:--u)console.log(", "+stack[i+a])}for(w=c=0,b=d;0<=b?c<b:c>b;w=0<=b?++c:--c)for(_=p=0,x=h;0<=x?p<x:p>x;_=0<=x?++p:--p){if(S=stack[i+w],E=stack[n+_],push(E),push(S),divide(),negate(),A=pop(),s=Evalpoly(t,r,A),DEBUG&&(console.log("try A="+S),console.log(", B="+E),console.log(", root "+e),console.log("=-B/A="+A),console.log(", POLY("+A),console.log(")="+s)),isZeroAtomOrTensor(s))return moveTos(o),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,S,E];if(push(E),negate(),E=pop(),push(A),negate(),A=pop(),s=Evalpoly(t,r,A),DEBUG&&(console.log("try A="+S),console.log(", B="+E),console.log(", root "+e),console.log("=-B/A="+A),console.log(", POLY("+A),console.log(")="+s)),isZeroAtomOrTensor(s))return moveTos(o),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,S,E]}return moveTos(o),DEBUG&&console.log("get_factor_from_real_root returning"),[0,null,null]},get_factor_from_complex_root=function(e,t,r){var n,i,s,o,a,l,u;if(0,0,0,0,0,0,0,t<=2)return DEBUG&&console.log("no more factoring via complex roots to be found in polynomial of degree <= 2"),[0,null];if(DEBUG&&console.log("complex root finding for POLY="+e),i=tos,tos,push_integer(-1),push_rational(2,3),power(),rect(),u=pop(),DEBUG&&console.log("complex root finding: trying with "+u),push(u),n=Evalpoly(t,r,u),DEBUG&&console.log("complex root finding result: "+n),isZeroAtomOrTensor(n))return moveTos(i),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,u];if(push_integer(1),push_rational(2,3),power(),rect(),u=pop(),DEBUG&&console.log("complex root finding: trying with "+u),push(u),n=Evalpoly(t,r,u),DEBUG&&console.log("complex root finding result: "+n),isZeroAtomOrTensor(n))return moveTos(i),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,u];for(a=o=-10;o<=10;a=++o)for(l=s=1;s<=5;l=++s)if(push_integer(a),push_integer(l),push(imaginaryunit),multiply(),add(),rect(),u=pop(),DEBUG&&console.log("complex root finding: trying simple complex combination "+u),push(u),n=Evalpoly(t,r,u),isZeroAtomOrTensor(n))return moveTos(i),DEBUG&&console.log("found complex root: "+n),[1,u];return moveTos(i),DEBUG&&console.log("get_factor_from_complex_root returning 0"),[0,null]},yydivpoly=function(e,t,r,n){var i,s,o,a;for(i=zero,s=o=a=e;a<=0?o<0:o>0;s=a<=0?++o:--o)push(stack[t+s]),stack[t+s]=i,push(r),divide(),i=pop(),push(stack[t+s-1]),push(i),push(n),multiply(),subtract(),stack[t+s-1]=pop();if(stack[t+0]=i,DEBUG)return console.log("yydivpoly Q: "+i.toString())},Evalpoly=function(e,t,r){var n,i,s;for(push(zero),n=i=s=e;s<=0?i<=0:i>=0;n=s<=0?++i:--i)push(r),multiply(),push(stack[t+n]),add();return pop()},factors=function(e){var t;if(t=tos,car(e)===symbol(ADD))for(e=cdr(e);iscons(e);)push_term_factors(car(e)),e=cdr(e);else push_term_factors(e);return tos-t},push_term_factors=function(e){var t;if(car(e)===symbol(MULTIPLY)){for(e=cdr(e),t=[];iscons(e);)push(car(e)),t.push(e=cdr(e));return t}return push(e)},Eval_filter=function(){var e;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),e=[];iscons(p1);)push(car(p1)),Eval(),filter(),e.push(p1=cdr(p1));return e},filter=function(){return save(),p2=pop(),p1=pop(),filter_main(),restore()},filter_main=function(){return car(p1)===symbol(ADD)?filter_sum():istensor(p1)?filter_tensor():Find(p1,p2)?push_integer(0):push(p1)},filter_sum=function(){var e;for(push_integer(0),p1=cdr(p1),e=[];iscons(p1);)push(car(p1)),push(p2),filter(),add(),e.push(p1=cdr(p1));return e},filter_tensor=function(){var e,t,r,n,i,s;for(e=0,0,r=p1.tensor.nelem,(p3=alloc_tensor(r)).tensor.ndim=p1.tensor.ndim,e=n=0,i=p1.tensor.ndim;0<=i?n<i:n>i;e=0<=i?++n:--n)p3.tensor.dim[e]=p1.tensor.dim[e];for(e=t=0,s=r;0<=s?t<s:t>s;e=0<=s?++t:--t)push(p1.tensor.elem[e]),push(p2),filter(),p3.tensor.elem[e]=pop();return push(p3)},Eval_float=function(){return evaluatingAsFloats++,push(cadr(p1)),Eval(),yyfloat(),Eval(),evaluatingAsFloats--},checkFloatHasWorkedOutCompletely=function(e){var t,r,n,i,s;if(i=countOccurrencesOfSymbol(symbol(POWER),e),n=countOccurrencesOfSymbol(symbol(PI),e),t=countOccurrencesOfSymbol(symbol(E),e),r=countOccurrencesOfSymbol(symbol(MULTIPLY),e),s=countOccurrencesOfSymbol(symbol(ADD),e),DEBUG&&(console.log("     ... numberOfPowers: "+i),console.log("     ... numberOfPIs: "+n),console.log("     ... numberOfEs: "+t),console.log("     ... numberOfMults: "+r),console.log("     ... numberOfSums: "+s)),i>1||n>0||t>0||r>1||s>1)return stop("float: some unevalued parts in "+e)},zzfloat=function(){return save(),evaluatingAsFloats++,Eval(),yyfloat(),Eval(),evaluatingAsFloats--,restore()},yyfloat=function(){var e,t,r,n;if(t=0,e=0,evaluatingAsFloats++,save(),p1=pop(),iscons(p1)){for(e=tos;iscons(p1);)push(car(p1)),yyfloat(),p1=cdr(p1);list(tos-e)}else if(p1.k===TENSOR){for(push(p1),copy_tensor(),t=r=0,n=(p1=pop()).tensor.nelem;0<=n?r<n:r>n;t=0<=n?++r:--r)push(p1.tensor.elem[t]),yyfloat(),p1.tensor.elem[t]=pop();push(p1)}else p1.k===NUM?(push(p1),bignum_float()):p1===symbol(PI)?push_double(Math.PI):p1===symbol(E)?push_double(Math.E):push(p1);return restore(),evaluatingAsFloats--},Eval_floor=function(){return push(cadr(p1)),Eval(),yfloor()},yfloor=function(){return save(),yyfloor(),restore()},yyfloor=function(){var e;return e=0,p1=pop(),isNumericAtom(p1)?isdouble(p1)?(e=Math.floor(p1.d),void push_double(e)):isinteger(p1)?void push(p1):((p3=new U).k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?(push_integer(-1),add()):void 0):(push_symbol(FLOOR),push(p1),void list(2))},Eval_for=function(){var e,t,r,n,i,s,o;if(e=0,0,0,n=caddr(p1),issymbol(n)||stop("for: 2nd arg should be the variable to loop over"),push(cadddr(p1)),Eval(),t=pop_integer(),isNaN(t))push(p1);else{if(push(caddddr(p1)),Eval(),r=pop_integer(),!isNaN(r)){for(p4=get_binding(n),e=i=s=t,o=r;s<=o?i<=o:i>=o;e=s<=o?++i:--i)push_integer(e),p5=pop(),set_binding(n,p5),push(cadr(p1)),Eval(),pop();return set_binding(n,p4),push_symbol(NIL)}push(p1)}},Eval_gamma=function(){return push(cadr(p1)),Eval(),gamma()},gamma=function(){return save(),gammaf(),restore()},gammaf=function(){return p1=pop(),isrational(p1)&&MEQUAL(p1.q.a,1)&&MEQUAL(p1.q.b,2)?(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),void power()):isrational(p1)&&MEQUAL(p1.q.a,3)&&MEQUAL(p1.q.b,2)?(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power(),push_rational(1,2),void multiply()):isnegativeterm(p1)?(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_integer(-1),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push(p1),multiply(),sine(),push(p1),multiply(),push(p1),negate(),gamma(),multiply(),void divide()):void(car(p1)!==symbol(ADD)?(push_symbol(GAMMA),push(p1),list(2)):gamma_of_sum())},gamma_of_sum=function(){return p3=cdr(p1),isrational(car(p3))&&MEQUAL(car(p3).q.a,1)&&MEQUAL(car(p3).q.b,1)?(push(cadr(p3)),push(cadr(p3)),gamma(),multiply()):isrational(car(p3))&&MEQUAL(car(p3).q.a,-1)&&MEQUAL(car(p3).q.b,1)?(push(cadr(p3)),gamma(),push(cadr(p3)),push_integer(-1),add(),divide()):(push_symbol(GAMMA),push(p1),void list(2))},Eval_gcd=function(){var e;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),e=[];iscons(p1);)push(car(p1)),Eval(),gcd(),e.push(p1=cdr(p1));return e},gcd=function(){var e;return e=expanding,save(),gcd_main(),restore(),expanding=e},gcd_main=function(){var e;if(expanding=1,p2=pop(),p1=pop(),DEBUG&&console.log("gcd_main: p1: "+p1+" p2: "+p2),equal(p1,p2))push(p1);else{if(isrational(p1)&&isrational(p2))return push(p1),push(p2),void gcd_numbers();if(e=areunivarpolysfactoredorexpandedform(p1,p2))gcd_polys(e);else if(car(p1)!==symbol(ADD)||car(p2)!==symbol(ADD))if(car(p1)===symbol(ADD)&&(gcd_sum(p1),p1=pop()),car(p2)===symbol(ADD)&&(gcd_sum(p2),p2=pop()),car(p1)!==symbol(MULTIPLY))if(car(p2)!==symbol(MULTIPLY)){if(car(p1)!==symbol(MULTIPLY)||car(p2)!==symbol(MULTIPLY))return gcd_powers_with_same_base();gcd_product_product()}else gcd_product_sum();else gcd_sum_product();else gcd_sum_sum()}},areunivarpolysfactoredorexpandedform=function(e,t){var r;return DEBUG&&console.log("areunivarpolysfactoredorexpandedform: p1: "+e+" p2: "+t),!(!(r=isunivarpolyfactoredorexpandedform(e))||!isunivarpolyfactoredorexpandedform(t,r))&&r},gcd_polys=function(e){if(DEBUG&&console.log("gcd_polys: p1: "+p1+" polyVar: "+e),push(p1),push(e),factorpoly(),p1=pop(),push(p2),push(e),factorpoly(),p2=pop(),DEBUG&&console.log("GCD: factored polys:"),DEBUG&&console.log("  p1:"+p1.toString()),DEBUG&&console.log("  p2:"+p2.toString()),car(p1)!==symbol(MULTIPLY)&&car(p2)!==symbol(MULTIPLY)||(car(p1)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p1),push(one),list(3),p1=pop()),car(p2)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p2),push(one),list(3),p2=pop())),car(p1)!==symbol(MULTIPLY)||car(p2)!==symbol(MULTIPLY))return gcd_powers_with_same_base(),!0;gcd_product_product()},gcd_product_product=function(){var e;for(push(one),p3=cdr(p1),e=[];iscons(p3);){for(p4=cdr(p2);iscons(p4);)push(car(p3)),push(car(p4)),gcd(),multiply(),p4=cdr(p4);e.push(p3=cdr(p3))}return e},gcd_powers_with_same_base=function(){if(car(p1)===symbol(POWER)?(p3=caddr(p1),p1=cadr(p1)):p3=one,car(p2)===symbol(POWER)?(p4=caddr(p2),p2=cadr(p2)):p4=one,equal(p1,p2)){if(isNumericAtom(p3)&&isNumericAtom(p4))return push(p1),lessp(p3,p4)?push(p3):push(p4),void power();if(push(p3),push(p4),divide(),p5=pop(),isNumericAtom(p5))return push(p1),p5=car(p3)===symbol(MULTIPLY)&&isNumericAtom(cadr(p3))?cadr(p3):one,p6=car(p4)===symbol(MULTIPLY)&&isNumericAtom(cadr(p4))?cadr(p4):one,lessp(p5,p6)?push(p3):push(p4),void power();if(push(p3),push(p4),subtract(),p5=pop(),isNumericAtom(p5))return push(p1),isnegativenumber(p5)?push(p3):push(p4),power();push(one)}else push(one)},gcd_sum_sum=function(){if(length(p1)===length(p2)){for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);for(p3=pop(),p4=cdr(p2),push(car(p4)),p4=cdr(p4);iscons(p4);)push(car(p4)),gcd(),p4=cdr(p4);return p4=pop(),push(p1),push(p3),divide(),p5=pop(),push(p2),push(p4),divide(),p6=pop(),equal(p5,p6)?(push(p5),push(p3),push(p4),gcd(),multiply()):push(one)}push(one)},gcd_sum=function(e){var t;for(e=cdr(e),push(car(e)),e=cdr(e),t=[];iscons(e);)push(car(e)),gcd(),t.push(e=cdr(e));return t},gcd_sum_product=function(){var e;for(push(one),p3=cdr(p1),e=[];iscons(p3);)push(car(p3)),push(p2),gcd(),multiply(),e.push(p3=cdr(p3));return e},gcd_product_sum=function(){var e;for(push(one),p4=cdr(p2),e=[];iscons(p4);)push(p1),push(car(p4)),gcd(),multiply(),e.push(p4=cdr(p4));return e},guess=function(){var e;return e=pop(),push(e),Find(e,symbol(SYMBOL_X))?push_symbol(SYMBOL_X):Find(e,symbol(SYMBOL_Y))?push_symbol(SYMBOL_Y):Find(e,symbol(SYMBOL_Z))?push_symbol(SYMBOL_Z):Find(e,symbol(SYMBOL_T))?push_symbol(SYMBOL_T):Find(e,symbol(SYMBOL_S))?push_symbol(SYMBOL_S):push_symbol(SYMBOL_X)},hermite=function(){return save(),yyhermite(),restore()},yyhermite=function(){var e;return 0,p2=pop(),p1=pop(),push(p2),(e=pop_integer())<0||isNaN(e)?(push_symbol(HERMITE),push(p1),push(p2),void list(3)):issymbol(p1)?yyhermite2(e):(p3=p1,p1=symbol(SECRETX),yyhermite2(e),p1=p3,push(symbol(SECRETX)),push(p1),subst(),Eval())},yyhermite2=function(e){var t,r,n,i;for(t=0,push_integer(1),push_integer(0),p4=pop(),i=[],t=r=0,n=e;0<=n?r<n:r>n;t=0<=n?++r:--r)p5=p4,p4=pop(),push(p1),push(p4),multiply(),push_integer(t),push(p5),multiply(),subtract(),push_integer(2),i.push(multiply());return i},hilbert=function(){var e,t,r,n,i,s,o;if(e=0,r=0,0,save(),p2=pop(),push(p2),(n=pop_integer())<2)return push_symbol(HILBERT),push(p2),list(2),void restore();for(push_zero_matrix(n,n),p1=pop(),e=i=0,s=n;0<=s?i<s:i>s;e=0<=s?++i:--i)for(r=t=0,o=n;0<=o?t<o:t>o;r=0<=o?++t:--t)push_integer(e+r+1),inverse(),p1.tensor.elem[e*n+r]=pop();return push(p1),restore()},DEBUG_IMAG=!1,Eval_imag=function(){return push(cadr(p1)),Eval(),imag()},imag=function(){return save(),rect(),p1=pop(),DEBUG_IMAG&&console.log("IMAGE of "+p1),push(p1),push(p1),conjugate(),DEBUG_IMAG&&console.log(" image: conjugate result: "+stack[tos-1]),subtract(),push_integer(2),divide(),DEBUG_IMAG&&console.log(" image: 1st divide result: "+stack[tos-1]),push(imaginaryunit),divide(),DEBUG_IMAG&&console.log(" image: 2nd divide result: "+stack[tos-1]),restore()},index_function=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x;for(t=0,i=0,0,0,u=0,x=0,save(),(o=e-1)>(l=(p1=stack[b=tos-e]).tensor.ndim)&&stop("too many indices for tensor"),i=0,t=c=0,p=o;0<=p?c<p:c>p;t=0<=p?++c:--c)push(stack[b+t+1]),((x=pop_integer())<1||x>p1.tensor.dim[t])&&stop("index out of range"),i=i*p1.tensor.dim[t]+x-1;if(l===o)return moveTos(tos-e),push(p1.tensor.elem[i]),void restore();for(t=r=h=o,d=l;h<=d?r<d:r>d;t=h<=d?++r:--r)i=i*p1.tensor.dim[t]+0;for(u=1,t=n=f=o,m=l;f<=m?n<m:n>m;t=f<=m?++n:--n)u*=p1.tensor.dim[t];for((p2=alloc_tensor(u)).tensor.ndim=l-o,t=s=g=o,y=l;g<=y?s<y:s>y;t=g<=y?++s:--s)p2.tensor.dim[t-o]=p1.tensor.dim[t];for(t=a=0,v=u;0<=v?a<v:a>v;t=0<=v?++a:--a)p2.tensor.elem[t]=p1.tensor.elem[i+t];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-e),push(p2),restore()},set_component=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b;for(t=0,i=0,0,0,b=0,save(),e<3&&stop("error in indexed assign"),p2=stack[v=tos-e],p1=stack[v+1],istensor(p1)||stop("error in indexed assign: assigning to something that is not a tensor"),(o=e-2)>(u=p1.tensor.ndim)&&stop("error in indexed assign"),i=0,t=c=0,p=o;0<=p?c<p:c>p;t=0<=p?++c:--c)push(stack[v+t+2]),((b=pop_integer())<1||b>p1.tensor.dim[t])&&stop("error in indexed assign\n"),i=i*p1.tensor.dim[t]+b-1;for(t=r=h=o,d=u;h<=d?r<d:r>d;t=h<=d?++r:--r)i=i*p1.tensor.dim[t]+0;for((p3=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,t=n=0,f=p1.tensor.ndim;0<=f?n<f:n>f;t=0<=f?++n:--n)p3.tensor.dim[t]=p1.tensor.dim[t];for(t=s=0,m=p1.tensor.nelem;0<=m?s<m:s>m;t=0<=m?++s:--s)p3.tensor.elem[t]=p1.tensor.elem[t];if(check_tensor_dimensions(p1),check_tensor_dimensions(p3),p1=p3,u===o)return istensor(p2)&&stop("error in indexed assign"),p1.tensor.elem[i]=p2,check_tensor_dimensions(p1),moveTos(tos-e),push(p1),void restore();for(istensor(p2)||stop("error in indexed assign"),u-o!==p2.tensor.ndim&&stop("error in indexed assign"),t=a=0,g=p2.tensor.ndim;0<=g?a<g:a>g;t=0<=g?++a:--a)p1.tensor.dim[o+t]!==p2.tensor.dim[t]&&stop("error in indexed assign");for(t=l=0,y=p2.tensor.nelem;0<=y?l<y:l>y;t=0<=y?++l:--l)p1.tensor.elem[i+t]=p2.tensor.elem[t];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-e),push(p1),restore()},Eval_inner=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h,d,f,m;for((m=[]).push(car(cdr(p1))),car(cdr(cdr(p1)))===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),s=cdr(cdr(p1));s!==symbol(NIL);)m.push(car(s)),s=cdr(s);if(m.length>2){for(push_symbol(INNER),push(m[m.length-2]),push(m[m.length-1]),list(3),t=o=2,l=m.length;2<=l?o<l:o>l;t=2<=l?++o:--o)push_symbol(INNER),swap(),push(m[m.length-t-1]),swap(),list(3);return p1=pop(),void Eval_inner()}for(get_innerprod_factors(p1,a=[]),h=[],t=r=0,u=a.length;0<=u?r<u:r>u;t=0<=u?++r:--r)a[t]!==symbol(SYMBOL_IDENTITY_MATRIX)&&h.push(a[t]);if(a=h,h=[],a.length>1){for(f=0,t=n=0,c=a.length;(0<=c?n<c:n>c)&&t+f+1<=a.length-1&&(isNumericAtomOrTensor(a[t+f])||isNumericAtomOrTensor(a[t+f+1])?h.push(a[t+f]):(push(a[t+f]),Eval(),inv(),push(a[t+f+1]),Eval(),subtract(),e=pop(),isZeroAtomOrTensor(e)?f+=1:h.push(a[t+f])),t+f===a.length-2&&h.push(a[a.length-1]),!(t+f>=a.length-1));t=0<=c?++n:--n);a=h}if(push(symbol(INNER)),!(a.length>0))return pop(),void push(symbol(SYMBOL_IDENTITY_MATRIX));for(t=i=0,p=a.length;0<=p?i<p:i>p;t=0<=p?++i:--i)push(a[t]);for(list(a.length+1),p1=pop(),p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),d=[];iscons(p1);)push(car(p1)),Eval(),inner(),d.push(p1=cdr(p1));return d},inner=function(){var e,t,r,n;if(save(),p2=pop(),p1=pop(),isnegativeterm(p2)&&isnegativeterm(p1)&&(push(p2),negate(),p2=pop(),push(p1),negate(),p1=pop()),isinnerordot(p1)&&(e=car(cdr(p1)),t=car(cdr(cdr(p1))),r=p2,p1=e,push(t),push(r),inner(),p2=pop()),p1===symbol(SYMBOL_IDENTITY_MATRIX))return push(p2),void restore();if(p2===symbol(SYMBOL_IDENTITY_MATRIX))return push(p1),void restore();if(istensor(p1)&&istensor(p2))inner_f();else{if(!isNumericAtomOrTensor(p1)&&!isNumericAtomOrTensor(p2)&&(push(p1),push(p2),inv(),subtract(),n=pop(),isZeroAtomOrTensor(n)))return push_symbol(SYMBOL_IDENTITY_MATRIX),void restore();if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),inner(),add(),p1=cdr(p1);return void restore()}if(expanding&&isadd(p2)){for(p2=cdr(p2),push(zero);iscons(p2);)push(p1),push(car(p2)),inner(),add(),p2=cdr(p2);return void restore()}if(push(p1),push(p2),istensor(p1)&&isNumericAtom(p2))tensor_times_scalar();else if(isNumericAtom(p1)&&istensor(p2))scalar_times_tensor();else{if(!isNumericAtom(p1)&&!isNumericAtom(p2))return pop(),pop(),push_symbol(INNER),push(p1),push(p2),list(3),void restore();multiply()}}return restore()},inner_f=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E;for(s=0,(h=p1.tensor.dim[p1.tensor.ndim-1])!==p2.tensor.dim[0]&&stop("inner: tensor dimension check"),(f=p1.tensor.ndim+p2.tensor.ndim-2)>MAXDIM&&stop("inner: rank of result exceeds maximum"),e=p1.tensor.elem,r=p2.tensor.elem,t=1,s=m=0,y=p1.tensor.ndim-1;0<=y?m<y:m>y;s=0<=y?++m:--m)t*=p1.tensor.dim[s];for(n=1,s=o=1,v=p2.tensor.ndim;1<=v?o<v:o>v;s=1<=v?++o:--o)n*=p2.tensor.dim[s];for(i=(p3=alloc_tensor(t*n)).tensor.elem,s=l=0,b=t;0<=b?l<b:l>b;s=0<=b?++l:--l)for(a=c=0,x=h;0<=x?c<x:c>x;a=0<=x?++c:--c)if(!isZeroAtomOrTensor(e[s*h+a]))for(u=p=0,w=n;0<=w?p<w:p>w;u=0<=w?++p:--p)push(e[s*h+a]),push(r[a*n+u]),multiply(),push(i[s*n+u]),add(),i[s*n+u]=pop();if(0===f)return push(p3.tensor.elem[0]);for(p3.tensor.ndim=f,a=0,s=d=0,_=p1.tensor.ndim-1;0<=_?d<_:d>_;s=0<=_?++d:--d)p3.tensor.dim[s]=p1.tensor.dim[s];for(a=p1.tensor.ndim-1,s=g=0,E=p2.tensor.ndim-1;0<=E?g<E:g>E;s=0<=E?++g:--g)p3.tensor.dim[a+s]=p2.tensor.dim[s+1];return push(p3)},get_innerprod_factors=function(e,t){if(iscons(e)){if(cdr(e)!==symbol(NIL))return isinnerordot(e)?(get_innerprod_factors(car(cdr(e)),t),void get_innerprod_factors(cdr(cdr(e)),t)):add_factor_to_accumulator(e,t);e=get_innerprod_factors(car(e),t)}else add_factor_to_accumulator(e,t)},add_factor_to_accumulator=function(e,t){if(e!==symbol(NIL))return t.push(e)},itab=["f(a,a*x)","f(1/x,log(x))","f(x^a,x^(a+1)/(a+1))","f(x^(-2),-x^(-1))","f(x^(-1/2),2*x^(1/2))","f(x^(1/2),2/3*x^(3/2))","f(x,x^2/2)","f(x^2,x^3/3)","f(exp(a*x),1/a*exp(a*x))","f(exp(a*x+b),1/a*exp(a*x+b))","f(x*exp(a*x^2),exp(a*x^2)/(2*a))","f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))","f(log(a*x),x*log(a*x)-x)","f(a^x,a^x/log(a),or(not(number(a)),a>0))","f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/(a+b*x),1/b*log(a+b*x))","f(1/(a+b*x)^2,-1/(b*(a+b*x)))","f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)","f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)","f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))","f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))","f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))","f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))","f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))","f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))","f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))","f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))","f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))","f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))","f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))","f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))","f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))","f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))","f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))","f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))","f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))","f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))","f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))","f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))","f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)","f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)","f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))","f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)","f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)","f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)","f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))","f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))","f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))","f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))","f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))","f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))","f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))","f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))","f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))","f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(x/sqrt(a-x^2),-sqrt(a-x^2))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))","f(sin(a*x),-cos(a*x)/a)","f(cos(a*x),sin(a*x)/a)","f(tan(a*x),-log(cos(a*x))/a)","f(1/tan(a*x),log(sin(a*x))/a)","f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)","f(1/sin(a*x),log(tan(a*x/2))/a)","f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))","f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))","f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(1/sin(a*x)^2,-1/(a*tan(a*x)))","f(1/cos(a*x)^2,tan(a*x)/a)","f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))","f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)","f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))","f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)","f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))","f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)","f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)","f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)","f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))","f(sin(a+b*x),-cos(a+b*x)/b)","f(cos(a+b*x),sin(a+b*x)/b)","f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)","f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)","f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)","f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)","f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)","f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)","f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)","f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)","f(x*log(a*x),x^2*log(a*x)/2-x^2/4)","f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)","f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)","f(1/x*1/(a+log(x)),log(a+log(x)))","f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)","f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)","f(sinh(x),cosh(x))","f(cosh(x),sinh(x))","f(tanh(x),log(cosh(x)))","f(x*sinh(x),x*cosh(x)-sinh(x))","f(x*cosh(x),x*sinh(x)-cosh(x))","f(sinh(x)^2,sinh(2*x)/4-x/2)","f(tanh(x)^2,x-tanh(x))","f(cosh(x)^2,sinh(2*x)/4+x/2)","f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)","f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)","f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)","f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))","f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)","f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)","f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))","f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))","f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))","f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))",0],Eval_integral=function(){var e,t,r,n,i;for(0,t=0,p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),t=pop_integer(),isNaN(t)&&stop("nth integral: check n")):t=1,push(p3),t>=0)for(r=0,n=t;0<=n?r<n:r>n;0<=n?++r:--r)push(p4),integral();else for(e=0,i=t=-t;0<=i?e<i:e>i;0<=i?++e:--e)push(p4),derivative();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),(p5=pop())===symbol(NIL))break;isNumericAtom(p5)?1:(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},integral=function(){return save(),p2=pop(),p1=pop(),car(p1)===symbol(ADD)?integral_of_sum():car(p1)===symbol(MULTIPLY)?integral_of_product():integral_of_form(),p1=pop(),Find(p1,symbol(INTEGRAL))&&stop("integral: sorry, could not find a solution"),push(p1),simplify(),Eval(),restore()},integral_of_sum=function(){var e;for(p1=cdr(p1),push(car(p1)),push(p2),integral(),p1=cdr(p1),e=[];iscons(p1);)push(car(p1)),push(p2),integral(),add(),e.push(p1=cdr(p1));return e},integral_of_product=function(){return push(p1),push(p2),partition(),p1=pop(),integral_of_form(),multiply()},integral_of_form=function(){var e,t;return e=italu_hashcode(p1,p2).toFixed(6),(t=hashed_itab[e])?(push(p1),push(p2),transform(t,!1),(p3=pop())===symbol(NIL)?(push_symbol(INTEGRAL),push(p1),push(p2),list(3)):push(p3)):(push_symbol(INTEGRAL),push(p1),push(p2),void list(3))},hashcode_values={x:.95532,constexp:1.43762,constant:1.1441659362941434,constbase:1.2036412230421882,sin:1.7330548251830322,arcsin:1.6483368529465805,cos:1.0586721236863401,arccos:1.8405225918106694,tan:1.1224943776292506,arctan:1.1297397925394963,sinh:1.8176164926060079,cosh:1.9404934661708022,tanh:1.6421307715103122,log:1.477443701354924,erf:1.0825269225702916},italu_hashcode=function(e,t){var r;if(issymbol(e))return equal(e,t)?hashcode_values.x:hashcode_values.constant;if(iscons(e))switch(symnum(car(e))){case ADD:return hash_addition(cdr(e),t);case MULTIPLY:return hash_multiplication(cdr(e),t);case POWER:return hash_power(cadr(e),caddr(e),t);case EXP:return hash_power(symbol(E),cadr(e),t);case SQRT:return push_double(.5),r=pop(),hash_power(cadr(e),r,t);default:return hash_function(e,t)}return hashcode_values.constant},hash_function=function(e,t){var r,n,i;if(!Find(cadr(e),t))return hashcode_values.constant;if(i=car(e),r=italu_hashcode(cadr(e),t),!(n=hashcode_values[i.printname]))throw new Error("Unsupported function "+i.printname);return Math.pow(n,r)},hash_addition=function(e,t){var r,n,i,s;for(s={};iscons(e);)i=car(e),e=cdr(e),0,s[(Find(i,t)?italu_hashcode(i,t):hashcode_values.constant).toFixed(6)]=!0;for(r in n=0,s)hasProp.call(s,r)&&(s[r],n+=parseFloat(r,10));return n},hash_multiplication=function(e,t){var r,n;for(r=1;iscons(e);)n=car(e),e=cdr(e),Find(n,t)&&(r*=italu_hashcode(n,t));return r},hash_power=function(e,t,r){var n,i;if(n=hashcode_values.constant,i=hashcode_values.constexp,Find(e,r)&&(n=italu_hashcode(e,r)),Find(t,r))i=italu_hashcode(t,r);else{if(n===hashcode_values.constant)return hashcode_values.constant;isminusone(t)?i=-1:isoneovertwo(t)?i=.5:isminusoneovertwo(t)?i=-.5:equalq(t,2,1)?i=2:equalq(t,-2,1)&&(i=-2)}return Math.pow(n,i)},make_hashed_itab=function(){var e,t,r,n,i,s,o;for(s={},n=0,r=itab.length;n<r&&(i=itab[n]);n++)scan_meta(i),e=pop(),o=cadr(e),s[t=italu_hashcode(o,symbol(METAX)).toFixed(6)]||(s[t]=[]),s[t].push(i);return console.log("hashed_itab = "+JSON.stringify(s,null,2)),s},$.make_hashed_itab=make_hashed_itab,hashed_itab={1.144166:["f(a,a*x)"],"1.046770":["f(1/x,log(x))"],"0.936400":["f(x^a,x^(a+1)/(a+1))"],1.095727:["f(x^(-2),-x^(-1))"],1.023118:["f(x^(-1/2),2*x^(1/2))"],.977405:["f(x^(1/2),2/3*x^(3/2))"],"0.955320":["f(x,x^2/2)"],.912636:["f(x^2,x^3/3)"],1.137302:["f(exp(a*x),1/a*exp(a*x))","f(a^x,a^x/log(a),or(not(number(a)),a>0))"],1.326774:["f(exp(a*x+b),1/a*exp(a*x+b))"],1.080259:["f(x*exp(a*x^2),exp(a*x^2)/(2*a))"],1.260228:["f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))"],1.451902:["f(log(a*x),x*log(a*x)-x)"],.486192:["f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))"],.697274:["f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))"],.476307:["f(1/(a+b*x),1/b*log(a+b*x))"],.226868:["f(1/(a+b*x)^2,-1/(b*(a+b*x)))"],2.904531:["f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)"],.455026:["f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)"],.216732:["f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))"],.434695:["f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))"],.207048:["f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))"],2.650781:["f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))"],.498584:["f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))"],.237479:["f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))"],3.040375:["f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))"],.521902:["f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))"],.446014:["f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))"],.248586:["f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))"],.464469:["f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))"],.443716:["f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))"],.236382:["f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))"],.508931:["f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))"],.532733:["f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))"],.480638:["f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))"],.438648:["f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))"],.459164:["f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))"],"0.450070":["f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))"],"1.448960":["f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))"],1.384221:["f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)"],1.322374:["f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)"],1.516728:["f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))"],1.587665:["f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))"],"0.690150":["f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)"],.659314:["f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)"],.629856:["f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)"],.722428:["f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))"],.756216:["f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))"],1.434156:["f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))"],.729886:["f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"1.501230":["f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"0.666120":["f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x/sqrt(a-x^2),-sqrt(a-x^2))"],1.370077:["f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))"],1.730087:["f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))"],.578006:["f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))"],"0.552180":["f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))"],1.652787:["f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))"],1.308862:["f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))"],1.342944:["f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))"],.636358:["f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],.652928:["f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))"],.764022:["f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))"],"1.578940":["f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))"],1.620055:["f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))"],.332117:["f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))"],1.571443:["f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],1.690994:["f(sin(a*x),-cos(a*x)/a)"],1.055979:["f(cos(a*x),sin(a*x)/a)"],1.116714:["f(tan(a*x),-log(cos(a*x))/a)"],.895484:["f(1/tan(a*x),log(sin(a*x))/a)"],.946989:["f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)"],.591368:["f(1/sin(a*x),log(tan(a*x/2))/a)"],2.859462:["f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))"],"2.128050":["f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],1.115091:["f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))"],1.081452:["f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],.349716:["f(1/sin(a*x)^2,-1/(a*tan(a*x)))"],.896788:["f(1/cos(a*x)^2,tan(a*x)/a)"],1.785654:["f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))"],"3.188560":["f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)"],1.516463:["f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))"],2.707879:["f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)"],.369293:["f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))"],.560019:["f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)"],.530332:["f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)"],.331177:["f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)"],.313621:["f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))"],3.172365:["f(sin(a+b*x),-cos(a+b*x)/b)"],1.127162:["f(cos(a+b*x),sin(a+b*x)/b)"],.352714:["f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)"],.454515:["f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)"],1.615441:["f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)"],1.543263:["f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)"],1.008798:["f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)"],.963724:["f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)"],1.611938:["f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)"],1.791033:["f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)"],1.123599:["f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)"],1.387031:["f(x*log(a*x),x^2*log(a*x)/2-x^2/4)"],1.325058:["f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)"],2.108018:["f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)"],.403214:["f(1/x*1/(a+log(x)),log(a+log(x)))"],2.269268:["f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)"],2.486498:["f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)"],1.769733:["f(sinh(x),cosh(x))"],1.883858:["f(cosh(x),sinh(x))"],"1.606140":["f(tanh(x),log(cosh(x)))"],1.690661:["f(x*sinh(x),x*cosh(x)-sinh(x))"],1.799688:["f(x*cosh(x),x*sinh(x)-cosh(x))"],3.131954:["f(sinh(x)^2,sinh(2*x)/4-x/2)"],2.579685:["f(tanh(x)^2,x-tanh(x))"],3.548923:["f(cosh(x)^2,sinh(2*x)/4+x/2)"],1.058866:["f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)"],"1.235270":["f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)"],1.130783:["f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)"],1.078698:["f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))"],"2.573650":["f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)"],2.640666:["f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)"],1.086487:["f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))"],1.267493:["f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))"],1.037943:["f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))"],1.210862:["f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.064970":["f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))"],1.242392:["f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"]},INV_check_arg=function(){return istensor(p1)?2!==p1.tensor.ndim||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},inv=function(){var e,t,r,n;if(0,0,save(),p1=pop(),isinv(p1))return push(car(cdr(p1))),void restore();if(isidentitymatrix(p1))return push(p1),void restore();if(!expanding||!isinnerordot(p1))return 0===INV_check_arg()?(push_symbol(INV),push(p1),list(2),void restore()):(isNumericAtomOrTensor(p1)?yyinvg():(push(p1),adj(),push(p1),det(),p2=pop(),isZeroAtomOrTensor(p2)&&stop("inverse of singular matrix"),push(p2),divide()),restore());for(p1=cdr(p1),e=[];iscons(p1);)e.push(car(p1)),p1=cdr(p1);for(t=r=n=e.length-1;n<=0?r<=0:r>=0;t=n<=0?++r:--r)push(e[t]),inv(),t!==e.length-1&&inner();restore()},invg=function(){return save(),p1=pop(),0===INV_check_arg()?(push_symbol(INVG),push(p1),list(2),void restore()):(yyinvg(),restore())},yyinvg=function(){var e,t,r,n,i,s,o,a,l,u,c,p;for(0,t=0,n=0,0,o=p1.tensor.dim[0],e=tos,t=a=0,l=o;0<=l?a<l:a>l;t=0<=l?++a:--a)for(n=r=0,u=o;0<=u?r<u:r>u;n=0<=u?++r:--r)push(t===n?one:zero);for(t=i=0,c=o*o;0<=c?i<c:i>c;t=0<=c?++i:--i)push(p1.tensor.elem[t]);for(INV_decomp(o),(p1=alloc_tensor(o*o)).tensor.ndim=2,p1.tensor.dim[0]=o,p1.tensor.dim[1]=o,t=s=0,p=o*o;0<=p?s<p:s>p;t=0<=p?++s:--s)p1.tensor.elem[t]=stack[e+t];return moveTos(tos-2*o*o),push(p1)},INV_decomp=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m;for(0,r=0,n=0,s=0,0,m=(t=tos-e*e)-e*e,f=[],r=l=0,u=e;0<=u?l<u:l>u;r=0<=u?++l:--l){if(equal(stack[t+e*r+r],zero)){for(n=i=c=r+1,p=e;(c<=p?i<p:i>p)&&equal(stack[t+e*n+r],zero);n=c<=p?++i:--i);for(n===e&&stop("inverse of singular matrix"),s=o=0,h=e;0<=h?o<h:o>h;s=0<=h?++o:--o)p2=stack[t+e*r+s],stack[t+e*r+s]=stack[t+e*n+s],stack[t+e*n+s]=p2,p2=stack[m+e*r+s],stack[m+e*r+s]=stack[m+e*n+s],stack[m+e*n+s]=p2}for(p2=stack[t+e*r+r],s=a=0,d=e;0<=d?a<d:a>d;s=0<=d?++a:--a)s>r&&(push(stack[t+e*r+s]),push(p2),divide(),stack[t+e*r+s]=pop()),push(stack[m+e*r+s]),push(p2),divide(),stack[m+e*r+s]=pop();f.push(function(){var i,o,a;for(a=[],n=i=0,o=e;0<=o?i<o:i>o;n=0<=o?++i:--i)n!==r&&(p2=stack[t+e*n+r],a.push(function(){var i,o,a;for(a=[],s=i=0,o=e;0<=o?i<o:i>o;s=0<=o?++i:--i)s>r&&(push(stack[t+e*n+s]),push(stack[t+e*r+s]),push(p2),multiply(),subtract(),stack[t+e*n+s]=pop()),push(stack[m+e*n+s]),push(stack[m+e*r+s]),push(p2),multiply(),subtract(),a.push(stack[m+e*n+s]=pop());return a}()));return a}())}return f},DEBUG_IS=!1,isZeroAtom=function(e){switch(e.k){case NUM:return MZERO(e.q.a);case DOUBLE:return 0===e.d;default:return!1}},isZeroTensor=function(e){var t,r,n;if(e.k!==TENSOR)return 0;for(t=r=0,n=e.tensor.nelem;0<=n?r<n:r>n;t=0<=n?++r:--r)if(!isZeroAtomOrTensor(e.tensor.elem[t]))return 0;return 1},isZeroAtomOrTensor=function(e){return isZeroAtom(e)||isZeroTensor(e)},isZeroLikeOrNonZeroLikeOrUndetermined=function(e){var t;if(push(e),Eval_predicate(),t=pop(),isZeroAtomOrTensor(t))return 0;if(isNumericAtomOrTensor(t))return 1;if(push(t),zzfloat(),t=pop(),isZeroAtomOrTensor(t))return 0;if(isNumericAtomOrTensor(t))return 1;if(Find(t,imaginaryunit)){if(push(t),absValFloat(),Eval_predicate(),t=pop(),isZeroAtomOrTensor(t))return 0;if(isNumericAtomOrTensor(t))return 1}return null},isnegativenumber=function(e){switch(e.k){case NUM:if(-1===MSIGN(e.q.a))return 1;break;case DOUBLE:if(e.d<0)return 1}return 0},ispositivenumber=function(e){switch(e.k){case NUM:if(1===MSIGN(e.q.a))return 1;break;case DOUBLE:if(e.d>0)return 1}return 0},isplustwo=function(e){switch(e.k){case NUM:if(MEQUAL(e.q.a,2)&&MEQUAL(e.q.b,1))return 1;break;case DOUBLE:if(2===e.d)return 1}return 0},isplusone=function(e){switch(e.k){case NUM:if(MEQUAL(e.q.a,1)&&MEQUAL(e.q.b,1))return 1;break;case DOUBLE:if(1===e.d)return 1}return 0},isminusone=function(e){switch(e.k){case NUM:if(MEQUAL(e.q.a,-1)&&MEQUAL(e.q.b,1))return 1;break;case DOUBLE:if(-1===e.d)return 1}return 0},isone=function(e){return isplusone(e)||isminusone(e)},isinteger=function(e){return e.k===NUM&&MEQUAL(e.q.b,1)?1:0},isintegerorintegerfloat=function(e){return e.k===DOUBLE?e.d===Math.round(e.d)?1:0:isinteger(e)},isnonnegativeinteger=function(e){return isrational(e)&&MEQUAL(e.q.b,1)&&1===MSIGN(e.q.a)?1:0},isposint=function(e){return isinteger(e)&&1===MSIGN(e.q.a)?1:0},isunivarpolyfactoredorexpandedform=function(e,t){return DEBUG&&console.log("isunivarpolyfactoredorexpandedform: p: "+e+" x: "+t),null==t&&(push(e),guess(),t=pop(),pop()),ispolyfactoredorexpandedform(e,t)&&Find(e,symbol(SYMBOL_X))+Find(e,symbol(SYMBOL_Y))+Find(e,symbol(SYMBOL_Z))===1?t:0},ispolyfactoredorexpandedform=function(e,t){return ispolyfactoredorexpandedform_factor(e,t)},ispolyfactoredorexpandedform_factor=function(e,t){if(car(e)===symbol(MULTIPLY)){for(e=cdr(e);iscons(e);){if(DEBUG&&console.log("ispolyfactoredorexpandedform_factor testing "+car(e)),!ispolyfactoredorexpandedform_power(car(e),t))return DEBUG&&console.log("... tested negative:"+car(e)),0;e=cdr(e)}return 1}return ispolyfactoredorexpandedform_power(e,t)},ispolyfactoredorexpandedform_power=function(e,t){return car(e)===symbol(POWER)?(DEBUG&&console.log("ispolyfactoredorexpandedform_power (isposint(caddr(p)) "+(isposint(caddr(e)),DEBUG?console.log("ispolyfactoredorexpandedform_power ispolyexpandedform_expr(cadr(p), x)) "+ispolyexpandedform_expr(cadr(e),t)):void 0)),isposint(caddr(e))&&ispolyexpandedform_expr(cadr(e),t)):(DEBUG&&console.log("ispolyfactoredorexpandedform_power not a power, testing if this is exp form: "+e),ispolyexpandedform_expr(e,t))},ispolyexpandedform=function(e,t){return Find(e,t)?ispolyexpandedform_expr(e,t):0},ispolyexpandedform_expr=function(e,t){if(car(e)===symbol(ADD)){for(e=cdr(e);iscons(e);){if(!ispolyexpandedform_term(car(e),t))return 0;e=cdr(e)}return 1}return ispolyexpandedform_term(e,t)},ispolyexpandedform_term=function(e,t){if(car(e)===symbol(MULTIPLY)){for(e=cdr(e);iscons(e);){if(!ispolyexpandedform_factor(car(e),t))return 0;e=cdr(e)}return 1}return ispolyexpandedform_factor(e,t)},ispolyexpandedform_factor=function(e,t){return equal(e,t)?1:car(e)===symbol(POWER)&&equal(cadr(e),t)?isposint(caddr(e))?1:0:Find(e,t)?0:1},isnegativeterm=function(e){return isnegativenumber(e)||car(e)===symbol(MULTIPLY)&&isnegativenumber(cadr(e))?1:0},hasNegativeRationalExponent=function(e){return car(e)===symbol(POWER)&&isrational(car(cdr(cdr(e))))&&isnegativenumber(car(cdr(e)))?(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+e.toString()+" has imaginary component"),1):(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+e.toString()+" has NO imaginary component"),0)},isimaginarynumberdouble=function(e){return car(e)===symbol(MULTIPLY)&&3===length(e)&&isdouble(cadr(e))&&hasNegativeRationalExponent(caddr(e))||equal(e,imaginaryunit)?1:0},isimaginarynumber=function(e){return car(e)===symbol(MULTIPLY)&&3===length(e)&&isNumericAtom(cadr(e))&&equal(caddr(e),imaginaryunit)||equal(e,imaginaryunit)||hasNegativeRationalExponent(caddr(e))?(DEBUG_IS&&console.log("isimaginarynumber: "+e.toString()+" is imaginary number"),1):(DEBUG_IS&&console.log("isimaginarynumber: "+e.toString()+" isn't an imaginary number"),0)},iscomplexnumberdouble=function(e){return car(e)===symbol(ADD)&&3===length(e)&&isdouble(cadr(e))&&isimaginarynumberdouble(caddr(e))||isimaginarynumberdouble(e)?1:0},iscomplexnumber=function(e){return car(e)===symbol(ADD)&&3===length(e)&&isNumericAtom(cadr(e))&&isimaginarynumber(caddr(e))||isimaginarynumber(e)?(DEBUG&&console.log("iscomplexnumber: "+e.toString()+" is imaginary number"),1):(DEBUG&&console.log("iscomplexnumber: "+e.toString()+" is imaginary number"),0)},iseveninteger=function(e){return isinteger(e)&&e.q.a.isEven()?1:0},isnegative=function(e){return car(e)===symbol(ADD)&&isnegativeterm(cadr(e))||isnegativeterm(e)?1:0},issymbolic=function(e){if(issymbol(e))return 1;for(;iscons(e);){if(issymbolic(car(e)))return 1;e=cdr(e)}return 0},isintegerfactor=function(e){return isinteger(e)||car(e)===symbol(POWER)&&isinteger(cadr(e))&&isinteger(caddr(e))},isNumberOneOverSomething=function(e){return isfraction(e)&&MEQUAL(e.q.a.abs(),1)},isoneover=function(e){return car(e)===symbol(POWER)&&isminusone(caddr(e))},isfraction=function(e){return e.k===NUM&&!MEQUAL(e.q.b,1)},equaln=function(e,t){switch(e.k){case NUM:return MEQUAL(e.q.a,t)&&MEQUAL(e.q.b,1);case DOUBLE:return e.d===t;default:return!1}},equalq=function(e,t,r){switch(e.k){case NUM:return MEQUAL(e.q.a,t)&&MEQUAL(e.q.b,r);case DOUBLE:return e.d===t/r;default:return!1}},isoneovertwo=function(e){return equalq(e,1,2)},isminusoneovertwo=function(e){return equalq(e,-1,2)},isoneoversqrttwo=function(e){return car(e)===symbol(POWER)&&equaln(cadr(e),2)&&equalq(caddr(e),-1,2)},isminusoneoversqrttwo=function(e){return car(e)===symbol(MULTIPLY)&&equaln(cadr(e),-1)&&isoneoversqrttwo(caddr(e))&&3===length(e)},issqrtthreeovertwo=function(e){return car(e)===symbol(MULTIPLY)&&isoneovertwo(cadr(e))&&issqrtthree(caddr(e))&&3===length(e)},isminussqrtthreeovertwo=function(e){return car(e)===symbol(MULTIPLY)&&isminusoneovertwo(cadr(e))&&issqrtthree(caddr(e))&&3===length(e)},issqrtthree=function(e){return car(e)===symbol(POWER)&&equaln(cadr(e),3)&&isoneovertwo(caddr(e))},isfloating=function(e){if(e.k===DOUBLE||e===symbol(FLOATF))return 1;for(;iscons(e);){if(isfloating(car(e)))return 1;e=cdr(e)}return 0},isimaginaryunit=function(e){return equal(e,imaginaryunit)?1:0},isquarterturn=function(e){var t,r;if(r=0,t=0,car(e)!==symbol(MULTIPLY))return 0;if(equal(cadr(e),imaginaryunit))return caddr(e)!==symbol(PI)||3!==length(e)?0:2;if(!isNumericAtom(cadr(e)))return 0;if(!equal(caddr(e),imaginaryunit))return 0;if(cadddr(e)!==symbol(PI))return 0;if(4!==length(e))return 0;if(push(cadr(e)),push_integer(2),multiply(),r=pop_integer(),isNaN(r))return 0;switch(r<1&&(t=1,r=-r),r%4){case 0:r=1;break;case 1:r=t?4:3;break;case 2:r=2;break;case 3:r=t?3:4}return r},isnpi=function(e){var t;return t=0,e===symbol(PI)?2:car(e)===symbol(MULTIPLY)&&isNumericAtom(cadr(e))&&caddr(e)===symbol(PI)&&3===length(e)?(0,push(cadr(e)),push_integer(2),multiply(),t=pop_integer(),isNaN(t)?0:t=t<0?4- -t%4:1+(t-1)%4):0},$.isZeroAtomOrTensor=isZeroAtomOrTensor,$.isnegativenumber=isnegativenumber,$.isplusone=isplusone,$.isminusone=isminusone,$.isinteger=isinteger,$.isnonnegativeinteger=isnonnegativeinteger,$.isposint=isposint,$.isnegativeterm=isnegativeterm,$.isimaginarynumber=isimaginarynumber,$.iscomplexnumber=iscomplexnumber,$.iseveninteger=iseveninteger,$.isnegative=isnegative,$.issymbolic=issymbolic,$.isintegerfactor=isintegerfactor,$.isoneover=isoneover,$.isfraction=isfraction,$.isoneoversqrttwo=isoneoversqrttwo,$.isminusoneoversqrttwo=isminusoneoversqrttwo,$.isfloating=isfloating,$.isimaginaryunit=isimaginaryunit,$.isquarterturn=isquarterturn,$.isnpi=isnpi,Eval_isprime=function(){return push(cadr(p1)),Eval(),p1=pop(),isnonnegativeinteger(p1)&&mprime(p1.q.a)?push_integer(1):push_integer(0)},Eval_laguerre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(0):push(p2),laguerre()},laguerre=function(){var e;return 0,save(),p3=pop(),p2=pop(),p1=pop(),push(p2),(e=pop_integer())<0||isNaN(e)?(push_symbol(LAGUERRE),push(p1),push(p2),push(p3),list(4),void restore()):(issymbol(p1)?laguerre2(e):(p4=p1,p1=symbol(SECRETX),laguerre2(e),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),restore())},laguerre2=function(e){var t,r,n,i;for(t=0,push_integer(1),push_integer(0),p6=pop(),i=[],t=r=0,n=e;0<=n?r<n:r>n;t=0<=n?++r:--r)p5=p6,p6=pop(),push_integer(2*t+1),push(p1),subtract(),push(p3),add(),push(p6),multiply(),push_integer(t),push(p3),add(),push(p5),multiply(),subtract(),push_integer(t+1),i.push(divide());return i},Eval_lcm=function(){var e;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),e=[];iscons(p1);)push(car(p1)),Eval(),lcm(),e.push(p1=cdr(p1));return e},lcm=function(){var e;return e=expanding,save(),yylcm(),restore(),expanding=e},yylcm=function(){return expanding=1,p2=pop(),p1=pop(),push(p1),push(p2),gcd(),push(p1),divide(),push(p2),divide(),inverse()},Eval_leading=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p1=pop())===symbol(NIL)?guess():push(p1),leading()},leading=function(){return save(),p2=pop(),p1=pop(),push(p1),push(p2),degree(),p3=pop(),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter(),restore()},Eval_legendre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(0):push(p2),legendre()},legendre=function(){return save(),__legendre(),restore()},__legendre=function(){var e,t;return 0,0,p3=pop(),p2=pop(),p1=pop(),push(p2),t=pop_integer(),push(p3),e=pop_integer(),t<0||isNaN(t)||e<0||isNaN(e)?(push_symbol(LEGENDRE),push(p1),push(p2),push(p3),void list(4)):(issymbol(p1)?__legendre2(t,e):(p4=p1,p1=symbol(SECRETX),__legendre2(t,e),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),__legendre3(e))},__legendre2=function(e,t){var r,n,i,s,o,a;for(r=0,push_integer(1),push_integer(0),p6=pop(),r=i=0,s=e;0<=s?i<s:i>s;r=0<=s?++i:--i)p5=p6,p6=pop(),push_integer(2*r+1),push(p1),multiply(),push(p6),multiply(),push_integer(r),push(p5),multiply(),subtract(),push_integer(r+1),divide();for(a=[],r=n=0,o=t;0<=o?n<o:n>o;r=0<=o?++n:--n)push(p1),a.push(derivative());return a},__legendre3=function(e){if(0!==e)return car(p1)===symbol(COS)?(push(cadr(p1)),sine(),square()):car(p1)===symbol(SIN)?(push(cadr(p1)),cosine(),square()):(push_integer(1),push(p1),square(),subtract()),push_integer(e),push_rational(1,2),multiply(),power(),multiply(),e%2?negate():void 0},list=function(e){var t,r,n;for(0,push(symbol(NIL)),n=[],t=0,r=e;0<=r?t<r:t>r;0<=r?++t:--t)n.push(cons());return n},Eval_log=function(){return push(cadr(p1)),Eval(),logarithm()},logarithm=function(){return save(),yylog(),restore()},yylog=function(){var e;if(e=0,(p1=pop())!==symbol(E))if(equaln(p1,1))push_integer(0);else{if(isnegativenumber(p1))return push(p1),negate(),logarithm(),push(imaginaryunit),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),multiply(),void add();if(isdouble(p1))return e=Math.log(p1.d),void push_double(e);if(isfraction(p1))return push(p1),numerator(),logarithm(),push(p1),denominator(),logarithm(),void subtract();if(car(p1)===symbol(POWER))return push(caddr(p1)),push(cadr(p1)),logarithm(),void multiply();if(car(p1)!==symbol(MULTIPLY))return push_symbol(LOG),push(p1),list(2);for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),logarithm(),add(),p1=cdr(p1)}else push_integer(1)},Eval_lookup=function(){return p1=cadr(p1),iscons(p1)||cadr(p1).k!==SYM||(p1=get_binding(p1)),push(p1)},madd=function(e,t){return e.add(t)},msub=function(e,t){return e.subtract(t)},addf=function(e,t){return e.add(t)},subf=function(e,t){return e.subtract(t)},ucmp=function(e,t){return e.compareAbs(t)},mgcd=function(e,t){return bigInt.gcd(e,t)},new_string=function(e){var t;return(t=new U).k=STR,t.str=e,t},out_of_memory=function(){return stop("out of memory")},push_zero_matrix=function(e,t){return push(alloc_tensor(e*t)),stack[tos-1].tensor.ndim=2,stack[tos-1].tensor.dim[0]=e,stack[tos-1].tensor.dim[1]=t},push_identity_matrix=function(e){var t,r,n;for(push_zero_matrix(e,e),t=r=0,n=e;0<=n?r<n:r>n;t=0<=n?++r:--r)stack[tos-1].tensor.elem[t*e+t]=one;return check_tensor_dimensions(stack[tos-1])},push_cars=function(e){var t;for(t=[];iscons(e);)push(car(e)),t.push(e=cdr(e));return t},equal=function(e,t){return 0===cmp_expr(e,t)?1:0},lessp=function(e,t){return cmp_expr(e,t)<0?1:0},sign=function(e){return e<0?-1:e>0?1:0},cmp_expr=function(e,t){var r;if(r=0,e===t)return 0;if(e===symbol(NIL))return-1;if(t===symbol(NIL))return 1;if(isNumericAtom(e)&&isNumericAtom(t))return sign(compare_numbers(e,t));if(isNumericAtom(e))return-1;if(isNumericAtom(t))return 1;if(isstr(e)&&isstr(t))return sign(strcmp(e.str,t.str));if(isstr(e))return-1;if(isstr(t))return 1;if(issymbol(e)&&issymbol(t))return sign(strcmp(get_printname(e),get_printname(t)));if(issymbol(e))return-1;if(issymbol(t))return 1;if(istensor(e)&&istensor(t))return compare_tensors(e,t);if(istensor(e))return-1;if(istensor(t))return 1;for(;iscons(e)&&iscons(t);){if(0!==(r=cmp_expr(car(e),car(t))))return r;e=cdr(e),t=cdr(t)}return iscons(t)?-1:iscons(e)?1:0},length=function(e){var t;for(t=0;iscons(e);)e=cdr(e),t++;return t},unique=function(e){return save(),p1=symbol(NIL),p2=symbol(NIL),unique_f(e),p2!==symbol(NIL)&&(p1=symbol(NIL)),e=p1,restore(),e},unique_f=function(e){if(isstr(e))p1===symbol(NIL)?p1=e:e!==p1&&(p2=e);else for(;iscons(e);){if(unique_f(car(e)),p2!==symbol(NIL))return;e=cdr(e)}},ssqrt=function(){return push_rational(1,2),power()},yyexpand=function(){var e;return e=expanding,expanding=1,Eval(),expanding=e},exponential=function(){return push_symbol(E),swap(),power()},square=function(){return push_integer(2),power()},sort_stack=function(e){var t,r;return t=tos-e,(r=stack.slice(t,t+e)).sort(cmp_expr),stack=stack.slice(0,t).concat(r).concat(stack.slice(t+e))},$.equal=equal,$.length=length,mmul=function(e,t){return e.multiply(t)},mdiv=function(e,t){return e.divide(t)},mmod=function(e,t){return e.mod(t)},mdivrem=function(e,t){var r;return[(r=e.divmod(t)).quotient,r.remainder]},Eval_mod=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),mod()},mod=function(){var e;return e=0,save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("mod function: divide by zero"),isNumericAtom(p1)&&isNumericAtom(p2)?(isdouble(p1)&&(push(p1),e=pop_integer(),isNaN(e)&&stop("mod function: cannot convert float value to integer"),push_integer(e),p1=pop()),isdouble(p2)&&(push(p2),e=pop_integer(),isNaN(e)&&stop("mod function: cannot convert float value to integer"),push_integer(e),p2=pop()),isinteger(p1)&&isinteger(p2)||stop("mod function: integer arguments expected"),(p3=new U).k=NUM,p3.q.a=mmod(p1.q.a,p2.q.a),p3.q.b=mint(1),push(p3),restore()):(push_symbol(MOD),push(p1),push(p2),list(3),void restore())},mpow=function(e,t){return e.pow(t)},mprime=function(e){return e.isProbablePrime()},mroot=function(e,t){var r,n,i,s,o,a,l;for(e=e.abs(),r=0,0,i=0,0===t&&stop("root index is zero"),i=0;e.shiftRight(i)>0;)i++;if(0===i)return mint(0);for(i=Math.floor((i-1)/t),n=Math.floor(i/32+1),a=bigInt(n),r=s=0,o=n;0<=o?s<o:s>o;r=0<=o?++s:--s)a=a.and(bigInt(1).shiftLeft(r).not());for(;i>=0;){switch(a=a.or(bigInt(1).shiftLeft(i)),l=mpow(a,t),mcmp(l,e)){case 0:return a;case 1:a=a.and(bigInt(1).shiftLeft(i).not())}i--}return 0},DEBUG_MULTIPLY=!1,Eval_multiply=function(){var e;for(push(cadr(p1)),Eval(),p1=cddr(p1),e=[];iscons(p1);)push(car(p1)),Eval(),multiply(),e.push(p1=cdr(p1));return e},multiply=function(){return esc_flag&&stop("escape key stop"),isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?multiply_numbers():(save(),yymultiply(),restore())},yymultiply=function(){var e,t,r,n,i,s;if(0,t=0,0,p2=pop(),p1=pop(),e=tos,isZeroAtom(p1)||isZeroAtom(p2))evaluatingAsFloats?push_double(0):push(zero);else if(expanding&&isadd(p1))for(p1=cdr(p1),evaluatingAsFloats?push_double(0):push(zero);iscons(p1);)push(car(p1)),push(p2),multiply(),add(),p1=cdr(p1);else if(expanding&&isadd(p2))for(p2=cdr(p2),evaluatingAsFloats?push_double(0):push(zero);iscons(p2);)push(p1),push(car(p2)),multiply(),add(),p2=cdr(p2);else{if(!istensor(p1)&&istensor(p2))return push(p1),push(p2),void scalar_times_tensor();if(istensor(p1)&&!istensor(p2))return push(p1),push(p2),void tensor_times_scalar();for(car(p1)===symbol(MULTIPLY)?p1=cdr(p1):(push(p1),list(1),p1=pop()),car(p2)===symbol(MULTIPLY)?p2=cdr(p2):(push(p2),list(1),p2=pop()),isNumericAtom(car(p1))&&isNumericAtom(car(p2))?(push(car(p1)),push(car(p2)),multiply_numbers(),p1=cdr(p1),p2=cdr(p2)):isNumericAtom(car(p1))?(push(car(p1)),p1=cdr(p1)):isNumericAtom(car(p2))?(push(car(p2)),p2=cdr(p2)):evaluatingAsFloats?push_double(1):push(one),parse_p1(),parse_p2();iscons(p1)&&iscons(p2);)if(caar(p1)!==symbol(OPERATOR)||caar(p2)!==symbol(OPERATOR))switch(cmp_expr(p3,p4)){case-1:push(car(p1)),p1=cdr(p1),parse_p1();break;case 1:push(car(p2)),p2=cdr(p2),parse_p2();break;case 0:combine_factors(e),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();break;default:stop("internal error 2")}else push_symbol(OPERATOR),push(cdar(p1)),push(cdar(p2)),append(),cons(),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();for(;iscons(p1);)push(car(p1)),p1=cdr(p1);for(;iscons(p2);)push(car(p2)),p2=cdr(p2);if(__normalize_radical_factors(e),expanding)for(t=n=i=e,s=tos;i<=s?n<s:n>s;t=i<=s?++n:--n)if(isadd(stack[t]))return void multiply_all(tos-e);if(1!==(r=tos-e)){if(!isrational(stack[e])||!equaln(stack[e],1))return list(r),p7=pop(),push_symbol(MULTIPLY),push(p7),cons();2===r?(p7=pop(),pop(),push(p7)):(stack[e]=symbol(MULTIPLY),list(r))}}},parse_p1=function(){if(p3=car(p1),p5=evaluatingAsFloats?one_as_double:one,car(p3)===symbol(POWER))return p5=caddr(p3),p3=cadr(p3)},parse_p2=function(){if(p4=car(p2),p6=evaluatingAsFloats?one_as_double:one,car(p4)===symbol(POWER))return p6=caddr(p4),p4=cadr(p4)},combine_factors=function(e){return push(p4),push(p5),push(p6),add(),power(),p7=pop(),isNumericAtom(p7)?(push(stack[e]),push(p7),multiply_numbers(),stack[e]=pop()):car(p7)===symbol(MULTIPLY)&&isNumericAtom(cadr(p7))&&cdddr(p7)===symbol(NIL)?(push(stack[e]),push(cadr(p7)),multiply_numbers(),stack[e]=pop(),push(caddr(p7))):push(p7)},gp=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,-6,-7,-8,-3,-4,-5,13,14,15,-16,9,10,11,-12],[0,0,6,-1,-11,10,-2,-15,14,12,-5,4,-9,16,-8,7,-13],[0,0,7,11,-1,-9,15,-2,-13,5,12,-3,-10,8,16,-6,-14],[0,0,8,-10,9,-1,-14,13,-2,-4,3,12,-11,-7,6,16,-15],[0,0,3,2,15,-14,1,11,-10,16,-8,7,13,12,-5,4,9],[0,0,4,-15,2,13,-11,1,9,8,16,-6,14,5,12,-3,10],[0,0,5,14,-13,2,10,-9,1,-7,6,16,15,-4,3,12,11],[0,0,13,12,-5,4,16,-8,7,-1,-11,10,-3,-2,-15,14,-6],[0,0,14,5,12,-3,8,16,-6,11,-1,-9,-4,15,-2,-13,-7],[0,0,15,-4,3,12,-7,6,16,-10,9,-1,-5,-14,13,-2,-8],[0,0,16,-9,-10,-11,-13,-14,-15,-3,-4,-5,1,-6,-7,-8,2],[0,0,9,-16,8,-7,-12,5,-4,-2,-15,14,6,-1,-11,10,3],[0,0,10,-8,-16,6,-5,-12,3,15,-2,-13,7,11,-1,-9,4],[0,0,11,7,-6,-16,4,-3,-12,-14,13,-2,8,-10,9,-1,5],[0,0,12,13,14,15,9,10,11,-6,-7,-8,-2,-3,-4,-5,-1]],combine_gammas=function(e){var t;if((t=gp[Math.floor(p1.gamma)][Math.floor(p2.gamma)])<0&&(t=-t,push(stack[e]),negate(),stack[e]=pop()),t>1)return push(_gamma[t])},multiply_noexpand=function(){var e;return e=expanding,expanding=0,multiply(),expanding=e},multiply_all=function(e){var t,r,n,i;if(r=0,1!==e){if(0!==e){for(push(stack[t=tos-e]),r=n=1,i=e;1<=i?n<i:n>i;r=1<=i?++n:--n)push(stack[t+r]),multiply();return stack[t]=pop(),moveTos(t+1)}push(evaluatingAsFloats?one_as_double:one)}},multiply_all_noexpand=function(e){var t;return t=expanding,expanding=0,multiply_all(e),expanding=t},divide=function(){return isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?divide_numbers():(inverse(),multiply())},inverse=function(){return isNumericAtom(stack[tos-1])?invert_number():(push_integer(-1),power())},reciprocate=function(){return inverse()},negate=function(){return isNumericAtom(stack[tos-1])?negate_number():(evaluatingAsFloats?push_double(-1):push_integer(-1),multiply())},negate_expand=function(){var e;return e=expanding,expanding=1,negate(),expanding=e},negate_noexpand=function(){var e;return e=expanding,expanding=0,negate(),expanding=e},__normalize_radical_factors=function(e){var t,r,n,i,s,o,a,l,u,c;if(t=0,!(isplusone(stack[e])||isminusone(stack[e])||isdouble(stack[e]))){for(t=i=s=e+1,o=tos;(s<=o?i<o:i>o)&&!__is_radical_number(stack[t]);t=s<=o?++i:--i);if(t!==tos){for(save(),push(stack[e]),mp_numerator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors numerator: "+stack[tos-1]),p1=pop(),t=r=a=e+1,l=tos;(a<=l?r<l:r>l)&&(!isplusone(p1)&&!isminusone(p1));t=a<=l?++r:--r)__is_radical_number(stack[t])&&(p3=cadr(stack[t]),p4=caddr(stack[t]),isnegativenumber(p4)&&(push(p1),push(p3),divide(),p5=pop(),isinteger(p5)&&(p1=p5,push_symbol(POWER),push(p3),push(evaluatingAsFloats?one_as_double:one),push(p4),add(),list(3),stack[t]=pop())));for(push(stack[e]),mp_denominator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors denominator: "+stack[tos-1]),p2=pop(),t=n=u=e+1,c=tos;(u<=c?n<c:n>c)&&!isplusone(p2);t=u<=c?++n:--n)if(__is_radical_number(stack[t])&&(p3=cadr(stack[t]),p4=caddr(stack[t]),!isnegativenumber(p4)&&(push(p2),push(p3),divide(),p5=pop(),isinteger(p5)))){if(DEBUG_MULTIPLY&&console.log("__new radical p5: "+p5.toString()),DEBUG_MULTIPLY&&console.log("__new radical top stack: "+stack[tos-1]),p2=p5,push_symbol(POWER),push(p3),push(p4),DEBUG_MULTIPLY&&console.log("__new radical p3: "+p3.toString()),DEBUG_MULTIPLY&&console.log("__new radical p4: "+p4.toString()),push(one),subtract(),dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication&&isinteger(p3)&&!isinteger(stack[tos-1])&&isnegativenumber(stack[tos-1])){pop(),pop(),pop(),push(p1),push(p3),divide(),p1=pop();break}DEBUG_MULTIPLY&&console.log("__new radical exponent: "+stack[tos-1]),list(3),stack[t]=pop()}return push(p1),push(p2),divide(),stack[e]=pop(),restore()}}},__is_radical_number=function(e){return car(e)===symbol(POWER)&&isNumericAtom(cadr(e))&&isfraction(caddr(e))&&!isminusone(cadr(e))},NROOTS_YMAX=101,NROOTS_DELTA=1e-6,NROOTS_EPSILON=1e-9,NROOTS_ABS=function(e){return Math.sqrt(e.r*e.r+e.i*e.i)},theRandom=0,NROOTS_RANDOM=function(){return 4*Math.random()-2},numericRootOfPolynomial=function(){class e{}return e.prototype.r=0,e.prototype.i=0,e}.call(this),nroots_a=new numericRootOfPolynomial,nroots_b=new numericRootOfPolynomial,nroots_x=new numericRootOfPolynomial,nroots_y=new numericRootOfPolynomial,nroots_fa=new numericRootOfPolynomial,nroots_fb=new numericRootOfPolynomial,nroots_dx=new numericRootOfPolynomial,nroots_df=new numericRootOfPolynomial,nroots_c=[],initNRoots=o=0,ref=NROOTS_YMAX;0<=ref?o<ref:o>ref;initNRoots=0<=ref?++o:--o)nroots_c[initNRoots]=new numericRootOfPolynomial;for(Eval_nroots=function(){var e,t,r,n,i,s,o,a,l;for(0,t=0,i=0,o=0,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("nroots: polynomial?"),e=tos,(o=coeff(p2,p1))>NROOTS_YMAX&&stop("nroots: degree?"),t=r=0,a=o;0<=a?r<a:r>a;t=0<=a?++r:--r)push(stack[e+t]),real(),yyfloat(),Eval(),p1=pop(),push(stack[e+t]),imag(),yyfloat(),Eval(),p2=pop(),isdouble(p1)&&isdouble(p2)||stop("nroots: coefficients?"),nroots_c[t].r=p1.d,nroots_c[t].i=p2.d;for(moveTos(e),monic(o),i=n=o;n>1;i=n+=-1)findroot(i),Math.abs(nroots_a.r)<NROOTS_DELTA&&(nroots_a.r=0),Math.abs(nroots_a.i)<NROOTS_DELTA&&(nroots_a.i=0),push_double(nroots_a.r),push_double(nroots_a.i),push(imaginaryunit),multiply(),add(),NROOTS_divpoly(i);if((o=tos-e)>1){for(sort_stack(o),(p1=alloc_tensor(o)).tensor.ndim=1,p1.tensor.dim[0]=o,t=s=0,l=o;0<=l?s<l:s>l;t=0<=l?++s:--s)p1.tensor.elem[t]=stack[e+t];return moveTos(e),push(p1)}},monic=function(e){var t,r,n,i;for(r=0,0,nroots_y.r=nroots_c[e-1].r,nroots_y.i=nroots_c[e-1].i,i=nroots_y.r*nroots_y.r+nroots_y.i*nroots_y.i,r=t=0,n=e-1;0<=n?t<n:t>n;r=0<=n?++t:--t)nroots_c[r].r=(nroots_c[r].r*nroots_y.r+nroots_c[r].i*nroots_y.i)/i,nroots_c[r].i=(nroots_c[r].i*nroots_y.r-nroots_c[r].r*nroots_y.i)/i;return nroots_c[e-1].r=1,nroots_c[e-1].i=0},findroot=function(e){var t,r,n,i;if(0,0,i=0,NROOTS_ABS(nroots_c[0])<NROOTS_DELTA)return nroots_a.r=0,void(nroots_a.i=0);for(t=0;t<100;++t)for(nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),compute_fa(e),nroots_b.r=nroots_a.r,nroots_b.i=nroots_a.i,nroots_fb.r=nroots_fa.r,nroots_fb.i=nroots_fa.i,nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),r=0;r<1e3;++r){if(compute_fa(e),n=NROOTS_ABS(nroots_fa),DEBUG&&console.log("nrabs: "+n),n<NROOTS_EPSILON)return;if(NROOTS_ABS(nroots_fa)<NROOTS_ABS(nroots_fb)&&(nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_a.r=nroots_b.r,nroots_a.i=nroots_b.i,nroots_b.r=nroots_x.r,nroots_b.i=nroots_x.i,nroots_x.r=nroots_fa.r,nroots_x.i=nroots_fa.i,nroots_fa.r=nroots_fb.r,nroots_fa.i=nroots_fb.i,nroots_fb.r=nroots_x.r,nroots_fb.i=nroots_x.i),nroots_dx.r=nroots_b.r-nroots_a.r,nroots_dx.i=nroots_b.i-nroots_a.i,nroots_df.r=nroots_fb.r-nroots_fa.r,nroots_df.i=nroots_fb.i-nroots_fa.i,0===(i=nroots_df.r*nroots_df.r+nroots_df.i*nroots_df.i))break;nroots_y.r=(nroots_dx.r*nroots_df.r+nroots_dx.i*nroots_df.i)/i,nroots_y.i=(nroots_dx.i*nroots_df.r-nroots_dx.r*nroots_df.i)/i,nroots_a.r=nroots_b.r-(nroots_y.r*nroots_fb.r-nroots_y.i*nroots_fb.i),nroots_a.i=nroots_b.i-(nroots_y.r*nroots_fb.i+nroots_y.i*nroots_fb.r)}return stop("nroots: convergence error")},compute_fa=function(e){var t,r,n,i,s;for(r=0,s=0,nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_fa.r=nroots_c[0].r+nroots_c[1].r*nroots_x.r-nroots_c[1].i*nroots_x.i,nroots_fa.i=nroots_c[0].i+nroots_c[1].r*nroots_x.i+nroots_c[1].i*nroots_x.r,i=[],r=t=2,n=e;2<=n?t<n:t>n;r=2<=n?++t:--t)s=nroots_a.r*nroots_x.r-nroots_a.i*nroots_x.i,nroots_x.i=nroots_a.r*nroots_x.i+nroots_a.i*nroots_x.r,nroots_x.r=s,nroots_fa.r+=nroots_c[r].r*nroots_x.r-nroots_c[r].i*nroots_x.i,i.push(nroots_fa.i+=nroots_c[r].r*nroots_x.i+nroots_c[r].i*nroots_x.r);return i},NROOTS_divpoly=function(e){var t,r,n,i,s,o;for(n=0,n=t=i=e-1;i<=0?t<0:t>0;n=i<=0?++t:--t)nroots_c[n-1].r+=nroots_c[n].r*nroots_a.r-nroots_c[n].i*nroots_a.i,nroots_c[n-1].i+=nroots_c[n].i*nroots_a.r+nroots_c[n].r*nroots_a.i;for(NROOTS_ABS(nroots_c[0])>NROOTS_DELTA&&stop("nroots: residual error"),o=[],n=r=0,s=e-1;0<=s?r<s:r>s;n=0<=s?++r:--r)nroots_c[n].r=nroots_c[n+1].r,o.push(nroots_c[n].i=nroots_c[n+1].i);return o},Eval_numerator=function(){return push(cadr(p1)),Eval(),numerator()},numerator=function(){var e,t;if(e=0,t=pop(),car(t)===symbol(ADD)&&(push(t),rationalize(),t=pop()),car(t)!==symbol(MULTIPLY)||isplusone(car(cdr(t))))return isrational(t)?(push(t),mp_numerator()):car(t)===symbol(POWER)&&isnegativeterm(caddr(t))?push(one):push(t);for(e=tos,t=cdr(t);iscons(t);)push(car(t)),numerator(),t=cdr(t);return multiply_all(tos-e)},Eval_outer=function(){var e;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),e=[];iscons(p1);)push(car(p1)),Eval(),outer(),e.push(p1=cdr(p1));return e},outer=function(){return save(),p2=pop(),p1=pop(),istensor(p1)&&istensor(p2)?yyouter():(push(p1),push(p2),istensor(p1)?tensor_times_scalar():istensor(p2)?scalar_times_tensor():multiply()),restore()},yyouter=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h;for(e=0,r=0,i=0,0,0,(a=p1.tensor.ndim+p2.tensor.ndim)>MAXDIM&&stop("outer: rank of result exceeds maximum"),l=p1.tensor.nelem*p2.tensor.nelem,(p3=alloc_tensor(l)).tensor.ndim=a,e=t=0,u=p1.tensor.ndim;0<=u?t<u:t>u;e=0<=u?++t:--t)p3.tensor.dim[e]=p1.tensor.dim[e];for(r=e,e=n=0,c=p2.tensor.ndim;0<=c?n<c:n>c;e=0<=c?++n:--n)p3.tensor.dim[r+e]=p2.tensor.dim[e];for(i=0,e=s=0,p=p1.tensor.nelem;0<=p?s<p:s>p;e=0<=p?++s:--s)for(r=o=0,h=p2.tensor.nelem;0<=h?o<h:o>h;r=0<=h?++o:--o)push(p1.tensor.elem[e]),push(p2.tensor.elem[r]),multiply(),p3.tensor.elem[i++]=pop();return push(p3)},partition=function(){for(save(),p2=pop(),p1=pop(),push_integer(1),p3=pop(),p4=p3,p1=cdr(p1);iscons(p1);)Find(car(p1),p2)?(push(p4),push(car(p1)),multiply(),p4=pop()):(push(p3),push(car(p1)),multiply(),p3=pop()),p1=cdr(p1);return push(p3),push(p4),restore()},Eval_silentpattern=function(){return Eval_pattern(),pop(),push_symbol(NIL)},Eval_pattern=function(){var e,t,r,n,i;return iscons(cdr(p1))||stop("pattern needs at least a template and a transformed version"),e=car(cdr(p1)),(r=car(cdr(cdr(p1))))===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),i=iscons(cdr(cdr(p1)))?car(cdr(cdr(cdr(p1)))):symbol(NIL),equal(e,r)&&stop("recursive pattern"),n="template: "+print_list(e),n+=" tests: "+print_list(i),DEBUG&&console.log("pattern stringkey: "+n),-1===(t=userSimplificationsInStringForm.indexOf(n))?(userSimplificationsInStringForm.push(n),userSimplificationsInListForm.push(cdr(p1))):(DEBUG&&console.log("pattern already exists, replacing. "+cdr(p1)),userSimplificationsInStringForm[t]=n,userSimplificationsInListForm[t]=cdr(p1)),push_symbol(PATTERN),push(cdr(p1)),list(2)},do_clearPatterns=function(){return userSimplificationsInListForm=[],userSimplificationsInStringForm=[]},Eval_clearpatterns=function(){return do_clearPatterns(),push_symbol(NIL)},Eval_patternsinfo=function(){var e;return""!==(e=patternsinfo())?push(new_string(e)):push_symbol(NIL)},patternsinfo=function(){var e,t,r;for(r="",e=0,t=userSimplificationsInListForm.length;e<t;e++)userSimplificationsInListForm[e],r+=userSimplificationsInListForm+"\n";return r},Eval_polar=function(){return push(cadr(p1)),Eval(),polar()},polar=function(){return evaluatingPolar++,save(),p1=pop(),push(p1),abs(),push(imaginaryunit),push(p1),arg(),multiply(),exponential(),multiply(),evaluatingPolar--,restore()},n_factor_number=0,factor_number=function(){var e;return 0,save(),p1=pop(),equaln(p1,0)||equaln(p1,1)||equaln(p1,-1)?(push(p1),void restore()):(n_factor_number=p1.q.a,e=tos,factor_a(),tos-e>1&&(list(tos-e),push_symbol(MULTIPLY),swap(),cons()),restore())},factor_a=function(){var e,t;for(t=0,n_factor_number.isNegative()&&(n_factor_number=setSignTo(n_factor_number,1),push_integer(-1)),t=e=0;e<1e4;t=++e)if(try_kth_prime(t),0===n_factor_number.compare(1))return;return factor_b()},try_kth_prime=function(e){var t,r,n,i;for(t=0,r=mint(primetab[e]),t=0;;){if(0===n_factor_number.compare(1))return void(t&&push_factor(r,t));if([n,i]=mdivrem(n_factor_number,r),!i.isZero())break;t++,n_factor_number=n}if(t&&push_factor(r,t),-1===mcmp(n,r))return push_factor(n_factor_number,1),n_factor_number=mint(1)},factor_b=function(){var e,t,r,n,i,s,o;for(r=0,n=0,e=mint(1),s=mint(5),o=mint(2),r=1,n=1;;){if(mprime(n_factor_number))return push_factor(n_factor_number,1),0;for(;;){if(esc_flag&&stop("esc"),i=msub(o,s),i=setSignTo(i,1),t=mgcd(i,n_factor_number),!MEQUAL(t,1)){if(push_factor(t,1),0===mcmp(t,n_factor_number))return-1;i=mdiv(n_factor_number,t),s=i=mmod(s,n_factor_number=i),o=i=mmod(o,n_factor_number);break}0==--r&&(o=s,r=n*=2),i=mmul(s,s),s=madd(i,e),s=i=mmod(s,n_factor_number)}}},push_factor=function(e,t){if((p1=new U).k=NUM,p1.q.a=e,p1.q.b=mint(1),push(p1),t>1)return push_symbol(POWER),swap(),(p1=new U).k=NUM,p1.q.a=mint(t),p1.q.b=mint(1),push(p1),list(3)},DEBUG_POWER=!1,Eval_power=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),power()},power=function(){return save(),yypower(),restore()},yypower=function(){var e,t,r,n,i,s,o;if(o=0,p2=pop(),p1=pop(),n=p2,r=p1,DEBUG_POWER&&console.log("POWER: "+p1+" ^ "+p2),equal(p1,one)||isZeroAtomOrTensor(p2))return evaluatingAsFloats?push_double(1):push(one),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(equal(p2,one))return push(p1),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&isminusone(p2))return evaluatingAsFloats?push_double(1):push(one),negate(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&isoneovertwo(p2))return push(imaginaryunit),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&isminusoneovertwo(p2))return push(imaginaryunit),negate(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&!isdouble(p1)&&isrational(p2)&&!isinteger(p2)&&ispositivenumber(p2)&&!evaluatingAsFloats)return DEBUG_POWER&&console.log("   power: -1 ^ rational"),DEBUG_POWER&&console.log(" trick: p2.q.a , p2.q.b "+p2.q.a+" , "+p2.q.b),p2.q.a<p2.q.b?(push_symbol(POWER),push(p1),push(p2),list(3)):(push_symbol(MULTIPLY),push(p1),push_symbol(POWER),push(p1),push_rational(p2.q.a.mod(p2.q.b),p2.q.b),list(3),list(3),DEBUG_POWER&&console.log(" trick applied : "+stack[tos-1])),rect(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isrational(p1)&&isrational(p2))return DEBUG_POWER&&console.log("   power: isrational(p1) && isrational(p2)"),push(p1),push(p2),qpow(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isNumericAtom(p1)&&isNumericAtom(p2))return DEBUG_POWER&&console.log("   power: both base and exponent are either rational or double "),DEBUG_POWER&&console.log("POWER - isNumericAtom(p1) && isNumericAtom(p2)"),push(p1),push(p2),dpow(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(istensor(p1))return DEBUG_POWER&&console.log("   power: istensor(p1) "),power_tensor(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(car(p1)===symbol(ABS)&&iseveninteger(p2)&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))return DEBUG_POWER&&console.log("   power: even power of absolute of real value "),push(cadr(p1)),push(p2),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(p1===symbol(E)&&car(p2)===symbol(LOG))return push(cadr(p2)),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(p1===symbol(E)&&isdouble(p2))return DEBUG_POWER&&console.log("   power: p1 == symbol(E) && isdouble(p2) "),push_double(Math.exp(p2.d)),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(p1===symbol(E)&&0!==Find(p2,imaginaryunit)&&0!==Find(p2,symbol(PI))&&!evaluatingPolar&&(push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER&&console.log("   power: turning complex exponential to rect: "+stack[tos-1]),rect(),t=pop(),0===Find(t,symbol(PI))))return DEBUG_POWER&&console.log("   power: turned complex exponential to rect: "+t),void push(t);if(car(p1)===symbol(MULTIPLY)&&isinteger(p2)){for(DEBUG_POWER&&console.log("   power: (a * b) ^ c  ->  (a ^ c) * (b ^ c) "),p1=cdr(p1),push(car(p1)),push(p2),power(),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),power(),multiply(),p1=cdr(p1);DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1])}else{if(s=!1,isNumericAtom(cadr(p1))&&(s=sign(compare_numbers(cadr(p1),zero))),car(p1)===symbol(POWER)&&(isinteger(p2)||s))return push(cadr(p1)),push(caddr(p1)),push(p2),multiply(),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(e=!1,iseveninteger(caddr(p1))&&(push(caddr(p1)),push(p2),multiply(),i=pop(),isone(i)&&(e=!0)),car(p1)===symbol(POWER)&&e)return DEBUG_POWER&&console.log("   power: car(p1) == symbol(POWER) && b_isEven_and_c_isItsInverse "),push(cadr(p1)),abs(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(expanding&&isadd(p1)&&isNumericAtom(p2)&&(push(p2),(o=pop_integer())>1&&!isNaN(o)))return DEBUG_POWER&&console.log("   power: expanding && isadd(p1) && isNumericAtom(p2) "),power_sum(o),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(1===trigmode&&car(p1)===symbol(SIN)&&iseveninteger(p2))return DEBUG_POWER&&console.log("   power: trigmode == 1 && car(p1) == symbol(SIN) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),cosine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(2===trigmode&&car(p1)===symbol(COS)&&iseveninteger(p2))return DEBUG_POWER&&console.log("   power: trigmode == 2 && car(p1) == symbol(COS) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),sine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(iscomplexnumber(p1)){if(DEBUG_POWER&&console.log(" power - handling the case (a + ib) ^ n"),isinteger(p2))return push(p1),conjugate(),p3=pop(),push(p3),push(p3),push(p1),multiply(),divide(),isone(p2)||(push(p2),negate(),power()),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isNumericAtom(p2))return push(p1),abs(),push(p2),power(),push_integer(-1),push(p1),arg(),push(p2),multiply(),evaluatingAsFloats||iscomplexnumberdouble(p1)&&isdouble(p2)?push_double(Math.PI):push(symbol(PI)),divide(),power(),multiply(),avoidCalculatingPowersIntoArctans&&Find(stack[tos-1],symbol(ARCTAN))&&(pop(),push_symbol(POWER),push(p1),push(p2),list(3)),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]))}if(!simplify_polar())return DEBUG_POWER&&console.log("   power: nothing can be done "),push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER?console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]):void 0;DEBUG_POWER&&console.log("   power: using simplify_polar")}},power_sum=function(e){var t,r,n,i,s,o,a,l,u,c;for(t=[],r=0,i=0,0,o=length(p1)-1,push_frame(o*(e+1)),p1=cdr(p1),r=n=0,l=o;0<=l?n<l:n>l;r=0<=l?++n:--n){for(i=s=0,u=e;0<=u?s<=u:s>=u;i=0<=u?++s:--s)push(car(p1)),push_integer(i),power(),stack[frame+r*(e+1)+i]=pop();p1=cdr(p1)}for(push_integer(e),factorial(),p1=pop(),r=a=0,c=o;0<=c?a<c:a>c;r=0<=c?++a:--a)t[r]=0;return push(zero),multinomial_sum(o,e,t,0,e),pop_frame(o*(e+1))},multinomial_sum=function(e,t,r,n,i){var s,o,a,l,u,c,p;if(o=0,!(n<e-1)){for(r[n]=i,push(p1),o=a=0,c=e;0<=c?a<c:a>c;o=0<=c?++a:--a)push_integer(r[o]),factorial(),divide();for(o=l=0,p=e;0<=p?l<p:l>p;o=0<=p?++l:--l)push(stack[frame+o*(t+1)+r[o]]),multiply();return add()}for(o=s=0,u=i;0<=u?s<=u:s>=u;o=0<=u?++s:--s)r[n]=o,multinomial_sum(e,t,r,n+1,i-o)},simplify_polar=function(){var e;switch(e=0,e=isquarterturn(p2)){case 0:1;break;case 1:return push_integer(1),1;case 2:return push_integer(-1),1;case 3:return push(imaginaryunit),1;case 4:return push(imaginaryunit),negate(),1}if(car(p2)===symbol(ADD)){for(p3=cdr(p2);iscons(p3)&&!(e=isquarterturn(car(p3)));)p3=cdr(p3);switch(e){case 0:return 0;case 1:push_integer(1);break;case 2:push_integer(-1);break;case 3:push(imaginaryunit);break;case 4:push(imaginaryunit),negate()}return push(p2),push(car(p3)),subtract(),exponential(),multiply(),1}return 0},Eval_prime=function(){return push(cadr(p1)),Eval(),prime()},prime=function(){var e;return e=0,((e=pop_integer())<1||e>MAXPRIMETAB)&&stop("prime: Argument out of range."),e=primetab[e-1],push_integer(e)},power_str="^",codeGen=!1,Eval_print=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),printMode),push(symbol(NIL))},Eval_print2dascii=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_2DASCII),push(symbol(NIL))},Eval_printcomputer=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_COMPUTER),push(symbol(NIL))},Eval_printlatex=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_LATEX),push(symbol(NIL))},Eval_printhuman=function(){var e;return e=test_flag,test_flag=0,stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_HUMAN),test_flag=e,push(symbol(NIL))},Eval_printlist=function(){var e;return e=_print(cdr(p1),PRINTMODE_LIST),stringsEmittedByUserPrintouts+=e,push(symbol(NIL))},_print=function(e,t){var r,n;for(r="";iscons(e);)push(car(e)),Eval(),p2=pop(),n=printMode,t===PRINTMODE_COMPUTER?(printMode=PRINTMODE_COMPUTER,r=printline(p2),rememberPrint(r,LAST_FULL_PRINT)):t===PRINTMODE_HUMAN?(printMode=PRINTMODE_HUMAN,r=printline(p2),rememberPrint(r,LAST_PLAIN_PRINT)):t===PRINTMODE_2DASCII?(printMode=PRINTMODE_2DASCII,r=print2dascii(p2),rememberPrint(r,LAST_2DASCII_PRINT)):t===PRINTMODE_LATEX?(printMode=PRINTMODE_LATEX,r=printline(p2),rememberPrint(r,LAST_LATEX_PRINT)):t===PRINTMODE_LIST&&(printMode=PRINTMODE_LIST,r=print_list(p2),rememberPrint(r,LAST_LIST_PRINT)),printMode=n,e=cdr(e);return DEBUG&&console.log("emttedString from display: "+stringsEmittedByUserPrintouts),r},rememberPrint=function(e,t){var r;return scan('"'+e+'"'),r=pop(),set_binding(symbol(t),r)},print_str=function(e){return DEBUG&&console.log("emttedString from print_str: "+stringsEmittedByUserPrintouts),e},print_char=function(e){return e},collectLatexStringFromReturnValue=function(e){var t,r,n;return t=printMode,printMode=PRINTMODE_LATEX,r=codeGen,codeGen=!1,n=(n=print_expr(e)).replace(/_/g,"\\_"),printMode=t,codeGen=r,DEBUG&&console.log("emttedString from collectLatexStringFromReturnValue: "+stringsEmittedByUserPrintouts),n},printline=function(e){var t;return t="",t+=print_expr(e)},print_base_of_denom=function(e){var t;return t="",isfraction(e)||car(e)===symbol(ADD)||car(e)===symbol(MULTIPLY)||car(e)===symbol(POWER)||lessp(e,zero)?(t+=print_char("("),t+=print_expr(e),t+=print_char(")")):t+=print_expr(e),t},print_expo_of_denom=function(e){var t;return t="",isfraction(e)||car(e)===symbol(ADD)||car(e)===symbol(MULTIPLY)||car(e)===symbol(POWER)?(t+=print_char("("),t+=print_expr(e),t+=print_char(")")):t+=print_expr(e),t},print_denom=function(e,t){var r;return r="",save(),p1=cadr(e),p2=caddr(e),isminusone(p2)?(r+=print_base_of_denom(p1),restore(),r):(1===t&&(r+=print_char("(")),push(p2),negate(),p2=pop(),r+=print_power(p1,p2),1===t&&(r+=print_char(")")),restore(),r)},print_a_over_b=function(e){var t,r,n;for(t="",flag=0,n=0,r=0,save(),n=0,r=0,p1=cdr(e),p2=car(p1),isrational(p2)?(push(p2),mp_numerator(),absval(),p3=pop(),push(p2),mp_denominator(),p4=pop(),isplusone(p3)||n++,isplusone(p4)||r++,p1=cdr(p1)):(p3=one,p4=one);iscons(p1);)p2=car(p1),is_denominator(p2)?r++:n++,p1=cdr(p1);if(printMode===PRINTMODE_LATEX&&(t+=print_str("\\frac{")),0===n)t+=print_char("1");else for(flag=0,p1=cdr(e),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p3)||(t+=print_factor(p3),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)?1:(flag&&(t+=print_multiply_sign()),t+=print_factor(p2),flag=1),p1=cdr(p1);for(t+=print_str(printMode===PRINTMODE_LATEX?"}{":printMode!==PRINTMODE_HUMAN||test_flag?"/":" / "),r>1&&printMode!==PRINTMODE_LATEX&&(t+=print_char("(")),flag=0,p1=cdr(e),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p4)||(t+=print_factor(p4),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)&&(flag&&(t+=print_multiply_sign()),t+=print_denom(p2,r),flag=1),p1=cdr(p1);return r>1&&printMode!==PRINTMODE_LATEX&&(t+=print_char(")")),printMode===PRINTMODE_LATEX&&(t+=print_str("}")),restore(),t},print_expr=function(e){var t;if(t="",isadd(e))for(e=cdr(e),"-"===sign_of_term(car(e))&&(t+=print_str("-")),t+=print_term(car(e)),e=cdr(e);iscons(e);)"+"===sign_of_term(car(e))?t+=print_str(printMode!==PRINTMODE_HUMAN||test_flag?"+":" + "):t+=print_str(printMode!==PRINTMODE_HUMAN||test_flag?"-":" - "),t+=print_term(car(e)),e=cdr(e);else"-"===sign_of_term(e)&&(t+=print_str("-")),t+=print_term(e);return t},sign_of_term=function(e){var t;return t="",car(e)===symbol(MULTIPLY)&&isNumericAtom(cadr(e))&&lessp(cadr(e),zero)||isNumericAtom(e)&&lessp(e,zero)?t+="-":t+="+",t},print_term=function(e){var t,r,n,i,s;if(t="",car(e)===symbol(MULTIPLY)&&any_denominators(e))return t+=print_a_over_b(e);if(car(e)===symbol(MULTIPLY)){for(e=cdr(e),isminusone(car(e))&&(e=cdr(e)),s=!1,isNumericAtom(car(e))&&(s=!0),n=!1,printMode===PRINTMODE_LATEX&&iscons(cdr(e))&&isNumberOneOverSomething(car(e))&&(n=!0,r=car(e).q.b.toString()),n?(i=t,t=""):t+=print_factor(car(e)),e=cdr(e);iscons(e);)printMode===PRINTMODE_LATEX&&s&&caar(e)===symbol(POWER)&&isNumericAtom(car(cdr(car(e))))&&(isfraction(car(cdr(cdr(car(e)))))||(t+=" \\cdot ")),t+=print_multiply_sign(),t+=print_factor(car(e),!1,!0),s=!1,isNumericAtom(car(e))&&(s=!0),e=cdr(e);n&&(t=i+"\\frac{"+t+"}{"+r+"}")}else t+=print_factor(e);return t},print_subexpr=function(e){var t;return t="",t+=print_char("("),t+=print_expr(e),t+=print_char(")")},print_factorial_function=function(e){var t;return t="",e=cadr(e),isfraction(e)||car(e)===symbol(ADD)||car(e)===symbol(MULTIPLY)||car(e)===symbol(POWER)||car(e)===symbol(FACTORIAL)?t+=print_subexpr(e):t+=print_expr(e),t+=print_char("!")},print_ABS_latex=function(e){var t;return t="",t+=print_str("\\left |"),t+=print_expr(cadr(e)),t+=print_str(" \\right |")},print_BINOMIAL_latex=function(e){var t;return t="",t+=print_str("\\binom{"),t+=print_expr(cadr(e)),t+=print_str("}{"),t+=print_expr(caddr(e)),t+=print_str("} ")},print_DOT_latex=function(e){var t;return t="",t+=print_expr(cadr(e)),t+=print_str(" \\cdot "),t+=print_expr(caddr(e))},print_DOT_codegen=function(e){var t;return t="dot(",t+=print_expr(cadr(e)),t+=", ",t+=print_expr(caddr(e)),t+=")"},print_SIN_codegen=function(e){var t;return t="Math.sin(",t+=print_expr(cadr(e)),t+=")"},print_COS_codegen=function(e){var t;return t="Math.cos(",t+=print_expr(cadr(e)),t+=")"},print_TAN_codegen=function(e){var t;return t="Math.tan(",t+=print_expr(cadr(e)),t+=")"},print_ARCSIN_codegen=function(e){var t;return t="Math.asin(",t+=print_expr(cadr(e)),t+=")"},print_ARCCOS_codegen=function(e){var t;return t="Math.acos(",t+=print_expr(cadr(e)),t+=")"},print_ARCTAN_codegen=function(e){var t;return t="Math.atan(",t+=print_expr(cadr(e)),t+=")"},print_SQRT_latex=function(e){var t;return t="",t+=print_str("\\sqrt{"),t+=print_expr(cadr(e)),t+=print_str("} ")},print_TRANSPOSE_latex=function(e){var t;return t="",t+=print_str("{"),iscons(cadr(e))&&(t+=print_str("(")),t+=print_expr(cadr(e)),iscons(cadr(e))&&(t+=print_str(")")),t+=print_str("}"),t+=print_str("^T")},print_TRANSPOSE_codegen=function(e){var t;return t="",t+=print_str("transpose("),t+=print_expr(cadr(e)),t+=print_str(")")},print_UNIT_codegen=function(e){var t;return t="",t+=print_str("identity("),t+=print_expr(cadr(e)),t+=print_str(")")},print_INV_latex=function(e){var t;return t="",t+=print_str("{"),iscons(cadr(e))&&(t+=print_str("(")),t+=print_expr(cadr(e)),iscons(cadr(e))&&(t+=print_str(")")),t+=print_str("}"),t+=print_str("^{-1}")},print_INV_codegen=function(e){var t;return t="",t+=print_str("inv("),t+=print_expr(cadr(e)),t+=print_str(")")},print_DEFINT_latex=function(e){var t,r,n,i,s,o,a,l,u;for(t="",r=car(cdr(e)),o=e=cdr(e),s=0;iscons(cdr(cdr(e)));)s++,l=cdr(cdr(e)),t+=print_str("\\int^{"),t+=print_expr(car(cdr(l))),t+=print_str("}_{"),t+=print_expr(car(l)),t+=print_str("} \\! "),e=cdr(l);for(t+=print_expr(r),t+=print_str(" \\,"),e=o,n=i=1,a=s;1<=a?i<=a:i>=a;n=1<=a?++i:--i)u=cdr(e),t+=print_str(" \\mathrm{d} "),t+=print_expr(car(u)),n<s&&(t+=print_str(" \\, ")),e=cdr(cdr(u));return t},print_tensor=function(e){var t;return t="",t+=print_tensor_inner(e,0,0)[1]},print_tensor_inner=function(e,t,r){var n,i,s,o,a,l,u;if(n="",n+=print_str("["),t<e.tensor.ndim-1)for(i=s=0,a=e.tensor.dim[t];0<=a?s<a:s>a;i=0<=a?++s:--s)[r,u]=print_tensor_inner(e,t+1,r),n+=u,i!==e.tensor.dim[t]-1&&(n+=print_str(","));else for(i=o=0,l=e.tensor.dim[t];0<=l?o<l:o>l;i=0<=l?++o:--o)n+=print_expr(e.tensor.elem[r]),i!==e.tensor.dim[t]-1&&(n+=print_str(",")),r++;return[r,n+=print_str("]")]},print_tensor_latex=function(e){var t;return t="",e.tensor.ndim<=2&&(t+=print_tensor_inner_latex(!0,e,0,0)[1]),t},print_tensor_inner_latex=function(e,t,r,n){var i,s,o,a,l,u,c;if(i="",e&&(i+="\\begin{bmatrix} "),r<t.tensor.ndim-1)for(s=o=0,l=t.tensor.dim[r];0<=l?o<l:o>l;s=0<=l?++o:--o)[n,c]=print_tensor_inner_latex(0,t,r+1,n),i+=c,s!==t.tensor.dim[r]-1&&(i+=print_str(" \\\\ "));else for(s=a=0,u=t.tensor.dim[r];0<=u?a<u:a>u;s=0<=u?++a:--a)i+=print_expr(t.tensor.elem[n]),s!==t.tensor.dim[r]-1&&(i+=print_str(" & ")),n++;return e&&(i+=" \\end{bmatrix}"),[n,i]},print_SUM_latex=function(e){var t;return t="\\sum_{",t+=print_expr(caddr(e)),t+="=",t+=print_expr(cadddr(e)),t+="}^{",t+=print_expr(caddddr(e)),t+="}{",t+=print_expr(cadr(e)),t+="}"},print_SUM_codegen=function(e){var t,r,n,i;return t=cadr(e),i=caddr(e),r=cadddr(e),n=caddddr(e),"(function(){ var "+i+";  var holderSum = 0;  var lowerlimit = "+print_expr(r)+";  var upperlimit = "+print_expr(n)+";  for ("+i+" = lowerlimit; "+i+" < upperlimit; "+i+"++) {    holderSum += "+print_expr(t)+"; }  return holderSum;})()"},print_TEST_latex=function(e){var t;for(t="\\left\\{ \\begin{array}{ll}",e=cdr(e);iscons(e);){if(cdr(e)===symbol(NIL)){t+="{",t+=print_expr(car(e)),t+="} & otherwise ",t+=" \\\\\\\\";break}t+="{",t+=print_expr(cadr(e)),t+="} & if & ",t+=print_expr(car(e)),t+=" \\\\\\\\",e=cddr(e)}return(t=t.substring(0,t.length-4))+"\\end{array} \\right."},print_TEST_codegen=function(e){var t,r;for(t="(function(){",e=cdr(e),r=0;iscons(e);){if(cdr(e)===symbol(NIL)){t+="else {",t+="return ("+print_expr(car(e))+");",t+="}";break}r&&(t+=" else "),t+="if ("+print_expr(car(e))+"){",t+="return ("+print_expr(cadr(e))+");",t+="}",r++,e=cddr(e)}return t+="})()"},print_TESTLT_latex=function(e){var t;return t="{",t+=print_expr(cadr(e)),t+="}",t+=" < ",t+="{",(t+=print_expr(caddr(e)))+"}"},print_TESTLE_latex=function(e){var t;return t="{",t+=print_expr(cadr(e)),t+="}",t+=" \\leq ",t+="{",(t+=print_expr(caddr(e)))+"}"},print_TESTGT_latex=function(e){var t;return t="{",t+=print_expr(cadr(e)),t+="}",t+=" > ",t+="{",(t+=print_expr(caddr(e)))+"}"},print_TESTGE_latex=function(e){var t;return t="{",t+=print_expr(cadr(e)),t+="}",t+=" \\geq ",t+="{",(t+=print_expr(caddr(e)))+"}"},print_TESTEQ_latex=function(e){var t;return t="{",t+=print_expr(cadr(e)),t+="}",t+=" = ",t+="{",(t+=print_expr(caddr(e)))+"}"},print_FOR_codegen=function(e){var t,r,n,i;return t=cadr(e),i=caddr(e),r=cadddr(e),n=caddddr(e),"(function(){ var "+i+";  var lowerlimit = "+print_expr(r)+";  var upperlimit = "+print_expr(n)+";  for ("+i+" = lowerlimit; "+i+" < upperlimit; "+i+"++) {    "+print_expr(t)+" } })()"},print_DO_codegen=function(e){var t;for(t="",e=cdr(e);iscons(e);)t+=print_expr(car(e)),e=cdr(e);return t},print_SETQ_codegen=function(e){var t;return t="",t+=print_expr(cadr(e)),t+=" = ",t+=print_expr(caddr(e)),t+="; "},print_PRODUCT_latex=function(e){var t;return t="\\prod_{",t+=print_expr(caddr(e)),t+="=",t+=print_expr(cadddr(e)),t+="}^{",t+=print_expr(caddddr(e)),t+="}{",t+=print_expr(cadr(e)),t+="}"},print_PRODUCT_codegen=function(e){var t,r,n,i;return t=cadr(e),i=caddr(e),r=cadddr(e),n=caddddr(e),"(function(){ var "+i+";  var holderProduct = 1;  var lowerlimit = "+print_expr(r)+";  var upperlimit = "+print_expr(n)+";  for ("+i+" = lowerlimit; "+i+" < upperlimit; "+i+"++) {    holderProduct *= "+print_expr(t)+"; }  return holderProduct;})()"},print_base=function(e){var t;return t="",isadd(cadr(e))||caadr(e)===symbol(MULTIPLY)||caadr(e)===symbol(POWER)||isnegativenumber(cadr(e))?(t+=print_str("("),t+=print_expr(cadr(e)),t+=print_str(")")):isNumericAtom(cadr(e))&&(lessp(cadr(e),zero)||isfraction(cadr(e)))?(t+=print_str("("),t+=print_factor(cadr(e)),t+=print_str(")")):t+=print_factor(cadr(e)),t},print_exponent=function(e){var t;return t="",iscons(caddr(e))||isfraction(caddr(e))||isNumericAtom(caddr(e))&&lessp(caddr(e),zero)?(t+=print_str("("),t+=print_expr(caddr(e)),t+=print_str(")")):t+=print_factor(caddr(e)),t},print_power=function(e,t){var r,n,i,s;if(r="",DEBUG&&console.log("power base: "+e+"  exponent: "+t),isoneovertwo(t))if(equaln(e,2)){if(codeGen)return r+=print_str("Math.SQRT2")}else{if(printMode===PRINTMODE_LATEX)return r+=print_str("\\sqrt{"),r+=print_expr(e),r+=print_str("}");if(codeGen)return r+=print_str("Math.sqrt("),r+=print_expr(e),r+=print_str(")")}if(equaln(get_binding(symbol(PRINT_LEAVE_E_ALONE)),1)&&e===symbol(E))return codeGen?(r+=print_str("Math.exp("),r+=print_expo_of_denom(t),r+=print_str(")")):(printMode===PRINTMODE_LATEX?(r+=print_str("e^{"),r+=print_expr(t),r+=print_str("}")):(r+=print_str("exp("),r+=print_expr(t),r+=print_str(")")),r);if(codeGen)return r+=print_str("Math.pow("),r+=print_base_of_denom(e),r+=print_str(", "),r+=print_expo_of_denom(t),r+=print_str(")");if(equaln(get_binding(symbol(PRINT_LEAVE_X_ALONE)),0)||"x"!==e.printname){if(e!==symbol(E)){if(isminusone(t))return r+=print_str(printMode===PRINTMODE_LATEX?"\\frac{1}{":printMode!==PRINTMODE_HUMAN||test_flag?"1/":"1 / "),iscons(e)&&printMode!==PRINTMODE_LATEX?(r+=print_str("("),r+=print_expr(e),r+=print_str(")")):r+=print_expr(e),printMode===PRINTMODE_LATEX&&(r+=print_str("}")),r;if(isnegativeterm(t))return r+=print_str(printMode===PRINTMODE_LATEX?"\\frac{1}{":printMode!==PRINTMODE_HUMAN||test_flag?"1/":"1 / "),push(t),push_integer(-1),multiply(),i=pop(),iscons(e)&&printMode!==PRINTMODE_LATEX?(r+=print_str("("),r+=print_power(e,i),r+=print_str(")")):r+=print_power(e,i),printMode===PRINTMODE_LATEX&&(r+=print_str("}")),r}if(isfraction(t)&&printMode===PRINTMODE_LATEX)return r+=print_str("\\sqrt"),push(t),denominator(),n=pop(),isplustwo(n)||(r+=print_str("["),r+=print_expr(n),r+=print_str("]")),r+=print_str("{"),push(t),numerator(),s=pop(),r+=print_power(e,t=s),r+=print_str("}")}return printMode===PRINTMODE_LATEX&&isplusone(t)?r+=print_expr(e):(isadd(e)||isnegativenumber(e)?(r+=print_str("("),r+=print_expr(e),r+=print_str(")")):car(e)===symbol(MULTIPLY)||car(e)===symbol(POWER)?(printMode!==PRINTMODE_LATEX&&(r+=print_str("(")),r+=print_factor(e,!0),printMode!==PRINTMODE_LATEX&&(r+=print_str(")"))):isNumericAtom(e)&&(lessp(e,zero)||isfraction(e))?(r+=print_str("("),r+=print_factor(e),r+=print_str(")")):r+=print_factor(e),r+=print_str(printMode!==PRINTMODE_HUMAN||test_flag?"^":power_str),printMode===PRINTMODE_LATEX?print_expr(t).length>1?(r+=print_str("{"),r+=print_expr(t),r+=print_str("}")):r+=print_expr(t):iscons(t)||isfraction(t)||isNumericAtom(t)&&lessp(t,zero)?(r+=print_str("("),r+=print_expr(t),r+=print_str(")")):r+=print_factor(t)),r},print_index_function=function(e){var t;if(t="",e=cdr(e),caar(e)===symbol(ADD)||caar(e)===symbol(MULTIPLY)||caar(e)===symbol(POWER)||caar(e)===symbol(FACTORIAL)?t+=print_subexpr(car(e)):t+=print_expr(car(e)),t+=print_str("["),e=cdr(e),iscons(e))for(t+=print_expr(car(e)),e=cdr(e);iscons(e);)t+=print_str(","),t+=print_expr(car(e)),e=cdr(e);return t+=print_str("]")},print_factor=function(e,t,r){var n,i,s,o,a;if(n="",isNumericAtom(e))return r&&lessp(e,zero)&&(n+="("),n+=print_number(e,r),r&&lessp(e,zero)&&(n+=")"),n;if(isstr(e))return n+=print_str('"'),n+=print_str(e.str),n+=print_str('"');if(istensor(e))return n+=printMode===PRINTMODE_LATEX?print_tensor_latex(e):print_tensor(e);if(car(e)===symbol(MULTIPLY))return t||"-"!==sign_of_term(e)&&printMode===PRINTMODE_LATEX||(n+=print_str(printMode===PRINTMODE_LATEX?" \\left (":"(")),n+=print_expr(e),t||"-"!==sign_of_term(e)&&printMode===PRINTMODE_LATEX||(n+=print_str(printMode===PRINTMODE_LATEX?" \\right ) ":")")),n;if(isadd(e))return t||(n+=print_str("(")),n+=print_expr(e),t||(n+=print_str(")")),n;if(car(e)===symbol(POWER))return i=cadr(e),s=caddr(e),n+=print_power(i,s);if(car(e)===symbol(FUNCTION))return o=cadr(e),codeGen||(a=caddr(e),n+=print_str("function "),DEBUG&&console.log("emittedString from print_factor "+stringsEmittedByUserPrintouts),n+=print_list(a),n+=print_str(" -> ")),n+=print_expr(o);if(car(e)===symbol(PATTERN))return n+=print_expr(caadr(e)),n+=print_str(printMode===PRINTMODE_LATEX?" \\rightarrow ":printMode!==PRINTMODE_HUMAN||test_flag?"->":" -> "),n+=print_expr(car(cdr(cadr(e))));if(car(e)===symbol(INDEX)&&issymbol(cadr(e)))return n+=print_index_function(e);if(car(e)===symbol(FACTORIAL))return n+=print_factorial_function(e);if(car(e)===symbol(ABS)&&printMode===PRINTMODE_LATEX)return n+=print_ABS_latex(e);if(car(e)===symbol(SQRT)&&printMode===PRINTMODE_LATEX)return n+=print_SQRT_latex(e);if(car(e)===symbol(TRANSPOSE)){if(printMode===PRINTMODE_LATEX)return n+=print_TRANSPOSE_latex(e);if(codeGen)return n+=print_TRANSPOSE_codegen(e)}else if(car(e)===symbol(UNIT)){if(codeGen)return n+=print_UNIT_codegen(e)}else if(car(e)===symbol(INV)){if(printMode===PRINTMODE_LATEX)return n+=print_INV_latex(e);if(codeGen)return n+=print_INV_codegen(e)}else{if(car(e)===symbol(BINOMIAL)&&printMode===PRINTMODE_LATEX)return n+=print_BINOMIAL_latex(e);if(car(e)===symbol(DEFINT)&&printMode===PRINTMODE_LATEX)return n+=print_DEFINT_latex(e);if(isinnerordot(e)){if(printMode===PRINTMODE_LATEX)return n+=print_DOT_latex(e);if(codeGen)return n+=print_DOT_codegen(e)}else if(car(e)===symbol(SIN)){if(codeGen)return n+=print_SIN_codegen(e)}else if(car(e)===symbol(COS)){if(codeGen)return n+=print_COS_codegen(e)}else if(car(e)===symbol(TAN)){if(codeGen)return n+=print_TAN_codegen(e)}else if(car(e)===symbol(ARCSIN)){if(codeGen)return n+=print_ARCSIN_codegen(e)}else if(car(e)===symbol(ARCCOS)){if(codeGen)return n+=print_ARCCOS_codegen(e)}else if(car(e)===symbol(ARCTAN)){if(codeGen)return n+=print_ARCTAN_codegen(e)}else if(car(e)===symbol(SUM)){if(printMode===PRINTMODE_LATEX)return n+=print_SUM_latex(e);if(codeGen)return n+=print_SUM_codegen(e)}else if(car(e)===symbol(PRODUCT)){if(printMode===PRINTMODE_LATEX)return n+=print_PRODUCT_latex(e);if(codeGen)return n+=print_PRODUCT_codegen(e)}else if(car(e)===symbol(FOR)){if(codeGen)return n+=print_FOR_codegen(e)}else if(car(e)===symbol(DO)){if(codeGen)return n+=print_DO_codegen(e)}else if(car(e)===symbol(TEST)){if(codeGen)return n+=print_TEST_codegen(e);if(printMode===PRINTMODE_LATEX)return n+=print_TEST_latex(e)}else if(car(e)===symbol(TESTLT)){if(codeGen)return n+="(("+print_expr(cadr(e))+") < ("+print_expr(caddr(e))+"))";if(printMode===PRINTMODE_LATEX)return n+=print_TESTLT_latex(e)}else if(car(e)===symbol(TESTLE)){if(codeGen)return n+="(("+print_expr(cadr(e))+") <= ("+print_expr(caddr(e))+"))";if(printMode===PRINTMODE_LATEX)return n+=print_TESTLE_latex(e)}else if(car(e)===symbol(TESTGT)){if(codeGen)return n+="(("+print_expr(cadr(e))+") > ("+print_expr(caddr(e))+"))";if(printMode===PRINTMODE_LATEX)return n+=print_TESTGT_latex(e)}else if(car(e)===symbol(TESTGE)){if(codeGen)return n+="(("+print_expr(cadr(e))+") >= ("+print_expr(caddr(e))+"))";if(printMode===PRINTMODE_LATEX)return n+=print_TESTGE_latex(e)}else if(car(e)===symbol(TESTEQ)){if(codeGen)return n+="(("+print_expr(cadr(e))+") === ("+print_expr(caddr(e))+"))";if(printMode===PRINTMODE_LATEX)return n+=print_TESTEQ_latex(e)}else if(car(e)===symbol(FLOOR)){if(codeGen)return n+="Math.floor("+print_expr(cadr(e))+")";if(printMode===PRINTMODE_LATEX)return n+=" \\lfloor {"+print_expr(cadr(e))+"} \\rfloor "}else if(car(e)===symbol(CEILING)){if(codeGen)return n+="Math.ceiling("+print_expr(cadr(e))+")";if(printMode===PRINTMODE_LATEX)return n+=" \\lceil {"+print_expr(cadr(e))+"} \\rceil "}else if(car(e)===symbol(ROUND)){if(codeGen)return n+="Math.round("+print_expr(cadr(e))+")"}else if(car(e)===symbol(SETQ))return codeGen?n+=print_SETQ_codegen(e):(n+=print_expr(cadr(e)),n+=print_str("="),n+=print_expr(caddr(e)))}if(iscons(e)){if(n+=print_factor(car(e)),e=cdr(e),t||(n+=print_str("(")),iscons(e))for(n+=print_expr(car(e)),e=cdr(e);iscons(e);)n+=print_str(","),n+=print_expr(car(e)),e=cdr(e);return t||(n+=print_str(")")),n}return e===symbol(DERIVATIVE)?n+=print_char("d"):e===symbol(E)?n+=print_str(codeGen?"Math.E":"e"):e===symbol(PI)?n+=print_str(printMode===PRINTMODE_LATEX?"\\pi":"pi"):n+=print_str(get_printname(e)),n},print_list=function(e){var t;switch(t="",e.k){case CONS:for(t+="(",t+=print_list(car(e)),e===cdr(e)&&e!==symbol(NIL)&&console.log("oh no recursive!"),e=cdr(e);iscons(e);)t+=" ",t+=print_list(car(e)),(e=cdr(e))===cdr(e)&&e!==symbol(NIL)&&console.log("oh no recursive!");e!==symbol(NIL)&&(t+=" . ",t+=print_list(e)),t+=")";break;case STR:t+=e.str;break;case NUM:case DOUBLE:t+=print_number(e,!0);break;case SYM:t+=get_printname(e);break;default:t+="<tensor>"}return t},print_multiply_sign=function(){var e;if(e="",printMode===PRINTMODE_LATEX){if(printMode!==PRINTMODE_HUMAN||test_flag)return e;e+=print_str(" ")}return e+=print_str(printMode!==PRINTMODE_HUMAN||test_flag||codeGen?"*":" ")},is_denominator=function(e){return car(e)===symbol(POWER)&&cadr(e)!==symbol(E)&&isnegativeterm(caddr(e))?1:0},any_denominators=function(e){var t;for(e=cdr(e);iscons(e);){if(t=car(e),is_denominator(t))return 1;e=cdr(e)}return 0},YMAX=1e4,glyph=function(){class e{}return e.prototype.c=0,e.prototype.x=0,e.prototype.y=0,e}.call(this),chartab=[],charTabIndex=i1=0,ref1=YMAX;0<=ref1?i1<ref1:i1>ref1;charTabIndex=0<=ref1?++i1:--i1)chartab[charTabIndex]=new glyph;for(yindex=0,level=0,emit_x=0,expr_level=0,display_flag=0,printchar_nowrap=function(e){var t;return t="",t+=e},printchar=function(e){return printchar_nowrap(e)},print2dascii=function(e){var t,r,n,i;return r=0,n=0,i=0,save(),yindex=0,level=0,emit_x=0,emit_top_expr(e),[r,n,i]=get_size(0,yindex),n>100?(printline(e),void restore()):(t=print_glyphs(),restore(),t)},emit_top_expr=function(e){return car(e)===symbol(SETQ)?(emit_expr(cadr(e)),__emit_str(" = "),void emit_expr(caddr(e))):istensor(e)?emit_tensor(e):emit_expr(e)},will_be_displayed_as_fraction=function(e){if(level>0)return 0;if(isfraction(e))return 1;if(car(e)!==symbol(MULTIPLY))return 0;if(isfraction(cadr(e)))return 1;for(;iscons(e);){if(isdenominator(car(e)))return 1;e=cdr(e)}return 0},emit_expr=function(e){if(expr_level++,car(e)===symbol(ADD))for(e=cdr(e),__is_negative(car(e))&&(__emit_char("-"),will_be_displayed_as_fraction(car(e))&&__emit_char(" ")),emit_term(car(e)),e=cdr(e);iscons(e);)__is_negative(car(e))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(e)),e=cdr(e);else __is_negative(e)&&(__emit_char("-"),will_be_displayed_as_fraction(e)&&__emit_char(" ")),emit_term(e);return expr_level--},emit_unsigned_expr=function(e){var t;if(car(e)===symbol(ADD)){for(e=cdr(e),emit_term(car(e)),e=cdr(e),t=[];iscons(e);)__is_negative(car(e))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(e)),t.push(e=cdr(e));return t}return emit_term(e)},__is_negative=function(e){return isnegativenumber(e)||car(e)===symbol(MULTIPLY)&&isnegativenumber(cadr(e))?1:0},emit_term=function(e){var t;return car(e)===symbol(MULTIPLY)?(t=count_denominators(e))&&0===level?emit_fraction(e,t):emit_multiply(e,t):emit_factor(e)},isdenominator=function(e){return car(e)===symbol(POWER)&&cadr(e)!==symbol(E)&&__is_negative(caddr(e))?1:0},count_denominators=function(e){var t,r;for(t=0,e=cdr(e);iscons(e);)r=car(e),isdenominator(r)&&t++,e=cdr(e);return t},emit_multiply=function(e,t){var r;if(0===t){for(e=cdr(e),(isplusone(car(e))||isminusone(car(e)))&&(e=cdr(e)),emit_factor(car(e)),e=cdr(e),r=[];iscons(e);)__emit_char(" "),emit_factor(car(e)),r.push(e=cdr(e));return r}return emit_numerators(e),__emit_char("/"),t>1||isfraction(cadr(e))?(__emit_char("("),emit_denominators(e),__emit_char(")")):emit_denominators(e)},emit_fraction=function(e,t){var r,n,i,s,o;for(r=0,0,0,s=0,0,save(),p3=one,p4=one,isrational(cadr(e))&&(push(cadr(e)),mp_numerator(),absval(),p3=pop(),push(cadr(e)),mp_denominator(),p4=pop()),isdouble(cadr(e))&&(push(cadr(e)),absval(),p3=pop()),s=isplusone(p3)?0:1,p1=cdr(e),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)?1:s++,p1=cdr(p1);for(o=emit_x,n=yindex,r=0,isplusone(p3)||(emit_number(p3,0),r++),p1=cdr(e),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)?1:(r>0&&__emit_char(" "),1===s?emit_expr(p2):emit_factor(p2),r++),p1=cdr(p1);for(0===r&&__emit_char("1"),i=yindex,r=0,isplusone(p4)||(emit_number(p4,0),r++,t++),p1=cdr(e),isrational(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)&&(r>0&&__emit_char(" "),emit_denominator(p2,t),r++),p1=cdr(p1);return fixup_fraction(o,n,i),restore()},emit_numerators=function(e){var t;for(save(),t=0,p1=one,e=cdr(e),isrational(car(e))?(push(car(e)),mp_numerator(),absval(),p1=pop(),e=cdr(e)):isdouble(car(e))&&(push(car(e)),absval(),p1=pop(),e=cdr(e)),t=0,isplusone(p1)||(emit_number(p1,0),t++);iscons(e);)isdenominator(car(e))?1:(t>0&&__emit_char(" "),emit_factor(car(e)),t++),e=cdr(e);return 0===t&&__emit_char("1"),restore()},emit_denominators=function(e){var t;for(save(),t=0,e=cdr(e),isfraction(car(e))&&(push(car(e)),mp_denominator(),p1=pop(),emit_number(p1,0),t++,e=cdr(e));iscons(e);)isdenominator(car(e))&&(t>0&&__emit_char(" "),emit_denominator(car(e),0),t++),e=cdr(e);return restore()},emit_factor=function(e){istensor(e)?emit_flat_tensor(e):isdouble(e)?emit_number(e,0):car(e)!==symbol(ADD)&&car(e)!==symbol(MULTIPLY)?car(e)!==symbol(POWER)?iscons(e)?emit_function(e):isNumericAtom(e)?0===level?emit_numerical_fraction(e):emit_number(e,0):issymbol(e)?emit_symbol(e):isstr(e)&&emit_string(e):emit_power(e):emit_subexpr(e)},emit_numerical_fraction=function(e){var t,r,n;return 0,0,0,save(),push(e),mp_numerator(),absval(),p3=pop(),push(e),mp_denominator(),p4=pop(),isplusone(p4)?(emit_number(p3,0),void restore()):(n=emit_x,t=yindex,emit_number(p3,0),r=yindex,emit_number(p4,0),fixup_fraction(n,t,r),restore())},isfactor=function(e){return iscons(e)&&car(e)!==symbol(ADD)&&car(e)!==symbol(MULTIPLY)&&car(e)!==symbol(POWER)||issymbol(e)?1:isfraction(e)||isnegativenumber(e)?0:isNumericAtom(e)?1:0},emit_power=function(e){var t,r,n;return t=0,r=0,n=0,cadr(e)===symbol(E)?(__emit_str("exp("),emit_expr(caddr(e)),void __emit_char(")")):level>0?void(isminusone(caddr(e))?(__emit_char("1"),__emit_char("/"),isfactor(cadr(e))?emit_factor(cadr(e)):emit_subexpr(cadr(e))):(isfactor(cadr(e))?emit_factor(cadr(e)):emit_subexpr(cadr(e)),__emit_char("^"),isfactor(caddr(e))?emit_factor(caddr(e)):emit_subexpr(caddr(e)))):__is_negative(caddr(e))?(n=emit_x,t=yindex,__emit_char("1"),r=yindex,emit_denominator(e,1),void fixup_fraction(n,t,r)):(t=yindex,isfactor(cadr(e))?emit_factor(cadr(e)):emit_subexpr(cadr(e)),r=yindex,level++,emit_expr(caddr(e)),level--,fixup_power(t,r))},emit_denominator=function(e,t){var r,n;if(0,0,!isminusone(caddr(e)))return r=yindex,isfactor(cadr(e))?emit_factor(cadr(e)):emit_subexpr(cadr(e)),n=yindex,level++,emit_unsigned_expr(caddr(e)),level--,fixup_power(r,n);1===t?emit_expr(cadr(e)):emit_factor(cadr(e))},emit_function=function(e){if(car(e)===symbol(INDEX)&&issymbol(cadr(e)))emit_index_function(e);else{if(car(e)!==symbol(FACTORIAL)){if(car(e)===symbol(DERIVATIVE)?__emit_char("d"):emit_symbol(car(e)),__emit_char("("),e=cdr(e),iscons(e))for(emit_expr(car(e)),e=cdr(e);iscons(e);)__emit_char(","),emit_expr(car(e)),e=cdr(e);return __emit_char(")")}emit_factorial_function(e)}},emit_index_function=function(e){if(e=cdr(e),caar(e)===symbol(ADD)||caar(e)===symbol(MULTIPLY)||caar(e)===symbol(POWER)||caar(e)===symbol(FACTORIAL)?emit_subexpr(car(e)):emit_expr(car(e)),__emit_char("["),e=cdr(e),iscons(e))for(emit_expr(car(e)),e=cdr(e);iscons(e);)__emit_char(","),emit_expr(car(e)),e=cdr(e);return __emit_char("]")},emit_factorial_function=function(e){return e=cadr(e),isfraction(e)||car(e)===symbol(ADD)||car(e)===symbol(MULTIPLY)||car(e)===symbol(POWER)||car(e)===symbol(FACTORIAL)?emit_subexpr(e):emit_expr(e),__emit_char("!")},emit_subexpr=function(e){return __emit_char("("),emit_expr(e),__emit_char(")")},emit_symbol=function(e){var t,r,n,i,s;if(t=0,e!==symbol(E)){for(s=[],t=r=0,i=(n=get_printname(e)).length;0<=i?r<i:r>i;t=0<=i?++r:--r)s.push(__emit_char(n[t]));return s}__emit_str("exp(1)")},emit_string=function(e){var t,r,n,i;for(t=0,n=e.str,__emit_char('"'),t=r=0,i=n.length;0<=i?r<i:r>i;t=0<=i?++r:--r)__emit_char(n[t]);return __emit_char('"')},fixup_fraction=function(e,t,r){var n,i,s,o,a,l,u,c,p,h,d;for(n=0,0,0,u=0,0,i=0,c=0,h=0,s=0,p=0,d=0,[i,c,h]=get_size(t,r),[s,p,d]=get_size(r,yindex),n=p>c?(p-c)/2:0,n++,move(t,r,n,-(h+i-1)-1),n=p>c?-c:(c-p)/2-c,n++,move(r,yindex,n,1-d),u=p>c?p:c,emit_x=e,l=[],o=0,a=u+=2;0<=a?o<a:o>a;0<=a?++o:--o)l.push(__emit_char("-"));return l},fixup_power=function(e,t){var r,n,i,s,o,a,l;return r=0,n=0,s=0,a=0,i=0,o=0,l=0,[n,s,a]=get_size(e,t),[i,o,l]=get_size(t,yindex),r=-l-i+1,move(t,yindex,0,r+=a-1)},move=function(e,t,r,n){var i,s,o,a,l;for(i=0,l=[],i=s=o=e,a=t;o<=a?s<a:s>a;i=o<=a?++s:--s)chartab[i].x+=r,l.push(chartab[i].y+=n);return l},get_size=function(e,t){var r,n,i,s,o,a,l,u;for(r=0,o=chartab[e].x,i=chartab[e].x,a=chartab[e].y,s=chartab[e].y,r=n=l=e+1,u=t;l<=u?n<u:n>u;r=l<=u?++n:--n)chartab[r].x<o&&(o=chartab[r].x),chartab[r].x>i&&(i=chartab[r].x),chartab[r].y<a&&(a=chartab[r].y),chartab[r].y>s&&(s=chartab[r].y);return[s-a+1,i-o+1,a]},displaychar=function(e){return __emit_char(e)},__emit_char=function(e){if(yindex!==YMAX)return chartab[yindex],chartab[yindex].c=e,chartab[yindex].x=emit_x,chartab[yindex].y=0,yindex++,emit_x++},__emit_str=function(e){var t,r,n,i;for(t=0,i=[],t=r=0,n=e.length;0<=n?r<n:r>n;t=0<=n?++r:--r)i.push(__emit_char(e[t]));return i},emit_number=function(e,t){var r,n,i,s,o,a,l,u,c,p;switch(p="",r=0,e.k){case NUM:for("-"===(p=e.q.a.toString())[0]&&0===t&&(p=p.substring(1)),r=n=0,o=p.length;0<=o?n<o:n>o;r=0<=o?++n:--n)__emit_char(p[r]);if("1"===(p=e.q.b.toString()))break;for(__emit_char("/"),u=[],r=i=0,a=p.length;0<=a?i<a:i>a;r=0<=a?++i:--i)u.push(__emit_char(p[r]));return u;case DOUBLE:for("-"===(p=doubleToReasonableString(e.d))[0]&&0===t&&(p=p.substring(1)),c=[],r=s=0,l=p.length;0<=l?s<l:s>l;r=0<=l?++s:--s)c.push(__emit_char(p[r]));return c}},cmpGlyphs=function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0},print_glyphs=function(){var e,t,r,n,i,s,o;for(t=0,e="",(i=chartab.slice(0,yindex)).sort(cmpGlyphs),s=0,o=(chartab=[].concat(i).concat(chartab.slice(yindex)))[0].y,t=r=0,n=yindex;0<=n?r<n:r>n;t=0<=n?++r:--r){for(;chartab[t].y>o;)e+=printchar("\n"),s=0,o++;for(;chartab[t].x>s;)e+=printchar_nowrap(" "),s++;e+=printchar_nowrap(chartab[t].c),s++}return e},buffer="",getdisplaystr=function(){return yindex=0,level=0,emit_x=0,emit_expr(pop()),fill_buf(),buffer},fill_buf=function(){var e,t,r,n,i,s,o,a;for(s=buffer,n=0,e=0,(i=chartab.slice(0,yindex)).sort(cmpGlyphs),o=0,a=(chartab=[].concat(i).concat(chartab.slice(yindex)))[0].y,e=t=0,r=yindex;0<=r?t<r:t>r;e=0<=r?++t:--t){for(;chartab[e].y>a;)s[n++]="\n",o=0,a++;for(;chartab[e].x>o;)s[n++]=" ",o++;s[n++]=chartab[e].c,o++}return s[n++]="\n"},N=100,oneElement=function(){class e{}return e.prototype.x=0,e.prototype.y=0,e.prototype.h=0,e.prototype.w=0,e.prototype.index=0,e.prototype.count=0,e}.call(this),elem=[],elelmIndex=j1=0;j1<1e4;elelmIndex=++j1)elem[elelmIndex]=new oneElement;SPACE_BETWEEN_COLUMNS=3,SPACE_BETWEEN_ROWS=1,emit_tensor=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w;if(o=0,0,0,p=0,0,0,0,0,r=0,n=0,i=0,s=0,v=0,t=0,e.tensor.ndim>2)emit_flat_tensor(e);else{if(!((u=(h=e.tensor.dim[0])*(p=2===e.tensor.ndim?e.tensor.dim[1]:1))>N)){for(x=emit_x,o=a=0,f=u;0<=f?a<f:a>f;o=0<=f?++a:--a)elem[o].index=yindex,elem[o].x=emit_x,emit_expr(e.tensor.elem[o]),elem[o].count=yindex-elem[o].index,[elem[o].h,elem[o].w,elem[o].y]=get_size(elem[o].index,yindex);for(i=0,s=0,o=l=0,m=u;0<=m?l<m:l>m;o=0<=m?++l:--l)elem[o].h>i&&(i=elem[o].h),elem[o].w>s&&(s=elem[o].w);for(b=p*s+(p-1)*SPACE_BETWEEN_COLUMNS,w=-(h*i+(h-1)*SPACE_BETWEEN_ROWS)/2,v=c=0,g=h;0<=g?c<g:c>g;v=0<=g?++c:--c)for(t=d=0,y=p;0<=y?d<y:d>y;t=0<=y?++d:--d)r=x-elem[o=v*p+t].x,n=w-elem[o].y,move(elem[o].index,elem[o].index+elem[o].count,r,n),r=0,t>0&&(r=t*(s+SPACE_BETWEEN_COLUMNS)),n=0,v>0&&(n=v*(i+SPACE_BETWEEN_ROWS)),r+=(s-elem[o].w)/2,n+=(i-elem[o].h)/2,move(elem[o].index,elem[o].index+elem[o].count,r,n);return emit_x=x+b}emit_flat_tensor(e)}},emit_flat_tensor=function(e){return emit_tensor_inner(e,0,0)},emit_tensor_inner=function(e,t,r){var n,i,s;for(n=0,__emit_char("("),n=i=0,s=e.tensor.dim[t];0<=s?i<s:i>s;n=0<=s?++i:--i)t+1===e.tensor.ndim?(emit_expr(e.tensor.elem[r]),r+=1):r=emit_tensor_inner(e,t+1,r),n+1<e.tensor.dim[t]&&__emit_char(",");return __emit_char(")"),r},Eval_product=function(){var e,t,r,n,i,s,o,a,l;if(t=0,0,0,e=cadr(p1),r=caddr(p1),issymbol(r)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n))push(p1);else{if(push(caddddr(p1)),Eval(),i=pop_integer(),!isNaN(i)){for(o=get_binding(r),push_integer(1),t=s=a=n,l=i;a<=l?s<=l:s>=l;t=a<=l?++s:--s)push_integer(t),p5=pop(),set_binding(r,p5),push(e),Eval(),DEBUG&&(console.log("product - factor 1: "+stack[tos-1].toString()),console.log("product - factor 2: "+stack[tos-2].toString())),multiply(),DEBUG&&console.log("product - result: "+stack[tos-1].toString());return set_binding(r,o)}push(p1)}},qadd=function(){var e,t,r,n,i,s,o,a;if(s=pop(),i=pop(),t=mmul(i.q.a,s.q.b),r=mmul(i.q.b,s.q.a),o=madd(t,r),!MZERO(o))return n=mmul(i.q.b,s.q.b),e=mgcd(o,n),e=makeSignSameAs(e,n),(a=new U).k=NUM,a.q.a=mdiv(o,e),a.q.b=mdiv(n,e),push(a);push(zero)},qdiv=function(){var e,t,r;return save(),p2=pop(),p1=pop(),MZERO(p2.q.a)&&stop("divide by zero"),MZERO(p1.q.a)?(push(zero),void restore()):(e=mmul(p1.q.a,p2.q.b),t=mmul(p1.q.b,p2.q.a),r=mgcd(e,t),r=makeSignSameAs(r,t),(p1=new U).k=NUM,p1.q.a=mdiv(e,r),p1.q.b=mdiv(t,r),push(p1),restore())},qmul=function(){var e,t,r;return save(),p2=pop(),p1=pop(),MZERO(p1.q.a)||MZERO(p2.q.a)?(push(zero),void restore()):(e=mmul(p1.q.a,p2.q.a),t=mmul(p1.q.b,p2.q.b),r=mgcd(e,t),r=makeSignSameAs(r,t),(p1=new U).k=NUM,p1.q.a=mdiv(e,r),p1.q.b=mdiv(t,r),push(p1),restore())},qpow=function(){return save(),qpowf(),restore()},qpowf=function(){var e,t,r,n,i,s;if(r=0,p2=pop(),p1=pop(),isplusone(p1)||isZeroAtomOrTensor(p2))push_integer(1);else if(isminusone(p1)&&isoneovertwo(p2))push(imaginaryunit);else{if(isZeroAtomOrTensor(p1))return isnegativenumber(p2)&&stop("divide by zero"),void push(zero);if(!isplusone(p2))return isinteger(p2)?(push(p2),r=pop_integer(),isNaN(r)?(push_symbol(POWER),push(p1),push(p2),void list(3)):(i=mpow(p1.q.a,Math.abs(r)),s=mpow(p1.q.b,Math.abs(r)),r<0&&(n=i,i=makeSignSameAs(i=s,s=n),s=makePositive(s)),(p3=new U).k=NUM,p3.q.a=i,p3.q.b=s,void push(p3))):isminusone(p1)?(push(p2),void normalize_angle()):isnegativenumber(p1)?(push(p1),negate(),push(p2),qpow(),push_integer(-1),push(p2),qpow(),void multiply()):isinteger(p1)?is_small_integer(p1)?(push(p1),push(p2),void quickfactor()):isSmall(p2.q.a)&&isSmall(p2.q.b)?(e=p2.q.a,t=p2.q.b,0===(i=mroot(p1.q.a,t))?(push_symbol(POWER),push(p1),push(p2),void list(3)):(s=mpow(i,e),(p3=new U).k=NUM,p2.q.a.isNegative()?(p3.q.a=bigInt(1),p3.q.b=s):(p3.q.a=s,p3.q.b=bigInt(1)),push(p3))):(push_symbol(POWER),push(p1),push(p2),void list(3)):(push(p1),mp_numerator(),push(p2),qpow(),push(p1),mp_denominator(),push(p2),negate(),qpow(),void multiply());push(p1)}},normalize_angle=function(){return save(),p1=pop(),isinteger(p1)?(p1.q.a.isOdd()?push_integer(-1):push_integer(1),void restore()):(push(p1),bignum_truncate(),p2=pop(),isnegativenumber(p1)&&(push(p2),push_integer(-1),add(),p2=pop()),push(p1),push(p2),subtract(),p3=pop(),push_symbol(POWER),push_integer(-1),push(p3),list(3),p2.q.a.isOdd()&&negate(),restore())},is_small_integer=function(e){return isSmall(e.q.a)},quickfactor=function(){var e,t,r,n,i,s;for(t=0,save(),p2=pop(),p1=pop(),e=tos,push(p1),factor_small_number(),s=e,t=r=0,i=n=tos-e;r<i;t=r+=2)push(stack[s+t]),push(stack[s+t+1]),push(p2),multiply(),quickpower();return multiply_all(tos-e-n),p1=pop(),moveTos(e),push(p1),restore()},quickpower=function(){var e;return 0,save(),p2=pop(),p1=pop(),push(p2),bignum_truncate(),p3=pop(),push(p2),push(p3),subtract(),p4=pop(),isZeroAtomOrTensor(p4)||(push_symbol(POWER),push(p1),push(p4),list(3)),push(p3),e=pop_integer(),isNaN(e)?(push_symbol(POWER),push(p1),push(p3),list(3),void restore()):0!==e?(push(p1),bignum_power_number(e),restore()):void restore()},Eval_quotient=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),(p1=pop())===symbol(NIL)&&(p1=symbol(SYMBOL_X)),push(p1),divpoly()},divpoly=function(){var e,t,r,n,i,s,o,a,l;for(0,n=0,s=0,0,l=0,save(),p3=pop(),p2=pop(),p1=pop(),r=tos,e=tos,s=coeff(p3,p1)-1,t=tos,l=s-(o=coeff(p3,p2)-1),push_integer(0),p5=pop();l>=0;){for(push(stack[e+s]),push(stack[t+o]),divide(),p4=pop(),n=i=0,a=o;0<=a?i<=a:i>=a;n=0<=a?++i:--i)push(stack[e+l+n]),push(stack[t+n]),push(p4),multiply(),subtract(),stack[e+l+n]=pop();push(p5),push(p4),push(p3),push_integer(l),power(),multiply(),add(),p5=pop(),s--,l--}return moveTos(r),push(p5),restore()},DEBUG_RATIONALIZE=!1,Eval_rationalize=function(){return push(cadr(p1)),Eval(),rationalize()},rationalize=function(){var e;return e=expanding,yyrationalize(),expanding=e},yyrationalize=function(){var e,t,r;if(r=pop(),istensor(r))__rationalize_tensor(r);else{if(expanding=0,car(r)===symbol(ADD)){for(DEBUG_RATIONALIZE&&console.log("rationalize: this is the input expr: "+r),push(one),multiply_denominators(r),e=pop(),DEBUG_RATIONALIZE&&console.log("rationalize: this is the new denominator: "+e),push(zero),t=cdr(r);iscons(t);)DEBUG_RATIONALIZE&&console.log("term: "+car(t)),push(e),push(car(t)),multiply(),add(),t=cdr(t);return DEBUG_RATIONALIZE&&console.log("rationalize: original terms times new denominator: "+stack[tos-1]),Condense(),DEBUG_RATIONALIZE&&console.log("rationalize: after factoring: "+stack[tos-1]),push(e),divide(),DEBUG_RATIONALIZE?console.log("rationalize: after dividing by new denom. (and we're done): "+stack[tos-1]):void 0}push(r)}},multiply_denominators=function(e){var t;if(car(e)===symbol(ADD)){for(e=cdr(e),t=[];iscons(e);)multiply_denominators_term(car(e)),t.push(e=cdr(e));return t}return multiply_denominators_term(e)},multiply_denominators_term=function(e){var t;if(car(e)===symbol(MULTIPLY)){for(e=cdr(e),t=[];iscons(e);)multiply_denominators_factor(car(e)),t.push(e=cdr(e));return t}return multiply_denominators_factor(e)},multiply_denominators_factor=function(e){if(car(e)===symbol(POWER))return push(e),e=caddr(e),isnegativenumber(e)||car(e)===symbol(MULTIPLY)&&isnegativenumber(cadr(e))?(inverse(),void __lcm()):pop()},__rationalize_tensor=function(e){var t,r,n;if(t=0,push(e),Eval(),e=pop(),istensor(e)){for(t=r=0,n=e.tensor.nelem;0<=n?r<n:r>n;t=0<=n?++r:--r)push(e.tensor.elem[t]),rationalize(),e.tensor.elem[t]=pop();return check_tensor_dimensions(e),push(e)}push(e)},__lcm=function(){return save(),p1=pop(),p2=pop(),push(p1),push(p2),multiply(),push(p1),push(p2),gcd(),divide(),restore()},Eval_real=function(){return push(cadr(p1)),Eval(),real()},real=function(){return save(),rect(),p1=pop(),push(p1),push(p1),conjugate(),add(),push_integer(2),divide(),restore()},DEBUG_RECT=!1,Eval_rect=function(){return push(cadr(p1)),Eval(),rect()},rect=function(){var e;if(save(),e=p1=pop(),DEBUG_RECT&&console.log("RECT of "+e),DEBUG_RECT&&console.log("any clock forms in : "+e+" ? "+findPossibleClockForm(e)),issymbol(p1))DEBUG_RECT&&console.log(" rect: simple symbol: "+e),isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(YYRECT),push(p1),list(2)):push(p1);else if(isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))||findPossibleExponentialForm(p1)||findPossibleClockForm(p1)||Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&Find(p1,imaginaryunit))if(car(p1)===symbol(MULTIPLY)&&isimaginaryunit(cadr(p1))&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))push(p1);else if(car(p1)===symbol(ADD))for(DEBUG_RECT&&console.log(" rect - "+e+" is a sum "),push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),rect(),add(),p1=cdr(p1);else DEBUG_RECT&&console.log(" rect - "+e+" is NOT a sum "),push(p1),abs(),DEBUG_RECT&&console.log(" rect - "+e+" abs: "+stack[tos-1].toString()),push(p1),arg(),DEBUG_RECT&&console.log(" rect - "+e+" arg of "+p1+" : "+stack[tos-1].toString()),p1=pop(),push(p1),cosine(),DEBUG_RECT&&console.log(" rect - "+e+" cosine: "+stack[tos-1].toString()),push(imaginaryunit),push(p1),sine(),DEBUG_RECT&&console.log(" rect - "+e+" sine: "+stack[tos-1].toString()),multiply(),DEBUG_RECT&&console.log(" rect - "+e+" i * sine: "+stack[tos-1].toString()),add(),DEBUG_RECT&&console.log(" rect - "+e+" cos + i * sine: "+stack[tos-1].toString()),multiply();else DEBUG_RECT&&console.log(" rect: simple symbol: "+e),push(p1);if(restore(),DEBUG_RECT)return console.log("rect of "+e+" : "+stack[tos-1])},show_power_debug=!1,performing_roots=!1,Eval_roots=function(){return p2=cadr(p1),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):(push(p2),Eval(),p2=pop(),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):push(p2)),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("roots: 1st argument is not a polynomial in the variable "+p2),push(p1),push(p2),roots()},hasImaginaryCoeff=function(e){var t,r,n;for(r=!1,tos,t=n=e;n>0;t=n+=-1)if(iscomplexnumber(stack[tos-t])){r=!0;break}return r},isSimpleRoot=function(e){var t,r,n;if(e>2){for(r=!0,tos,isZeroAtomOrTensor(stack[tos-e])&&(r=!1),t=n=e-1;n>1;t=n+=-1)if(!isZeroAtomOrTensor(stack[tos-t])){r=!1;break}}else r=!1;return r},normalisedCoeff=function(e,t){var r,n,i,s,o,a,l,u;for(i=coeff(e,t),r=stack[tos-1],a=[],n=s=1,l=i;1<=l?s<=l:s>=l;n=1<=l?++s:--s)a.push(pop());for(n=o=u=i-1;u<=0?o<=0:o>=0;n=u<=0?++o:--o)push(a[n]),push(r),divide();return i},roots=function(){var e,t,r,n,i,s,o,a;if(0,t=0,0,DEBUG&&console.log("roots: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),recursionLevelNestedRadicalsRemoval>1)return pop(),pop(),push(symbol(NIL)),void restore();if(performing_roots=!0,e=tos-2,DEBUG&&console.log("roots checking if "+stack[tos-1].toString()+" is a case of simple roots"),p2=pop(),p1=pop(),push(p1),push(p2),r=normalisedCoeff(p2,p1),isSimpleRoot(r)?(DEBUG&&console.log("yes, "+stack[tos-1].toString()+" is a case of simple roots"),i=stack[tos-r],s=stack[tos-1],moveTos(tos-r),pop(),pop(),getSimpleRoots(r,s,i)):(moveTos(tos-r),roots2()),0===(o=tos-e)&&stop("roots: the polynomial is not factorable, try nroots"),1===o)return performing_roots=!1,void restore();for(sort_stack(o),(p1=alloc_tensor(o)).tensor.ndim=1,p1.tensor.dim[0]=o,t=n=0,a=o;0<=a?n<a:n>a;t=0<=a?++n:--n)p1.tensor.elem[t]=stack[e+t];return moveTos(e),push(p1),restore(),performing_roots=!1},getSimpleRoots=function(e,t,r){var n,i,s,o,a,l,u;if(DEBUG&&console.log("getSimpleRoots"),save(),e-=1,push(r),push_rational(1,e),power(),push(t),push_rational(1,e),power(),divide(),i=pop(),e%2==0)for(u=s=1,a=e;s<=a;u=s+=2)push(i),push_integer(-1),push_rational(u,e),power(),multiply(),n=pop(),push(n),push(n),negate();else for(u=o=1,l=e;1<=l?o<=l:o>=l;u=1<=l?++o:--o)push(i),push_integer(-1),push_rational(u,e),power(),multiply(),u%2==0&&negate();return restore()},roots2=function(){var e;if(save(),DEBUG&&console.log("roots2: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),p2=pop(),p1=pop(),push(p1),push(p2),e=normalisedCoeff(p2,p1),hasImaginaryCoeff(e)?(moveTos(tos-e),pop(),pop()):(moveTos(tos-e),factorpoly(),p1=pop()),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),roots3(),p1=cdr(p1);else push(p1),push(p2),roots3();return restore()},roots3=function(){var e;return save(),p2=pop(),p1=pop(),car(p1)===symbol(POWER)&&ispolyexpandedform(cadr(p1),p2)&&isposint(caddr(p1))?(e=normalisedCoeff(p2,cadr(p1)),mini_solve(e)):ispolyexpandedform(p1,p2)&&(e=normalisedCoeff(p2,p1),mini_solve(e)),restore()},mini_solve=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A,N,k,M,C,T,O,I,P,D,R,L,q,$,B,z,F,U,j,G,V,H,W,Y,X,Z,Q,K,J,ee,te,re,ne,ie,se,oe,ae,le,ue,ce,pe,he;if(save(),2===e)return p3=pop(),p4=pop(),push(p4),push(p3),divide(),negate(),void restore();if(3===e)return p3=pop(),p4=pop(),p5=pop(),push(p4),push_integer(2),power(),push_integer(4),push(p3),multiply(),push(p5),multiply(),subtract(),push_rational(1,2),power(),p6=pop(),push(p6),push(p4),subtract(),push(p3),push_integer(2),multiply(),divide(),push(p6),push(p4),add(),negate(),push(p3),divide(),push_rational(1,2),multiply(),void restore();if(4===e||5===e){if(p3=pop(),p4=pop(),p5=pop(),p6=pop(),push(p5),push(p5),multiply(),M=pop(),push(M),push(p5),multiply(),C=pop(),push(p4),push(p4),multiply(),S=pop(),push(S),push(p4),multiply(),N=pop(),push(N),push(p6),multiply(),k=pop(),push(k),push_integer(-4),multiply(),q=pop(),push(N),push_integer(2),multiply(),i=pop(),push(p3),push(p3),multiply(),y=pop(),push(y),push(p3),multiply(),x=pop(),push_integer(3),push(p3),multiply(),s=pop(),push(y),push(p6),multiply(),v=pop(),push(v),push(p6),multiply(),b=pop(),push(v),push_integer(27),multiply(),n=pop(),push(b),push_integer(-27),multiply(),R=pop(),push(s),push_integer(2),multiply(),pop(),push(p3),push(p5),multiply(),E=pop(),push(E),push(p4),multiply(),w=pop(),push(w),push(p6),multiply(),_=pop(),push(E),push_integer(3),multiply(),a=pop(),push_integer(-4),push(p3),push(C),multiply(),multiply(),L=pop(),push(w),push_integer(9),multiply(),negate(),$=pop(),push(_),push_integer(18),multiply(),r=pop(),push(S),push(a),subtract(),d=pop(),push(S),push(M),multiply(),A=pop(),push(p4),negate(),push(s),divide(),B=pop(),4===e){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using cubic formula <<<<<<<<<<<<<<< "),DEBUG&&console.log("cubic: D0: "+d.toString()),push(d),push_integer(3),power(),push_integer(4),multiply(),l=pop(),push(d),simplify(),absValFloat(),f=pop(),DEBUG&&console.log("cubic: D0 as float: "+f.toString()),push(r),push(q),push(A),push(L),push(R),add(),add(),add(),add(),simplify(),absValFloat(),O=pop(),DEBUG&&console.log("cubic: DETERMINANT: "+O.toString()),push(i),push($),push(n),add(),add(),m=pop(),DEBUG&&console.log("cubic: D1: "+m.toString()),push(m),push_integer(2),power(),push(l),subtract(),push_rational(1,2),power(),simplify(),g=pop(),isZeroAtomOrTensor(O))return isZeroAtomOrTensor(f)?(DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is zero"),push(B),void restore()):(DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is not zero"),push(p3),push(p6),push_integer(9),multiply(),multiply(),push(p4),push(p5),multiply(),subtract(),push(d),push_integer(2),multiply(),divide(),ce=pop(),push(ce),push(ce),push(w),push_integer(4),multiply(),push(p3),push(p3),push(p6),push_integer(9),multiply(),multiply(),multiply(),negate(),push(N),negate(),add(),add(),push(p3),push(d),multiply(),divide(),void restore());for(t=!1,Z=!1;!t;)push(g),Z&&negate(),push(m),add(),push_rational(1,2),multiply(),push_rational(1,3),power(),simplify(),c=pop(),DEBUG&&console.log("cubic: C: "+c.toString()),push(c),simplify(),absValFloat(),h=pop(),DEBUG&&console.log("cubic: C as absval and float: "+h.toString()),isZeroAtomOrTensor(h)?(DEBUG&&console.log(" cubic: C IS ZERO flipping the sign"),Z=!0):t=!0;return push(c),push(s),multiply(),o=pop(),push(o),push_integer(2),multiply(),u=pop(),push(imaginaryunit),push_integer(3),push_rational(1,2),power(),multiply(),Q=pop(),push_integer(1),push(Q),add(),se=pop(),push_integer(1),push(Q),subtract(),ie=pop(),push(c),push(s),divide(),p=pop(),push(B),push(p),negate(),push(d),push(o),divide(),negate(),add(),add(),simplify(),push(B),push(p),push(se),multiply(),push_integer(2),divide(),push(ie),push(d),multiply(),push(u),divide(),add(),add(),simplify(),push(B),push(p),push(ie),multiply(),push_integer(2),divide(),push(se),push(d),multiply(),push(u),divide(),add(),add(),simplify(),void restore()}if(5===e){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using quartic formula <<<<<<<<<<<<<<< "),p7=pop(),isZeroAtomOrTensor(p4)&&isZeroAtomOrTensor(p6)&&!isZeroAtomOrTensor(p5)&&!isZeroAtomOrTensor(p7)){for(DEBUG&&console.log("biquadratic case"),push(p3),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(p5),push(symbol(SECRETX)),multiply(),push(p7),add(),add(),push(symbol(SECRETX)),roots(),K=0,J=(oe=pop().tensor.elem).length;K<J;K++)X=oe[K],push(X),push_rational(1,2),power(),simplify(),push(X),push_rational(1,2),power(),negate(),simplify();return void restore()}if(push(p6),push(p6),multiply(),T=pop(),push(p7),push(p7),multiply(),I=pop(),push(I),push(p7),multiply(),P=pop(),push_integer(256),push(x),push(P),multiply(),multiply(),push_integer(-192),push(v),push(I),push(p4),multiply(),multiply(),multiply(),push_integer(-128),push(y),push(M),push(I),multiply(),multiply(),multiply(),push_integer(144),push(b),push(p5),push(p7),multiply(),multiply(),multiply(),push(R),push(T),multiply(),push_integer(144),push(w),push(p4),push(I),multiply(),multiply(),multiply(),push_integer(-6),push(p3),push(S),push(T),push(p7),multiply(),multiply(),multiply(),multiply(),push_integer(-80),push(_),push(p5),push(p7),multiply(),multiply(),multiply(),push_integer(18),push(_),push(T),multiply(),multiply(),push_integer(16),push(E),push(C),push(p7),multiply(),multiply(),multiply(),push_integer(-4),push(E),push(M),push(T),multiply(),multiply(),multiply(),push_integer(-27),push(N),push(p4),push(I),multiply(),multiply(),multiply(),push_integer(18),push(k),push(p5),push(p7),multiply(),multiply(),multiply(),push(q),push(T),multiply(),push_integer(-4),push(A),push(p5),push(p7),multiply(),multiply(),multiply(),push(A),push(T),multiply(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),O=pop(),DEBUG&&console.log("R_determinant: "+O.toString()),push(M),push_integer(-3),push(p4),push(p6),multiply(),multiply(),push_integer(12),push(p3),push(p7),multiply(),multiply(),add(),add(),d=pop(),DEBUG&&console.log("R_DELTA0: "+d.toString()),push_integer(2),push(C),multiply(),push_integer(-9),push(p4),push(p5),push(p6),multiply(),multiply(),multiply(),push_integer(27),push(S),push(p7),multiply(),multiply(),push_integer(27),push(p3),push(T),multiply(),multiply(),push_integer(-72),push(E),push(p7),multiply(),multiply(),add(),add(),add(),add(),m=pop(),DEBUG&&console.log("R_DELTA1: "+m.toString()),push_integer(8),push(E),multiply(),push_integer(-3),push(S),multiply(),add(),push_integer(8),push(y),multiply(),divide(),z=pop(),DEBUG&&console.log("p: "+z.toString()),push(N),push_integer(-4),push(w),multiply(),push_integer(8),push(v),multiply(),add(),add(),push_integer(8),push(x),multiply(),divide(),F=pop(),DEBUG&&console.log("q: "+F.toString()),DEBUG&&console.log("tos 1 "+tos),isZeroAtomOrTensor(p4)){for(z=p5,F=p6,U=p7,push_rational(5,2),push(z),multiply(),V=pop(),push_integer(2),push(z),push_integer(2),power(),multiply(),push(U),subtract(),H=pop(),push(z),push_integer(3),power(),push_integer(2),divide(),push_rational(-1,2),push(z),push(U),multiply(),multiply(),push_rational(-1,8),push(F),push_integer(2),power(),multiply(),add(),add(),W=pop(),push(symbol(SECRETX)),push_integer(3),power(),push(V),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(H),push(symbol(SECRETX)),multiply(),push(W),add(),add(),add(),DEBUG&&console.log("resolventCubic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),ue=pop(),DEBUG&&console.log("resolventCubicSolutions: "+ue),D=null,ne=0,te=(le=ue.tensor.elem).length;ne<te;ne++)if(X=le[ne],DEBUG&&console.log("examining solution: "+X),push(X),push_integer(2),multiply(),push(z),add(),absValFloat(),he=pop(),DEBUG&&console.log("abs value is: "+X),!isZeroAtomOrTensor(he)){D=X;break}return DEBUG&&console.log("chosen solution: "+D),push(D),push_integer(2),multiply(),push(z),add(),push_rational(1,2),power(),simplify(),pe=pop(),push(F),push_integer(2),multiply(),push(pe),divide(),simplify(),G=pop(),push(z),push_integer(3),multiply(),push(D),push_integer(2),multiply(),add(),j=pop(),push(pe),push(j),push(G),add(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(pe),push(j),push(G),add(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),push(pe),negate(),push(j),push(G),subtract(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(pe),negate(),push(j),push(G),subtract(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),void restore()}for(DEBUG&&console.log("tos 2 "+tos),push_integer(8),push(p5),push(p3),multiply(),multiply(),push_integer(-3),push(p4),push_integer(2),power(),multiply(),add(),push_integer(8),push(p3),push_integer(2),power(),multiply(),divide(),z=pop(),DEBUG&&console.log("p for depressed quartic: "+z.toString()),push(p4),push_integer(3),power(),push_integer(-4),push(p3),push(p4),push(p5),multiply(),multiply(),multiply(),push_integer(8),push(p6),push(p3),push_integer(2),power(),multiply(),multiply(),add(),add(),push_integer(8),push(p3),push_integer(3),power(),multiply(),divide(),F=pop(),DEBUG&&console.log("q for depressed quartic: "+F.toString()),push(p4),push_integer(4),power(),push_integer(-3),multiply(),push_integer(256),push(x),push(p7),multiply(),multiply(),push_integer(-64),push(v),push(p4),multiply(),multiply(),push_integer(16),push(S),push(p3),push(p5),multiply(),multiply(),multiply(),add(),add(),add(),push_integer(256),push(p3),push_integer(4),power(),multiply(),divide(),U=pop(),DEBUG&&console.log("r for depressed quartic: "+U.toString()),DEBUG&&console.log("tos 4 "+tos),push(symbol(SECRETX)),push_integer(4),power(),DEBUG&&console.log("4 * x^4: "+stack[tos-1].toString()),push(z),push(symbol(SECRETX)),push_integer(2),power(),multiply(),DEBUG&&console.log("R_p * x^2: "+stack[tos-1].toString()),push(F),push(symbol(SECRETX)),multiply(),DEBUG&&console.log("R_q * x: "+stack[tos-1].toString()),push(U),DEBUG&&console.log("R_r: "+stack[tos-1].toString()),add(),add(),add(),simplify(),DEBUG&&console.log("solving depressed quartic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),Y=pop(),DEBUG&&console.log("depressedSolutions: "+Y),re=0,ee=(ae=Y.tensor.elem).length;re<ee;re++)X=ae[re],push(X),push(p4),push_integer(4),push(p3),multiply(),divide(),subtract(),simplify(),DEBUG&&console.log("solution from depressed: "+stack[tos-1].toString());return void restore()}}return moveTos(tos-e),restore()},Eval_round=function(){return push(cadr(p1)),Eval(),yround()},yround=function(){return save(),yyround(),restore()},yyround=function(){var e;return e=0,p1=pop(),isNumericAtom(p1)?isdouble(p1)?(e=Math.round(p1.d),void push_double(e)):isinteger(p1)?void push(p1):(push(p1),yyfloat(),p1=pop(),push_integer(Math.round(p1.d))):(push_symbol(ROUND),push(p1),void list(2))},T_INTEGER=1001,T_DOUBLE=1002,T_SYMBOL=1003,T_FUNCTION=1004,T_NEWLINE=1006,T_STRING=1007,T_GTEQ=1008,T_LTEQ=1009,T_EQ=1010,T_NEQ=1011,T_QUOTASSIGN=1012,token="",newline_flag=0,meta_mode=0,input_str=0,scan_str=0,token_str=0,token_buf=0,lastFoundSymbol=null,symbolsRightOfAssignment=null,symbolsLeftOfAssignment=null,isSymbolLeftOfAssignment=null,scanningParameters=null,functionInvokationsScanningStack=null,skipRootVariableToBeSolved=!1,assignmentFound=null,scanned="",scan=function(e){return DEBUG&&console.log("#### scanning "+e),lastFoundSymbol=null,symbolsRightOfAssignment=[],symbolsLeftOfAssignment=[],isSymbolLeftOfAssignment=!0,scanningParameters=[],functionInvokationsScanningStack=[""],assignmentFound=!1,scanned=e,meta_mode=0,expanding++,input_str=0,scan_str=0,get_next_token(),""===token?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,assignmentFound||(symbolsInExpressionsWithoutAssignments=symbolsInExpressionsWithoutAssignments.concat(symbolsLeftOfAssignment)),token_str-input_str)},scan_meta=function(e){return scanned=e,meta_mode=1,expanding++,input_str=0,scan_str=0,get_next_token(),""===token?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,token_str-input_str)},scan_stmt=function(){var e,t,r,n,i,s,o,a,l;if(scan_relation(),e=!1,token===T_QUOTASSIGN&&(e=!0),(token===T_QUOTASSIGN||"="===token)&&(l=lastFoundSymbol,DEBUG&&console.log("assignment!"),assignmentFound=!0,isSymbolLeftOfAssignment=!1,get_next_token(),push_symbol(SETQ),swap(),e&&push_symbol(QUOTE),scan_relation(),e&&list(2),list(3),isSymbolLeftOfAssignment=!0,codeGen)){if(-1!==(n=symbolsRightOfAssignment.indexOf(l))&&(symbolsRightOfAssignment.splice(n,1),symbolsHavingReassignments.push(l)),DEBUG)for(console.log("locally, "+l+" depends on: "),i=0,s=symbolsRightOfAssignment.length;i<s;i++)r=symbolsRightOfAssignment[i],console.log("  "+r);for(null==symbolsDependencies[l]&&(symbolsDependencies[l]=[]),t=symbolsDependencies[l],a=0,o=symbolsRightOfAssignment.length;a<o;a++)r=symbolsRightOfAssignment[a],-1===t.indexOf(r)&&t.push(r);return symbolsRightOfAssignment=[]}},scan_relation=function(){switch(scan_expression(),token){case T_EQ:return push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3);case T_NEQ:return push_symbol(NOT),swap(),push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3),list(2);case T_LTEQ:return push_symbol(TESTLE),swap(),get_next_token(),scan_expression(),list(3);case T_GTEQ:return push_symbol(TESTGE),swap(),get_next_token(),scan_expression(),list(3);case"<":return push_symbol(TESTLT),swap(),get_next_token(),scan_expression(),list(3);case">":return push_symbol(TESTGT),swap(),get_next_token(),scan_expression(),list(3)}},scan_expression=function(){var e;switch(e=tos,token){case"+":get_next_token(),scan_term();break;case"-":get_next_token(),scan_term(),negate();break;default:scan_term()}for(;0===newline_flag&&("+"===token||"-"===token);)"+"===token?(get_next_token(),scan_term()):(get_next_token(),scan_term(),negate());if(tos-e>1)return list(tos-e),push_symbol(ADD),swap(),cons()},is_factor=function(){if(("function"==typeof token.charCodeAt?token.charCodeAt(0):void 0)===dotprod_unicode)return 1;switch(token){case"*":case"/":return 1;case"(":case T_SYMBOL:case T_FUNCTION:case T_INTEGER:case T_DOUBLE:case T_STRING:return newline_flag?(scan_str=token_str,0):1}return 0},simplify_1_in_products=function(e,t){if(e>t&&isrational(stack[e-1])&&equaln(stack[e-1],1))return pop()},multiply_consecutive_constants=function(e,t){if(e>t+1&&isNumericAtom(stack[e-2])&&isNumericAtom(stack[e-1]))return multiply()},scan_term=function(){var e;for(e=tos,scan_factor(),parse_time_simplifications&&simplify_1_in_products(tos,e);is_factor();)"*"===token?(get_next_token(),scan_factor()):"/"===token?(simplify_1_in_products(tos,e),get_next_token(),scan_factor(),inverse()):("function"==typeof token.charCodeAt?token.charCodeAt(0):void 0)===dotprod_unicode?(get_next_token(),push_symbol(INNER),swap(),scan_factor(),list(3)):scan_factor(),parse_time_simplifications&&(multiply_consecutive_constants(tos,e),simplify_1_in_products(tos,e));return e===tos?push_integer(1):tos-e>1?(list(tos-e),push_symbol(MULTIPLY),swap(),cons()):void 0},scan_power=function(){if("^"===token)return get_next_token(),push_symbol(POWER),swap(),scan_factor(),list(3)},scan_index=function(e){for(get_next_token(),push_symbol(INDEX),swap(),scan_expression();","===token;)get_next_token(),scan_expression();return"]"!==token&&scan_error("] expected"),get_next_token(),list(tos-e)},scan_factor=function(){var e,t;for(t=tos,e=!1,"("===token?scan_subexpr():token===T_SYMBOL?scan_symbol():token===T_FUNCTION?scan_function_call_with_function_name():"["===token?scan_tensor():token===T_INTEGER?(e=!0,bignum_scan_integer(token_buf),get_next_token()):token===T_DOUBLE?(e=!0,bignum_scan_float(token_buf),get_next_token()):token===T_STRING?scan_string():scan_error("syntax error");"["===token||"("===token&&0===newline_flag&&!e;)"["===token?scan_index(t):"("===token&&scan_function_call_without_function_name();for(;"!"===token;)get_next_token(),push_symbol(FACTORIAL),swap(),list(2);for(;("function"==typeof token.charCodeAt?token.charCodeAt(0):void 0)===transpose_unicode;)get_next_token(),push_symbol(TRANSPOSE),swap(),list(2);return scan_power()},addSymbolRightOfAssignment=function(e){var t,r,n,i;if(-1===predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(e)&&-1===symbolsRightOfAssignment.indexOf(e)&&-1===symbolsRightOfAssignment.indexOf("'"+e)&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+e+" to the set of the symbols right of assignment"),n="",t=r=1,i=functionInvokationsScanningStack.length;1<=i?r<i:r>i;t=1<=i?++r:--r)""!==functionInvokationsScanningStack[t]&&(n+=functionInvokationsScanningStack[t]+"_"+t+"_");return e=n+e,symbolsRightOfAssignment.push(e)}},addSymbolLeftOfAssignment=function(e){var t,r,n,i;if(-1===predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(e)&&-1===symbolsLeftOfAssignment.indexOf(e)&&-1===symbolsLeftOfAssignment.indexOf("'"+e)&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+e+" to the set of the symbols left of assignment"),n="",t=r=1,i=functionInvokationsScanningStack.length;1<=i?r<i:r>i;t=1<=i?++r:--r)""!==functionInvokationsScanningStack[t]&&(n+=functionInvokationsScanningStack[t]+"_"+t+"_");return e=n+e,symbolsLeftOfAssignment.push(e)}},scan_symbol=function(){if(token!==T_SYMBOL&&scan_error("symbol expected"),meta_mode&&1===token_buf.length)switch(token_buf[0]){case"a":push(symbol(METAA));break;case"b":push(symbol(METAB));break;case"x":push(symbol(METAX));break;default:push(usr_symbol(token_buf))}else push(usr_symbol(token_buf));return 0===scanningParameters.length?(DEBUG&&console.log("out of scanning parameters, processing "+token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment&&addSymbolLeftOfAssignment(token_buf)):(DEBUG&&console.log("still scanning parameters, skipping "+token_buf),isSymbolLeftOfAssignment&&addSymbolRightOfAssignment("'"+token_buf)),DEBUG&&console.log("found symbol: "+token_buf+" left of assignment: "+isSymbolLeftOfAssignment),isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token()},scan_string=function(){return push(new_string(token_buf)),get_next_token()},scan_function_call_with_function_name=function(){var e,t,r,n,i,s;if(DEBUG&&console.log("-- scan_function_call_with_function_name start"),n=1,new U,i=usr_symbol(token_buf),push(i),"roots"!==(e=token_buf)&&"defint"!==e&&"sum"!==e&&"product"!==e&&"for"!==e||functionInvokationsScanningStack.push(token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token(),get_next_token(),scanningParameters.push(!0),")"!==token){for(scan_stmt(),n++;","===token;)get_next_token(),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(e){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(e)})),skipRootVariableToBeSolved=!0),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("sum")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(e){return!new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(e)})),skipRootVariableToBeSolved=!0),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("product")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(e){return!new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(e)})),skipRootVariableToBeSolved=!0),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("for")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(e){return!new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(e)})),skipRootVariableToBeSolved=!0),-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("defint")&&(2===n||n>2&&(n-2)%3==0)&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(e){return!new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(e)})),skipRootVariableToBeSolved=!0),scan_stmt(),skipRootVariableToBeSolved=!1,n++;2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(e){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_x").test(e)})))}for(scanningParameters.pop(),t=r=0,s=symbolsRightOfAssignment.length;0<=s?r<=s:r>=s;t=0<=s?++r:--r)null!=symbolsRightOfAssignment[t]&&("roots"===e&&(symbolsRightOfAssignment[t]=symbolsRightOfAssignment[t].replace(new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"defint"===e&&(symbolsRightOfAssignment[t]=symbolsRightOfAssignment[t].replace(new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"sum"===e&&(symbolsRightOfAssignment[t]=symbolsRightOfAssignment[t].replace(new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"product"===e&&(symbolsRightOfAssignment[t]=symbolsRightOfAssignment[t].replace(new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"for"===e&&(symbolsRightOfAssignment[t]=symbolsRightOfAssignment[t].replace(new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"),"")));if(")"!==token&&scan_error(") expected"),get_next_token(),list(n),"roots"!==e&&"defint"!==e&&"sum"!==e&&"product"!==e&&"for"!==e||functionInvokationsScanningStack.pop(),e===symbol(PATTERN).printname&&(patternHasBeenFound=!0),DEBUG)return console.log("-- scan_function_call_with_function_name end")},scan_function_call_without_function_name=function(){var e;if(DEBUG&&console.log("-- scan_function_call_without_function_name start"),push_symbol(EVAL),swap(),list(2),e=1,get_next_token(),scanningParameters.push(!0),")"!==token)for(scan_stmt(),e++;","===token;)get_next_token(),scan_stmt(),e++;if(scanningParameters.pop(),")"!==token&&scan_error(") expected"),get_next_token(),list(e),DEBUG)return console.log("-- scan_function_call_without_function_name end: "+stack[tos-1])},scan_subexpr=function(){return 0,"("!==token&&scan_error("( expected"),get_next_token(),scan_stmt(),")"!==token&&scan_error(") expected"),get_next_token()},scan_tensor=function(){var e;for(e=0,"["!==token&&scan_error("[ expected"),get_next_token(),scan_stmt(),e=1;","===token;)get_next_token(),scan_stmt(),e++;return build_tensor(e),"]"!==token&&scan_error("] expected"),get_next_token()},scan_error=function(e){for(errorMessage="";input_str!==scan_str&&("\n"!==scanned[input_str]&&"\r"!==scanned[input_str]||input_str+1!==scan_str);)errorMessage+=scanned[input_str++];for(errorMessage+=" ? ";scanned[input_str]&&"\n"!==scanned[input_str]&&"\r"!==scanned[input_str];)errorMessage+=scanned[input_str++];return errorMessage+="\n",stop(e)},build_tensor=function(e){var t,r,n;for(t=0,save(),(p2=alloc_tensor(e)).tensor.ndim=1,p2.tensor.dim[0]=e,t=r=0,n=e;0<=n?r<n:r>n;t=0<=n?++r:--r)p2.tensor.elem[t]=stack[tos-e+t];return check_tensor_dimensions(p2),moveTos(tos-e),push(p2),restore()},get_next_token=function(){for(newline_flag=0;get_token(),token===T_NEWLINE;)newline_flag=1;if(DEBUG)return console.log("get_next_token token: "+token)},get_token=function(){for(;isspace(scanned[scan_str]);){if("\n"===scanned[scan_str]||"\r"===scanned[scan_str])return token=T_NEWLINE,void scan_str++;scan_str++}if(token_str=scan_str,scan_str!==scanned.length){if(!isdigit(scanned[scan_str])&&"."!==scanned[scan_str]){if(isalpha(scanned[scan_str])){for(;isalnumorunderscore(scanned[scan_str]);)scan_str++;return token="("===scanned[scan_str]?T_FUNCTION:T_SYMBOL,void update_token_buf(token_str,scan_str)}if('"'===scanned[scan_str]){for(scan_str++;'"'!==scanned[scan_str];)scan_str===scanned.length-1&&(scan_str++,scan_error("runaway string"),scan_str--),scan_str++;return scan_str++,token=T_STRING,void update_token_buf(token_str+1,scan_str-1)}if("#"===scanned[scan_str]||"-"===scanned[scan_str]&&"-"===scanned[scan_str+1]){for(;scanned[scan_str]&&"\n"!==scanned[scan_str]&&"\r"!==scanned[scan_str];)scan_str++;return scanned[scan_str]&&scan_str++,void(token=T_NEWLINE)}return":"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_QUOTASSIGN)):"="===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_EQ)):"!"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_NEQ)):"<"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_LTEQ)):">"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_GTEQ)):token=scanned[scan_str++]}for(;isdigit(scanned[scan_str]);)scan_str++;if("."===scanned[scan_str]){for(scan_str++;isdigit(scanned[scan_str]);)scan_str++;if("e"===scanned[scan_str]&&("+"===scanned[scan_str+1]||"-"===scanned[scan_str+1]||isdigit(scanned[scan_str+1])))for(scan_str+=2;isdigit(scanned[scan_str]);)scan_str++;token=T_DOUBLE}else token=T_INTEGER;update_token_buf(token_str,scan_str)}else token=""},update_token_buf=function(e,t){return token_buf=scanned.substring(e,t)},$.scan=scan,Eval_sgn=function(){return push(cadr(p1)),Eval(),sgn()},sgn=function(){return save(),yysgn(),restore()},yysgn=function(){return p1=pop(),isdouble(p1)?p1.d>0||0===p1.d?void push_integer(1):void push_integer(-1):isrational(p1)?-1===MSIGN(mmul(p1.q.a,p1.q.b))?void push_integer(-1):MZERO(mmul(p1.q.a,p1.q.b))?void push_integer(0):void push_integer(1):iscomplexnumber(p1)?(push_integer(-1),push(p1),absval(),power(),push(p1),void multiply()):isnegativeterm(p1)?(push_symbol(SGN),push(p1),negate(),list(2),push_integer(-1),void multiply()):(push_symbol(SGN),push(p1),list(2))},Eval_shape=function(){return push(cadr(p1)),Eval(),shape()},shape=function(){var e,t,r,n,i,s,o,a;for(r=0,0,0,e=[],t=[],r=n=0,o=MAXDIM;0<=o?n<o:n>o;r=0<=o?++n:--n)e[r]=0,t[r]=0;if(save(),p1=pop(),!istensor(p1))return isZeroAtomOrTensor(p1)||stop("transpose: tensor expected, 1st arg is not a tensor"),push(zero),void restore();for(s=p1.tensor.ndim,(p2=alloc_tensor(s)).tensor.ndim=1,p2.tensor.dim[0]=s,r=i=0,a=s;0<=a?i<a:i>a;r=0<=a?++i:--i)push_integer(p1.tensor.dim[r]),p2.tensor.elem[r]=pop();return push(p2),restore()},Eval_simfac=function(){return push(cadr(p1)),Eval(),simfac()},simfac=function(){var e;if(e=0,save(),p1=pop(),car(p1)===symbol(ADD)){for(e=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),simfac_term(),p1=cdr(p1);add_all(tos-e)}else push(p1),simfac_term();return restore()},simfac_term=function(){var e;if(0,save(),p1=pop(),car(p1)!==symbol(MULTIPLY))return push(p1),void restore();for(e=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),p1=cdr(p1);for(;yysimfac(e);)1;return multiply_all_noexpand(tos-e),restore()},yysimfac=function(e){var t,r,n,i,s,o,a,l;for(t=0,r=0,t=n=s=e,o=tos;s<=o?n<o:n>o;t=s<=o?++n:--n)for(p1=stack[t],r=i=a=e,l=tos;a<=l?i<l:i>l;r=a<=l?++i:--i)if(t!==r){if(p2=stack[r],car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&equal(cadr(p1),cadr(p2)))return push(cadr(p1)),push(one),subtract(),factorial(),stack[t]=pop(),stack[r]=one,1;if(car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&equal(p1,cadadr(p2)))return push(p1),push_integer(-1),add(),factorial(),reciprocate(),stack[t]=pop(),stack[r]=one,1;if(car(p2)===symbol(FACTORIAL)&&(push(p1),push(cadr(p2)),subtract(),p3=pop(),isplusone(p3)))return push(p1),factorial(),stack[t]=pop(),stack[r]=one,1;if(car(p1)===symbol(POWER)&&isminusone(caddr(p1))&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3)))return push(cadr(p1)),factorial(),reciprocate(),stack[t]=pop(),stack[r]=one,1;if(car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)){if(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3))return stack[t]=cadr(p1),stack[r]=one,1;if(isminusone(p3))return push(cadr(cadr(p2))),reciprocate(),stack[t]=pop(),stack[r]=one,1;if(equaln(p3,2))return stack[t]=cadr(p1),push(cadr(p1)),push_integer(-1),add(),stack[r]=pop(),1;if(equaln(p3,-2))return push(cadr(cadr(p2))),reciprocate(),stack[t]=pop(),push(cadr(cadr(p2))),push_integer(-1),add(),reciprocate(),stack[r]=pop(),1}}return 0},DEBUG_SIMPLIFY=!1,Eval_simplify=function(){return push(cadr(p1)),runUserDefinedSimplifications(),Eval(),simplify()},runUserDefinedSimplifications=function(){var e,t,r,n,i,s,o,a,l,u;if(0!==userSimplificationsInListForm.length&&!Find(cadr(p1),symbol(INTEGRAL))){for(l=expanding,expanding=!1,DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications passed: "+stack[tos-1].toString()),Eval(),DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications after eval no expanding: "+stack[tos-1].toString()),expanding=l,p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("patterns to be checked: "),n=0,i=userSimplificationsInListForm.length;n<i;n++)r=userSimplificationsInListForm[n],DEBUG_SIMPLIFY&&console.log("..."+r);for(e=!0,a=0;e&&a<MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES;)for(e=!1,a++,o=0,s=userSimplificationsInListForm.length;o<s;o++){for(r=userSimplificationsInListForm[o],u=!0,t=0;u&&t<MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE;)t++,DEBUG_SIMPLIFY&&console.log("simplify - tos: "+tos+" checking pattern: "+r+" on: "+p1),push_symbol(NIL),(u=transform(r,!0))&&(e=!0),p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("p1 at this stage of simplification: "+p1);t===MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE&&stop("maximum application of single transformation rule exceeded: "+r)}if(a===MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES&&stop("maximum application of all transformation rules exceeded "),DEBUG_SIMPLIFY&&console.log("METAX = "+get_binding(symbol(METAX))),DEBUG_SIMPLIFY&&console.log("METAA = "+get_binding(symbol(METAA))),DEBUG_SIMPLIFY)return console.log("METAB = "+get_binding(symbol(METAB)))}},simplifyForCodeGeneration=function(){return save(),runUserDefinedSimplifications(),codeGen=!0,simplify_main(),codeGen=!1,restore()},simplify=function(){return save(),simplify_main(),restore()},simplify_main=function(){var args,fbody;if(p1=pop(),codeGen&&car(p1)===symbol(FUNCTION)&&(fbody=cadr(p1),push(fbody),eval(),simplify(),p3=pop(),args=caddr(p1),push_symbol(FUNCTION),push(p3),push(args),list(3),p1=pop()),!istensor(p1))return Find(p1,symbol(FACTORIAL))&&(push(p1),simfac(),p2=pop(),push(p1),rationalize(),simfac(),p3=pop(),p1=count(p2)<count(p3)?p2:p3),f10(),DEBUG_SIMPLIFY&&console.log("f10: "+p1.toString()),f1(),DEBUG_SIMPLIFY&&console.log("f1: "+p1.toString()),f2(),DEBUG_SIMPLIFY&&console.log("f2: "+p1.toString()),f3(),DEBUG_SIMPLIFY&&console.log("f3: "+p1.toString()),f4(),DEBUG_SIMPLIFY&&console.log("f4: "+p1.toString()),f5(),DEBUG_SIMPLIFY&&console.log("f5: "+p1.toString()),f9(),DEBUG_SIMPLIFY&&console.log("f9: "+p1.toString()),simplify_polarRect(),do_simplify_nested_radicals&&simplify_nested_radicals()?(DEBUG_SIMPLIFY&&console.log("de-nesting successful into: "+p1.toString()),push(p1),void simplify()):(simplify_rectToClock(),simplify_rational_expressions(),push(p1));simplify_tensor()},simplify_tensor=function(){var e,t,r,n,i;for(e=0,(p2=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,e=t=0,n=p1.tensor.ndim;0<=n?t<n:t>n;e=0<=n?++t:--t)p2.tensor.dim[e]=p1.tensor.dim[e];for(e=r=0,i=p1.tensor.nelem;0<=i?r<i:r>i;e=0<=i?++r:--r)push(p1.tensor.elem[e]),simplify(),p2.tensor.elem[e]=pop();return check_tensor_dimensions(p2),isZeroAtomOrTensor(p2)&&(p2=zero),push(p2)},f1=function(){if(car(p1)===symbol(ADD))return push(p1),rationalize(),p2=pop(),count(p2)<count(p1)?p1=p2:void 0},f2=function(){if(car(p1)===symbol(ADD))return push(p1),Condense(),p2=pop(),count(p2)<=count(p1)?p1=p2:void 0},f3=function(){if(push(p1),rationalize(),negate(),rationalize(),negate(),rationalize(),p2=pop(),count(p2)<count(p1))return p1=p2},f10=function(){var e,t,r,n;if(r=car(p1),cdr(p1),(r===symbol(MULTIPLY)||isinnerordot(p1))&&car(car(cdr(p1)))===symbol(TRANSPOSE)&&car(car(cdr(cdr(p1))))===symbol(TRANSPOSE)&&(DEBUG_SIMPLIFY&&console.log("maybe collecting a transpose "+p1),e=cadr(car(cdr(p1))),t=cadr(car(cdr(cdr(p1)))),r===symbol(MULTIPLY)?(push(e),push(t),multiply()):isinnerordot(p1)&&(push(t),push(e),inner()),push_integer(1),push_integer(2),n=expanding,expanding=!1,transpose(),expanding=n,p2=pop(),count(p2)<count(p1)&&(p1=p2),DEBUG_SIMPLIFY))return console.log("collecting a transpose "+p2)},f4=function(){if(!isZeroAtomOrTensor(p1))return push(p1),rationalize(),inverse(),rationalize(),inverse(),rationalize(),p2=pop(),count(p2)<count(p1)?p1=p2:void 0},simplify_trig=function(){return save(),p1=pop(),f5(),push(p1),restore()},f5=function(){if(0!==Find(p1,symbol(SIN))||0!==Find(p1,symbol(COS)))return trigmode=1,push(p2=p1),Eval(),p3=pop(),trigmode=2,push(p2),Eval(),p4=pop(),trigmode=0,(count(p4)<count(p3)||nterms(p4)<nterms(p3))&&(p3=p4),count(p3)<count(p1)||nterms(p3)<nterms(p1)?p1=p3:void 0},f9=function(){var e,t;if(car(p1)===symbol(ADD)){for(push_integer(0),p2=cdr(p1);iscons(p2);)push(car(p2)),simplify(),add(),e=p1,t=p2,p1=pop(),simplify_rational_expressions(),push(p1),p1=e,p2=cdr(p2=t);return p2=pop(),count(p2)<count(p1)?p1=p2:void 0}},simplify_rational_expressions=function(){var e,t,r,n;if(push(p1),denominator(),e=pop(),!isone(e)&&(push(p1),numerator(),t=pop(),!isone(t)&&(r=areunivarpolysfactoredorexpandedform(t,e))&&(push(t),push(e),gcd(),push(r),factor(),n=pop(),!isone(n))))return push(t),push(r),factor(),push(n),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),push(e),push(r),factor(),push(n),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),divide(),Condense(),stack[tos-1].toString(),p2=pop(),count(p2)<count(p1)?p1=p2:void 0},simplify_rectToClock=function(){if(0!==Find(p1,symbol(SIN))||0!==Find(p1,symbol(COS)))return push(p1),Eval(),clockform(),p2=pop(),DEBUG_SIMPLIFY&&console.log("before simplification clockform: "+p1+" after: "+p2),count(p2)<count(p1)?p1=p2:void 0},simplify_polarRect=function(){if(push(p1),polarRectAMinusOneBase(),Eval(),p2=pop(),count(p2)<count(p1))return p1=p2},polarRectAMinusOneBase=function(){var e;if(save(),p1=pop(),isimaginaryunit(p1))return push(p1),void restore();if(equal(car(p1),symbol(POWER))&&isminusone(cadr(p1)))push(one),negate(),push(caddr(p1)),polarRectAMinusOneBase(),power(),polar(),rect();else if(iscons(p1)){for(e=tos;iscons(p1);)push(car(p1)),polarRectAMinusOneBase(),p1=cdr(p1);list(tos-e)}else push(p1);restore()},nterms=function(e){return car(e)!==symbol(ADD)?1:length(e)-1},simplify_nested_radicals=function(){var e,t,r,n;return recursionLevelNestedRadicalsRemoval>0?(DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1):(push(p1),n=take_care_of_nested_radicals(),r=stack[tos-1],e=expanding,expanding=0,yycondense(),expanding=e,t=pop(),countOccurrencesOfSymbol(symbol(POWER),r)<countOccurrencesOfSymbol(symbol(POWER),t)?push(r):push(t),p1=pop(),n)},take_care_of_nested_radicals=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A,N,k,M,C,T,O,I,P,D,R,L,q;if(recursionLevelNestedRadicalsRemoval>0)return DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1;if(save(),p1=pop(),equal(car(p1),symbol(POWER))){if(s=cadr(p1),p=caddr(p1),!isminusone(p)&&equal(car(s),symbol(ADD))&&isfraction(p)&&(equalq(p,1,3)||equalq(p,1,2))){for(h=cadr(s),push(h),take_care_of_nested_radicals(),pop(),R=caddr(s),push(R),take_care_of_nested_radicals(),pop(),N=0,u=s;cdr(u)!==symbol(NIL);)N++,u=cdr(u);if(N>2)return push(p1),restore(),!1;if(l=null,a=[],q=[],car(R)===symbol(MULTIPLY)){if(L=cdr(R),iscons(L))for(;iscons(L);)I=car(L),car(I)===symbol(POWER)?(m=cadr(I),g=caddr(I),equalq(g,1,2)&&(null==l?(l=g,a.push(m)):equal(g,l)&&a.push(m))):q.push(I),L=cdr(L)}else car(R)===symbol(POWER)&&(m=cadr(R),g=caddr(R),null==l&&equalq(g,1,2)&&(l=g,a.push(m)));if(0===a.length)return push(p1),restore(),!1;for(e=h,push_integer(1),y=0,v=a.length;y<v;y++)f=a[y],push(f),multiply();for(r=pop(),push_integer(1),S=0,b=q.length;S<b;S++)f=q[S],push(f),multiply();if(t=pop(),equalq(p,1,3)){if(push(e),negate(),push(r),multiply(),push(t),divide(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(o),push_integer(3),push(r),multiply(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;if(push(o),push(symbol(SECRETX)),multiply(),push_integer(-3),push(e),multiply(),push(t),divide(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),pop(),push(p1),restore(),!1;push(o),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(3),power(),multiply(),add(),add(),add()}else if(equalq(p,1,2)){if(push(r),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(o),push_integer(-2),push(e),multiply(),push(t),divide(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;push(o),push(symbol(SECRETX)),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(2),power(),multiply(),add(),add()}if(push(symbol(SECRETX)),recursionLevelNestedRadicalsRemoval++,roots(),recursionLevelNestedRadicalsRemoval--,equal(stack[tos-1],symbol(NIL)))return DEBUG_SIMPLIFY&&console.log("roots bailed out because of too much recursion"),pop(),push(p1),restore(),!1;for(O=[],A=0,x=(D=stack[tos-1].tensor.elem).length;A<x;A++)c=D[A],Find(c,symbol(POWER))||O.push(c);if(pop(),0===O.length)return push(p1),restore(),!1;for(T=[],P=[],k=0,w=O.length;k<w;k++)f=O[k],push(f),real(),yyfloat(),T.push(f),P.push(pop().d);return n=T[P.indexOf(Math.max.apply(Math,P))],equalq(p,1,3)?(push(e),push(n),push_integer(3),power(),push_integer(3),push(r),multiply(),push(n),multiply(),add(),divide(),push_rational(1,3),power()):equalq(p,1,2)&&(push(e),push(n),push_integer(2),power(),push(r),add(),divide(),push_rational(1,2),power()),null==(E=pop())?(push(p1),restore(),!1):(push(E),push(n),multiply(),equalq(p,1,3)?(_=pop(),push(E),push(r),push_rational(1,2),power(),multiply(),push(_),add(),simplify()):equalq(p,1,2)&&(_=pop(),push(E),push(r),push_rational(1,2),power(),multiply(),push(_),add(),simplify(),M=pop(),push(M),real(),yyfloat(),C=pop(),isnegativenumber(C)?(push(E),negate(),E=pop(),push(_),negate(),_=pop(),push(E),push(r),push_rational(1,2),power(),multiply(),push(_),add(),simplify()):push(M)),p1=pop(),push(p1),restore(),!0)}return push(p1),restore(),!1}if(iscons(p1)){for(d=tos,i=!1;iscons(p1);)push(car(p1)),i=i||take_care_of_nested_radicals(),p1=cdr(p1);return list(tos-d),restore(),i}return push(p1),restore(),!1},Eval_sin=function(){return push(cadr(p1)),Eval(),sine()},sine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?sine_of_angle_sum():sine_of_angle(),restore()},sine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4))return push(p1),push(p4),subtract(),p3=pop(),push(p3),sine(),push(p4),cosine(),multiply(),push(p3),cosine(),push(p4),sine(),multiply(),void add();p2=cdr(p2)}return sine_of_angle()},sine_of_angle=function(){var e,t;if(car(p1)!==symbol(ARCSIN)){if(isdouble(p1))return e=Math.sin(p1.d),Math.abs(e)<1e-10&&(e=0),void push_double(e);if(isnegative(p1))return push(p1),negate(),sine(),void negate();if(car(p1)===symbol(ARCTAN))return push(cadr(p1)),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power(),void multiply();if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),(t=pop_integer())<0||isNaN(t))return push(symbol(SIN)),push(p1),void list(2);switch(t%360){case 0:case 180:return push_integer(0);case 30:case 150:return push_rational(1,2);case 210:case 330:return push_rational(-1,2);case 45:case 135:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 225:case 315:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 60:case 120:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 240:case 300:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 90:return push_integer(1);case 270:return push_integer(-1);default:return push(symbol(SIN)),push(p1),list(2)}}else push(cadr(p1))},Eval_sinh=function(){return push(cadr(p1)),Eval(),ysinh()},ysinh=function(){return save(),yysinh(),restore()},yysinh=function(){var e;if(e=0,p1=pop(),car(p1)!==symbol(ARCSINH)){if(isdouble(p1))return e=Math.sinh(p1.d),Math.abs(e)<1e-10&&(e=0),void push_double(e);if(!isZeroAtomOrTensor(p1))return push_symbol(SINH),push(p1),list(2);push(zero)}else push(cadr(p1))},subst=function(){var e,t,r,n,i,s,o,a,l;if(save(),i=pop(),(o=pop())!==symbol(NIL)&&i!==symbol(NIL)){if(e=pop(),istensor(e)){for((s=alloc_tensor(e.tensor.nelem)).tensor.ndim=e.tensor.ndim,t=r=0,a=e.tensor.ndim;0<=a?r<a:r>a;t=0<=a?++r:--r)s.tensor.dim[t]=e.tensor.dim[t];for(t=n=0,l=e.tensor.nelem;0<=l?n<l:n>l;t=0<=l?++n:--n)push(e.tensor.elem[t]),push(o),push(i),subst(),s.tensor.elem[t]=pop(),check_tensor_dimensions(s);push(s)}else equal(e,o)?push(i):iscons(e)?(push(car(e)),push(o),push(i),subst(),push(cdr(e)),push(o),push(i),subst(),cons()):push(e);return restore()}restore()},Eval_sum=function(){var e,t,r,n,i,s,o,a;if(t=0,0,0,e=cadr(p1),r=caddr(p1),issymbol(r)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n))push(p1);else{if(push(caddddr(p1)),Eval(),i=pop_integer(),!isNaN(i)){for(p4=get_binding(r),push_integer(0),t=s=o=n,a=i;o<=a?s<=a:s>=a;t=o<=a?++s:--s)push_integer(t),p5=pop(),set_binding(r,p5),push(e),Eval(),add();return set_binding(r,p4)}push(p1)}},Eval_tan=function(){return push(cadr(p1)),Eval(),tangent()},tangent=function(){return save(),yytangent(),restore()},yytangent=function(){var e,t;if(0,e=0,p1=pop(),car(p1)!==symbol(ARCTAN)){if(isdouble(p1))return e=Math.tan(p1.d),Math.abs(e)<1e-10&&(e=0),void push_double(e);if(isnegative(p1))return push(p1),negate(),tangent(),void negate();if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),(t=pop_integer())<0||isNaN(t))return push(symbol(TAN)),push(p1),void list(2);switch(t%360){case 0:case 180:return push_integer(0);case 30:case 210:return push_rational(1,3),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 330:return push_rational(-1,3),push_integer(3),push_rational(1,2),power(),multiply();case 45:case 225:return push_integer(1);case 135:case 315:return push_integer(-1);case 60:case 240:return push_integer(3),push_rational(1,2),power();case 120:case 300:return push_integer(3),push_rational(1,2),power(),negate();default:return push(symbol(TAN)),push(p1),list(2)}}else push(cadr(p1))},Eval_tanh=function(){var e;if(e=0,push(cadr(p1)),Eval(),p1=pop(),car(p1)!==symbol(ARCTANH)){if(isdouble(p1))return e=Math.tanh(p1.d),Math.abs(e)<1e-10&&(e=0),void push_double(e);if(!isZeroAtomOrTensor(p1))return push_symbol(TANH),push(p1),list(2);push(zero)}else push(cadr(p1))},Eval_taylor=function(){return p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(24):push(p2),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(0):push(p2),taylor()},taylor=function(){var e,t,r,n;if(e=0,0,save(),p4=pop(),p3=pop(),p2=pop(),p1=pop(),push(p3),t=pop_integer(),isNaN(t))return push_symbol(TAYLOR),push(p1),push(p2),push(p3),push(p4),list(5),void restore();for(push(p1),push(p2),push(p4),subst(),Eval(),push_integer(1),p5=pop(),e=r=1,n=t;(1<=n?r<=n:r>=n)&&(push(p1),push(p2),derivative(),p1=pop(),!isZeroAtomOrTensor(p1));e=1<=n?++r:--r)push(p5),push(p2),push(p4),subtract(),multiply(),p5=pop(),push(p1),push(p2),push(p4),subst(),Eval(),push(p5),multiply(),push_integer(e),factorial(),divide(),add();return restore()},Eval_tensor=function(){var e,t,r,n,i,s,o,a,l;for(r=0,0,0,check_tensor_dimensions(p1),o=p1.tensor.nelem,s=p1.tensor.ndim,(p2=alloc_tensor(o)).tensor.ndim=s,r=n=0,a=s;0<=a?n<a:n>a;r=0<=a?++n:--n)p2.tensor.dim[r]=p1.tensor.dim[r];for(e=p1.tensor.elem,t=p2.tensor.elem,check_tensor_dimensions(p2),r=i=0,l=o;0<=l?i<l:i>l;r=0<=l?++i:--i)push(e[r]),Eval(),t[r]=pop();return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),promote_tensor()},tensor_plus_tensor=function(){var e,t,r,n,i,s,o,a,l,u,c,p;if(n=0,0,0,save(),p2=pop(),(a=(p1=pop()).tensor.ndim)!==p2.tensor.ndim)return push(symbol(NIL)),void restore();for(n=i=0,u=a;0<=u?i<u:i>u;n=0<=u?++i:--i)if(p1.tensor.dim[n]!==p2.tensor.dim[n])return push(symbol(NIL)),void restore();for(l=p1.tensor.nelem,(p3=alloc_tensor(l)).tensor.ndim=a,n=s=0,c=a;0<=c?s<c:s>c;n=0<=c?++s:--s)p3.tensor.dim[n]=p1.tensor.dim[n];for(e=p1.tensor.elem,t=p2.tensor.elem,r=p3.tensor.elem,n=o=0,p=l;0<=p?o<p:o>p;n=0<=p?++o:--o)push(e[n]),push(t[n]),add(),r[n]=pop();return push(p3),restore()},tensor_times_scalar=function(){var e,t,r,n,i,s,o,a,l;for(r=0,0,0,save(),p2=pop(),s=(p1=pop()).tensor.ndim,o=p1.tensor.nelem,(p3=alloc_tensor(o)).tensor.ndim=s,r=n=0,a=s;0<=a?n<a:n>a;r=0<=a?++n:--n)p3.tensor.dim[r]=p1.tensor.dim[r];for(e=p1.tensor.elem,t=p3.tensor.elem,r=i=0,l=o;0<=l?i<l:i>l;r=0<=l?++i:--i)push(e[r]),push(p2),multiply(),t[r]=pop();return push(p3),restore()},scalar_times_tensor=function(){var e,t,r,n,i,s,o,a,l;for(r=0,0,0,save(),p2=pop(),p1=pop(),s=p2.tensor.ndim,o=p2.tensor.nelem,(p3=alloc_tensor(o)).tensor.ndim=s,r=n=0,a=s;0<=a?n<a:n>a;r=0<=a?++n:--n)p3.tensor.dim[r]=p2.tensor.dim[r];for(e=p2.tensor.elem,t=p3.tensor.elem,r=i=0,l=o;0<=l?i<l:i>l;r=0<=l?++i:--i)push(p1),push(e[r]),multiply(),t[r]=pop();return push(p3),restore()},check_tensor_dimensions=function(e){e.tensor.nelem!==e.tensor.elem.length&&console.log("something wrong in tensor dimensions")},is_square_matrix=function(e){return istensor(e)&&2===e.tensor.ndim&&e.tensor.dim[0]===e.tensor.dim[1]?1:0},d_tensor_tensor=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h;if(n=0,i=0,0,0,l=p1.tensor.ndim,u=p1.tensor.nelem,l+1>=MAXDIM)return push_symbol(DERIVATIVE),push(p1),push(p2),void list(3);for((p3=alloc_tensor(u*p2.tensor.nelem)).tensor.ndim=l+1,n=s=0,c=l;0<=c?s<c:s>c;n=0<=c?++s:--s)p3.tensor.dim[n]=p1.tensor.dim[n];for(p3.tensor.dim[l]=p2.tensor.dim[0],e=p1.tensor.elem,t=p2.tensor.elem,r=p3.tensor.elem,n=o=0,p=u;0<=p?o<p:o>p;n=0<=p?++o:--o)for(i=a=0,h=p2.tensor.nelem;0<=h?a<h:a>h;i=0<=h?++a:--a)push(e[n]),push(t[i]),derivative(),r[n*p2.tensor.nelem+i]=pop();return push(p3)},d_scalar_tensor=function(){var e,t,r,n,i;for((p3=alloc_tensor(p2.tensor.nelem)).tensor.ndim=1,p3.tensor.dim[0]=p2.tensor.dim[0],e=p2.tensor.elem,t=p3.tensor.elem,r=n=0,i=p2.tensor.nelem;0<=i?n<i:n>i;r=0<=i?++n:--n)push(p1),push(e[r]),derivative(),t[r]=pop();return push(p3)},d_tensor_scalar=function(){var e,t,r,n,i,s,o;for(r=0,(p3=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,r=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;r=0<=s?++n:--n)p3.tensor.dim[r]=p1.tensor.dim[r];for(e=p1.tensor.elem,t=p3.tensor.elem,r=i=0,o=p1.tensor.nelem;0<=o?i<o:i>o;r=0<=o?++i:--i)push(e[r]),push(p2),derivative(),t[r]=pop();return push(p3)},compare_tensors=function(e,t){var r,n,i,s,o;if(r=0,e.tensor.ndim<t.tensor.ndim)return-1;if(e.tensor.ndim>t.tensor.ndim)return 1;for(r=n=0,s=e.tensor.ndim;0<=s?n<s:n>s;r=0<=s?++n:--n){if(e.tensor.dim[r]<t.tensor.dim[r])return-1;if(e.tensor.dim[r]>t.tensor.dim[r])return 1}for(r=i=0,o=e.tensor.nelem;0<=o?i<o:i>o;r=0<=o?++i:--i)if(!equal(e.tensor.elem[r],t.tensor.elem[r]))return lessp(e.tensor.elem[r],t.tensor.elem[r])?-1:1;return 0},power_tensor=function(){var e,t,r,n,i,s,o,a;if(e=0,0,i=0,t=p1.tensor.ndim-1,p1.tensor.dim[0]!==p1.tensor.dim[t])return push_symbol(POWER),push(p1),push(p2),void list(3);if(push(p2),i=pop_integer(),isNaN(i))return push_symbol(POWER),push(p1),push(p2),void list(3);if(0===i){for(2!==p1.tensor.ndim&&stop("power(tensor,0) with tensor rank not equal to 2"),i=p1.tensor.dim[0],(p1=alloc_tensor(i*i)).tensor.ndim=2,p1.tensor.dim[0]=i,p1.tensor.dim[1]=i,e=r=0,s=i;0<=s?r<s:r>s;e=0<=s?++r:--r)p1.tensor.elem[i*e+e]=one;return check_tensor_dimensions(p1),void push(p1)}for(i<0&&(i=-i,push(p1),inv(),p1=pop()),push(p1),a=[],e=n=1,o=i;(1<=o?n<o:n>o)&&(push(p1),inner(),!isZeroAtomOrTensor(stack[tos-1]));e=1<=o?++n:--n)a.push(void 0);return a},copy_tensor=function(){var e,t,r,n,i;for(e=0,save(),p1=pop(),(p2=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,e=t=0,n=p1.tensor.ndim;0<=n?t<n:t>n;e=0<=n?++t:--t)p2.tensor.dim[e]=p1.tensor.dim[e];for(e=r=0,i=p1.tensor.nelem;0<=i?r<i:r>i;e=0<=i?++r:--r)p2.tensor.elem[e]=p1.tensor.elem[e];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),restore()},promote_tensor=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h,d,f;if(e=0,t=0,r=0,0,0,save(),p1=pop(),!istensor(p1))return push(p1),void restore();for(p2=p1.tensor.elem[0],e=n=1,c=p1.tensor.nelem;1<=c?n<c:n>c;e=1<=c?++n:--n)compatible(p2,p1.tensor.elem[e])||stop("Cannot promote tensor due to inconsistent tensor components.");if(!istensor(p2))return push(p1),void restore();for((o=p1.tensor.ndim+p2.tensor.ndim)>MAXDIM&&stop("tensor rank > "+MAXDIM),a=p1.tensor.nelem*p2.tensor.nelem,(p3=alloc_tensor(a)).tensor.ndim=o,e=i=0,p=p1.tensor.ndim;0<=p?i<p:i>p;e=0<=p?++i:--i)p3.tensor.dim[e]=p1.tensor.dim[e];for(t=s=0,h=p2.tensor.ndim;0<=h?s<h:s>h;t=0<=h?++s:--s)p3.tensor.dim[e+t]=p2.tensor.dim[t];for(r=0,e=l=0,d=p1.tensor.nelem;0<=d?l<d:l>d;e=0<=d?++l:--l)for(t=u=0,f=(p2=p1.tensor.elem[e]).tensor.nelem;0<=f?u<f:u>f;t=0<=f?++u:--u)p3.tensor.elem[r++]=p2.tensor.elem[t];return check_tensor_dimensions(p2),check_tensor_dimensions(p3),push(p3),restore()},compatible=function(e,t){var r,n,i;if(!istensor(e)&&!istensor(t))return 1;if(!istensor(e)||!istensor(t))return 0;if(e.tensor.ndim!==t.tensor.ndim)return 0;for(r=n=0,i=e.tensor.ndim;0<=i?n<i:n>i;r=0<=i?++n:--n)if(e.tensor.dim[r]!==t.tensor.dim[r])return 0;return 1},Eval_test=function(){var e,t;for(t=p1,p1=cdr(p1);iscons(p1);){if(cdr(p1)===symbol(NIL))return push(car(p1)),void Eval();if(null==(e=isZeroLikeOrNonZeroLikeOrUndetermined(car(p1))))return void push(t);if(e)return push(cadr(p1)),void Eval();p1=cddr(p1)}return push_integer(0)},Eval_testeq=function(){var e,t,r;if(t=p1,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),subtract(),r=pop(),e=isZeroLikeOrNonZeroLikeOrUndetermined(r))push_integer(0);else if(null==e||e)if(push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),r=pop(),e=isZeroLikeOrNonZeroLikeOrUndetermined(r))push_integer(0);else{if(null==e||e)return push(t);push_integer(1)}else push_integer(1)},Eval_testge=function(){var e,t;if(t=p1,null!=(e=cmp_args()))return push_integer(e>=0?1:0);push(t)},Eval_testgt=function(){var e,t;if(t=p1,null!=(e=cmp_args()))return push_integer(e>0?1:0);push(t)},Eval_testle=function(){var e,t;if(t=p1,null!=(e=cmp_args()))return push_integer(e<=0?1:0);push(t)},Eval_testlt=function(){var e,t;if(t=p1,null!=(e=cmp_args()))return push_integer(e<0?1:0);push(t)},Eval_not=function(){var e,t;return t=p1,null==(e=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)))?push(t):push_integer(e?0:1)},Eval_and=function(){var e,t,r,n;for(e=cdr(n=p1),r=!1;iscons(e);)if(null==(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(e))))r=!0,e=cdr(e);else if(t)e=cdr(e);else if(!t)return void push_integer(0);return r?push(n):push_integer(1)},Eval_or=function(){var e,t,r,n;for(t=cdr(n=p1),r=!1;iscons(t);)if(null==(e=isZeroLikeOrNonZeroLikeOrUndetermined(car(t))))r=!0,t=cdr(t);else{if(e)return void push_integer(1);e||(t=cdr(t))}return r?push(n):push_integer(0)},cmp_args=function(){var e;if(e=0,push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),(p1=pop()).k!==NUM&&p1.k!==DOUBLE&&(push(p1),yyfloat(),Eval(),p1=pop()),isZeroAtomOrTensor(p1))return 0;switch(p1.k){case NUM:e=-1===MSIGN(p1.q.a)?-1:1;break;case DOUBLE:e=p1.d<0?-1:1;break;default:e=null}return e},transform=function(e,t){var r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v;if(0,save(),p1=null,p4=pop(),p3=pop(),DEBUG&&console.log("         !!!!!!!!!   transform on: "+p3),saveMetaBindings(),set_binding(symbol(METAX),p4),g=tos,push_integer(1),push(p3),push(p4),polyform(),push(p4),r=tos-2,decomp(t),c=tos-r,DEBUG)for(console.log("  "+c+" decomposed elements ====== "),i=s=0,p=c;0<=p?s<p:s>p;i=0<=p?++s:--s)console.log("  decomposition element "+i+": "+stack[tos-1-i]);if(y=!1,t){if(!isNumericAtom(p3))if(m=e,DEBUG&&console.log("applying transform: "+m),DEBUG&&console.log("scanning table entry "+m),push(m),push(symbol(SYMBOL_A_UNDERSCORE)),push(symbol(METAA)),subst(),push(symbol(SYMBOL_B_UNDERSCORE)),push(symbol(METAB)),subst(),push(symbol(SYMBOL_X_UNDERSCORE)),push(symbol(METAX)),subst(),p1=pop(),p5=car(p1),DEBUG&&console.log("template expression: "+p5),p6=cadr(p1),p7=cddr(p1),f_equals_a(g,t))y=!0;else{for(DEBUG&&console.log("p3 at this point: "+p3),v=[],DEBUG&&console.log("car(p3): "+car(p3)),iscons(h=p3)&&(v.push(car(p3)),h=cdr(p3));iscons(h);)d=car(h),h=cdr(h),DEBUG&&console.log("tos before recursive transform: "+tos),push(d),push_symbol(NIL),DEBUG&&console.log("testing: "+d),DEBUG&&console.log("about to try to simplify other term: "+d),f=transform(e,t),y=y||f,v.push(pop()),DEBUG&&console.log("tried to simplify other term: "+d+" ...successful?: "+f+" ...transformed: "+v[v.length-1]);if(0!==v.length){for(l=0,o=v.length;l<o;l++)i=v[l],push(i);list(v.length),p6=pop()}}}else for(u=0,a=e.length;u<a;u++)if(n=e[u],DEBUG&&(console.log("scanning table entry "+n),(n+"").indexOf("f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))")),n&&(scan_meta(n),p1=pop(),p5=cadr(p1),p6=caddr(p1),p7=cdddr(p1),f_equals_a(g,t))){y=!0;break}return moveTos(g),y?(push(p6),Eval(),p1=pop(),y=!0):p1=t?p3:symbol(NIL),restoreMetaBindings(),push(p1),restore(),y},saveMetaBindings=function(){return push(get_binding(symbol(METAA))),push(get_binding(symbol(METAB))),push(get_binding(symbol(METAX)))},restoreMetaBindings=function(){return set_binding(symbol(METAX),pop()),set_binding(symbol(METAB),pop()),set_binding(symbol(METAA),pop())},f_equals_a=function(e,t){var r,n,i,s,o,a,l,u,c;for(r=0,n=0,r=i=a=e,l=tos;a<=l?i<l:i>l;r=a<=l?++i:--i)for(set_binding(symbol(METAA),stack[r]),DEBUG&&console.log("  binding METAA to "+get_binding(symbol(METAA))),n=s=u=e,c=tos;u<=c?s<c:s>c;n=u<=c?++s:--s){for(set_binding(symbol(METAB),stack[n]),DEBUG&&console.log("  binding METAB to "+get_binding(symbol(METAB))),p1=p7;iscons(p1)&&(push(car(p1)),Eval(),p2=pop(),!isZeroAtomOrTensor(p2));)p1=cdr(p1);if(!iscons(p1)&&(push(p3),DEBUG&&console.log("about to evaluate template expression: "+p5+" binding METAA to "+get_binding(symbol(METAA))+" and binding METAB to "+get_binding(symbol(METAB))+" and binding METAX to "+get_binding(symbol(METAX))),push(p5),t&&(o=expanding,expanding=!1),Eval(),t&&(expanding=o),DEBUG&&console.log("  comparing "+stack[tos-1]+" to: "+stack[tos-2]),subtract(),p1=pop(),isZeroAtomOrTensor(p1)))return DEBUG&&(console.log("binding METAA to "+get_binding(symbol(METAA))),console.log("binding METAB to "+get_binding(symbol(METAB))),console.log("binding METAX to "+get_binding(symbol(METAX))),console.log("comparing "+p3+" to: "+p5)),1}return 0},Eval_transpose=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),transpose()},transpose=function(){var e,t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A,N,k,M,C;for(o=0,u=0,c=0,p=0,d=0,0,0,C=0,r=[],n=[],o=h=0,w=MAXDIM;0<=w?h<w:h>w;o=0<=w?++h:--h)r[o]=0,n[o]=0;if(save(),p3=pop(),p2=pop(),p1=pop(),isNumericAtom(p1))return push(p1),void restore();if((isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2))&&isidentitymatrix(p1))return push(p1),void restore();if(istranspose(p1)&&(a=car(cdr(cdr(p1))),l=car(cdr(cdr(cdr(p1)))),equal(a,p3)&&equal(l,p2)||equal(l,p3)&&equal(a,p2)||equal(a,symbol(NIL))&&equal(l,symbol(NIL))&&(isplusone(p3)&&isplustwo(p2)||isplusone(p2)&&isplustwo(p3))))return push(car(cdr(p1))),void restore();if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),add(),p1=cdr(p1);restore()}else if(expanding&&ismultiply(p1)){for(p1=cdr(p1),push(one);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),multiply(),p1=cdr(p1);restore()}else{if(!expanding||!isinnerordot(p1)){if(!istensor(p1))return isZeroAtomOrTensor(p1)?(push(zero),void restore()):(push_symbol(TRANSPOSE),push(p1),isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2)?list(2):(push(p2),push(p3),list(4)),void restore());if(g=p1.tensor.ndim,y=p1.tensor.nelem,1===g)return push(p1),void restore();for(push(p2),p=pop_integer(),push(p3),d=pop_integer(),(p<1||p>g||d<1||d>g)&&stop("transpose: index out of range"),p--,d--,(p2=alloc_tensor(y)).tensor.ndim=g,o=m=0,E=g;0<=E?m<E:m>E;o=0<=E?++m:--m)p2.tensor.dim[o]=p1.tensor.dim[o];for(p2.tensor.dim[p]=p1.tensor.dim[d],p2.tensor.dim[d]=p1.tensor.dim[p],e=p1.tensor.elem,i=p2.tensor.elem,o=v=0,S=g;0<=S?v<S:v>S;o=0<=S?++v:--v)r[o]=0,n[o]=p1.tensor.dim[o];for(o=b=0,A=y;0<=A?b<A:b>A;o=0<=A?++b:--b){for(C=r[p],r[p]=r[d],r[d]=C,C=n[p],n[p]=n[d],n[d]=C,c=0,u=x=0,N=g;0<=N?x<N:x>N;u=0<=N?++x:--x)c=c*n[u]+r[u];for(C=r[p],r[p]=r[d],r[d]=C,C=n[p],n[p]=n[d],n[d]=C,i[c]=e[o],u=M=k=g-1;(k<=0?M<=0:M>=0)&&!(++r[u]<n[u]);u=k<=0?++M:--M)r[u]=0}return push(p2),restore()}for(p1=cdr(p1),t=[];iscons(p1);)t.push([car(p1),p2,p3]),p1=cdr(p1);for(s=f=_=t.length-1;_<=0?f<=0:f>=0;s=_<=0?++f:--f)push(t[s][0]),push(t[s][1]),push(t[s][2]),transpose(),s!==t.length-1&&inner();restore()}},Eval_user_function=function(){var e,t;if(DEBUG&&console.log("Eval_user_function evaluating: "+car(p1)),car(p1)!==symbol(SYMBOL_D)||get_binding(symbol(SYMBOL_D))!==symbol(SYMBOL_D)){if(push(car(p1)),Eval(),e=pop(),isNumericAtom(e)?stop("expected function invocation, found multiplication instead. Use '*' symbol explicitly for multiplication."):istensor(e)?stop("expected function invocation, found tensor product instead. Use 'dot/inner' explicitly."):isstr(e)&&stop("expected function, found string instead."),p3=car(cdr(e)),p4=car(cdr(cdr(e))),p5=cdr(p1),car(e)===symbol(FUNCTION)&&e!==car(p1)){for(p1=p4,p2=p5,t=tos;iscons(p1)&&iscons(p2);)push(car(p1)),push(car(p2)),p1=cdr(p1),p2=cdr(p2);return list(tos-t),p6=pop(),push(p3),iscons(p6)&&(push(p6),rewrite_args()),Eval()}for(t=tos,push(e),p1=p5;iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);list(tos-t)}else Eval_derivative()},rewrite_args=function(){var e,t;if(t=0,save(),p2=pop(),p1=pop(),istensor(p1))return t=rewrite_args_tensor(),restore(),t;if(iscons(p1)){for(e=tos,car(p1)===car(p2)?(push_symbol(EVAL),push(car(cdr(p2))),list(2)):push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),t+=rewrite_args(),p1=cdr(p1);return list(tos-e),restore(),t}if(!issymbol(p1))return push(p1),restore(),0;for(p3=p2;iscons(p3);){if(p1===car(p3))return push(cadr(p3)),restore(),1;p3=cddr(p3)}return p3=get_binding(p1),push(p3),p1!==p3&&(push(p2),0===(t=rewrite_args())&&(pop(),push(p1))),restore(),t},rewrite_args_tensor=function(){var e,t,r,n;for(r=0,e=0,push(p1),copy_tensor(),e=t=0,n=(p1=pop()).tensor.nelem;0<=n?t<n:t>n;e=0<=n?++t:--t)push(p1.tensor.elem[e]),push(p2),r+=rewrite_args(),p1.tensor.elem[e]=pop();return check_tensor_dimensions(p1),push(p1),r},Eval_zero=function(){var e,t,r,n,i,s,o,a;for(e=0,t=[],n=0,s=0,e=r=0,o=MAXDIM;0<=o?r<o:r>o;e=0<=o?++r:--r)t[e]=0;for(n=1,s=0,p2=cdr(p1);iscons(p2);){if(push(car(p2)),Eval(),(e=pop_integer())<1||isNaN(e))return void push(zero);n*=e,t[s++]=e,p2=cdr(p2)}if(0!==s){for((p1=alloc_tensor(n)).tensor.ndim=s,e=i=0,a=s;0<=a?i<a:i>a;e=0<=a?++i:--i)p1.tensor.dim[e]=t[e];return push(p1)}push(zero)},allocatedId=0,alloc_tensor=function(e){var t,r,n,i;for(t=0,(n=new U).k=TENSOR,n.tensor=new tensor,n.tensor.nelem=e,t=r=0,i=e;0<=i?r<i:r>i;t=0<=i?++r:--r)n.tensor.elem[t]=zero;return n.tensor.allocatedId=allocatedId,allocatedId++,check_tensor_dimensions(n),n},Find=function(e,t){var r,n,i;if(r=0,equal(e,t))return 1;if(istensor(e)){for(r=n=0,i=e.tensor.nelem;0<=i?n<i:n>i;r=0<=i?++n:--n)if(Find(e.tensor.elem[r],t))return 1;return 0}for(;iscons(e);){if(Find(car(e),t))return 1;e=cdr(e)}return 0},findPossibleClockForm=function(e){var t,r,n;if(t=0,isimaginaryunit(e))return 0;if(car(e)===symbol(POWER)&&!isinteger(caddr(p1))&&Find(cadr(e),imaginaryunit))return 1;if(car(e)===symbol(POWER)&&equaln(cadr(e),-1)&&!isinteger(caddr(p1)))return 1;if(istensor(e)){for(t=r=0,n=e.tensor.nelem;0<=n?r<n:r>n;t=0<=n?++r:--r)if(findPossibleClockForm(e.tensor.elem[t]))return 1;return 0}for(;iscons(e);){if(findPossibleClockForm(car(e)))return 1;e=cdr(e)}return 0},findPossibleExponentialForm=function(e){var t,r,n;if(t=0,car(e)===symbol(POWER)&&cadr(e)===symbol(E))return Find(caddr(e),imaginaryunit);if(istensor(e)){for(t=r=0,n=e.tensor.nelem;0<=n?r<n:r>n;t=0<=n?++r:--r)if(findPossibleExponentialForm(e.tensor.elem[t]))return 1;return 0}for(;iscons(e);){if(findPossibleExponentialForm(car(e)))return 1;e=cdr(e)}return 0},$.Find=Find,init=function(){var e,t,r;if(e=0,flag=0,reset_after_error(),chainOfUserSymbolsNotFunctionsBeingEvaluated=[],!flag){for(flag=1,e=t=0,r=NSYM;0<=r?t<r:t>r;e=0<=r?++t:--t)symtab[e]=new U,symtab[e].k=SYM,binding[e]=symtab[e],isSymbolReclaimable[e]=!1;return defn()}},defn_str=['version="'+version+'"',"e=exp(1)","i=sqrt(-1)","autoexpand=1","assumeRealVariables=1","trange=[-pi,pi]","xrange=[-10,10]","yrange=[-10,10]","last=0","trace=0","forceFixedPrintout=1","maxFixedPrintoutDigits=6","printLeaveEAlone=1","printLeaveXAlone=0","cross(u,v)=[u[2]*v[3]-u[3]*v[2],u[3]*v[1]-u[1]*v[3],u[1]*v[2]-u[2]*v[1]]","curl(v)=[d(v[3],y)-d(v[2],z),d(v[1],z)-d(v[3],x),d(v[2],x)-d(v[1],y)]","div(v)=d(v[1],x)+d(v[2],y)+d(v[3],z)","ln(x)=log(x)"],defn=function(){var e,t,r,n,i;for(p0=symbol(NIL),p1=symbol(NIL),p2=symbol(NIL),p3=symbol(NIL),p4=symbol(NIL),p5=symbol(NIL),p6=symbol(NIL),p7=symbol(NIL),p8=symbol(NIL),p9=symbol(NIL),std_symbol("abs",ABS),std_symbol("add",ADD),std_symbol("adj",ADJ),std_symbol("and",AND),std_symbol("approxratio",APPROXRATIO),std_symbol("arccos",ARCCOS),std_symbol("arccosh",ARCCOSH),std_symbol("arcsin",ARCSIN),std_symbol("arcsinh",ARCSINH),std_symbol("arctan",ARCTAN),std_symbol("arctanh",ARCTANH),std_symbol("arg",ARG),std_symbol("atomize",ATOMIZE),std_symbol("besselj",BESSELJ),std_symbol("bessely",BESSELY),std_symbol("binding",BINDING),std_symbol("binomial",BINOMIAL),std_symbol("ceiling",CEILING),std_symbol("check",CHECK),std_symbol("choose",CHOOSE),std_symbol("circexp",CIRCEXP),std_symbol("clear",CLEAR),std_symbol("clearall",CLEARALL),std_symbol("clearpatterns",CLEARPATTERNS),std_symbol("clock",CLOCK),std_symbol("coeff",COEFF),std_symbol("cofactor",COFACTOR),std_symbol("condense",CONDENSE),std_symbol("conj",CONJ),std_symbol("contract",CONTRACT),std_symbol("cos",COS),std_symbol("cosh",COSH),std_symbol("decomp",DECOMP),std_symbol("defint",DEFINT),std_symbol("deg",DEGREE),std_symbol("denominator",DENOMINATOR),std_symbol("det",DET),std_symbol("derivative",DERIVATIVE),std_symbol("dim",DIM),std_symbol("dirac",DIRAC),std_symbol("divisors",DIVISORS),std_symbol("do",DO),std_symbol("dot",DOT),std_symbol("draw",DRAW),std_symbol("dsolve",DSOLVE),std_symbol("erf",ERF),std_symbol("erfc",ERFC),std_symbol("eigen",EIGEN),std_symbol("eigenval",EIGENVAL),std_symbol("eigenvec",EIGENVEC),std_symbol("eval",EVAL),std_symbol("exp",EXP),std_symbol("expand",EXPAND),std_symbol("expcos",EXPCOS),std_symbol("expsin",EXPSIN),std_symbol("factor",FACTOR),std_symbol("factorial",FACTORIAL),std_symbol("factorpoly",FACTORPOLY),std_symbol("filter",FILTER),std_symbol("float",FLOATF),std_symbol("floor",FLOOR),std_symbol("for",FOR),std_symbol("function",FUNCTION),std_symbol("Gamma",GAMMA),std_symbol("gcd",GCD),std_symbol("hermite",HERMITE),std_symbol("hilbert",HILBERT),std_symbol("imag",IMAG),std_symbol("component",INDEX),std_symbol("inner",INNER),std_symbol("integral",INTEGRAL),std_symbol("inv",INV),std_symbol("invg",INVG),std_symbol("isinteger",ISINTEGER),std_symbol("isprime",ISPRIME),std_symbol("laguerre",LAGUERRE),std_symbol("lcm",LCM),std_symbol("leading",LEADING),std_symbol("legendre",LEGENDRE),std_symbol("log",LOG),std_symbol("lookup",LOOKUP),std_symbol("mod",MOD),std_symbol("multiply",MULTIPLY),std_symbol("not",NOT),std_symbol("nroots",NROOTS),std_symbol("number",NUMBER),std_symbol("numerator",NUMERATOR),std_symbol("operator",OPERATOR),std_symbol("or",OR),std_symbol("outer",OUTER),std_symbol("pattern",PATTERN),std_symbol("patternsinfo",PATTERNSINFO),std_symbol("polar",POLAR),std_symbol("power",POWER),std_symbol("prime",PRIME),std_symbol("print",PRINT),std_symbol("print2dascii",PRINT2DASCII),std_symbol("printcomputer",PRINTFULL),std_symbol("printlatex",PRINTLATEX),std_symbol("printlist",PRINTLIST),std_symbol("printhuman",PRINTPLAIN),std_symbol("printLeaveEAlone",PRINT_LEAVE_E_ALONE),std_symbol("printLeaveXAlone",PRINT_LEAVE_X_ALONE),std_symbol("product",PRODUCT),std_symbol("quote",QUOTE),std_symbol("quotient",QUOTIENT),std_symbol("rank",RANK),std_symbol("rationalize",RATIONALIZE),std_symbol("real",REAL),std_symbol("rect",YYRECT),std_symbol("roots",ROOTS),std_symbol("round",ROUND),std_symbol("equals",SETQ),std_symbol("sgn",SGN),std_symbol("silentpattern",SILENTPATTERN),std_symbol("simplify",SIMPLIFY),std_symbol("sin",SIN),std_symbol("sinh",SINH),std_symbol("shape",SHAPE),std_symbol("sqrt",SQRT),std_symbol("stop",STOP),std_symbol("subst",SUBST),std_symbol("sum",SUM),std_symbol("symbolsinfo",SYMBOLSINFO),std_symbol("tan",TAN),std_symbol("tanh",TANH),std_symbol("taylor",TAYLOR),std_symbol("test",TEST),std_symbol("testeq",TESTEQ),std_symbol("testge",TESTGE),std_symbol("testgt",TESTGT),std_symbol("testle",TESTLE),std_symbol("testlt",TESTLT),std_symbol("transpose",TRANSPOSE),std_symbol("unit",UNIT),std_symbol("zero",ZERO),std_symbol("nil",NIL),std_symbol("autoexpand",AUTOEXPAND),std_symbol("bake",BAKE),std_symbol("assumeRealVariables",ASSUME_REAL_VARIABLES),std_symbol("last",LAST),std_symbol("lastprint",LAST_PRINT),std_symbol("last2dasciiprint",LAST_2DASCII_PRINT),std_symbol("lastfullprint",LAST_FULL_PRINT),std_symbol("lastlatexprint",LAST_LATEX_PRINT),std_symbol("lastlistprint",LAST_LIST_PRINT),std_symbol("lastplainprint",LAST_PLAIN_PRINT),std_symbol("trace",TRACE),std_symbol("forceFixedPrintout",FORCE_FIXED_PRINTOUT),std_symbol("maxFixedPrintoutDigits",MAX_FIXED_PRINTOUT_DIGITS),std_symbol("~",YYE),std_symbol("$DRAWX",DRAWX),std_symbol("$METAA",METAA),std_symbol("$METAB",METAB),std_symbol("$METAX",METAX),std_symbol("$SECRETX",SECRETX),std_symbol("version",VERSION),std_symbol("pi",PI),std_symbol("a",SYMBOL_A),std_symbol("b",SYMBOL_B),std_symbol("c",SYMBOL_C),std_symbol("d",SYMBOL_D),std_symbol("i",SYMBOL_I),std_symbol("j",SYMBOL_J),std_symbol("n",SYMBOL_N),std_symbol("r",SYMBOL_R),std_symbol("s",SYMBOL_S),std_symbol("t",SYMBOL_T),std_symbol("x",SYMBOL_X),std_symbol("y",SYMBOL_Y),std_symbol("z",SYMBOL_Z),std_symbol("I",SYMBOL_IDENTITY_MATRIX),std_symbol("a_",SYMBOL_A_UNDERSCORE),std_symbol("b_",SYMBOL_B_UNDERSCORE),std_symbol("x_",SYMBOL_X_UNDERSCORE),std_symbol("$C1",C1),std_symbol("$C2",C2),std_symbol("$C3",C3),std_symbol("$C4",C4),std_symbol("$C5",C5),std_symbol("$C6",C6),defineSomeHandyConstants(),n=codeGen,codeGen=!1,t=r=0,i=defn_str.length;0<=i?r<i:r>i;t=0<=i?++r:--r)e=defn_str[t],scan(e),DEBUG&&(console.log("... evaling "+e),console.log("top of stack:"),console.log(print_list(stack[tos-1]))),Eval(),pop();return codeGen=n},defineSomeHandyConstants=function(){return zero=new_integer(0),one=new_integer(1),push_double(1),one_as_double=pop(),push_symbol(POWER),DEBUG&&console.log(print_list(stack[tos-1])),push_integer(-1),DEBUG&&console.log(print_list(stack[tos-1])),push_rational(1,2),DEBUG&&console.log(print_list(stack[tos-1])),list(3),DEBUG&&console.log(print_list(stack[tos-1])),imaginaryunit=pop()},mcmp=function(e,t){return e.compare(t)},mcmpint=function(e,t){var r;return r=bigInt(t),mcmp(e,r)},strcmp=function(e,t){return e===t?0:e>t?1:-1},doubleToReasonableString=function(e){var t,r;return codeGen?""+e:(isZeroAtomOrTensor(get_binding(symbol(FORCE_FIXED_PRINTOUT)))?(r=""+e,r=printMode===PRINTMODE_LATEX?/\d*\.\d*e.*/gm.test(r)?r.replace(/e(.*)/gm,"\\mathrm{e}{$1}"):r.replace(/(\d+)e(.*)/gm,"$1.0\\mathrm{e}{$2}"):/\d*\.\d*e.*/gm.test(r)?r.replace(/e(.*)/gm,"*10^($1)"):r.replace(/(\d+)e(.*)/gm,"$1.0*10^($2)")):(push(get_binding(symbol(MAX_FIXED_PRINTOUT_DIGITS))),t=pop_integer(),-1===(r=(r=(r=""+e.toFixed(t)).replace(/(\.\d*?[1-9])0+$/gm,"$1")).replace(/\.0+$/gm,"")).indexOf(".")&&(r+=".0"),parseFloat(r)!==e&&(r=e.toFixed(t)+"...")),r)},clear_term=function(){},isspace=function(e){return null!=e&&(" "===e||"\t"===e||"\n"===e||"\v"===e||"\f"===e||"\r"===e)},isdigit=function(e){return null!=e&&/^\d+$/.test(e)},isalpha=function(e){return null!=e&&-1===e.search(/[^A-Za-z]/)},isalphaOrUnderscore=function(e){return null!=e&&-1===e.search(/[^A-Za-z_]/)},isunderscore=function(e){return null!=e&&-1===e.search(/_/)},isalnumorunderscore=function(e){return null!=e&&(isalphaOrUnderscore(e)||isdigit(e))},count=function(e){var t;if(iscons(e))for(t=0;iscons(e);)t+=count(car(e))+1,e=cdr(e);else t=1;return t},countOccurrencesOfSymbol=function(e,t){var r;if(r=0,iscons(t))for(;iscons(t);)r+=countOccurrencesOfSymbol(e,car(t)),t=cdr(t);else equal(e,t)&&(r=1);return r},countsize=function(e){var t,r,n,i;if(n=0,istensor(e))for(t=r=0,i=e.tensor.nelem;0<=i?r<i:r>i;t=0<=i?++r:--r)n+=e.tensor.elem[t];else if(iscons(e))for(;iscons(e);)n+=count(car(e))+1,e=cdr(e);else n=1;return n},stop=function(e){var t;throw errorMessage+="Stop: ",t=errorMessage+=e,errorMessage="",moveTos(0),new Error(t)},findDependenciesInScript=function(e,t){var r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_,E,S,A,N,k,M,C,T,O,I,P,D,R,L,q,$,B,z,F,U,j,G,V,H,W,Y;for(DEBUG&&console.log("stringToBeParsed: "+e),j=(new Date).getTime(),!0,codeGen=!0,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,h=0,"","",S=0,s={affectsVariables:[],affectedBy:[]},z=e;;){try{errorMessage="",check_stack(),DEBUG&&console.log("findDependenciesInScript: scanning"),S=scan(e.substring(h)),DEBUG&&console.log("scanned"),pop(),check_stack()}catch(X){a=X,PRINTOUTRESULT&&console.log(a),errorMessage=a+"",reset_after_error();break}if(0===S)break;h+=S}for(d in U="",DEBUG&&console.log("all local dependencies ----------------"),U+="All local dependencies: ",symbolsDependencies){for(W=symbolsDependencies[d],DEBUG&&console.log("variable "+d+" depends on: "),s.affectsVariables.push(d),U+=" variable "+d+" depends on: ",f=0,m=W.length;f<m;f++)c=W[f],DEBUG&&console.log("    "+c),"'"!==c[0]&&s.affectedBy.push(c),U+=c+", ";U+="; "}for(U+=". ",DEBUG&&console.log("Symbols with reassignments ----------------"),U+="Symbols with reassignments: ",E=0,g=symbolsHavingReassignments.length;E<g;E++)d=symbolsHavingReassignments[E],-1===s.affectedBy.indexOf(d)&&(s.affectedBy.push(d),U+=d+", ");for(U+=". ",DEBUG&&console.log("Symbols in expressions without assignments ----------------"),U+="Symbols in expressions without assignments: ",A=0,y=symbolsInExpressionsWithoutAssignments.length;A<y;A++)d=symbolsInExpressionsWithoutAssignments[A],-1===s.affectedBy.indexOf(d)&&(s.affectedBy.push(d),U+=d+", ");if(U+=". ",s.affectedBy.push("PATTERN_DEPENDENCY"),patternHasBeenFound&&(s.affectsVariables.push("PATTERN_DEPENDENCY"),U+=" - PATTERN_DEPENDENCY inserted - "),DEBUG&&console.log("All dependencies recursively ----------------"),U+="All dependencies recursively: ",B=["",""],u="",P="",""===errorMessage&&!t){try{"","",B=run(e,!0),"",""}catch(X){a=X,PRINTOUTRESULT&&console.log(a),errorMessage=a+"",init()}if(""===errorMessage)for(d in symbolsDependencies){for(codeGen=!0,DEBUG&&console.log("  variable "+d+" is: "+get_binding(usr_symbol(d)).toString()),codeGen=!1,DEBUG&&console.log("  variable "+d+" depends on: "),U+=" variable "+d+" depends on: ",recursiveDependencies(d,D=[],[],Y=[],[],n=[]),k=0,v=Y.length;k<v;k++)c=Y[k],DEBUG&&console.log("    --\x3e cycle through "+c);for(O=0,b=D.length;O<b;O++)c=D[O],DEBUG&&console.log("    "+c),U+=c+", ";for(U+="; ",I=0,x=n.length;I<x;I++)U+=" "+(c=n[I])+", ";for(DEBUG&&console.log("  code generation:"+d+" is: "+get_binding(usr_symbol(d)).toString()),push(get_binding(usr_symbol(d))),L=[],q=[],$=0,w=D.length;$<w;$++)"'"===(o=D[$])[0]&&(i=o.substring(1),C=usr_symbol(i),N=usr_symbol("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE"+i),L.push(C),q.push(N),push(C),push(N),subst(),DEBUG&&console.log("after substitution: "+stack[tos-1]));try{simplifyForCodeGeneration()}catch(X){a=X,PRINTOUTRESULT&&console.log(a),errorMessage=a+"",init()}for(p=F=0,R=L.length;0<=R?F<R:F>R;p=0<=R?++F:--F)push(q[p]),push(L[p]),subst();if(clearRenamedVariablesToAvoidBindingToExternalScope(),""===errorMessage){if(G=pop(),collectUserSymbols(G,H=[]),"","",codeGen=!0,l=G.toString(),codeGen=!1,M=printMode,printMode=PRINTMODE_LATEX,r=G.toString(),printMode=M,-1!==Y.indexOf(d))u+="// "+d+" is part of a cyclic dependency, no code generated.",P+="#"+d+" is part of a cyclic dependency, no code generated.";else if(0!==(H=(H=H.filter((function(e){return-1===predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(e+"")}))).filter((function(e){return-1!==D.indexOf(e+"")||-1!==D.indexOf("'"+e)}))).length){for(T="(",V=0,_=H.length;V<_;V++)(c=H[V]).printname!==d&&(T+=c.printname+", ");T=T.replace(/, $/gm,""),u+=d+" = function "+(T+=")")+" { return ( "+l+" ); }",P+=d+T+" = "+r}else u+=d+" = "+l+";",P+=d+" = "+r;u+="\n",P+="\n",DEBUG&&console.log("    "+u)}}}return u=u.replace(/\n$/gm,""),P=P.replace(/\n$/gm,""),symbolsDependencies={},symbolsHavingReassignments=[],patternHasBeenFound=!1,symbolsInExpressionsWithoutAssignments=[],DEBUG&&console.log("testable string: "+U),TIMING_DEBUGS&&console.log("findDependenciesInScript time for: "+z+" : "+((new Date).getTime()-j)+"ms"),[U,B[0],u,P,B[1],errorMessage,s]},recursiveDependencies=function(e,t,r,n,i,s){var o,a,l,u,c,p,h,d;if(r.push(e),null!=symbolsDependencies[i[i.length-1]]&&-1!==symbolsDependencies[i[i.length-1]].indexOf("'"+e))return DEBUG&&console.log("can't keep following the chain of "+e+" because it's actually a variable bound to a parameter"),-1===t.indexOf("'"+e)&&-1===t.indexOf(e)&&t.push(e),t;if(i.push(e),null==symbolsDependencies[e])return-1===t.indexOf(e)&&t.push(e),t;for(u=0,c=(d=symbolsDependencies[e]).length;u<c;u++)if(a=d[u],-1!==i.indexOf(a)){for(DEBUG&&console.log("  found cycle:"),o="",h=0,p=i.length;h<p;h++)l=i[h],-1===n.indexOf(l)&&n.push(l),DEBUG&&console.log(l+" --\x3e "),o+=l+" --\x3e ";DEBUG&&console.log(" ... then "+a+" again"),o+=" ... then "+a+" again",s.push(o),-1===n.indexOf(a)&&n.push(a)}else recursiveDependencies(a,t,r,n,i,s),i.pop();return t},inited=!1,latexErrorSign="\\rlap{\\large\\color{red}\\bigtriangleup}{\\ \\ \\tiny\\color{red}!}",turnErrorMessageToLatex=function(e){return e="$$\\text{"+(e=(e=(e=(e=(e=(e=(e=e.replace(/\n/g,"")).replace(/_/g,"} \\_ \\text{")).replace(new RegExp(String.fromCharCode(transpose_unicode),"g"),"}{}^{T}\\text{")).replace(new RegExp(String.fromCharCode(dotprod_unicode),"g"),"}\\cdot \\text{")).replace("Stop:","}  \\quad \\text{Stop:")).replace("->","}  \\rightarrow \\text{")).replace("?","}\\enspace "+latexErrorSign+" \\enspace  \\text{")).replace(/\n/g,"")+"}$$"},normaliseDots=function(e){return e=(e=(e=(e=(e=e.replace(new RegExp(String.fromCharCode(8901),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(8226),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(12539),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(55296),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(65381),"g"),String.fromCharCode(dotprod_unicode))},TIMING_DEBUGS=!1,run=function(e,t=!1){var r,n,i,s,o,a,l,u,c,p;if(c=(new Date).getTime(),"selftest"!==(e=normaliseDots(e))){for(inited||(inited=!0,init()),0,l=0,a=0,n="",r="";;){try{errorMessage="",check_stack(),l=scan(e.substring(a)),p1=pop(),check_stack()}catch(h){o=h,PRINTOUTRESULT&&console.log(o),n+=o.message,t&&(r+=turnErrorMessageToLatex(o.message)),reset_after_error();break}if(0===l)break;a+=l,push(p1),!1;try{stringsEmittedByUserPrintouts="",top_level_eval(),p2=pop(),check_stack(),isstr(p2)&&(DEBUG&&console.log(p2.str),DEBUG&&console.log("\n")),p2===symbol(NIL)?(s=stringsEmittedByUserPrintouts,t&&(i="$$"+stringsEmittedByUserPrintouts+"$$")):(s=print_expr(p2),s+="\n",t&&(i="$$"+collectLatexStringFromReturnValue(p2)+"$$",DEBUG&&console.log("collectedLatexResult: "+i))),n+=s,t&&(r+=i),PRINTOUTRESULT&&(DEBUG&&console.log("printline"),DEBUG&&console.log(s)),PRINTOUTRESULT&&(DEBUG&&console.log("display:"),print2dascii(p2)),t&&(r+="\n")}catch(h){!0,s=(o=h).message,t&&(i=turnErrorMessageToLatex(o.message)),PRINTOUTRESULT&&console.log(s),n+=s,""!==s&&(n+="\n"),t&&(r+=i,r+="\n"),init()}}return"\n"===n[n.length-1]&&(n=n.substring(0,n.length-1)),t&&"\n"===r[r.length-1]&&(r=r.substring(0,r.length-1)),t?(DEBUG&&console.log("allReturnedLatexStrings: "+r),u=[n,r]):u=n,TIMING_DEBUGS&&(p="run time on: "+e+" : "+((new Date).getTime()-c)+"ms",console.log(p)),n="",r="",u}selftest()},check_stack=function(){if(0!==tos&&stop("stack error"),frame!==TOS&&stop("frame error"),0!==chainOfUserSymbolsNotFunctionsBeingEvaluated.length&&stop("symbols evaluation still ongoing?"),0!==evaluatingAsFloats&&stop("numeric evaluation still ongoing?"),0!==evaluatingPolar)return stop("evaluation of polar still ongoing?")},top_level_eval=function(){var e,t,r;if(DEBUG&&console.log("#### top level eval"),trigmode=0,r=symbol(AUTOEXPAND),expanding=isZeroAtomOrTensor(get_binding(r))?0:1,t=top(),Eval(),(e=top())!==symbol(NIL))if(set_binding(symbol(LAST),e),isZeroAtomOrTensor(get_binding(symbol(BAKE)))||(bake(),e=top()),t!==symbol(SYMBOL_I)&&t!==symbol(SYMBOL_J)||!isimaginaryunit(e)){if(isimaginaryunit(get_binding(symbol(SYMBOL_J))))return push(imaginaryunit),push_symbol(SYMBOL_J),subst();if(isimaginaryunit(get_binding(symbol(SYMBOL_I))))return push(imaginaryunit),push_symbol(SYMBOL_I),subst()}else;},check_esc_flag=function(){if(esc_flag)return stop("esc key")},clearAlgebraEnvironment=function(){return do_clearall()},computeDependenciesFromAlgebra=function(e){var t,r,n;if(DEBUG&&console.log("computeDependenciesFromAlgebra!!!"),e,!0,called_from_Algebra_block=!0,e=normaliseDots(e),DEBUG){for(console.log("computeDependenciesFromAlgebra: patterns in the list --------------- "),n=0,r=userSimplificationsInListForm.length;n<r;n++)t=userSimplificationsInListForm[n],console.log(car(t)+","+cdr(t)+")");console.log("...end of list --------------- ")}return called_from_Algebra_block=!1,findDependenciesInScript(e,!0)[6]},computeResultsAndJavaScriptFromAlgebra=function(e){var t,r,n,i,s,o,a,l,u,c,p;if(e,!0,called_from_Algebra_block=!0,p=(new Date).getTime(),TIMING_DEBUGS&&console.log(" --------- computeResultsAndJavaScriptFromAlgebra input: "+e+" at: "+new Date),u=e=normaliseDots(e),DEBUG){for(console.log("computeResultsAndJavaScriptFromAlgebra: patterns in the list --------------- "),i=0,o=userSimplificationsInListForm.length;i<o;i++)n=userSimplificationsInListForm[i],console.log(car(n)+","+cdr(n)+")");console.log("...end of list --------------- ")}return[c,l,t,a,s,errorMessage,r]=findDependenciesInScript(e),called_from_Algebra_block=!1,""===a&&""===errorMessage||(l+="\n"+a,""!==errorMessage&&(l+="\n"+errorMessage),l=l.replace(/\n/g,"\n\n"),s+="\n$$"+a+"$$",""!==errorMessage&&(s+=turnErrorMessageToLatex(errorMessage)),s=s.replace(/\n/g,"\n\n")),s=(s=s.replace(/\n*/,"")).replace(/\$\$\$\$\n*/g,""),t=(t=t.replace(/Math\./g,"")).replace(/\n/g,"\n\n"),TIMING_DEBUGS&&console.log("computeResultsAndJavaScriptFromAlgebra time (total time from notebook and back) for: "+u+" : "+((new Date).getTime()-p)+"ms"),{code:t,result:s,latexResult:s,dependencyInfo:r}},(null!==exports?exports:this).run=run,(null!==exports?exports:this).findDependenciesInScript=findDependenciesInScript,(null!==exports?exports:this).computeDependenciesFromAlgebra=computeDependenciesFromAlgebra,(null!==exports?exports:this).computeResultsAndJavaScriptFromAlgebra=computeResultsAndJavaScriptFromAlgebra,(null!==exports?exports:this).clearAlgebraEnvironment=clearAlgebraEnvironment,tos=0,nil_symbols=0,push=function(e){return e.isZero,e===symbol(NIL)&&(nil_symbols++,DEBUG&&console.log("pushing symbol(NIL) #"+nil_symbols)),tos>=frame&&stop("stack overflow"),stack[tos++]=e},moveTos=function(e){if(tos<=e)tos=e;else for(;tos>e;)stack[tos]=null,tos--},top=function(){return stack[tos-1]},pop=function(){var e;return 0===tos&&stop("stack underflow"),stack[tos-1],e=stack[--tos],stack[tos]=null,e},push_frame=function(e){var t,r,n,i;for(t=0,(frame-=e)<tos&&stop("frame overflow, circular reference?"),i=[],t=r=0,n=e;0<=n?r<n:r>n;t=0<=n?++r:--r)i.push(stack[frame+t]=symbol(NIL));return i},pop_frame=function(e){if((frame+=e)>TOS)return stop("frame underflow")},save=function(){return(frame-=10)<tos&&stop("frame overflow, circular reference?"),stack[frame+0]=p0,stack[frame+1]=p1,stack[frame+2]=p2,stack[frame+3]=p3,stack[frame+4]=p4,stack[frame+5]=p5,stack[frame+6]=p6,stack[frame+7]=p7,stack[frame+8]=p8,stack[frame+9]=p9},restore=function(){return frame>TOS-10&&stop("frame underflow"),p0=stack[frame+0],p1=stack[frame+1],p2=stack[frame+2],p3=stack[frame+3],p4=stack[frame+4],p5=stack[frame+5],p6=stack[frame+6],p7=stack[frame+7],p8=stack[frame+8],p9=stack[frame+9],frame+=10},swap=function(){var e,t;return e=pop(),t=pop(),push(e),push(t)},dupl=function(){var e;return e=pop(),push(e),push(e)},$.dupl=dupl,$.swap=swap,$.restore=restore,$.save=save,$.push=push,$.pop=pop,Eval_symbolsinfo=function(){var e;return""!==(e=symbolsinfo())?push(new_string(e)):push_symbol(NIL)},symbolsinfo=function(){var e,t,r,n,i,s,o;for(s="",t=r=n=NIL+1,i=symtab.length;n<=i?r<i:r>i;t=n<=i?++r:--r)if(""!==symtab[t].printname)o=symtab[t]+"",e=(binding[t]+"").substring(0,4),s+="symbol: "+o+" size: "+countsize(binding[t])+" value: "+e+"...\n";else if(!1===isSymbolReclaimable[t])break;return s},std_symbol=function(e,t,r){var n;return(n=symtab[t]).printname=e,n.latexPrint=null!=r?r:e},usr_symbol=function(e){var t,r,n;for(t=0,t=r=0,n=NSYM;0<=n?r<n:r>n;t=0<=n?++r:--r){if(e===symtab[t].printname)return symtab[t];if(""===symtab[t].printname)break}return t===NSYM&&stop("symbol table overflow"),symtab[t]=new U,symtab[t].k=SYM,symtab[t].printname=e,binding[t]=symtab[t],isSymbolReclaimable[t]=!1,symtab[t]},get_printname=function(e){return e.k!==SYM&&stop("symbol error"),e.printname},set_binding=function(e,t){var r;return e.k!==SYM&&stop("symbol error"),r=symtab.indexOf(e),-1!==symtab.indexOf(e,r+1)&&console.log("ops, more than one element!"),DEBUG&&console.log("lookup >> set_binding lookup "+r),isSymbolReclaimable[r]=!1,binding[r]=t},get_binding=function(e){var t;return e.k!==SYM&&stop("symbol error"),t=symtab.indexOf(e),-1!==symtab.indexOf(e,t+1)&&console.log("ops, more than one element!"),DEBUG&&console.log("lookup >> get_binding lookup "+t),binding[t]},is_usr_symbol=function(e){var t;return e.k===SYM&&((t=symnum(e))>PI&&t!==SYMBOL_I&&t!==SYMBOL_IDENTITY_MATRIX)},lookupsTotal=0,symnum=function(e){var t;return lookupsTotal++,e.k!==SYM&&stop("symbol error"),t=symtab.indexOf(e),-1!==symtab.indexOf(e,t+1)&&console.log("ops, more than one element!"),DEBUG&&console.log("lookup >> symnum lookup "+t+" lookup # "+lookupsTotal),t},push_symbol=function(e){return push(symtab[e])},clear_symbols=function(){var e,t,r,n,i;for(i=[],e=t=r=NIL+1,n=NSYM;r<=n?t<n:t>n;e=r<=n?++t:--t)if(""!==symtab[e].printname)symtab[e]=new U,symtab[e].k=SYM,binding[e]=symtab[e],i.push(isSymbolReclaimable[e]=!1);else if(!1===isSymbolReclaimable[e])break;return i},collectUserSymbols=function(e,t=[]){var r,n,i;if(is_usr_symbol(e)&&-1===t.indexOf(e))t.push(e);else if(istensor(e))for(r=n=0,i=e.tensor.nelem;0<=i?n<i:n>i;r=0<=i?++n:--n)collectUserSymbols(e.tensor.elem[r],t);else for(;iscons(e);)collectUserSymbols(car(e),t),e=cdr(e)},$.get_binding=get_binding,$.set_binding=set_binding,$.usr_symbol=usr_symbol,$.symbolsinfo=symbolsinfo,$.collectUserSymbols=collectUserSymbols,inited||(inited=!0,init()),$.init=init,parse_internal=function(e){return"string"==typeof e?scan(e):"number"==typeof e?e%1==0?push_integer(e):push_double(e):e instanceof U?push(e):(console.warn("unknown argument type",e),push(symbol(NIL)))},parse=function(e){var t,r;try{parse_internal(e),t=pop(),check_stack()}catch(n){throw r=n,reset_after_error(),r}return t},exec=function(e,...t){var r,n,i,s,o,a;for(i=get_binding(usr_symbol(e)),check_stack(),push(i),s=0,o=t.length;s<o;s++)r=t[s],parse_internal(r);list(1+t.length),p1=pop(),push(p1);try{top_level_eval(),a=pop(),check_stack()}catch(l){throw n=l,reset_after_error(),n}return a},$.exec=exec,$.parse=parse,function(){var e,t,r,n,i;for(i=[],r=0,n=(e=["abs","add","adj","and","approxratio","arccos","arccosh","arcsin","arcsinh","arctan","arctanh","arg","atomize","besselj","bessely","binding","binomial","ceiling","check","choose","circexp","clear","clearall","clearpatterns","clock","coeff","cofactor","condense","conj","contract","cos","cosh","decomp","defint","deg","denominator","det","derivative","dim","dirac","divisors","do","dot","draw","dsolve","eigen","eigenval","eigenvec","erf","erfc","eval","exp","expand","expcos","expsin","factor","factorial","factorpoly","filter","float","floor","for","Gamma","gcd","hermite","hilbert","imag","component","inner","integral","inv","invg","isinteger","isprime","laguerre","lcm","leading","legendre","log","mod","multiply","not","nroots","number","numerator","operator","or","outer","pattern","patternsinfo","polar","power","prime","print","print2dascii","printcomputer","printlatex","printlist","printhuman","product","quote","quotient","rank","rationalize","real","rect","roots","round","equals","shape","sgn","silentpattern","simplify","sin","sinh","sqrt","stop","subst","sum","symbolsinfo","tan","tanh","taylor","test","testeq","testge","testgt","testle","testlt","transpose","unit","zero"]).length;r<n;r++)t=e[r],i.push($[t]=exec.bind(this,t))}(),freeze=function(){var e,t,r,n,i;for(t=[],e=[],[],"",r=n=0,i=symtab.length;0<=i?n<i:n>i;r=0<=i?++n:--n)!1===isSymbolReclaimable[r]&&(t.push(symtab[r]),e.push(binding[r]));return[t,e,userSimplificationsInListForm.slice(0),zero,one,imaginaryunit,getStateHash()]},unfreeze=function(e){var t,r,n,i,s,o;for([n,t,r,zero,one,imaginaryunit]=e,i=s=0,o=n.length;0<=o?s<o:s>o;i=0<=o?++s:--s)symtab[i]=n[i],binding[i]=t[i];return userSimplificationsInListForm=r.slice(0)},compareState=function(e){return getStateHash()===e},getStateHash=function(){var e,t,r,n,i,s,o;for(e="",t=r=s=NIL+1,o=symtab.length;s<=o?r<o:r>o;t=s<=o?++r:--r)if(""!==symtab[t].printname)e+=" //"+print_list(symtab[t])+" : "+print_list(binding[t]);else if(!1===isSymbolReclaimable[t])break;for(i=0,n=userSimplificationsInListForm.length;i<n;i++)e+=" pattern: "+(t=userSimplificationsInListForm[i]);return DEBUG&&console.log("frozenHash: "+e),e}}).call(this)},90988:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ur});const n="http://www.w3.org/2000/svg",i={alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",pi:"π",rho:"ρ",sigma:"σ",tau:"τ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",Gamma:"Γ",Delta:"Δ",Xi:"Ξ",Pi:"Π",Sigma:"Σ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω"},s=Math.PI/180,o=180/Math.PI,a=Math.cos(30*s),l=.5;const u=function(e,t,r,n,i,s){this.bold=e,this.italic=t,this.underline=r,this.couleur=n,this.fontface=i,this.taille=s},c={};Object.entries({alpha2:"α",plus:"+",moins:"-",fois:"×",divise:"÷",petitf:"f",petitebarre:"–",grandebarre:"—",prime:"'",seconde:'"',puceronde:"•",grandC:"ℂ",euler:"ℂ",petitg:"ℊ",petith:"ℏ",Ironde:"ℑ",Lronde:"ℒ",lronde:"ℓ",grandN:"ℕ",Pronde:"℘",grandQ:"ℚ",Rronde:"ℜ",grandR:"ℝ",grandZ:"ℤ",Eronde:"ℰ",Fronde:"ℱ",Nronde:"ℵ",flecheG:"←",flecheH:"↑",flecheD:"→",flecheB:"↓",flecheDG:"↔",flecheGD:"↔",flecheHB:"↕",flecheBH:"↕",croissant:"↗",decroissant:"↘",alaligneadroite:"↳",alaligneagauche:"↵",doubleflecheG:"⇐",doubleflecheD:"⇒",doubleflecheDG:"⇔",doubleflecheGD:"⇔",flecheGbarre:"⇤",flecheDbarre:"⇥",flecheGcreuse:"⇦",flecheHcreuse:"⇧",flecheDcreuse:"⇨",flecheBcreuse:"⇩",qqsoit:"∀",pourtout:"∀",quelquesoit:"∀",complement:"∁",differentielpartiel:"∂",ilexiste:"∃",ilnexistepas:"∄",vide:"∅",nabla:"∇",appartienta:"∈",nappartientpasa:"∉",contient:"∋",petitcontient:"∍",grandproduit:"∏",grandcoproduit:"∐",grandesomme:"∑",petitebarrefine:"−",moinsouplus:"∓",antislash:"\\",asterisque:"∗",racine:"√",proportionnela:"∝",infini:"∞",angle:"∡",anglespherique:"∢",nedivisepas:"∤",parallelea:"//",nestpasparallelea:"∦",etlogique:"∧",oulogique:"∨",inter:"∩",intersection:"∩",union:"∪",integrale:"∫",doubleintegrale:"∬",tripleintegrale:"∭",integralecurviligne:"∮",integralesurfacique:"∯",integralevolumique:"∰",egaleasymptotiquea:"≃",environdroit:"≃",environegala:"≅",environ:"≈",egalpardefinition:"≝",differentde:"≠",identiquea:"≡",inferieura:"≤",superieura:"≥",inclusdans:"⊂",nestpasinclusdans:"⊄",necontientpas:"⊅",sommedirecte:"⊕",differencedirecte:"⊖",produittensoriel:"⊗",divisiondirecte:"⊘",produitdirect:"⊙",top:"⊤",perpendiculairea:"⊥",antecedentde:"⊶",imagede:"⊷",angledroitarc:"⊾",point:"⋅",pv:";"}).forEach((([e,t])=>{c[e.toLowerCase()]=t}));const p=e=>Math.abs(e)<1e-9;function h(e){let t=e-360*Math.floor((e+180)/360);return-180===t&&(t=180),t}const d=e=>["compas","compasLeve","crayon","equerre","rapporteur","regle","requerre"].includes(e);function f(e){let t,r,n,i=!1;if(0===e.indexOf("<font"))r="</font>",i=!0;else{if(n=e.indexOf(">"),-1===n)return e.length;t=e.substring(0,n+1),r=t.substring(0,1)+"/"+t.substring(1)}const s=e.indexOf(r);if(-1===s){if(i){const t=e.indexOf("<font",5);if(-1!==t)return t}return-1}return s+r.length}function m(e){const t=e.trim(),r={},n=t.indexOf(","),i=t.indexOf(")");return r.erreur=-1===n||-1===i,r.erreur?(r.texte="",r):(r.operande=t.substring(3,n),r.exposant=t.substring(n+1,i),r.texte=t.substring(i+1),r)}function g(e,t){let r,n,i=1;for(r=t+1;r<e.length&&(n=e.charAt(r),"("===n?i++:")"===n&&i--,0!==i);)r++;return 0===i?r:-1}function y(e,t,r,n,i){const s=(n-i)/(t-r);return s*e+(n-s*t)}function v(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<B>/g,"<b>")).replace(/<\/B>/g,"</b>")).replace(/<I>/g,"<i>")).replace(/<\/I>/g,"</i>")).replace(/<U>/g,"<u>")).replace(/<\/U>/g,"</u>")).replace(/£lt£i£gt£/gi,"<i>")).replace(/£i£/gi,"<i>")).replace(/£lt£\/i£gt£/gi,"</i>")).replace(/£\/i£/gi,"</i>")).replace(/£lt£b£gt£/gi,"<b>")).replace(/£b£/gi,"<b>")).replace(/£lt£\/b£gt£/gi,"</b>")).replace(/£\/b£/gi,"</b>")).replace(/£lt£u£gt£/gi,"<u>")).replace(/£u£/gi,"<u>")).replace(/£lt£\/u£gt£/gi,"</u>")).replace(/£\/u£/gi,"</u>")).replace(/£lt£br£gt£/gi,"<br>")).replace(/£lt£br\/£gt£/gi,"<br>")).replace(/£br£/gi,"<br>")).replace(/£br\/£/gi,"<br>")).replace(/£lt£font/gi,"<font")).replace(/£lt£\/font£gt£/gi,"</font>")).replace(/£lt£bold£gt£/gi,"<b>")).replace(/£lt£\/bold£gt£/gi,"</b>")).replace(/£lt£/gi,"<")).replace(/£gt£/gi,">")).replace(/£inferieurstrict£/gi,"<")).replace(/£superieurstrict£/gi,">")).replace(/£guillemet£/gi,'"')}function b(e){if(!e.includes("£"))return e;const t=e.split("£").map(((e,t)=>{if(t%2){const t=e.toLowerCase();return c[t]||`£${e}£`}return e})).join("");return(e.length-e.replace(/£/g,"").length)%2?(console.warn(`Il y a un nombre impair de £ dans cette chaîne : ${e}`),t.substr(0,t.length-1)):t}function x(e,t){let r,n,i;for(i=1,r=t+1;r<e.length&&(n=e.charAt(r),"{"===n?i++:"}"===n&&i--,0!==i);)r++;return 0===i?r:-1}function w(e){return-1!==e.indexOf("\\frac")||-1!==e.indexOf("\\sqrt")||-1!==e.indexOf("}^{")||-1!==e.indexOf("}_{")||-1!==e.indexOf("\\widehat{")||-1!==e.indexOf("\\left[")||-1!==e.indexOf("\\left(")||-1!==e.indexOf("\\left|")||-1!==e.indexOf("\\left\\|")||-1!==e.indexOf("\\overrightarrow{")||-1!==e.indexOf("\\text{")}function _(e){const t={noir:"black",rouge:"red",vert:"green",bleu:"blue",blanc:"white",gris:"grey",darkorange:"maroon"};if("0"===e)return"black";if(t[e])return t[e];const r=e=>e.length<7?"#"+"0".repeat(6-e.length)+e:e.substr(-6);return/^#/.test(e)?7===e.length?e:4===e.length?`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`:(console.error(Error(`couleur ${e} invalide, on va tronquer ou compléter avec des 0`)),r(e.substring(1))):/^0x/.test(e)?r(e.substring(2)):/^[0-9]/.test(e)?r(parseFloat(e).toString(16)):e}const E=(e,t)=>function(e,t){const r=e.norme(),n=t.norme();return!(!p(r)&&!p(n))||p((e.x*t.y-e.y*t.x)/r/n)}(e,t)&&e.x*t.x+e.y*t.y>=0;function S(e,t,r){let n,i,s=0,o=t;for(;o<e.length;){if(n=e.charAt(o),"("===n){if(i=g(e,o),-1===i)return-1;o=i}else if(","===n&&s++,s===r)return o;o++}return-1}function A(e,t,r){let n;return t*e<0?n=-Math.floor(-e/r)*r:Math.ceil(Math.log(Math.abs(e))/Math.LN10)!==Math.ceil(Math.log(Math.abs(t))/Math.LN10)?(n=e<0?-Math.pow(10,Math.floor(Math.log(Math.abs(e))/Math.LN10)):Math.pow(10,Math.ceil(Math.log(Math.abs(e))/Math.LN10)),n-=Math.floor((n-e)/r)*r):(n=function(e,t){const r=Math.pow(10,t);return Math.round(e/r)*r}(e,Math.floor(Math.log(r)/Math.LN10)),n<e&&(n+=r)),n}function N(e,t,r,i,s){if(""===e)return;let o,a,l,c,p,h,d,m,g;const y=e.search(/<b>|<i>|<u>|<font/),v=document.createElementNS(n,"tspan");if(v.setAttribute("pointer-events","none"),-1===y||y>0){o="",t.couleur&&(o+="fill:"+t.couleur+";"),t.bold&&(o+="font-weight:bold;"),t.italic&&(o+="font-style:italic;"),t.underline&&(o+="text-decoration:underline;"),""!==t.fontface?o+="font-family:"+t.fontface+";":o+='font-family: "Times New Roman", Times, serif;',o+="font-size:"+t.taille+"px;",v.setAttribute("style",o),i&&(v.setAttribute("x",0),i=!1),v.setAttribute("y",s);const n=-1===y?e:e.substring(0,y);v.appendChild(document.createTextNode(n)),r.appendChild(v),y>0&&N(e.substring(y),t,r,i,s)}else 0===e.indexOf("<b>")?(g=new u(!0,t.italic,t.underline,t.couleur,t.fontface),a=f(e),N(-1===a?e.substring(3):e.substring(3,a-4),g,r,i,s)):0===e.indexOf("<i>")?(g=new u(t.bold,!0,t.underline,t.couleur,t.fontface),a=f(e),N(-1===a?e.substring(3):e.substring(3,a-4),g,r,i,s)):0===e.indexOf("<u>")?(g=new u(t.bold,t.italic,!0,t.couleur,t.fontface),a=f(e),N(-1===a?e.substring(3):e.substring(3,a-4),g,r,i,s)):0===e.indexOf("<font")&&(a=f(e),-1===a&&(a=e.length),l=e.indexOf('face="'),-1!==l?(c=e.indexOf('"',l+6),p=-1!==c?e.substring(l+6,c):""):p="",h="",l=e.indexOf('couleur="'),-1!==l?(c=e.indexOf('"',l+9),-1!==c&&(h=_(e.substring(l+9,c)))):(l=e.indexOf('color="'),-1!==l&&(c=e.indexOf('"',l+7),-1!==c&&(h=_(e.substring(l+7,c))))),l=e.indexOf('size="'),-1!==l&&(c=e.indexOf('"',l+6),d=-1!==c?e.substring(l+6,c):t.taille),g=new u(t.bold,t.italic,t.underline,h,p,d),m=e.indexOf(">"),/<\/font>/i.test(e)?N(e.substring(m+1,a-7),g,r,i,s):N(e.substring(m+1),g,r,i,s))}function k(e){if(["a","c","d","f","g","n","p","r","s","u","v"].some((t=>e.includes(`£${t}(`))))return!0;let t,r,n,i=e;for(;-1!==(t=i.search(/£e\(|£i\(/g));){if(r=g(i,t+3),-1===r&&(r=i.length),n=i.substring(t,r),-1!==n.search(/£e\(|£i\(£lt£font/g))return!0;if(r===i.length)return!1;i=n.substring(r+1)}for(i=e;-1!==(t=i.search(/£lt£font/g));){if(r=f(i.substring(t)),-1===r?r=i.length:r+=t,n=i.substring(t,r),-1!==n.search(/£e\(|£i\(/g))return!0;if(r===i.length)return!1;i=n.substring(r+1)}return!1}function M(e,t){let r,n,i,s,o,a,l,u,c,p,h,d,m;const y=e;if(""===y)return"";for(;-1!==(r=y.indexOf("<font"));)return u=null,l=y.substring(r),n=f(l),s=l.indexOf('couleur="'),-1!==s?(o=l.indexOf('"',s+9),-1!==o&&(u=_(l.substring(s+9,o)))):(s=l.indexOf('color="'),-1!==s&&(o=l.indexOf('"',s+7),-1!==o&&(u=_(l.substring(s+7,o))))),null!=u?(a=r+l.indexOf(">")+1,-1===n?M(y.substring(0,r)+"\\textcolor{"+u+"}{"+y.substring(a)+"}",t):(n+=r,M(y.substring(0,r)+"\\textcolor{"+u+"}{"+y.substring(a,n-7)+"}"+y.substring(n),t))):(a=r+l.indexOf(">")+1,-1===n?M(y.substring(0,r)+y.substring(a),t):(n+=r,M(y.substring(0,r)+y.substring(a,n-7)+y.substring(n),t)));for(;-1!==(r=y.indexOf("£u("));)return n=g(y,r+2),-1===n?y:M(y.substring(0,r),t)+"\\unicode{x"+y.substring(r+3,n)+"}"+M(y.substring(n+1),t);for(;-1!==(r=y.indexOf("£f("));)return i=S(y,r+3,1),n=g(y,r+2),-1===i||-1===n||i>n?y:M(M(y.substring(0,r),t)+"\\displaystyle{\\frac{"+M(y.substring(r+3,i),!1)+"}{"+M(y.substring(i+1,n),!1)+"}}"+M(y.substring(n+1),t),t);for(;-1!==(r=y.indexOf("£r("));)return n=g(y,r+2),-1===n?y:M(M(y.substring(0,r),t)+"\\sqrt{"+M(y.substring(r+3,n),!1)+"}"+M(y.substring(n+1),t),t);for(;-1!==(r=y.indexOf("£a("));)return n=g(y,r+2),-1===n?y:M(M(y.substring(0,r),t)+"\\widehat{"+M(y.substring(r+3,n),!0)+"}"+M(y.substring(n+1),t),t);for(;-1!==(r=y.indexOf("£g("));)return p=S(y,r+3,1),h=S(y,r+3,2),d=S(y,r+3,3),n=g(y,r+2),-1===n?y:M(M(y.substring(0,r),t)+"\\int_{"+M(y.substring(h+1,d),!1)+"}^{"+M(y.substring(d+1,n),!1)+"}"+M(y.substring(r+3,p),!1)+" d"+M(y.substring(p+1,h),!1)+M(y.substring(n+1),t),t);for(;-1!==(r=y.indexOf("£c("));)return n=g(y,r+2),-1===n?y:M(y.substring(0,r),t)+"\\left["+M(y.substring(r+3,n),t)+"\\right]"+M(y.substring(n+1),t);for(;-1!==(r=y.indexOf("£p("));)return n=g(y,r+2),-1===n?y:M(M(y.substring(0,r),t)+"\\left("+M(y.substring(r+3,n),t)+"\\right)"+M(y.substring(n+1),t));for(;-1!==(r=y.indexOf("£d("));)return n=g(y,r+2),-1===n?y:M(M(y.substring(0,r),t)+"\\left|"+M(y.substring(r+3,n),!1)+"\\right|"+M(y.substring(n+1),t),t);for(;-1!==(r=y.indexOf("£n("));)return n=g(y,r+2),-1===n?y:M(M(y.substring(0,r),t)+"\\left\\|"+M(y.substring(r+3,n),!1)+"\\right\\|"+M(y.substring(n+1),t));for(;-1!==(r=y.indexOf("£i("));)return i=S(y,r+3,1),n=g(y,r+2),-1===i||-1===n||i>n?y:M(M(y.substring(0,r),t)+"{"+M(y.substring(r+3,i),!1)+"}_{"+M(y.substring(i+1,n),!1)+"}"+M(y.substring(n+1),t),t);for(;-1!==(r=y.indexOf("£e("));)return i=S(y,r+3,1),n=g(y,r+2),-1===i||-1===n||i>n?y:M(M(y.substring(0,r),t)+"{"+M(y.substring(r+3,i),!1)+"}^{"+M(y.substring(i+1,n),!1)+"}"+M(y.substring(n+1),t));for(;-1!==(r=y.indexOf("£v("));)return n=g(y,r+2),-1===n?y:M(M(y.substring(0,r),t)+"\\overrightarrow{"+M(y.substring(r+3,n),!1)+"}"+M(y.substring(n+1),t),t);for(;-1!==(r=y.indexOf("<u>"));)return n=f(y.substring(r)),-1===n?y:(n+=r,M(y.substring(0,r),t)+"\\underline{"+M(y.substring(r+3,n-4),!0)+"}"+M(y.substring(n),t));for(;-1!==(r=y.indexOf("<i>"));)return n=f(y.substring(r)),-1===n?M(y.substring(0,r),t)+"\\textit{"+M(y.substring(r+3),!1)+"}":(n+=r,M(y.substring(0,r),t)+"\\textit{"+M(y.substring(r+3,n-4),!1)+"}"+M(y.substring(n),t));for(;-1!==(r=y.indexOf("<b>"));)return n=f(y.substring(r)),-1===n?M(y.substring(0,r),t)+"\\textbf{"+M(y.substring(r+3),!1)+"}":(n+=r,M(y.substring(0,r),t)+"\\textbf{"+M(y.substring(r+3,n-4),!1)+"}"+M(y.substring(n),t));if(t){if(m=y.charAt(0),")"===m||","===m||"}"===m)return m+M(y.substring(1),t);if(w(y))return y;if(r=y.indexOf("\\textcolor{"),-1!==r){for(c="",l=y;-1!==(r=l.indexOf("\\textcolor{"));)s=l.indexOf("}{"),n=x(l,s+1),-1===n?0===r?(s+2!==l.length?c+=l.substring(0,s+2)+"\\text{"+l.substring(s+2)+"}":c+=l,l=""):(s+2!==l.length?c+="\\text{"+l.substring(0,r)+"}"+l.substring(r,s+2)+"\\text{"+l.substring(s+2)+"}":c+="\\text{"+l.substring(0,r)+"}"+l.substring(r,s+2),l=""):0===r?(c+=l.substring(0,n+1),l=n<l.length-1?l.substring(n+1):""):(c+="\\text{"+l.substring(0,r)+"}"+l.substring(r,s+2)+"\\text{"+l.substring(s+2,n+1)+"}",l=n<l.length-1?l.substring(n+1):"");return""===l?c:c+"\\text{"+l+"}"}{let e=0,t=0;for(;" "===y.charAt(t);)e++,t++;return"~".repeat(e)+"\\text{"+y.substring(t)+"}"}}return y}function C(e,t){let r,n,i,s,o,a,l,u,c,p,h=e;if(""===h)return"";for(;-1!==(r=h.indexOf("<font"));)return u=null,l=h.substring(r),n=f(l),s=l.indexOf('couleur="'),-1!==s?(o=l.indexOf('"',s+9),-1!==o&&(u=_(l.substring(s+9,o)))):(s=l.indexOf('color="'),-1!==s&&(o=l.indexOf('"',s+7),-1!==o&&(u=_(l.substring(s+7,o))))),null!==u?(a=r+l.indexOf(">")+1,-1===n?C(h.substring(0,r)+"\\textcolor{"+u+"}{"+h.substring(a)+"}",t):(n+=r,C(h.substring(0,r)+"\\textcolor{"+u+"}{"+h.substring(a,n-7)+"}"+h.substring(n),t))):(a=r+l.indexOf(">")+1,-1===n?C(h.substring(0,r)+h.substring(a),t):(n+=r,C(h.substring(0,r)+h.substring(a,n-7)+h.substring(n),t)));for(;-1!==(r=h.indexOf("£u("));)return n=g(h,r+2),-1===n?h:C(h.substring(0,r),t)+"\\unicode{x"+h.substring(r+3,n)+"}"+C(h.substring(n+1),t);for(;-1!==(r=h.indexOf("£r("));)return n=g(h,r+2),-1===n?h:C(C(h.substring(0,r),t)+"\\sqrt{"+C(h.substring(r+3,n),!1)+"}"+C(h.substring(n+1),t),t);for(;-1!==(r=h.indexOf("£d("));)return n=g(h,r+2),-1===n?h:C(C(h.substring(0,r),t)+"\\left|"+C(h.substring(r+3,n),!1)+"\\right|"+C(h.substring(n+1),t),t);for(;-1!==(r=h.indexOf("£n("));)return n=g(h,r+2),-1===n?h:C(C(h.substring(0,r),t)+"\\left\\|"+C(h.substring(r+3,n),!1)+"\\right\\|"+C(h.substring(n+1),t));for(;-1!==(r=h.indexOf("£i("));)return i=S(h,r+3,1),n=g(h,r+2),-1===i||-1===n||i>n?h:C(C(h.substring(0,r),t)+"{"+C(h.substring(r+3,i),!0)+"}_{"+C(h.substring(i+1,n),!1)+"}"+C(h.substring(n+1),t),t);for(;-1!==(r=h.indexOf("£e("));)return i=S(h,r+3,1),n=g(h,r+2),-1===i||-1===n||i>n?h:C(C(h.substring(0,r),t)+"{"+C(h.substring(r+3,i),!0)+"}^{"+C(h.substring(i+1,n),!1)+"}"+C(h.substring(n+1),t));for(;-1!==(r=h.indexOf("£v("));)return n=g(h,r+2),-1===n?h:C(C(h.substring(0,r),t)+"\\overrightarrow{"+C(h.substring(r+3,n),!1)+"}"+C(h.substring(n+1),t),t);for(;-1!==(r=h.indexOf("<u>"));)return n=f(h.substring(r)),-1===n?h:(n+=r,C(h.substring(0,r),t)+"\\underline{"+C(h.substring(r+3,n-4),!0)+"}"+C(h.substring(n),t));for(;-1!==(r=h.indexOf("<i>"));)return n=f(h.substring(r)),-1===n?C(h.substring(0,r),t)+"\\textit{"+C(h.substring(r+3),!1)+"}":(n+=r,C(h.substring(0,r),t)+"\\textit{"+C(h.substring(r+3,n-4),!1)+"}"+C(h.substring(n),t));for(;-1!==(r=h.indexOf("<b>"));)return n=f(h.substring(r)),-1===n?C(h.substring(0,r),t)+"\\textbf{"+C(h.substring(r+3),!1)+"}":(n+=r,C(h.substring(0,r),t)+"\\textbf{"+C(h.substring(r+3,n-4),!1)+"}"+C(h.substring(n),t));if(t){if(w(h))return h;if(r=h.indexOf("\\textcolor{"),-1!==r){for(c="",l=h;-1!==(r=l.indexOf("\\textcolor{"));)s=l.indexOf("}{"),n=x(l,s+1),-1===n?0===r?(s+2!==l.length?c+=l.substring(0,s+2)+"\\text{"+l.substring(s+2)+"}":c+=l,l=""):(s+2!==l.length?c+="\\text{"+l.substring(0,r)+"}"+l.substring(r,s+2)+"\\text{"+l.substring(s+2)+"}":c+="\\text{"+l.substring(0,r)+"}"+l.substring(r,s+2),l=""):0===r?(c+=l.substring(0,n+1),l=n<l.length-1?l.substring(n+1):""):(c+="\\text{"+l.substring(0,r)+"}"+l.substring(r,s+2)+"\\text{"+l.substring(s+2,n+1)+"}",l=n<l.length-1?l.substring(n+1):"");return""===l?c:c+"\\text{"+l+"}"}if(p=h.charAt(0),")"===p||","===p||"}"===p)return h;{let e="";for(;0===h.indexOf(" ");)e+="~",h=h.substring(1);return e+"\\text{"+h+"}"}}return h}function T(e,t={}){if(!e||"object"!=typeof e)throw Error("objet invalide");const r=t.defaut||20,n=t.min||5,i=t.max||199;if("number"!=typeof r||"number"!=typeof n||"number"!=typeof i)throw Error("options invalides");const s=Number(e.taille);return isNaN(s)?(console.error(Error(`taille invalide (${e.taille}) => ${r}`)),r):s<n?(console.error(Error(`taille trop petite (${e.taille} < ${n}) => ${r}`)),r):s>i?(console.error(Error(`taille trop grande (${e.taille} > ${i}) => ${r}`)),r):s}const O=I;function I(e,t,r,n){arguments.length>2?(this.x=r-e,this.y=n-t):(this.x=e,this.y=t)}I.prototype.presqueNul=function(){return p(this.x)&&p(this.y)},I.prototype.norme=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},I.prototype.vecteurColineaire=function(e){const t=this.norme();return new I(this.x/t*e,this.y/t*e)},I.prototype.tourne=function(e){const t=Math.cos(e*s),r=Math.sin(e*s);return new I(t*this.x-r*this.y,t*this.y+r*this.x)},I.prototype.angle=function(){let e;return 0===this.x&&0===this.y?0:(0===this.x?e=this.y>0?3*Math.PI/2:Math.PI/2:(e=this.x>=0?Math.atan(-this.y/this.x):Math.PI-Math.atan(this.y/this.x),e<0&&(e+=2*Math.PI)),e*o)};const P=D;function D(e){this.doc=e,this.x=200,this.y=400,this.angle=0,this.zoomfactor=1,this.visible=!1}D.prototype.montre=function(e){this.visible=e,this.g.setAttribute("visibility",e?"visible":"hidden")},D.prototype.updateg=function(){this.initialisePosition(),this.doc.svg.removeChild(this.g),this.doc.svg.appendChild(this.g)},D.prototype.translate=function(e,t){this.setPosition(e,t,this.angle,this.zoomfactor)},D.prototype.angleInit=function(){return 0},D.prototype.setPosition=function(e,t,r,n){let i;this.x=e,this.y=t,this.angle=r,arguments.length>=4?(i=n,this.zoomfactor=i):i=this.zoomfactor,this.g.setAttribute("transform","scale("+i+") translate("+String(e/i)+","+String(t/i)+") rotate("+r+")")},D.prototype.initialisePosition=function(){this.setPosition(200,400,this.angleInit(),1)},D.prototype.lanceAnimationTranslation=function(e,t,r){this.xfin=e,this.yfin=t,this.pix=Math.abs(r/2);const n=new O(this.x,this.y,e,t);if(this.dist=n.norme(),0===this.dist)return void this.doc.actionSuivante();this.vect=n.vecteurColineaire(this.pix);const i=this;this.timer=setInterval((function(){i.actionPourTranslation()}),25)},D.prototype.actionPourTranslation=function(){const e=this.x+this.vect.x,t=this.y+this.vect.y,r=new O(e,t,this.xfin,this.yfin).norme();r>this.dist||!this.doc.animationEnCours?(this.setPosition(this.xfin,this.yfin,this.angle),this===this.doc.compas&&null!=this.doc.compasLeve&&this.doc.compasLeve.visible&&this.doc.compasLeve.setPosition(this.xfin,this.yfin,this.angle),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=r,this.setPosition(e,t,this.angle),this===this.doc.compas&&null!=this.doc.compasLeve&&this.doc.compasLeve.visible&&this.doc.compasLeve.setPosition(e,t,this.angle))},D.prototype.lanceAnimationRotation=function(e,t){const r=h(this.angle);let n=h(e);Math.abs(n-r)>180&&(n>r?n-=360:n+=360),this.anglefin=n,this.angle=r,this.pasdeg=t/3,this.pasdeg*=n>=r?1:-1,this.distang=Math.abs(n-this.angle);const i=this;this.timer=setInterval((function(){i.actionPourRotation()}),25)},D.prototype.actionPourRotation=function(){const e=parseFloat(this.angle)+parseFloat(this.pasdeg),t=Math.abs(e-this.anglefin);t>this.distang||!this.doc.animationEnCours?(this.setPosition(this.x,this.y,this.anglefin),clearInterval(this.timer),this.doc.actionSuivante()):(this.distang=t,this.setPosition(this.x,this.y,e))},D.prototype.lanceAnimationZoom=function(e,t){this.zoomfin=e,this.vitesse=parseInt(t),this.pas=.05*this.vitesse*(this.zoomfin-this.zoomfactor),this.senspos=this.pas>=0;const r=this;this.timer=setInterval((function(){r.actionPourZoom()}),100)},D.prototype.actionPourZoom=function(){const e=this.zoomfactor+this.pas;this.doc.animationEnCours&&(this.senspos&&e<this.zoomfin||!this.senspos&&e>this.zoomfin)?this.setPosition(this.x,this.y,this.angle,e):(this.zoomfactor=this.zoomfin,this.positionne(),clearInterval(this.timer),this.doc.actionSuivante())},D.prototype.positionne=function(){this.setPosition(this.x,this.y,this.angle,this.zoomfactor)};const R=L;function L(e){P.call(this,e),this.ecart=0,this.bretourne=!1,this.leve=!1,this.lon=185,this.longpointe=18;const t=this.lon+this.longpointe;this.alp=Math.asin(this.ecart/(2*t))/Math.PI*180,this.decbh=30,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle,1),e.svg.appendChild(this.g)}L.prototype=new P,L.prototype.initialisePosition=function(){P.prototype.initialisePosition.call(this),this.ecart=0,this.positionne()},L.prototype.creeg=function(){let e,t,r,i;const s=this.lon,o=this.longpointe,a=3.5,l=document.createElementNS(n,"g");this.bg=document.createElementNS(n,"g"),e=document.createElementNS(n,"line"),e.setAttribute("x1",0),e.setAttribute("y1",0),e.setAttribute("x2",0),e.setAttribute("y2",-o),e.setAttribute("style","stroke: black; stroke-width:1.5;"),this.bg.appendChild(e),t=document.createElementNS(n,"path"),r="M0 "+String(-o)+"L 0 "+String(-o-s)+" "+String(-7)+" "+String(-o-s)+" "+String(-7)+" "+String(-o)+"Z",t.setAttribute("d",r),t.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bg.appendChild(t),i=document.createElementNS(n,"circle"),i.setAttribute("cx",-3.5),i.setAttribute("cy",-o-20),i.setAttribute("r",6),i.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bg.appendChild(i),i=document.createElementNS(n,"circle"),i.setAttribute("cx",-3.5),i.setAttribute("cy",-o-20),i.setAttribute("r",2),i.setAttribute("style","stroke:black;stroke-width:1; fill: silver; fill-opacity: 1"),this.bg.appendChild(i),l.appendChild(this.bg),this.bd=document.createElementNS(n,"g"),t=document.createElementNS(n,"path"),r="M 0 0 L0 "+String(-o)+" "+"3.5 "+String(-o-a)+" "+"3.5 "+String(-6.5)+"Z",t.setAttribute("style","stroke:black;stroke-width:0.75; fill: blck; fill-opacity: 1"),t.setAttribute("d",r),this.bd.appendChild(t),t=document.createElementNS(n,"path"),r="M0 "+String(-o)+"L 0 "+String(-o-s)+" 7 "+String(-o-s)+" 7 "+String(-o)+"Z",t.setAttribute("d",r),t.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bd.appendChild(t),t=document.createElementNS(n,"path");r="M7 "+String(-o-20+4.5)+"A 4.5 3 -90 0 0 7 "+String(-o-20-4.5)+"Z",t.setAttribute("style","stroke:black;stroke-width:1; fill: silver; fill-opacity: 1"),t.setAttribute("d",r),this.bd.appendChild(t);const u="stroke: black; stroke-width:1;";e=document.createElementNS(n,"line"),e.setAttribute("x1",0),e.setAttribute("y1",-100),e.setAttribute("x2",7),e.setAttribute("y2",-93),e.setAttribute("style",u),this.bd.appendChild(e),e=document.createElementNS(n,"line"),e.setAttribute("x1",0),e.setAttribute("y1",-50),e.setAttribute("x2",7),e.setAttribute("y2",-50),e.setAttribute("style",u),this.bd.appendChild(e),e=document.createElementNS(n,"line"),e.setAttribute("x1",3.5),e.setAttribute("y1",-50),e.setAttribute("x2",3.5),e.setAttribute("y2",-73),e.setAttribute("style",u),this.bd.appendChild(e);const c=document.createElementNS(n,"rect");c.setAttribute("x",7),c.setAttribute("y",-68),c.setAttribute("width",4),c.setAttribute("height",12),c.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bd.appendChild(c),l.appendChild(this.bd),this.haut=document.createElementNS(n,"g"),t=document.createElementNS(n,"path"),r="M 0 0 L3 0 12 "+String(-24)+" "+"12 "+String(-35)+"A"+String(15)+" "+String(6)+" -90 0 1 6 "+String(-50)+"L3 "+String(-70)+" "+String(-3)+" "+String(-70)+"L"+String(-6)+" "+String(-50)+"A"+String(15)+" "+String(6)+" 90 0 1 "+String(-12)+" "+String(-35)+" L "+String(-12)+" "+String(-24)+" "+String(-3)+" 0Z",t.setAttribute("d",r),t.setAttribute("style","stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1"),this.haut.appendChild(t),e=document.createElementNS(n,"line"),e.setAttribute("x1",6),e.setAttribute("y1",-50),e.setAttribute("x2",-6),e.setAttribute("y2",-50),e.setAttribute("style","stroke: black; stroke-width:1;"),this.haut.appendChild(e);const p=document.createElementNS(n,"text");p.setAttribute("pointer-events","none"),p.appendChild(document.createTextNode("Sésamath")),p.setAttribute("x",0),p.setAttribute("y",0),p.setAttribute("style","font-family: Arial;font-size: 5pt;fill: white"),p.setAttribute("transform","rotate(-90) translate(4,2.5)"),this.haut.appendChild(p),i=document.createElementNS(n,"circle"),i.setAttribute("cx",-6),i.setAttribute("cy",-this.decbh),i.setAttribute("r",3),i.setAttribute("style","stroke:black;stroke-width:1; fill: white; fill-opacity: 1"),this.haut.appendChild(i),i=document.createElementNS(n,"circle"),i.setAttribute("cx",6),i.setAttribute("cy",-this.decbh),i.setAttribute("r",3),i.setAttribute("style","stroke:black;stroke-width:1; fill: white; fill-opacity: 1"),this.haut.appendChild(i),l.appendChild(this.haut),this.g=l},L.prototype.setPosition=function(e,t,r,n){let i;arguments.length>=4?(i=n,this.zoomfactor=i):i=this.zoomfactor,this.x=e,this.y=t,this.angle=r;const s=this.lon+this.longpointe;let o=this.ecart/(2*s*i);if(o>1&&(o=1),this.alp=Math.asin(o)/Math.PI*180,isNaN(this.alp))console.error(Error("dans compas.setPosition on a alp qui est NaN")),this.doc.debug&&console.log(`avec x=${e}, y=${t}, angle=${r} et zoom=${i} on a d=${s} et ecart=${this.ecart} asin(${this.ecart}/${2*s*i}/π*180) donne NaN`);else{this.bg.setAttribute("transform",`rotate(${this.alp})`),this.bd.setAttribute("transform",`translate(${this.ecart/i}, 0) rotate(${-this.alp})`);const n=this.alp/180*Math.PI,o=this.ecart/2/i,a=-s*Math.cos(n)+this.decbh;this.haut.setAttribute("transform",`translate(${o},${a})`);const l=this.bretourne?`scale(${i},${-i})`:`scale(${i})`;this.g.setAttribute("transform",`${l} translate(${e/i},${t/i}) rotate(${r})`)}},L.prototype.retourne=function(){this.bretourne=!this.bretourne,this.setPosition(this.x,this.y,this.angle)},L.prototype.positionne=function(){P.prototype.positionne.call(this),this.leve&&null!=this.doc.compasLeve&&P.prototype.positionne.call(this.doc.compasLeve)},L.prototype.translate=function(e,t){P.prototype.translate.call(this,e,t),this.leve&&null!=this.doc.compasLeve&&P.prototype.translate.call(this.doc.compasLeve,e,t)},L.prototype.lanceAnimationEcartement=function(e,t){this.ecartfin=parseFloat(e),this.pasecart=t/4,this.pasecart*=e>=this.ecart?1:-1,this.distecart=Math.abs(e-this.ecart);const r=this;this.timer=setInterval((function(){r.actionPourEcartement()}),25)},L.prototype.actionPourEcartement=function(){const e=this.ecart+this.pasecart,t=Math.abs(e-this.ecartfin);t>this.distecart||!this.doc.animationEnCours?(this.ecart=this.ecartfin,this.setPosition(this.x,this.y,this.angle),clearInterval(this.timer),this.doc.actionSuivante()):(this.distecart=t,this.ecart=e,this.setPosition(this.x,this.y,this.angle))};const q=$;function $(e){P.call(this,e),this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),e.svg.appendChild(this.g)}$.prototype=new P,$.prototype.creeg=function(){let e,t;const r=document.createElementNS(n,"g");e=document.createElementNS(n,"path"),t="M 0 0 L 131 0 L 0 "+String(-223)+" Z";const i="M 24 "+String(-31)+" L 24 "+String(-134.83969465648855)+" L "+String(85)+" "+String(-31)+" Z";t+=i,e.setAttribute("d",t),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: #c6cbe8; fill-opacity: 0.5"),r.appendChild(e),e=document.createElementNS(n,"path"),t="M 16 "+String(-16)+" L 121.60089686098655 "+String(-16)+" L "+"16 "+"-195.76335877862596 Z",t+=i,e.setAttribute("d",t),e.setAttribute("style","stroke-width:0; fill: #c6cbe8; fill-opacity: 0.5"),r.appendChild(e);const s=document.createElementNS(n,"text");s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode("Sésamath")),s.setAttribute("x",24),s.setAttribute("y",-13),s.setAttribute("style","font-family: Arial;font-size: 8pt;font-weight:bold;fill: maroon"),r.appendChild(s),this.g=r};const B=z;function z(e){P.call(this,e),this.graduationExterneVisible=!0,this.graduationInterneVisible=!0,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),e.svg.appendChild(this.g)}z.prototype=new P,z.prototype.creeg=function(){let e,t,r,i,s;const o=156,a=String(o),l=String(89),u=document.createElementNS(n,"g");for(t=document.createElementNS(n,"path"),e="M "+a+" 0 A "+a+" "+a+" 0 0 0 -"+a+" 0 L -"+a+" "+"13 L "+a+" "+"13 L "+a+" 0",e+="M 0 0 L -"+l+" 0 A "+l+" "+l+" 0 0 1 "+l+" 0 Z",t.setAttribute("d",e),t.setAttribute("style","stroke:#999999;stroke-width:1; fill: #c6cbe8; fill-opacity: 0.5"),u.appendChild(t),t=document.createElementNS(n,"path"),e="M 7 0 A 7 7 0 0 0 -7 0 M 0 0 L 0 -7",t.setAttribute("d",e),t.setAttribute("style","stroke: #666666;stroke-width:1; fill: none"),u.appendChild(t),i=0;i<=180;i++)r=document.createElementNS(n,"line"),r.setAttribute("x1",a),r.setAttribute("y1",0),r.setAttribute("x2",i%10==0?136:i%5==0?146:151),r.setAttribute("y2",0),r.setAttribute("transform","rotate(-"+i+")"),r.setAttribute("style","stroke: #333333;stroke-width:0.7;"),u.appendChild(r);for(this.gradext=document.createElementNS(n,"g"),i=0;i<=180;i++)i%10==0&&(s=document.createElementNS(n,"text"),s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode(i)),s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("style","font-family: arial;font-size: 10px;text-anchor: middle; fill: black"),s.setAttribute("transform"," scale(-1) rotate("+String(-i-90)+") translate(0,"+String(-124)+")"),this.gradext.appendChild(s));u.appendChild(this.gradext);for(t=document.createElementNS(n,"path"),e="M "+String(120)+" 0 L "+"116 0 A "+"116 "+"116 0 0 0 -"+"116 0 L "+String(-120)+" 0",t.setAttribute("d",e),t.setAttribute("style","stroke: #666666;stroke-width:1; fill: none"),u.appendChild(t),i=0;i<=18;i++)r=document.createElementNS(n,"line"),r.setAttribute("x1",89),r.setAttribute("y1",0),r.setAttribute("x2",99),r.setAttribute("y2",0),r.setAttribute("transform","rotate(-"+String(10*i)+")"),r.setAttribute("style","stroke: #333333;stroke-width:0.7;"),u.appendChild(r);for(this.gradint=document.createElementNS(n,"g"),i=0;i<=18;i++)s=document.createElementNS(n,"text"),s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode(180-10*i)),s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("style","font-family: arial;font-size: 9px;text-anchor: middle; fill: black"),s.setAttribute("transform","scale(-1) rotate("+String(-10*i-90)+") translate(0,"+String(-103)+")"),this.gradint.appendChild(s);u.appendChild(this.gradint);const c=document.createElementNS(n,"circle");c.setAttribute("cx",0),c.setAttribute("cy",0),c.setAttribute("r",2),c.setAttribute("style","stroke: black; stroke-width: 1;fill: none"),u.appendChild(c),s=document.createElementNS(n,"text"),s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode("Sésamath")),s.setAttribute("x",0),s.setAttribute("y",11),s.setAttribute("style","font-family: sans-serif;font-size: 7pt;font-weight:bold;text-anchor: middle; fill: maroon"),u.appendChild(s),this.g=u},z.prototype.montreGraduations=function(e){this.graduationInterneVisible=!0,this.visible&&this.gradint.setAttribute("visibility",e?"visible":"hidden")},z.prototype.montreGraduationsExternes=function(e){this.graduationExterneVisible=!0,this.visible&&this.gradext.setAttribute("visibility",e?"visible":"hidden")},z.prototype.montre=function(e){P.prototype.montre.call(this,e),e?(this.gradint.setAttribute("visibility",this.graduationInterneVisible?"visible":"hidden"),this.gradext.setAttribute("visibility",this.graduationExterneVisible?"visible":"hidden")):(this.gradint.setAttribute("visibility","hidden"),this.gradext.setAttribute("visibility","hidden"))};const F=U;function U(e){P.call(this,e),this.x=100,this.y=400,this.angle=0,this.longueur=15,this.graduationVisible=!0,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),e.svg.appendChild(this.g)}U.prototype=new P,U.prototype.creeg=function(){let e,t;const r=30*this.longueur+15,i=String(57),s=String(6),o=document.createElementNS(n,"g"),a=document.createElementNS(n,"rect");a.setAttribute("x",-s-1),a.setAttribute("y",0),a.setAttribute("width",String(r+6+1)),a.setAttribute("height",i),a.setAttribute("rx",s),a.setAttribute("ry",s),a.setAttribute("style","stroke:#999999;stroke-width:2; fill: #c6cbe8; fill-opacity: 0.5;"),o.appendChild(a);const l=document.createElementNS(n,"line");l.setAttribute("x1",-s),l.setAttribute("y1",27),l.setAttribute("x2",r),l.setAttribute("y2",27),l.setAttribute("style","stroke:#999999;stroke-width:2;"),o.appendChild(l),this.graduations=document.createElementNS(n,"g");for(let u=0;u<=10*this.longueur;u++){e=document.createElementNS(n,"line");const r=3*u;e.setAttribute("x1",r),e.setAttribute("y1",0),e.setAttribute("x2",r),e.setAttribute("y2",u%10==0?12:u%5==0?9:6),u%10==0&&(t=document.createElementNS(n,"text"),t.setAttribute("pointer-events","none"),t.appendChild(document.createTextNode(String(u/10))),t.setAttribute("x",r),t.setAttribute("y",21),t.setAttribute("style","font-family: monospace;font-size: 9pt;text-anchor:middle"),this.graduations.appendChild(t)),e.setAttribute("style","stroke:black;stroke-width:0.7;"),this.graduations.appendChild(e)}t=document.createElementNS(n,"text"),t.setAttribute("pointer-events","none"),t.appendChild(document.createTextNode("Sésamath")),t.setAttribute("x",r/2-6-3),t.setAttribute("y",i-5),t.setAttribute("style","font-family: Arial;font-size: 8pt;font-weight:bold;fill: maroon;text-anchor:middle;"),o.appendChild(t),o.appendChild(this.graduations),this.g=o},U.prototype.montreGraduations=function(e){this.graduationVisible=e,this.graduations.setAttribute("visibility",this.visible&&e?"visible":"hidden")},U.prototype.montre=function(e){P.prototype.montre.call(this,e),e?this.graduations.setAttribute("visibility",this.graduationVisible?"visble":"hidden"):this.graduations.setAttribute("visibility","hidden")},U.prototype.initialisePosition=function(){if(15!==this.longueur){this.longueur=15;const e=this.visible,t=this.g;this.creeg(),this.g.setAttribute("visibility",e?"visible":"hidden"),this.doc.svg.replaceChild(this.g,t)}P.prototype.initialisePosition.call(this)};const j=G;function G(e){P.call(this,e),this.x=200,this.y=400,this.angle=0,this.zoomfactor=1,this.abscisse=0,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),e.svg.appendChild(this.g)}G.prototype=new P,G.prototype.creeg=function(){let e,t;const r=172,i=57,s="stroke:#999999;stroke-width:2; fill: #c6cbe8; fill-opacity: 0.5",o=document.createElementNS(n,"g");e=document.createElementNS(n,"path"),t="M 0 0 L "+String(167)+" 0 A 5 5 0 0 1 "+String(r)+" 5 L "+String(r)+" "+String(52)+" A 5 5 90 0 1 "+String(167)+" "+String(i)+" L "+String(-251)+" "+"57 A 5 5 180 0 1 -"+"256 "+String(52)+" L "+String(-256)+" 5 A 5 5 -90 0 1 "+String(-251)+" 0Z";const a="M"+String(158)+" 42A 6 6 180 0 0 "+String(146)+" "+String(42)+"A 6 6 180 0 0 "+String(158)+" "+String(42);t+=a,e.setAttribute("d",t),e.setAttribute("style",s),o.appendChild(e),e=document.createElementNS(n,"path"),t="M"+String(r)+" "+String(16)+"L"+String(r)+" "+String(52)+" A 5 5 90 0 1 "+String(167)+" "+String(i)+" L "+String(-251)+" "+"57 A 5 5 180 0 1 -"+"256 "+String(52)+" L "+String(-256)+" "+String(16)+"Z"+a,e.setAttribute("d",t),e.setAttribute("style",s),o.appendChild(e);const l=document.createElementNS(n,"line");l.setAttribute("x1",0),l.setAttribute("y1",8),l.setAttribute("x2",0),l.setAttribute("y2",0),l.setAttribute("style","stroke: black"),o.appendChild(l);const u={};q.prototype.creeg.call(u),this.gequerre=u.g,this.gequerre.setAttribute("transform","scale(0.7)"),o.appendChild(this.gequerre),this.setAbs(this.abscisse),this.g=o},G.prototype.setAbs=function(e){this.abscisse=e,this.gequerre.setAttribute("transform","translate("+e+",0)")},G.prototype.lanceAnimationGlissement=function(e,t){this.absfin=e,this.pix=e>=this.abscisse?t/4:-t/4,this.dist=Math.abs(e-this.abscisse);const r=this;this.timer=setInterval((function(){r.actionPourGlissement()}),25)},G.prototype.actionPourGlissement=function(){const e=this.abscisse+this.pix,t=Math.abs(this.absfin-e);t>this.dist||!this.doc.animationEnCours?(this.setAbs(this.absfin),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=t,this.setAbs(e))};const V=H;function H(e){P.call(this,e),this.angle=this.angleInit(),this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),e.svg.appendChild(this.g)}H.prototype=new P,H.prototype.angleInit=function(){return-40},H.prototype.creeg=function(){let e,t,r,i,s;const o=4.5,a=document.createElementNS(n,"g");e=document.createElementNS(n,"defs"),i=document.createElementNS(n,"linearGradient"),i.setAttribute("id","gradpointe"),s=document.createElementNS(n,"stop"),s.setAttribute("offset","0%"),s.setAttribute("style","stop-color: #f00000;"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","50%"),s.setAttribute("style","stop-color: #eeb444;"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","100%"),s.setAttribute("style","stop-color: #f00000"),i.appendChild(s),i.setAttribute("x1","0%"),i.setAttribute("y1","0%"),i.setAttribute("x2","0%"),i.setAttribute("y2","100%"),e.appendChild(i),a.appendChild(e),e=document.createElementNS(n,"defs"),i=document.createElementNS(n,"linearGradient"),i.setAttribute("id","gradcorps"),s=document.createElementNS(n,"stop"),s.setAttribute("offset","0%"),s.setAttribute("style","stop-color: #810216;"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","25%"),s.setAttribute("style","stop-color: #c64f00;"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","50%"),s.setAttribute("style","stop-color: #ab4a36"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","75%"),s.setAttribute("style","stop-color: #c64f00;"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","100%"),s.setAttribute("style","stop-colr: #810216;"),i.appendChild(s),i.setAttribute("x1","0%"),i.setAttribute("y1","0%"),i.setAttribute("x2","0%"),i.setAttribute("y2","100%"),e.appendChild(i),a.appendChild(e),t=document.createElementNS(n,"path");const l=1.5,u=1.125,c="A1.5 1.125 -90 0 0 15 "+String(l)+"A"+"1.5 "+u+" -90 0 1 15 "+String(-l)+"A"+"1.5 "+u+" -90 0 0 15 "+String(-4.5);r="M 0 0 L15 4.5"+c+"Z",t.setAttribute("d",r),t.setAttribute("style","stroke:black; stroke-width:0.5; fill: url(#gradpointe); fill-opacity: 1;"),a.appendChild(t),t=document.createElementNS(n,"path"),r="M 0 0 L 3 0.9 3 "+String(-.9)+"Z",t.setAttribute("d",r),t.setAttribute("style","stroke:black; stroke-width:0.5; fill: black; fill-opacity: 1;"),a.appendChild(t),t=document.createElementNS(n,"path"),r="M 15 4.5"+c+" L 97 "+String(-4.5)+" L 97 "+String(o)+"Z",t.setAttribute("d",r),t.setAttribute("style","stroke:black; stroke-width:0.5; fill: url(#gradcorps); fill-opacity: 1;"),a.appendChild(t);const p=document.createElementNS(n,"circle");p.setAttribute("r",o),p.setAttribute("cx",97),p.setAttribute("cy",0),p.setAttribute("style","stroke:blue; stroke-width:0.5; fill: blue; fill-opacity: 1;"),a.appendChild(p),this.g=a};const W=Y;function Y(e,t){0!==arguments.length&&(this.doc=e,"string"==typeof t&&(t=Number(t)),this.tempo="number"==typeof t&&t>0&&Number.isFinite(t)?100*t:null,this.isReady=!1)}Y.prototype.setReady=function(){this.isReady=!0},Y.prototype.creegElement=function(){},Y.prototype.actionVisible=function(){return!0};const X=Z;function Z(e,t){W.call(this,e,t)}Z.prototype=new W,Z.prototype.execute=function(e){const t=this.doc.compas,r=this.doc.compasLeve;t.leve&&(r.montre(!1),t.setPosition(r.x,r.y,r.angle)),!e&&t.visible&&t.montre(!0),t.leve=!1,e||this.doc.actionSuivante(e)},Z.prototype.actionVisible=function(){return!!this.doc.getInstrumentVisibility(this.doc.compas.compas,this.indice-1)&&"leve"===this.doc.getCompasStatus(this.indice-1)};const Q=K;function K(e,t,r){this.doc=e,this.id=t,this.couleur=r,this.zoomfactor=1,this.visible=!1,this.objet="trait"}K.prototype.positionne=function(){},K.prototype.initialisePosition=function(){},K.prototype.translate=function(e,t){this.setPosition(e,t,this.angle,this.zoomfactor)},K.prototype.tourne=function(e){this.setPosition(this.x,this.y,e,this.zoomfactor)},K.prototype.zoom=function(e){this.zoomfactor=e,this.setPosition(this.x,this.y,this.angle,e)},K.prototype.montre=function(e){this.visible=e,this.g&&this.g.setAttribute("visibility",e?"visible":"hidden")},K.prototype.lanceAnimationTranslation=function(e,t,r){this.xfin=e,this.yfin=t,this.pix=Math.abs(r/4);const n=new O(this.x,this.y,e,t);if(this.dist=n.norme(),0===this.dist)return this.translate(this.xfin,this.yfin),void this.doc.actionSuivante();this.vect=n.vecteurColineaire(this.pix);const i=this;this.timer=setInterval((function(){i.actionPourTranslation()}),25)},K.prototype.actionPourTranslation=function(){const e=this.x+this.vect.x,t=this.y+this.vect.y,r=new O(e,t,this.xfin,this.yfin).norme();r>this.dist||!this.doc.animationEnCours?(this.translate(this.xfin,this.yfin),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=r,this.translate(e,t))},K.prototype.lanceAnimationRotation=function(e,t){const r=h(this.angle);let n=h(e);Math.abs(n-r)>180&&(n>r?n-=360:n+=360),this.anglefin=n,this.angle=r,this.pasdeg=2*t/3,this.pasdeg*=e>=this.angle?1:-1,this.distang=Math.abs(e-this.angle);const i=this;this.timer=setInterval((function(){i.actionPourRotation()}),25)},K.prototype.actionPourRotation=function(){const e=parseFloat(this.angle)+parseFloat(this.pasdeg),t=Math.abs(e-this.anglefin);t>this.distang||!this.doc.animationEnCours?(this.tourne(this.anglefin),clearInterval(this.timer),this.doc.actionSuivante()):(this.distang=t,this.tourne(e))},K.prototype.lanceAnimationZoom=function(e,t){this.zoomfin=e,this.vitesse=parseInt(t),this.pas=.05*this.vitesse*(this.zoomfin-this.zoomfactor),this.senspos=this.pas>=0;const r=this;this.timer=setInterval((function(){r.actionPourZoom()}),100)},K.prototype.actionPourZoom=function(){const e=this.zoomfactor+this.pas;this.doc.animationEnCours&&(this.senspos&&e<this.zoomfin||!this.senspos&&e>this.zoomfin)?this.zoom(e):(this.zoom(this.zoomfin),clearInterval(this.timer),this.doc.actionSuivante())},K.prototype.updateg=function(){const e=this.g;this.creeg(),this.doc.svg.replaceChild(this.g,e),this.doc.setElement(this.id,this),this.g.setAttribute("visibility","visible")},K.prototype.creationAnimee=function(){return!1},K.prototype.finAction=function(){};const J=ee;function ee(e,t,r,n){Q.call(this,e,t,"black"),this.x=parseFloat(r),this.y=parseFloat(n),this.xinit=this.x,this.yinit=this.y,this.taille=20,this.angle=0,this.texte="",this.objet="texte"}ee.prototype=new Q,ee.prototype.positionne=function(){this.setPosition(this.x,this.y,this.angle,this.zoomfactor)},ee.prototype.translate=function(e,t){this.x=e,this.y=t,this.positionne()},ee.prototype.updateg=function(e){const t=this.g;if(!t)return console.error("Il faut appeler creeg avant updateg");this.doc.svg.replaceChild(e,t),this.g=e,e.setAttribute("visibility","visible")},ee.prototype.creeg=function(){this.g=document.createElementNS(n,"g")},ee.prototype.setPosition=function(e,t,r,n){this.x=e,this.y=t,this.angle=r,this.zoomfactor=n;const i=t+T(this);this.g.setAttribute("transform","scale("+n+") translate("+String(e/n)+","+String(i/n)+") rotate("+r+")")};const te=re;function re(e,t,r,n,i){W.call(this,e,n),this.id=t;const s=this.doc.getElement(t,r.objet);this.objetRemplace=null===s?null:s,this.objet=r,this.vitesse=arguments.length>=5&&null!=i?Math.abs(parseFloat(i)):8,null!==this.objetRemplace?this.doc.addElement(this.objet):this.doc.pushElement(this.objet)}re.prototype=new W,re.prototype.execute=function(e){this.objet instanceof J&&(this.objet.x=this.objet.xinit,this.objet.y=this.objet.yinit),null!==this.objetRemplace&&this.objetRemplace.montre(!1),this.objet.creationAnimee()&&!e?this.objet.lanceAnimation(this.vitesse):(this.objet.montre(!0),e?this.objet.finAction():this.doc.actionSuivante())},re.prototype.creegElement=function(){const e=this.doc,t=this.objet;t.creeg(),t.positionne(),t.g.setAttribute("visibility","hidden"),e.svg.appendChild(t.g)},re.prototype.actionVisible=function(){return!(this.objet instanceof J)};const ne=ie;function ie(e,t,r,n){W.call(this,e,r),this.ecartement=t,this.ec10=null===n?16:parseFloat(n)}ie.prototype=new W,ie.prototype.execute=function(e){e?(this.doc.compas.ecart=this.ecartement,this.doc.compas.positionne()):this.doc.compas.lanceAnimationEcartement(this.ecartement,this.ec10)},ie.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.compas,this.indice-1)};const se={tex:{inlineMath:[["$","$"],["\\(","\\)"]],packages:{"[+]":["color"]}},svg:{mtextInheritFont:!0},options:{ignoreHtmlClass:"tex2jax_ignore",processHtmlClass:"tex2jax_process"},loader:{load:["[tex]/noerrors","[tex]/color"]}};let oe;function ae(){return oe||(oe=new Promise(((e,t)=>{if("object"==typeof MathJax&&/^3\./.test(MathJax.version))return MathJax.config=se,e();window.MathJax=se,MathJax.startup={ready:()=>{clearTimeout(i),MathJax.startup.defaultReady(),MathJax.startup.promise.then((()=>{e()}))}};const r=document.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous";const n=window.mathJax3BaseUrl?`${window.mathJax3BaseUrl}es5/tex-svg.js`:"https://www.mathgraph32.org/js/MathJax3/es5/tex-svg.js";r.src=n;document.getElementsByTagName("head")[0].appendChild(r);const i=setTimeout((()=>{t(Error(`Mathjax non chargé après 60s d’attente (${n})`))}),6e4)})),oe)}const le=ue;function ue(e,t,r,n,i,s,o,a,l,u,c,p,h,d,f,m){W.call(this,e,m),this.txt=this.doc.getElement(t,"texte"),this.id=t,this.couleur=r,this.taille=null==n?"20":n.replace(/O/g,"0"),this.style=null===s?"texte":s,this.couleurFond=o,this.opaciteFond=null==a?"0.6":parseFloat(a)/100,this.couleurCadre=l,null!==u&&null===l&&(this.couleurCadre=r),this.epaisseurCadre=null!=u?u:null==l?0:1,this.marge=null==c?0:parseFloat(c),this.margeGauche=null==p?0:parseFloat(p),this.margeDroite=null==h?0:parseFloat(h),this.margeHaut=null==d?0:parseFloat(d),this.margeBas=null==f?0:parseFloat(f),this.texte=i,this.estLatex=this.estAffichageLatex(),this.estLatex||(this.texte=v(b(this.texte)),this.texte=this.traduitCaracteresGrecs(this.texte),this.texte=this.texte.replace(/\*/g,"×"),k(i)&&(this.texte="$"+this.traiteMaths(this.texte)+"$",this.estLatex=!0))}ue.prototype=new W,ue.prototype.execute=function(e){if(null!=this.txt){this.angle=0;const e=this.txt;e.couleur=this.couleur,e.taille=this.taille,e.texte=this.texte,e.couleurFond=this.couleurFond,e.couleurCadre=this.couleurCadre,e.epaisseurCadre=this.epaisseurCadre,e.updateg(this.g),e.positionne()}e||this.doc.actionSuivante(e)},ue.prototype.estAffichageLatex=function(){return"$"===this.texte.charAt(0)&&"$"===this.texte.charAt(this.texte.length-1)},ue.prototype.traduitCaracteresGrecs=function(e){if(!e.includes("£"))return e;const t=e.split("£").map(((e,t)=>t%2?i[e]||`£${e}£`:e)).join("");return(e.length-e.replace(/£/g,"").length)%2?(console.warn(`Il y a un nombre impair de £ dans cette chaîne : ${e}`),t.substr(0,t.length-1)):t},ue.prototype.traiteMaths=function(e){let t;const r=e,n="texte"===this.style,i=r.split(/<\/?br *\/?>/gi);if(i.length<=1)return M(e,n);let s="\\begin{array}{l}";for(t=0;t<i.length;t++)0!==t&&(s+="\\\\"),s+=M(i[t],n);return s+="\\end{array}",s},ue.prototype.prepare=function(){let e;if(this.estLatex&&(e=this.texte.replace(/^\$(.*)\$$/,"$1"),e||(console.error(Error("texte latex mais pas enveloppé de $, ignoré"),this.texte),this.estLatex=!1)),this.estLatex){const t=this;ae().then((()=>{const r=t.doc.getWidth(),n=t.taille,i=t.prelatex()+e;t.ex=.45*n;const s={em:n,ex:t.ex,containerWidth:r,display:!1};return t.doc.debug&&console.log("On passe à MathJax la string",i),MathJax.tex2svgPromise(i,s)})).then((e=>{t.html=e,t.creegLatex(),t.setReady()})).catch((e=>{console.error(e),alert("Pb Mathjax, impossible d’afficher le LaTeX correctement")}))}else this.creeg(),this.setReady()},ue.prototype.prelatex=function(){return"\\color{"+this.couleur+"}"},ue.prototype.creegLatex=function(){try{const e=this.html.firstChild,t=e.cloneNode(!0),r=document.createElementNS(n,"g");r.appendChild(t);const i=parseFloat(e.getAttribute("width"))*this.ex,s=parseFloat(e.getAttribute("height"))*this.ex,o=t.style["vertical-align"],a=(o&&parseFloat(o)||1)*this.ex;t.setAttribute("width",i+"px"),t.setAttribute("height",s+"px"),t.style["vertical-align"]=`${a}px`,t.setAttribute("x","0");const l=T(this);if(t.setAttribute("y",String(-l)),r.setAttribute("visibility","hidden"),null!==this.couleurFond||null!==this.couleurCadre){r.setAttribute("visibility","hidden"),this.doc.svg.appendChild(r),this.rectAff={};const e=parseFloat(this.epaisseurCadre),{x:t,y:n,width:i,height:s}=r.getBBox();this.rectAff.height=s+2*e+4+2*this.marge+this.margeHaut+this.margeBas,this.rectAff.width=i+2*e+2+2*this.marge+this.margeGauche+this.margeDroite,this.rectAff.x=t-e-1-this.marge-this.margeGauche,this.rectAff.y=n-e-1-this.marge-this.margeHaut,r.setAttribute("visibility","visible"),this.doc.svg.removeChild(r),this.creeRectangle(r,null==this.couleurFond?"white":this.couleurFond)}this.g=r}catch(e){console.error("Erreur dans ActionEcrireTexte.creegLatex (on remplace par un <g> vide) :",e),this.g=document.createElementNS(n,"g")}},ue.prototype.creeg=function(){let e,t,r,i,s,o,a,l,c,p,h,d,g,y,v,b,x,w,_=0;const E="<",S="£e(",A="£i(",k=document.createElementNS(n,"g"),M=T(this),C=M+2;let O=0;const I=.4*M;if(""!==this.texte){if(o=document.createElementNS(n,"text"),o.setAttribute("pointer-events","none"),o.setAttribute("x",0),o.setAttribute("y",0),s="text-anchor:left;font-size:"+M+"px;fill:"+this.couleur+";",o.setAttribute("style",s),i=this.texte.replace(/ /g," "),-1===this.texte.indexOf(E)&&-1===this.texte.indexOf(S)&&-1===this.texte.indexOf(A)&&-1===this.texte.indexOf("<br>"))o.appendChild(document.createTextNode(i));else for(v=i.split(/<br>/gi),y=-C,b=0;b<v.length;b++)for(x=!0,r=v[b];""!==r;){if(e=r.indexOf(E),l=r.indexOf(S),c=r.indexOf(A),x&&(y+=C+O),-1!==l&&(y+=I),-1===e&&-1===l&&-1===c){t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.setAttribute("dy",_),x&&(t.setAttribute("x",0),t.setAttribute("y",y),x=!1),_=0,t.appendChild(document.createTextNode(r)),o.appendChild(t);break}for(;-1!==r.indexOf(E)||-1!==r.indexOf(S)||-1!==r.indexOf(A);)if(e=r.indexOf(E),l=r.indexOf(S),c=r.indexOf(A),p=-1===e?-1===l?c:-1===c?l:Math.min(c,l):-1===l?-1===c?e:Math.min(e,c):-1===c?Math.min(e,l):Math.min(e,c,l),p>0)t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.setAttribute("dy",_),x&&(t.setAttribute("x",0),t.setAttribute("y",y),x=!1),_=0,t.appendChild(document.createTextNode(r.substring(0,p))),o.appendChild(t),r=r.substring(p);else if(0===e){const e=new u(!1,!1,!1,this.couleur,"",M);a=f(r),N(-1===a?r:r.substring(0,a),e,o,x,y),x=!1,r=-1!==a?r.substring(a):"",_=0}else h=p===l,w=m(r),t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.setAttribute("dy",_+"px"),x&&(t.setAttribute("x",0),t.setAttribute("y",y),x=!1),w.erreur?t.appendChild(document.createTextNode(r)):(t.appendChild(document.createTextNode(w.operande)),o.appendChild(t),t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.appendChild(document.createTextNode(w.exposant)),_=I,h?_=-_:O=_,t.setAttribute("dy",_+"px"),d=.6*M,g="font-size:"+d+"px;",t.setAttribute("style",g),o.appendChild(t),_=-_),r=w.texte}k.appendChild(o)}if(k.setAttribute("visibility","hidden"),null!=this.couleurFond||null!=this.couleurCadre){k.setAttribute("visibility","hidden"),this.doc.svg.appendChild(k),this.rectAff={};const e=parseFloat(this.epaisseurCadre);this.rectAff.height=k.getBBox().height+2*e+3+2*this.marge+this.margeHaut+this.margeBas,this.rectAff.width=k.getBBox().width+2*e+2+2*this.marge+this.margeGauche+this.margeDroite,this.rectAff.x=k.getBBox().x-e-1-this.marge-this.margeGauche,this.rectAff.y=k.getBBox().y-e-1-this.marge-this.margeHaut,k.setAttribute("visibility","visible"),this.doc.svg.removeChild(k),this.creeRectangle(k,null==this.couleurFond?"white":this.couleurFond)}this.g=k},ue.prototype.contientBalisesItaliqueOuUnderlineOuFontOuBold=function(e){return/<(u|b|i|font[^>]+)>/gi.test(e)},ue.prototype.creeRectangle=function(e,t){const r=document.createElementNS(n,"rect"),i="stroke-width:"+this.epaisseurCadre+"px;stroke:"+this.couleurCadre+";fill:"+t+";fill-opacity:"+this.opaciteFond+";";r.setAttribute("style",i),r.setAttribute("x",this.rectAff.x),r.setAttribute("y",this.rectAff.y),r.setAttribute("width",this.rectAff.width),r.setAttribute("height",this.rectAff.height),r.setAttribute("pointer-events","none"),e.insertBefore(r,e.childNodes[0])};const ce=pe;function pe(e,t,r,n){W.call(this,e,r),this.abscisseFin=parseFloat(t),this.pix10=null===n?8:String(Math.abs(n))}pe.prototype=new W,pe.prototype.execute=function(e){e?(this.doc.requerre.setAbs(this.abscisseFin),this.doc.requerre.positionne()):this.doc.requerre.lanceAnimationGlissement(this.abscisseFin,this.pix10)},pe.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.requerre,this.indice-1)};const he=de;function de(e,t,r,n,i){P.call(this,e);const s=null==e.compasLeve?null:e.compasLeve.g;this.x=t,this.y=r,this.angle=n,this.ecart=i,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(t,r,n),null==s?e.svg.appendChild(this.g):e.svg.replaceChild(this.g,s)}de.prototype=new P,de.prototype.creeg=function(){let e,t,r;const i=this.ecart,s=document.createElementNS(n,"g");this.ecart>16&&(e=document.createElementNS(n,"rect"),e.setAttribute("x",8),e.setAttribute("y",-3.5),e.setAttribute("width",this.ecart-16),e.setAttribute("height",7),e.setAttribute("rx",1),e.setAttribute("ry",1),e.setAttribute("style","stroke:black;stroke-width:0.5;fill:silver;fill-opacity:1"),s.appendChild(e)),r=document.createElementNS(n,"path"),r.setAttribute("d","M0 0 L8 1 8 -1Z"),r.setAttribute("style","stroke:black;stroke-width:0.5;fill:black;fill-opacity:1"),s.appendChild(r);const o=i-16;t=document.createElementNS(n,"line"),t.setAttribute("x1",8),t.setAttribute("y1",0),t.setAttribute("x2",8+o/8),t.setAttribute("y2",0),t.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(t),r=document.createElementNS(n,"path");const a=String(i-8);r.setAttribute("d","M"+i+" 0 L"+a+" 1.5 "+a+" -1.5Z"),r.setAttribute("style","stroke:black;stroke-width:0.5;fill:black;fill-opacity:1"),s.appendChild(r),t=document.createElementNS(n,"line"),t.setAttribute("x1",a),t.setAttribute("y1",0),t.setAttribute("x2",String(i-8-o/8)),t.setAttribute("y2",0),t.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(t),t=document.createElementNS(n,"line");let l=String(i-8-o/8-2);t.setAttribute("x1",l),t.setAttribute("y1",-3.5),t.setAttribute("x2",l),t.setAttribute("y2",3.5),t.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(t),t=document.createElementNS(n,"line"),l=String(i-8-o/3-2),t.setAttribute("x1",l),t.setAttribute("y1",-3.5),t.setAttribute("x2",l),t.setAttribute("y2",3.5),t.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(t),e=document.createElementNS(n,"rect"),e.setAttribute("x",String(8+o/8-5)),e.setAttribute("y",String(-7)),e.setAttribute("width",8),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e),e=document.createElementNS(n,"rect"),e.setAttribute("x",String(i-8-o/8-4)),e.setAttribute("y",String(-7)),e.setAttribute("width",8),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e);const u=12;r=document.createElementNS(n,"path");const c="M"+String(i/2+u)+" "+String(-4)+" A "+String(u)+" 2 180 0 0 "+String(i/2-u)+" "+String(-4)+"A"+String(4)+" 2 90 0 1 "+String(i/2-u)+" "+String(4)+"A"+String(u)+" 2 0 0 0 "+String(i/2+u)+" "+String(4)+"A"+String(4)+" 2 -90 0 1 "+String(i/2+u)+" "+String(-4);r.setAttribute("d",c),r.setAttribute("style","stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1"),s.appendChild(r),t=document.createElementNS(n,"line"),t.setAttribute("x1",String(i/2+u)),t.setAttribute("y1",-3.5),t.setAttribute("x2",String(i/2-u)),t.setAttribute("y2",3.5),t.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(t),t=document.createElementNS(n,"line"),t.setAttribute("x1",String(i/2-u)),t.setAttribute("y1",-3.5),t.setAttribute("x2",String(i/2+u)),t.setAttribute("y2",3.5),t.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(t);const p=document.createElementNS(n,"circle");p.setAttribute("cx",String(i/2)),p.setAttribute("cy",0),p.setAttribute("r",5),p.setAttribute("style","stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1"),s.appendChild(p),e=document.createElementNS(n,"rect"),e.setAttribute("x",String(8+o/8-5)),e.setAttribute("y",String(-7)),e.setAttribute("width",7),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e),e=document.createElementNS(n,"rect"),e.setAttribute("x",String(i-8-o/8-4)),e.setAttribute("y",String(-7)),e.setAttribute("width",7),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e),this.g=s},de.prototype.setPosition=function(e,t,r){this.x=e,this.y=t,this.angle=r,this.g.setAttribute("transform","translate("+e+","+t+") rotate("+r+")")};const fe=me;function me(e,t){W.call(this,e,t)}me.prototype=new W,me.prototype.execute=function(e){const t=this.doc.compas;t.visible&&(t.montre(!1),t.visible=!0),this.doc.compasLeve=new he(this.doc,t.x,t.y,t.angle,t.ecart),!e&&t.visible&&this.doc.compasLeve.montre(!0),t.leve=!0,e||this.doc.actionSuivante(e)},me.prototype.actionVisible=function(){return!!this.doc.getInstrumentVisibility(this.doc.compas,this.indice-1)&&"couche"===this.doc.getCompasStatus(this.indice-1)};const ge=ye;function ye(e,t,r,n){W.call(this,e,n),this.objet=this.doc.getElement(t,r)}ye.prototype=new W,ye.prototype.execute=function(e){const t=this.objet;null!=t&&t.montre(!1),e||this.doc.actionSuivante(e)},ye.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const ve=be;function be(e,t,r){W.call(this,e,r),this.instrument=t}be.prototype=new W,be.prototype.execute=function(e){const t=this.doc.compas;this.instrument.montre(!1),t.leve&&this.doc.compasLeve.montre(!1),e||this.doc.actionSuivante(e)},be.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const xe=we;function we(e,t,r,n){W.call(this,e,n),this.instrument=t,this.longueur=r}we.prototype=new W,we.prototype.execute=function(e){if(this.instrument===this.doc.regle){const e=this.instrument.visible;this.instrument.longueur=this.longueur;const t=this.instrument.g;this.instrument.creeg(),this.instrument.g.setAttribute("visibility",e?"visible":"hidden"),this.doc.svg.replaceChild(this.instrument.g,t),this.instrument.translate(this.instrument.x,this.instrument.y)}e||this.doc.actionSuivante(e)},we.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const _e=Ee;function Ee(e,t,r,n){W.call(this,e,n),this.objet=this.doc.getElement(t,r)}Ee.prototype=new W,Ee.prototype.execute=function(e){const t=this.objet;null!==t&&t.montre(!0),e||this.doc.actionSuivante(e)},Ee.prototype.actionVisible=function(){return!this.doc.getObjectVisibility(this.objet,this.indice-1)};const Se=Ae;function Ae(e,t,r,n){W.call(this,e,n),this.instrument=t,this.bmontrer=r}Ae.prototype=new W,Ae.prototype.execute=function(e){this.instrument.montreGraduations(this.bmontrer),e||this.doc.actionSuivante(e)},Ae.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const Ne=ke;function ke(e,t,r,n,i){W.call(this,e,i),this.x=null===r?null:parseFloat(r),this.y=null===n?null:parseFloat(n),this.instrument=t}ke.prototype=new W,ke.prototype.execute=function(e){const t=this.doc.compas;null!==this.x&&null!==this.y&&this.instrument.translate(this.x,this.y),this.instrument!==t||e?this.instrument.montre(!0):(t.leve?this.doc.compasLeve.montre(!0):t.montre(!0),t.visible=!0),e||this.doc.actionSuivante(e)},ke.prototype.actionVisible=function(){return!this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const Me=Ce;function Ce(e,t,r){W.call(this,e,r),this.bmontrer=t}Ce.prototype=new W,Ce.prototype.execute=function(e){this.doc.rapporteur.montreGraduationsExternes(this.bmontrer),e||this.doc.actionSuivante(e)},Ce.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.rapporteur,this.indice-1)};const Te=Oe;function Oe(e,t,r){W.call(this,e,r),this.nomPoint=t}Oe.prototype=new W,Oe.prototype.prepare=function(){if(this.nomPoint.estLatex){const e=this,t=this.doc.getWidth(),r=T(this.nomPoint)-2,n=this.nomPoint.nom.substring(1);this.ex=r/2;const i={em:r,ex:this.ex,containerWidth:t,display:!1};this.doc.debug&&console.log("chargement MathJax dans ActionNommerPoint"),ae().then((()=>MathJax.tex2svgPromise(n,i))).then((t=>{e.nomPoint.html=t,e.nomPoint.creegLatex(),e.setReady()})).catch((e=>{console.error(e),alert("Pb Mathjax, impossible d’afficher le point en LaTeX")}))}else this.nomPoint.creeg(),this.setReady()},Oe.prototype.execute=function(e){if("point"===this.nomPoint.objet){this.nomPoint.positionne();const e=this.nomPoint.point;null!==e.nom?this.doc.svg.replaceChild(this.nomPoint.g,e.nom.g):this.doc.svg.appendChild(this.nomPoint.g),e.nom=this.nomPoint}this.nomPoint.g.setAttribute("visibility","visible"),e||this.doc.actionSuivante(e)},Oe.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.nomPoint.point,this.indice-1)};const Ie=Pe;function Pe(e,t){W.call(this,e,t)}Pe.prototype=new W,Pe.prototype.execute=function(e){e||(this.doc.activeIconeContinuer(),this.doc.animationEnCours=!1)},Pe.prototype.actionVisible=function(){return!1};const De=Re;function Re(e,t,r,n,i){W.call(this,e,n),this.instrument=t,this.anglefin=parseFloat(r),this.deg10=null==i?8:Math.abs(parseFloat(i))}Re.prototype=new W,Re.prototype.execute=function(e){e?(this.instrument.angle=this.anglefin,this.instrument.positionne(),e||this.doc.actionSuivante(e)):this.instrument.lanceAnimationRotation(this.anglefin,this.deg10)},Re.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const Le=qe;function qe(e,t){W.call(this,e,t)}qe.prototype=new W,qe.prototype.execute=function(e){this.doc.compas.retourne(),e||this.doc.actionSuivante(e)},qe.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.compas,this.indice-1)};const $e=Be;function Be(e,t,r,n,i,s){W.call(this,e,i),this.anglefin=parseFloat(r),this.deg10=null==s?8:Math.abs(parseFloat(s)),this.objet=this.doc.getElement(t,n)}Be.prototype=new W,Be.prototype.execute=function(e){const t=this.objet;null!=t?e?(t.angle=this.anglefin,t.positionne()):t.lanceAnimationRotation(this.anglefin,this.deg10,this.tempo):e||this.doc.actionSuivante(e)},Be.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const ze=Fe;function Fe(e,t,r,n,i,s){W.call(this,e,i),this.instrument=t,this.xfin=parseFloat(r),this.yfin=parseFloat(n),this.pix10=null==s?8:parseFloat(s)}Fe.prototype=new W,Fe.prototype.execute=function(e){isNaN(this.xfin)||isNaN(this.yfin)?this.doc.actionSuivante(e):e?this.instrument.translate(this.xfin,this.yfin):this.instrument.lanceAnimationTranslation(this.xfin,this.yfin,this.pix10)},Fe.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const Ue=je;function je(e,t,r,n,i,s,o){W.call(this,e,s),this.xfin=parseFloat(r),this.yfin=parseFloat(n),this.pix10=null==o?8:parseFloat(o),this.type=i,this.objet=this.doc.getElement(t,i)}je.prototype=new W,je.prototype.execute=function(e){const t=this.objet;null!=t?e?t.translate(this.xfin,this.yfin):t.lanceAnimationTranslation(this.xfin,this.yfin,this.pix10):this.doc.actionSuivante(e)},je.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const Ge=Ve;function Ve(e,t,r,n,i){W.call(this,e,n),this.instrument=t,this.zoomfin=parseFloat(r)/100,this.vitesse=parseInt(i)}Ve.prototype=new W,Ve.prototype.execute=function(e){e?(this.instrument.zoomfactor=this.zoomfin,this.instrument.positionne()):this.instrument.lanceAnimationZoom(this.zoomfin,this.vitesse)},Ve.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const He=We;function We(e,t,r,n,i,s){W.call(this,e,i),this.objet=this.doc.getElement(t,n),this.zoomfin=parseFloat(r)/100,this.vitesse=s,this.type=n}We.prototype=new W,We.prototype.execute=function(e){const t=this.objet;null!=t?e?(t.zoomfactor=this.zoomfin,t.positionne()):t.lanceAnimationZoom(this.zoomfin,this.vitesse):this.doc.actionSuivante(e)},We.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const Ye=Xe;function Xe(e,t,r,n,i,s){W.call(this,e,i),this.rayFin=parseFloat(r),this.pix10=null==s?8:parseFloat(s),this.type=n,this.objet=this.doc.getElement(t,n)}Xe.prototype=new W,Xe.prototype.execute=function(e){const t=this.objet;null!=t?e?t.donneRayon(this.rayFin):t.lanceAnimationModificationRayon(this.rayFin,this.pix10):this.doc.actionSuivante(e)},Xe.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const Ze=Qe;function Qe(e,t,r,n,i,s){Q.call(this,e,t,r),this.epaisseur=n,this.opacite=arguments.length>=5?i:"100",this.styleTrait=arguments.length>=6?s:"continu";const o=parseFloat(this.opacite/100);this.style="stroke:"+r+";stroke-width:"+n+";stroke-opacity:"+o+";stroke-linecap:round;","tiret"===this.styleTrait&&(this.style+="stroke-dasharray:10 8 10;")}Qe.prototype=new Q;const Ke=Je;function Je(e,t,r,n,i,s,o,a,l,u,c){this.x=parseFloat(r),this.y=parseFloat(n),this.ray=parseFloat(i),this.ang1=parseFloat(s),this.ang2=parseFloat(o),this.motif=null==c?"simple":c,Ze.call(this,e,t,a,l,1),this.opaciteRemplissage=null==u?.7:parseFloat(u)/100,this.objet="angle"}Je.prototype=new Ze,Je.prototype.creeg=function(){let e,t,r,i,o,a,l,u,c,p;const d=this.motif,f=this.ray,m=this.ang1,g=this.ang2,y=g-m,v=h(y);var b;b=Math.abs(y)-180,e=Math.abs(b)<1e-7?this.ang1<=this.ang2:v>0;const x=new O(this.x,this.y,this.x+Math.cos(m*s),this.y+Math.sin(m*s)).vecteurColineaire(f),w=new O(this.x,this.y,this.x+Math.cos(g*s),this.y+Math.sin(g*s)).vecteurColineaire(f);let _=this.x+x.x,E=this.y+x.y,S=this.x+w.x,A=this.y+w.y;const N=document.createElementNS(n,"g");let k=document.createElementNS(n,"path");const M=-1!==d.indexOf("plein")?this.couleur:"none";t="none"!==M?"M"+this.x+" "+this.y+"L"+_+" "+E+"A"+f+" "+f+" "+this.ang1+" 0 "+(e?"1 ":"0 ")+S+" "+A+" Z":"M"+_+" "+E+"A"+f+" "+f+" "+this.ang1+" 0 "+(e?"1 ":"0 ")+S+" "+A,k.setAttribute("d",t);const C="stroke:"+this.couleur+";stroke-width:"+this.epaisseur+";",T=C+"fill:"+M+";fill-opacity:"+this.opaciteRemplissage+";";k.setAttribute("style",T),N.appendChild(k);const I=-1!==d.indexOf("O"),P=x.tourne(v/2),D=this.x+P.x,R=this.y+P.y;if(I){const e=document.createElementNS(n,"circle");e.setAttribute("r",5),e.setAttribute("cx",D),e.setAttribute("cy",R),e.setAttribute("style",C+"fill:none;"),N.appendChild(e)}const L=-1!==d.indexOf("triple")?2:-1!==d.indexOf("double")?1:0;for(let s=1;s<=L;s++){k=document.createElementNS(n,"path");const r=f-5*s,i=x.vecteurColineaire(r),o=w.vecteurColineaire(r);_=this.x+i.x,E=this.y+i.y,S=this.x+o.x,A=this.y+o.y,t="M"+_+" "+E+"A"+r+" "+r+" "+this.ang1+" 0 "+(e?"1 ":"0 ")+S+" "+A,k.setAttribute("d",t),k.setAttribute("style",C+"fill:none;"),N.appendChild(k)}const q=-1!==d.indexOf("///")?3:-1!==d.indexOf("//")?2:-1!==d.indexOf("/")?1:0;if(0===q)return void(this.g=N);const $=L+1,B=P.vecteurColineaire(1);switch(q){case 1:l=this.x+B.x*f,u=this.y+B.y*f,r=document.createElementNS(n,"line"),r.setAttribute("x1",l-5*B.x*$),r.setAttribute("y1",u-5*B.y*$),r.setAttribute("x2",l+5*B.x),r.setAttribute("y2",u+5*B.y),r.setAttribute("style",T),N.appendChild(r);break;case 2:c=v/6,p=6,Math.abs(c)>=Math.abs(p)&&(c=p),i=B.tourne(c),o=this.x+i.x*f,a=this.y+i.y*f,r=document.createElementNS(n,"line"),r.setAttribute("x1",o-5*B.x*$),r.setAttribute("y1",a-5*B.y*$),r.setAttribute("x2",o+5*B.x),r.setAttribute("y2",a+5*B.y),r.setAttribute("style",T),N.appendChild(r),i=B.tourne(-c),o=this.x+i.x*f,a=this.y+i.y*f,r=document.createElementNS(n,"line"),r.setAttribute("x1",o-5*B.x*$),r.setAttribute("y1",a-5*B.y*$),r.setAttribute("x2",o+5*B.x),r.setAttribute("y2",a+5*B.y),r.setAttribute("style",T),N.appendChild(r);break;case 3:l=this.x+B.x*f,u=this.y+B.y*f,r=document.createElementNS(n,"line"),r.setAttribute("x1",l-5*B.x*$),r.setAttribute("y1",u-5*B.y*$),r.setAttribute("x2",l+5*B.x),r.setAttribute("y2",u+5*B.y),r.setAttribute("style",T),N.appendChild(r),c=v/4,p=9,Math.abs(c)>=Math.abs(p)&&(c=p),i=B.tourne(c),o=this.x+i.x*f,a=this.y+i.y*f,r=document.createElementNS(n,"line"),r.setAttribute("x1",o-5*B.x*$),r.setAttribute("y1",a-5*B.y*$),r.setAttribute("x2",o+5*B.x),r.setAttribute("y2",a+5*B.y),r.setAttribute("style",T),N.appendChild(r),i=B.tourne(-c),o=this.x+i.x*f,a=this.y+i.y*f,r=document.createElementNS(n,"line"),r.setAttribute("x1",o-5*B.x*$),r.setAttribute("y1",a-5*B.y*$),r.setAttribute("x2",o+5*B.x),r.setAttribute("y2",a+5*B.y),r.setAttribute("style",T),N.appendChild(r)}this.g=N};const et=tt;function tt(e,t,r,n,i,s,o,a){this.xsommet=parseFloat(r),this.ysommet=parseFloat(n),this.xinter=parseFloat(i),this.yinter=parseFloat(s),Ze.call(this,e,t,o,a,100),this.objet="angle_droit"}tt.prototype=new Ze,tt.prototype.creeg=function(){let e=new O(this.xsommet,this.ysommet,this.xinter,this.yinter);const t=e.norme();e=e.vecteurColineaire(t/Math.sqrt(2)),e=e.tourne(45);const r=e.tourne(-90),i=document.createElementNS(n,"polyline"),s=String(this.xsommet+e.x)+" "+String(this.ysommet+e.y)+" "+this.xsommet+" "+this.ysommet+" "+String(this.xsommet+r.x)+" "+String(this.ysommet+r.y);i.setAttribute("points",s),i.setAttribute("style",this.style+"fill:none;"),this.g=i};const rt=nt;function nt(e,t,r,n,i,s,o,a,l,u,c){this.x=parseFloat(r),this.y=parseFloat(n),this.ray=parseFloat(i),this.debut=parseFloat(s),this.fin=parseFloat(o),Ze.call(this,e,t,a,l,u,c)}nt.prototype=new Ze,nt.prototype.creeg=function(){const e=this.debut,t=this.fin,r=this.ray,i=e<t?"1":"0",o=Math.abs(t-e),a=document.createElementNS(n,"g");if(o>=359.9){const e=document.createElementNS(n,"circle");e.setAttribute("r",r),e.setAttribute("cx",0),e.setAttribute("cy",0),e.setAttribute("style",this.style+";fill:none;"),a.appendChild(e)}else{const l=document.createElementNS(n,"path"),u=new O(Math.cos(e*s)*r,Math.sin(e*s)*r),c=new O(Math.cos(t*s)*r,Math.sin(t*s)*r),p="M"+u.x+" "+u.y+"A"+r+" "+r+" "+e+" "+(o>180?"1":"0")+" "+i+" "+c.x+" "+c.y;l.setAttribute("d",p),l.setAttribute("style",this.style+";fill:none"),a.appendChild(l)}a.setAttribute("transform","translate("+this.x+","+this.y+")"),a.setAttribute("visibility","hidden"),this.g=a},nt.prototype.creationAnimee=function(){return!0},nt.prototype.lanceAnimation=function(e){const t=this.doc.compas;null==this.doc.compasLeve&&(this.doc.compasLeve=new he(this.doc,t.x,t.y,t.angle,t.ecart));const r=this.doc.compasLeve;this.ray=this.doc.compas.ecart,this.angfin=this.fin,this.pasdeg=e/2,this.pasdeg*=this.fin>=this.debut?1:-1,this.distang=Math.abs(this.fin-this.debut),this.fin=this.debut,t.setPosition(this.x,this.y,this.debut),r.setPosition(this.x,this.y,this.debut);const n=this;this.timer=setInterval((function(){n.actionPourAnimation()}),25)},nt.prototype.actionPourAnimation=function(){const e=this.doc.compas,t=this.doc.compasLeve;this.fin+=this.pasdeg;const r=Math.abs(this.angfin-this.fin);r>this.distang||!this.doc.animationEnCours?(this.fin=this.angfin,this.updateg(),this.finAction(),clearInterval(this.timer),this.doc.actionSuivante()):(this.distang=r,this.updateg(),e.setPosition(this.x,this.y,this.fin),null!==t&&t.setPosition(this.x,this.y,this.fin))},nt.prototype.finAction=function(){this.doc.compas.setPosition(this.x,this.y,this.fin),null!==this.doc.compasLeve&&this.doc.compasLeve.setPosition(this.x,this.y,this.fin)};const it=st;function st(e,t,r,n,i,s,o,a,l,u){Ze.call(this,e,t,o,a,u,"continu"),this.x=parseFloat(r),this.y=parseFloat(n),this.ray=null===i?10:parseFloat(i),this.ecartAngle=parseFloat(s),this.couleur=o,this.couleurFond=null===l?o:l,this.angle=0,this.objet="gabarit"}st.prototype=new Ze,st.prototype.creationAnimee=function(){return!1},st.prototype.creeg=function(){const e=this.ecartAngle,t=this.ray,r=e>=0?"1":"0",i=Math.abs(e),o=document.createElementNS(n,"g"),a=document.createElementNS(n,"path"),l=new O(Math.cos(e*s)*t,Math.sin(e*s)*t),u="M 0 0 L "+t+" 0 A "+t+" "+t+" 0 "+(i>180?"1":"0")+" "+r+" "+l.x+" "+l.y+" Z";a.setAttribute("d",u);const c=parseFloat(this.opacite/100),p="stroke:"+this.couleur+";stroke-width:"+this.epaisseur+";fill:"+this.couleurFond+";fill-opacity:"+c+";";a.setAttribute("style",p),o.appendChild(a),o.setAttribute("transform","translate("+this.x+","+this.y+") rotate("+this.angle+")"),o.setAttribute("visibility","hidden"),this.g=o},st.prototype.donneRayon=function(e){this.ray=e,this.updateg(),this.setPosition(this.x,this.y,this.angle)},st.prototype.setPosition=function(e,t,r){this.x=e,this.y=t,this.angle=r,this.g.setAttribute("transform","translate("+e+","+t+") rotate("+r+")")},st.prototype.lanceAnimationModificationRayon=function(e,t){this.rayFin=e,this.rayInit=this.ray;const r=e-this.ray;if(this.dist=Math.abs(r),this.dray=Math.sign(r)*Math.abs(t/4),0===this.dist)return;const n=this;this.timer=setInterval((function(){n.actionPourModificationRayon()}),25)},st.prototype.actionPourModificationRayon=function(){const e=this.ray+this.dray,t=Math.abs(e-this.rayInit);t>this.dist||!this.doc.animationEnCours?(this.donneRayon(this.rayFin),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=t,this.donneRayon(e))};const ot=at;function at(e,t,r,n,i,s,o,a,l,u){Q.call(this,e,"axeIEP",u),this.pente=null==t?"horizontal":t,this.largeur=r,this.haut=null==n?0:parseFloat(n),this.gauche=null==i?0:parseFloat(i),this.distanceBord=parseFloat(s),this.xgrad=o,this.xmin=a,this.xmax=l,this.cadre={},this.cadre.gauche=30*this.gauche,this.cadre.haut=30*this.haut,this.width=30*r,this.cadre.droite=this.gauche+this.width,this.cadre.bas=this.haut+this.width}at.prototype=new Q,at.prototype.creeg=function(){let e,t,r,i;this.g=document.createElementNS(n,"g");const s="stroke:black;stroke-width:1;";"horizontal"===this.pente&&this.xmax-this.xmin>this.xgrad?(t=Math.floor((this.xmax-this.xmin)/this.xgrad),r=30*this.distanceBord,i=A(this.xmin,this.xmax,this.xgrad),this.tracer_abscisses(i,this.xgrad,t,r),e=document.createElementNS(n,"line"),e.setAttribute("style",s),e.setAttribute("x1",this.cadre.gauche),e.setAttribute("y1",r),e.setAttribute("x2",this.cadre.droite),e.setAttribute("y2",r),this.g.appendChild(e)):this.xmax-this.xmin>this.xgrad&&(t=Math.floor((this.xmax-this.xmin)/this.xgrad),r=30*Number(this.distanceBord),i=A(this.xmin,this.xmax,this.xgrad),this.tracer_ordonnees(i,this.xgrad,t,r),e=document.createElementNS(n,"line"),e.setAttribute("style",s),e.setAttribute("x1",r),e.setAttribute("y1",this.cadre.bas),e.setAttribute("x2",r),e.setAttribute("y2",this.cadre.haut),this.g.appendChild(e))},at.prototype.tracer_abscisses=function(e,t,r,i){let s,o,a,l;const u="stroke:black;stroke-width:1.5;";for(s=document.createElementNS(n,"line"),s.setAttribute("style",u),s.setAttribute("x1",this.cadre.gauche),s.setAttribute("y1",i),s.setAttribute("x2",this.cadre.droite),s.setAttribute("y2",i),this.g.appendChild(s),l=0;l<=r;l++){s=document.createElementNS(n,"line"),s.setAttribute("style",u),a=this.mettre_x_en_pixels(e+l*t),s.setAttribute("x1",a),s.setAttribute("y1",String(i-5)),s.setAttribute("x2",a),s.setAttribute("y2",String(i+5)),this.g.appendChild(s),o=document.createElementNS(n,"text"),o.setAttribute("x",a),o.setAttribute("y",i+12+5);const r="text-anchor:left;font-size:12px;fill:"+this.couleur+";";o.setAttribute("style",r),o.appendChild(document.createTextNode(String(e+l*t))),this.g.appendChild(o)}},at.prototype.tracer_ordonnees=function(e,t,r,i){let s,o,a;const l="stroke:black;stroke-width:1.5;";for(s=document.createElementNS(n,"line"),s.setAttribute("style",l),s.setAttribute("x1",i),s.setAttribute("y1",this.cadre.haut),s.setAttribute("x2",i),s.setAttribute("y2",this.cadre.bas),this.g.appendChild(s),a=0;a<=r;a++){s=document.createElementNS(n,"line"),s.setAttribute("style",l);const r=this.mettre_y_en_pixels(e+a*t);s.setAttribute("x1",String(i-5)),s.setAttribute("y1",r),s.setAttribute("x2",String(i+5)),s.setAttribute("y2",r),this.g.appendChild(s),o=document.createElementNS(n,"text"),o.setAttribute("x",i+10),o.setAttribute("y",r+2);const u="text-anchor:left;font-size:12px;fill:"+this.couleur+";";o.setAttribute("style",u),o.appendChild(document.createTextNode(String(e+a*t))),this.g.appendChild(o)}},at.prototype.mettre_x_en_pixels=function(e){return y(e,this.xmin,this.xmax,this.cadre.gauche,this.cadre.droite)},at.prototype.mettre_y_en_pixels=function(e){return y(e,this.xmax,this.xmin,this.cadre.haut,this.cadre.bas)};const lt=ut;function ut(e,t,r,n,i,s,o,a,l,u){this.x1=parseFloat(r),this.y1=parseFloat(n),this.x2=parseFloat(i),this.y2=parseFloat(s),Ze.call(this,e,t,o,a,l,u)}ut.prototype=new Ze,ut.prototype.creeg=function(){const e=document.createElementNS(n,"g"),t=document.createElementNS(n,"line");t.setAttribute("x1",this.x1),t.setAttribute("y1",this.y1),t.setAttribute("x2",this.x2),t.setAttribute("y2",this.y2),t.setAttribute("style",this.style),e.appendChild(t),e.setAttribute("visibility","hidden"),this.g=e},ut.prototype.creationAnimee=function(){return!0},ut.prototype.lanceAnimation=function(e){this.vitesse=e/4;const t=new O(this.x1,this.y1,this.x2,this.y2);if(this.dist=t.norme(),p(this.dist))return void this.doc.actionSuivante();this.vect=t.vecteurColineaire(1.8*this.vitesse),this.xfin=this.x2,this.yfin=this.y2,this.x2=this.x1,this.y2=this.y1;const r=this.doc.crayon;r.setPosition(this.x1,this.y1,r.angle);const n=this;this.timer=setInterval((function(){n.actionPourAnimation(n)}),25)},ut.prototype.actionPourAnimation=function(){this.x2+=this.vect.x,this.y2+=this.vect.y;const e=new O(this.x1,this.y1,this.x2,this.y2).norme(),t=this.doc.crayon;e>this.dist||!this.doc.animationEnCours?(this.x2=this.xfin,this.y2=this.yfin,this.finAction(),this.updateg(),clearInterval(this.timer),this.doc.actionSuivante()):(t.translate(this.x2,this.y2),this.updateg())},ut.prototype.finAction=function(){this.doc.crayon.translate(this.x2,this.y2)};const ct=pt;function pt(e,t,r,n,i,s,o,a,l,u){lt.call(this,e,t,r,n,i,s,o,a,l,u)}pt.prototype=new lt,pt.prototype.creeg=function(){if(this.calcule(),this.horsFenetre)this.g=document.createElementNS(n,"g");else{const e=document.createElementNS(n,"line");e.setAttribute("x1",this.xext1),e.setAttribute("y1",this.yext1),e.setAttribute("x2",this.xext2),e.setAttribute("y2",this.yext2),e.setAttribute("style",this.style),this.g=e}this.g.setAttribute("visibility","hidden")},pt.prototype.calcule=function(){const{x1:e,y1:t,x2:r,y2:n}=this;if(e===r&&t===n)return void(this.horsFenetre=!0);this.horsFenetre=!1;const i=this.doc.getWidth(),s=this.doc.getHeight();if(e===r)return this.xext1=e,this.yext1=0,this.xext2=e,this.yext2=s,e<0||e>i?void(this.horsFenetre=!0):(this.xext1=e,this.yext1=0,this.xext2=e,void(this.yext2=s));if(t===n)return this.xext1=0,this.yext1=t,this.xext2=i,this.yext2=t,t<0||t>s?void(this.horsFenetre=!0):(this.xext1=0,this.yext1=t,this.xext2=i,void(this.yext2=t));let o=0;const a=(n-t)/(r-e),l=this.y1+a*(0-e);l>=0&&l<=s&&(o++,this.xext1=0,this.yext1=l);const u=i,c=a*(u-e)+t;if(c>=0&&c<=s){if(o++,1!==o)return this.xext2=u,void(this.yext2=c);this.xext1=u,this.yext1=c}const p=(0-t)/a+e;if(p>0&&p<i){if(o++,1!==o)return this.xext2=p,void(this.yext2=0);this.xext1=p,this.yext1=0}const h=s,d=(h-t)/a+e;d>0&&d<=i?(o++,2===o?(this.xext2=d,this.yext2=h):this.horsFenetre=!0):this.horsFenetre=!0,this.horsFenetre&&(this.xext1=0,this.yext1=l,this.xext2=u,this.yext2=c)};const ht=dt;function dt(e,t,r,n,i,s,o,a,l,u){ct.call(this,e,t,r,n,i,s,o,a,l,u)}dt.prototype=new ct,dt.prototype.calcule=function(){ct.prototype.calcule.call(this);const e=new O(this.x1,this.y1,this.x2,this.y2);if(this.horsFenetre)return;const t=new O(this.x1,this.y1,this.xext1,this.yext1);if(t.presqueNul()){const t=new O(this.x1,this.y1,this.xext2,this.yext2);E(t,e)?(this.xext1=this.x1,this.yext1=this.y1):(this.xext2=this.xext1,this.yext2=this.yext1,this.xext1=this.x1,this.yext1=this.y1)}else E(t,e)?(this.xext2=this.xext1,this.yext2=this.yext1,this.xext1=this.x1,this.yext1=this.y1):(this.xext1=this.x1,this.yext1=this.y1)};const ft=mt;function mt(e,t,r){this.doc=e,this.id=t,this.url=r,this.x=0,this.y=0,this.angle=0,this.objet="image",this.zoomfactor=1}mt.prototype=new Q,mt.prototype.initialisePosition=function(){this.x=0,this.y=0,this.angle=0,this.zoomfactor=1,this.positionne()},mt.prototype.prepareAction=function(){const e=new Image;e.owner=this,this.action=new te(this.doc,this.id,this),this.action.isReady=!1,this.doc.ajouteAction(this.action),e.onload=function(){const e=this.owner;e.width=this.width,e.height=this.height,e.action.isReady=!0},e.src=this.url},mt.prototype.creeg=function(){const e=document.createElementNS(n,"image");e.setAttribute("width",this.width),e.setAttribute("height",this.height),e.setAttributeNS("http://www.w3.org/1999/xlink","href",this.url),e.setAttribute("x",this.x),e.setAttribute("y",this.y),e.setAttribute("visibility","hidden"),this.g=e,this.setPosition(this.x,this.y,this.angle,this.zoomfactor),this.doc.svg.appendChild(e)},mt.prototype.setPosition=function(e,t,r,n){this.x=e,this.y=t,this.angle=r,this.zoomfactor=n,this.g?this.g.setAttribute("transform","scale("+n+") translate("+String(e/n)+","+String(t/n)+") rotate("+r+")"):console.error("Il faut appeler imag.creeg avant imag.setPosition")},mt.prototype.positionne=function(){this.setPosition(this.x,this.y,this.angle,this.zoomfactor)};const gt=yt;function yt(e,t,r,n,i,s,o,a,l,u){Ze.call(this,e,t,o,a,l,u),this.xdeb=r,this.ydeb=n,this.abs=i.split(","),this.ord=s.split(","),this.objet="trait"}yt.prototype=new Ze,yt.prototype.creeg=function(){let e,t;const r=document.createElementNS(n,"polyline");for(e=this.xdeb+" "+this.ydeb,t=0;t<this.abs.length;t++)e+=" "+this.abs[t]+" "+this.ord[t];r.setAttribute("points",e),r.setAttribute("style",this.style+"fill:none;"),r.setAttribute("visibility","hidden"),this.g=r},yt.prototype.creationAnimee=function(){return!0},yt.prototype.lanceAnimation=function(){this.sauveabs=this.abs,this.sauveord=this.ord,this.abs=[],this.ord=[],this.ind=-1;const e=this;this.timer=setInterval((function(){e.actionPourAnimation()}),25)},yt.prototype.actionPourAnimation=function(){this.ind++;const e=this.doc.crayon;if(this.ind>=this.sauveabs.length)this.abs=this.sauveabs,this.ord=this.sauveord,this.updateg(),clearInterval(this.timer),this.finAction(),this.doc.actionSuivante();else{const t=this.sauveabs[this.ind],r=this.sauveord[this.ind];this.abs.push(t),this.ord.push(r),this.updateg(),e.setPosition(parseFloat(t),parseFloat(r),e.angle),this.updateg()}},yt.prototype.finAction=function(){const e=this.abs.length;this.doc.crayon.translate(parseFloat(this.abs[e-1]),parseFloat(this.ord[e-1]))};const vt=bt;function bt(e,t,r,n,i,s,o){this.x=parseFloat(r),this.y=parseFloat(n),this.motif=o,Ze.call(this,e,t,i,s,100),this.objet="longueur"}bt.prototype=new Ze,bt.prototype.creeg=function(){let e,t,r;const i=2.5;switch(this.motif){case"/":e=document.createElementNS(n,"line"),e.setAttribute("x1",5),e.setAttribute("y1",-5),e.setAttribute("x2",-5),e.setAttribute("y2",5),e.setAttribute("style",this.style);break;case"\\":e=document.createElementNS(n,"line"),e.setAttribute("x1",-5),e.setAttribute("y1",-5),e.setAttribute("x2",5),e.setAttribute("y2",5),e.setAttribute("style",this.style);break;case"//":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r+=2)t=document.createElementNS(n,"line"),t.setAttribute("x1",r*i+5),t.setAttribute("y1",-5),t.setAttribute("x2",r*i-5),t.setAttribute("y2",5),t.setAttribute("style",this.style),e.appendChild(t);break;case"///":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r++)t=document.createElementNS(n,"line"),t.setAttribute("x1",5*r+5),t.setAttribute("y1",-5),t.setAttribute("x2",5*r-5),t.setAttribute("y2",5),t.setAttribute("style",this.style),e.appendChild(t);break;case"\\\\":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r+=2)t=document.createElementNS(n,"line"),t.setAttribute("x1",r*i-5),t.setAttribute("y1",-5),t.setAttribute("x2",r*i+5),t.setAttribute("y2",5),t.setAttribute("style",this.style),e.appendChild(t);break;case"\\\\\\":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r++)t=document.createElementNS(n,"line"),t.setAttribute("x1",5*r-5),t.setAttribute("y1",-5),t.setAttribute("x2",5*r+5),t.setAttribute("y2",5),t.setAttribute("style",this.style),e.appendChild(t);break;case"X":e=document.createElementNS(n,"g"),t=document.createElementNS(n,"line"),t.setAttribute("x1",-5),t.setAttribute("y1",-5),t.setAttribute("x2",5),t.setAttribute("y2",5),t.setAttribute("style",this.style),e.appendChild(t),t=document.createElementNS(n,"line"),t.setAttribute("x1",5),t.setAttribute("y1",-5),t.setAttribute("x2",-5),t.setAttribute("y2",5),t.setAttribute("style",this.style),e.appendChild(t);break;case"O":e=document.createElementNS(n,"circle"),e.setAttribute("cx",0),e.setAttribute("cy",0),e.setAttribute("r",5),e.setAttribute("style",this.style+"fill:none;");break;default:e=document.createElementNS(n,"g")}this.g=e},bt.prototype.positionne=function(){this.g.setAttribute("transform","translate("+this.x+","+this.y+")")},bt.prototype.translate=function(e,t){this.x=e,this.y=t,this.positionne()};const xt=wt;function wt(e,t,r,n,i,s,o,a,l,u,c){lt.call(this,e,t,r,n,i,s,o,a,l,u),this.stylefleche=c}wt.prototype=new lt,wt.prototype.creeg=function(){if(lt.prototype.creeg.call(this),"vecteur"===this.stylefleche){const e=12,t=this.x1,r=this.x2,i=this.y1,s=this.y2,o=new O(r,s,t,i).vecteurColineaire(e),u=new O(o.x*a-o.y*l,o.x*l+o.y*a),c=new O(o.x*a+o.y*l,-o.x*l+o.y*a),p=String(r+u.x)+" "+String(s+u.y)+","+r+" "+s+","+String(r+c.x)+" "+String(s+c.y),h=document.createElementNS(n,"polyline");h.setAttribute("points",p);const d="stroke:"+this.couleur+";stroke-width:"+this.epaisseur+";stroke-opacity:"+this.opacite+";fill:none";h.setAttribute("style",d),this.g.appendChild(h)}};const _t=Et;function Et(e,t,r,n,i,s,o){this.idSeg=r,this.motif=s,this.rayon=null!==o?o:"5",Ze.call(this,e,t,n,i,100),this.objet="marque"}Et.prototype=new Ze,Et.prototype.creeg=function(){let e,t,r;if(this.doc.getElement(this.idSeg,"trait")instanceof xt){const i=this.rayon,s=5,o=s/2,a=5;switch(this.motif){case"/":e=document.createElementNS(n,"line"),e.setAttribute("x1",i),e.setAttribute("y1",-i),e.setAttribute("x2",-i),e.setAttribute("y2",i),e.setAttribute("style",this.style);break;case"\\":e=document.createElementNS(n,"line"),e.setAttribute("x1",-i),e.setAttribute("y1",-i),e.setAttribute("x2",i),e.setAttribute("y2",i),e.setAttribute("style",this.style);break;case"//":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r+=2)t=document.createElementNS(n,"line"),t.setAttribute("x1",r*o+i),t.setAttribute("y1",-i),t.setAttribute("x2",r*o-i),t.setAttribute("y2",i),t.setAttribute("style",this.style),e.appendChild(t);break;case"///":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r++)t=document.createElementNS(n,"line"),t.setAttribute("x1",r*s+i),t.setAttribute("y1",-i),t.setAttribute("x2",r*s-i),t.setAttribute("y2",i),t.setAttribute("style",this.style),e.appendChild(t);break;case"\\\\":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r+=2)t=document.createElementNS(n,"line"),t.setAttribute("x1",r*o-i),t.setAttribute("y1",-i),t.setAttribute("x2",r*o+i),t.setAttribute("y2",i),t.setAttribute("style",this.style),e.appendChild(t);break;case"\\\\\\":for(e=document.createElementNS(n,"g"),r=-1;r<=1;r++)t=document.createElementNS(n,"line"),t.setAttribute("x1",r*s-i),t.setAttribute("y1",-i),t.setAttribute("x2",r*s+i),t.setAttribute("y2",i),t.setAttribute("style",this.style),e.appendChild(t);break;case"X":e=document.createElementNS(n,"g"),t=document.createElementNS(n,"line"),t.setAttribute("x1",-i),t.setAttribute("y1",-i),t.setAttribute("x2",i),t.setAttribute("y2",i),t.setAttribute("style",this.style),e.appendChild(t),t=document.createElementNS(n,"line"),t.setAttribute("x1",i),t.setAttribute("y1",-i),t.setAttribute("x2",-i),t.setAttribute("y2",i),t.setAttribute("style",this.style),e.appendChild(t);break;case"O":e=document.createElementNS(n,"circle"),e.setAttribute("cx",0),e.setAttribute("cy",0),e.setAttribute("r",a),e.setAttribute("style",this.style+"fill:none;");break;default:e=document.createElementNS(n,"g")}}else console.log("Maque de segment non associée à un objet segment"),e=document.createElementNS(n,"g");this.g=e},Et.prototype.positionne=function(){const e=this.doc.getElement(this.idSeg,"trait"),t=new O(e.x1,e.y1,e.x2,e.y2),r=(e.x1+e.x2)/2,n=(e.y1+e.y2)/2,i=-t.angle();this.g.setAttribute("transform","translate("+r+","+n+") rotate("+i+") ")},Et.prototype.translate=function(e,t){this.x=e,this.y=t,this.positionne()};var St=r(19261);const At=Nt;function Nt(e,t,r,n,i,s){Q.call(this,e,t,s),this.dx=null==r?2:parseFloat(r),this.dy=null==n?4:parseFloat(n),this.nom=v(b(i)),this.taille=20,this.point=this.doc.getElement(this.id,"point"),this.objet="point",this.nom=this.nom.replace(/\*/g,"×"),k(i)?(this.nom="$"+this.traiteMaths(this.nom)+"$",this.estLatex=!0):this.estLatex=!1}Nt.prototype=new Q,Nt.prototype.creeg=function(){let e,t,r,i,s,o,a,l,c,p,h,d,g,y,v,b,x,w,_=0;const E="<",S="£e(",A="£i(",k=document.createElementNS(n,"g"),M=T(this),C=M+2;let O=0;const I=.4*M;if(0!==this.nom.length){if(o=document.createElementNS(n,"text"),o.setAttribute("pointer-events","none"),o.setAttribute("x",0),o.setAttribute("y",0),s="text-anchor:left;font-size:"+M+"px;fill:"+this.couleur+";",o.setAttribute("style",s),i=this.nom.replace(/ /g," "),-1===this.nom.indexOf(E)&&-1===this.nom.indexOf(S)&&-1===this.nom.indexOf(A)&&-1===this.nom.indexOf("<br>"))o.appendChild(document.createTextNode(i));else for(v=i.split(/<br>/gi),y=-C,b=0;b<v.length;b++)for(x=!0,r=v[b];0!==r.length;){if(e=r.indexOf(E),l=r.indexOf(S),c=r.indexOf(A),x&&(y+=C+O),-1!==l&&(y+=I),-1===e&&-1===l&&-1===c){t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.setAttribute("dy",_),x&&(t.setAttribute("x",0),t.setAttribute("y",y),x=!1),_=0,t.appendChild(document.createTextNode(r)),o.appendChild(t);break}for(;-1!==r.indexOf(E)||-1!==r.indexOf(S)||-1!==r.indexOf(A);)if(e=r.indexOf(E),l=r.indexOf(S),c=r.indexOf(A),p=-1===e?-1===l?c:-1===c?l:Math.min(c,l):-1===l?-1===c?e:Math.min(e,c):-1===c?Math.min(e,l):Math.min(e,c,l),p>0)t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.setAttribute("dy",_),x&&(t.setAttribute("x",0),t.setAttribute("y",y),x=!1),_=0,t.appendChild(document.createTextNode(r.substring(0,p))),o.appendChild(t),r=r.substring(p);else if(0===e){const e=new u(!1,!1,!1,this.couleur,"",M);a=f(r),N(-1===a?r:r.substring(0,a),e,o,x,y),x=!1,r=-1!==a?r.substring(a):"",_=0}else h=p===l,w=m(r),t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.setAttribute("dy",_+"px"),x&&(t.setAttribute("x",0),t.setAttribute("y",y),x=!1),w.erreur?t.appendChild(document.createTextNode(r)):(t.appendChild(document.createTextNode(w.operande)),o.appendChild(t),t=document.createElementNS(n,"tspan"),t.setAttribute("pointer-events","none"),t.appendChild(document.createTextNode(w.exposant)),_=I,h?_=-_:O=_,t.setAttribute("dy",_+"px"),d=.6*M,g="font-size:"+d+"px;",t.setAttribute("style",g),o.appendChild(t),_=-_),r=w.texte}k.appendChild(o),this.g=k}k.setAttribute("visibility","hidden")},Nt.prototype.creegLatex=function(){try{const e=document.createElementNS(n,"g"),t=this.html.firstChild,r=t.cloneNode(!0);e.appendChild(r);const i=parseFloat(t.getAttribute("width"))*this.ex,s=parseFloat(t.getAttribute("height"))*this.ex,o=r.style["vertical-align"],a=(o&&parseFloat(o)||1)*this.ex;r.setAttribute("width",i+"px"),r.setAttribute("height",s+"px"),(0,St.setStyles)(r,"vertical-align",a+"px"),r.setAttribute("x","0");const l=T(this);r.setAttribute("y",String(-l)),r.setAttribute("visibility","hidden"),this.g=e}catch(e){console.error(e,"on remplace par un <g> vide"),this.g=document.createElementNS(n,"g")}},Nt.prototype.positionne=function(){null===this.point&&(this.point=this.doc.getElement(this.id,"point"));const e=this.point.x,t=this.point.y,r=T(this);this.g.setAttribute("transform","translate("+String(e+this.dx)+","+String(t+this.dy+r)+")")},Nt.prototype.traiteMaths=function(e){return C(e,!0)};const kt=Mt;function Mt(e,t,r,n,i,s){this.x=parseFloat(r),this.y=parseFloat(n),this.xinit=this.x,this.yinit=this.y,this.xcons=this.x,this.ycons=this.y,Ze.call(this,e,t,i,s),this.style+="stroke-linecap:round;",this.nom=null,this.objet="point"}Mt.prototype=new Ze,Mt.prototype.initialisePosition=function(){this.x=this.xinit,this.y=this.yinit,this.positionne()},Mt.prototype.creeg=function(){const e=document.createElementNS(n,"g");let t;t=document.createElementNS(n,"line"),t.setAttribute("x1",-5),t.setAttribute("y1",5),t.setAttribute("x2",5),t.setAttribute("y2",-5),t.setAttribute("style",this.style),e.appendChild(t),t=document.createElementNS(n,"line"),t.setAttribute("x1",-5),t.setAttribute("y1",-5),t.setAttribute("x2",5),t.setAttribute("y2",5),t.setAttribute("style",this.style),e.appendChild(t),this.g=e},Mt.prototype.positionne=function(){this.g.setAttribute("transform","translate("+this.x+","+this.y+")")},Mt.prototype.translate=function(e,t){this.x=e,this.y=t,this.positionne(),null!==this.nom&&this.nom.positionne()},Mt.prototype.updateg=function(){this.setPosition(this.x,this.y)},Mt.prototype.montre=function(e){Q.prototype.montre.call(this,e),null!==this.nom&&this.nom.g&&this.nom.montre(e)};const Ct=Tt;function Tt(e,t,r,n,i,s,o,a){Q.call(this,e,t,i),this.abs=r.split(","),this.ord=n.split(","),this.sauveabs=this.abs,this.sauveord=this.ord,this.epaisseur=s,this.opacite=null==a?"60":a;const l=parseFloat(this.opacite/100);this.couleurFond=null==o?this.couleur:o,this.style="stroke:"+i+";stroke-width:"+s+";fill:"+this.couleurFond+";",this.style+="fill-opacity:"+l+";",this.objet="trait"}Tt.prototype=new Q,Tt.prototype.creeg=function(){let e,t;const r=document.createElementNS(n,"polygon");for(e="",t=0;t<this.abs.length;t++)e+=" "+this.abs[t]+" "+this.ord[t];r.setAttribute("points",e),r.setAttribute("style",this.style),r.setAttribute("visibility","hidden"),this.g=r},Tt.prototype.creationAnimee=function(){return!0},Tt.prototype.lanceAnimation=function(e){this.pix=parseFloat(e/2),this.abs=[],this.abs[0]=this.sauveabs[0],this.ord=[],this.ord[0]=this.sauveord[0],this.ind=0,this.n=0;const t=this.doc.crayon,r=new O(parseFloat(this.sauveabs[0]),parseFloat(this.sauveord[0]),parseFloat(this.sauveabs[1]),parseFloat(this.sauveord[1]));this.longcote=r.norme(),this.vect=r.vecteurColineaire(this.pix),t.setPosition(parseFloat(this.abs[0]),parseFloat(this.ord[0]),t.angle);const n=this;this.timer=setInterval((function(){n.actionPourAnimation()}),25)},Tt.prototype.actionPourAnimation=function(){const e=this.doc.crayon;let t=this.ind;const r=parseFloat(this.abs[t]),n=parseFloat(this.ord[t]);if(this.n++,this.doc.animationEnCours)if(this.n*this.pix<=this.longcote){const i=r+this.n*this.vect.x,s=n+this.n*this.vect.y;this.abs[t+1]=String(i),this.ord[t+1]=String(s),e.translate(i,s),this.updateg()}else if(this.ind++,t++,t===this.sauveabs.length-1)clearInterval(this.timer),this.finAction(),this.doc.actionSuivante();else{this.abs[t]=this.sauveabs[t],this.ord[t]=this.sauveord[t],e.translate(parseFloat(this.abs[t]),parseFloat(this.ord[t]));const r=new O(parseFloat(this.sauveabs[t]),parseFloat(this.sauveord[t]),parseFloat(this.sauveabs[t+1]),parseFloat(this.sauveord[t+1]));this.longcote=r.norme(),this.vect=r.vecteurColineaire(this.pix),this.n=0}else clearInterval(this.timer),this.finAction(),this.doc.actionSuivante()},Tt.prototype.finAction=function(){this.abs=this.sauveabs,this.ord=this.sauveord;const e=this.abs.length;this.updateg(),this.doc.crayon.translate(parseFloat(this.abs[e-1]),parseFloat(this.ord[e-1]))};const Ot=It;function It(e,t,r,n,i,s,o){Q.call(this,e,"quadrillageIEP",o),this.hauteur=parseFloat(r),this.largeur=parseFloat(n),this.haut=null==i?0:parseFloat(i),this.gauche=null==s?0:parseFloat(s),this.type=t,this.cadre={},this.cadre.gauche=30*this.gauche,this.cadre.haut=30*this.haut,this.cadre.droite=this.cadre.gauche+30*this.largeur,this.cadre.bas=this.cadre.haut+30*this.hauteur,this.objet="quadrillage"}It.prototype=new Q,It.prototype.creeg=function(){const e=this.cadre.gauche,t=this.cadre.droite,r=this.cadre.haut,i=this.cadre.bas,s=this.couleur;this.g=document.createElementNS(n,"g");const o=this.doc.svg.getElementById("quadrillageIEP");switch(null!=o&&this.doc.svg.removeChild(o),this.type){case"seyes":this.tracer_grille(s,24,6,e,r,t,i,!1,1),this.tracer_grille(s,24,24,e,r,t,i,!1,1);break;case"millimetre":this.tracer_grille(s,3,3,e,r,t,i,!1,.6),this.tracer_grille(s,30,30,e,r,t,i,!1,.8),this.tracer_grille(s,150,150,e,r,t,i,!1,1);break;case"10x10":case"10x":this.tracer_grille(s,30,30,e,r,t,i,!1,1);break;default:this.tracer_grille(s,15,15,e,r,t,i,!1,1)}},It.prototype.tracer_grille=function(e,t,r,i,s,o,a,l,u){let c,p;const h="stroke:"+e+";stroke-width:0.5;stroke-opacity:"+u+";";l&&(this.style+="stroke-dasharray:2 2;");let d=Math.ceil(Math.abs(o-i)/t);for(p=0;p<d;p++)c=document.createElementNS(n,"line"),c.setAttribute("style",h),c.setAttribute("x1",i+p*t),c.setAttribute("y1",s),c.setAttribute("x2",i+p*t),c.setAttribute("y2",a),c.setAttribute("style",h),this.g.appendChild(c);for(d=Math.ceil(Math.abs(a-s)/r),p=0;p<d;p++)c=document.createElementNS(n,"line"),c.setAttribute("style",h),c.setAttribute("x1",i),c.setAttribute("y1",s+p*r),c.setAttribute("x2",o),c.setAttribute("y2",s+p*r),c.setAttribute("style",h),this.g.appendChild(c)};const Pt=Dt;function Dt(e,t,r,n,i,s,o,a,l,u,c,p,h,d,f){Q.call(this,e,"repereIEP",p),this.hauteur=t,this.largeur=r,this.haut=null==n?0:parseFloat(n),this.gauche=null==i?0:parseFloat(i),this.xgrad=parseFloat(s),this.ygrad=parseFloat(o),this.xmin=parseFloat(a),this.xmax=parseFloat(l),this.ymin=parseFloat(u),this.ymax=parseFloat(c),this.grille=null==h?"visible":h,this.axes=null==d?"visible":d,this.etiquettes=null==f?"visible":f,this.cadre={},this.cadre.gauche=30*this.gauche,this.cadre.haut=30*this.haut,this.cadre.droite=this.cadre.gauche+30*this.largeur,this.cadre.bas=this.cadre.haut+30*this.hauteur}Dt.prototype=new Q,Dt.prototype.mettre_x_en_pixels=function(e){return y(e,this.xmin,this.xmax,this.cadre.gauche,this.cadre.droite)},Dt.prototype.mettre_y_en_pixels=function(e){return y(e,this.ymax,this.ymin,this.cadre.haut,this.cadre.bas)},Dt.prototype.tracer_abscisses=function(e,t,r,i,s,o){let a,l,u,c;const p="stroke:black;stroke-width:0.5;";for("invisible"===this.grille&&"invisible"!==this.axes&&(a=document.createElementNS(n,"line"),a.setAttribute("style",p),a.setAttribute("x1",this.cadre.gauche),a.setAttribute("y1",i),a.setAttribute("x2",this.cadre.droite),a.setAttribute("y2",i),this.g.appendChild(a)),c=0;c<=r;c++)if(a=document.createElementNS(n,"line"),a.setAttribute("style",p),u=this.mettre_x_en_pixels(e+c*t),"invisible"===this.grille?"invisible"!==this.axes&&(a.setAttribute("x1",u),a.setAttribute("y1",String(i-5)),a.setAttribute("x2",u),a.setAttribute("y2",String(i+5)),this.g.appendChild(a)):(a.setAttribute("x1",u),a.setAttribute("y1",s),a.setAttribute("x2",u),a.setAttribute("y2",o),this.g.appendChild(a)),"invisible"!==this.etiquettes&&"invisible"!==this.axes){l=document.createElementNS(n,"text"),l.setAttribute("x",u+2),l.setAttribute("y",i+12);const r="text-anchor:left;font-size:12px;fill:"+this.couleur+";";l.setAttribute("style",r),l.appendChild(document.createTextNode(String(e+c*t))),this.g.appendChild(l)}},Dt.prototype.tracer_ordonnees=function(e,t,r,i,s,o){let a,l,u,c;const p="stroke:black;stroke-width:0.5;";for("invisible"===this.grille&&"invisible"!==this.axes&&(a=document.createElementNS(n,"line"),a.setAttribute("style",p),a.setAttribute("x1",i),a.setAttribute("y1",this.cadre.haut),a.setAttribute("x2",i),a.setAttribute("y2",this.cadre.bas),this.g.appendChild(a)),c=0;c<=r;c++)if(a=document.createElementNS(n,"line"),a.setAttribute("style",p),u=this.mettre_y_en_pixels(e+c*t),"invisible"===this.grille?"invisible"!==this.axes&&(a.setAttribute("x1",String(i-5)),a.setAttribute("y1",u),a.setAttribute("x2",String(i+5)),a.setAttribute("y2",u),this.g.appendChild(a)):(a.setAttribute("x1",s),a.setAttribute("y1",u),a.setAttribute("x2",o),a.setAttribute("y2",u),this.g.appendChild(a)),"invisible"!==this.etiquettes&&"invisible"!==this.axes){l=document.createElementNS(n,"text"),l.setAttribute("x",i+2),l.setAttribute("y",u+12);const r="text-anchor:left;font-size:12px;fill:"+this.couleur+";";l.setAttribute("style",r),l.appendChild(document.createTextNode(String(e+c*t))),this.g.appendChild(l)}},Dt.prototype.creeg=function(){const e=this.cadre.droite-this.cadre.gauche,t=this.cadre.bas-this.cadre.haut;this.g=document.createElementNS(n,"g");const r=document.createElementNS(n,"defs"),i=document.createElementNS(n,"clipPath");i.setAttribute("id","clipRepere");const s="stroke:"+this.couleur+";stroke-width:1;fill:none;",o=document.createElementNS(n,"rect");if(o.setAttribute("style",s),o.setAttribute("x",this.cadre.gauche),o.setAttribute("y",this.cadre.haut),o.setAttribute("width",e),o.setAttribute("height",t),i.appendChild(o),r.appendChild(i),this.g.appendChild(r),this.g.setAttribute("style","clip-path:url(#clipRepere)"),this.xmax-this.xmin>this.xgrad){const e=Math.floor((this.xmax-this.xmin)/this.xgrad);let t;t=this.ymax*this.ymin<0?this.mettre_y_en_pixels(0):this.ymax<0?this.cadre.haut:this.cadre.bas;const r=A(this.xmin,this.xmax,this.xgrad);this.tracer_abscisses(r,this.xgrad,e,t,this.cadre.haut,this.cadre.bas)}if(this.ymax-this.ymin>this.ygrad){const e=Math.floor((this.ymax-this.ymin)/this.ygrad);let t;t=this.xmax*this.xmin<0?this.mettre_x_en_pixels(0):this.xmax<0?this.cadre.droite:this.cadre.gauche;const r=A(this.ymin,this.ymax,this.ygrad);this.tracer_ordonnees(r,this.ygrad,e,t,this.cadre.gauche,this.cadre.droite)}const a=document.createElementNS(n,"rect");a.setAttribute("style",s),a.setAttribute("x",this.cadre.gauche),a.setAttribute("y",this.cadre.haut),a.setAttribute("width",e),a.setAttribute("height",t),this.g.appendChild(a),this.g.setAttribute("visibility","hidden")};const Rt=ir,Lt=["compas","equerre","rapporteur","regle","requerre","crayon"],qt=["Reset","PrevStep","Pause","Play","Restart","NextStep","GotoEnd","XML","Repeat"];function $t(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");const a=document.createElementNS(n,"polygon");return a.setAttribute("points","-5,8 8,0 -5,-8"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function Bt(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");let a=document.createElementNS(n,"rect");return a.setAttribute("x",-6),a.setAttribute("y",-7),a.setAttribute("width",3),a.setAttribute("height",14),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),a=document.createElementNS(n,"rect"),a.setAttribute("x",2),a.setAttribute("y",-7),a.setAttribute("width",3),a.setAttribute("height",14),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function zt(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");const a=document.createElementNS(n,"rect");a.setAttribute("x",5),a.setAttribute("y",-6),a.setAttribute("width",3),a.setAttribute("height",12),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a);const l=document.createElementNS(n,"polygon");return l.setAttribute("points","-7,6 2,0 -7,-6"),l.setAttribute("style","stroke:white;fill:white;"),l.setAttribute("transform","translate(16,16)"),i.appendChild(l),i}function Ft(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");const a=document.createElementNS(n,"rect");a.setAttribute("x",-7),a.setAttribute("y",-6),a.setAttribute("width",3),a.setAttribute("height",12),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a);const l=document.createElementNS(n,"polygon");return l.setAttribute("points","7,6 -2,0 7,-6"),l.setAttribute("style","stroke:white;fill:white;"),l.setAttribute("transform","translate(16,16)"),i.appendChild(l),i}function Ut(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");let a=document.createElementNS(n,"polygon");return a.setAttribute("points","-6,7 1,0 -6,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),a=document.createElementNS(n,"polygon"),a.setAttribute("points","3,7 10,0 3,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function jt(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");let a=document.createElementNS(n,"polygon");return a.setAttribute("points","6,7 -1,0 6,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),a=document.createElementNS(n,"polygon"),a.setAttribute("points","-3,7 -10,0 -3,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function Gt(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");const a=document.createElementNS(n,"path");return a.setAttribute("d","M 0 -8 A 8 8 -90 1 1 -8 0"),a.setAttribute("style","stroke:white;stroke-width:3;fill:none;"),a.setAttribute("marker-end","url(#markerarrow"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function Vt(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");const a=document.createElementNS(n,"path");return a.setAttribute("d","M 0 -8 A 8 8 -90 1 1 -1 -8"),a.setAttribute("style","stroke:white;stroke-width:3;fill:none;"),a.setAttribute("marker-end","url(#markerarrow"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function Ht(e,t,r){const i=document.createElementNS(n,"svg");i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(n,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===r?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+r+"); filter:url(#"+o+");");const a=document.createElementNS(n,"text");return a.setAttribute("pointer-events","none"),a.appendChild(document.createTextNode("XML")),a.setAttribute("x",16),a.setAttribute("y",21),a.setAttribute("style","font-family:Arial;font-size:9pt;fill:white;text-anchor:middle"),i.appendChild(a),i}function Wt(e){return e.getAttribute("id")}function Yt(e){return e.getAttribute("abscisse")}function Xt(e){const t=e.getAttribute("ordonnee");return null===t?e.getAttribute("ordonnée"):t}function Zt(e){const t=e.getAttribute("couleur");return t?_(t):"black"}function Qt(e){const t=e.getAttribute("couleur_cadre");return t?_(t):null}function Kt(e){const t=e.getAttribute("couleur_fond");return t?_(t):null}function Jt(e){const t=e.getAttribute("epaisseur");return null===t||0===parseInt(t)?"1":t}function er(e){const t=e.getAttribute("opacite");return null===t?"100":t}function tr(e){const t=e.getAttribute("opacite");return null===t?"50":t}function rr(e){const t=e.getAttribute("pointille");return null==t?"continu":t}function nr(e){const t=e.getAttribute("style");return null==t?"normal":t}function ir(e,t,r){this.svg=e,"boolean"==typeof r?(this.autoStart=r,r={}):("object"!=typeof r&&(r={}),this.autoStart=Boolean(r.autoStart)),this.debug=Boolean(r.debug),this.windowxml=null;let n=t;-1===n.search(/<?xml/gi)&&(n='<?xml version="1.0" encoding="UTF-8"?>'+n),n=n.replace(/<action[_]\d*/gi,"<action"),n=n.replace(/<!--.*-->/g,""),n=n.replace(/(="[^"]*")([^ ])/g,"$1 $2").replace(/--/g,""),n=n.replace(/<</g,"<").replace(/>>/g,">"),n=n.replace(/<action(\w)/gi,"<action $1"),n=n.replace(/<commentaire\s*texte\s*=/gi,"<commentaire texteCommentaire ="),n=function(e){let t="";const r=["objet","mouvement","vitesse","tempo","abscisse","ordonnee","id","couleur","pointille","echelle","angle","cible","texte","ecrire","rotation","translation","epaisseur","opacite","masquer","montrer","crayon","equerre","regle","compas","reglequerre","sens","hauteur","largeur","haut","gauche","Xmin","Ymin","Xmax","yMax","Xgrad","Ygrad","image","police","taille","ordonnee_bas_droite","abscisse_bas_droite","ordonnee_haut_gauche","abscisse_haut_gauche"];return e.split(/<action/gi).forEach(((e,n)=>{r.forEach((t=>{const r=new RegExp(" "+t+'[^\\w ]*= *"[\\w]*"',"i"),n=e.search(r);-1!==n&&-1!==e.substring(n+1).search(r)&&(e=e.replace(r,""))})),t+=0===n?e:"<action"+e})),t}(n),this.codexml=n;const i=/<\s*INSTRUMENPOCHE[^>]*>(.*)<\s*\/INSTRUMENPOCHE/is.exec(n);if(!i)throw Error("script xml invalide");this.chdoc="<INSTRUMENPOCHE>"+i[1]+"</INSTRUMENPOCHE>",this.actions=[],this.elements=[],this.compasRetourne=!1,this.compasLeve=null,this.compas=new R(this),this.equerre=new q(this),this.rapporteur=new B(this),this.regle=new F(this),this.requerre=new j(this),this.crayon=new V(this),this.xmldoc=function(e){let t,r;return window.DOMParser?(t=new DOMParser,r=t.parseFromString(e,"text/xml")):window.ActiveXObject?(r=new ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(e)):console.error(Error("Votre navigateur ne peut pas analyser du XML, impossible d’utiliser instrumenpoche")),r}(this.chdoc),this.tabact=this.xmldoc.getElementsByTagName("action"),this.started=!1,this.animationEnCours=!0;const s={x:0,y:0,width:800,height:600},o=this.xmldoc.getElementsByTagName("viewBox");if(o&&o.length){o.length>1&&console.error(Error("Il y a plusieurs tags viewBox dans le script, on prend le premier"),o);const e=o[0];Object.keys(s).forEach((t=>{const r=Number(e.getAttribute(t));Number.isFinite(r)&&(t.length<2||r>0)&&(s[t]=r)}))}if(window.innerHeight>.6*s.height&&s.width/s.height<window.innerWidth/window.innerHeight)try{e.parentNode.style.width=window.innerHeight/s.height*s.width+"px"}catch(l){console.error(l)}try{e.parentNode.style.minWidth=s.width/2+"px",e.parentNode.style.minHeight=s.height/2+"px"}catch(l){console.error(l)}this.initialViewBox=s,e.setAttribute("viewBox",`${s.x} ${s.y} ${s.width} ${s.height}`),e.setAttribute("preserveAspectRatio","xMinYMin meet"),this.indiceActionEnCours=0,this.creeActions();const a=this;e.addEventListener("mousemove",(function(e){a.mousemoveListenerSvg(e,e.clientX,e.clientY)}),!1),e.addEventListener("mouseup",(function(){a.mouseupListener()}),!1),e.addEventListener("mouseleave",(function(){a.mouseleaveListener()}),!1),e.addEventListener("touchmove",(function(e){a.mousemoveListenerSvg(e,e.touches[0].pageX,e.touches[0].pageY)}),!1),e.addEventListener("touchend",(function(){a.mouseupListener()}),!1),e.addEventListener("touchcancel",(function(){a.mouseupListener()}),!1),e.addEventListener("touchleave",(function(){a.mouseleaveListener()}),!1),this.debug&&console.log("iepDoc instancié :",this)}ir.prototype.setViewBox=function(e){if("object"!=typeof e||Object.keys(this.initialViewBox).some((t=>!Number.isFinite(e[t]))))throw TypeError("paramètre invalide (il faut passer un objet { x: number, y: number, width: number, height: number })");const{x:t,y:r,width:n,height:i}=e;if(n<10||i<10)return console.error(Error("width et height doivent être supérieur à 10"));const s=this.initialViewBox.width/n;this.svg.setAttribute("viewBox",`${t} ${r} ${n} ${i}`),this.barreIcones.setAttribute("transform",`translate(${t+this.xbarre/s}, ${r+this.ybarre/s}) scale(${1/s})`)},ir.prototype.zoom=function(e,t,r){if("number"!=typeof e||e<1e-6||e>1e6)throw Error(`zoomFactor invalide : ${typeof e} ${e}`);if(1===e)return this.setViewBox(this.initialViewBox);let{x:n,y:i,width:s,height:o}=this.getViewBox();Number.isFinite(t)||(t=n+s/2),Number.isFinite(r)||(r=i+o/2),s=Math.round(s/e),o=Math.round(o/e),n=t-s/2,i=r-o/2,this.setViewBox({x:n,y:i,width:s,height:o})},ir.prototype.isReadyAll=function(){if(this.debug){const e=this.actions.filter((e=>!e.isReady));e.length?console.log(`${e.length} actions pas encore prêtes (sur ${this.actions.length})`):console.log(`Les ${this.actions.length} actions sont prêtes`)}return this.actions.every((e=>e.isReady))},ir.prototype.whenReady=function(e,t=30){const r=()=>this.isReadyAll()?e():Date.now()-n<1e3*t?setTimeout(r,100):void e(Error(`Après ${t}s d’attente l’animation n’est pas prête, échec du chargement…`)),n=Date.now();r()},ir.prototype.getReadyPromise=function(e=30){return this.isReadyAll()?Promise.resolve():new Promise(((t,r)=>{this.whenReady((e=>{e?r(e):t(this)}),e)}))},ir.prototype.getWidth=function(){return this.getViewBox().width},ir.prototype.getHeight=function(){return this.getViewBox().height},ir.prototype.getViewBox=function(){try{const e=this.svg.getAttribute("viewBox");if(e){const t=e.split(" ").map(Number).filter((e=>!Number.isNaN(e)));if(4===t.length){const[e,r,n,i]=t;if(n>0&&i>0)return{x:e,y:r,width:n,height:i}}}console.error(Error("viewBox invalide"),e)}catch(e){console.error(e)}return this.svg.setAttribute("viewBox","0 0 800 600"),{x:0,y:0,width:800,height:600}},ir.prototype.goFast=function(e=100,t){const r=this,n=()=>{r.nextStep(),r.indiceActionEnCours<r.actions.length?setTimeout((()=>n()),e):t&&t()};this.getReadyPromise().then((()=>r.animationEnCours?(r.pause(),(e=>new Promise((t=>{setTimeout((()=>t()),e)})))(500)):Promise.resolve())).then((()=>{r.reset(),n()})).catch((e=>{console.error(e),alert(e.message)}))},ir.prototype.creeElementsGraphiques=function(){this.actions.forEach((e=>e.creegElement()))},ir.prototype.initialiseOutils=function(){Lt.forEach((e=>{this[e].initialisePosition(),this[e].montre(!1)})),this.compas.leve=!1},ir.prototype.recreeOutils=function(){Lt.forEach((e=>{this[e].updateg(),this[e].montre(!1)})),this.compasLeve=null},ir.prototype.init=function(){this.started=!0,this.creeElementsGraphiques(),this.recreeOutils(),this.creeIcones(),this.autoStart?(this.montreIcones(["Pause"]),this.play()):this.montreIcones(["Play"])},ir.prototype.creeIcones=function(){const e=this;this.barreIcones=document.createElementNS(n,"g"),this.creeElementsPourIcones(),this.iconReset=jt(0,0,"fonce"),this.iconResetGris=jt(0,0,"clair"),this.iconReset.onclick=this.reset.bind(this),this.barreIcones.appendChild(this.iconReset),this.barreIcones.appendChild(this.iconResetGris),this.iconPrevStep=Ft(32,0,"fonce"),this.iconPrevStepGris=Ft(32,0,"clair"),this.iconPrevStep.onclick=function(){e.prevStep()},this.barreIcones.appendChild(this.iconPrevStep),this.barreIcones.appendChild(this.iconPrevStepGris),this.iconPause=Bt(64,0,"fonce"),this.iconPauseGris=Bt(64,0,"clair"),this.iconPause.onclick=this.pause.bind(this),this.barreIcones.appendChild(this.iconPause),this.barreIcones.appendChild(this.iconPauseGris),this.iconPlay=$t(96,0,"fonce"),this.iconPlayGris=$t(96,0,"clair"),this.iconPlay.onclick=this.play.bind(this),this.barreIcones.appendChild(this.iconPlay),this.iconContinue=$t(96,0,"rouge"),this.iconContinue.setAttribute("visibility","hidden"),this.iconContinue.onclick=this.continue.bind(this),this.barreIcones.appendChild(this.iconContinue),this.barreIcones.appendChild(this.iconPlayGris),this.iconRestart=Gt(128,0,"fonce"),this.iconRestartGris=Gt(128,0,"clair"),this.iconRestart.onclick=this.restart.bind(this),this.barreIcones.appendChild(this.iconRestart),this.barreIcones.appendChild(this.iconRestartGris),this.iconNextStep=zt(160,0,"fonce"),this.iconNextStepGris=zt(160,0,"clair"),this.iconNextStep.onclick=function(){e.nextStep()},this.barreIcones.appendChild(this.iconNextStep),this.barreIcones.appendChild(this.iconNextStepGris),this.iconGotoEnd=Ut(192,0,"fonce"),this.iconGotoEndGris=Ut(192,0,"clair"),this.iconGotoEnd.onclick=function(){e.gotoEnd()},this.barreIcones.appendChild(this.iconGotoEnd),this.barreIcones.appendChild(this.iconGotoEndGris),this.iconXML=Ht(224,0,"fonce"),this.iconXMLGris=Ht(224,0,"clair"),this.iconXML.onclick=function(){e.showXml()},this.barreIcones.appendChild(this.iconXML),this.barreIcones.appendChild(this.iconXMLGris),this.iconRepeat=Vt(256,0,"fonce"),this.iconRepeatGris=Vt(256,0,"clair"),this.iconRepeat.onclick=this.repeat.bind(this),this.barreIcones.appendChild(this.iconRepeat),this.barreIcones.appendChild(this.iconRepeatGris),this.hauteurBarre=32,this.demiLargeurBarre=128,this.xbarre=50,this.ybarre=4,this.barreIcones.setAttribute("transform",`translate(${this.xbarre}, ${this.ybarre})`),this.svg.appendChild(this.barreIcones),this.isDraggingBarre=!1,this.barreIcones.addEventListener("mousedown",(function(t){e.mousedownListenerBarre(t.clientX,t.clientY)}),!1),this.barreIcones.addEventListener("mousemove",(function(t){e.mousemoveListenerBarre(t.clientX,t.clientY)}),!1),this.barreIcones.addEventListener("touchstart",(function(t){e.mousedownListenerBarre(t.touches[0].pageX,t.touches[0].pageY)}),!1),this.barreIcones.addEventListener("touchmove",this.mousemoveListenerBarre.bind(this),!1),this.deltax=0,this.deltay=0},ir.prototype.mousedownListenerBarre=function(e,t){this.animationEnCours||(this.isDraggingBarre=!0,this.xcapturebarre=e,this.ycapturebarre=t)},ir.prototype.mousemoveListenerBarre=function(){this.animationEnCours?(this.barreIcones.style.cursor="default",this.isDraggingBarre=!1):this.barreIcones.style.cursor="pointer"},ir.prototype.mousemoveListenerSvg=function(e,t,r){if(this.isDraggingBarre){const n=this.getWidth(),i=this.getHeight(),s=t-this.xcapturebarre,o=r-this.ycapturebarre,a=this.deltax+s,l=this.deltay+o,u=this.xbarre+a,c=this.ybarre+l;u<=n-2*this.demiLargeurBarre&&u>=0&&c>=0&&c<=i-this.hauteurBarre&&(this.barreIcones.setAttribute("transform","translate("+u+","+c+")"),this.deltax=a,this.deltay=l,this.xcapturebarre=t,this.ycapturebarre=r),e.preventDefault()}},ir.prototype.mouseupListener=function(){this.isDraggingBarre=!1},ir.prototype.mouseleaveListener=function(){this.isDraggingBarre=!1},ir.prototype.showXml=function(){null==this.windowxml?this.windowxml=this.popup():this.windowxml.focus()},ir.prototype.montreIcones=function(e){qt.forEach((t=>{const r=e.includes(t),n="icon"+t;this[n]?(this[n].setAttribute("visibility",r?"visible":"hidden"),this[n+"Gris"].setAttribute("visibility",r?"hidden":"visible")):console.error(`L’icone ${n} n’existe pas`)}))},ir.prototype.activeIconeContinuer=function(){this.montreIcones(["XML"]),this.iconPlayGris.setAttribute("visibility","hidden"),this.iconContinue.setAttribute("visibility","visible")},ir.prototype.gotoEnd=function(){this.animationEnCours=!1,this.initialise(),this.montreIcones(["Reset","PrevStep","Restart","XML","Repeat"]),this.executeJusque(this.actions.length-1),this.indiceActionEnCours=this.actions.length},ir.prototype.play=function(){this.animationEnCours=!0,this.montreIcones(["Pause"]),this.actions[this.indiceActionEnCours]?this.actions[this.indiceActionEnCours].execute(!1):console.error(Error(`Pas d'action ${this.indiceActionEnCours}`),this.actions)},ir.prototype.continue=function(){this.indiceActionEnCours!==this.actions.length?(this.iconContinue.setAttribute("visibility","hidden"),this.montreIcones(["Pause"]),this.animationEnCours=!0,this.indiceActionEnCours++,this.actions[this.indiceActionEnCours]?this.actions[this.indiceActionEnCours].execute(!1):console.error(Error(`Pas d'action ${this.indiceActionEnCours}`),this.actions)):this.gotoEnd()},ir.prototype.reset=function(){this.animationEnCours=!1,this.initialise(),this.montreIcones(["Play","NextStep","GotoEnd","XML","Repeat"]),this.indiceActionEnCours=0,this.zoom(1)},ir.prototype.restart=function(){if(this.animationEnCours)return this.animationEnCours=!1,void setTimeout(this.restart.bind(this),100);this.initialise(),this.indiceActionEnCours=0,this.zoom(1),this.play()},ir.prototype.repeat=function(){if(this.animationEnCours)return this.animationEnCours=!1,void setTimeout(this.repeat.bind(this),100);this.animationEnCours=!0,this.animationEnBoucle=!0,this.initialise(),this.montreIcones(["Pause"]),this.indiceActionEnCours=0,this.zoom(1),this.actions[0].execute(!1)},ir.prototype.pause=function(){this.animationEnBoucle=!1,this.animationEnCours=!1,setTimeout((()=>this.montreIcones(["Reset","PrevStep","Play","Restart","NextStep","GotoEnd","XML","Repeat"])),500)},ir.prototype.nextStep=function(){const e=this.actions.length;this.animationEnCours=!1,this.indiceActionEnCours<e&&(this.actions[this.indiceActionEnCours].actionVisible()?this.indiceActionEnCours++:this.indiceActionEnCours=this.indiceProchaineActionVisible(this.indiceActionEnCours)+1,this.executeJusque(this.indiceActionEnCours-1));const t=["Reset","PrevStep","Restart","XML","Repeat"];this.indiceActionEnCours===this.actions.length?this.montreIcones(t):this.montreIcones(t.concat(["NextStep","GotoEnd","Play"]))},ir.prototype.prevStep=function(){this.animationEnCours=!1,this.indiceActionEnCours=this.indicePrecedenteActionVisible(this.indiceActionEnCours-1),this.indiceActionEnCours>0&&this.executeJusque(this.indiceActionEnCours-1);const e=["Play","NextStep","GotoEnd","XML","Repeat"];0===this.indiceActionEnCours?this.montreIcones(e):this.montreIcones(e.concat(["Reset","PrevStep"]))},ir.prototype.initialise=function(){let e,t;const r=this.svg;for(e=0;e<r.childNodes.length;e++)if(t=r.childNodes[e],t!==this.barreIcones)try{r.childNodes[e].setAttribute("visibility","hidden")}catch(n){console.error(n)}for(e=0;e<this.actions.length;e++){const t=this.actions[e];t instanceof te&&t.objet.initialisePosition()}this.initialiseOutils()},ir.prototype.getInstrumentVisibility=function(e,t){if(-1===t)return!1;let r,n=!1;for(let i=0;i<=t;i++)r=this.actions[i],r instanceof Ne?r.instrument===e&&(n=!0):r instanceof ve&&r.instrument===e&&(n=!1);return n},ir.prototype.getObjectVisibility=function(e,t){if(-1===t)return!1;let r,n=!1;for(let i=0;i<=t;i++)r=this.actions[i],r instanceof _e?r.objet===e&&(n=!0):r instanceof ge&&r.objet===e&&(n=!1);return n},ir.prototype.getCompasStatus=function(e){if(-1===e)return"couche";let t,r=!0;for(let n=0;n<=e;n++)t=this.actions[n],t instanceof X?r=!0:t instanceof fe&&(r=!1);return r?"couche":"leve"},ir.prototype.indiceProchaineActionVisible=function(e){if(e>=this.actions.length)return this.actions.length-1;for(let t=e;t<this.actions.length;t++)if(this.actions[t].actionVisible())return t;return this.actions.length-1},ir.prototype.indicePrecedenteActionVisible=function(e){if(e<0)return 0;e===this.actions.length&&e--;for(let t=e;t>=0;t--)if(this.actions[t].actionVisible())return t;return 0},ir.prototype.montreInstrumentsEtape=function(e){let t=this.getInstrumentVisibility(this.compas,e);this.compas.leve?this.compasLeve.montre(t):this.compas.montre(t),t=this.getInstrumentVisibility(this.crayon,e),this.crayon.montre(t),t=this.getInstrumentVisibility(this.equerre,e),this.equerre.montre(t),t=this.getInstrumentVisibility(this.rapporteur,e),this.rapporteur.montre(t),t=this.getInstrumentVisibility(this.regle,e),this.regle.montre(t),t=this.getInstrumentVisibility(this.requerre,e),this.requerre.montre(t)},ir.prototype.executeJusque=function(e){if(!(e>=this.actions.length)){this.initialise(),this.initialiseOutils(),this.animationEnCours=!1;for(let t=0;t<=e;t++)this.actions[t].execute(!0);this.montreInstrumentsEtape(e)}},ir.prototype.addElement=function(e){const t=this.elements.findIndex((t=>t.id===e.id&&t.objet===e.objet));-1!==t?this.elements[t]=e:this.elements.push(e)},ir.prototype.pushElement=function(e){if(this.elements.some((t=>t.id===e.id&&t.objet===e.objet)))throw Error(`Il y a déjà un élément ${e.id} désignant le même objet`);this.elements.push(e)},ir.prototype.getElement=function(e,t){return this.elements.find((r=>r.objet===t&&("quadrillage"===t||r.id===e)))||null},ir.prototype.setElement=function(e,t){const r=this.elements.findIndex((t=>t.id===e));return-1!==r&&(this.elements[r]=t,!0)},ir.prototype.ajouteAction=function(e){e.indice=this.actions.length,this.actions.push(e)},ir.prototype.creeActions=function(){let e,t,r,n,i,s,o,a,l,u,c,p,h,f,m,g,y,v,b,x,w,_,E;for(e=0;e<this.tabact.length;e++){t=this.tabact[e],u=Wt(t),r=t.getAttribute("mouvement"),y=t.getAttribute("tempo");try{let e,S;switch(r){case"creer":if(n=t.getAttribute("objet"),null!==this.getElement(u,n)){console.error(`L'id ${u} existe déjà, action creer ignorée`,n);break}if(null!=n){switch(n){case"point":i=new kt(this,u,parseFloat(Yt(t)),parseFloat(Xt(t)),Zt(t),Jt(t)),s=new te(this,u,i,y);break;case"angle":i=new Ke(this,u,Yt(t),Xt(t),t.getAttribute("rayon"),t.getAttribute("angle1"),t.getAttribute("angle2"),Zt(t),Jt(t),tr(t),t.getAttribute("forme")),s=new te(this,u,i,y);break;case"angle_droit":i=new et(this,u,t.getAttribute("abscisse_sommet"),t.getAttribute("ordonnee_sommet"),t.getAttribute("abscisse_inter"),t.getAttribute("ordonnee_inter"),Zt(t),Jt(t)),s=new te(this,u,i,y);break;case"longueur":i=new vt(this,u,Yt(t),Xt(t),Zt(t),Jt(t),t.getAttribute("forme")),s=new te(this,u,i,y);break;case"marque":i=new _t(this,u,t.getAttribute("idSeg"),Zt(t),Jt(t),t.getAttribute("forme"),t.getAttribute("rayon")),s=new te(this,u,i,y);break;case"texte":i=new J(this,u,Yt(t),Xt(t),Zt(t),t.getAttribute("taille")),s=new te(this,u,i,y);break;case"repere":i=new Pt(this,t.getAttribute("hauteur"),t.getAttribute("largeur"),t.getAttribute("haut"),t.getAttribute("gauche"),t.getAttribute("Xgrad"),t.getAttribute("Ygrad"),t.getAttribute("Xmin"),t.getAttribute("Xmax"),t.getAttribute("Ymin"),t.getAttribute("Ymax"),Zt(t),t.getAttribute("grille"),t.getAttribute("axes"),t.getAttribute("etiquettes")),s=new te(this,u,i,y);break;case"quadrillage":if(e=t.getAttribute("abscisse_bas_droite"),null!=e){e=parseFloat(e)/30;const r=parseFloat(t.getAttribute("ordonnee_bas_droite"))/30,n=parseFloat(t.getAttribute("abscisse_haut_gauche"))/30,o=parseFloat(t.getAttribute("ordonnee_haut_gauche"))/30;i=new Ot(this,t.getAttribute("quadrillage"),String(r-o),String(e-n),o,n,Zt(t)),s=new te(this,"quadrillageIEP",i,y)}else i=new Ot(this,t.getAttribute("quadrillage"),t.getAttribute("hauteur"),t.getAttribute("largeur"),t.getAttribute("haut"),t.getAttribute("gauche"),Zt(t));s=new te(this,"quadrillageIEP",i,y);break;case"axe":i=new ot(this,t.getAttribute("pente"),t.getAttribute("largeur"),t.getAttribute("haut"),t.getAttribute("gauche"),t.getAttribute("distanceBord"),t.getAttribute("Xgrad"),t.getAttribute("Xmin"),t.getAttribute("Xmax"),Zt(t)),s=new te(this,u,i,y);break;case"gabarit":S=t.getAttribute("ecart_angle"),null===S&&(S="-30"),i=new it(this,u,t.getAttribute("abscisse"),t.getAttribute("ordonnee"),t.getAttribute("rayon"),S,Zt(t),Jt(t),Kt(t),er(t)),s=new te(this,u,i,y);break;default:console.error(`objet ${i} inconnu => création ignorée`),s=null}s&&(this.ajouteAction(s),s.setReady())}break;case"montrer":n=t.getAttribute("objet"),d(n)?(f=t.getAttribute("abscisse"),m=t.getAttribute("ordonnee"),s=new Ne(this,this[n],f,m,y),"crayon"!==n&&"compas"!==n||null==f||null==m||this[n].translate(parseFloat(f),parseFloat(m))):s=new _e(this,u,n,y),this.ajouteAction(s),s.setReady();break;case"masquer":n=t.getAttribute("objet"),s=d(n)?new ve(this,this[n],y):new ge(this,u,n,y),this.ajouteAction(s),s.setReady();break;case"tracer":switch(n=t.getAttribute("objet"),E=t.getAttribute("cible"),null!=E?(i=this.getElement(E,"point"),f=i.xcons,m=i.ycons):(f=parseFloat(Yt(t)),m=parseFloat(Xt(t))),n){case"crayon":switch(o=t.getAttribute("forme"),a=this.crayon.x,l=this.crayon.y,u=Wt(t),o){case null:isNaN(f)||isNaN(m)?(i=new gt(this,u,this.crayon.x,this.crayon.y,t.getAttribute("abscisses"),t.getAttribute("ordonnees"),Zt(t),Jt(t),er(t),rr(t),nr(t)),v=i.abs.length,this.crayon.translate(i.abs[v-1],i.ord[v-1])):(i=new xt(this,u,a,l,f,m,Zt(t),Jt(t),er(t),rr(t),nr(t)),this.crayon.translate(f,m));break;case"droite":if(isNaN(f)||isNaN(m))break;i=new ct(this,u,a,l,f,m,Zt(t),Jt(t),er(t),rr(t),nr(t)),this.crayon.translate(f,m);break;case"demidroite":if(isNaN(f)||isNaN(m))break;i=new ht(this,u,a,l,f,m,Zt(t),Jt(t),er(t),rr(t),nr(t)),this.crayon.translate(f,m);break;case"polygone":if(g=t.getAttribute("cibles"),null===g)i=new Ct(this,u,t.getAttribute("abscisses"),t.getAttribute("ordonnees"),Zt(t),Jt(t),Kt(t),t.getAttribute("opacite"));else{let e="",r="";g.split(",").forEach(((t,n)=>{const i=0===n?"":",",s=this.getElement(t,"point");e+=i+s.xcons,r+=i+s.ycons})),i=new Ct(this,u,e,r,Zt(t),Jt(t),Kt(t),t.getAttribute("opacite"))}v=i.abs.length,this.crayon.translate(i.abs[v-1],i.ord[v-1]);break;case"libre":i=new gt(this,u,this.crayon.x,this.crayon.y,t.getAttribute("abscisses"),t.getAttribute("ordonnees"),Zt(t),Jt(t),er(t),rr(t),nr(t)),v=i.abs.length,this.crayon.translate(i.abs[v-1],i.ord[v-1])}h=t.getAttribute("vitesse"),null==h&&(h="4"),s=new te(this,Wt(t),i,y,h),this.ajouteAction(s),s.setReady();break;case"trait":h=t.getAttribute("vitesse"),null===h&&(h=1e4),i=new xt(this,u,t.getAttribute("abscisse1"),t.getAttribute("ordonnee1"),t.getAttribute("abscisse2"),t.getAttribute("ordonnee2"),Zt(t),Jt(t),er(t),rr(t),nr(t)),s=new te(this,Wt(t),i,y,h),this.ajouteAction(s),s.setReady();break;case"compas":i=new rt(this,u,this.compas.x,this.compas.y,this.compas.ecart,this.getAngle(t,"debut"),this.getAngle(t,"fin"),Zt(t),Jt(t),er(t),rr(t)),h=t.getAttribute("sens"),null==h&&(h="8"),s=new te(this,Wt(t),i,y,h),this.ajouteAction(s),s.setReady();break;case"angle_droit":i=new et(this,u,t.getAttribute("abscisse_sommet"),t.getAttribute("ordonnee_sommet"),t.getAttribute("abscisse_inter"),t.getAttribute("ordonnee_inter"),Zt(t),Jt(t)),s=new te(this,Wt(t),i,y,h),this.ajouteAction(s),s.setReady()}break;case"rotation":n=t.getAttribute("objet"),p=t.getAttribute("sens"),d(n)?(E=t.getAttribute("cible"),null!=E&&null===t.getAttribute("angle")?(i=this.getElement(E,"point"),f=i.xcons,m=i.ycons,x=new O(this[n].x,this[n].y,f,m),c=x.presqueNul()?0:-x.angle()):c="compas"===n?this.getAngle(t,"angle"):t.getAttribute("angle"),s=new De(this,this[n],c,y,p)):null===this.getElement(u,n)?s=null:(c=t.getAttribute("angle"),s=new $e(this,u,c,n,y,p)),null!==s&&(this.ajouteAction(s),s.setReady());break;case"translation":n=t.getAttribute("objet"),E=t.getAttribute("cible"),null!=E?(i=this.getElement(E,"point"),f=i.xcons,m=i.ycons):(f=parseFloat(Yt(t)),m=parseFloat(Xt(t))),h=t.getAttribute("vitesse"),d(n)?(this[n].x=f,this[n].y=m,s=new ze(this,this[n],f,m,y,h)):null===this.getElement(u,n)?s=null:("point"===n&&(_=this.getElement(u,"point"),_.xcons=f,_.ycons=m),s=new Ue(this,u,f,m,n,y,h)),null!==s&&(this.ajouteAction(s),"crayon"!==n&&"compas"!==n||this[n].translate(f,m),s.setReady());break;case"zoom":n=t.getAttribute("objet"),h=t.getAttribute("vitesse"),d(n)?(w=t.getAttribute("echelle"),this[n].zoomfactor=parseFloat(w)/100,s=new Ge(this,this[n],w,y,h)):s="texte"===n||"image"===n?new He(this,u,t.getAttribute("echelle"),n,y,h):null,null!==s&&(this.ajouteAction(s),s.setReady());break;case"ecarter":E=t.getAttribute("cible"),null!=E?(i=this.getElement(E,"point"),x=new O(this.compas.x,this.compas.y,i.xcons,i.ycons),b=x.norme()):b=parseFloat(t.getAttribute("ecart"))*this.compas.zoomfactor,this.compas.ecart=b,s=new ne(this,b,y,t.getAttribute("vitesse")),this.ajouteAction(s),s.setReady();break;case"lever":s=new fe(this,y),this.ajouteAction(s),s.setReady();break;case"coucher":s=new X(this,y),this.ajouteAction(s),s.setReady();break;case"masquer_nombres":s=new Me(this,!1,y),this.ajouteAction(s),s.setReady();break;case"montrer_nombres":s=new Me(this,!0,y),this.ajouteAction(s),s.setReady();break;case"graduations":n=t.getAttribute("objet"),s=new Se(this,this[n],!0,y),this.ajouteAction(s),s.setReady();break;case"vide":n=t.getAttribute("objet"),s=new Se(this,this[n],!1,y),this.ajouteAction(s),s.setReady();break;case"retourner":this.compasRetourne=!this.compasRetourne,s=new Le(this,y),this.ajouteAction(s),s.setReady();break;case"glisser":s=new ce(this,t.getAttribute("abscisse"),y,t.getAttribute("vitesse")),this.ajouteAction(s),s.setReady();break;case"chargement":i=new ft(this,u,t.getAttribute("url")),i.prepareAction();break;case"ecrire":s=new le(this,u,Zt(t),t.getAttribute("taille"),t.getAttribute("texte"),t.getAttribute("style"),Kt(t),t.getAttribute("opacite_fond"),Qt(t),t.getAttribute("epaisseur_cadre"),t.getAttribute("marge"),t.getAttribute("marge_gauche"),t.getAttribute("marge_droite"),t.getAttribute("marge_haut"),t.getAttribute("marge_bas"),y),this.ajouteAction(s),s.prepare();break;case"nommer":if(null!==this.getElement(u,"point")){const e=t.getAttribute("nom");""!==e&&(i=new At(this,u,Yt(t),Xt(t),e,Zt(t)),s=new Te(this,i,y),this.ajouteAction(s),s.prepare())}break;case"pause":s=new Ie(this,y),this.ajouteAction(s),s.setReady();break;case"modifier_longueur":n=t.getAttribute("objet"),s=new xe(this,this[n],t.getAttribute("longueur"),y),this.ajouteAction(s),s.setReady();break;case"modifier_rayon":n=t.getAttribute("objet"),s=new Ye(this,u,t.getAttribute("rayon"),n,y),this.ajouteAction(s),s.setReady()}}catch(S){console.error(S)}}this.getReadyPromise().then(this.init.bind(this)).catch((e=>{console.error(e),window.alert(e.message)}))},ir.prototype.execute=function(e){this.indiceActionEnCours=0,this.actions[0].execute(e)},ir.prototype.actionSuivante=function(e){if(e=Boolean(e),!this.animationEnCours&&!e)return;const t=this.actions[this.indiceActionEnCours];null===t.tempo||e?this.passageActionSuivante(e):setTimeout(this.passageActionSuivante.bind(this,e),t.tempo)},ir.prototype.passageActionSuivante=function(e){if(!(this.indiceActionEnCours>=this.actions.length))if(this.indiceActionEnCours!==this.actions.length-1)this.indiceActionEnCours++,this.actions[this.indiceActionEnCours].execute(e);else if(this.animationEnBoucle){const t=this;setTimeout((function(){t.initialise(),t.indiceActionEnCours=0,t.actions[t.indiceActionEnCours].execute(e)}),3e3)}else this.indiceActionEnCours++,this.montreIcones(["Reset","PrevStep","Restart","XML","Repeat"]),this.animationEnCours=!1},ir.prototype.getAngle=function(e,t){const r=e.getAttribute(t);return null==r?null:this.compasRetourne?String(parseFloat(r)+180):r},ir.prototype.creeElementsPourIcones=function(){let e=document.createElementNS(n,"defs");e.appendChild(this.radialGradiant("#9999FF","#000099","radialfonce")),this.svg.appendChild(e),e=document.createElementNS(n,"defs"),e.appendChild(this.radialGradiant("#CCCCCC","#666666","radialclair")),this.svg.appendChild(e),e=document.createElementNS(n,"defs"),e.appendChild(this.radialGradiant("#FF9999","#FF0000","radialrouge")),this.svg.appendChild(e),e=document.createElementNS(n,"defs"),e.appendChild(this.markerArrow("markerarrow")),this.barreIcones.appendChild(e),e=document.createElementNS(n,"defs"),e.appendChild(this.filtreEclairageIcone("filtrebleu")),this.barreIcones.appendChild(e),e=document.createElementNS(n,"defs"),e.appendChild(this.filtreEclairageIcone("filtregris")),this.barreIcones.appendChild(e)},ir.prototype.radialGradiant=function(e,t,r){const i=document.createElementNS(n,"radialGradient");i.setAttribute("id",r);let s=document.createElementNS(n,"stop");return s.setAttribute("offset","0%"),s.setAttribute("style","stop-color:"+t+";"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","80%"),s.setAttribute("style","stop-color:"+e+";"),i.appendChild(s),s=document.createElementNS(n,"stop"),s.setAttribute("offset","100%"),s.setAttribute("style","stop-color:"+t+";"),i.appendChild(s),i},ir.prototype.markerArrow=function(e){const t=document.createElementNS(n,"marker");t.setAttribute("id",e),t.setAttribute("markerWidth","4"),t.setAttribute("markerHeight","4"),t.setAttribute("refX","0"),t.setAttribute("refY","2"),t.setAttribute("orient","auto");const r=document.createElementNS(n,"path");return r.setAttribute("d","M 0 0 2 2 0 4 Z"),r.setAttribute("style","fill:white;"),t.appendChild(r),t},ir.prototype.filtreEclairageIcone=function(e){const t=document.createElementNS(n,"filter");t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t.setAttribute("color-interpolation-filters","sRGB");const r=document.createElementNS(n,"feDiffuseLighting");r.setAttribute("lighting-color","white"),r.setAttribute("surfaceScale","1"),r.setAttribute("diffuseConstant","1.2"),r.setAttribute("in","SourceGraphic"),r.setAttribute("result","diffOut");const i=document.createElementNS(n,"fePointLight");i.setAttribute("x","5"),i.setAttribute("y","5"),i.setAttribute("z","15"),r.appendChild(i),t.appendChild(r);const s=document.createElementNS(n,"feComposite");return s.setAttribute("in","SourceGraphic"),s.setAttribute("in2","diffOut"),s.setAttribute("operator","arithmetic"),s.setAttribute("k1","1"),s.setAttribute("k2","0"),s.setAttribute("k3","0"),s.setAttribute("k4","0"),t.appendChild(s),t.setAttribute("id",e),t},ir.prototype.popup=function(){const e=window.open("","popup","width=700,height=450,toolbar=no,scrollbars=no,resizable=yes");e.iepDoc=this;const t=e.document;t.title="Code Xml de la figure";const r=t.createElement("div"),n=t.createElement("form");r.appendChild(n),r.setAttribute("align","center"),t.body.appendChild(r);const i=t.createElement("textarea");n.appendChild(i),i.setAttribute("cols",80),i.setAttribute("rows",25),i.setAttribute("readonly",!0),i.style.fontSize="13px",i.scrollIntoView();let s=this.codexml;s=s.replace(/>\s*</g,">\n<"),i.appendChild(document.createTextNode(s)),i.select();const o=this;return e.addEventListener("unload",(()=>{o.windowxml=null})),e};const sr=ar;function or(e){e.docs.forEach((e=>{e.windowxml&&e.windowxml.close()}))}function ar(e){this.debug=Boolean(e&&e.debug),this.debug&&console.log("Mode debug activé"),this.docs=[],window.addEventListener("unload",or.bind(null,this))}let lr;function ur(e,t,r){return"object"!=typeof r&&(r={}),Promise.resolve().then((()=>{if("undefined"==typeof window||!window.document)throw Error("iepLoad doit être utilisé dans un navigateur");if("string"==typeof e&&(e=document.getElementById(e)),!(e instanceof HTMLElement))throw Error("Conteneur html manquant");if("string"!=typeof t)throw Error("Script xml manquant");return/^http/.test(t)?function(e){if("https:"===window.location.protocol&&"http:"===e.substr(0,5))return Promise.reject(Error(`Impossible de charger ici un script externe qui n’est pas en https (${e})`));return fetch(e,{Accept:"text/xml"}).catch((t=>{throw console.error(t),Error(`Impossible de récupérer le xml ${e}`)})).then((t=>{const{status:r,statusText:n,ok:i}=t;if(r>399)throw Error(`Impossible de récupérer le xml ${e} (erreur ${r} ${n})`);if(!i)throw Error(`Impossible de récupérer le xml ${e}`);return t.text()})).then((t=>{if(!t||!/<INSTRUMENPOCHE/.test(t))throw Error(`L’url ${e} ne retourne pas de script instrumenpoche en xml`);return t}))}(t):t})).then((t=>{if(!t||!/<INSTRUMENPOCHE/.test(t))throw Error("Ce n’est pas un script instrumenpoche valide");"https:"===window.location.protocol&&(t=t.replace(/http:\/\/([a-z]+.sesamath.net)/g,((e,t)=>`https://${t}`))),(0,St.empty)(e),(0,St.setStyles)(e,{position:"relative",overflow:"auto"});const n=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.classList.add("svgIep"),e.appendChild(t),(0,St.setStyles)(t,{margin:0,padding:0,width:"98%",height:"98%"}),t}(e),i={};r.debug&&(i.debug=!0),lr||(lr=new sr(i));const s="boolean"!=typeof r.autostart||r.autostart;return lr.addDoc(n,t,s),r.zoom&&function(e){const t=e.parentNode;t.style.resize="both",t.style.padding="0",t.style.border="1px solid black";const r={position:"absolute",zIndex:99,textAlign:"center",padding:0,width:"2.5em",height:"1.8em",left:"0.1em"};(0,St.addElement)(t,"button",{style:{...r,top:"0.1em"}},"+").addEventListener("click",(()=>e.iepDoc.zoom(1.1)),!1);(0,St.addElement)(t,"button",{style:{...r,top:"2em"}},"-").addEventListener("click",(()=>e.iepDoc.zoom(.9)),!1)}(n),lr}))}ar.prototype.addDoc=function(e,t,r=!0){if("string"==typeof e&&(e=document.getElementById(e)),!e)return new Error("svg manquant");if("svg"!==e.localName)return new Error("svg incorrect");const n={autoStart:r,debug:this.debug},i=new Rt(e,t,n);return this.docs.push(i),e.iepDoc=i,i},ar.prototype.flush=function(){this.closeAllXMLWindows(),this.docs.forEach((({svg:e})=>{e.parentNode?e.parentNode.removeChild(e):console.error("le svg",e,"n’a pas de parentNode")})),this.docs=[]},ar.prototype.getDocs=function(){return this.docs},ar.prototype.getLastDoc=function(){const e=this.docs.length;return e?this.docs[e-1]:null}},15046:(e,t,r)=>{var n;e=r.nmd(e);var i=function(e){"use strict";var t=1e7,r=9007199254740992,n=h(r),s="0123456789abcdefghijklmnopqrstuvwxyz",o="function"==typeof BigInt;function a(e,t,r,n){return void 0===e?a[0]:void 0!==t&&(10!=+t||r)?G(e,t,r,n):X(e)}function l(e,t){this.value=e,this.sign=t,this.isSmall=!1}function u(e){this.value=e,this.sign=e<0,this.isSmall=!0}function c(e){this.value=e}function p(e){return-r<e&&e<r}function h(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function d(e){f(e);var r=e.length;if(r<4&&T(e,n)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function f(e){for(var t=e.length;0===e[--t];);e.length=t+1}function m(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function g(e){return e>0?Math.floor(e):Math.ceil(e)}function y(e,r){var n,i,s=e.length,o=r.length,a=new Array(s),l=0,u=t;for(i=0;i<o;i++)l=(n=e[i]+r[i]+l)>=u?1:0,a[i]=n-l*u;for(;i<s;)l=(n=e[i]+l)===u?1:0,a[i++]=n-l*u;return l>0&&a.push(l),a}function v(e,t){return e.length>=t.length?y(e,t):y(t,e)}function b(e,r){var n,i,s=e.length,o=new Array(s),a=t;for(i=0;i<s;i++)n=e[i]-a+r,r=Math.floor(n/a),o[i]=n-r*a,r+=1;for(;r>0;)o[i++]=r%a,r=Math.floor(r/a);return o}function x(e,r){var n,i,s=e.length,o=r.length,a=new Array(s),l=0,u=t;for(n=0;n<o;n++)(i=e[n]-l-r[n])<0?(i+=u,l=1):l=0,a[n]=i;for(n=o;n<s;n++){if(!((i=e[n]-l)<0)){a[n++]=i;break}i+=u,a[n]=i}for(;n<s;n++)a[n]=e[n];return f(a),a}function w(e,r,n){var i,s,o=e.length,a=new Array(o),c=-r,p=t;for(i=0;i<o;i++)s=e[i]+c,c=Math.floor(s/p),s%=p,a[i]=s<0?s+p:s;return"number"==typeof(a=d(a))?(n&&(a=-a),new u(a)):new l(a,n)}function _(e,r){var n,i,s,o,a=e.length,l=r.length,u=m(a+l),c=t;for(s=0;s<a;++s){o=e[s];for(var p=0;p<l;++p)n=o*r[p]+u[s+p],i=Math.floor(n/c),u[s+p]=n-i*c,u[s+p+1]+=i}return f(u),u}function E(e,r){var n,i,s=e.length,o=new Array(s),a=t,l=0;for(i=0;i<s;i++)n=e[i]*r+l,l=Math.floor(n/a),o[i]=n-l*a;for(;l>0;)o[i++]=l%a,l=Math.floor(l/a);return o}function S(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function A(e,t){var r=Math.max(e.length,t.length);if(r<=30)return _(e,t);r=Math.ceil(r/2);var n=e.slice(r),i=e.slice(0,r),s=t.slice(r),o=t.slice(0,r),a=A(i,o),l=A(n,s),u=A(v(i,n),v(o,s)),c=v(v(a,S(x(x(u,a),l),r)),S(l,2*r));return f(c),c}function N(e,r,n){return new l(e<t?E(r,e):_(r,h(e)),n)}function k(e){var r,n,i,s,o=e.length,a=m(o+o),l=t;for(i=0;i<o;i++){n=0-(s=e[i])*s;for(var u=i;u<o;u++)r=s*e[u]*2+a[i+u]+n,n=Math.floor(r/l),a[i+u]=r-n*l;a[i+o]=n}return f(a),a}function M(e,t){var r,n,i,s,o=e.length,a=m(o);for(i=0,r=o-1;r>=0;--r)i=(s=1e7*i+e[r])-(n=g(s/t))*t,a[r]=0|n;return[a,0|i]}function C(e,r){var n,i=X(r);if(o)return[new c(e.value/i.value),new c(e.value%i.value)];var s,p=e.value,y=i.value;if(0===y)throw new Error("Cannot divide by zero");if(e.isSmall)return i.isSmall?[new u(g(p/y)),new u(p%y)]:[a[0],e];if(i.isSmall){if(1===y)return[e,a[0]];if(-1==y)return[e.negate(),a[0]];var v=Math.abs(y);if(v<t){s=d((n=M(p,v))[0]);var b=n[1];return e.sign&&(b=-b),"number"==typeof s?(e.sign!==i.sign&&(s=-s),[new u(s),new u(b)]):[new l(s,e.sign!==i.sign),new u(b)]}y=h(v)}var w=T(p,y);if(-1===w)return[a[0],e];if(0===w)return[a[e.sign===i.sign?1:-1],a[0]];n=p.length+y.length<=200?function(e,r){var n,i,s,o,a,l,u,c=e.length,p=r.length,h=t,f=m(r.length),g=r[p-1],y=Math.ceil(h/(2*g)),v=E(e,y),b=E(r,y);for(v.length<=c&&v.push(0),b.push(0),g=b[p-1],i=c-p;i>=0;i--){for(n=h-1,v[i+p]!==g&&(n=Math.floor((v[i+p]*h+v[i+p-1])/g)),s=0,o=0,l=b.length,a=0;a<l;a++)s+=n*b[a],u=Math.floor(s/h),o+=v[i+a]-(s-u*h),s=u,o<0?(v[i+a]=o+h,o=-1):(v[i+a]=o,o=0);for(;0!==o;){for(n-=1,s=0,a=0;a<l;a++)(s+=v[i+a]-h+b[a])<0?(v[i+a]=s+h,s=0):(v[i+a]=s,s=1);o+=s}f[i]=n}return v=M(v,y)[0],[d(f),d(v)]}(p,y):function(e,r){for(var n,i,s,o,a,l=e.length,u=r.length,c=[],p=[],h=t;l;)if(p.unshift(e[--l]),f(p),T(p,r)<0)c.push(0);else{s=p[(i=p.length)-1]*h+p[i-2],o=r[u-1]*h+r[u-2],i>u&&(s=(s+1)*h),n=Math.ceil(s/o);do{if(T(a=E(r,n),p)<=0)break;n--}while(n);c.push(n),p=x(p,a)}return c.reverse(),[d(c),d(p)]}(p,y),s=n[0];var _=e.sign!==i.sign,S=n[1],A=e.sign;return"number"==typeof s?(_&&(s=-s),s=new u(s)):s=new l(s,_),"number"==typeof S?(A&&(S=-S),S=new u(S)):S=new l(S,A),[s,S]}function T(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function O(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function I(e,t){for(var r,n,s,o=e.prev(),a=o,l=0;a.isEven();)a=a.divide(2),l++;e:for(n=0;n<t.length;n++)if(!e.lesser(t[n])&&!(s=i(t[n]).modPow(a,e)).isUnit()&&!s.equals(o)){for(r=l-1;0!=r;r--){if((s=s.square().mod(e)).isUnit())return!1;if(s.equals(o))continue e}return!1}return!0}l.prototype=Object.create(a.prototype),u.prototype=Object.create(a.prototype),c.prototype=Object.create(a.prototype),l.prototype.add=function(e){var t=X(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new l(b(r,Math.abs(n)),this.sign):new l(v(r,n),this.sign)},l.prototype.plus=l.prototype.add,u.prototype.add=function(e){var t=X(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(p(r+n))return new u(r+n);n=h(Math.abs(n))}return new l(b(n,Math.abs(r)),r<0)},u.prototype.plus=u.prototype.add,c.prototype.add=function(e){return new c(this.value+X(e).value)},c.prototype.plus=c.prototype.add,l.prototype.subtract=function(e){var t=X(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?w(r,Math.abs(n),this.sign):function(e,t,r){var n;return T(e,t)>=0?n=x(e,t):(n=x(t,e),r=!r),"number"==typeof(n=d(n))?(r&&(n=-n),new u(n)):new l(n,r)}(r,n,this.sign)},l.prototype.minus=l.prototype.subtract,u.prototype.subtract=function(e){var t=X(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new u(r-n):w(n,Math.abs(r),r>=0)},u.prototype.minus=u.prototype.subtract,c.prototype.subtract=function(e){return new c(this.value-X(e).value)},c.prototype.minus=c.prototype.subtract,l.prototype.negate=function(){return new l(this.value,!this.sign)},u.prototype.negate=function(){var e=this.sign,t=new u(-this.value);return t.sign=!e,t},c.prototype.negate=function(){return new c(-this.value)},l.prototype.abs=function(){return new l(this.value,!1)},u.prototype.abs=function(){return new u(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},l.prototype.multiply=function(e){var r,n,i,s=X(e),o=this.value,u=s.value,c=this.sign!==s.sign;if(s.isSmall){if(0===u)return a[0];if(1===u)return this;if(-1===u)return this.negate();if((r=Math.abs(u))<t)return new l(E(o,r),c);u=h(r)}return n=o.length,i=u.length,new l(-.012*n-.012*i+15e-6*n*i>0?A(o,u):_(o,u),c)},l.prototype.times=l.prototype.multiply,u.prototype._multiplyBySmall=function(e){return p(e.value*this.value)?new u(e.value*this.value):N(Math.abs(e.value),h(Math.abs(this.value)),this.sign!==e.sign)},l.prototype._multiplyBySmall=function(e){return 0===e.value?a[0]:1===e.value?this:-1===e.value?this.negate():N(Math.abs(e.value),this.value,this.sign!==e.sign)},u.prototype.multiply=function(e){return X(e)._multiplyBySmall(this)},u.prototype.times=u.prototype.multiply,c.prototype.multiply=function(e){return new c(this.value*X(e).value)},c.prototype.times=c.prototype.multiply,l.prototype.square=function(){return new l(k(this.value),!1)},u.prototype.square=function(){var e=this.value*this.value;return p(e)?new u(e):new l(k(h(Math.abs(this.value))),!1)},c.prototype.square=function(e){return new c(this.value*this.value)},l.prototype.divmod=function(e){var t=C(this,e);return{quotient:t[0],remainder:t[1]}},c.prototype.divmod=u.prototype.divmod=l.prototype.divmod,l.prototype.divide=function(e){return C(this,e)[0]},c.prototype.over=c.prototype.divide=function(e){return new c(this.value/X(e).value)},u.prototype.over=u.prototype.divide=l.prototype.over=l.prototype.divide,l.prototype.mod=function(e){return C(this,e)[1]},c.prototype.mod=c.prototype.remainder=function(e){return new c(this.value%X(e).value)},u.prototype.remainder=u.prototype.mod=l.prototype.remainder=l.prototype.mod,l.prototype.pow=function(e){var t,r,n,i=X(e),s=this.value,o=i.value;if(0===o)return a[1];if(0===s)return a[0];if(1===s)return a[1];if(-1===s)return i.isEven()?a[1]:a[-1];if(i.sign)return a[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&p(t=Math.pow(s,o)))return new u(g(t));for(r=this,n=a[1];!0&o&&(n=n.times(r),--o),0!==o;)o/=2,r=r.square();return n},u.prototype.pow=l.prototype.pow,c.prototype.pow=function(e){var t=X(e),r=this.value,n=t.value,i=BigInt(0),s=BigInt(1),o=BigInt(2);if(n===i)return a[1];if(r===i)return a[0];if(r===s)return a[1];if(r===BigInt(-1))return t.isEven()?a[1]:a[-1];if(t.isNegative())return new c(i);for(var l=this,u=a[1];(n&s)===s&&(u=u.times(l),--n),n!==i;)n/=o,l=l.square();return u},l.prototype.modPow=function(e,t){if(e=X(e),(t=X(t)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=a[1],n=this.mod(t);for(e.isNegative()&&(e=e.multiply(a[-1]),n=n.modInv(t));e.isPositive();){if(n.isZero())return a[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},c.prototype.modPow=u.prototype.modPow=l.prototype.modPow,l.prototype.compareAbs=function(e){var t=X(e),r=this.value,n=t.value;return t.isSmall?1:T(r,n)},u.prototype.compareAbs=function(e){var t=X(e),r=Math.abs(this.value),n=t.value;return t.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},c.prototype.compareAbs=function(e){var t=this.value,r=X(e).value;return(t=t>=0?t:-t)===(r=r>=0?r:-r)?0:t>r?1:-1},l.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=X(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:T(r,n)*(this.sign?-1:1)},l.prototype.compareTo=l.prototype.compare,u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=X(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},u.prototype.compareTo=u.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,r=X(e).value;return t===r?0:t>r?1:-1},c.prototype.compareTo=c.prototype.compare,l.prototype.equals=function(e){return 0===this.compare(e)},c.prototype.eq=c.prototype.equals=u.prototype.eq=u.prototype.equals=l.prototype.eq=l.prototype.equals,l.prototype.notEquals=function(e){return 0!==this.compare(e)},c.prototype.neq=c.prototype.notEquals=u.prototype.neq=u.prototype.notEquals=l.prototype.neq=l.prototype.notEquals,l.prototype.greater=function(e){return this.compare(e)>0},c.prototype.gt=c.prototype.greater=u.prototype.gt=u.prototype.greater=l.prototype.gt=l.prototype.greater,l.prototype.lesser=function(e){return this.compare(e)<0},c.prototype.lt=c.prototype.lesser=u.prototype.lt=u.prototype.lesser=l.prototype.lt=l.prototype.lesser,l.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},c.prototype.geq=c.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals,l.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},c.prototype.leq=c.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals,l.prototype.isEven=function(){return 0==(1&this.value[0])},u.prototype.isEven=function(){return 0==(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},l.prototype.isOdd=function(){return 1==(1&this.value[0])},u.prototype.isOdd=function(){return 1==(1&this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},l.prototype.isPositive=function(){return!this.sign},u.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=u.prototype.isPositive,l.prototype.isNegative=function(){return this.sign},u.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=u.prototype.isNegative,l.prototype.isUnit=function(){return!1},u.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},l.prototype.isZero=function(){return!1},u.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},l.prototype.isDivisibleBy=function(e){var t=X(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},c.prototype.isDivisibleBy=u.prototype.isDivisibleBy=l.prototype.isDivisibleBy,l.prototype.isPrime=function(t){var r=O(this);if(r!==e)return r;var n=this.abs(),s=n.bitLength();if(s<=64)return I(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var o=Math.log(2)*s.toJSNumber(),a=Math.ceil(!0===t?2*Math.pow(o,2):o),l=[],u=0;u<a;u++)l.push(i(u+2));return I(n,l)},c.prototype.isPrime=u.prototype.isPrime=l.prototype.isPrime,l.prototype.isProbablePrime=function(t,r){var n=O(this);if(n!==e)return n;for(var s=this.abs(),o=t===e?5:t,a=[],l=0;l<o;l++)a.push(i.randBetween(2,s.minus(2),r));return I(s,a)},c.prototype.isProbablePrime=u.prototype.isProbablePrime=l.prototype.isProbablePrime,l.prototype.modInv=function(e){for(var t,r,n,s=i.zero,o=i.one,a=X(e),l=this.abs();!l.isZero();)t=a.divide(l),r=s,n=a,s=o,a=l,o=r.subtract(t.multiply(o)),l=n.subtract(t.multiply(l));if(!a.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(e)),this.isNegative()?s.negate():s},c.prototype.modInv=u.prototype.modInv=l.prototype.modInv,l.prototype.next=function(){var e=this.value;return this.sign?w(e,1,this.sign):new l(b(e,1),this.sign)},u.prototype.next=function(){var e=this.value;return e+1<r?new u(e+1):new l(n,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},l.prototype.prev=function(){var e=this.value;return this.sign?new l(b(e,1),!0):w(e,1,this.sign)},u.prototype.prev=function(){var e=this.value;return e-1>-r?new u(e-1):new l(n,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var P=[1];2*P[P.length-1]<=t;)P.push(2*P[P.length-1]);var D=P.length,R=P[D-1];function L(e){return Math.abs(e)<=t}function q(e,t,r){t=X(t);for(var n=e.isNegative(),s=t.isNegative(),o=n?e.not():e,a=s?t.not():t,l=0,u=0,c=null,p=null,h=[];!o.isZero()||!a.isZero();)l=(c=C(o,R))[1].toJSNumber(),n&&(l=R-1-l),u=(p=C(a,R))[1].toJSNumber(),s&&(u=R-1-u),o=c[0],a=p[0],h.push(r(l,u));for(var d=0!==r(n?1:0,s?1:0)?i(-1):i(0),f=h.length-1;f>=0;f-=1)d=d.multiply(R).add(i(h[f]));return d}l.prototype.shiftLeft=function(e){var t=X(e).toJSNumber();if(!L(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var r=this;if(r.isZero())return r;for(;t>=D;)r=r.multiply(R),t-=D-1;return r.multiply(P[t])},c.prototype.shiftLeft=u.prototype.shiftLeft=l.prototype.shiftLeft,l.prototype.shiftRight=function(e){var t,r=X(e).toJSNumber();if(!L(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=D;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=C(n,R))[1].isNegative()?t[0].prev():t[0],r-=D-1}return(t=C(n,P[r]))[1].isNegative()?t[0].prev():t[0]},c.prototype.shiftRight=u.prototype.shiftRight=l.prototype.shiftRight,l.prototype.not=function(){return this.negate().prev()},c.prototype.not=u.prototype.not=l.prototype.not,l.prototype.and=function(e){return q(this,e,(function(e,t){return e&t}))},c.prototype.and=u.prototype.and=l.prototype.and,l.prototype.or=function(e){return q(this,e,(function(e,t){return e|t}))},c.prototype.or=u.prototype.or=l.prototype.or,l.prototype.xor=function(e){return q(this,e,(function(e,t){return e^t}))},c.prototype.xor=u.prototype.xor=l.prototype.xor;var $=1<<30;function B(e){var r=e.value,n="number"==typeof r?r|$:"bigint"==typeof r?r|BigInt($):r[0]+r[1]*t|1073758208;return n&-n}function z(e,t){if(t.compareTo(e)<=0){var r=z(e,t.square(t)),n=r.p,s=r.e,o=n.multiply(t);return o.compareTo(e)<=0?{p:o,e:2*s+1}:{p:n,e:2*s}}return{p:i(1),e:0}}function F(e,t){return e=X(e),t=X(t),e.greater(t)?e:t}function U(e,t){return e=X(e),t=X(t),e.lesser(t)?e:t}function j(e,t){if(e=X(e).abs(),t=X(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=a[1];e.isEven()&&t.isEven();)r=U(B(e),B(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(B(e));do{for(;t.isEven();)t=t.divide(B(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}l.prototype.bitLength=function(){var e=this;return e.compareTo(i(0))<0&&(e=e.negate().subtract(i(1))),0===e.compareTo(i(0))?i(0):i(z(e,i(2)).e).add(i(1))},c.prototype.bitLength=u.prototype.bitLength=l.prototype.bitLength;var G=function(e,t,r,n){r=r||s,e=String(e),n||(e=e.toLowerCase(),r=r.toLowerCase());var i,o=e.length,a=Math.abs(t),l={};for(i=0;i<r.length;i++)l[r[i]]=i;for(i=0;i<o;i++){if("-"!==(p=e[i])&&(p in l&&l[p]>=a)){if("1"===p&&1===a)continue;throw new Error(p+" is not a valid digit in base "+t+".")}}t=X(t);var u=[],c="-"===e[0];for(i=c?1:0;i<e.length;i++){var p;if((p=e[i])in l)u.push(X(l[p]));else{if("<"!==p)throw new Error(p+" is not a valid character");var h=i;do{i++}while(">"!==e[i]&&i<e.length);u.push(X(e.slice(h+1,i)))}}return V(u,t,c)};function V(e,t,r){var n,i=a[0],s=a[1];for(n=e.length-1;n>=0;n--)i=i.add(e[n].times(s)),s=s.times(t);return r?i.negate():i}function H(e,t){if((t=i(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var s,o=[],a=e;a.isNegative()||a.compareAbs(t)>=0;){s=a.divmod(t),a=s.quotient;var l=s.remainder;l.isNegative()&&(l=t.minus(l).abs(),a=a.next()),o.push(l.toJSNumber())}return o.push(a.toJSNumber()),{value:o.reverse(),isNegative:n}}function W(e,t,r){var n=H(e,t);return(n.isNegative?"-":"")+n.value.map((function(e){return function(e,t){return e<(t=t||s).length?t[e]:"<"+e+">"}(e,r)})).join("")}function Y(e){if(p(+e)){var t=+e;if(t===g(t))return o?new c(BigInt(t)):new u(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==g(i)||!p(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var s=n[0],a=s.indexOf(".");if(a>=0&&(i-=s.length-a-1,s=s.slice(0,a)+s.slice(a+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=s+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(o)return new c(BigInt(r?"-"+e:e));for(var h=[],d=e.length,m=d-7;d>0;)h.push(+e.slice(m,d)),(m-=7)<0&&(m=0),d-=7;return f(h),new l(h,r)}function X(e){return"number"==typeof e?function(e){if(o)return new c(BigInt(e));if(p(e)){if(e!==g(e))throw new Error(e+" is not an integer.");return new u(e)}return Y(e.toString())}(e):"string"==typeof e?Y(e):"bigint"==typeof e?new c(e):e}l.prototype.toArray=function(e){return H(this,e)},u.prototype.toArray=function(e){return H(this,e)},c.prototype.toArray=function(e){return H(this,e)},l.prototype.toString=function(t,r){if(t===e&&(t=10),10!==t)return W(this,t,r);for(var n,i=this.value,s=i.length,o=String(i[--s]);--s>=0;)n=String(i[s]),o+="0000000".slice(n.length)+n;return(this.sign?"-":"")+o},u.prototype.toString=function(t,r){return t===e&&(t=10),10!=t?W(this,t,r):String(this.value)},c.prototype.toString=u.prototype.toString,c.prototype.toJSON=l.prototype.toJSON=u.prototype.toJSON=function(){return this.toString()},l.prototype.valueOf=function(){return parseInt(this.toString(),10)},l.prototype.toJSNumber=l.prototype.valueOf,u.prototype.valueOf=function(){return this.value},u.prototype.toJSNumber=u.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var Z=0;Z<1e3;Z++)a[Z]=X(Z),Z>0&&(a[-Z]=X(-Z));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=F,a.min=U,a.gcd=j,a.lcm=function(e,t){return e=X(e).abs(),t=X(t).abs(),e.divide(j(e,t)).multiply(t)},a.isInstance=function(e){return e instanceof l||e instanceof u||e instanceof c},a.randBetween=function(e,r,n){e=X(e),r=X(r);var i=n||Math.random,s=U(e,r),o=F(e,r).subtract(s).add(1);if(o.isSmall)return s.add(Math.floor(i()*o));for(var l=H(o,t).value,u=[],c=!0,p=0;p<l.length;p++){var h=c?l[p]+(p+1<l.length?l[p+1]/t:0):t,d=g(i()*h);u.push(d),d<l[p]&&(c=!1)}return s.add(a.fromArray(u,t,!1))},a.fromArray=function(e,t,r){return V(e.map(X),X(t||10),r)},a}();e.hasOwnProperty("exports")&&(e.exports=i),void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)},28196:(e,t,r)=>{!function(e){var t={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},r=e.Pos;function n(e,r){return"pairs"==r&&"string"==typeof e?e:"object"==typeof e&&null!=e[r]?e[r]:t[r]}e.defineOption("autoCloseBrackets",!1,(function(t,r,o){o&&o!=e.Init&&(t.removeKeyMap(i),t.state.closeBrackets=null),r&&(s(n(r,"pairs")),t.state.closeBrackets=r,t.addKeyMap(i))}));var i={Backspace:l,Enter:u};function s(e){for(var t=0;t<e.length;t++){var r=e.charAt(t),n="'"+r+"'";i[n]||(i[n]=o(r))}}function o(e){return function(t){return h(t,e)}}function a(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function l(t){var i=a(t);if(!i||t.getOption("disableInput"))return e.Pass;for(var s=n(i,"pairs"),o=t.listSelections(),l=0;l<o.length;l++){if(!o[l].empty())return e.Pass;var u=d(t,o[l].head);if(!u||s.indexOf(u)%2!=0)return e.Pass}for(l=o.length-1;l>=0;l--){var c=o[l].head;t.replaceRange("",r(c.line,c.ch-1),r(c.line,c.ch+1),"+delete")}}function u(t){var r=a(t),i=r&&n(r,"explode");if(!i||t.getOption("disableInput"))return e.Pass;for(var s=t.listSelections(),o=0;o<s.length;o++){if(!s[o].empty())return e.Pass;var l=d(t,s[o].head);if(!l||i.indexOf(l)%2!=0)return e.Pass}t.operation((function(){var e=t.lineSeparator()||"\n";t.replaceSelection(e+e,null),c(t,-1),s=t.listSelections();for(var r=0;r<s.length;r++){var n=s[r].head.line;t.indentLine(n,null,!0),t.indentLine(n+1,null,!0)}}))}function c(e,t){for(var r=[],n=e.listSelections(),i=0,s=0;s<n.length;s++){var o=n[s];o.head==e.getCursor()&&(i=s);var a=o.head.ch||t>0?{line:o.head.line,ch:o.head.ch+t}:{line:o.head.line-1};r.push({anchor:a,head:a})}e.setSelections(r,i)}function p(t){var n=e.cmpPos(t.anchor,t.head)>0;return{anchor:new r(t.anchor.line,t.anchor.ch+(n?-1:1)),head:new r(t.head.line,t.head.ch+(n?1:-1))}}function h(t,i){var s=a(t);if(!s||t.getOption("disableInput"))return e.Pass;var o=n(s,"pairs"),l=o.indexOf(i);if(-1==l)return e.Pass;for(var u,h=n(s,"closeBefore"),d=n(s,"triples"),m=o.charAt(l+1)==i,g=t.listSelections(),y=l%2==0,v=0;v<g.length;v++){var b,x=g[v],w=x.head,_=t.getRange(w,r(w.line,w.ch+1));if(y&&!x.empty())b="surround";else if(!m&&y||_!=i)if(m&&w.ch>1&&d.indexOf(i)>=0&&t.getRange(r(w.line,w.ch-2),w)==i+i){if(w.ch>2&&/\bstring/.test(t.getTokenTypeAt(r(w.line,w.ch-2))))return e.Pass;b="addFour"}else if(m){var E=0==w.ch?" ":t.getRange(r(w.line,w.ch-1),w);if(e.isWordChar(_)||E==i||e.isWordChar(E))return e.Pass;b="both"}else{if(!y||!(0===_.length||/\s/.test(_)||h.indexOf(_)>-1))return e.Pass;b="both"}else b=m&&f(t,w)?"both":d.indexOf(i)>=0&&t.getRange(w,r(w.line,w.ch+3))==i+i+i?"skipThree":"skip";if(u){if(u!=b)return e.Pass}else u=b}var S=l%2?o.charAt(l-1):i,A=l%2?i:o.charAt(l+1);t.operation((function(){if("skip"==u)c(t,1);else if("skipThree"==u)c(t,3);else if("surround"==u){for(var e=t.getSelections(),r=0;r<e.length;r++)e[r]=S+e[r]+A;for(t.replaceSelections(e,"around"),e=t.listSelections().slice(),r=0;r<e.length;r++)e[r]=p(e[r]);t.setSelections(e)}else"both"==u?(t.replaceSelection(S+A,null),t.triggerElectric(S+A),c(t,-1)):"addFour"==u&&(t.replaceSelection(S+S+S+S,"before"),c(t,1))}))}function d(e,t){var n=e.getRange(r(t.line,t.ch-1),r(t.line,t.ch+1));return 2==n.length?n:null}function f(e,t){var n=e.getTokenAt(r(t.line,t.ch+1));return/\bstring/.test(n.type)&&n.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}s(t.pairs+"`")}(r(71614))},20450:(e,t,r)=>{!function(e){var t=e.Pos;function r(e,t){for(var r=0,n=e.length;r<n;++r)t(e[r])}function n(e,t){if(!Array.prototype.indexOf){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}return-1!=e.indexOf(t)}function i(r,n,i,s){var o=r.getCursor(),a=i(r,o);if(!/\b(?:string|comment)\b/.test(a.type)){var l=e.innerMode(r.getMode(),a.state);if("json"!==l.mode.helperType){a.state=l.state,/^[\w$_]*$/.test(a.string)?a.end>o.ch&&(a.end=o.ch,a.string=a.string.slice(0,o.ch-a.start)):a={start:o.ch,end:o.ch,string:"",state:a.state,type:"."==a.string?"property":null};for(var u=a;"property"==u.type;){if("."!=(u=i(r,t(o.line,u.start))).string)return;if(u=i(r,t(o.line,u.start)),!c)var c=[];c.push(u)}return{list:f(a,c,n,s),from:t(o.line,a.start),to:t(o.line,a.end)}}}}function s(e,t){return i(e,p,(function(e,t){return e.getTokenAt(t)}),t)}function o(e,t){var r=e.getTokenAt(t);return t.ch==r.start+1&&"."==r.string.charAt(0)?(r.end=r.start,r.string=".",r.type="property"):/^\.[\w$_]*$/.test(r.string)&&(r.type="property",r.start++,r.string=r.string.replace(/\./,"")),r}function a(e,t){return i(e,h,o,t)}e.registerHelper("hint","javascript",s),e.registerHelper("hint","coffeescript",a);var l="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),u="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),c="prototype apply call bind".split(" "),p="break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),h="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");function d(e,t){if(Object.getOwnPropertyNames&&Object.getPrototypeOf)for(var r=e;r;r=Object.getPrototypeOf(r))Object.getOwnPropertyNames(r).forEach(t);else for(var n in e)t(n)}function f(e,t,i,s){var o=[],a=e.string,p=s&&s.globalScope||window;function h(e){0!=e.lastIndexOf(a,0)||n(o,e)||o.push(e)}function f(e){"string"==typeof e?r(l,h):e instanceof Array?r(u,h):e instanceof Function&&r(c,h),d(e,h)}if(t&&t.length){var m,g=t.pop();for(g.type&&0===g.type.indexOf("variable")?(s&&s.additionalContext&&(m=s.additionalContext[g.string]),s&&!1===s.useGlobalScope||(m=m||p[g.string])):"string"==g.type?m="":"atom"==g.type?m=1:"function"==g.type&&(null==p.jQuery||"$"!=g.string&&"jQuery"!=g.string||"function"!=typeof p.jQuery?null!=p._&&"_"==g.string&&"function"==typeof p._&&(m=p._()):m=p.jQuery());null!=m&&t.length;)m=m[t.pop().string];null!=m&&f(m)}else{for(var y=e.state.localVars;y;y=y.next)h(y.name);for(var v=e.state.context;v;v=v.prev)for(y=v.vars;y;y=y.next)h(y.name);for(y=e.state.globalVars;y;y=y.next)h(y.name);if(s&&null!=s.additionalContext)for(var b in s.additionalContext)h(b);s&&!1===s.useGlobalScope||f(p),r(i,h)}return o}}(r(71614))},84681:(e,t,r)=>{!function(e){"use strict";var t="CodeMirror-hint",r="CodeMirror-hint-active";function n(e,t){if(this.cm=e,this.options=t,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var r=this;e.on("cursorActivity",this.activityFunc=function(){r.cursorActivity()})}}e.showHint=function(e,t,r){if(!t)return e.showHint(r);r&&r.async&&(t.async=!0);var n={hint:t};if(r)for(var i in r)n[i]=r[i];return e.showHint(n)},e.defineExtension("showHint",(function(t){t=o(this,this.getCursor("start"),t);var r=this.listSelections();if(!(r.length>1)){if(this.somethingSelected()){if(!t.hint.supportsSelection)return;for(var i=0;i<r.length;i++)if(r[i].head.line!=r[i].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var s=this.state.completionActive=new n(this,t);s.options.hint&&(e.signal(this,"startCompletion",this),s.update(!0))}})),e.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var i=window.requestAnimationFrame||function(e){return setTimeout(e,1e3/60)},s=window.cancelAnimationFrame||clearTimeout;function o(e,t,r){var n=e.options.hintOptions,i={};for(var s in f)i[s]=f[s];if(n)for(var s in n)void 0!==n[s]&&(i[s]=n[s]);if(r)for(var s in r)void 0!==r[s]&&(i[s]=r[s]);return i.hint.resolve&&(i.hint=i.hint.resolve(e,t)),i}function a(e){return"string"==typeof e?e:e.text}function l(e,t){var r={Up:function(){t.moveFocus(-1)},Down:function(){t.moveFocus(1)},PageUp:function(){t.moveFocus(1-t.menuSize(),!0)},PageDown:function(){t.moveFocus(t.menuSize()-1,!0)},Home:function(){t.setFocus(0)},End:function(){t.setFocus(t.length-1)},Enter:t.pick,Tab:t.pick,Esc:t.close};/Mac/.test(navigator.platform)&&(r["Ctrl-P"]=function(){t.moveFocus(-1)},r["Ctrl-N"]=function(){t.moveFocus(1)});var n=e.options.customKeys,i=n?{}:r;function s(e,n){var s;s="string"!=typeof n?function(e){return n(e,t)}:r.hasOwnProperty(n)?r[n]:n,i[e]=s}if(n)for(var o in n)n.hasOwnProperty(o)&&s(o,n[o]);var a=e.options.extraKeys;if(a)for(var o in a)a.hasOwnProperty(o)&&s(o,a[o]);return i}function u(e,t){for(;t&&t!=e;){if("LI"===t.nodeName.toUpperCase()&&t.parentNode==e)return t;t=t.parentNode}}function c(n,i){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=n,this.data=i,this.picked=!1;var s=this,o=n.cm,c=o.getInputField().ownerDocument,p=c.defaultView||c.parentWindow,h=this.hints=c.createElement("ul");h.setAttribute("role","listbox"),h.setAttribute("aria-expanded","true"),h.id=this.id;var d=n.cm.options.theme;h.className="CodeMirror-hints "+d,this.selectedHint=i.selectedHint||0;for(var f=i.list,m=0;m<f.length;++m){var g=h.appendChild(c.createElement("li")),y=f[m],v=t+(m!=this.selectedHint?"":" "+r);null!=y.className&&(v=y.className+" "+v),g.className=v,m==this.selectedHint&&g.setAttribute("aria-selected","true"),g.id=this.id+"-"+m,g.setAttribute("role","option"),y.render?y.render(g,i,y):g.appendChild(c.createTextNode(y.displayText||a(y))),g.hintId=m}var b=n.options.container||c.body,x=o.cursorCoords(n.options.alignWithWord?i.from:null),w=x.left,_=x.bottom,E=!0,S=0,A=0;if(b!==c.body){var N=-1!==["absolute","relative","fixed"].indexOf(p.getComputedStyle(b).position)?b:b.offsetParent,k=N.getBoundingClientRect(),M=c.body.getBoundingClientRect();S=k.left-M.left-N.scrollLeft,A=k.top-M.top-N.scrollTop}h.style.left=w-S+"px",h.style.top=_-A+"px";var C=p.innerWidth||Math.max(c.body.offsetWidth,c.documentElement.offsetWidth),T=p.innerHeight||Math.max(c.body.offsetHeight,c.documentElement.offsetHeight);b.appendChild(h),o.getInputField().setAttribute("aria-autocomplete","list"),o.getInputField().setAttribute("aria-owns",this.id),o.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var O,I=n.options.moveOnOverlap?h.getBoundingClientRect():new DOMRect,P=!!n.options.paddingForScrollbar&&h.scrollHeight>h.clientHeight+1;if(setTimeout((function(){O=o.getScrollInfo()})),I.bottom-T>0){var D=I.bottom-I.top;if(x.top-(x.bottom-I.top)-D>0)h.style.top=(_=x.top-D-A)+"px",E=!1;else if(D>T){h.style.height=T-5+"px",h.style.top=(_=x.bottom-I.top-A)+"px";var R=o.getCursor();i.from.ch!=R.ch&&(x=o.cursorCoords(R),h.style.left=(w=x.left-S)+"px",I=h.getBoundingClientRect())}}var L,q=I.right-C;if(P&&(q+=o.display.nativeBarWidth),q>0&&(I.right-I.left>C&&(h.style.width=C-5+"px",q-=I.right-I.left-C),h.style.left=(w=x.left-q-S)+"px"),P)for(var $=h.firstChild;$;$=$.nextSibling)$.style.paddingRight=o.display.nativeBarWidth+"px";o.addKeyMap(this.keyMap=l(n,{moveFocus:function(e,t){s.changeActive(s.selectedHint+e,t)},setFocus:function(e){s.changeActive(e)},menuSize:function(){return s.screenAmount()},length:f.length,close:function(){n.close()},pick:function(){s.pick()},data:i})),n.options.closeOnUnfocus&&(o.on("blur",this.onBlur=function(){L=setTimeout((function(){n.close()}),100)}),o.on("focus",this.onFocus=function(){clearTimeout(L)})),o.on("scroll",this.onScroll=function(){var e=o.getScrollInfo(),t=o.getWrapperElement().getBoundingClientRect();O||(O=o.getScrollInfo());var r=_+O.top-e.top,i=r-(p.pageYOffset||(c.documentElement||c.body).scrollTop);if(E||(i+=h.offsetHeight),i<=t.top||i>=t.bottom)return n.close();h.style.top=r+"px",h.style.left=w+O.left-e.left+"px"}),e.on(h,"dblclick",(function(e){var t=u(h,e.target||e.srcElement);t&&null!=t.hintId&&(s.changeActive(t.hintId),s.pick())})),e.on(h,"click",(function(e){var t=u(h,e.target||e.srcElement);t&&null!=t.hintId&&(s.changeActive(t.hintId),n.options.completeOnSingleClick&&s.pick())})),e.on(h,"mousedown",(function(){setTimeout((function(){o.focus()}),20)}));var B=this.getSelectedHintRange();return 0===B.from&&0===B.to||this.scrollToActive(),e.signal(i,"select",f[this.selectedHint],h.childNodes[this.selectedHint]),!0}function p(e,t){if(!e.somethingSelected())return t;for(var r=[],n=0;n<t.length;n++)t[n].supportsSelection&&r.push(t[n]);return r}function h(e,t,r,n){if(e.async)e(t,n,r);else{var i=e(t,r);i&&i.then?i.then(n):n(i)}}function d(t,r){var n,i=t.getHelpers(r,"hint");if(i.length){var s=function(e,t,r){var n=p(e,i);function s(i){if(i==n.length)return t(null);h(n[i],e,r,(function(e){e&&e.list.length>0?t(e):s(i+1)}))}s(0)};return s.async=!0,s.supportsSelection=!0,s}return(n=t.getHelper(t.getCursor(),"hintWords"))?function(t){return e.hint.fromList(t,{words:n})}:e.hint.anyword?function(t,r){return e.hint.anyword(t,r)}:function(){}}n.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&e.signal(this.data,"close"),this.widget&&this.widget.close(),e.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(t,r){var n=t.list[r],i=this;this.cm.operation((function(){n.hint?n.hint(i.cm,t,n):i.cm.replaceRange(a(n),n.from||t.from,n.to||t.to,"complete"),e.signal(t,"pick",n),i.cm.scrollIntoView()})),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(s(this.debounce),this.debounce=0);var e=this.startPos;this.data&&(e=this.data.from);var t=this.cm.getCursor(),r=this.cm.getLine(t.line);if(t.line!=this.startPos.line||r.length-t.ch!=this.startLen-this.startPos.ch||t.ch<e.ch||this.cm.somethingSelected()||!t.ch||this.options.closeCharacters.test(r.charAt(t.ch-1)))this.close();else{var n=this;this.debounce=i((function(){n.update()})),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){var t=this,r=++this.tick;h(this.options.hint,this.cm,this.options,(function(n){t.tick==r&&t.finishUpdate(n,e)}))}},finishUpdate:function(t,r){this.data&&e.signal(this.data,"update");var n=this.widget&&this.widget.picked||r&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=t,t&&t.list.length&&(n&&1==t.list.length?this.pick(t,0):(this.widget=new c(this,t),e.signal(t,"shown")))}},c.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm.getInputField();e.removeAttribute("aria-activedescendant"),e.removeAttribute("aria-owns");var t=this.completion.cm;this.completion.options.closeOnUnfocus&&(t.off("blur",this.onBlur),t.off("focus",this.onFocus)),t.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var e=this;this.keyMap={Enter:function(){e.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(t,n){if(t>=this.data.list.length?t=n?this.data.list.length-1:0:t<0&&(t=n?0:this.data.list.length-1),this.selectedHint!=t){var i=this.hints.childNodes[this.selectedHint];i&&(i.className=i.className.replace(" "+r,""),i.removeAttribute("aria-selected")),(i=this.hints.childNodes[this.selectedHint=t]).className+=" "+r,i.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",i.id),this.scrollToActive(),e.signal(this.data,"select",this.data.list[this.selectedHint],i)}},scrollToActive:function(){var e=this.getSelectedHintRange(),t=this.hints.childNodes[e.from],r=this.hints.childNodes[e.to],n=this.hints.firstChild;t.offsetTop<this.hints.scrollTop?this.hints.scrollTop=t.offsetTop-n.offsetTop:r.offsetTop+r.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=r.offsetTop+r.offsetHeight-this.hints.clientHeight+n.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var e=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-e),to:Math.min(this.data.list.length-1,this.selectedHint+e)}}},e.registerHelper("hint","auto",{resolve:d}),e.registerHelper("hint","fromList",(function(t,r){var n,i=t.getCursor(),s=t.getTokenAt(i),o=e.Pos(i.line,s.start),a=i;s.start<i.ch&&/\w/.test(s.string.charAt(i.ch-s.start-1))?n=s.string.substr(0,i.ch-s.start):(n="",o=i);for(var l=[],u=0;u<r.words.length;u++){var c=r.words[u];c.slice(0,n.length)==n&&l.push(c)}if(l.length)return{list:l,from:o,to:a}})),e.commands.autocomplete=e.showHint;var f={hint:e.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};e.defineOption("hintOptions",null)}(r(71614))},71614:function(e){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,r=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),s=/Edge\/(\d+)/.exec(e),o=n||i||s,a=o&&(n?document.documentMode||6:+(s||i)[1]),l=!s&&/WebKit\//.test(e),u=l&&/Qt\/\d+\.\d+/.test(e),c=!s&&/Chrome\//.test(e),p=/Opera\//.test(e),h=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=h&&(/Mobile\/\w+/.test(e)||navigator.maxTouchPoints>2),g=/Android/.test(e),y=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),v=m||/Mac/.test(t),b=/\bCrOS\b/.test(e),x=/win/i.test(t),w=p&&e.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(p=!1,l=!0);var _=v&&(u||p&&(null==w||w<12.11)),E=r||o&&a>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var A,N=function(e,t){var r=e.className,n=S(t).exec(r);if(n){var i=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(i?n[1]+i:"")}};function k(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function M(e,t){return k(e).appendChild(t)}function C(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function T(e,t,r,n){var i=C(e,t,r,n);return i.setAttribute("role","presentation"),i}function O(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function I(){var e;try{e=document.activeElement}catch(Pe){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function P(e,t){var r=e.className;S(t).test(r)||(e.className+=(r?" ":"")+t)}function D(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!S(r[n]).test(t)&&(t+=" "+r[n]);return t}A=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(Pe){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var R=function(e){e.select()};function L(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function q(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function $(e,t,r,n,i){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var s=n||0,o=i||0;;){var a=e.indexOf("\t",s);if(a<0||a>=t)return o+(t-s);o+=a-s,o+=r-o%r,s=a+1}}m?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:o&&(R=function(e){try{e.select()}catch(t){}});var B=function(){this.id=null,this.f=null,this.time=0,this.handler=L(this.onTimeout,this)};function z(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}B.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},B.prototype.set=function(e,t){this.f=t;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};var F=50,U={toString:function(){return"CodeMirror.Pass"}},j={scroll:!1},G={origin:"*mouse"},V={origin:"+move"};function H(e,t,r){for(var n=0,i=0;;){var s=e.indexOf("\t",n);-1==s&&(s=e.length);var o=s-n;if(s==e.length||i+o>=t)return n+Math.min(o,t-i);if(i+=s-n,n=s+1,(i+=r-i%r)>=t)return n}}var W=[""];function Y(e){for(;W.length<=e;)W.push(X(W)+" ");return W[e]}function X(e){return e[e.length-1]}function Z(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Q(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}function K(){}function J(e,t){var r;return Object.create?r=Object.create(e):(K.prototype=e,r=new K),t&&q(t,r),r}var ee=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function te(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||ee.test(e))}function re(e,t){return t?!!(t.source.indexOf("\\w")>-1&&te(e))||t.test(e):te(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function se(e){return e.charCodeAt(0)>=768&&ie.test(e)}function oe(e,t,r){for(;(r<0?t>0:t<e.length)&&se(e.charAt(t));)t+=r;return t}function ae(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var i=(t+r)/2,s=n<0?Math.ceil(i):Math.floor(i);if(s==t)return e(s)?t:r;e(s)?r=s:t=s+n}}function le(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var i=!1,s=0;s<e.length;++s){var o=e[s];(o.from<r&&o.to>t||t==r&&o.to==t)&&(n(Math.max(o.from,t),Math.min(o.to,r),1==o.level?"rtl":"ltr",s),i=!0)}i||n(t,r,"ltr")}var ue=null;function ce(e,t,r){var n;ue=null;for(var i=0;i<e.length;++i){var s=e[i];if(s.from<t&&s.to>t)return i;s.to==t&&(s.from!=s.to&&"before"==r?n=i:ue=i),s.from==t&&(s.from!=s.to&&"before"!=r?n=i:ue=i)}return null!=n?n:ue}var pe=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function r(r){return r<=247?e.charAt(r):1424<=r&&r<=1524?"R":1536<=r&&r<=1785?t.charAt(r-1536):1774<=r&&r<=2220?"r":8192<=r&&r<=8203?"w":8204==r?"b":"L"}var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,a=/[1n]/;function l(e,t,r){this.level=e,this.from=t,this.to=r}return function(e,t){var u="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!n.test(e))return!1;for(var c=e.length,p=[],h=0;h<c;++h)p.push(r(e.charCodeAt(h)));for(var d=0,f=u;d<c;++d){var m=p[d];"m"==m?p[d]=f:f=m}for(var g=0,y=u;g<c;++g){var v=p[g];"1"==v&&"r"==y?p[g]="n":s.test(v)&&(y=v,"r"==v&&(p[g]="R"))}for(var b=1,x=p[0];b<c-1;++b){var w=p[b];"+"==w&&"1"==x&&"1"==p[b+1]?p[b]="1":","!=w||x!=p[b+1]||"1"!=x&&"n"!=x||(p[b]=x),x=w}for(var _=0;_<c;++_){var E=p[_];if(","==E)p[_]="N";else if("%"==E){var S=void 0;for(S=_+1;S<c&&"%"==p[S];++S);for(var A=_&&"!"==p[_-1]||S<c&&"1"==p[S]?"1":"N",N=_;N<S;++N)p[N]=A;_=S-1}}for(var k=0,M=u;k<c;++k){var C=p[k];"L"==M&&"1"==C?p[k]="L":s.test(C)&&(M=C)}for(var T=0;T<c;++T)if(i.test(p[T])){var O=void 0;for(O=T+1;O<c&&i.test(p[O]);++O);for(var I="L"==(T?p[T-1]:u),P=I==("L"==(O<c?p[O]:u))?I?"L":"R":u,D=T;D<O;++D)p[D]=P;T=O-1}for(var R,L=[],q=0;q<c;)if(o.test(p[q])){var $=q;for(++q;q<c&&o.test(p[q]);++q);L.push(new l(0,$,q))}else{var B=q,z=L.length,F="rtl"==t?1:0;for(++q;q<c&&"L"!=p[q];++q);for(var U=B;U<q;)if(a.test(p[U])){B<U&&(L.splice(z,0,new l(1,B,U)),z+=F);var j=U;for(++U;U<q&&a.test(p[U]);++U);L.splice(z,0,new l(2,j,U)),z+=F,B=U}else++U;B<q&&L.splice(z,0,new l(1,B,q))}return"ltr"==t&&(1==L[0].level&&(R=e.match(/^\s+/))&&(L[0].from=R[0].length,L.unshift(new l(0,0,R[0].length))),1==X(L).level&&(R=e.match(/\s+$/))&&(X(L).to-=R[0].length,L.push(new l(0,c-R[0].length,c)))),"rtl"==t?L.reverse():L}}();function he(e,t){var r=e.order;return null==r&&(r=e.order=pe(e.text,t)),r}var de=[],fe=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||de).concat(r)}};function me(e,t){return e._handlers&&e._handlers[t]||de}function ge(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var s=z(i,r);s>-1&&(n[t]=i.slice(0,s).concat(i.slice(s+1)))}}}function ye(e,t){var r=me(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function ve(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ye(e,r||t.type,e,t),Se(t)||t.codemirrorIgnore}function be(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==z(r,t[n])&&r.push(t[n])}function xe(e,t){return me(e,t).length>0}function we(e){e.prototype.on=function(e,t){fe(this,e,t)},e.prototype.off=function(e,t){ge(this,e,t)}}function _e(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Ee(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Se(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ae(e){_e(e),Ee(e)}function Ne(e){return e.target||e.srcElement}function ke(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),v&&e.ctrlKey&&1==t&&(t=3),t}var Me,Ce,Te=function(){if(o&&a<9)return!1;var e=C("div");return"draggable"in e||"dragDrop"in e}();function Oe(e){if(null==Me){var t=C("span","​");M(e,C("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Me=t.offsetWidth<=1&&t.offsetHeight>2&&!(o&&a<8))}var r=Me?C("span","​"):C("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Ie(e){if(null!=Ce)return Ce;var t=M(e,document.createTextNode("AخA")),r=A(t,0,1).getBoundingClientRect(),n=A(t,1,2).getBoundingClientRect();return k(e),!(!r||r.left==r.right)&&(Ce=n.right-r.right<3)}var Pe,De=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var s=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),o=s.indexOf("\r");-1!=o?(r.push(s.slice(0,o)),t+=o+1):(r.push(s),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Re=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(Pe){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(Pe){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Le="oncopy"in(Pe=C("div"))||(Pe.setAttribute("oncopy","return;"),"function"==typeof Pe.oncopy),qe=null;function $e(e){if(null!=qe)return qe;var t=M(e,C("span","x")),r=t.getBoundingClientRect(),n=A(t,0,1).getBoundingClientRect();return qe=Math.abs(r.left-n.left)>1}var Be={},ze={};function Fe(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Be[e]=t}function Ue(e,t){ze[e]=t}function je(e){if("string"==typeof e&&ze.hasOwnProperty(e))e=ze[e];else if(e&&"string"==typeof e.name&&ze.hasOwnProperty(e.name)){var t=ze[e.name];"string"==typeof t&&(t={name:t}),(e=J(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return je("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return je("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ge(e,t){t=je(t);var r=Be[t.name];if(!r)return Ge(e,"text/plain");var n=r(e,t);if(Ve.hasOwnProperty(t.name)){var i=Ve[t.name];for(var s in i)i.hasOwnProperty(s)&&(n.hasOwnProperty(s)&&(n["_"+s]=n[s]),n[s]=i[s])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)n[o]=t.modeProps[o];return n}var Ve={};function He(e,t){q(t,Ve.hasOwnProperty(e)?Ve[e]:Ve[e]={})}function We(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Ye(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function Xe(e,t,r){return!e.startState||e.startState(t,r)}var Ze=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};function Qe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],s=i.chunkSize();if(t<s){r=i;break}t-=s}return r.lines[t]}function Ke(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,(function(e){var s=e.text;i==r.line&&(s=s.slice(0,r.ch)),i==t.line&&(s=s.slice(t.ch)),n.push(s),++i})),n}function Je(e,t,r){var n=[];return e.iter(t,r,(function(e){n.push(e.text)})),n}function et(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function tt(e){if(null==e.parent)return null;for(var t=e.parent,r=z(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function rt(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],s=i.height;if(t<s){e=i;continue e}t-=s,r+=i.chunkSize()}return r}while(!e.lines);for(var o=0;o<e.lines.length;++o){var a=e.lines[o].height;if(t<a)break;t-=a}return r+o}function nt(e,t){return t>=e.first&&t<e.first+e.size}function it(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function st(e,t,r){if(void 0===r&&(r=null),!(this instanceof st))return new st(e,t,r);this.line=e,this.ch=t,this.sticky=r}function ot(e,t){return e.line-t.line||e.ch-t.ch}function at(e,t){return e.sticky==t.sticky&&0==ot(e,t)}function lt(e){return st(e.line,e.ch)}function ut(e,t){return ot(e,t)<0?t:e}function ct(e,t){return ot(e,t)<0?e:t}function pt(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ht(e,t){if(t.line<e.first)return st(e.first,0);var r=e.first+e.size-1;return t.line>r?st(r,Qe(e,r).text.length):dt(t,Qe(e,t.line).text.length)}function dt(e,t){var r=e.ch;return null==r||r>t?st(e.line,t):r<0?st(e.line,0):e}function ft(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=ht(e,t[n]);return r}Ze.prototype.eol=function(){return this.pos>=this.string.length},Ze.prototype.sol=function(){return this.pos==this.lineStart},Ze.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ze.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ze.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ze.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ze.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ze.prototype.skipToEnd=function(){this.pos=this.string.length},Ze.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},Ze.prototype.backUp=function(e){this.pos-=e},Ze.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=$(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?$(this.string,this.lineStart,this.tabSize):0)},Ze.prototype.indentation=function(){return $(this.string,null,this.tabSize)-(this.lineStart?$(this.string,this.lineStart,this.tabSize):0)},Ze.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},Ze.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ze.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ze.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ze.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var mt=function(e,t){this.state=e,this.lookAhead=t},gt=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function yt(e,t,r,n){var i=[e.state.modeGen],s={};Nt(e,t.text,e.doc.mode,r,(function(e,t){return i.push(e,t)}),s,n);for(var o=r.state,a=function(n){r.baseTokens=i;var a=e.state.overlays[n],l=1,u=0;r.state=!0,Nt(e,t.text,a.mode,r,(function(e,t){for(var r=l;u<e;){var n=i[l];n>e&&i.splice(l,1,e,i[l+1],n),l+=2,u=Math.min(e,n)}if(t)if(a.opaque)i.splice(r,l-r,e,"overlay "+t),l=r+2;else for(;r<l;r+=2){var s=i[r+1];i[r+1]=(s?s+" ":"")+"overlay "+t}}),s),r.state=o,r.baseTokens=null,r.baseTokenPos=1},l=0;l<e.state.overlays.length;++l)a(l);return{styles:i,classes:s.bgClass||s.textClass?s:null}}function vt(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=bt(e,tt(t)),i=t.text.length>e.options.maxHighlightLength&&We(e.doc.mode,n.state),s=yt(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=s.styles,s.classes?t.styleClasses=s.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function bt(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new gt(n,!0,t);var s=kt(e,t,r),o=s>n.first&&Qe(n,s-1).stateAfter,a=o?gt.fromSaved(n,o,s):new gt(n,Xe(n.mode),s);return n.iter(s,t,(function(r){xt(e,r.text,a);var n=a.line;r.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?a.save():null,a.nextLine()})),r&&(n.modeFrontier=a.line),a}function xt(e,t,r,n){var i=e.doc.mode,s=new Ze(t,e.options.tabSize,r);for(s.start=s.pos=n||0,""==t&&wt(i,r.state);!s.eol();)_t(i,s,r.state),s.start=s.pos}function wt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=Ye(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function _t(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=Ye(e,r).mode);var s=e.token(t,r);if(t.pos>t.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}gt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},gt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},gt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},gt.fromSaved=function(e,t,r){return t instanceof mt?new gt(e,We(e.mode,t.state),r,t.lookAhead):new gt(e,We(e.mode,t),r)},gt.prototype.save=function(e){var t=!1!==e?We(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new mt(t,this.maxLookAhead):t};var Et=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function St(e,t,r,n){var i,s,o=e.doc,a=o.mode,l=Qe(o,(t=ht(o,t)).line),u=bt(e,t.line,r),c=new Ze(l.text,e.options.tabSize,u);for(n&&(s=[]);(n||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=_t(a,c,u.state),n&&s.push(new Et(c,i,We(o.mode,u.state)));return n?s:new Et(c,i,u.state)}function At(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(t[n])||(t[n]+=" "+r[2])}return e}function Nt(e,t,r,n,i,s,o){var a=r.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,u=0,c=null,p=new Ze(t,e.options.tabSize,n),h=e.options.addModeClass&&[null];for(""==t&&At(wt(r,n.state),s);!p.eol();){if(p.pos>e.options.maxHighlightLength?(a=!1,o&&xt(e,t,n,p.pos),p.pos=t.length,l=null):l=At(_t(r,p,n.state,h),s),h){var d=h[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!a||c!=l){for(;u<p.start;)i(u=Math.min(p.start,u+5e3),c);c=l}p.start=p.pos}for(;u<p.pos;){var f=Math.min(p.pos,u+5e3);i(f,c),u=f}}function kt(e,t,r){for(var n,i,s=e.doc,o=r?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>o;--a){if(a<=s.first)return s.first;var l=Qe(s,a-1),u=l.stateAfter;if(u&&(!r||a+(u instanceof mt?u.lookAhead:0)<=s.modeFrontier))return a;var c=$(l.text,null,e.options.tabSize);(null==i||n>c)&&(i=a-1,n=c)}return i}function Mt(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var i=Qe(e,n).stateAfter;if(i&&(!(i instanceof mt)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}var Ct=!1,Tt=!1;function Ot(){Ct=!0}function It(){Tt=!0}function Pt(e,t,r){this.marker=e,this.from=t,this.to=r}function Dt(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function Rt(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Lt(e,t,r){var n=r&&window.WeakSet&&(r.markedSpans||(r.markedSpans=new WeakSet));n&&n.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],n&&n.add(e.markedSpans)),t.marker.attachLine(e)}function qt(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var s=e[i],o=s.marker;if(null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t)||s.from==t&&"bookmark"==o.type&&(!r||!s.marker.insertLeft)){var a=null==s.to||(o.inclusiveRight?s.to>=t:s.to>t);(n||(n=[])).push(new Pt(o,s.from,a?null:s.to))}}return n}function $t(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var s=e[i],o=s.marker;if(null==s.to||(o.inclusiveRight?s.to>=t:s.to>t)||s.from==t&&"bookmark"==o.type&&(!r||s.marker.insertLeft)){var a=null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t);(n||(n=[])).push(new Pt(o,a?null:s.from-t,null==s.to?null:s.to-t))}}return n}function Bt(e,t){if(t.full)return null;var r=nt(e,t.from.line)&&Qe(e,t.from.line).markedSpans,n=nt(e,t.to.line)&&Qe(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,s=t.to.ch,o=0==ot(t.from,t.to),a=qt(r,i,o),l=$t(n,s,o),u=1==t.text.length,c=X(t.text).length+(u?i:0);if(a)for(var p=0;p<a.length;++p){var h=a[p];if(null==h.to){var d=Dt(l,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(l)for(var f=0;f<l.length;++f){var m=l[f];null!=m.to&&(m.to+=c),null==m.from?Dt(a,m.marker)||(m.from=c,u&&(a||(a=[])).push(m)):(m.from+=c,u&&(a||(a=[])).push(m))}a&&(a=zt(a)),l&&l!=a&&(l=zt(l));var g=[a];if(!u){var y,v=t.text.length-2;if(v>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(y||(y=[])).push(new Pt(a[b].marker,null,null));for(var x=0;x<v;++x)g.push(y);g.push(l)}return g}function zt(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ft(e,t,r){var n=null;if(e.iter(t.line,r.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=z(n,r)||(n||(n=[])).push(r)}})),!n)return null;for(var i=[{from:t,to:r}],s=0;s<n.length;++s)for(var o=n[s],a=o.find(0),l=0;l<i.length;++l){var u=i[l];if(!(ot(u.to,a.from)<0||ot(u.from,a.to)>0)){var c=[l,1],p=ot(u.from,a.from),h=ot(u.to,a.to);(p<0||!o.inclusiveLeft&&!p)&&c.push({from:u.from,to:a.from}),(h>0||!o.inclusiveRight&&!h)&&c.push({from:a.to,to:u.to}),i.splice.apply(i,c),l+=c.length-3}}return i}function Ut(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function jt(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Gt(e){return e.inclusiveLeft?-1:0}function Vt(e){return e.inclusiveRight?1:0}function Ht(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),s=ot(n.from,i.from)||Gt(e)-Gt(t);if(s)return-s;var o=ot(n.to,i.to)||Vt(e)-Vt(t);return o||t.id-e.id}function Wt(e,t){var r,n=Tt&&e.markedSpans;if(n)for(var i=void 0,s=0;s<n.length;++s)(i=n[s]).marker.collapsed&&null==(t?i.from:i.to)&&(!r||Ht(r,i.marker)<0)&&(r=i.marker);return r}function Yt(e){return Wt(e,!0)}function Xt(e){return Wt(e,!1)}function Zt(e,t){var r,n=Tt&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var s=n[i];s.marker.collapsed&&(null==s.from||s.from<t)&&(null==s.to||s.to>t)&&(!r||Ht(r,s.marker)<0)&&(r=s.marker)}return r}function Qt(e,t,r,n,i){var s=Qe(e,t),o=Tt&&s.markedSpans;if(o)for(var a=0;a<o.length;++a){var l=o[a];if(l.marker.collapsed){var u=l.marker.find(0),c=ot(u.from,r)||Gt(l.marker)-Gt(i),p=ot(u.to,n)||Vt(l.marker)-Vt(i);if(!(c>=0&&p<=0||c<=0&&p>=0)&&(c<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ot(u.to,r)>=0:ot(u.to,r)>0)||c>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ot(u.from,n)<=0:ot(u.from,n)<0)))return!0}}}function Kt(e){for(var t;t=Yt(e);)e=t.find(-1,!0).line;return e}function Jt(e){for(var t;t=Xt(e);)e=t.find(1,!0).line;return e}function er(e){for(var t,r;t=Xt(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function tr(e,t){var r=Qe(e,t),n=Kt(r);return r==n?t:tt(n)}function rr(e,t){if(t>e.lastLine())return t;var r,n=Qe(e,t);if(!nr(e,n))return t;for(;r=Xt(n);)n=r.find(1,!0).line;return tt(n)+1}function nr(e,t){var r=Tt&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&ir(e,t,n))return!0}}function ir(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return ir(e,n.line,Dt(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,s=0;s<t.markedSpans.length;++s)if((i=t.markedSpans[s]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&ir(e,t,i))return!0}function sr(e){for(var t=0,r=(e=Kt(e)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var s=r.parent;s;s=(r=s).parent)for(var o=0;o<s.children.length;++o){var a=s.children[o];if(a==r)break;t+=a.height}return t}function or(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=Yt(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=Xt(n);){var s=t.find(0,!0);r-=n.text.length-s.from.ch,r+=(n=s.to.line).text.length-s.to.ch}return r}function ar(e){var t=e.display,r=e.doc;t.maxLine=Qe(r,r.first),t.maxLineLength=or(t.maxLine),t.maxLineChanged=!0,r.iter((function(e){var r=or(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)}))}var lr=function(e,t,r){this.text=e,jt(this,t),this.height=r?r(this):1};function ur(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ut(e),jt(e,r);var i=n?n(e):1;i!=e.height&&et(e,i)}function cr(e){e.parent=null,Ut(e)}lr.prototype.lineNo=function(){return tt(this)},we(lr);var pr={},hr={};function dr(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?hr:pr;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function fr(e,t){var r=T("span",null,null,l?"padding-right: .1px":null),n={pre:T("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var i=0;i<=(t.rest?t.rest.length:0);i++){var s=i?t.rest[i-1]:t.line,o=void 0;n.pos=0,n.addToken=gr,Ie(e.display.measure)&&(o=he(s,e.doc.direction))&&(n.addToken=vr(n.addToken,o)),n.map=[],xr(s,n,vt(e,s,t!=e.display.externalMeasured&&tt(s))),s.styleClasses&&(s.styleClasses.bgClass&&(n.bgClass=D(s.styleClasses.bgClass,n.bgClass||"")),s.styleClasses.textClass&&(n.textClass=D(s.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Oe(e.display.measure))),0==i?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(l){var a=n.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return ye(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=D(n.pre.className,n.textClass||"")),n}function mr(e){var t=C("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function gr(e,t,r,n,i,s,l){if(t){var u,c=e.splitSpaces?yr(t,e.trailingSpace):t,p=e.cm.state.specialChars,h=!1;if(p.test(t)){u=document.createDocumentFragment();for(var d=0;;){p.lastIndex=d;var f=p.exec(t),m=f?f.index-d:t.length-d;if(m){var g=document.createTextNode(c.slice(d,d+m));o&&a<9?u.appendChild(C("span",[g])):u.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;d+=m+1;var y=void 0;if("\t"==f[0]){var v=e.cm.options.tabSize,b=v-e.col%v;(y=u.appendChild(C("span",Y(b),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),e.col+=b}else"\r"==f[0]||"\n"==f[0]?((y=u.appendChild(C("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((y=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),o&&a<9?u.appendChild(C("span",[y])):u.appendChild(y),e.col+=1);e.map.push(e.pos,e.pos+1,y),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),o&&a<9&&(h=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),r||n||i||h||s||l){var x=r||"";n&&(x+=n),i&&(x+=i);var w=C("span",[u],x,s);if(l)for(var _ in l)l.hasOwnProperty(_)&&"style"!=_&&"class"!=_&&w.setAttribute(_,l[_]);return e.content.appendChild(w)}e.content.appendChild(u)}}function yr(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var s=e.charAt(i);" "!=s||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(s=" "),n+=s,r=" "==s}return n}function vr(e,t){return function(r,n,i,s,o,a,l){i=i?i+" cm-force-border":"cm-force-border";for(var u=r.pos,c=u+n.length;;){for(var p=void 0,h=0;h<t.length&&!((p=t[h]).to>u&&p.from<=u);h++);if(p.to>=c)return e(r,n,i,s,o,a,l);e(r,n.slice(0,p.to-u),i,s,null,a,l),s=null,n=n.slice(p.to-u),u=p.to}}}function br(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function xr(e,t,r){var n=e.markedSpans,i=e.text,s=0;if(n)for(var o,a,l,u,c,p,h,d=i.length,f=0,m=1,g="",y=0;;){if(y==f){l=u=c=a="",h=null,p=null,y=1/0;for(var v=[],b=void 0,x=0;x<n.length;++x){var w=n[x],_=w.marker;if("bookmark"==_.type&&w.from==f&&_.widgetNode)v.push(_);else if(w.from<=f&&(null==w.to||w.to>f||_.collapsed&&w.to==f&&w.from==f)){if(null!=w.to&&w.to!=f&&y>w.to&&(y=w.to,u=""),_.className&&(l+=" "+_.className),_.css&&(a=(a?a+";":"")+_.css),_.startStyle&&w.from==f&&(c+=" "+_.startStyle),_.endStyle&&w.to==y&&(b||(b=[])).push(_.endStyle,w.to),_.title&&((h||(h={})).title=_.title),_.attributes)for(var E in _.attributes)(h||(h={}))[E]=_.attributes[E];_.collapsed&&(!p||Ht(p.marker,_)<0)&&(p=w)}else w.from>f&&y>w.from&&(y=w.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==y&&(u+=" "+b[S]);if(!p||p.from==f)for(var A=0;A<v.length;++A)br(t,0,v[A]);if(p&&(p.from||0)==f){if(br(t,(null==p.to?d+1:p.to)-f,p.marker,null==p.from),null==p.to)return;p.to==f&&(p=!1)}}if(f>=d)break;for(var N=Math.min(d,y);;){if(g){var k=f+g.length;if(!p){var M=k>N?g.slice(0,N-f):g;t.addToken(t,M,o?o+l:l,c,f+M.length==y?u:"",a,h)}if(k>=N){g=g.slice(N-f),f=N;break}f=k,c=""}g=i.slice(s,s=r[m++]),o=dr(r[m++],t.cm.options)}}else for(var C=1;C<r.length;C+=2)t.addToken(t,i.slice(s,s=r[C]),dr(r[C+1],t.cm.options))}function wr(e,t,r){this.line=t,this.rest=er(t),this.size=this.rest?tt(X(this.rest))-r+1:1,this.node=this.text=null,this.hidden=nr(e,t)}function _r(e,t,r){for(var n,i=[],s=t;s<r;s=n){var o=new wr(e.doc,Qe(e.doc,s),s);n=s+o.size,i.push(o)}return i}var Er=null;function Sr(e){Er?Er.ops.push(e):e.ownsGroup=Er={ops:[e],delayedCallbacks:[]}}function Ar(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}function Nr(e,t){var r=e.ownsGroup;if(r)try{Ar(r)}finally{Er=null,t(r)}}var kr=null;function Mr(e,t){var r=me(e,t);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);Er?n=Er.delayedCallbacks:kr?n=kr:(n=kr=[],setTimeout(Cr,0));for(var s=function(e){n.push((function(){return r[e].apply(null,i)}))},o=0;o<r.length;++o)s(o)}}function Cr(){var e=kr;kr=null;for(var t=0;t<e.length;++t)e[t]()}function Tr(e,t,r,n){for(var i=0;i<t.changes.length;i++){var s=t.changes[i];"text"==s?Dr(e,t):"gutter"==s?Lr(e,t,r,n):"class"==s?Rr(e,t):"widget"==s&&qr(e,t,n)}t.changes=null}function Or(e){return e.node==e.text&&(e.node=C("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),o&&a<8&&(e.node.style.zIndex=2)),e.node}function Ir(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=Or(t);t.background=n.insertBefore(C("div",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}function Pr(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):fr(e,t)}function Dr(e,t){var r=t.text.className,n=Pr(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,Rr(e,t)):r&&(t.text.className=r)}function Rr(e,t){Ir(e,t),t.line.wrapClass?Or(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function Lr(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var i=Or(t);t.gutterBackground=C("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),i.insertBefore(t.gutterBackground,t.text)}var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var o=Or(t),a=t.gutter=C("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),e.display.input.setUneditable(a),o.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(C("div",it(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var l=0;l<e.display.gutterSpecs.length;++l){var u=e.display.gutterSpecs[l].className,c=s.hasOwnProperty(u)&&s[u];c&&a.appendChild(C("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[u]+"px; width: "+n.gutterWidth[u]+"px"))}}}function qr(e,t,r){t.alignable&&(t.alignable=null);for(var n=S("CodeMirror-linewidget"),i=t.node.firstChild,s=void 0;i;i=s)s=i.nextSibling,n.test(i.className)&&t.node.removeChild(i);Br(e,t,r)}function $r(e,t,r,n){var i=Pr(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),Rr(e,t),Lr(e,t,r,n),Br(e,t,n),t.node}function Br(e,t,r){if(zr(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)zr(e,t.rest[n],t,r,!1)}function zr(e,t,r,n,i){if(t.widgets)for(var s=Or(r),o=0,a=t.widgets;o<a.length;++o){var l=a[o],u=C("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Fr(l,u,r,n),e.display.input.setUneditable(u),i&&l.above?s.insertBefore(u,r.gutter||r.text):s.appendChild(u),Mr(l,"redraw")}}function Fr(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function Ur(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!O(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),M(t.display.measure,C("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function jr(e,t){for(var r=Ne(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function Gr(e){return e.lineSpace.offsetTop}function Vr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Hr(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=M(e.measure,C("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Wr(e){return F-e.display.nativeBarWidth}function Yr(e){return e.display.scroller.clientWidth-Wr(e)-e.display.barWidth}function Xr(e){return e.display.scroller.clientHeight-Wr(e)-e.display.barHeight}function Zr(e,t,r){var n=e.options.lineWrapping,i=n&&Yr(e);if(!t.measure.heights||n&&t.measure.width!=i){var s=t.measure.heights=[];if(n){t.measure.width=i;for(var o=t.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var l=o[a],u=o[a+1];Math.abs(l.bottom-u.bottom)>2&&s.push((l.bottom+u.top)/2-r.top)}}s.push(r.bottom-r.top)}}function Qr(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(tt(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}}function Kr(e,t){var r=tt(t=Kt(t)),n=e.display.externalMeasured=new wr(e.doc,t,r);n.lineN=r;var i=n.built=fr(e,n);return n.text=i.pre,M(e.display.lineMeasure,i.pre),n}function Jr(e,t,r,n){return rn(e,tn(e,t),r,n)}function en(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Ln(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function tn(e,t){var r=tt(t),n=en(e,r);n&&!n.text?n=null:n&&n.changes&&(Tr(e,n,r,On(e)),e.curOp.forceUpdate=!0),n||(n=Kr(e,t));var i=Qr(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function rn(e,t,r,n,i){t.before&&(r=-1);var s,o=r+(n||"");return t.cache.hasOwnProperty(o)?s=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Zr(e,t.view,t.rect),t.hasHeights=!0),(s=ln(e,t,r,n)).bogus||(t.cache[o]=s)),{left:s.left,right:s.right,top:i?s.rtop:s.top,bottom:i?s.rbottom:s.bottom}}var nn,sn={left:0,right:0,top:0,bottom:0};function on(e,t,r){for(var n,i,s,o,a,l,u=0;u<e.length;u+=3)if(a=e[u],l=e[u+1],t<a?(i=0,s=1,o="left"):t<l?s=1+(i=t-a):(u==e.length-3||t==l&&e[u+3]>t)&&(i=(s=l-a)-1,t>=l&&(o="right")),null!=i){if(n=e[u+2],a==l&&r==(n.insertLeft?"left":"right")&&(o=r),"left"==r&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)n=e[2+(u-=3)],o="left";if("right"==r&&i==l-a)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)n=e[(u+=3)+2],o="right";break}return{node:n,start:i,end:s,collapse:o,coverStart:a,coverEnd:l}}function an(e,t){var r=sn;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function ln(e,t,r,n){var i,s=on(t.map,r,n),l=s.node,u=s.start,c=s.end,p=s.collapse;if(3==l.nodeType){for(var h=0;h<4;h++){for(;u&&se(t.line.text.charAt(s.coverStart+u));)--u;for(;s.coverStart+c<s.coverEnd&&se(t.line.text.charAt(s.coverStart+c));)++c;if((i=o&&a<9&&0==u&&c==s.coverEnd-s.coverStart?l.parentNode.getBoundingClientRect():an(A(l,u,c).getClientRects(),n)).left||i.right||0==u)break;c=u,u-=1,p="right"}o&&a<11&&(i=un(e.display.measure,i))}else{var d;u>0&&(p=n="right"),i=e.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==n?d.length-1:0]:l.getBoundingClientRect()}if(o&&a<9&&!u&&(!i||!i.left&&!i.right)){var f=l.parentNode.getClientRects()[0];i=f?{left:f.left,right:f.left+Tn(e.display),top:f.top,bottom:f.bottom}:sn}for(var m=i.top-t.rect.top,g=i.bottom-t.rect.top,y=(m+g)/2,v=t.view.measure.heights,b=0;b<v.length-1&&!(y<v[b]);b++);var x=b?v[b-1]:0,w=v[b],_={left:("right"==p?i.right:i.left)-t.rect.left,right:("left"==p?i.left:i.right)-t.rect.left,top:x,bottom:w};return i.left||i.right||(_.bogus=!0),e.options.singleCursorHeightPerLine||(_.rtop=m,_.rbottom=g),_}function un(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!$e(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function cn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function pn(e){e.display.externalMeasure=null,k(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)cn(e.display.view[t])}function hn(e){pn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function dn(){return c&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function fn(){return c&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function mn(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=Ur(e.widgets[r]));return t}function gn(e,t,r,n,i){if(!i){var s=mn(t);r.top+=s,r.bottom+=s}if("line"==n)return r;n||(n="local");var o=sr(t);if("local"==n?o+=Gr(e.display):o-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();o+=a.top+("window"==n?0:fn());var l=a.left+("window"==n?0:dn());r.left+=l,r.right+=l}return r.top+=o,r.bottom+=o,r}function yn(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=dn(),i-=fn();else if("local"==r||!r){var s=e.display.sizer.getBoundingClientRect();n+=s.left,i+=s.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:n-o.left,top:i-o.top}}function vn(e,t,r,n,i){return n||(n=Qe(e.doc,t.line)),gn(e,n,Jr(e,n,t.ch,i),r)}function bn(e,t,r,n,i,s){function o(t,o){var a=rn(e,i,t,o?"right":"left",s);return o?a.left=a.right:a.right=a.left,gn(e,n,a,r)}n=n||Qe(e.doc,t.line),i||(i=tn(e,n));var a=he(n,e.doc.direction),l=t.ch,u=t.sticky;if(l>=n.text.length?(l=n.text.length,u="before"):l<=0&&(l=0,u="after"),!a)return o("before"==u?l-1:l,"before"==u);function c(e,t,r){return o(r?e-1:e,1==a[t].level!=r)}var p=ce(a,l,u),h=ue,d=c(l,p,"before"==u);return null!=h&&(d.other=c(l,h,"before"!=u)),d}function xn(e,t){var r=0;t=ht(e.doc,t),e.options.lineWrapping||(r=Tn(e.display)*t.ch);var n=Qe(e.doc,t.line),i=sr(n)+Gr(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function wn(e,t,r,n,i){var s=st(e,t,r);return s.xRel=i,n&&(s.outside=n),s}function _n(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return wn(n.first,0,null,-1,-1);var i=rt(n,r),s=n.first+n.size-1;if(i>s)return wn(n.first+n.size-1,Qe(n,s).text.length,null,1,1);t<0&&(t=0);for(var o=Qe(n,i);;){var a=Nn(e,o,i,t,r),l=Zt(o,a.ch+(a.xRel>0||a.outside>0?1:0));if(!l)return a;var u=l.find(1);if(u.line==i)return u;o=Qe(n,i=u.line)}}function En(e,t,r,n){n-=mn(t);var i=t.text.length,s=ae((function(t){return rn(e,r,t-1).bottom<=n}),i,0);return{begin:s,end:i=ae((function(t){return rn(e,r,t).top>n}),s,i)}}function Sn(e,t,r,n){return r||(r=tn(e,t)),En(e,t,r,gn(e,t,rn(e,r,n),"line").top)}function An(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function Nn(e,t,r,n,i){i-=sr(t);var s=tn(e,t),o=mn(t),a=0,l=t.text.length,u=!0,c=he(t,e.doc.direction);if(c){var p=(e.options.lineWrapping?Mn:kn)(e,t,r,s,c,n,i);a=(u=1!=p.level)?p.from:p.to-1,l=u?p.to:p.from-1}var h,d,f=null,m=null,g=ae((function(t){var r=rn(e,s,t);return r.top+=o,r.bottom+=o,!!An(r,n,i,!1)&&(r.top<=i&&r.left<=n&&(f=t,m=r),!0)}),a,l),y=!1;if(m){var v=n-m.left<m.right-n,b=v==u;g=f+(b?0:1),d=b?"after":"before",h=v?m.left:m.right}else{u||g!=l&&g!=a||g++,d=0==g?"after":g==t.text.length?"before":rn(e,s,g-(u?1:0)).bottom+o<=i==u?"after":"before";var x=bn(e,st(r,g,d),"line",t,s);h=x.left,y=i<x.top?-1:i>=x.bottom?1:0}return wn(r,g=oe(t.text,g,1),d,y,n-h)}function kn(e,t,r,n,i,s,o){var a=ae((function(a){var l=i[a],u=1!=l.level;return An(bn(e,st(r,u?l.to:l.from,u?"before":"after"),"line",t,n),s,o,!0)}),0,i.length-1),l=i[a];if(a>0){var u=1!=l.level,c=bn(e,st(r,u?l.from:l.to,u?"after":"before"),"line",t,n);An(c,s,o,!0)&&c.top>o&&(l=i[a-1])}return l}function Mn(e,t,r,n,i,s,o){var a=En(e,t,n,o),l=a.begin,u=a.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,p=null,h=0;h<i.length;h++){var d=i[h];if(!(d.from>=u||d.to<=l)){var f=rn(e,n,1!=d.level?Math.min(u,d.to)-1:Math.max(l,d.from)).right,m=f<s?s-f+1e9:f-s;(!c||p>m)&&(c=d,p=m)}}return c||(c=i[i.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function Cn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==nn){nn=C("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)nn.appendChild(document.createTextNode("x")),nn.appendChild(C("br"));nn.appendChild(document.createTextNode("x"))}M(e.measure,nn);var r=nn.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),k(e.measure),r||1}function Tn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=C("span","xxxxxxxxxx"),r=C("pre",[t],"CodeMirror-line-like");M(e.measure,r);var n=t.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function On(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,s=t.gutters.firstChild,o=0;s;s=s.nextSibling,++o){var a=e.display.gutterSpecs[o].className;r[a]=s.offsetLeft+s.clientLeft+i,n[a]=s.clientWidth}return{fixedPos:In(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function In(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Pn(e){var t=Cn(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/Tn(e.display)-3);return function(i){if(nr(e.doc,i))return 0;var s=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(s+=i.widgets[o].height);return r?s+(Math.ceil(i.text.length/n)||1)*t:s+t}}function Dn(e){var t=e.doc,r=Pn(e);t.iter((function(e){var t=r(e);t!=e.height&&et(e,t)}))}function Rn(e,t,r,n){var i=e.display;if(!r&&"true"==Ne(t).getAttribute("cm-not-content"))return null;var s,o,a=i.lineSpace.getBoundingClientRect();try{s=t.clientX-a.left,o=t.clientY-a.top}catch(p){return null}var l,u=_n(e,s,o);if(n&&u.xRel>0&&(l=Qe(e.doc,u.line).text).length==u.ch){var c=$(l,l.length,e.options.tabSize)-l.length;u=st(u.line,Math.max(0,Math.round((s-Hr(e.display).left)/Tn(e.display))-c))}return u}function Ln(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function qn(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Tt&&tr(e.doc,t)<i.viewTo&&Bn(e);else if(r<=i.viewFrom)Tt&&rr(e.doc,r+n)>i.viewFrom?Bn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)Bn(e);else if(t<=i.viewFrom){var s=zn(e,r,r+n,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=n):Bn(e)}else if(r>=i.viewTo){var o=zn(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):Bn(e)}else{var a=zn(e,t,t,-1),l=zn(e,r,r+n,1);a&&l?(i.view=i.view.slice(0,a.index).concat(_r(e,a.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=n):Bn(e)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:t<u.lineN+u.size&&(i.externalMeasured=null))}function $n(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var s=n.view[Ln(e,t)];if(null!=s.node){var o=s.changes||(s.changes=[]);-1==z(o,r)&&o.push(r)}}}function Bn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function zn(e,t,r,n){var i,s=Ln(e,t),o=e.display.view;if(!Tt||r==e.doc.first+e.doc.size)return{index:s,lineN:r};for(var a=e.display.viewFrom,l=0;l<s;l++)a+=o[l].size;if(a!=t){if(n>0){if(s==o.length-1)return null;i=a+o[s].size-t,s++}else i=a-t;t+=i,r+=i}for(;tr(e.doc,r)!=r;){if(s==(n<0?0:o.length-1))return null;r+=n*o[s-(n<0?1:0)].size,s+=n}return{index:s,lineN:r}}function Fn(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=_r(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=_r(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Ln(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(_r(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,Ln(e,r)))),n.viewTo=r}function Un(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function jn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Gn(e,t){void 0===t&&(t=!0);var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),s=n.selection=document.createDocumentFragment(),o=e.options.$customCursor;o&&(t=!0);for(var a=0;a<r.sel.ranges.length;a++)if(t||a!=r.sel.primIndex){var l=r.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var u=l.empty();if(o){var c=o(e,l);c&&Vn(e,c,i)}else(u||e.options.showCursorWhenSelecting)&&Vn(e,l.head,i);u||Wn(e,l,s)}}return n}function Vn(e,t,r){var n=bn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),i=r.appendChild(C("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var s=vn(e,t,"div",null,null),o=s.right-s.left;i.style.width=(o>0?o:e.defaultCharWidth())+"px"}if(n.other){var a=r.appendChild(C("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=n.other.left+"px",a.style.top=n.other.top+"px",a.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function Hn(e,t){return e.top-t.top||e.left-t.left}function Wn(e,t,r){var n=e.display,i=e.doc,s=document.createDocumentFragment(),o=Hr(e.display),a=o.left,l=Math.max(n.sizerWidth,Yr(e)-n.sizer.offsetLeft)-o.right,u="ltr"==i.direction;function c(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),s.appendChild(C("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?l-e:r)+"px;\n                             height: "+(n-t)+"px"))}function p(t,r,n){var s,o,p=Qe(i,t),h=p.text.length;function d(r,n){return vn(e,st(t,r),"div",p,n)}function f(t,r,n){var i=Sn(e,p,null,t),s="ltr"==r==("after"==n)?"left":"right";return d("after"==n?i.begin:i.end-(/\s/.test(p.text.charAt(i.end-1))?2:1),s)[s]}var m=he(p,i.direction);return le(m,r||0,null==n?h:n,(function(e,t,i,p){var g="ltr"==i,y=d(e,g?"left":"right"),v=d(t-1,g?"right":"left"),b=null==r&&0==e,x=null==n&&t==h,w=0==p,_=!m||p==m.length-1;if(v.top-y.top<=3){var E=(u?x:b)&&_,S=(u?b:x)&&w?a:(g?y:v).left,A=E?l:(g?v:y).right;c(S,y.top,A-S,y.bottom)}else{var N,k,M,C;g?(N=u&&b&&w?a:y.left,k=u?l:f(e,i,"before"),M=u?a:f(t,i,"after"),C=u&&x&&_?l:v.right):(N=u?f(e,i,"before"):a,k=!u&&b&&w?l:y.right,M=!u&&x&&_?a:v.left,C=u?f(t,i,"after"):l),c(N,y.top,k-N,y.bottom),y.bottom<v.top&&c(a,y.bottom,null,v.top),c(M,v.top,C-M,v.bottom)}(!s||Hn(y,s)<0)&&(s=y),Hn(v,s)<0&&(s=v),(!o||Hn(y,o)<0)&&(o=y),Hn(v,o)<0&&(o=v)})),{start:s,end:o}}var h=t.from(),d=t.to();if(h.line==d.line)p(h.line,h.ch,d.ch);else{var f=Qe(i,h.line),m=Qe(i,d.line),g=Kt(f)==Kt(m),y=p(h.line,h.ch,g?f.text.length+1:null).end,v=p(d.line,g?0:null,d.ch).start;g&&(y.top<v.top-2?(c(y.right,y.top,null,y.bottom),c(a,v.top,v.left,v.bottom)):c(y.right,y.top,v.left-y.right,y.bottom)),y.bottom<v.top&&c(a,y.bottom,null,v.top)}r.appendChild(s)}function Yn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Kn(e),t.cursorDiv.style.visibility=(r=!r)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Xn(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Qn(e))}function Zn(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Kn(e))}),100)}function Qn(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ye(e,"focus",e,t),e.state.focused=!0,P(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),l&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),Yn(e))}function Kn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ye(e,"blur",e,t),e.state.focused=!1,N(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Jn(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=Math.max(0,t.scroller.getBoundingClientRect().top),i=t.lineDiv.getBoundingClientRect().top,s=0,l=0;l<t.view.length;l++){var u=t.view[l],c=e.options.lineWrapping,p=void 0,h=0;if(!u.hidden){if(i+=u.line.height,o&&a<8){var d=u.node.offsetTop+u.node.offsetHeight;p=d-r,r=d}else{var f=u.node.getBoundingClientRect();p=f.bottom-f.top,!c&&u.text.firstChild&&(h=u.text.firstChild.getBoundingClientRect().right-f.left-1)}var m=u.line.height-p;if((m>.005||m<-.005)&&(i<n&&(s-=m),et(u.line,p),ei(u.line),u.rest))for(var g=0;g<u.rest.length;g++)ei(u.rest[g]);if(h>e.display.sizerWidth){var y=Math.ceil(h/Tn(e.display));y>e.display.maxLineLength&&(e.display.maxLineLength=y,e.display.maxLine=u.line,e.display.maxLineChanged=!0)}}}Math.abs(s)>2&&(t.scroller.scrollTop+=s)}function ei(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function ti(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-Gr(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,s=rt(t,n),o=rt(t,i);if(r&&r.ensure){var a=r.ensure.from.line,l=r.ensure.to.line;a<s?(s=a,o=rt(t,sr(Qe(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=o&&(s=rt(t,sr(Qe(t,l))-e.wrapper.clientHeight),o=l)}return{from:s,to:Math.max(o,s+1)}}function ri(e,t){if(!ve(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),i=null;if(t.top+n.top<0?i=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!f){var s=C("div","​",null,"position: absolute;\n                         top: "+(t.top-r.viewOffset-Gr(e.display))+"px;\n                         height: "+(t.bottom-t.top+Wr(e)+r.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(i),e.display.lineSpace.removeChild(s)}}}function ni(e,t,r,n){var i;null==n&&(n=0),e.options.lineWrapping||t!=r||(r="before"==t.sticky?st(t.line,t.ch+1,"before"):t,t=t.ch?st(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var s=0;s<5;s++){var o=!1,a=bn(e,t),l=r&&r!=t?bn(e,r):a,u=si(e,i={left:Math.min(a.left,l.left),top:Math.min(a.top,l.top)-n,right:Math.max(a.left,l.left),bottom:Math.max(a.bottom,l.bottom)+n}),c=e.doc.scrollTop,p=e.doc.scrollLeft;if(null!=u.scrollTop&&(hi(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(o=!0)),null!=u.scrollLeft&&(fi(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-p)>1&&(o=!0)),!o)break}return i}function ii(e,t){var r=si(e,t);null!=r.scrollTop&&hi(e,r.scrollTop),null!=r.scrollLeft&&fi(e,r.scrollLeft)}function si(e,t){var r=e.display,n=Cn(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,s=Xr(e),o={};t.bottom-t.top>s&&(t.bottom=t.top+s);var a=e.doc.height+Vr(r),l=t.top<n,u=t.bottom>a-n;if(t.top<i)o.scrollTop=l?0:t.top;else if(t.bottom>i+s){var c=Math.min(t.top,(u?a:t.bottom)-s);c!=i&&(o.scrollTop=c)}var p=e.options.fixedGutter?0:r.gutters.offsetWidth,h=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft-p,d=Yr(e)-r.gutters.offsetWidth,f=t.right-t.left>d;return f&&(t.right=t.left+d),t.left<10?o.scrollLeft=0:t.left<h?o.scrollLeft=Math.max(0,t.left+p-(f?0:10)):t.right>d+h-3&&(o.scrollLeft=t.right+(f?0:10)-d),o}function oi(e,t){null!=t&&(ci(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function ai(e){ci(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function li(e,t,r){null==t&&null==r||ci(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function ui(e,t){ci(e),e.curOp.scrollToPos=t}function ci(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,pi(e,xn(e,t.from),xn(e,t.to),t.margin))}function pi(e,t,r,n){var i=si(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});li(e,i.scrollLeft,i.scrollTop)}function hi(e,t){Math.abs(e.doc.scrollTop-t)<2||(r||ji(e,{top:t}),di(e,t,!0),r&&ji(e),Ri(e,100))}function di(e,t,r){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function fi(e,t,r,n){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,Wi(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function mi(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Vr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Wr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var gi=function(e,t,r){this.cm=r;var n=this.vert=C("div",[C("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=C("div",[C("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=i.tabIndex=-1,e(n),e(i),fe(n,"scroll",(function(){n.clientHeight&&t(n.scrollTop,"vertical")})),fe(i,"scroll",(function(){i.clientWidth&&t(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,o&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};gi.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+s)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},gi.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},gi.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},gi.prototype.zeroWidthHack=function(){var e=v&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},gi.prototype.enableZeroWidthBar=function(e,t,r){function n(){var i=e.getBoundingClientRect();("vert"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},gi.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var yi=function(){};function vi(e,t){t||(t=mi(e));var r=e.display.barWidth,n=e.display.barHeight;bi(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&Jn(e),bi(e,mi(e)),r=e.display.barWidth,n=e.display.barHeight}function bi(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}yi.prototype.update=function(){return{bottom:0,right:0}},yi.prototype.setScrollLeft=function(){},yi.prototype.setScrollTop=function(){},yi.prototype.clear=function(){};var xi={native:gi,null:yi};function wi(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&N(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new xi[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),fe(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,r){"horizontal"==r?fi(e,t):hi(e,t)}),e),e.display.scrollbars.addClass&&P(e.display.wrapper,e.display.scrollbars.addClass)}var _i=0;function Ei(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++_i,markArrays:null},Sr(e.curOp)}function Si(e){var t=e.curOp;t&&Nr(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;Ai(e)}))}function Ai(e){for(var t=e.ops,r=0;r<t.length;r++)Ni(t[r]);for(var n=0;n<t.length;n++)ki(t[n]);for(var i=0;i<t.length;i++)Mi(t[i]);for(var s=0;s<t.length;s++)Ci(t[s]);for(var o=0;o<t.length;o++)Ti(t[o])}function Ni(e){var t=e.cm,r=t.display;$i(t),e.updateMaxLine&&ar(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new qi(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function ki(e){e.updatedDisplay=e.mustUpdate&&Fi(e.cm,e.update)}function Mi(e){var t=e.cm,r=t.display;e.updatedDisplay&&Jn(t),e.barMeasure=mi(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Jr(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Wr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Yr(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Ci(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&fi(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==I();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&vi(t,e.barMeasure),e.updatedDisplay&&Hi(t,e.barMeasure),e.selectionChanged&&Yn(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&Xn(e.cm)}function Ti(e){var t=e.cm,r=t.display,n=t.doc;e.updatedDisplay&&Ui(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&di(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&fi(t,e.scrollLeft,!0,!0),e.scrollToPos&&ri(t,ni(t,ht(n,e.scrollToPos.from),ht(n,e.scrollToPos.to),e.scrollToPos.margin));var i=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(i)for(var o=0;o<i.length;++o)i[o].lines.length||ye(i[o],"hide");if(s)for(var a=0;a<s.length;++a)s[a].lines.length&&ye(s[a],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ye(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Oi(e,t){if(e.curOp)return t();Ei(e);try{return t()}finally{Si(e)}}function Ii(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ei(e);try{return t.apply(e,arguments)}finally{Si(e)}}}function Pi(e){return function(){if(this.curOp)return e.apply(this,arguments);Ei(this);try{return e.apply(this,arguments)}finally{Si(this)}}}function Di(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ei(t);try{return e.apply(this,arguments)}finally{Si(t)}}}function Ri(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,L(Li,e))}function Li(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=bt(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(s){if(n.line>=e.display.viewFrom){var o=s.styles,a=s.text.length>e.options.maxHighlightLength?We(t.mode,n.state):null,l=yt(e,s,n,!0);a&&(n.state=a),s.styles=l.styles;var u=s.styleClasses,c=l.classes;c?s.styleClasses=c:u&&(s.styleClasses=null);for(var p=!o||o.length!=s.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),h=0;!p&&h<o.length;++h)p=o[h]!=s.styles[h];p&&i.push(n.line),s.stateAfter=n.save(),n.nextLine()}else s.text.length<=e.options.maxHighlightLength&&xt(e,s.text,n),s.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return Ri(e,e.options.workDelay),!0})),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&Oi(e,(function(){for(var t=0;t<i.length;t++)$n(e,i[t],"text")}))}}var qi=function(e,t,r){var n=e.display;this.viewport=t,this.visible=ti(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Yr(e),this.force=r,this.dims=On(e),this.events=[]};function $i(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Wr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Wr(e)+"px",t.scrollbarsClipped=!0)}function Bi(e){if(e.hasFocus())return null;var t=I();if(!t||!O(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&O(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}function zi(e){if(e&&e.activeElt&&e.activeElt!=I()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&O(document.body,e.anchorNode)&&O(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}function Fi(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return Bn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==Un(e))return!1;Yi(e)&&(Bn(e),t.dims=On(e));var i=n.first+n.size,s=Math.max(t.visible.from-e.options.viewportMargin,n.first),o=Math.min(i,t.visible.to+e.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(n.first,r.viewFrom)),r.viewTo>o&&r.viewTo-o<20&&(o=Math.min(i,r.viewTo)),Tt&&(s=tr(e.doc,s),o=rr(e.doc,o));var a=s!=r.viewFrom||o!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;Fn(e,s,o),r.viewOffset=sr(Qe(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=Un(e);if(!a&&0==l&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var u=Bi(e);return l>4&&(r.lineDiv.style.display="none"),Gi(e,r.updateLineNumbers,t.dims),l>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,zi(u),k(r.cursorDiv),k(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,a&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,Ri(e,400)),r.updateLineNumbers=null,!0}function Ui(e,t){for(var r=t.viewport,n=!0;;n=!1){if(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Yr(e))n&&(t.visible=ti(e.display,e.doc,r));else if(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Vr(e.display)-Xr(e),r.top)}),t.visible=ti(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!Fi(e,t))break;Jn(e);var i=mi(e);jn(e),vi(e,i),Hi(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ji(e,t){var r=new qi(e,t);if(Fi(e,r)){Jn(e),Ui(e,r);var n=mi(e);jn(e),vi(e,n),Hi(e,n),r.finish()}}function Gi(e,t,r){var n=e.display,i=e.options.lineNumbers,s=n.lineDiv,o=s.firstChild;function a(t){var r=t.nextSibling;return l&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var u=n.view,c=n.viewFrom,p=0;p<u.length;p++){var h=u[p];if(h.hidden);else if(h.node&&h.node.parentNode==s){for(;o!=h.node;)o=a(o);var d=i&&null!=t&&t<=c&&h.lineNumber;h.changes&&(z(h.changes,"gutter")>-1&&(d=!1),Tr(e,h,c,r)),d&&(k(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(it(e.options,c)))),o=h.node.nextSibling}else{var f=$r(e,h,c,r);s.insertBefore(f,o)}c+=h.size}for(;o;)o=a(o)}function Vi(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px",Mr(e,"gutterChanged",e)}function Hi(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Wr(e)+"px"}function Wi(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=In(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,s=n+"px",o=0;o<r.length;o++)if(!r[o].hidden){e.options.fixedGutter&&(r[o].gutter&&(r[o].gutter.style.left=s),r[o].gutterBackground&&(r[o].gutterBackground.style.left=s));var a=r[o].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function Yi(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=it(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(C("div",[C("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(s,n.lineGutter.offsetWidth-o)+1,n.lineNumWidth=n.lineNumInnerWidth+o,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",Vi(e.display),!0}return!1}function Xi(e,t){for(var r=[],n=!1,i=0;i<e.length;i++){var s=e[i],o=null;if("string"!=typeof s&&(o=s.style,s=s.className),"CodeMirror-linenumbers"==s){if(!t)continue;n=!0}r.push({className:s,style:o})}return t&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function Zi(e){var t=e.gutters,r=e.gutterSpecs;k(t),e.lineGutter=null;for(var n=0;n<r.length;++n){var i=r[n],s=i.className,o=i.style,a=t.appendChild(C("div",null,"CodeMirror-gutter "+s));o&&(a.style.cssText=o),"CodeMirror-linenumbers"==s&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=r.length?"":"none",Vi(e)}function Qi(e){Zi(e.display),qn(e),Wi(e)}function Ki(e,t,n,i){var s=this;this.input=n,s.scrollbarFiller=C("div",null,"CodeMirror-scrollbar-filler"),s.scrollbarFiller.setAttribute("cm-not-content","true"),s.gutterFiller=C("div",null,"CodeMirror-gutter-filler"),s.gutterFiller.setAttribute("cm-not-content","true"),s.lineDiv=T("div",null,"CodeMirror-code"),s.selectionDiv=C("div",null,null,"position: relative; z-index: 1"),s.cursorDiv=C("div",null,"CodeMirror-cursors"),s.measure=C("div",null,"CodeMirror-measure"),s.lineMeasure=C("div",null,"CodeMirror-measure"),s.lineSpace=T("div",[s.measure,s.lineMeasure,s.selectionDiv,s.cursorDiv,s.lineDiv],null,"position: relative; outline: none");var u=T("div",[s.lineSpace],"CodeMirror-lines");s.mover=C("div",[u],null,"position: relative"),s.sizer=C("div",[s.mover],"CodeMirror-sizer"),s.sizerWidth=null,s.heightForcer=C("div",null,null,"position: absolute; height: "+F+"px; width: 1px;"),s.gutters=C("div",null,"CodeMirror-gutters"),s.lineGutter=null,s.scroller=C("div",[s.sizer,s.heightForcer,s.gutters],"CodeMirror-scroll"),s.scroller.setAttribute("tabIndex","-1"),s.wrapper=C("div",[s.scrollbarFiller,s.gutterFiller,s.scroller],"CodeMirror"),s.wrapper.setAttribute("translate","no"),o&&a<8&&(s.gutters.style.zIndex=-1,s.scroller.style.paddingRight=0),l||r&&y||(s.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(s.wrapper):e(s.wrapper)),s.viewFrom=s.viewTo=t.first,s.reportedViewFrom=s.reportedViewTo=t.first,s.view=[],s.renderedView=null,s.externalMeasured=null,s.viewOffset=0,s.lastWrapHeight=s.lastWrapWidth=0,s.updateLineNumbers=null,s.nativeBarWidth=s.barHeight=s.barWidth=0,s.scrollbarsClipped=!1,s.lineNumWidth=s.lineNumInnerWidth=s.lineNumChars=null,s.alignWidgets=!1,s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.maxLine=null,s.maxLineLength=0,s.maxLineChanged=!1,s.wheelDX=s.wheelDY=s.wheelStartX=s.wheelStartY=null,s.shift=!1,s.selForContextMenu=null,s.activeTouch=null,s.gutterSpecs=Xi(i.gutters,i.lineNumbers),Zi(s),n.init(s)}qi.prototype.signal=function(e,t){xe(e,t)&&this.events.push(arguments)},qi.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ye.apply(null,this.events[e])};var Ji=0,es=null;function ts(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function rs(e){var t=ts(e);return t.x*=es,t.y*=es,t}function ns(e,t){var n=ts(t),i=n.x,s=n.y,o=es;0===t.deltaMode&&(i=t.deltaX,s=t.deltaY,o=1);var a=e.display,u=a.scroller,c=u.scrollWidth>u.clientWidth,h=u.scrollHeight>u.clientHeight;if(i&&c||s&&h){if(s&&v&&l)e:for(var d=t.target,f=a.view;d!=u;d=d.parentNode)for(var m=0;m<f.length;m++)if(f[m].node==d){e.display.currentWheelTarget=d;break e}if(i&&!r&&!p&&null!=o)return s&&h&&hi(e,Math.max(0,u.scrollTop+s*o)),fi(e,Math.max(0,u.scrollLeft+i*o)),(!s||s&&h)&&_e(t),void(a.wheelStartX=null);if(s&&null!=o){var g=s*o,y=e.doc.scrollTop,b=y+a.wrapper.clientHeight;g<0?y=Math.max(0,y+g-50):b=Math.min(e.doc.height,b+g+50),ji(e,{top:y,bottom:b})}Ji<20&&0!==t.deltaMode&&(null==a.wheelStartX?(a.wheelStartX=u.scrollLeft,a.wheelStartY=u.scrollTop,a.wheelDX=i,a.wheelDY=s,setTimeout((function(){if(null!=a.wheelStartX){var e=u.scrollLeft-a.wheelStartX,t=u.scrollTop-a.wheelStartY,r=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,r&&(es=(es*Ji+r)/(Ji+1),++Ji)}}),200)):(a.wheelDX+=i,a.wheelDY+=s))}}o?es=-.53:r?es=15:c?es=-.7:h&&(es=-1/3);var is=function(e,t){this.ranges=e,this.primIndex=t};is.prototype.primary=function(){return this.ranges[this.primIndex]},is.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!at(r.anchor,n.anchor)||!at(r.head,n.head))return!1}return!0},is.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new ss(lt(this.ranges[t].anchor),lt(this.ranges[t].head));return new is(e,this.primIndex)},is.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},is.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(ot(t,n.from())>=0&&ot(e,n.to())<=0)return r}return-1};var ss=function(e,t){this.anchor=e,this.head=t};function os(e,t,r){var n=e&&e.options.selectionsMayTouch,i=t[r];t.sort((function(e,t){return ot(e.from(),t.from())})),r=z(t,i);for(var s=1;s<t.length;s++){var o=t[s],a=t[s-1],l=ot(a.to(),o.from());if(n&&!o.empty()?l>0:l>=0){var u=ct(a.from(),o.from()),c=ut(a.to(),o.to()),p=a.empty()?o.from()==o.head:a.from()==a.head;s<=r&&--r,t.splice(--s,2,new ss(p?c:u,p?u:c))}}return new is(t,r)}function as(e,t){return new is([new ss(e,t||e)],0)}function ls(e){return e.text?st(e.from.line+e.text.length-1,X(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function us(e,t){if(ot(e,t.from)<0)return e;if(ot(e,t.to)<=0)return ls(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=ls(t).ch-t.to.ch),st(r,n)}function cs(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var i=e.sel.ranges[n];r.push(new ss(us(i.anchor,t),us(i.head,t)))}return os(e.cm,r,e.sel.primIndex)}function ps(e,t,r){return e.line==t.line?st(r.line,e.ch-t.ch+r.ch):st(r.line+(e.line-t.line),e.ch)}function hs(e,t,r){for(var n=[],i=st(e.first,0),s=i,o=0;o<t.length;o++){var a=t[o],l=ps(a.from,i,s),u=ps(ls(a),i,s);if(i=a.to,s=u,"around"==r){var c=e.sel.ranges[o],p=ot(c.head,c.anchor)<0;n[o]=new ss(p?u:l,p?l:u)}else n[o]=new ss(l,l)}return new is(n,e.sel.primIndex)}function ds(e){e.doc.mode=Ge(e.options,e.doc.modeOption),fs(e)}function fs(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Ri(e,100),e.state.modeGen++,e.curOp&&qn(e)}function ms(e,t){return 0==t.from.ch&&0==t.to.ch&&""==X(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function gs(e,t,r,n){function i(e){return r?r[e]:null}function s(e,r,i){ur(e,r,i,n),Mr(e,"change",e,t)}function o(e,t){for(var r=[],s=e;s<t;++s)r.push(new lr(u[s],i(s),n));return r}var a=t.from,l=t.to,u=t.text,c=Qe(e,a.line),p=Qe(e,l.line),h=X(u),d=i(u.length-1),f=l.line-a.line;if(t.full)e.insert(0,o(0,u.length)),e.remove(u.length,e.size-u.length);else if(ms(e,t)){var m=o(0,u.length-1);s(p,p.text,d),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(c==p)if(1==u.length)s(c,c.text.slice(0,a.ch)+h+c.text.slice(l.ch),d);else{var g=o(1,u.length-1);g.push(new lr(h+c.text.slice(l.ch),d,n)),s(c,c.text.slice(0,a.ch)+u[0],i(0)),e.insert(a.line+1,g)}else if(1==u.length)s(c,c.text.slice(0,a.ch)+u[0]+p.text.slice(l.ch),i(0)),e.remove(a.line+1,f);else{s(c,c.text.slice(0,a.ch)+u[0],i(0)),s(p,h+p.text.slice(l.ch),d);var y=o(1,u.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,y)}Mr(e,"change",e,t)}function ys(e,t,r){function n(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var a=e.linked[o];if(a.doc!=i){var l=s&&a.sharedHist;r&&!l||(t(a.doc,l),n(a.doc,e,l))}}}n(e,null,!0)}function vs(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Dn(e),ds(e),bs(e),e.options.direction=t.direction,e.options.lineWrapping||ar(e),e.options.mode=t.modeOption,qn(e)}function bs(e){("rtl"==e.doc.direction?P:N)(e.display.lineDiv,"CodeMirror-rtl")}function xs(e){Oi(e,(function(){bs(e),qn(e)}))}function ws(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function _s(e,t){var r={from:lt(t.from),to:ls(t),text:Ke(e,t.from,t.to)};return Cs(e,r,t.from.line,t.to.line+1),ys(e,(function(e){return Cs(e,r,t.from.line,t.to.line+1)}),!0),r}function Es(e){for(;e.length&&X(e).ranges;)e.pop()}function Ss(e,t){return t?(Es(e.done),X(e.done)):e.done.length&&!X(e.done).ranges?X(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),X(e.done)):void 0}function As(e,t,r,n){var i=e.history;i.undone.length=0;var s,o,a=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(s=Ss(i,i.lastOp==n)))o=X(s.changes),0==ot(t.from,t.to)&&0==ot(t.from,o.to)?o.to=ls(t):s.changes.push(_s(e,t));else{var l=X(i.done);for(l&&l.ranges||Ms(e.sel,i.done),s={changes:[_s(e,t)],generation:i.generation},i.done.push(s);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,o||ye(e,"historyAdded")}function Ns(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ks(e,t,r,n){var i=e.history,s=n&&n.origin;r==i.lastSelOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||Ns(e,s,X(i.done),t))?i.done[i.done.length-1]=t:Ms(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=s,i.lastSelOp=r,n&&!1!==n.clearRedo&&Es(i.undone)}function Ms(e,t){var r=X(t);r&&r.ranges&&r.equals(e)||t.push(e)}function Cs(e,t,r,n){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),(function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=r.markedSpans),++s}))}function Ts(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Os(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(Ts(r[i]));return n}function Is(e,t){var r=Os(e,t),n=Bt(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var s=r[i],o=n[i];if(s&&o)e:for(var a=0;a<o.length;++a){for(var l=o[a],u=0;u<s.length;++u)if(s[u].marker==l.marker)continue e;s.push(l)}else o&&(r[i]=o)}return r}function Ps(e,t,r){for(var n=[],i=0;i<e.length;++i){var s=e[i];if(s.ranges)n.push(r?is.prototype.deepCopy.call(s):s);else{var o=s.changes,a=[];n.push({changes:a});for(var l=0;l<o.length;++l){var u=o[l],c=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var p in u)(c=p.match(/^spans_(\d+)$/))&&z(t,Number(c[1]))>-1&&(X(a)[p]=u[p],delete u[p])}}}return n}function Ds(e,t,r,n){if(n){var i=e.anchor;if(r){var s=ot(t,i)<0;s!=ot(r,i)<0?(i=t,t=r):s!=ot(t,r)<0&&(t=r)}return new ss(i,t)}return new ss(r||t,t)}function Rs(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),Fs(e,new is([Ds(e.sel.primary(),t,r,i)],0),n)}function Ls(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),s=0;s<e.sel.ranges.length;s++)n[s]=Ds(e.sel.ranges[s],t[s],null,i);Fs(e,os(e.cm,n,e.sel.primIndex),r)}function qs(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,Fs(e,os(e.cm,i,e.sel.primIndex),n)}function $s(e,t,r,n){Fs(e,as(t,r),n)}function Bs(e,t,r){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new ss(ht(e,t[r].anchor),ht(e,t[r].head))},origin:r&&r.origin};return ye(e,"beforeSelectionChange",e,n),e.cm&&ye(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?os(e.cm,n.ranges,n.ranges.length-1):t}function zs(e,t,r){var n=e.history.done,i=X(n);i&&i.ranges?(n[n.length-1]=t,Us(e,t,r)):Fs(e,t,r)}function Fs(e,t,r){Us(e,t,r),ks(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Us(e,t,r){(xe(e,"beforeSelectionChange")||e.cm&&xe(e.cm,"beforeSelectionChange"))&&(t=Bs(e,t,r));var n=r&&r.bias||(ot(t.primary().head,e.sel.primary().head)<0?-1:1);js(e,Vs(e,t,n,!0)),r&&!1===r.scroll||!e.cm||"nocursor"==e.cm.getOption("readOnly")||ai(e.cm)}function js(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,be(e.cm)),Mr(e,"cursorActivity",e))}function Gs(e){js(e,Vs(e,e.sel,null,!1))}function Vs(e,t,r,n){for(var i,s=0;s<t.ranges.length;s++){var o=t.ranges[s],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[s],l=Ws(e,o.anchor,a&&a.anchor,r,n),u=Ws(e,o.head,a&&a.head,r,n);(i||l!=o.anchor||u!=o.head)&&(i||(i=t.ranges.slice(0,s)),i[s]=new ss(l,u))}return i?os(e.cm,i,t.primIndex):t}function Hs(e,t,r,n,i){var s=Qe(e,t.line);if(s.markedSpans)for(var o=0;o<s.markedSpans.length;++o){var a=s.markedSpans[o],l=a.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==a.from||(u?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(c?a.to>=t.ch:a.to>t.ch))){if(i&&(ye(l,"beforeCursorEnter"),l.explicitlyCleared)){if(s.markedSpans){--o;continue}break}if(!l.atomic)continue;if(r){var p=l.find(n<0?1:-1),h=void 0;if((n<0?c:u)&&(p=Ys(e,p,-n,p&&p.line==t.line?s:null)),p&&p.line==t.line&&(h=ot(p,r))&&(n<0?h<0:h>0))return Hs(e,p,t,n,i)}var d=l.find(n<0?-1:1);return(n<0?u:c)&&(d=Ys(e,d,n,d.line==t.line?s:null)),d?Hs(e,d,t,n,i):null}}return t}function Ws(e,t,r,n,i){var s=n||1,o=Hs(e,t,r,s,i)||!i&&Hs(e,t,r,s,!0)||Hs(e,t,r,-s,i)||!i&&Hs(e,t,r,-s,!0);return o||(e.cantEdit=!0,st(e.first,0))}function Ys(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?ht(e,st(t.line-1)):null:r>0&&t.ch==(n||Qe(e,t.line)).text.length?t.line<e.first+e.size-1?st(t.line+1,0):null:new st(t.line,t.ch+r)}function Xs(e){e.setSelection(st(e.firstLine(),0),st(e.lastLine()),j)}function Zs(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(t,r,i,s){t&&(n.from=ht(e,t)),r&&(n.to=ht(e,r)),i&&(n.text=i),void 0!==s&&(n.origin=s)}),ye(e,"beforeChange",e,n),e.cm&&ye(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Qs(e,t,r){if(e.cm){if(!e.cm.curOp)return Ii(e.cm,Qs)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(xe(e,"beforeChange")||e.cm&&xe(e.cm,"beforeChange"))||(t=Zs(e,t,!0))){var n=Ct&&!r&&Ft(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)Ks(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else Ks(e,t)}}function Ks(e,t){if(1!=t.text.length||""!=t.text[0]||0!=ot(t.from,t.to)){var r=cs(e,t);As(e,t,r,e.cm?e.cm.curOp.id:NaN),to(e,t,r,Bt(e,t));var n=[];ys(e,(function(e,r){r||-1!=z(n,e.history)||(oo(e.history,t),n.push(e.history)),to(e,t,null,Bt(e,t))}))}}function Js(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!n||r){for(var i,s=e.history,o=e.sel,a="undo"==t?s.done:s.undone,l="undo"==t?s.undone:s.done,u=0;u<a.length&&(i=a[u],r?!i.ranges||i.equals(e.sel):i.ranges);u++);if(u!=a.length){for(s.lastOrigin=s.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(n)return void a.push(i);break}if(Ms(i,l),r&&!i.equals(e.sel))return void Fs(e,i,{clearRedo:!1});o=i}var c=[];Ms(o,l),l.push({changes:c,generation:s.generation}),s.generation=i.generation||++s.maxGeneration;for(var p=xe(e,"beforeChange")||e.cm&&xe(e.cm,"beforeChange"),h=function(r){var n=i.changes[r];if(n.origin=t,p&&!Zs(e,n,!1))return a.length=0,{};c.push(_s(e,n));var s=r?cs(e,n):X(a);to(e,n,s,Is(e,n)),!r&&e.cm&&e.cm.scrollIntoView({from:n.from,to:ls(n)});var o=[];ys(e,(function(e,t){t||-1!=z(o,e.history)||(oo(e.history,n),o.push(e.history)),to(e,n,null,Is(e,n))}))},d=i.changes.length-1;d>=0;--d){var f=h(d);if(f)return f.v}}}}function eo(e,t){if(0!=t&&(e.first+=t,e.sel=new is(Z(e.sel.ranges,(function(e){return new ss(st(e.anchor.line+t,e.anchor.ch),st(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){qn(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)$n(e.cm,n,"gutter")}}function to(e,t,r,n){if(e.cm&&!e.cm.curOp)return Ii(e.cm,to)(e,t,r,n);if(t.to.line<e.first)eo(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);eo(e,i),t={from:st(e.first,0),to:st(t.to.line+i,t.to.ch),text:[X(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:st(s,Qe(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ke(e,t.from,t.to),r||(r=cs(e,t)),e.cm?ro(e.cm,t,n):gs(e,t,n),Us(e,r,j),e.cantEdit&&Ws(e,st(e.firstLine(),0))&&(e.cantEdit=!1)}}function ro(e,t,r){var n=e.doc,i=e.display,s=t.from,o=t.to,a=!1,l=s.line;e.options.lineWrapping||(l=tt(Kt(Qe(n,s.line))),n.iter(l,o.line+1,(function(e){if(e==i.maxLine)return a=!0,!0}))),n.sel.contains(t.from,t.to)>-1&&be(e),gs(n,t,r,Pn(e)),e.options.lineWrapping||(n.iter(l,s.line+t.text.length,(function(e){var t=or(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),Mt(n,s.line),Ri(e,400);var u=t.text.length-(o.line-s.line)-1;t.full?qn(e):s.line!=o.line||1!=t.text.length||ms(e.doc,t)?qn(e,s.line,o.line+1,u):$n(e,s.line,"text");var c=xe(e,"changes"),p=xe(e,"change");if(p||c){var h={from:s,to:o,text:t.text,removed:t.removed,origin:t.origin};p&&Mr(e,"change",e,h),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function no(e,t,r,n,i){var s;n||(n=r),ot(n,r)<0&&(r=(s=[n,r])[0],n=s[1]),"string"==typeof t&&(t=e.splitLines(t)),Qs(e,{from:r,to:n,text:t,origin:i})}function io(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function so(e,t,r,n){for(var i=0;i<e.length;++i){var s=e[i],o=!0;if(s.ranges){s.copied||((s=e[i]=s.deepCopy()).copied=!0);for(var a=0;a<s.ranges.length;a++)io(s.ranges[a].anchor,t,r,n),io(s.ranges[a].head,t,r,n)}else{for(var l=0;l<s.changes.length;++l){var u=s.changes[l];if(r<u.from.line)u.from=st(u.from.line+n,u.from.ch),u.to=st(u.to.line+n,u.to.ch);else if(t<=u.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}}function oo(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;so(e.done,r,n,i),so(e.undone,r,n,i)}function ao(e,t,r,n){var i=t,s=t;return"number"==typeof t?s=Qe(e,pt(e,t)):i=tt(t),null==i?null:(n(s,i)&&e.cm&&$n(e.cm,i,r),s)}function lo(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}function uo(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var i=e[n];t+=i.chunkSize(),r+=i.height,i.parent=this}this.size=t,this.height=r,this.parent=null}ss.prototype.from=function(){return ct(this.anchor,this.head)},ss.prototype.to=function(){return ut(this.anchor,this.head)},ss.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},lo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height,cr(i),Mr(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},uo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(e<i){var s=Math.min(t,i-e),o=n.height;if(n.removeInner(e,s),this.height-=o-n.height,i==s&&(this.children.splice(r--,1),n.parent=null),0==(t-=s))break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof lo))){var a=[];this.collapse(a),this.children=[new lo(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],s=i.chunkSize();if(e<=s){if(i.insertInner(e,t,r),i.lines&&i.lines.length>50){for(var o=i.lines.length%25+25,a=o;a<i.lines.length;){var l=new lo(i.lines.slice(a,a+=25));i.height-=l.height,this.children.splice(++n,0,l),l.parent=this}i.lines=i.lines.slice(0,o),this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new uo(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=z(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new uo(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e);if(i.iterN(e,o,r))return!0;if(0==(t-=o))break;e=0}else e-=s}}};var co=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};function po(e,t,r){sr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&oi(e,r)}function ho(e,t,r,n){var i=new co(e,r,n),s=e.cm;return s&&i.noHScroll&&(s.display.alignWidgets=!0),ao(e,t,"widget",(function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length,Math.max(0,i.insertAt)),0,i),i.line=t,s&&!nr(e,t)){var n=sr(t)<e.scrollTop;et(t,t.height+Ur(i)),n&&oi(s,i.height),s.curOp.forceUpdate=!0}return!0})),s&&Mr(s,"lineWidgetAdded",s,i,"number"==typeof t?t:tt(t)),i}co.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=tt(r);if(null!=n&&t){for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(r.widgets=null);var s=Ur(this);et(r,Math.max(0,r.height-s)),e&&(Oi(e,(function(){po(e,r,-s),$n(e,n,"widget")})),Mr(e,"lineWidgetCleared",e,this,n))}},co.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=Ur(this)-t;i&&(nr(this.doc,n)||et(n,n.height+i),r&&Oi(r,(function(){r.curOp.forceUpdate=!0,po(r,n,i),Mr(r,"lineWidgetChanged",r,e,tt(n))})))},we(co);var fo=0,mo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++fo};function go(e,t,r,n,i){if(n&&n.shared)return vo(e,t,r,n,i);if(e.cm&&!e.cm.curOp)return Ii(e.cm,go)(e,t,r,n,i);var s=new mo(e,i),o=ot(t,r);if(n&&q(n,s,!1),o>0||0==o&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=T("span",[s.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(Qt(e,t.line,t,r,s)||t.line!=r.line&&Qt(e,r.line,t,r,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");It()}s.addToHistory&&As(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var a,l=t.line,u=e.cm;if(e.iter(l,r.line+1,(function(n){u&&s.collapsed&&!u.options.lineWrapping&&Kt(n)==u.display.maxLine&&(a=!0),s.collapsed&&l!=t.line&&et(n,0),Lt(n,new Pt(s,l==t.line?t.ch:null,l==r.line?r.ch:null),e.cm&&e.cm.curOp),++l})),s.collapsed&&e.iter(t.line,r.line+1,(function(t){nr(e,t)&&et(t,0)})),s.clearOnEnter&&fe(s,"beforeCursorEnter",(function(){return s.clear()})),s.readOnly&&(Ot(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++fo,s.atomic=!0),u){if(a&&(u.curOp.updateMaxLine=!0),s.collapsed)qn(u,t.line,r.line+1);else if(s.className||s.startStyle||s.endStyle||s.css||s.attributes||s.title)for(var c=t.line;c<=r.line;c++)$n(u,c,"text");s.atomic&&Gs(u.doc),Mr(u,"markerAdded",u,s)}return s}mo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Ei(e),xe(this,"clear")){var r=this.find();r&&Mr(this,"clear",r.from,r.to)}for(var n=null,i=null,s=0;s<this.lines.length;++s){var o=this.lines[s],a=Dt(o.markedSpans,this);e&&!this.collapsed?$n(e,tt(o),"text"):e&&(null!=a.to&&(i=tt(o)),null!=a.from&&(n=tt(o))),o.markedSpans=Rt(o.markedSpans,a),null==a.from&&this.collapsed&&!nr(this.doc,o)&&e&&et(o,Cn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=Kt(this.lines[l]),c=or(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&qn(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Gs(e.doc)),e&&Mr(e,"markerCleared",e,this,n,i),t&&Si(e),this.parent&&this.parent.clear()}},mo.prototype.find=function(e,t){var r,n;null==e&&"bookmark"==this.type&&(e=1);for(var i=0;i<this.lines.length;++i){var s=this.lines[i],o=Dt(s.markedSpans,this);if(null!=o.from&&(r=st(t?s:tt(s),o.from),-1==e))return r;if(null!=o.to&&(n=st(t?s:tt(s),o.to),1==e))return n}return r&&{from:r,to:n}},mo.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;t&&n&&Oi(n,(function(){var i=t.line,s=tt(t.line),o=en(n,s);if(o&&(cn(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!nr(r.doc,i)&&null!=r.height){var a=r.height;r.height=null;var l=Ur(r)-a;l&&et(i,i.height+l)}Mr(n,"markerChanged",n,e)}))},mo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=z(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},mo.prototype.detachLine=function(e){if(this.lines.splice(z(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},we(mo);var yo=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function vo(e,t,r,n,i){(n=q(n)).shared=!1;var s=[go(e,t,r,n,i)],o=s[0],a=n.widgetNode;return ys(e,(function(e){a&&(n.widgetNode=a.cloneNode(!0)),s.push(go(e,ht(e,t),ht(e,r),n,i));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=X(s)})),new yo(s,o)}function bo(e){return e.findMarks(st(e.first,0),e.clipPos(st(e.lastLine())),(function(e){return e.parent}))}function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),s=e.clipPos(i.from),o=e.clipPos(i.to);if(ot(s,o)){var a=go(e,s,o,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function wo(e){for(var t=function(t){var r=e[t],n=[r.primary.doc];ys(r.primary.doc,(function(e){return n.push(e)}));for(var i=0;i<r.markers.length;i++){var s=r.markers[i];-1==z(n,s.doc)&&(s.parent=null,r.markers.splice(i--,1))}},r=0;r<e.length;r++)t(r)}yo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Mr(this,"clear")}},yo.prototype.find=function(e,t){return this.primary.find(e,t)},we(yo);var _o=0,Eo=function(e,t,r,n,i){if(!(this instanceof Eo))return new Eo(e,t,r,n,i);null==r&&(r=0),uo.call(this,[new lo([new lr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var s=st(r,0);this.sel=as(s),this.history=new ws(null),this.id=++_o,this.modeOption=t,this.lineSep=n,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),gs(this,{from:s,to:s,text:e}),Fs(this,as(s),j)};Eo.prototype=J(uo.prototype,{constructor:Eo,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Je(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Di((function(e){var t=st(this.first,0),r=this.first+this.size-1;Qs(this,{from:t,to:st(r,Qe(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&li(this.cm,0,0),Fs(this,as(t),j)})),replaceRange:function(e,t,r,n){no(this,e,t=ht(this,t),r=r?ht(this,r):t,n)},getRange:function(e,t,r){var n=Ke(this,ht(this,e),ht(this,t));return!1===r?n:""===r?n.join(""):n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(nt(this,e))return Qe(this,e)},getLineNumber:function(e){return tt(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Qe(this,e)),Kt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ht(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Di((function(e,t,r){$s(this,ht(this,"number"==typeof e?st(e,t||0):e),null,r)})),setSelection:Di((function(e,t,r){$s(this,ht(this,e),ht(this,t||e),r)})),extendSelection:Di((function(e,t,r){Rs(this,ht(this,e),t&&ht(this,t),r)})),extendSelections:Di((function(e,t){Ls(this,ft(this,e),t)})),extendSelectionsBy:Di((function(e,t){Ls(this,ft(this,Z(this.sel.ranges,e)),t)})),setSelections:Di((function(e,t,r){if(e.length){for(var n=[],i=0;i<e.length;i++)n[i]=new ss(ht(this,e[i].anchor),ht(this,e[i].head||e[i].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Fs(this,os(this.cm,n,t),r)}})),addSelection:Di((function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new ss(ht(this,e),ht(this,t||e))),Fs(this,os(this.cm,n,n.length-1),r)})),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var i=Ke(this,r[n].from(),r[n].to());t=t?t.concat(i):i}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=Ke(this,r[n].from(),r[n].to());!1!==e&&(i=i.join(e||this.lineSeparator())),t[n]=i}return t},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:Di((function(e,t,r){for(var n=[],i=this.sel,s=0;s<i.ranges.length;s++){var o=i.ranges[s];n[s]={from:o.from(),to:o.to(),text:this.splitLines(e[s]),origin:r}}for(var a=t&&"end"!=t&&hs(this,n,t),l=n.length-1;l>=0;l--)Qs(this,n[l]);a?zs(this,a):this.cm&&ai(this.cm)})),undo:Di((function(){Js(this,"undo")})),redo:Di((function(){Js(this,"redo")})),undoSelection:Di((function(){Js(this,"undo",!0)})),redoSelection:Di((function(){Js(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){var e=this;this.history=new ws(this.history),ys(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ps(this.history.done),undone:Ps(this.history.undone)}},setHistory:function(e){var t=this.history=new ws(this.history);t.done=Ps(e.done.slice(0),null,!0),t.undone=Ps(e.undone.slice(0),null,!0)},setGutterMarker:Di((function(e,t,r){return ao(this,e,"gutter",(function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&ne(n)&&(e.gutterMarkers=null),!0}))})),clearGutter:Di((function(e){var t=this;this.iter((function(r){r.gutterMarkers&&r.gutterMarkers[e]&&ao(t,r,"gutter",(function(){return r.gutterMarkers[e]=null,ne(r.gutterMarkers)&&(r.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!nt(this,e))return null;if(t=e,!(e=Qe(this,e)))return null}else if(null==(t=tt(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Di((function(e,t,r){return ao(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(S(r).test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0}))})),removeLineClass:Di((function(e,t,r){return ao(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",i=e[n];if(!i)return!1;if(null==r)e[n]=null;else{var s=i.match(S(r));if(!s)return!1;var o=s.index+s[0].length;e[n]=i.slice(0,s.index)+(s.index&&o!=i.length?" ":"")+i.slice(o)||null}return!0}))})),addLineWidget:Di((function(e,t,r){return ho(this,e,t,r)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return go(this,ht(this,e),ht(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return go(this,e=ht(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=Qe(this,(e=ht(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=ht(this,e),t=ht(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,(function(s){var o=s.markedSpans;if(o)for(var a=0;a<o.length;a++){var l=o[a];null!=l.to&&i==e.line&&e.ch>=l.to||null==l.from&&i!=e.line||null!=l.from&&i==t.line&&l.from>=t.ch||r&&!r(l.marker)||n.push(l.marker.parent||l.marker)}++i})),n},getAllMarks:function(){var e=[];return this.iter((function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)})),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter((function(i){var s=i.text.length+n;if(s>e)return t=e,!0;e-=s,++r})),ht(this,st(r,t))},indexFromPos:function(e){var t=(e=ht(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+r})),t},copy:function(e){var t=new Eo(Je(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new Eo(Je(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],xo(n,bo(this)),n},unlinkDoc:function(e){if(e instanceof qa&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),wo(bo(this));break}if(e.history==this.history){var r=[e.id];ys(e,(function(e){return r.push(e.id)}),!0),e.history=new ws(null),e.history.done=Ps(this.history.done,r),e.history.undone=Ps(this.history.undone,r)}},iterLinkedDocs:function(e){ys(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):De(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Di((function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&xs(this.cm))}))}),Eo.prototype.eachLine=Eo.prototype.iter;var So=0;function Ao(e){var t=this;if(Mo(t),!ve(t,e)&&!jr(t.display,e)){_e(e),o&&(So=+new Date);var r=Rn(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,s=Array(i),a=0,l=function(){++a==i&&Ii(t,(function(){var e={from:r=ht(t.doc,r),to:r,text:t.doc.splitLines(s.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};Qs(t.doc,e),zs(t.doc,as(ht(t.doc,r),ht(t.doc,ls(e))))}))()},u=function(e,r){if(t.options.allowDropFileTypes&&-1==z(t.options.allowDropFileTypes,e.type))l();else{var n=new FileReader;n.onerror=function(){return l()},n.onload=function(){var e=n.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(s[r]=e),l()},n.readAsText(e)}},c=0;c<n.length;c++)u(n[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var p=e.dataTransfer.getData("Text");if(p){var h;if(t.state.draggingText&&!t.state.draggingText.copy&&(h=t.listSelections()),Us(t.doc,as(r,r)),h)for(var d=0;d<h.length;++d)no(t.doc,"",h[d].anchor,h[d].head,"drag");t.replaceSelection(p,"around","paste"),t.display.input.focus()}}catch(f){}}}}function No(e,t){if(o&&(!e.state.draggingText||+new Date-So<100))Ae(t);else if(!ve(e,t)&&!jr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!h)){var r=C("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),p&&r.parentNode.removeChild(r)}}function ko(e,t){var r=Rn(e,t);if(r){var n=document.createDocumentFragment();Vn(e,r,n),e.display.dragCursor||(e.display.dragCursor=C("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),M(e.display.dragCursor,n)}}function Mo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Co(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&r.push(i)}r.length&&r[0].operation((function(){for(var t=0;t<r.length;t++)e(r[t])}))}}var To=!1;function Oo(){To||(Io(),To=!0)}function Io(){var e;fe(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Co(Po)}),100))})),fe(window,"blur",(function(){return Co(Kn)}))}function Po(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Do={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ro=0;Ro<10;Ro++)Do[Ro+48]=Do[Ro+96]=String(Ro);for(var Lo=65;Lo<=90;Lo++)Do[Lo]=String.fromCharCode(Lo);for(var qo=1;qo<=12;qo++)Do[qo+111]=Do[qo+63235]="F"+qo;var $o={};function Bo(e){var t,r,n,i,s=e.split(/-(?!$)/);e=s[s.length-1];for(var o=0;o<s.length-1;o++){var a=s[o];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),i&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function zo(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=Z(r.split(" "),Bo),s=0;s<i.length;s++){var o=void 0,a=void 0;s==i.length-1?(a=i.join(" "),o=n):(a=i.slice(0,s+1).join(" "),o="...");var l=t[a];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+a)}else t[a]=o}delete e[r]}for(var u in t)e[u]=t[u];return e}function Fo(e,t,r,n){var i=(t=Vo(t)).call?t.call(e,n):t[e];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Fo(e,t.fallthrough,r,n);for(var s=0;s<t.fallthrough.length;s++){var o=Fo(e,t.fallthrough[s],r,n);if(o)return o}}}function Uo(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function jo(e,t,r){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(_?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(_?t.ctrlKey:t.metaKey)&&"Mod"!=n&&(e="Cmd-"+e),!r&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function Go(e,t){if(p&&34==e.keyCode&&e.char)return!1;var r=Do[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),jo(r,e,t))}function Vo(e){return"string"==typeof e?$o[e]:e}function Ho(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var s=t(r[i]);n.length&&ot(s.from,X(n).to)<=0;){var o=n.pop();if(ot(o.from,s.from)<0){s.from=o.from;break}}n.push(s)}Oi(e,(function(){for(var t=n.length-1;t>=0;t--)no(e.doc,"",n[t].from,n[t].to,"+delete");ai(e)}))}function Wo(e,t,r){var n=oe(e.text,t+r,r);return n<0||n>e.text.length?null:n}function Yo(e,t,r){var n=Wo(e,t.ch,r);return null==n?null:new st(t.line,n,r<0?"after":"before")}function Xo(e,t,r,n,i){if(e){"rtl"==t.doc.direction&&(i=-i);var s=he(r,t.doc.direction);if(s){var o,a=i<0?X(s):s[0],l=i<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var u=tn(t,r);o=i<0?r.text.length-1:0;var c=rn(t,u,o).top;o=ae((function(e){return rn(t,u,e).top==c}),i<0==(1==a.level)?a.from:a.to-1,o),"before"==l&&(o=Wo(r,o,1))}else o=i<0?a.to:a.from;return new st(n,o,l)}}return new st(n,i<0?r.text.length:0,i<0?"before":"after")}function Zo(e,t,r,n){var i=he(t,e.doc.direction);if(!i)return Yo(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var s=ce(i,r.ch,r.sticky),o=i[s];if("ltr"==e.doc.direction&&o.level%2==0&&(n>0?o.to>r.ch:o.from<r.ch))return Yo(t,r,n);var a,l=function(e,r){return Wo(t,e instanceof st?e.ch:e,r)},u=function(r){return e.options.lineWrapping?(a=a||tn(e,t),Sn(e,t,a,r)):{begin:0,end:t.text.length}},c=u("before"==r.sticky?l(r,-1):r.ch);if("rtl"==e.doc.direction||1==o.level){var p=1==o.level==n<0,h=l(r,p?1:-1);if(null!=h&&(p?h<=o.to&&h<=c.end:h>=o.from&&h>=c.begin)){var d=p?"before":"after";return new st(r.line,h,d)}}var f=function(e,t,n){for(var s=function(e,t){return t?new st(r.line,l(e,1),"before"):new st(r.line,e,"after")};e>=0&&e<i.length;e+=t){var o=i[e],a=t>0==(1!=o.level),u=a?n.begin:l(n.end,-1);if(o.from<=u&&u<o.to)return s(u,a);if(u=a?o.from:l(o.to,-1),n.begin<=u&&u<n.end)return s(u,a)}},m=f(s+n,n,c);if(m)return m;var g=n>0?c.end:l(c.begin,-1);return null==g||n>0&&g==t.text.length||!(m=f(n>0?0:i.length-1,n,u(g)))?null:m}$o.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},$o.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},$o.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},$o.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},$o.default=v?$o.macDefault:$o.pcDefault;var Qo={selectAll:Xs,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),j)},killLine:function(e){return Ho(e,(function(t){if(t.empty()){var r=Qe(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:st(t.head.line+1,0)}:{from:t.head,to:st(t.head.line,r)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Ho(e,(function(t){return{from:st(t.from().line,0),to:ht(e.doc,st(t.to().line+1,0))}}))},delLineLeft:function(e){return Ho(e,(function(e){return{from:st(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Ho(e,(function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Ho(e,(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(st(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(st(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return Ko(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ea(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return Jo(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")}),V)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")}),V)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?ea(e,t.head):n}),V)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var s=r[i].from(),o=$(e.getLine(s.line),s.ch,n);t.push(Y(n-o%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Oi(e,(function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,s=Qe(e.doc,i.line).text;if(s)if(i.ch==s.length&&(i=new st(i.line,i.ch-1)),i.ch>0)i=new st(i.line,i.ch+1),e.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),st(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var o=Qe(e.doc,i.line-1).text;o&&(i=new st(i.line,1),e.replaceRange(s.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),st(i.line-1,o.length-1),i,"+transpose"))}r.push(new ss(i,i))}e.setSelections(r)}))},newlineAndIndent:function(e){return Oi(e,(function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);ai(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Ko(e,t){var r=Qe(e.doc,t),n=Kt(r);return n!=r&&(t=tt(n)),Xo(!0,e,n,t,1)}function Jo(e,t){var r=Qe(e.doc,t),n=Jt(r);return n!=r&&(t=tt(n)),Xo(!0,e,r,t,-1)}function ea(e,t){var r=Ko(e,t.line),n=Qe(e.doc,r.line),i=he(n,e.doc.direction);if(!i||0==i[0].level){var s=Math.max(r.ch,n.text.search(/\S/)),o=t.line==r.line&&t.ch<=s&&t.ch;return st(r.line,o?0:s,r.sticky)}return r}function ta(e,t,r){if("string"==typeof t&&!(t=Qo[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=U}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function ra(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=Fo(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&Fo(t,e.options.extraKeys,r,e)||Fo(t,e.options.keyMap,r,e)}var na=new B;function ia(e,t,r,n){var i=e.state.keySeq;if(i){if(Uo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:na.set(50,(function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())})),sa(e,i+" "+t,r,n))return!0}return sa(e,t,r,n)}function sa(e,t,r,n){var i=ra(e,t,n);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&Mr(e,"keyHandled",e,t,r),"handled"!=i&&"multi"!=i||(_e(r),Yn(e)),!!i}function oa(e,t){var r=Go(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?ia(e,"Shift-"+r,t,(function(t){return ta(e,t,!0)}))||ia(e,r,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ta(e,t)})):ia(e,r,t,(function(t){return ta(e,t)})))}function aa(e,t,r){return ia(e,"'"+r+"'",t,(function(t){return ta(e,t,!0)}))}var la=null;function ua(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=I(),ve(t,e)))){o&&a<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=oa(t,e);p&&(la=i?n:null,i||88!=n||Le||!(v?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),r&&!v&&!i&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||ca(t)}}function ca(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(N(t,"CodeMirror-crosshair"),ge(document,"keyup",r),ge(document,"mouseover",r))}P(t,"CodeMirror-crosshair"),fe(document,"keyup",r),fe(document,"mouseover",r)}function pa(e){16==e.keyCode&&(this.doc.sel.shift=!1),ve(this,e)}function ha(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||jr(t.display,e)||ve(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(p&&r==la)return la=null,void _e(e);if(!p||e.which&&!(e.which<10)||!oa(t,e)){var i=String.fromCharCode(null==n?r:n);"\b"!=i&&(aa(t,e,i)||t.display.input.onKeyPress(e))}}}var da,fa,ma=400,ga=function(e,t,r){this.time=e,this.pos=t,this.button=r};function ya(e,t){var r=+new Date;return fa&&fa.compare(r,e,t)?(da=fa=null,"triple"):da&&da.compare(r,e,t)?(fa=new ga(r,e,t),da=null,"double"):(da=new ga(r,e,t),fa=null,"single")}function va(e){var t=this,r=t.display;if(!(ve(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=e.shiftKey,jr(r,e))l||(r.scroller.draggable=!1,setTimeout((function(){return r.scroller.draggable=!0}),100));else if(!ka(t,e)){var n=Rn(t,e),i=ke(e),s=n?ya(n,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),n&&ba(t,i,n,s,e)||(1==i?n?wa(t,n,s,e):Ne(e)==r.scroller&&_e(e):2==i?(n&&Rs(t.doc,n),setTimeout((function(){return r.input.focus()}),20)):3==i&&(E?t.display.input.onContextMenu(e):Zn(t)))}}function ba(e,t,r,n,i){var s="Click";return"double"==n?s="Double"+s:"triple"==n&&(s="Triple"+s),ia(e,jo(s=(1==t?"Left":2==t?"Middle":"Right")+s,i),i,(function(t){if("string"==typeof t&&(t=Qo[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,r)!=U}finally{e.state.suppressEdits=!1}return n}))}function xa(e,t,r){var n=e.getOption("configureMouse"),i=n?n(e,t,r):{};if(null==i.unit){var s=b?r.shiftKey&&r.metaKey:r.altKey;i.unit=s?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey),null==i.addNew&&(i.addNew=v?r.metaKey:r.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(v?r.altKey:r.ctrlKey)),i}function wa(e,t,r,n){o?setTimeout(L(Xn,e),0):e.curOp.focus=I();var i,s=xa(e,r,n),a=e.doc.sel;e.options.dragDrop&&Te&&!e.isReadOnly()&&"single"==r&&(i=a.contains(t))>-1&&(ot((i=a.ranges[i]).from(),t)<0||t.xRel>0)&&(ot(i.to(),t)>0||t.xRel<0)?_a(e,n,t,s):Sa(e,n,t,s)}function _a(e,t,r,n){var i=e.display,s=!1,u=Ii(e,(function(t){l&&(i.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Zn(e)),ge(i.wrapper.ownerDocument,"mouseup",u),ge(i.wrapper.ownerDocument,"mousemove",c),ge(i.scroller,"dragstart",p),ge(i.scroller,"drop",u),s||(_e(t),n.addNew||Rs(e.doc,r,null,null,n.extend),l&&!h||o&&9==a?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),c=function(e){s=s||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},p=function(){return s=!0};l&&(i.scroller.draggable=!0),e.state.draggingText=u,u.copy=!n.moveOnDrag,fe(i.wrapper.ownerDocument,"mouseup",u),fe(i.wrapper.ownerDocument,"mousemove",c),fe(i.scroller,"dragstart",p),fe(i.scroller,"drop",u),e.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}function Ea(e,t,r){if("char"==r)return new ss(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new ss(st(t.line,0),ht(e.doc,st(t.line+1,0)));var n=r(e,t);return new ss(n.from,n.to)}function Sa(e,t,r,n){o&&Zn(e);var i=e.display,s=e.doc;_e(t);var a,l,u=s.sel,c=u.ranges;if(n.addNew&&!n.extend?(l=s.sel.contains(r),a=l>-1?c[l]:new ss(r,r)):(a=s.sel.primary(),l=s.sel.primIndex),"rectangle"==n.unit)n.addNew||(a=new ss(r,r)),r=Rn(e,t,!0,!0),l=-1;else{var p=Ea(e,r,n.unit);a=n.extend?Ds(a,p.anchor,p.head,n.extend):p}n.addNew?-1==l?(l=c.length,Fs(s,os(e,c.concat([a]),l),{scroll:!1,origin:"*mouse"})):c.length>1&&c[l].empty()&&"char"==n.unit&&!n.extend?(Fs(s,os(e,c.slice(0,l).concat(c.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),u=s.sel):qs(s,l,a,G):(l=0,Fs(s,new is([a],0),G),u=s.sel);var h=r;function d(t){if(0!=ot(h,t))if(h=t,"rectangle"==n.unit){for(var i=[],o=e.options.tabSize,c=$(Qe(s,r.line).text,r.ch,o),p=$(Qe(s,t.line).text,t.ch,o),d=Math.min(c,p),f=Math.max(c,p),m=Math.min(r.line,t.line),g=Math.min(e.lastLine(),Math.max(r.line,t.line));m<=g;m++){var y=Qe(s,m).text,v=H(y,d,o);d==f?i.push(new ss(st(m,v),st(m,v))):y.length>v&&i.push(new ss(st(m,v),st(m,H(y,f,o))))}i.length||i.push(new ss(r,r)),Fs(s,os(e,u.ranges.slice(0,l).concat(i),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,x=a,w=Ea(e,t,n.unit),_=x.anchor;ot(w.anchor,_)>0?(b=w.head,_=ct(x.from(),w.anchor)):(b=w.anchor,_=ut(x.to(),w.head));var E=u.ranges.slice(0);E[l]=Aa(e,new ss(ht(s,_),b)),Fs(s,os(e,E,l),G)}}var f=i.wrapper.getBoundingClientRect(),m=0;function g(t){var r=++m,o=Rn(e,t,!0,"rectangle"==n.unit);if(o)if(0!=ot(o,h)){e.curOp.focus=I(),d(o);var a=ti(i,s);(o.line>=a.to||o.line<a.from)&&setTimeout(Ii(e,(function(){m==r&&g(t)})),150)}else{var l=t.clientY<f.top?-20:t.clientY>f.bottom?20:0;l&&setTimeout(Ii(e,(function(){m==r&&(i.scroller.scrollTop+=l,g(t))})),50)}}function y(t){e.state.selectingText=!1,m=1/0,t&&(_e(t),i.input.focus()),ge(i.wrapper.ownerDocument,"mousemove",v),ge(i.wrapper.ownerDocument,"mouseup",b),s.history.lastSelOrigin=null}var v=Ii(e,(function(e){0!==e.buttons&&ke(e)?g(e):y(e)})),b=Ii(e,y);e.state.selectingText=b,fe(i.wrapper.ownerDocument,"mousemove",v),fe(i.wrapper.ownerDocument,"mouseup",b)}function Aa(e,t){var r=t.anchor,n=t.head,i=Qe(e.doc,r.line);if(0==ot(r,n)&&r.sticky==n.sticky)return t;var s=he(i);if(!s)return t;var o=ce(s,r.ch,r.sticky),a=s[o];if(a.from!=r.ch&&a.to!=r.ch)return t;var l,u=o+(a.from==r.ch==(1!=a.level)?0:1);if(0==u||u==s.length)return t;if(n.line!=r.line)l=(n.line-r.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=ce(s,n.ch,n.sticky),p=c-o||(n.ch-r.ch)*(1==a.level?-1:1);l=c==u-1||c==u?p<0:p>0}var h=s[u+(l?-1:0)],d=l==(1==h.level),f=d?h.from:h.to,m=d?"after":"before";return r.ch==f&&r.sticky==m?t:new ss(new st(r.line,f,m),n)}function Na(e,t,r,n){var i,s;if(t.touches)i=t.touches[0].clientX,s=t.touches[0].clientY;else try{i=t.clientX,s=t.clientY}catch(c){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&_e(t);var o=e.display,a=o.lineDiv.getBoundingClientRect();if(s>a.bottom||!xe(e,r))return Se(t);s-=a.top-o.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var u=o.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=i)return ye(e,r,e,rt(e.doc,s),e.display.gutterSpecs[l].className,t),Se(t)}}function ka(e,t){return Na(e,t,"gutterClick",!0)}function Ma(e,t){jr(e.display,t)||Ca(e,t)||ve(e,t,"contextmenu")||E||e.display.input.onContextMenu(t)}function Ca(e,t){return!!xe(e,"gutterContextMenu")&&Na(e,t,"gutterContextMenu",!1)}function Ta(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hn(e)}ga.prototype.compare=function(e,t,r){return this.time+ma>e&&0==ot(t,this.pos)&&r==this.button};var Oa={toString:function(){return"CodeMirror.Init"}},Ia={},Pa={};function Da(e){var t=e.optionHandlers;function r(r,n,i,s){e.defaults[r]=n,i&&(t[r]=s?function(e,t,r){r!=Oa&&i(e,t,r)}:i)}e.defineOption=r,e.Init=Oa,r("value","",(function(e,t){return e.setValue(t)}),!0),r("mode",null,(function(e,t){e.doc.modeOption=t,ds(e)}),!0),r("indentUnit",2,ds,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,(function(e){fs(e),hn(e),qn(e)}),!0),r("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter((function(e){for(var i=0;;){var s=e.text.indexOf(t,i);if(-1==s)break;i=s+t.length,r.push(st(n,s))}n++}));for(var i=r.length-1;i>=0;i--)no(e.doc,t,r[i],st(r[i].line,r[i].ch+t.length))}})),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=Oa&&e.refresh()})),r("specialCharPlaceholder",mr,(function(e){return e.refresh()}),!0),r("electricChars",!0),r("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),r("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),r("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),r("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),r("rtlMoveVisually",!x),r("wholeLineUpdateBefore",!0),r("theme","default",(function(e){Ta(e),Qi(e)}),!0),r("keyMap","default",(function(e,t,r){var n=Vo(t),i=r!=Oa&&Vo(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)})),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,La,!0),r("gutters",[],(function(e,t){e.display.gutterSpecs=Xi(t,e.options.lineNumbers),Qi(e)}),!0),r("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?In(e.display)+"px":"0",e.refresh()}),!0),r("coverGutterNextToScrollbar",!1,(function(e){return vi(e)}),!0),r("scrollbarStyle","native",(function(e){wi(e),vi(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),r("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=Xi(e.options.gutters,t),Qi(e)}),!0),r("firstLineNumber",1,Qi,!0),r("lineNumberFormatter",(function(e){return e}),Qi,!0),r("showCursorWhenSelecting",!1,jn,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,(function(e,t){"nocursor"==t&&(Kn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),r("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),r("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),r("dragDrop",!0,Ra),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,jn,!0),r("singleCursorHeightPerLine",!0,jn,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,fs,!0),r("addModeClass",!1,fs,!0),r("pollInterval",100),r("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),r("historyEventDelay",1250),r("viewportMargin",10,(function(e){return e.refresh()}),!0),r("maxHighlightLength",1e4,fs,!0),r("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),r("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),r("autofocus",null),r("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),r("phrases",null)}function Ra(e,t,r){if(!t!=!(r&&r!=Oa)){var n=e.display.dragFunctions,i=t?fe:ge;i(e.display.scroller,"dragstart",n.start),i(e.display.scroller,"dragenter",n.enter),i(e.display.scroller,"dragover",n.over),i(e.display.scroller,"dragleave",n.leave),i(e.display.scroller,"drop",n.drop)}}function La(e){e.options.lineWrapping?(P(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(N(e.display.wrapper,"CodeMirror-wrap"),ar(e)),Dn(e),qn(e),hn(e),setTimeout((function(){return vi(e)}),100)}function qa(e,t){var r=this;if(!(this instanceof qa))return new qa(e,t);this.options=t=t?q(t):{},q(Ia,t,!1);var n=t.value;"string"==typeof n?n=new Eo(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var i=new qa.inputStyles[t.inputStyle](this),s=this.display=new Ki(e,n,i,t);for(var u in s.wrapper.CodeMirror=this,Ta(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),wi(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},t.autofocus&&!y&&s.input.focus(),o&&a<11&&setTimeout((function(){return r.display.input.reset(!0)}),20),$a(this),Oo(),Ei(this),this.curOp.forceUpdate=!0,vs(this,n),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){r.hasFocus()&&!r.state.focused&&Qn(r)}),20):Kn(this),Pa)Pa.hasOwnProperty(u)&&Pa[u](this,t[u],Oa);Yi(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Ba.length;++c)Ba[c](this);Si(this),l&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}function $a(e){var t=e.display;fe(t.scroller,"mousedown",Ii(e,va)),fe(t.scroller,"dblclick",o&&a<11?Ii(e,(function(t){if(!ve(e,t)){var r=Rn(e,t);if(r&&!ka(e,t)&&!jr(e.display,t)){_e(t);var n=e.findWordAt(r);Rs(e.doc,n.anchor,n.head)}}})):function(t){return ve(e,t)||_e(t)}),fe(t.scroller,"contextmenu",(function(t){return Ma(e,t)})),fe(t.input.getField(),"contextmenu",(function(r){t.scroller.contains(r.target)||Ma(e,r)}));var r,n={end:0};function i(){t.activeTouch&&(r=setTimeout((function(){return t.activeTouch=null}),1e3),(n=t.activeTouch).end=+new Date)}function s(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function l(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}fe(t.scroller,"touchstart",(function(i){if(!ve(e,i)&&!s(i)&&!ka(e,i)){t.input.ensurePolled(),clearTimeout(r);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==i.touches.length&&(t.activeTouch.left=i.touches[0].pageX,t.activeTouch.top=i.touches[0].pageY)}})),fe(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),fe(t.scroller,"touchend",(function(r){var n=t.activeTouch;if(n&&!jr(t,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var s,o=e.coordsChar(t.activeTouch,"page");s=!n.prev||l(n,n.prev)?new ss(o,o):!n.prev.prev||l(n,n.prev.prev)?e.findWordAt(o):new ss(st(o.line,0),ht(e.doc,st(o.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),_e(r)}i()})),fe(t.scroller,"touchcancel",i),fe(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(hi(e,t.scroller.scrollTop),fi(e,t.scroller.scrollLeft,!0),ye(e,"scroll",e))})),fe(t.scroller,"mousewheel",(function(t){return ns(e,t)})),fe(t.scroller,"DOMMouseScroll",(function(t){return ns(e,t)})),fe(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){ve(e,t)||Ae(t)},over:function(t){ve(e,t)||(ko(e,t),Ae(t))},start:function(t){return No(e,t)},drop:Ii(e,Ao),leave:function(t){ve(e,t)||Mo(e)}};var u=t.input.getField();fe(u,"keyup",(function(t){return pa.call(e,t)})),fe(u,"keydown",Ii(e,ua)),fe(u,"keypress",Ii(e,ha)),fe(u,"focus",(function(t){return Qn(e,t)})),fe(u,"blur",(function(t){return Kn(e,t)}))}qa.defaults=Ia,qa.optionHandlers=Pa;var Ba=[];function za(e,t,r,n){var i,s=e.doc;null==r&&(r="add"),"smart"==r&&(s.mode.indent?i=bt(e,t).state:r="prev");var o=e.options.tabSize,a=Qe(s,t),l=$(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var u,c=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==r&&((u=s.mode.indent(i,a.text.slice(c.length),a.text))==U||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>s.first?$(Qe(s,t-1).text,null,o):0:"add"==r?u=l+e.options.indentUnit:"subtract"==r?u=l-e.options.indentUnit:"number"==typeof r&&(u=l+r),u=Math.max(0,u);var p="",h=0;if(e.options.indentWithTabs)for(var d=Math.floor(u/o);d;--d)h+=o,p+="\t";if(h<u&&(p+=Y(u-h)),p!=c)return no(s,p,st(t,0),st(t,c.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<s.sel.ranges.length;f++){var m=s.sel.ranges[f];if(m.head.line==t&&m.head.ch<c.length){var g=st(t,c.length);qs(s,f,new ss(g,g));break}}}qa.defineInitHook=function(e){return Ba.push(e)};var Fa=null;function Ua(e){Fa=e}function ja(e,t,r,n,i){var s=e.doc;e.display.shift=!1,n||(n=s.sel);var o=+new Date-200,a="paste"==i||e.state.pasteIncoming>o,l=De(t),u=null;if(a&&n.ranges.length>1)if(Fa&&Fa.text.join("\n")==t){if(n.ranges.length%Fa.text.length==0){u=[];for(var c=0;c<Fa.text.length;c++)u.push(s.splitLines(Fa.text[c]))}}else l.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(u=Z(l,(function(e){return[e]})));for(var p=e.curOp.updateInput,h=n.ranges.length-1;h>=0;h--){var d=n.ranges[h],f=d.from(),m=d.to();d.empty()&&(r&&r>0?f=st(f.line,f.ch-r):e.state.overwrite&&!a?m=st(m.line,Math.min(Qe(s,m.line).text.length,m.ch+X(l).length)):a&&Fa&&Fa.lineWise&&Fa.text.join("\n")==l.join("\n")&&(f=m=st(f.line,0)));var g={from:f,to:m,text:u?u[h%u.length]:l,origin:i||(a?"paste":e.state.cutIncoming>o?"cut":"+input")};Qs(e.doc,g),Mr(e,"inputRead",e,g)}t&&!a&&Va(e,t),ai(e),e.curOp.updateInput<2&&(e.curOp.updateInput=p),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function Ga(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Oi(t,(function(){return ja(t,r,0,null,"paste")})),!0}function Va(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var s=e.getModeAt(i.head),o=!1;if(s.electricChars){for(var a=0;a<s.electricChars.length;a++)if(t.indexOf(s.electricChars.charAt(a))>-1){o=za(e,i.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(Qe(e.doc,i.head.line).text.slice(0,i.head.ch))&&(o=za(e,i.head.line,"smart"));o&&Mr(e,"electricInput",e,i.head.line)}}}function Ha(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,s={anchor:st(i,0),head:st(i+1,0)};r.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:r}}function Wa(e,t,r,n){e.setAttribute("autocorrect",r?"":"off"),e.setAttribute("autocapitalize",n?"":"off"),e.setAttribute("spellcheck",!!t)}function Ya(){var e=C("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=C("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Wa(e),t}function Xa(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,r){var n=this.options,i=n[e];n[e]==r&&"mode"!=e||(n[e]=r,t.hasOwnProperty(e)&&Ii(this,t[e])(this,r,i),ye(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Vo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:Pi((function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");Q(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},(function(e){return e.priority})),this.state.modeGen++,qn(this)})),removeOverlay:Pi((function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void qn(this)}})),indentLine:Pi((function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),nt(this.doc,e)&&za(this,e,t,r)})),indentSelection:Pi((function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var i=t[n];if(i.empty())i.head.line>r&&(za(this,i.head.line,e,!0),r=i.head.line,n==this.doc.sel.primIndex&&ai(this));else{var s=i.from(),o=i.to(),a=Math.max(r,s.line);r=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=a;l<r;++l)za(this,l,e);var u=this.doc.sel.ranges;0==s.ch&&t.length==u.length&&u[n].from().ch>0&&qs(this.doc,n,new ss(s,u[n].to()),j)}}})),getTokenAt:function(e,t){return St(this,e,t)},getLineTokens:function(e,t){return St(this,st(e),t,!0)},getTokenTypeAt:function(e){e=ht(this.doc,e);var t,r=vt(this,Qe(this.doc,e.line)),n=0,i=(r.length-1)/2,s=e.ch;if(0==s)t=r[2];else for(;;){var o=n+i>>1;if((o?r[2*o-1]:0)>=s)i=o;else{if(!(r[2*o+1]<s)){t=r[2*o+2];break}n=o+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!r.hasOwnProperty(t))return n;var i=r[t],s=this.getModeAt(e);if("string"==typeof s[t])i[s[t]]&&n.push(i[s[t]]);else if(s[t])for(var o=0;o<s[t].length;o++){var a=i[s[t][o]];a&&n.push(a)}else s.helperType&&i[s.helperType]?n.push(i[s.helperType]):i[s.name]&&n.push(i[s.name]);for(var l=0;l<i._global.length;l++){var u=i._global[l];u.pred(s,this)&&-1==z(n,u.val)&&n.push(u.val)}return n},getStateAfter:function(e,t){var r=this.doc;return bt(this,(e=pt(r,null==e?r.first+r.size-1:e))+1,t).state},cursorCoords:function(e,t){var r=this.doc.sel.primary();return bn(this,null==e?r.head:"object"==typeof e?ht(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return vn(this,ht(this.doc,e),t||"page")},coordsChar:function(e,t){return _n(this,(e=yn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=yn(this,{top:e,left:0},t||"page").top,rt(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,i=!1;if("number"==typeof e){var s=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>s&&(e=s,i=!0),n=Qe(this.doc,e)}else n=e;return gn(this,n,{top:0,left:0},t||"page",r||i).top+(i?this.doc.height-sr(n):0)},defaultTextHeight:function(){return Cn(this.display)},defaultCharWidth:function(){return Tn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var s=this.display,o=(e=bn(this,ht(this.doc,e))).bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==n)o=e.top;else if("above"==n||"near"==n){var l=Math.max(s.wrapper.clientHeight,this.doc.height),u=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(o=e.bottom),a+t.offsetWidth>u&&(a=u-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==i?(a=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?a=0:"middle"==i&&(a=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),r&&ii(this,{left:a,top:o,right:a+t.offsetWidth,bottom:o+t.offsetHeight})},triggerOnKeyDown:Pi(ua),triggerOnKeyPress:Pi(ha),triggerOnKeyUp:pa,triggerOnMouseDown:Pi(va),execCommand:function(e){if(Qo.hasOwnProperty(e))return Qo[e].call(null,this)},triggerElectric:Pi((function(e){Va(this,e)})),findPosH:function(e,t,r,n){var i=1;t<0&&(i=-1,t=-t);for(var s=ht(this.doc,e),o=0;o<t&&!(s=Za(this.doc,s,i,r,n)).hitSide;++o);return s},moveH:Pi((function(e,t){var r=this;this.extendSelectionsBy((function(n){return r.display.shift||r.doc.extend||n.empty()?Za(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()}),V)})),deleteH:Pi((function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Ho(this,(function(r){var i=Za(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}}))})),findPosV:function(e,t,r,n){var i=1,s=n;t<0&&(i=-1,t=-t);for(var o=ht(this.doc,e),a=0;a<t;++a){var l=bn(this,o,"div");if(null==s?s=l.left:l.left=s,(o=Qa(this,l,i,r)).hitSide)break}return o},moveV:Pi((function(e,t){var r=this,n=this.doc,i=[],s=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy((function(o){if(s)return e<0?o.from():o.to();var a=bn(r,o.head,"div");null!=o.goalColumn&&(a.left=o.goalColumn),i.push(a.left);var l=Qa(r,a,e,t);return"page"==t&&o==n.sel.primary()&&oi(r,vn(r,l,"div").top-a.top),l}),V),i.length)for(var o=0;o<n.sel.ranges.length;o++)n.sel.ranges[o].goalColumn=i[o]})),findWordAt:function(e){var t=Qe(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var i=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!r?++n:--r;for(var s=t.charAt(r),o=re(s,i)?function(e){return re(e,i)}:/\s/.test(s)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!re(e)};r>0&&o(t.charAt(r-1));)--r;for(;n<t.length&&o(t.charAt(n));)++n}return new ss(st(e.line,r),st(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?P(this.display.cursorDiv,"CodeMirror-overwrite"):N(this.display.cursorDiv,"CodeMirror-overwrite"),ye(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Pi((function(e,t){li(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Wr(this)-this.display.barHeight,width:e.scrollWidth-Wr(this)-this.display.barWidth,clientHeight:Xr(this),clientWidth:Yr(this)}},scrollIntoView:Pi((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:st(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?ui(this,e):pi(this,e.from,e.to,e.margin)})),setSize:Pi((function(e,t){var r=this,n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&pn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){$n(r,i,"widget");break}++i})),this.curOp.forceUpdate=!0,ye(this,"refresh",this)})),operation:function(e){return Oi(this,e)},startOperation:function(){return Ei(this)},endOperation:function(){return Si(this)},refresh:Pi((function(){var e=this.display.cachedTextHeight;qn(this),this.curOp.forceUpdate=!0,hn(this),li(this,this.doc.scrollLeft,this.doc.scrollTop),Vi(this.display),(null==e||Math.abs(e-Cn(this.display))>.5||this.options.lineWrapping)&&Dn(this),ye(this,"refresh",this)})),swapDoc:Pi((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),vs(this,e),hn(this),this.display.input.reset(),li(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Mr(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},we(e),e.registerHelper=function(t,n,i){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]}),r[t][n]=i},e.registerGlobalHelper=function(t,n,i,s){e.registerHelper(t,n,s),r[t]._global.push({pred:i,val:s})}}function Za(e,t,r,n,i){var s=t,o=r,a=Qe(e,t.line),l=i&&"rtl"==e.direction?-r:r;function u(){var r=t.line+l;return!(r<e.first||r>=e.first+e.size)&&(t=new st(r,t.ch,t.sticky),a=Qe(e,r))}function c(s){var o;if("codepoint"==n){var c=a.text.charCodeAt(t.ch+(r>0?0:-1));if(isNaN(c))o=null;else{var p=r>0?c>=55296&&c<56320:c>=56320&&c<57343;o=new st(t.line,Math.max(0,Math.min(a.text.length,t.ch+r*(p?2:1))),-r)}}else o=i?Zo(e.cm,a,t,r):Yo(a,t,r);if(null==o){if(s||!u())return!1;t=Xo(i,e.cm,a,t.line,l)}else t=o;return!0}if("char"==n||"codepoint"==n)c();else if("column"==n)c(!0);else if("word"==n||"group"==n)for(var p=null,h="group"==n,d=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(r<0)||c(!f);f=!1){var m=a.text.charAt(t.ch)||"\n",g=re(m,d)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(!h||f||g||(g="s"),p&&p!=g){r<0&&(r=1,c(),t.sticky="after");break}if(g&&(p=g),r>0&&!c(!f))break}var y=Ws(e,t,s,o,!0);return at(s,y)&&(y.hitSide=!0),y}function Qa(e,t,r,n){var i,s,o=e.doc,a=t.left;if("page"==n){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*Cn(e.display),3);i=(r>0?t.bottom:t.top)+r*u}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(;(s=_n(e,a,i)).outside;){if(r<0?i<=0:i>=o.height){s.hitSide=!0;break}i+=5*r}return s}var Ka=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ja(e,t){var r=en(e,t.line);if(!r||r.hidden)return null;var n=Qe(e.doc,t.line),i=Qr(r,n,t.line),s=he(n,e.doc.direction),o="left";s&&(o=ce(s,t.ch)%2?"right":"left");var a=on(i.map,t.ch,o);return a.offset="right"==a.collapse?a.end:a.start,a}function el(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function tl(e,t){return t&&(e.bad=!0),e}function rl(e,t,r,n,i){var s="",o=!1,a=e.doc.lineSeparator(),l=!1;function u(e){return function(t){return t.id==e}}function c(){o&&(s+=a,l&&(s+=a),o=l=!1)}function p(e){e&&(c(),s+=e)}function h(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(r)return void p(r);var s,d=t.getAttribute("cm-marker");if(d){var f=e.findMarks(st(n,0),st(i+1,0),u(+d));return void(f.length&&(s=f[0].find(0))&&p(Ke(e.doc,s.from,s.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var m=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;m&&c();for(var g=0;g<t.childNodes.length;g++)h(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(l=!0),m&&(o=!0)}else 3==t.nodeType&&p(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;h(t),t!=r;)t=t.nextSibling,l=!1;return s}function nl(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return tl(e.clipPos(st(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var s=e.display.view[i];if(s.node==n)return il(s,t,r)}}function il(e,t,r){var n=e.text.firstChild,i=!1;if(!t||!O(n,t))return tl(st(tt(e.line),0),!0);if(t==n&&(i=!0,t=n.childNodes[r],r=0,!t)){var s=e.rest?X(e.rest):e.line;return tl(st(tt(s),s.text.length),i)}var o=3==t.nodeType?t:null,a=t;for(o||1!=t.childNodes.length||3!=t.firstChild.nodeType||(o=t.firstChild,r&&(r=o.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var l=e.measure,u=l.maps;function c(t,r,n){for(var i=-1;i<(u?u.length:0);i++)for(var s=i<0?l.map:u[i],o=0;o<s.length;o+=3){var a=s[o+2];if(a==t||a==r){var c=tt(i<0?e.line:e.rest[i]),p=s[o]+n;return(n<0||a!=t)&&(p=s[o+(n?1:0)]),st(c,p)}}}var p=c(o,a,r);if(p)return tl(p,i);for(var h=a.nextSibling,d=o?o.nodeValue.length-r:0;h;h=h.nextSibling){if(p=c(h,h.firstChild,0))return tl(st(p.line,p.ch-d),i);d+=h.textContent.length}for(var f=a.previousSibling,m=r;f;f=f.previousSibling){if(p=c(f,f.firstChild,-1))return tl(st(p.line,p.ch+m),i);m+=f.textContent.length}}Ka.prototype.init=function(e){var t=this,r=this,n=r.cm,i=r.div=e.lineDiv;function s(e){for(var t=e.target;t;t=t.parentNode){if(t==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function o(e){if(s(e)&&!ve(n,e)){if(n.somethingSelected())Ua({lineWise:!1,text:n.getSelections()}),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=Ha(n);Ua({lineWise:!0,text:t.text}),"cut"==e.type&&n.operation((function(){n.setSelections(t.ranges,0,j),n.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var o=Fa.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Ya(),l=a.firstChild;n.display.lineSpace.insertBefore(a,n.display.lineSpace.firstChild),l.value=Fa.text.join("\n");var u=I();R(l),setTimeout((function(){n.display.lineSpace.removeChild(a),u.focus(),u==i&&r.showPrimarySelection()}),50)}}i.contentEditable=!0,Wa(i,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),fe(i,"paste",(function(e){!s(e)||ve(n,e)||Ga(e,n)||a<=11&&setTimeout(Ii(n,(function(){return t.updateFromDOM()})),20)})),fe(i,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),fe(i,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),fe(i,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),fe(i,"touchstart",(function(){return r.forceCompositionEnd()})),fe(i,"input",(function(){t.composing||t.readFromDOMSoon()})),fe(i,"copy",o),fe(i,"cut",o)},Ka.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Ka.prototype.prepareSelection=function(){var e=Gn(this.cm,!1);return e.focus=I()==this.div,e},Ka.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ka.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ka.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),s=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||s.line<t.display.viewFrom)e.removeAllRanges();else{var o=nl(t,e.anchorNode,e.anchorOffset),a=nl(t,e.focusNode,e.focusOffset);if(!o||o.bad||!a||a.bad||0!=ot(ct(o,a),i)||0!=ot(ut(o,a),s)){var l=t.display.view,u=i.line>=t.display.viewFrom&&Ja(t,i)||{node:l[0].measure.map[2],offset:0},c=s.line<t.display.viewTo&&Ja(t,s);if(!c){var p=l[l.length-1].measure,h=p.maps?p.maps[p.maps.length-1]:p.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(u&&c){var d,f=e.rangeCount&&e.getRangeAt(0);try{d=A(u.node,u.offset,c.offset,c.node)}catch(Pe){}d&&(!r&&t.state.focused?(e.collapse(u.node,u.offset),d.collapsed||(e.removeAllRanges(),e.addRange(d))):(e.removeAllRanges(),e.addRange(d)),f&&null==e.anchorNode?e.addRange(f):r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Ka.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Ka.prototype.showMultipleSelections=function(e){M(this.cm.display.cursorDiv,e.cursors),M(this.cm.display.selectionDiv,e.selection)},Ka.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ka.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return O(this.div,t)},Ka.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&I()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ka.prototype.blur=function(){this.div.blur()},Ka.prototype.getField=function(){return this.div},Ka.prototype.supportsTouch=function(){return!0},Ka.prototype.receivedFocus=function(){var e=this,t=this;function r(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,r))}this.selectionInEditor()?setTimeout((function(){return e.pollSelection()}),20):Oi(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,r)},Ka.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ka.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&c&&this.cm.display.gutterSpecs.length&&el(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=nl(t,e.anchorNode,e.anchorOffset),n=nl(t,e.focusNode,e.focusOffset);r&&n&&Oi(t,(function(){Fs(t.doc,as(r,n),j),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)}))}}},Ka.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,r,n=this.cm,i=n.display,s=n.doc.sel.primary(),o=s.from(),a=s.to();if(0==o.ch&&o.line>n.firstLine()&&(o=st(o.line-1,Qe(n.doc,o.line-1).length)),a.ch==Qe(n.doc,a.line).text.length&&a.line<n.lastLine()&&(a=st(a.line+1,0)),o.line<i.viewFrom||a.line>i.viewTo-1)return!1;o.line==i.viewFrom||0==(e=Ln(n,o.line))?(t=tt(i.view[0].line),r=i.view[0].node):(t=tt(i.view[e].line),r=i.view[e-1].node.nextSibling);var l,u,c=Ln(n,a.line);if(c==i.view.length-1?(l=i.viewTo-1,u=i.lineDiv.lastChild):(l=tt(i.view[c+1].line)-1,u=i.view[c+1].node.previousSibling),!r)return!1;for(var p=n.doc.splitLines(rl(n,r,u,t,l)),h=Ke(n.doc,st(t,0),st(l,Qe(n.doc,l).text.length));p.length>1&&h.length>1;)if(X(p)==X(h))p.pop(),h.pop(),l--;else{if(p[0]!=h[0])break;p.shift(),h.shift(),t++}for(var d=0,f=0,m=p[0],g=h[0],y=Math.min(m.length,g.length);d<y&&m.charCodeAt(d)==g.charCodeAt(d);)++d;for(var v=X(p),b=X(h),x=Math.min(v.length-(1==p.length?d:0),b.length-(1==h.length?d:0));f<x&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==p.length&&1==h.length&&t==o.line)for(;d&&d>o.ch&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)d--,f++;p[p.length-1]=v.slice(0,v.length-f).replace(/^\u200b+/,""),p[0]=p[0].slice(d).replace(/\u200b+$/,"");var w=st(t,d),_=st(l,h.length?X(h).length-f:0);return p.length>1||p[0]||ot(w,_)?(no(n.doc,p,w,_,"+input"),!0):void 0},Ka.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ka.prototype.reset=function(){this.forceCompositionEnd()},Ka.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ka.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Ka.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Oi(this.cm,(function(){return qn(e.cm)}))},Ka.prototype.setUneditable=function(e){e.contentEditable="false"},Ka.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ii(this.cm,ja)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Ka.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ka.prototype.onContextMenu=function(){},Ka.prototype.resetPosition=function(){},Ka.prototype.needsContentAttribute=!0;var sl=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};function ol(e,t){if((t=t?q(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=I();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=a.getValue()}var i;if(e.form&&(fe(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var s=e.form;i=s.submit;try{var o=s.submit=function(){n(),s.submit=i,s.submit(),s.submit=o}}catch(Pe){}}t.finishInit=function(r){r.save=n,r.getTextArea=function(){return e},r.toTextArea=function(){r.toTextArea=isNaN,n(),e.parentNode.removeChild(r.getWrapperElement()),e.style.display="",e.form&&(ge(e.form,"submit",n),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=i))}},e.style.display="none";var a=qa((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a}function al(e){e.off=ge,e.on=fe,e.wheelEventPixels=rs,e.Doc=Eo,e.splitLines=De,e.countColumn=$,e.findColumn=H,e.isWordChar=te,e.Pass=U,e.signal=ye,e.Line=lr,e.changeEnd=ls,e.scrollbarModel=xi,e.Pos=st,e.cmpPos=ot,e.modes=Be,e.mimeModes=ze,e.resolveMode=je,e.getMode=Ge,e.modeExtensions=Ve,e.extendMode=He,e.copyState=We,e.startState=Xe,e.innerMode=Ye,e.commands=Qo,e.keyMap=$o,e.keyName=Go,e.isModifierKey=Uo,e.lookupKey=Fo,e.normalizeKeyMap=zo,e.StringStream=Ze,e.SharedTextMarker=yo,e.TextMarker=mo,e.LineWidget=co,e.e_preventDefault=_e,e.e_stopPropagation=Ee,e.e_stop=Ae,e.addClass=P,e.contains=O,e.rmClass=N,e.keyNames=Do}sl.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var i=this.textarea;function s(e){if(!ve(n,e)){if(n.somethingSelected())Ua({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=Ha(n);Ua({lineWise:!0,text:t.text}),"cut"==e.type?n.setSelections(t.ranges,null,j):(r.prevInput="",i.value=t.text.join("\n"),R(i))}"cut"==e.type&&(n.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(i.style.width="0px"),fe(i,"input",(function(){o&&a>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()})),fe(i,"paste",(function(e){ve(n,e)||Ga(e,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())})),fe(i,"cut",s),fe(i,"copy",s),fe(e.scroller,"paste",(function(t){if(!jr(e,t)&&!ve(n,t)){if(!i.dispatchEvent)return n.state.pasteIncoming=+new Date,void r.focus();var s=new Event("paste");s.clipboardData=t.clipboardData,i.dispatchEvent(s)}})),fe(e.lineSpace,"selectstart",(function(t){jr(e,t)||_e(t)})),fe(i,"compositionstart",(function(){var e=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}})),fe(i,"compositionend",(function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)}))},sl.prototype.createField=function(e){this.wrapper=Ya(),this.textarea=this.wrapper.firstChild},sl.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},sl.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=Gn(e);if(e.options.moveInputWithCursor){var i=bn(e,r.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+o.top-s.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+o.left-s.left))}return n},sl.prototype.showSelection=function(e){var t=this.cm.display;M(t.cursorDiv,e.cursors),M(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},sl.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&R(this.textarea),o&&a>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",o&&a>=9&&(this.hasSelection=null))}},sl.prototype.getField=function(){return this.textarea},sl.prototype.supportsTouch=function(){return!1},sl.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||I()!=this.textarea))try{this.textarea.focus()}catch(Pe){}},sl.prototype.blur=function(){this.textarea.blur()},sl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},sl.prototype.receivedFocus=function(){this.slowPoll()},sl.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},sl.prototype.fastPoll=function(){var e=!1,t=this;function r(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,r))}t.pollingFast=!0,t.polling.set(20,r)},sl.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||Re(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(o&&a>=9&&this.hasSelection===i||v&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var s=i.charCodeAt(0);if(8203!=s||n||(n="​"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(n.length,i.length);l<u&&n.charCodeAt(l)==i.charCodeAt(l);)++l;return Oi(t,(function(){ja(t,i.slice(l),n.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?r.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},sl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},sl.prototype.onKeyPress=function(){o&&a>=9&&(this.hasSelection=null),this.fastPoll()},sl.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,i=t.textarea;t.contextMenuPending&&t.contextMenuPending();var s=Rn(r,e),u=n.scroller.scrollTop;if(s&&!p){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(s)&&Ii(r,Fs)(r.doc,as(s),j);var c,h=i.style.cssText,d=t.wrapper.style.cssText,f=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(c=window.scrollY),n.input.focus(),l&&window.scrollTo(null,c),n.input.reset(),r.somethingSelected()||(i.value=t.prevInput=" "),t.contextMenuPending=y,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),o&&a>=9&&g(),E){Ae(e);var m=function(){ge(window,"mouseup",m),setTimeout(y,20)};fe(window,"mouseup",m)}else setTimeout(y,50)}function g(){if(null!=i.selectionStart){var e=r.somethingSelected(),s="​"+(e?i.value:"");i.value="⇚",i.value=s,t.prevInput=e?"":"​",i.selectionStart=1,i.selectionEnd=s.length,n.selForContextMenu=r.doc.sel}}function y(){if(t.contextMenuPending==y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=d,i.style.cssText=h,o&&a<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=u),null!=i.selectionStart)){(!o||o&&a<9)&&g();var e=0,s=function(){n.selForContextMenu==r.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==t.prevInput?Ii(r,Xs)(r):e++<10?n.detectingSelectAll=setTimeout(s,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(s,200)}}},sl.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},sl.prototype.setUneditable=function(){},sl.prototype.needsContentAttribute=!1,Da(qa),Xa(qa);var ll="iter insert remove copy getEditor constructor".split(" ");for(var ul in Eo.prototype)Eo.prototype.hasOwnProperty(ul)&&z(ll,ul)<0&&(qa.prototype[ul]=function(e){return function(){return e.apply(this.doc,arguments)}}(Eo.prototype[ul]));return we(Eo),qa.inputStyles={textarea:sl,contenteditable:Ka},qa.defineMode=function(e){qa.defaults.mode||"null"==e||(qa.defaults.mode=e),Fe.apply(this,arguments)},qa.defineMIME=Ue,qa.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),qa.defineMIME("text/plain","null"),qa.defineExtension=function(e,t){qa.prototype[e]=t},qa.defineDocExtension=function(e,t){Eo.prototype[e]=t},qa.fromTextArea=ol,al(qa),qa.version="5.65.0",qa}()},19727:(e,t,r)=>{!function(e){"use strict";function t(e){for(var t={},r=0;r<e.length;++r)t[e[r].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,r){var n=r.inline;r.propertyKeywords||(r=e.resolveMode("text/css"));var i,s,o=t.indentUnit,a=r.tokenHooks,l=r.documentTypes||{},u=r.mediaTypes||{},c=r.mediaFeatures||{},p=r.mediaValueKeywords||{},h=r.propertyKeywords||{},d=r.nonStandardPropertyKeywords||{},f=r.fontProperties||{},m=r.counterDescriptors||{},g=r.colorKeywords||{},y=r.valueKeywords||{},v=r.allowNested,b=r.lineComment,x=!0===r.supportsAtComponent,w=!1!==t.highlightNonStandardPropertyKeywords;function _(e,t){return i=t,e}function E(e,t){var r=e.next();if(a[r]){var n=a[r](e,t);if(!1!==n)return n}return"@"==r?(e.eatWhile(/[\w\\\-]/),_("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?_(null,"compare"):'"'==r||"'"==r?(t.tokenize=S(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),_("atom","hash")):"!"==r?(e.match(/^\s*\w*/),_("keyword","important")):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),_("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?_(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?_("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?_(null,r):e.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(e.current())&&(t.tokenize=A),_("variable callee","variable")):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),_("property","word")):_(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),_("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?_("variable-2","variable-definition"):_("variable-2","variable")):e.match(/^\w+-/)?_("meta","meta"):void 0}function S(e){return function(t,r){for(var n,i=!1;null!=(n=t.next());){if(n==e&&!i){")"==e&&t.backUp(1);break}i=!i&&"\\"==n}return(n==e||!i&&")"!=e)&&(r.tokenize=null),_("string","string")}}function A(e,t){return e.next(),e.match(/^\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=S(")"),_(null,"(")}function N(e,t,r){this.type=e,this.indent=t,this.prev=r}function k(e,t,r,n){return e.context=new N(r,t.indentation()+(!1===n?0:o),e.context),r}function M(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function C(e,t,r){return I[r.context.type](e,t,r)}function T(e,t,r,n){for(var i=n||1;i>0;i--)r.context=r.context.prev;return C(e,t,r)}function O(e){var t=e.current().toLowerCase();s=y.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"variable"}var I={top:function(e,t,r){if("{"==e)return k(r,t,"block");if("}"==e&&r.context.prev)return M(r);if(x&&/@component/i.test(e))return k(r,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return k(r,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return k(r,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return r.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return k(r,t,"at");if("hash"==e)s="builtin";else if("word"==e)s="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return k(r,t,"interpolation");if(":"==e)return"pseudo";if(v&&"("==e)return k(r,t,"parens")}return r.context.type},block:function(e,t,r){if("word"==e){var n=t.current().toLowerCase();return h.hasOwnProperty(n)?(s="property","maybeprop"):d.hasOwnProperty(n)?(s=w?"string-2":"property","maybeprop"):v?(s=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(s+=" error","maybeprop")}return"meta"==e?"block":v||"hash"!=e&&"qualifier"!=e?I.top(e,t,r):(s="error","block")},maybeprop:function(e,t,r){return":"==e?k(r,t,"prop"):C(e,t,r)},prop:function(e,t,r){if(";"==e)return M(r);if("{"==e&&v)return k(r,t,"propBlock");if("}"==e||"{"==e)return T(e,t,r);if("("==e)return k(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)O(t);else if("interpolation"==e)return k(r,t,"interpolation")}else s+=" error";return"prop"},propBlock:function(e,t,r){return"}"==e?M(r):"word"==e?(s="property","maybeprop"):r.context.type},parens:function(e,t,r){return"{"==e||"}"==e?T(e,t,r):")"==e?M(r):"("==e?k(r,t,"parens"):"interpolation"==e?k(r,t,"interpolation"):("word"==e&&O(t),"parens")},pseudo:function(e,t,r){return"meta"==e?"pseudo":"word"==e?(s="variable-3",r.context.type):C(e,t,r)},documentTypes:function(e,t,r){return"word"==e&&l.hasOwnProperty(t.current())?(s="tag",r.context.type):I.atBlock(e,t,r)},atBlock:function(e,t,r){if("("==e)return k(r,t,"atBlock_parens");if("}"==e||";"==e)return T(e,t,r);if("{"==e)return M(r)&&k(r,t,v?"block":"top");if("interpolation"==e)return k(r,t,"interpolation");if("word"==e){var n=t.current().toLowerCase();s="only"==n||"not"==n||"and"==n||"or"==n?"keyword":u.hasOwnProperty(n)?"attribute":c.hasOwnProperty(n)?"property":p.hasOwnProperty(n)?"keyword":h.hasOwnProperty(n)?"property":d.hasOwnProperty(n)?w?"string-2":"property":y.hasOwnProperty(n)?"atom":g.hasOwnProperty(n)?"keyword":"error"}return r.context.type},atComponentBlock:function(e,t,r){return"}"==e?T(e,t,r):"{"==e?M(r)&&k(r,t,v?"block":"top",!1):("word"==e&&(s="error"),r.context.type)},atBlock_parens:function(e,t,r){return")"==e?M(r):"{"==e||"}"==e?T(e,t,r,2):I.atBlock(e,t,r)},restricted_atBlock_before:function(e,t,r){return"{"==e?k(r,t,"restricted_atBlock"):"word"==e&&"@counter-style"==r.stateArg?(s="variable","restricted_atBlock_before"):C(e,t,r)},restricted_atBlock:function(e,t,r){return"}"==e?(r.stateArg=null,M(r)):"word"==e?(s="@font-face"==r.stateArg&&!f.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==r.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,r){return"word"==e?(s="variable","keyframes"):"{"==e?k(r,t,"top"):C(e,t,r)},at:function(e,t,r){return";"==e?M(r):"{"==e||"}"==e?T(e,t,r):("word"==e?s="tag":"hash"==e&&(s="builtin"),"at")},interpolation:function(e,t,r){return"}"==e?M(r):"{"==e||";"==e?T(e,t,r):("word"==e?s="variable":"variable"!=e&&"("!=e&&")"!=e&&(s="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new N(n?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||E)(e,t);return r&&"object"==typeof r&&(i=r[1],r=r[0]),s=r,"comment"!=i&&(t.state=I[t.state](i,e,t)),s},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),i=r.indent;return"prop"!=r.type||"}"!=n&&")"!=n||(r=r.prev),r.prev&&("}"!=n||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"restricted_atBlock"!=r.type?(")"!=n||"parens"!=r.type&&"atBlock_parens"!=r.type)&&("{"!=n||"at"!=r.type&&"atBlock"!=r.type)||(i=Math.max(0,r.indent-o)):i=(r=r.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}}));var r=["domain","regexp","url","url-prefix"],n=t(r),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],s=t(i),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],a=t(o),l=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],u=t(l),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],p=t(c),h=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],d=t(h),f=t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),m=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],y=t(g),v=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=t(v),x=r.concat(i).concat(o).concat(l).concat(c).concat(h).concat(g).concat(v);function w(e,t){for(var r,n=!1;null!=(r=e.next());){if(n&&"/"==r){t.tokenize=null;break}n="*"==r}return["comment","comment"]}e.registerHelper("hintWords","css",x),e.defineMIME("text/css",{documentTypes:n,mediaTypes:s,mediaFeatures:a,mediaValueKeywords:u,propertyKeywords:p,nonStandardPropertyKeywords:d,fontProperties:f,counterDescriptors:m,colorKeywords:y,valueKeywords:b,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w,w(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:s,mediaFeatures:a,mediaValueKeywords:u,propertyKeywords:p,nonStandardPropertyKeywords:d,colorKeywords:y,valueKeywords:b,fontProperties:f,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"]},":":function(e){return!!e.match(/^\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:s,mediaFeatures:a,mediaValueKeywords:u,propertyKeywords:p,nonStandardPropertyKeywords:d,colorKeywords:y,valueKeywords:b,fontProperties:f,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=w,w(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:s,mediaFeatures:a,propertyKeywords:p,nonStandardPropertyKeywords:d,fontProperties:f,counterDescriptors:m,colorKeywords:y,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=w,w(e,t))}},name:"css",helperType:"gss"})}(r(71614))},87837:(e,t,r)=>{!function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function r(e,t,r){var n=e.current(),i=n.search(t);return i>-1?e.backUp(n.length-i):n.match(/<\/?$/)&&(e.backUp(n.length),e.match(t,!1)||e.match(n)),r}var n={};function i(e){var t=n[e];return t||(n[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}function s(e,t){var r=e.match(i(t));return r?/^\s*(.*?)\s*$/.exec(r[2])[1]:""}function o(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function a(e,t){for(var r in e)for(var n=t[r]||(t[r]=[]),i=e[r],s=i.length-1;s>=0;s--)n.unshift(i[s])}function l(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!n[0]||n[1].test(s(t,n[0])))return n[2]}}e.defineMode("htmlmixed",(function(n,i){var s=e.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:i.multilineTagIndentFactor,multilineTagIndentPastTag:i.multilineTagIndentPastTag,allowMissingTagName:i.allowMissingTagName}),u={},c=i&&i.tags,p=i&&i.scriptTypes;if(a(t,u),c&&a(c,u),p)for(var h=p.length-1;h>=0;h--)u.script.unshift(["type",p[h].matches,p[h].mode]);function d(t,i){var a,c=s.token(t,i.htmlState),p=/\btag\b/.test(c);if(p&&!/[<>\s\/]/.test(t.current())&&(a=i.htmlState.tagName&&i.htmlState.tagName.toLowerCase())&&u.hasOwnProperty(a))i.inTag=a+" ";else if(i.inTag&&p&&/>$/.test(t.current())){var h=/^([\S]+) (.*)/.exec(i.inTag);i.inTag=null;var f=">"==t.current()&&l(u[h[1]],h[2]),m=e.getMode(n,f),g=o(h[1],!0),y=o(h[1],!1);i.token=function(e,t){return e.match(g,!1)?(t.token=d,t.localState=t.localMode=null,null):r(e,y,t.localMode.token(e,t.localState))},i.localMode=m,i.localState=e.startState(m,s.indent(i.htmlState,"",""))}else i.inTag&&(i.inTag+=t.current(),t.eol()&&(i.inTag+=" "));return c}return{startState:function(){return{token:d,inTag:null,localMode:null,localState:null,htmlState:e.startState(s)}},copyState:function(t){var r;return t.localState&&(r=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:r,htmlState:e.copyState(s,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,r,n){return!t.localMode||/^\s*<\//.test(r)?s.indent(t.htmlState,r,n):t.localMode.indent?t.localMode.indent(t.localState,r,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||s}}}}),"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}(r(71614),r(36881),r(49398),r(19727))},49398:(e,t,r)=>{!function(e){"use strict";e.defineMode("javascript",(function(t,r){var n,i,s=t.indentUnit,o=r.statementIndent,a=r.jsonld,l=r.json||a,u=!1!==r.trackScope,c=r.typescript,p=r.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),i=e("keyword d"),s=e("operator"),o={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:i,break:i,continue:i,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:s,typeof:s,instanceof:s,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n}}(),d=/[+\-*&%=<>!?|~^@]/,f=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}function g(e,t,r){return n=e,i=r,t}function y(e,t){var r=e.next();if('"'==r||"'"==r)return t.tokenize=v(r),t.tokenize(e,t);if("."==r&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return g("number","number");if("."==r&&e.match(".."))return g("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return g(r);if("="==r&&e.eat(">"))return g("=>","operator");if("0"==r&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return g("number","number");if(/\d/.test(r))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),g("number","number");if("/"==r)return e.eat("*")?(t.tokenize=b,b(e,t)):e.eat("/")?(e.skipToEnd(),g("comment","comment")):it(e,t,1)?(m(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),g("regexp","string-2")):(e.eat("="),g("operator","operator",e.current()));if("`"==r)return t.tokenize=x,x(e,t);if("#"==r&&"!"==e.peek())return e.skipToEnd(),g("meta","meta");if("#"==r&&e.eatWhile(p))return g("variable","property");if("<"==r&&e.match("!--")||"-"==r&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),g("comment","comment");if(d.test(r))return">"==r&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=r&&"="!=r||e.eat("="):/[<>*+\-|&?]/.test(r)&&(e.eat(r),">"==r&&e.eat(r))),"?"==r&&e.eat(".")?g("."):g("operator","operator",e.current());if(p.test(r)){e.eatWhile(p);var n=e.current();if("."!=t.lastType){if(h.propertyIsEnumerable(n)){var i=h[n];return g(i.type,i.style,n)}if("async"==n&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return g("async","keyword",n)}return g("variable","variable",n)}}function v(e){return function(t,r){var n,i=!1;if(a&&"@"==t.peek()&&t.match(f))return r.tokenize=y,g("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=e||i);)i=!i&&"\\"==n;return i||(r.tokenize=y),g("string","string")}}function b(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=y;break}n="*"==r}return g("comment","comment")}function x(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=y;break}n=!n&&"\\"==r}return g("quasi","string-2",e.current())}var w="([{}])";function _(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(c){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var i=0,s=!1,o=r-1;o>=0;--o){var a=e.string.charAt(o),l=w.indexOf(a);if(l>=0&&l<3){if(!i){++o;break}if(0==--i){"("==a&&(s=!0);break}}else if(l>=3&&l<6)++i;else if(p.test(a))s=!0;else if(/["'\/`]/.test(a))for(;;--o){if(0==o)return;if(e.string.charAt(o-1)==a&&"\\"!=e.string.charAt(o-2)){o--;break}}else if(s&&!i){++o;break}}s&&!i&&(t.fatArrowAt=o)}}var E={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function S(e,t,r,n,i,s){this.indented=e,this.column=t,this.type=r,this.prev=i,this.info=s,null!=n&&(this.align=n)}function A(e,t){if(!u)return!1;for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}function N(e,t,r,n,i){var s=e.cc;for(k.state=e,k.stream=i,k.marked=null,k.cc=s,k.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((s.length?s.pop():l?V:j)(r,n)){for(;s.length&&s[s.length-1].lex;)s.pop()();return k.marked?k.marked:"variable"==r&&A(e,n)?"variable-2":t}}var k={state:null,column:null,marked:null,cc:null};function M(){for(var e=arguments.length-1;e>=0;e--)k.cc.push(arguments[e])}function C(){return M.apply(null,arguments),!0}function T(e,t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}function O(e){var t=k.state;if(k.marked="def",u){if(t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var n=I(e,t.context);if(null!=n)return void(t.context=n)}else if(!T(e,t.localVars))return void(t.localVars=new R(e,t.localVars));r.globalVars&&!T(e,t.globalVars)&&(t.globalVars=new R(e,t.globalVars))}}function I(e,t){if(t){if(t.block){var r=I(e,t.prev);return r?r==t.prev?t:new D(r,t.vars,!0):null}return T(e,t.vars)?t:new D(t.prev,new R(e,t.vars),!1)}return null}function P(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function D(e,t,r){this.prev=e,this.vars=t,this.block=r}function R(e,t){this.name=e,this.next=t}var L=new R("this",new R("arguments",null));function q(){k.state.context=new D(k.state.context,k.state.localVars,!1),k.state.localVars=L}function $(){k.state.context=new D(k.state.context,k.state.localVars,!0),k.state.localVars=null}function B(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function z(e,t){var r=function(){var r=k.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var i=r.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;r.lexical=new S(n,k.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function F(){var e=k.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function U(e){function t(r){return r==e?C():";"==e||"}"==r||")"==r||"]"==r?M():C(t)}return t}function j(e,t){return"var"==e?C(z("vardef",t),Me,U(";"),F):"keyword a"==e?C(z("form"),W,j,F):"keyword b"==e?C(z("form"),j,F):"keyword d"==e?k.stream.match(/^\s*$/,!1)?C():C(z("stat"),X,U(";"),F):"debugger"==e?C(U(";")):"{"==e?C(z("}"),$,he,F,B):";"==e?C():"if"==e?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==F&&k.state.cc.pop()(),C(z("form"),W,j,F,De)):"function"==e?C($e):"for"==e?C(z("form"),$,Re,j,B,F):"class"==e||c&&"interface"==t?(k.marked="keyword",C(z("form","class"==e?e:t),je,F)):"variable"==e?c&&"declare"==t?(k.marked="keyword",C(j)):c&&("module"==t||"enum"==t||"type"==t)&&k.stream.match(/^\s*\w/,!1)?(k.marked="keyword","enum"==t?C(tt):"type"==t?C(ze,U("operator"),ye,U(";")):C(z("form"),Ce,U("{"),z("}"),he,F,F)):c&&"namespace"==t?(k.marked="keyword",C(z("form"),V,j,F)):c&&"abstract"==t?(k.marked="keyword",C(j)):C(z("stat"),se):"switch"==e?C(z("form"),W,U("{"),z("}","switch"),$,he,F,F,B):"case"==e?C(V,U(":")):"default"==e?C(U(":")):"catch"==e?C(z("form"),q,G,j,F,B):"export"==e?C(z("stat"),We,F):"import"==e?C(z("stat"),Xe,F):"async"==e?C(j):"@"==t?C(V,j):M(z("stat"),V,U(";"),F)}function G(e){if("("==e)return C(Fe,U(")"))}function V(e,t){return Y(e,t,!1)}function H(e,t){return Y(e,t,!0)}function W(e){return"("!=e?M():C(z(")"),X,U(")"),F)}function Y(e,t,r){if(k.state.fatArrowAt==k.stream.start){var n=r?te:ee;if("("==e)return C(q,z(")"),ce(Fe,")"),F,U("=>"),n,B);if("variable"==e)return M(q,Ce,U("=>"),n,B)}var i=r?Q:Z;return E.hasOwnProperty(e)?C(i):"function"==e?C($e,i):"class"==e||c&&"interface"==t?(k.marked="keyword",C(z("form"),Ue,F)):"keyword c"==e||"async"==e?C(r?H:V):"("==e?C(z(")"),X,U(")"),F,i):"operator"==e||"spread"==e?C(r?H:V):"["==e?C(z("]"),et,F,i):"{"==e?pe(ae,"}",null,i):"quasi"==e?M(K,i):"new"==e?C(re(r)):C()}function X(e){return e.match(/[;\}\)\],]/)?M():M(V)}function Z(e,t){return","==e?C(X):Q(e,t,!1)}function Q(e,t,r){var n=0==r?Z:Q,i=0==r?V:H;return"=>"==e?C(q,r?te:ee,B):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?C(n):c&&"<"==t&&k.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?C(z(">"),ce(ye,">"),F,n):"?"==t?C(V,U(":"),i):C(i):"quasi"==e?M(K,n):";"!=e?"("==e?pe(H,")","call",n):"."==e?C(oe,n):"["==e?C(z("]"),X,U("]"),F,n):c&&"as"==t?(k.marked="keyword",C(ye,n)):"regexp"==e?(k.state.lastType=k.marked="operator",k.stream.backUp(k.stream.pos-k.stream.start-1),C(i)):void 0:void 0}function K(e,t){return"quasi"!=e?M():"${"!=t.slice(t.length-2)?C(K):C(X,J)}function J(e){if("}"==e)return k.marked="string-2",k.state.tokenize=x,C(K)}function ee(e){return _(k.stream,k.state),M("{"==e?j:V)}function te(e){return _(k.stream,k.state),M("{"==e?j:H)}function re(e){return function(t){return"."==t?C(e?ie:ne):"variable"==t&&c?C(Ae,e?Q:Z):M(e?H:V)}}function ne(e,t){if("target"==t)return k.marked="keyword",C(Z)}function ie(e,t){if("target"==t)return k.marked="keyword",C(Q)}function se(e){return":"==e?C(F,j):M(Z,U(";"),F)}function oe(e){if("variable"==e)return k.marked="property",C()}function ae(e,t){return"async"==e?(k.marked="property",C(ae)):"variable"==e||"keyword"==k.style?(k.marked="property","get"==t||"set"==t?C(le):(c&&k.state.fatArrowAt==k.stream.start&&(r=k.stream.match(/^\s*:\s*/,!1))&&(k.state.fatArrowAt=k.stream.pos+r[0].length),C(ue))):"number"==e||"string"==e?(k.marked=a?"property":k.style+" property",C(ue)):"jsonld-keyword"==e?C(ue):c&&P(t)?(k.marked="keyword",C(ae)):"["==e?C(V,de,U("]"),ue):"spread"==e?C(H,ue):"*"==t?(k.marked="keyword",C(ae)):":"==e?M(ue):void 0;var r}function le(e){return"variable"!=e?M(ue):(k.marked="property",C($e))}function ue(e){return":"==e?C(H):"("==e?M($e):void 0}function ce(e,t,r){function n(i,s){if(r?r.indexOf(i)>-1:","==i){var o=k.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),C((function(r,n){return r==t||n==t?M():M(e)}),n)}return i==t||s==t?C():r&&r.indexOf(";")>-1?M(e):C(U(t))}return function(r,i){return r==t||i==t?C():M(e,n)}}function pe(e,t,r){for(var n=3;n<arguments.length;n++)k.cc.push(arguments[n]);return C(z(t,r),ce(e,t),F)}function he(e){return"}"==e?C():M(j,he)}function de(e,t){if(c){if(":"==e)return C(ye);if("?"==t)return C(de)}}function fe(e,t){if(c&&(":"==e||"in"==t))return C(ye)}function me(e){if(c&&":"==e)return k.stream.match(/^\s*\w+\s+is\b/,!1)?C(V,ge,ye):C(ye)}function ge(e,t){if("is"==t)return k.marked="keyword",C()}function ye(e,t){return"keyof"==t||"typeof"==t||"infer"==t||"readonly"==t?(k.marked="keyword",C("typeof"==t?H:ye)):"variable"==e||"void"==t?(k.marked="type",C(Se)):"|"==t||"&"==t?C(ye):"string"==e||"number"==e||"atom"==e?C(Se):"["==e?C(z("]"),ce(ye,"]",","),F,Se):"{"==e?C(z("}"),be,F,Se):"("==e?C(ce(Ee,")"),ve,Se):"<"==e?C(ce(ye,">"),ye):"quasi"==e?M(we,Se):void 0}function ve(e){if("=>"==e)return C(ye)}function be(e){return e.match(/[\}\)\]]/)?C():","==e||";"==e?C(be):M(xe,be)}function xe(e,t){return"variable"==e||"keyword"==k.style?(k.marked="property",C(xe)):"?"==t||"number"==e||"string"==e?C(xe):":"==e?C(ye):"["==e?C(U("variable"),fe,U("]"),xe):"("==e?M(Be,xe):e.match(/[;\}\)\],]/)?void 0:C()}function we(e,t){return"quasi"!=e?M():"${"!=t.slice(t.length-2)?C(we):C(ye,_e)}function _e(e){if("}"==e)return k.marked="string-2",k.state.tokenize=x,C(we)}function Ee(e,t){return"variable"==e&&k.stream.match(/^\s*[?:]/,!1)||"?"==t?C(Ee):":"==e?C(ye):"spread"==e?C(Ee):M(ye)}function Se(e,t){return"<"==t?C(z(">"),ce(ye,">"),F,Se):"|"==t||"."==e||"&"==t?C(ye):"["==e?C(ye,U("]"),Se):"extends"==t||"implements"==t?(k.marked="keyword",C(ye)):"?"==t?C(ye,U(":"),ye):void 0}function Ae(e,t){if("<"==t)return C(z(">"),ce(ye,">"),F,Se)}function Ne(){return M(ye,ke)}function ke(e,t){if("="==t)return C(ye)}function Me(e,t){return"enum"==t?(k.marked="keyword",C(tt)):M(Ce,de,Ie,Pe)}function Ce(e,t){return c&&P(t)?(k.marked="keyword",C(Ce)):"variable"==e?(O(t),C()):"spread"==e?C(Ce):"["==e?pe(Oe,"]"):"{"==e?pe(Te,"}"):void 0}function Te(e,t){return"variable"!=e||k.stream.match(/^\s*:/,!1)?("variable"==e&&(k.marked="property"),"spread"==e?C(Ce):"}"==e?M():"["==e?C(V,U("]"),U(":"),Te):C(U(":"),Ce,Ie)):(O(t),C(Ie))}function Oe(){return M(Ce,Ie)}function Ie(e,t){if("="==t)return C(H)}function Pe(e){if(","==e)return C(Me)}function De(e,t){if("keyword b"==e&&"else"==t)return C(z("form","else"),j,F)}function Re(e,t){return"await"==t?C(Re):"("==e?C(z(")"),Le,F):void 0}function Le(e){return"var"==e?C(Me,qe):"variable"==e?C(qe):M(qe)}function qe(e,t){return")"==e?C():";"==e?C(qe):"in"==t||"of"==t?(k.marked="keyword",C(V,qe)):M(V,qe)}function $e(e,t){return"*"==t?(k.marked="keyword",C($e)):"variable"==e?(O(t),C($e)):"("==e?C(q,z(")"),ce(Fe,")"),F,me,j,B):c&&"<"==t?C(z(">"),ce(Ne,">"),F,$e):void 0}function Be(e,t){return"*"==t?(k.marked="keyword",C(Be)):"variable"==e?(O(t),C(Be)):"("==e?C(q,z(")"),ce(Fe,")"),F,me,B):c&&"<"==t?C(z(">"),ce(Ne,">"),F,Be):void 0}function ze(e,t){return"keyword"==e||"variable"==e?(k.marked="type",C(ze)):"<"==t?C(z(">"),ce(Ne,">"),F):void 0}function Fe(e,t){return"@"==t&&C(V,Fe),"spread"==e?C(Fe):c&&P(t)?(k.marked="keyword",C(Fe)):c&&"this"==e?C(de,Ie):M(Ce,de,Ie)}function Ue(e,t){return"variable"==e?je(e,t):Ge(e,t)}function je(e,t){if("variable"==e)return O(t),C(Ge)}function Ge(e,t){return"<"==t?C(z(">"),ce(Ne,">"),F,Ge):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(k.marked="keyword"),C(c?ye:V,Ge)):"{"==e?C(z("}"),Ve,F):void 0}function Ve(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&P(t))&&k.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(k.marked="keyword",C(Ve)):"variable"==e||"keyword"==k.style?(k.marked="property",C(He,Ve)):"number"==e||"string"==e?C(He,Ve):"["==e?C(V,de,U("]"),He,Ve):"*"==t?(k.marked="keyword",C(Ve)):c&&"("==e?M(Be,Ve):";"==e||","==e?C(Ve):"}"==e?C():"@"==t?C(V,Ve):void 0}function He(e,t){if("!"==t)return C(He);if("?"==t)return C(He);if(":"==e)return C(ye,Ie);if("="==t)return C(H);var r=k.state.lexical.prev;return M(r&&"interface"==r.info?Be:$e)}function We(e,t){return"*"==t?(k.marked="keyword",C(Je,U(";"))):"default"==t?(k.marked="keyword",C(V,U(";"))):"{"==e?C(ce(Ye,"}"),Je,U(";")):M(j)}function Ye(e,t){return"as"==t?(k.marked="keyword",C(U("variable"))):"variable"==e?M(H,Ye):void 0}function Xe(e){return"string"==e?C():"("==e?M(V):"."==e?M(Z):M(Ze,Qe,Je)}function Ze(e,t){return"{"==e?pe(Ze,"}"):("variable"==e&&O(t),"*"==t&&(k.marked="keyword"),C(Ke))}function Qe(e){if(","==e)return C(Ze,Qe)}function Ke(e,t){if("as"==t)return k.marked="keyword",C(Ze)}function Je(e,t){if("from"==t)return k.marked="keyword",C(V)}function et(e){return"]"==e?C():M(ce(H,"]"))}function tt(){return M(z("form"),Ce,U("{"),z("}"),ce(rt,"}"),F,F)}function rt(){return M(Ce,Ie)}function nt(e,t){return"operator"==e.lastType||","==e.lastType||d.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}function it(e,t,r){return t.tokenize==y&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}return B.lex=!0,F.lex=!0,{startState:function(e){var t={tokenize:y,lastType:"sof",cc:[],lexical:new S((e||0)-s,0,"block",!1),localVars:r.localVars,context:r.localVars&&new D(null,null,!1),indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),_(e,t)),t.tokenize!=b&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=i&&"--"!=i?n:"incdec",N(t,r,n,i,e))},indent:function(t,n){if(t.tokenize==b||t.tokenize==x)return e.Pass;if(t.tokenize!=y)return 0;var i,a=n&&n.charAt(0),l=t.lexical;if(!/^\s*else\b/.test(n))for(var u=t.cc.length-1;u>=0;--u){var c=t.cc[u];if(c==F)l=l.prev;else if(c!=De&&c!=B)break}for(;("stat"==l.type||"form"==l.type)&&("}"==a||(i=t.cc[t.cc.length-1])&&(i==Z||i==Q)&&!/^[,\.=+\-*:?[\(]/.test(n));)l=l.prev;o&&")"==l.type&&"stat"==l.prev.type&&(l=l.prev);var p=l.type,h=a==p;return"vardef"==p?l.indented+("operator"==t.lastType||","==t.lastType?l.info.length+1:0):"form"==p&&"{"==a?l.indented:"form"==p?l.indented+s:"stat"==p?l.indented+(nt(t,n)?o||s:0):"switch"!=l.info||h||0==r.doubleIndentSwitch?l.align?l.column+(h?0:1):l.indented+(h?0:s):l.indented+(/^(?:case|default)\b/.test(n)?s:2*s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:it,skipExpression:function(t){N(t,"atom","atom","true",new e.StringStream("",2,null))}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/manifest+json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(r(71614))},40742:(e,t,r)=>{!function(e){"use strict";e.defineMode("stex",(function(e,t){function r(e,t){e.cmdState.push(t)}function n(e){return e.cmdState.length>0?e.cmdState[e.cmdState.length-1]:null}function i(e){var t=e.cmdState.pop();t&&t.closeBracket()}function s(e){for(var t=e.cmdState,r=t.length-1;r>=0;r--){var n=t[r];if("DEFAULT"!=n.name)return n}return{styleIdentifier:function(){return null}}}function o(e,t,r){return function(){this.name=e,this.bracketNo=0,this.style=t,this.styles=r,this.argument=null,this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null},this.openBracket=function(){return this.bracketNo++,"bracket"},this.closeBracket=function(){}}}var a={};function l(e,t){e.f=t}function u(e,t){var i;if(e.match(/^\\[a-zA-Z@]+/)){var o=e.current().slice(1);return r(t,i=new(i=a.hasOwnProperty(o)?a[o]:a.DEFAULT)),l(t,p),i.style}if(e.match(/^\\[$&%#{}_]/))return"tag";if(e.match(/^\\[,;!\/\\]/))return"tag";if(e.match("\\["))return l(t,(function(e,t){return c(e,t,"\\]")})),"keyword";if(e.match("\\("))return l(t,(function(e,t){return c(e,t,"\\)")})),"keyword";if(e.match("$$"))return l(t,(function(e,t){return c(e,t,"$$")})),"keyword";if(e.match("$"))return l(t,(function(e,t){return c(e,t,"$")})),"keyword";var u=e.next();return"%"==u?(e.skipToEnd(),"comment"):"}"==u||"]"==u?(i=n(t))?(i.closeBracket(u),l(t,p),"bracket"):"error":"{"==u||"["==u?(r(t,i=new(i=a.DEFAULT)),"bracket"):/\d/.test(u)?(e.eatWhile(/[\w.%]/),"atom"):(e.eatWhile(/[\w\-_]/),"begin"==(i=s(t)).name&&(i.argument=e.current()),i.styleIdentifier())}function c(e,t,r){if(e.eatSpace())return null;if(r&&e.match(r))return l(t,u),"keyword";if(e.match(/^\\[a-zA-Z@]+/))return"tag";if(e.match(/^[a-zA-Z]+/))return"variable-2";if(e.match(/^\\[$&%#{}_]/))return"tag";if(e.match(/^\\[,;!\/]/))return"tag";if(e.match(/^[\^_&]/))return"tag";if(e.match(/^[+\-<>|=,\/@!*:;'"`~#?]/))return null;if(e.match(/^(\d+\.\d*|\d*\.\d+|\d+)/))return"number";var n=e.next();return"{"==n||"}"==n||"["==n||"]"==n||"("==n||")"==n?"bracket":"%"==n?(e.skipToEnd(),"comment"):"error"}function p(e,t){var r=e.peek();return"{"==r||"["==r?(n(t).openBracket(r),e.eat(r),l(t,u),"bracket"):/[ \t\r]/.test(r)?(e.eat(r),null):(l(t,u),i(t),u(e,t))}return a.importmodule=o("importmodule","tag",["string","builtin"]),a.documentclass=o("documentclass","tag",["","atom"]),a.usepackage=o("usepackage","tag",["atom"]),a.begin=o("begin","tag",["atom"]),a.end=o("end","tag",["atom"]),a.label=o("label","tag",["atom"]),a.ref=o("ref","tag",["atom"]),a.eqref=o("eqref","tag",["atom"]),a.cite=o("cite","tag",["atom"]),a.bibitem=o("bibitem","tag",["atom"]),a.Bibitem=o("Bibitem","tag",["atom"]),a.RBibitem=o("RBibitem","tag",["atom"]),a.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=this.openBracket=this.closeBracket=function(){}},{startState:function(){return{cmdState:[],f:t.inMathMode?function(e,t){return c(e,t)}:u}},copyState:function(e){return{cmdState:e.cmdState.slice(),f:e.f}},token:function(e,t){return t.f(e,t)},blankLine:function(e){e.f=u,e.cmdState.length=0},lineComment:"%"}})),e.defineMIME("text/x-stex","stex"),e.defineMIME("text/x-latex","stex")}(r(71614))},36881:(e,t,r)=>{!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(n,i){var s,o,a=n.indentUnit,l={},u=i.htmlMode?t:r;for(var c in u)l[c]=u[c];for(var c in i)l[c]=i[c];function p(e,t){function r(r){return t.tokenize=r,r(e,t)}var n=e.next();return"<"==n?e.eat("!")?e.eat("[")?e.match("CDATA[")?r(f("atom","]]>")):null:e.match("--")?r(f("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(m(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=f("meta","?>"),"meta"):(s=e.eat("/")?"closeTag":"openTag",t.tokenize=h,"tag bracket"):"&"==n?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function h(e,t){var r=e.next();if(">"==r||"/"==r&&e.eat(">"))return t.tokenize=p,s=">"==r?"endTag":"selfcloseTag","tag bracket";if("="==r)return s="equals",null;if("<"==r){t.tokenize=p,t.state=x,t.tagName=t.tagStart=null;var n=t.tokenize(e,t);return n?n+" tag error":"tag error"}return/[\'\"]/.test(r)?(t.tokenize=d(r),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function d(e){var t=function(t,r){for(;!t.eol();)if(t.next()==e){r.tokenize=h;break}return"string"};return t.isInAttribute=!0,t}function f(e,t){return function(r,n){for(;!r.eol();){if(r.match(t)){n.tokenize=p;break}r.next()}return e}}function m(e){return function(t,r){for(var n;null!=(n=t.next());){if("<"==n)return r.tokenize=m(e+1),r.tokenize(t,r);if(">"==n){if(1==e){r.tokenize=p;break}return r.tokenize=m(e-1),r.tokenize(t,r)}}return"meta"}}function g(e){return e&&e.toLowerCase()}function y(e,t,r){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=r,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function v(e){e.context&&(e.context=e.context.prev)}function b(e,t){for(var r;;){if(!e.context)return;if(r=e.context.tagName,!l.contextGrabbers.hasOwnProperty(g(r))||!l.contextGrabbers[g(r)].hasOwnProperty(g(t)))return;v(e)}}function x(e,t,r){return"openTag"==e?(r.tagStart=t.column(),w):"closeTag"==e?_:x}function w(e,t,r){return"word"==e?(r.tagName=t.current(),o="tag",A):l.allowMissingTagName&&"endTag"==e?(o="tag bracket",A(e,t,r)):(o="error",w)}function _(e,t,r){if("word"==e){var n=t.current();return r.context&&r.context.tagName!=n&&l.implicitlyClosed.hasOwnProperty(g(r.context.tagName))&&v(r),r.context&&r.context.tagName==n||!1===l.matchClosing?(o="tag",E):(o="tag error",S)}return l.allowMissingTagName&&"endTag"==e?(o="tag bracket",E(e,t,r)):(o="error",S)}function E(e,t,r){return"endTag"!=e?(o="error",E):(v(r),x)}function S(e,t,r){return o="error",E(e,t,r)}function A(e,t,r){if("word"==e)return o="attribute",N;if("endTag"==e||"selfcloseTag"==e){var n=r.tagName,i=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(g(n))?b(r,n):(b(r,n),r.context=new y(r,n,i==r.indented)),x}return o="error",A}function N(e,t,r){return"equals"==e?k:(l.allowMissing||(o="error"),A(e,t,r))}function k(e,t,r){return"string"==e?M:"word"==e&&l.allowUnquoted?(o="string",A):(o="error",A(e,t,r))}function M(e,t,r){return"string"==e?M:A(e,t,r)}return p.isInText=!0,{startState:function(e){var t={tokenize:p,state:x,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;s=null;var r=t.tokenize(e,t);return(r||s)&&"comment"!=r&&(o=null,t.state=t.state(s||r,e,t),o&&(r="error"==o?r+" error":o)),r},indent:function(t,r,n){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+a;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=h&&t.tokenize!=p)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==l.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+a*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var s=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(s&&s[1])for(;i;){if(i.tagName==s[2]){i=i.prev;break}if(!l.implicitlyClosed.hasOwnProperty(g(i.tagName)))break;i=i.prev}else if(s)for(;i;){var o=l.contextGrabbers[g(i.tagName)];if(!o||!o.hasOwnProperty(g(s[2])))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+a:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==k&&(e.state=A)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],r=e.context;r;r=r.prev)t.push(r.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(r(71614))},35148:function(e,t){var r;!function(n){"use strict";var i=function(e){return.5*(Math.exp(e)+Math.exp(-e))},s=function(e){return.5*(Math.exp(e)-Math.exp(-e))},o=function(){throw SyntaxError("Invalid Param")};function a(e,t){var r=Math.abs(e),n=Math.abs(t);return 0===e?Math.log(n):0===t?Math.log(r):r<3e3&&n<3e3?.5*Math.log(e*e+t*t):Math.log(e/Math.cos(Math.atan2(t,e)))}function l(e,t){if(!(this instanceof l))return new l(e,t);var r=function(e,t){var r={re:0,im:0};if(null==e)r.re=r.im=0;else if(void 0!==t)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!Number.isFinite(e.abs)&&Number.isFinite(e.arg))return l.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!Number.isFinite(e.r)&&Number.isFinite(e.phi))return l.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else 2===e.length?(r.re=e[0],r.im=e[1]):o();break;case"string":r.im=r.re=0;var n=e.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,s=0;null===n&&o();for(var a=0;a<n.length;a++){var u=n[a];" "===u||"\t"===u||"\n"===u||("+"===u?i++:"-"===u?s++:"i"===u||"I"===u?(i+s===0&&o()," "===n[a+1]||isNaN(n[a+1])?r.im+=parseFloat((s%2?"-":"")+"1"):(r.im+=parseFloat((s%2?"-":"")+n[a+1]),a++),i=s=0):((i+s===0||isNaN(u))&&o(),"i"===n[a+1]||"I"===n[a+1]?(r.im+=parseFloat((s%2?"-":"")+u),a++):r.re+=parseFloat((s%2?"-":"")+u),i=s=0))}i+s>0&&o();break;case"number":r.im=0,r.re=e;break;default:o()}return isNaN(r.re)||isNaN(r.im),r}(e,t);this.re=r.re,this.im=r.im}l.prototype={re:0,im:0,sign:function(){var e=this.abs();return new l(this.re/e,this.im/e)},add:function(e,t){var r=new l(e,t);return this.isInfinite()&&r.isInfinite()?l.NAN:this.isInfinite()||r.isInfinite()?l.INFINITY:new l(this.re+r.re,this.im+r.im)},sub:function(e,t){var r=new l(e,t);return this.isInfinite()&&r.isInfinite()?l.NAN:this.isInfinite()||r.isInfinite()?l.INFINITY:new l(this.re-r.re,this.im-r.im)},mul:function(e,t){var r=new l(e,t);return this.isInfinite()&&r.isZero()||this.isZero()&&r.isInfinite()?l.NAN:this.isInfinite()||r.isInfinite()?l.INFINITY:0===r.im&&0===this.im?new l(this.re*r.re,0):new l(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){var r=new l(e,t);if(this.isZero()&&r.isZero()||this.isInfinite()&&r.isInfinite())return l.NAN;if(this.isInfinite()||r.isZero())return l.INFINITY;if(this.isZero()||r.isInfinite())return l.ZERO;e=this.re,t=this.im;var n,i,s=r.re,o=r.im;return 0===o?new l(e/s,t/s):Math.abs(s)<Math.abs(o)?new l((e*(i=s/o)+t)/(n=s*i+o),(t*i-e)/n):new l((e+t*(i=o/s))/(n=o*i+s),(t-e*i)/n)},pow:function(e,t){var r=new l(e,t);if(e=this.re,t=this.im,r.isZero())return l.ONE;if(0===r.im){if(0===t&&e>0)return new l(Math.pow(e,r.re),0);if(0===e)switch((r.re%4+4)%4){case 0:return new l(Math.pow(t,r.re),0);case 1:return new l(0,Math.pow(t,r.re));case 2:return new l(-Math.pow(t,r.re),0);case 3:return new l(0,-Math.pow(t,r.re))}}if(0===e&&0===t&&r.re>0&&r.im>=0)return l.ZERO;var n=Math.atan2(t,e),i=a(e,t);return e=Math.exp(r.re*i-r.im*n),t=r.im*i+r.re*n,new l(e*Math.cos(t),e*Math.sin(t))},sqrt:function(){var e,t,r=this.re,n=this.im,i=this.abs();if(r>=0){if(0===n)return new l(Math.sqrt(r),0);e=.5*Math.sqrt(2*(i+r))}else e=Math.abs(n)/Math.sqrt(2*(i-r));return t=r<=0?.5*Math.sqrt(2*(i-r)):Math.abs(n)/Math.sqrt(2*(i+r)),new l(e,n<0?-t:t)},exp:function(){var e=Math.exp(this.re);return this.im,new l(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){var e=this.re,t=this.im;return new l(Math.expm1(e)*Math.cos(t)+function(e){var t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;var r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){var e=this.re,t=this.im;return new l(a(e,t),Math.atan2(t,e))},abs:function(){return e=this.re,t=this.im,r=Math.abs(e),n=Math.abs(t),r<3e3&&n<3e3?Math.sqrt(r*r+n*n):(r<n?(r=n,n=e/t):n=t/e,r*Math.sqrt(1+n*n));var e,t,r,n},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var e=this.re,t=this.im;return new l(Math.sin(e)*i(t),Math.cos(e)*s(t))},cos:function(){var e=this.re,t=this.im;return new l(Math.cos(e)*i(t),-Math.sin(e)*s(t))},tan:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)+i(t);return new l(Math.sin(e)/r,s(t)/r)},cot:function(){var e=2*this.re,t=2*this.im,r=Math.cos(e)-i(t);return new l(-Math.sin(e)/r,s(t)/r)},sec:function(){var e=this.re,t=this.im,r=.5*i(2*t)+.5*Math.cos(2*e);return new l(Math.cos(e)*i(t)/r,Math.sin(e)*s(t)/r)},csc:function(){var e=this.re,t=this.im,r=.5*i(2*t)-.5*Math.cos(2*e);return new l(Math.sin(e)*i(t)/r,-Math.cos(e)*s(t)/r)},asin:function(){var e=this.re,t=this.im,r=new l(t*t-e*e+1,-2*e*t).sqrt(),n=new l(r.re-t,r.im+e).log();return new l(n.im,-n.re)},acos:function(){var e=this.re,t=this.im,r=new l(t*t-e*e+1,-2*e*t).sqrt(),n=new l(r.re-t,r.im+e).log();return new l(Math.PI/2-n.im,n.re)},atan:function(){var e=this.re,t=this.im;if(0===e){if(1===t)return new l(0,1/0);if(-1===t)return new l(0,-1/0)}var r=e*e+(1-t)*(1-t),n=new l((1-t*t-e*e)/r,-2*e/r).log();return new l(-.5*n.im,.5*n.re)},acot:function(){var e=this.re,t=this.im;if(0===t)return new l(Math.atan2(1,e),0);var r=e*e+t*t;return 0!==r?new l(e/r,-t/r).atan():new l(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(0,1/0);var r=e*e+t*t;return 0!==r?new l(e/r,-t/r).acos():new l(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(Math.PI/2,1/0);var r=e*e+t*t;return 0!==r?new l(e/r,-t/r).asin():new l(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){var e=this.re,t=this.im;return new l(s(e)*Math.cos(t),i(e)*Math.sin(t))},cosh:function(){var e=this.re,t=this.im;return new l(i(e)*Math.cos(t),s(e)*Math.sin(t))},tanh:function(){var e=2*this.re,t=2*this.im,r=i(e)+Math.cos(t);return new l(s(e)/r,Math.sin(t)/r)},coth:function(){var e=2*this.re,t=2*this.im,r=i(e)-Math.cos(t);return new l(s(e)/r,-Math.sin(t)/r)},csch:function(){var e=this.re,t=this.im,r=Math.cos(2*t)-i(2*e);return new l(-2*s(e)*Math.cos(t)/r,2*i(e)*Math.sin(t)/r)},sech:function(){var e=this.re,t=this.im,r=Math.cos(2*t)+i(2*e);return new l(2*i(e)*Math.cos(t)/r,-2*s(e)*Math.sin(t)/r)},asinh:function(){var e=this.im;this.im=-this.re,this.re=e;var t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){var e=this.acos();if(e.im<=0){var t=e.re;e.re=-e.im,e.im=t}else{t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){var e=this.re,t=this.im,r=e>1&&0===t,n=1-e,i=1+e,s=n*n+t*t,o=0!==s?new l((i*n-t*t)/s,(t*n+i*t)/s):new l(-1!==e?e/0:0,0!==t?t/0:0),u=o.re;return o.re=a(o.re,o.im)/2,o.im=Math.atan2(o.im,u)/2,r&&(o.im=-o.im),o},acoth:function(){var e=this.re,t=this.im;if(0===e&&0===t)return new l(0,Math.PI/2);var r=e*e+t*t;return 0!==r?new l(e/r,-t/r).atanh():new l(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){var e=this.re,t=this.im;if(0===t)return new l(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);var r=e*e+t*t;return 0!==r?new l(e/r,-t/r).asinh():new l(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){var e=this.re,t=this.im;if(this.isZero())return l.INFINITY;var r=e*e+t*t;return 0!==r?new l(e/r,-t/r).acosh():new l(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return l.INFINITY;if(this.isInfinite())return l.ZERO;var e=this.re,t=this.im,r=e*e+t*t;return new l(e/r,-t/r)},conjugate:function(){return new l(this.re,-this.im)},neg:function(){return new l(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new l(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new l(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new l(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){var r=new l(e,t);return Math.abs(r.re-this.re)<=l.EPSILON&&Math.abs(r.im-this.im)<=l.EPSILON},clone:function(){return new l(this.re,this.im)},toString:function(){var e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<l.EPSILON&&(e=0),Math.abs(t)<l.EPSILON&&(t=0),0===t?r+e:(0!==e?(r+=e,r+=" ",t<0?(t=-t,r+="-"):r+="+",r+=" "):t<0&&(t=-t,r+="-"),1!==t&&(r+=t),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},l.ZERO=new l(0,0),l.ONE=new l(1,0),l.I=new l(0,1),l.PI=new l(Math.PI,0),l.E=new l(Math.E,0),l.INFINITY=new l(1/0,1/0),l.NAN=new l(NaN,NaN),l.EPSILON=1e-15,void 0===(r=function(){return l}.apply(t,[]))||(e.exports=r)}()},53539:function(e,t,r){var n;!function(i){"use strict";var s,o,a,l=9e15,u=1e9,c="0123456789abcdef",p="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",h="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",d={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},f=!0,m="[DecimalError] ",g=m+"Invalid argument: ",y=m+"Precision limit exceeded",v=m+"crypto unavailable",b="[object Decimal]",x=Math.floor,w=Math.pow,_=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,E=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,A=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,N=1e7,k=p.length-1,M=h.length-1,C={toStringTag:b};function T(e){var t,r,n,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)(r=7-(n=e[t]+"").length)&&(s+=F(r)),s+=n;(r=7-(n=(o=e[t])+"").length)&&(s+=F(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function O(e,t,r){if(e!==~~e||e<t||e>r)throw Error(g+e)}function I(e,t,r,n){var i,s,o,a;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=w(10,7-t),a=e[i]%s|0,null==n?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),o=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):o=(r<4&&a+1==s||r>3&&a+1==s/2)&&(e[i+1]/s/100|0)==w(10,t-2)-1||(a==s/2||0==a)&&0==(e[i+1]/s/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),o=(n||r<4)&&9999==a||!n&&r>3&&4999==a):o=((n||r<4)&&a+1==s||!n&&r>3&&a+1==s/2)&&(e[i+1]/s/1e3|0)==w(10,t-3)-1,o}function P(e,t,r){for(var n,i,s=[0],o=0,a=e.length;o<a;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=c.indexOf(e.charAt(o++)),n=0;n<s.length;n++)s[n]>r-1&&(void 0===s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/r|0,s[n]%=r)}return s.reverse()}C.absoluteValue=C.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),R(e)},C.ceil=function(){return R(new this.constructor(this),this.e+1,2)},C.clampedTo=C.clamp=function(e,t){var r=this,n=r.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(g+t);return r.cmp(e)<0?e:r.cmp(t)>0?t:new n(r)},C.comparedTo=C.cmp=function(e){var t,r,n,i,s=this,o=s.d,a=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!o||!a)return l&&u?l!==u?l:o===a?0:!o^l<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(t=0,r=(n=o.length)<(i=a.length)?n:i;t<r;++t)if(o[t]!==a[t])return o[t]>a[t]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1},C.cosine=C.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(e,t){var r,n,i;if(t.isZero())return t;(n=t.d.length)<32?i=(1/Q(4,r=Math.ceil(n/3))).toString():(r=16,i="2.3283064365386962890625e-10");e.precision+=r,t=Z(e,1,t.times(i),new e(1));for(var s=r;s--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=r,t}(n,K(n,r)),n.precision=e,n.rounding=t,R(2==a||3==a?r.neg():r,e,t,!0)):new n(1):new n(NaN)},C.cubeRoot=C.cbrt=function(){var e,t,r,n,i,s,o,a,l,u,c=this,p=c.constructor;if(!c.isFinite()||c.isZero())return new p(c);for(f=!1,(s=c.s*w(c.s*c,1/3))&&Math.abs(s)!=1/0?n=new p(s.toString()):(r=T(c.d),(s=((e=c.e)-r.length+1)%3)&&(r+=1==s||-2==s?"0":"00"),s=w(r,1/3),e=x((e+1)/3)-(e%3==(e<0?-1:2)),(n=new p(r=s==1/0?"5e"+e:(r=s.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=c.s),o=(e=p.precision)+3;;)if(u=(l=(a=n).times(a).times(a)).plus(c),n=D(u.plus(c).times(a),u.plus(l),o+2,1),T(a.d).slice(0,o)===(r=T(n.d)).slice(0,o)){if("9999"!=(r=r.slice(o-3,o+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(R(n,e+1,1),t=!n.times(n).times(n).eq(c));break}if(!i&&(R(a,e+1,0),a.times(a).times(a).eq(c))){n=a;break}o+=4,i=1}return f=!0,R(n,e,p.rounding,t)},C.decimalPlaces=C.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=7*((e=t.length-1)-x(this.e/7)),e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},C.dividedBy=C.div=function(e){return D(this,new this.constructor(e))},C.dividedToIntegerBy=C.divToInt=function(e){var t=this.constructor;return R(D(this,new t(e),0,1,1),t.precision,t.rounding)},C.equals=C.eq=function(e){return 0===this.cmp(e)},C.floor=function(){return R(new this.constructor(this),this.e+1,3)},C.greaterThan=C.gt=function(e){return this.cmp(e)>0},C.greaterThanOrEqualTo=C.gte=function(e){var t=this.cmp(e);return 1==t||0===t},C.hyperbolicCosine=C.cosh=function(){var e,t,r,n,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;r=o.precision,n=o.rounding,o.precision=r+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?t=(1/Q(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=Z(o,1,s.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=s.times(s),s=a.minus(l.times(c.minus(l.times(c))));return R(s,o.precision=r,o.rounding=n,!0)},C.hyperbolicSine=C.sinh=function(){var e,t,r,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,r=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(n=i.d.length)<3)i=Z(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(n))>16?16:0|e,i=Z(s,2,i=i.times(1/Q(5,e)),i,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);e--;)o=i.times(i),i=i.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=t,s.rounding=r,R(i,t,r,!0)},C.hyperbolicTangent=C.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,D(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)},C.inverseCosine=C.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),i=r.precision,s=r.rounding;return-1!==n?0===n?t.isNeg()?B(r,i,s):new r(0):new r(NaN):t.isZero()?B(r,i+4,s).times(.5):(r.precision=i+6,r.rounding=1,t=t.asin(),e=B(r,i+4,s).times(.5),r.precision=i,r.rounding=s,e.minus(t))},C.inverseHyperbolicCosine=C.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,f=!1,r=r.times(r).minus(1).sqrt().plus(r),f=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},C.inverseHyperbolicSine=C.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,f=!1,r=r.times(r).plus(1).sqrt().plus(r),f=!0,n.precision=e,n.rounding=t,r.ln())},C.inverseHyperbolicTangent=C.atanh=function(){var e,t,r,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?R(new s(i),e,t,!0):(s.precision=r=n-i.e,i=D(i.plus(1),new s(1).minus(i),r+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},C.inverseSine=C.asin=function(){var e,t,r,n,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),r=s.precision,n=s.rounding,-1!==t?0===t?((e=B(s,r+4,n).times(.5)).s=i.s,e):new s(NaN):(s.precision=r+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=n,i.times(2)))},C.inverseTangent=C.atan=function(){var e,t,r,n,i,s,o,a,l,u=this,c=u.constructor,p=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&p+4<=M)return(o=B(c,p+4,h).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(p+4<=M)return(o=B(c,p+4,h).times(.5)).s=u.s,o}for(c.precision=a=p+10,c.rounding=1,e=r=Math.min(28,a/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(f=!1,t=Math.ceil(a/7),n=1,l=u.times(u),o=new c(u),i=u;-1!==e;)if(i=i.times(l),s=o.minus(i.div(n+=2)),i=i.times(l),void 0!==(o=s.plus(i.div(n+=2))).d[t])for(e=t;o.d[e]===s.d[e]&&e--;);return r&&(o=o.times(2<<r-1)),f=!0,R(o,c.precision=p,c.rounding=h,!0)},C.isFinite=function(){return!!this.d},C.isInteger=C.isInt=function(){return!!this.d&&x(this.e/7)>this.d.length-2},C.isNaN=function(){return!this.s},C.isNegative=C.isNeg=function(){return this.s<0},C.isPositive=C.isPos=function(){return this.s>0},C.isZero=function(){return!!this.d&&0===this.d[0]},C.lessThan=C.lt=function(e){return this.cmp(e)<0},C.lessThanOrEqualTo=C.lte=function(e){return this.cmp(e)<1},C.logarithm=C.log=function(e){var t,r,n,i,s,o,a,l,u=this,c=u.constructor,p=c.precision,h=c.rounding;if(null==e)e=new c(10),t=!0;else{if(r=(e=new c(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:1!=u.s?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(i=r[0];i%10==0;)i/=10;s=1!==i}if(f=!1,o=H(u,a=p+5),n=t?$(c,a+10):H(e,a),I((l=D(o,n,a,1)).d,i=p,h))do{if(o=H(u,a+=10),n=t?$(c,a+10):H(e,a),l=D(o,n,a,1),!s){+T(l.d).slice(i+1,i+15)+1==1e14&&(l=R(l,p+1,0));break}}while(I(l.d,i+=10,h));return f=!0,R(l,p,h)},C.minus=C.sub=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d=this,m=d.constructor;if(e=new m(e),!d.d||!e.d)return d.s&&e.s?d.d?e.s=-e.s:e=new m(e.d||d.s!==e.s?d:NaN):e=new m(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.plus(e);if(u=d.d,h=e.d,a=m.precision,l=m.rounding,!u[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!u[0])return new m(3===l?-0:0);e=new m(d)}return f?R(e,a,l):e}if(r=x(e.e/7),c=x(d.e/7),u=u.slice(),s=c-r){for((p=s<0)?(t=u,s=-s,o=h.length):(t=h,r=c,o=u.length),s>(n=Math.max(Math.ceil(a/7),o)+2)&&(s=n,t.length=1),t.reverse(),n=s;n--;)t.push(0);t.reverse()}else{for((p=(n=u.length)<(o=h.length))&&(o=n),n=0;n<o;n++)if(u[n]!=h[n]){p=u[n]<h[n];break}s=0}for(p&&(t=u,u=h,h=t,e.s=-e.s),o=u.length,n=h.length-o;n>0;--n)u[o++]=0;for(n=h.length;n>s;){if(u[--n]<h[n]){for(i=n;i&&0===u[--i];)u[i]=N-1;--u[i],u[n]+=N}u[n]-=h[n]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--r;return u[0]?(e.d=u,e.e=q(u,r),f?R(e,a,l):e):new m(3===l?-0:0)},C.modulo=C.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?R(new n(r),n.precision,n.rounding):(f=!1,9==n.modulo?(t=D(r,e.abs(),0,3,1)).s*=e.s:t=D(r,e,0,n.modulo,1),t=t.times(e),f=!0,r.minus(t))},C.naturalExponential=C.exp=function(){return V(this)},C.naturalLogarithm=C.ln=function(){return H(this)},C.negated=C.neg=function(){var e=new this.constructor(this);return e.s=-e.s,R(e)},C.plus=C.add=function(e){var t,r,n,i,s,o,a,l,u,c,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new h(e.d||p.s===e.s?p:NaN)):e=new h(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(u=p.d,c=e.d,a=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(e=new h(p)),f?R(e,a,l):e;if(s=x(p.e/7),n=x(e.e/7),u=u.slice(),i=s-n){for(i<0?(r=u,i=-i,o=c.length):(r=c,n=s,o=u.length),i>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=u.length)-(i=c.length)<0&&(i=o,r=c,c=u,u=r),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/N|0,u[i]%=N;for(t&&(u.unshift(t),++n),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=q(u,n),f?R(e,a,l):e},C.precision=C.sd=function(e){var t,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(g+e);return r.d?(t=z(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t},C.round=function(){var e=this,t=e.constructor;return R(new t(e),e.e+1,t.rounding)},C.sine=C.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:Z(e,2,t,t);r=(r=1.4*Math.sqrt(n))>16?16:0|r,t=t.times(1/Q(5,r)),t=Z(e,2,t,t);for(var i,s=new e(5),o=new e(16),a=new e(20);r--;)i=t.times(t),t=t.times(s.plus(i.times(o.times(i).minus(a))));return t}(n,K(n,r)),n.precision=e,n.rounding=t,R(a>2?r.neg():r,e,t,!0)):new n(NaN)},C.squareRoot=C.sqrt=function(){var e,t,r,n,i,s,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(f=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=T(a)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=x((l+1)/2)-(l<0||l%2),n=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new c(u.toString()),r=(l=c.precision)+3;;)if(n=(s=n).plus(D(o,s,r+2,1)).times(.5),T(s.d).slice(0,r)===(t=T(n.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(R(n,l+1,1),e=!n.times(n).eq(o));break}if(!i&&(R(s,l+1,0),s.times(s).eq(o))){n=s;break}r+=4,i=1}return f=!0,R(n,l,c.rounding,e)},C.tangent=C.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(r=r.sin()).s=1,r=D(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,R(2==a||4==a?r.neg():r,e,t,!0)):new n(NaN)},C.times=C.mul=function(e){var t,r,n,i,s,o,a,l,u,c=this,p=c.constructor,h=c.d,d=(e=new p(e)).d;if(e.s*=c.s,!(h&&h[0]&&d&&d[0]))return new p(!e.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:h&&d?0*e.s:e.s/0);for(r=x(c.e/7)+x(e.e/7),(l=h.length)<(u=d.length)&&(s=h,h=d,d=s,o=l,l=u,u=o),s=[],n=o=l+u;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)a=s[i]+d[n]*h[i-n-1]+t,s[i--]=a%N|0,t=a/N|0;s[i]=(s[i]+t)%N|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=q(s,r),f?R(e,p.precision,p.rounding):e},C.toBinary=function(e,t){return J(this,2,e,t)},C.toDecimalPlaces=C.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(O(e,0,u),void 0===t?t=n.rounding:O(t,0,8),R(r,e+r.e+1,t))},C.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=L(n,!0):(O(e,0,u),void 0===t?t=i.rounding:O(t,0,8),r=L(n=R(new i(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},C.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?r=L(i):(O(e,0,u),void 0===t?t=s.rounding:O(t,0,8),r=L(n=R(new s(i),e+i.e+1,t),!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},C.toFraction=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d=this,m=d.d,y=d.constructor;if(!m)return new y(d);if(u=r=new y(1),n=l=new y(0),o=(s=(t=new y(n)).e=z(m)-d.e-1)%7,t.d[0]=w(10,o<0?7+o:o),null==e)e=s>0?t:u;else{if(!(a=new y(e)).isInt()||a.lt(u))throw Error(g+a);e=a.gt(t)?s>0?t:u:a}for(f=!1,a=new y(T(m)),c=y.precision,y.precision=s=7*m.length*2;p=D(a,t,0,1,1),1!=(i=r.plus(p.times(n))).cmp(e);)r=n,n=i,i=u,u=l.plus(p.times(i)),l=i,i=t,t=a.minus(p.times(i)),a=i;return i=D(e.minus(r),n,0,1,1),l=l.plus(i.times(u)),r=r.plus(i.times(n)),l.s=u.s=d.s,h=D(u,n,s,1).minus(d).abs().cmp(D(l,r,s,1).minus(d).abs())<1?[u,n]:[l,r],y.precision=c,f=!0,h},C.toHexadecimal=C.toHex=function(e,t){return J(this,16,e,t)},C.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:O(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(f=!1,r=D(r,e,0,t,1).times(e),f=!0,R(r)):(e.s=r.s,r=e),r},C.toNumber=function(){return+this},C.toOctal=function(e,t){return J(this,8,e,t)},C.toPower=C.pow=function(e){var t,r,n,i,s,o,a=this,l=a.constructor,u=+(e=new l(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new l(w(+a,u));if((a=new l(a)).eq(1))return a;if(n=l.precision,s=l.rounding,e.eq(1))return R(a,n,s);if((t=x(e.e/7))>=e.d.length-1&&(r=u<0?-u:u)<=9007199254740991)return i=U(l,a,r,n),e.s<0?new l(1).div(i):R(i,n,s);if((o=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(t=0!=(r=w(+a,u))&&isFinite(r)?new l(r+"").e:x(u*(Math.log("0."+T(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(f=!1,l.rounding=a.s=1,r=Math.min(12,(t+"").length),(i=V(e.times(H(a,n+r)),n)).d&&I((i=R(i,n+5,1)).d,n,s)&&(t=n+10,+T((i=R(V(e.times(H(a,t+r)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=R(i,n+1,0))),i.s=o,f=!0,l.rounding=s,R(i,n,s))},C.toPrecision=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=L(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(O(e,1,u),void 0===t?t=i.rounding:O(t,0,8),r=L(n=R(new i(n),e,t),e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r},C.toSignificantDigits=C.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(O(e,1,u),void 0===t?t=r.rounding:O(t,0,8)),R(new r(this),e,t)},C.toString=function(){var e=this,t=e.constructor,r=L(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r},C.truncated=C.trunc=function(){return R(new this.constructor(this),this.e+1,1)},C.valueOf=C.toJSON=function(){var e=this,t=e.constructor,r=L(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};var D=function(){function e(e,t,r){var n,i=0,s=e.length;for(e=e.slice();s--;)n=e[s]*t+i,e[s]=n%r|0,i=n/r|0;return i&&e.unshift(i),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,s,a,l,u){var c,p,h,d,f,m,g,y,v,b,w,_,E,S,A,k,M,C,T,O,I=n.constructor,P=n.s==i.s?1:-1,D=n.d,L=i.d;if(!(D&&D[0]&&L&&L[0]))return new I(n.s&&i.s&&(D?!L||D[0]!=L[0]:L)?D&&0==D[0]||!L?0*P:P/0:NaN);for(u?(f=1,p=n.e-i.e):(u=N,f=7,p=x(n.e/f)-x(i.e/f)),T=L.length,M=D.length,b=(v=new I(P)).d=[],h=0;L[h]==(D[h]||0);h++);if(L[h]>(D[h]||0)&&p--,null==s?(S=s=I.precision,a=I.rounding):S=l?s+(n.e-i.e)+1:s,S<0)b.push(1),m=!0;else{if(S=S/f+2|0,h=0,1==T){for(d=0,L=L[0],S++;(h<M||d)&&S--;h++)A=d*u+(D[h]||0),b[h]=A/L|0,d=A%L|0;m=d||h<M}else{for((d=u/(L[0]+1)|0)>1&&(L=e(L,d,u),D=e(D,d,u),T=L.length,M=D.length),k=T,_=(w=D.slice(0,T)).length;_<T;)w[_++]=0;(O=L.slice()).unshift(0),C=L[0],L[1]>=u/2&&++C;do{d=0,(c=t(L,w,T,_))<0?(E=w[0],T!=_&&(E=E*u+(w[1]||0)),(d=E/C|0)>1?(d>=u&&(d=u-1),1==(c=t(g=e(L,d,u),w,y=g.length,_=w.length))&&(d--,r(g,T<y?O:L,y,u))):(0==d&&(c=d=1),g=L.slice()),(y=g.length)<_&&g.unshift(0),r(w,g,_,u),-1==c&&(c=t(L,w,T,_=w.length))<1&&(d++,r(w,T<_?O:L,_,u)),_=w.length):0===c&&(d++,w=[0]),b[h++]=d,c&&w[0]?w[_++]=D[k]||0:(w=[D[k]],_=1)}while((k++<M||void 0!==w[0])&&S--);m=void 0!==w[0]}b[0]||b.shift()}if(1==f)v.e=p,o=m;else{for(h=1,d=b[0];d>=10;d/=10)h++;v.e=h+p*f-1,R(v,l?s+v.e+1:s,a,m)}return v}}();function R(e,t,r,n){var i,s,o,a,l,u,c,p,h,d=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(i=1,a=p[0];a>=10;a/=10)i++;if((s=t-i)<0)s+=7,o=t,l=(c=p[h=0])/w(10,i-o-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(a=p.length)){if(!n)break e;for(;a++<=h;)p.push(0);c=l=0,i=1,o=(s%=7)-7+1}else{for(c=a=p[h],i=1;a>=10;a/=10)i++;l=(o=(s%=7)-7+i)<0?0:c/w(10,i-o-1)%10|0}if(n=n||t<0||void 0!==p[h+1]||(o<0?c:c%w(10,i-o-1)),u=r<4?(l||n)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||n||6==r&&(s>0?o>0?c/w(10,i-o):0:p[h-1])%10&1||r==(e.s<0?8:7)),t<1||!p[0])return p.length=0,u?(t-=e.e+1,p[0]=w(10,(7-t%7)%7),e.e=-t||0):p[0]=e.e=0,e;if(0==s?(p.length=h,a=1,h--):(p.length=h+1,a=w(10,7-s),p[h]=o>0?(c/w(10,i-o)%w(10,o)|0)*a:0),u)for(;;){if(0==h){for(s=1,o=p[0];o>=10;o/=10)s++;for(o=p[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(e.e++,p[0]==N&&(p[0]=1));break}if(p[h]+=a,p[h]!=N)break;p[h--]=0,a=1}for(s=p.length;0===p[--s];)p.pop()}return f&&(e.e>d.maxE?(e.d=null,e.e=NaN):e.e<d.minE&&(e.e=0,e.d=[0])),e}function L(e,t,r){if(!e.isFinite())return W(e);var n,i=e.e,s=T(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+F(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+F(-i-1)+s,r&&(n=r-o)>0&&(s+=F(n))):i>=o?(s+=F(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+F(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=F(n))),s}function q(e,t){var r=e[0];for(t*=7;r>=10;r/=10)t++;return t}function $(e,t,r){if(t>k)throw f=!0,r&&(e.precision=r),Error(y);return R(new e(p),t,1,!0)}function B(e,t,r){if(t>M)throw Error(y);return R(new e(h),t,r,!0)}function z(e){var t=e.length-1,r=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function F(e){for(var t="";e--;)t+="0";return t}function U(e,t,r,n){var i,s=new e(1),o=Math.ceil(n/7+4);for(f=!1;;){if(r%2&&ee((s=s.times(t)).d,o)&&(i=!0),0===(r=x(r/2))){r=s.d.length-1,i&&0===s.d[r]&&++s.d[r];break}ee((t=t.times(t)).d,o)}return f=!0,s}function j(e){return 1&e.d[e.d.length-1]}function G(e,t,r){for(var n,i=new e(t[0]),s=0;++s<t.length;){if(!(n=new e(t[s])).s){i=n;break}i[r](n)&&(i=n)}return i}function V(e,t){var r,n,i,s,o,a,l,u=0,c=0,p=0,h=e.constructor,d=h.rounding,m=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(f=!1,l=m):l=t,a=new h(.03125);e.e>-2;)e=e.times(a),p+=5;for(l+=n=Math.log(w(2,p))/Math.LN10*2+5|0,r=s=o=new h(1),h.precision=l;;){if(s=R(s.times(e),l,1),r=r.times(++c),T((a=o.plus(D(s,r,l,1))).d).slice(0,l)===T(o.d).slice(0,l)){for(i=p;i--;)o=R(o.times(o),l,1);if(null!=t)return h.precision=m,o;if(!(u<3&&I(o.d,l-n,d,u)))return R(o,h.precision=m,d,f=!0);h.precision=l+=10,r=s=a=new h(1),c=0,u++}o=a}}function H(e,t){var r,n,i,s,o,a,l,u,c,p,h,d=1,m=e,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new y(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==t?(f=!1,c=b):c=t,y.precision=c+=10,n=(r=T(g)).charAt(0),!(Math.abs(s=m.e)<15e14))return u=$(y,c+2,b).times(s+""),m=H(new y(n+"."+r.slice(1)),c-10).plus(u),y.precision=b,null==t?R(m,b,v,f=!0):m;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=T((m=m.times(e)).d)).charAt(0),d++;for(s=m.e,n>1?(m=new y("0."+r),s++):m=new y(n+"."+r.slice(1)),p=m,l=o=m=D(m.minus(1),m.plus(1),c,1),h=R(m.times(m),c,1),i=3;;){if(o=R(o.times(h),c,1),T((u=l.plus(D(o,new y(i),c,1))).d).slice(0,c)===T(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus($(y,c+2,b).times(s+""))),l=D(l,new y(d),c,1),null!=t)return y.precision=b,l;if(!I(l.d,c-10,v,a))return R(l,y.precision=b,v,f=!0);y.precision=c+=10,u=o=m=D(p.minus(1),p.plus(1),c,1),h=R(m.times(m),c,1),i=a=1}l=u,i+=2}}function W(e){return String(e.s*e.s/0)}function Y(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);n++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(n,i)){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=7;n<i;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=i;for(;n--;)t+="0";e.d.push(+t),f&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function X(e,t){var r,n,i,o,a,l,u,c,p;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),A.test(t))return Y(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(E.test(t))r=16,t=t.toLowerCase();else if(_.test(t))r=2;else{if(!S.test(t))throw Error(g+t);r=8}for((o=t.search(/p/i))>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),a=(o=t.indexOf("."))>=0,n=e.constructor,a&&(o=(l=(t=t.replace(".","")).length)-o,i=U(n,new n(r),o,2*o)),o=p=(c=P(t,r,N)).length-1;0===c[o];--o)c.pop();return o<0?new n(0*e.s):(e.e=q(c,p),e.d=c,f=!1,a&&(e=D(e,i,4*l)),u&&(e=e.times(Math.abs(u)<54?w(2,u):s.pow(2,u))),f=!0,e)}function Z(e,t,r,n,i){var s,o,a,l,u=e.precision,c=Math.ceil(u/7);for(f=!1,l=r.times(r),a=new e(n);;){if(o=D(a.times(l),new e(t++*t++),u,1),a=i?n.plus(o):n.minus(o),n=D(o.times(l),new e(t++*t++),u,1),void 0!==(o=a.plus(n)).d[c]){for(s=c;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=n,n=o,o=s}return f=!0,o.d.length=c+1,o}function Q(e,t){for(var r=e;--t;)r*=e;return r}function K(e,t){var r,n=t.s<0,i=B(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return a=n?4:1,t;if((r=t.divToInt(i)).isZero())a=n?3:2;else{if((t=t.minus(r.times(i))).lte(s))return a=j(r)?n?2:3:n?4:1,t;a=j(r)?n?1:4:n?3:2}return t.minus(i).abs()}function J(e,t,r,n){var i,s,a,l,p,h,d,f,m,g=e.constructor,y=void 0!==r;if(y?(O(r,1,u),void 0===n?n=g.rounding:O(n,0,8)):(r=g.precision,n=g.rounding),e.isFinite()){for(y?(i=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):i=t,(a=(d=L(e)).indexOf("."))>=0&&(d=d.replace(".",""),(m=new g(1)).e=d.length-a,m.d=P(L(m),10,i),m.e=m.d.length),s=p=(f=P(d,10,i)).length;0==f[--p];)f.pop();if(f[0]){if(a<0?s--:((e=new g(e)).d=f,e.e=s,f=(e=D(e,m,r,n,0,i)).d,s=e.e,h=o),a=f[r],l=i/2,h=h||void 0!==f[r+1],h=n<4?(void 0!==a||h)&&(0===n||n===(e.s<0?3:2)):a>l||a===l&&(4===n||h||6===n&&1&f[r-1]||n===(e.s<0?8:7)),f.length=r,h)for(;++f[--r]>i-1;)f[r]=0,r||(++s,f.unshift(1));for(p=f.length;!f[p-1];--p);for(a=0,d="";a<p;a++)d+=c.charAt(f[a]);if(y){if(p>1)if(16==t||8==t){for(a=16==t?4:3,--p;p%a;p++)d+="0";for(p=(f=P(d,i,t)).length;!f[p-1];--p);for(a=1,d="1.";a<p;a++)d+=c.charAt(f[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)d="0"+d;d="0."+d}else if(++s>p)for(s-=p;s--;)d+="0";else s<p&&(d=d.slice(0,s)+"."+d.slice(s))}else d=y?"0p+0":"0";d=(16==t?"0x":2==t?"0b":8==t?"0o":"")+d}else d=W(e);return e.s<0?"-"+d:d}function ee(e,t){if(e.length>t)return e.length=t,!0}function te(e){return new this(e).abs()}function re(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function ie(e,t){return new this(e).plus(t)}function se(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function ae(e){return new this(e).atan()}function le(e){return new this(e).atanh()}function ue(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,s=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?B(this,n,i):new this(0)).s=e.s:!e.d||t.isZero()?(r=B(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,r=this.atan(D(e,t,s,1)),t=B(this,s,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(D(e,t,s,1)):(r=B(this,s,1).times(t.s>0?.25:.75)).s=e.s:r=new this(NaN),r}function ce(e){return new this(e).cbrt()}function pe(e){return R(e=new this(e),e.e+1,2)}function he(e,t,r){return new this(e).clamp(t,r)}function de(e){if(!e||"object"!=typeof e)throw Error(m+"Object expected");var t,r,n,i=!0===e.defaults,s=["precision",1,u,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(r=s[t],i&&(this[r]=d[r]),void 0!==(n=e[r])){if(!(x(n)===n&&n>=s[t+1]&&n<=s[t+2]))throw Error(g+r+": "+n);this[r]=n}if(r="crypto",i&&(this[r]=d[r]),void 0!==(n=e[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(g+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[r]=!0}else this[r]=!1}return this}function fe(e){return new this(e).cos()}function me(e){return new this(e).cosh()}function ge(e,t){return new this(e).div(t)}function ye(e){return new this(e).exp()}function ve(e){return R(e=new this(e),e.e+1,3)}function be(){var e,t,r=new this(0);for(f=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return f=!0,new this(1/0);r=t}return f=!0,r.sqrt()}function xe(e){return e instanceof s||e&&e.toStringTag===b||!1}function we(e){return new this(e).ln()}function _e(e,t){return new this(e).log(t)}function Ee(e){return new this(e).log(2)}function Se(e){return new this(e).log(10)}function Ae(){return G(this,arguments,"lt")}function Ne(){return G(this,arguments,"gt")}function ke(e,t){return new this(e).mod(t)}function Me(e,t){return new this(e).mul(t)}function Ce(e,t){return new this(e).pow(t)}function Te(e){var t,r,n,i,s=0,o=new this(1),a=[];if(void 0===e?e=this.precision:O(e,1,u),n=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));s<n;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(v);for(t=crypto.randomBytes(n*=4);s<n;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(a.push(i%1e7),s+=4);s=n/4}else for(;s<n;)a[s++]=1e7*Math.random()|0;for(e%=7,(n=a[--s])&&e&&(i=w(10,7-e),a[s]=(n/i|0)*i);0===a[s];s--)a.pop();if(s<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=7)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<7&&(r-=7-n)}return o.e=r,o.d=a,o}function Oe(e){return R(e=new this(e),e.e+1,this.rounding)}function Ie(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Pe(e){return new this(e).sin()}function De(e){return new this(e).sinh()}function Re(e){return new this(e).sqrt()}function Le(e,t){return new this(e).sub(t)}function qe(){var e=0,t=arguments,r=new this(t[e]);for(f=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return f=!0,R(r,this.precision,this.rounding)}function $e(e){return new this(e).tan()}function Be(e){return new this(e).tanh()}function ze(e){return R(e=new this(e),e.e+1,1)}s=function e(t){var r,n,i;function s(e){var t,r,n,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,xe(e))return i.s=e.s,void(f?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(n=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10)t++;return void(f?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):Y(i,e.toString())}if("string"!==n)throw Error(g+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===r&&(e=e.slice(1)),i.s=1),A.test(e)?Y(i,e):X(i,e)}if(s.prototype=C,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=de,s.clone=e,s.isDecimal=xe,s.abs=te,s.acos=re,s.acosh=ne,s.add=ie,s.asin=se,s.asinh=oe,s.atan=ae,s.atanh=le,s.atan2=ue,s.cbrt=ce,s.ceil=pe,s.clamp=he,s.cos=fe,s.cosh=me,s.div=ge,s.exp=ye,s.floor=ve,s.hypot=be,s.ln=we,s.log=_e,s.log10=Se,s.log2=Ee,s.max=Ae,s.min=Ne,s.mod=ke,s.mul=Me,s.pow=Ce,s.random=Te,s.round=Oe,s.sign=Ie,s.sin=Pe,s.sinh=De,s.sqrt=Re,s.sub=Le,s.sum=qe,s.tan=$e,s.tanh=Be,s.trunc=ze,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return s.config(t),s}(d),s.prototype.constructor=s,s.default=s.Decimal=s,p=new s(p),h=new s(h),void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},43770:e=>{"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},n={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},i=function(e,r){return t({},e,r)};e.exports=function(e){for(var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.preserveFormatting,a=void 0!==o&&o,l=s.escapeMapFn,u=void 0===l?i:l,c=String(e),p="",h=u(t({},r),a?t({},n):{}),d=Object.keys(h),f=function(){var e=!1;d.forEach((function(t,r){e||c.length>=t.length&&c.slice(0,t.length)===t&&(p+=h[d[r]],c=c.slice(t.length,c.length),e=!0)})),e||(p+=c.slice(0,1),c=c.slice(1,c.length))};c;)f();return p}},93808:function(e,t){var r;!function(n){"use strict";var i={s:1,n:0,d:1};function s(e){function t(){var t=Error.apply(this,arguments);t.name=this.name=e,this.stack=t.stack,this.message=t.message}function r(){}return r.prototype=Error.prototype,t.prototype=new r,t}var o=d.DivisionByZero=s("DivisionByZero"),a=d.InvalidParameter=s("InvalidParameter");function l(e,t){return isNaN(e=parseInt(e,10))&&u(),e*t}function u(){throw new a}function c(e){for(var t={},r=e,n=2,i=4;i<=r;){for(;r%n==0;)r/=n,t[n]=(t[n]||0)+1;i+=1+2*n++}return r!==e?r>1&&(t[r]=(t[r]||0)+1):t[e]=(t[e]||0)+1,t}var p=function(e,t){var r,n=0,s=1,a=1,c=0,p=0,h=0,d=1,f=1,m=0,g=1,y=1,v=1,b=1e7;if(null==e);else if(void 0!==t)a=(n=e)*(s=t);else switch(typeof e){case"object":"d"in e&&"n"in e?(n=e.n,s=e.d,"s"in e&&(n*=e.s)):0 in e?(n=e[0],1 in e&&(s=e[1])):u(),a=n*s;break;case"number":if(e<0&&(a=e,e=-e),e%1==0)n=e;else if(e>0){for(e>=1&&(e/=f=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));g<=b&&v<=b;){if(e===(r=(m+y)/(g+v))){g+v<=b?(n=m+y,s=g+v):v>g?(n=y,s=v):(n=m,s=g);break}e>r?(m+=y,g+=v):(y+=m,v+=g),g>b?(n=y,s=v):(n=m,s=g)}n*=f}else(isNaN(e)||isNaN(t))&&(s=n=NaN);break;case"string":if(null===(g=e.match(/\d+|./g))&&u(),"-"===g[m]?(a=-1,m++):"+"===g[m]&&m++,g.length===m+1?p=l(g[m++],a):"."===g[m+1]||"."===g[m]?("."!==g[m]&&(c=l(g[m++],a)),(++m+1===g.length||"("===g[m+1]&&")"===g[m+3]||"'"===g[m+1]&&"'"===g[m+3])&&(p=l(g[m],a),d=Math.pow(10,g[m].length),m++),("("===g[m]&&")"===g[m+2]||"'"===g[m]&&"'"===g[m+2])&&(h=l(g[m+1],a),f=Math.pow(10,g[m+1].length)-1,m+=3)):"/"===g[m+1]||":"===g[m+1]?(p=l(g[m],a),d=l(g[m+2],1),m+=3):"/"===g[m+3]&&" "===g[m+1]&&(c=l(g[m],a),p=l(g[m+2],a),d=l(g[m+4],1),m+=5),g.length<=m){a=n=h+(s=d*f)*c+f*p;break}default:u()}if(0===s)throw new o;i.s=a<0?-1:1,i.n=Math.abs(n),i.d=Math.abs(s)};function h(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function d(e,t){if(!(this instanceof d))return new d(e,t);p(e,t),e=h(i.d,i.n),this.s=i.s,this.n=i.n/e,this.d=i.d/e}d.prototype={s:1,n:0,d:1,abs:function(){return new d(this.n,this.d)},neg:function(){return new d(-this.s*this.n,this.d)},add:function(e,t){return p(e,t),new d(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(e,t){return p(e,t),new d(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(e,t){return p(e,t),new d(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(e,t){return p(e,t),new d(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return new d(this)},mod:function(e,t){return isNaN(this.n)||isNaN(this.d)?new d(NaN):void 0===e?new d(this.s*this.n%this.d,1):(p(e,t),0===i.n&&0===this.d&&d(0,0),new d(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d))},gcd:function(e,t){return p(e,t),new d(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(e,t){return p(e,t),0===i.n&&0===this.n?new d:new d(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):new d(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return new d(this.s*this.d,this.n)},pow:function(e,t){if(p(e,t),1===i.d)return i.s<0?new d(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):new d(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var r=c(this.n),n=c(this.d),s=1,o=1;for(var a in r)if("1"!==a){if("0"===a){s=0;break}if(r[a]*=i.n,r[a]%i.d!=0)return null;r[a]/=i.d,s*=Math.pow(a,r[a])}for(var a in n)if("1"!==a){if(n[a]*=i.n,n[a]%i.d!=0)return null;n[a]/=i.d,o*=Math.pow(a,n[a])}return i.s<0?new d(o,s):new d(s,o)},equals:function(e,t){return p(e,t),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(e,t){p(e,t);var r=this.s*this.n*i.d-i.s*i.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;var t=this.abs().toContinued();function r(e){return 1===e.length?new d(e[0]):r(e.slice(1)).inverse().add(e[0])}e=e||.001;for(var n=0;n<t.length;n++){var i=r(t.slice(0,n+1));if(i.sub(this.abs()).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return p(e,t),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&(t=Math.floor(n/i))>0&&(r+=t,r+=" ",n%=i),r+=n,r+="/",r+=i),r},toLatex:function(e){var t,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(e&&(t=Math.floor(n/i))>0&&(r+=t,n%=i),r+="\\frac{",r+=n,r+="}{",r+=i,r+="}"),r},toContinued:function(){var e,t=this.n,r=this.d,n=[];if(isNaN(t)||isNaN(r))return n;do{n.push(Math.floor(t/r)),e=t%r,t=r,r=e}while(1!==t);return n},toString:function(e){var t=this.n,r=this.d;if(isNaN(t)||isNaN(r))return"NaN";e=e||15;var n=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var r=10%t,n=1;1!==r;n++)if(r=10*r%t,n>2e3)return 0;return n}(0,r),i=function(e,t,r){for(var n=1,i=function(e,t,r){for(var n=1;t>0;e=e*e%r,t>>=1)1&t&&(n=n*e%r);return n}(10,r,t),s=0;s<300;s++){if(n===i)return s;n=10*n%t,i=10*i%t}return 0}(0,r,n),s=-1===this.s?"-":"";if(s+=t/r|0,t%=r,(t*=10)&&(s+="."),n){for(var o=i;o--;)s+=t/r|0,t%=r,t*=10;s+="(";for(o=n;o--;)s+=t/r|0,t%=r,t*=10;s+=")"}else for(o=e;t&&o--;)s+=t/r|0,t%=r,t*=10;return s}},void 0===(r=function(){return d}.apply(t,[]))||(e.exports=r)}()},19261:(e,t,r)=>{"use strict";var n=r(5240),i=r(98821).hasProp;function s(e,t){e.appendChild(window.document.createTextNode(t))}function o(e,t,r){var o,a=window.document.createElement(e);try{if(t)for(o in t)i(t,o)&&("class"===o?a.className=t.class:"className"===o?a.className=t.className:"style"===o?l(a,t.style):a.setAttribute(o,t[o]))}catch(u){n("plantage dans getElement "+e+" avec les attributs ",t,u)}return r&&s(a,r),a}var a=function(){var e=1e4,t=0,r="sesa"+t;return function(){for(;window.document.getElementById(r)&&t<e;)t++,r="sesa"+t;if(t===e)throw Error("Max de 10000 id générés atteint");return r}}();function l(e,t){try{if(e&&e.style)if("string"==typeof t)(t=t.split(";")).forEach((function(t){if((t=/([\w]+):(.+)/.exec(t))&&3===t.length){var r=t[1];e.style[r]=t[2]}}));else if("object"==typeof t)for(var r in t)i(t,r)&&(e.style[r]=t[r])}catch(s){n.error(s)}}e.exports={addCss:function(e){for(var t=window.document.getElementsByTagName("head")[0],r=t.getElementsByTagName("link"),i=!1,s=0;s<r.length;s++)if(r[s].href===e){i=!0;break}if(i)n(e+" était déjà présent, on ne l'ajoute pas");else{var o=window.document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,t.appendChild(o)}},addJs:function(e,t){var r=window.document.getElementsByTagName("body")[0],n=window.document.createElement("script");n.type="text/javascript",r.appendChild(n),n.addEventListener("load",(function e(){t(),n.removeEventListener("load",e)})),n.src=e},addElement:function(e,t,r,n){var i=o(t,r,n);return e.appendChild(i),i},addElementAfter:function(e,t,r,i){var s=o(t,r,i),a=e.parentNode;return a?a.insertBefore(s,e.nextSibling):n.error(new Error("Navigateur incompatible (pas de parentNode), impossible d'ajouter l'élément")),s},addElementBefore:function(e,t,r,i){var s=o(t,r,i),a=e.parentNode;return a?a.insertBefore(s,e):n.error(new Error("Navigateur incompatible (pas de parentNode), impossible d'insérer l'élément")),s},addElementFirstChild:function(e,t,r,n){var i=o(t,r,n);return e.insertBefore(i,e.firstChild),i},addElementFirstSibling:function(e,t,r,n){var i=o(t,r,n);return e.parentNode.insertBefore(i,e.parentNode.firstChild),i},addText:s,empty:function(e){if(e&&e.firstChild)for(;e.firstChild;)e.removeChild(e.firstChild)},getElement:o,getSize:function(){var e="CSS1Compat"===window.document.compatMode?window.document.documentElement:window.document.body;return{width:Math.floor(Math.min(e.clientWidth,window.innerWidth)),height:Math.floor(Math.min(e.clientHeight,window.innerHeight))}},getNewId:a,setStyles:l}},98821:e=>{"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)});var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function r(e,t){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,t)}function n(e){return"function"==typeof e}function i(e,t){switch(typeof e){case"number":return Math.floor(e)===e;case"string":return Boolean(t&&e&&Math.floor(e)==e);default:return!1}}function s(e){return void 0===e}function o(e,t,r){for(t&&("string"!=typeof t&&(t=String(t)),1!==t.length&&(console.error(new Error("char invalide "+t)),t=void 0)),t||(t="number"==typeof e?"0":" "),"string"!=typeof e&&(e=String(e)),r||(r=2);e.length<r;)e=t+e;return e}e.exports={countSlash:function(e){if("string"!=typeof e)throw new TypeError("countSlash n’accepte qu’une string en paramètre");return e.replace(/[^/]+/g,"").length},escapeForHtml:function(e,r){return r?e.replace(/[&<>"']/g,(function(e){return t[e]})):e.replace(/</g,"&lt;")},formatDate:function(e,t){function r(e,t){return o(e,"0",t)}if(t){if(!(t instanceof Date))throw new TypeError("date is not a Date")}else t=new Date;if("string"!=typeof e)throw new TypeError("format is not a string");return e.replace(/%(.)/g,(function(e,n){switch(n){case"d":return r(t.getDate());case"F":return String(t.getFullYear())+"-"+r(t.getMonth()+1)+"-"+r(t.getDate());case"H":return r(t.getHours());case"m":return r(t.getMonth()+1);case"M":return r(t.getMinutes());case"o":return r(t.getMilliseconds(),3);case"O":return r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds())+"."+r(t.getMilliseconds(),3);case"s":return r(Math.round(t.getTime()/1e3));case"S":return r(t.getSeconds());case"T":return r(t.getHours())+":"+r(t.getMinutes())+":"+r(t.getSeconds());case"y":return String(t.getFullYear()).substr(2);case"Y":return t.getFullYear();case"%":return"%";default:return"%"+n}}))},getToken:function(){return Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)},hasProp:r,isArray:function(e){return Array.isArray(e)},isArrayEmpty:function(e){return Boolean(Array.isArray(e)&&0===e.length)},isArrayNotEmpty:function(e){return Boolean(Array.isArray(e)&&e.length)},isDate:function(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)},isError:function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},isFunction:n,isInArray:function(e,t){if(!Array.isArray(e))throw new Error("isInArray veut un tableau en 1er argument");return-1!==e.indexOf(t)},isInt:i,isIntPos:function(e,t,r){return i(e,r)&&(t?e>0:e>=0)},isObject:function(e){var t=typeof e;return!!e&&("object"===t||"function"===t)},isObjectPlain:function(e){return!!e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)},isRegExp:function(e){return!!e&&"object"==typeof e&&"[object RegExp]"===Object.prototype.toString.call(e)},isString:function(e){return"string"==typeof e},isUndefined:s,isUrlAbsolute:function(e){return"string"==typeof e&&/^https?:\/\/[a-z0-9\-._]+(:[0-9]+)?(\/|$)/.test(e)},pad:o,parse:function(e){var t;if("string"==typeof e)try{t=JSON.parse(e)}catch(r){!s(console)&&console.error&&console.error(r)}return t},splitAndTrim:function(e,t){return"string"==typeof e?(t||(t=/[,;\s]+/),e.split(t).map((function(e){return e.trim()})).filter((function(e){return e}))):[]},stringify:function(e,t){var i;try{i=t?JSON.stringify(e,null,t):JSON.stringify(e)}catch(p){var o,a,l=[];for(o in e)if(r(e,o)&&!s(e[o])&&!n(e[o])){a=e[o],i='"'+o+'":';try{i+=t?JSON.stringify(a,null,t):JSON.stringify(a)}catch(p){i+='"'+p.toString().replace(/\n/g,"\\n")+'"'}l.push(i)}var u=",";if(i="{",t){var c="\n"+" ".repeat(t);u+=c,i+=c}i+=l.join(u),t&&(i+="\n"),i+="}"}return i},toAscii:function(e){if("string"==typeof e){if(/^[\w]*$/.test(e))return e;return[[/[áàâäãå]/g,"a"],[/[ÁÀÂÄÃÅ]/g,"A"],["ç","c"],["Ç","C"],[/[éèêë]/g,"e"],[/[ÉÈÊË]/g,"E"],[/[íìîï]/g,"i"],[/[ÍÌÎÏ]/g,"I"],["ñ","n"],["Ñ","N"],[/[óòôöõ]/g,"o"],[/[ÓÒÔÖÕ]/g,"O"],[/[úùûü]/g,"u"],[/[ÚÙÛÜ]/g,"U"],[/[ýÿ]/g,"y"],[/[ÝŸ]/g,"Y"],["æ","ae"],["Æ","AE"],["œ","oe"],["Œ","OE"]].reduce((function(e,t){return e.replace(t[0],t[1])}),e)}return console.error(new TypeError("not a string"),e),""},toInt:function(e){switch(typeof e){case"number":return Math.round(e);case"string":return""===e?NaN:Math.round(e);default:return NaN}}}},35266:(e,t,r)=>{"use strict";var n=r(98821),i=n.hasProp;e.exports=function e(t,r){if(null===t)return"null";switch(typeof t){case"undefined":return t;case"number":case"boolean":return String(t);case"string":return'"'+t.replace('"','\\"')+'"';case"symbol":return"[Symbol "+t.toString()+"]";default:r||(r=0);var s=" ".repeat(r);r+=2;var o,a=s+"  ",l=[];if(n.isDate(t))return JSON.stringify(t);if(n.isArray(t))return o="[\n",t.forEach((function(n,i){o+=a+e(n,r)+(i===t.length-1?"\n":",\n")})),t.length?o+=s+"]":o+="]",o;if(n.isRegExp(t)||n.isFunction(t))return"function"==typeof t.toSource?t.toSource():t.toString();if(n.isObject(t)){var u=0;for(var c in t)if(i(t,c)){u++;try{JSON.stringify(t[c]),l.push(c+": "+e(t[c],r))}catch(p){l.push(c+': "'+p.toString().replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"')}}return u?"{\n"+a+l.join(",\n"+a)+"\n"+s+"}":n.isObjectPlain(t)?s+"{}":s+t.toString()}return console.error("dump est tombé sur un truc qui ne ressemble à rien de connu",t),n.stringify(t,2)}}},5240:(e,t,r)=>{"use strict";var n=r(35266),i=r(98821),s=i.formatDate,o=i.hasProp,a={debug:0,info:1,notice:1,warn:2,warning:2,error:3,alert:4,critical:4},l=["[debug]","[info]","[warning]","[error]","[CRITICAL]"],u=[console.info||console.log,console.log,console.warn||console.error||console.log,console.error||console.log,console.error||console.log],c=a.info,p="undefined"!=typeof process&&process.env,h=p&&o(process.env,"NODE_APP_INSTANCE"),d=p&&!h,f="[%O]",m=h,g=h&&process.env.NODE_APP_INSTANCE||"N/A";function y(e,t){try{var r=u[t]||console.log,n="";if(d&&(n=s(f)),m&&(n&&(n+=" "),n+="["+g+"]"),n&&(n+=" "),n+=l[t],e.length<1&&(e=[Error("fonction de log appelée sans contenu")]),r(n,e[0]),e.length>1)for(var i=1;i<e.length;i++)r(e[i])}catch(o){}}function v(){c<a.warning&&y(arguments,a.info)}v.debug=function(){c<a.info&&y(arguments,a.debug)},v.info=function(){c<a.warning&&y(arguments,a.info)},v.warn=function(){c<a.error&&y(arguments,a.warning)},v.ifError=function e(){e&&c<a.critical&&y(arguments,a.error)},v.error=function(){c<a.critical&&y(arguments,a.error)},v.critical=function(){y(arguments,a.critical)},v.disable=function(){c=a.error},v.disableDatePrefix=function(){d=!1},v.disableProcessPrefix=function(){m=!1},v.dump=function(e,t,r){"object"!=typeof r&&(r={});var i=r.level||a.debug;"string"==typeof i&&(i=a[i]||a.debug);var s=n(t),o=r.max||1e3;s.length>o&&(s=s.substr(0,o)+"…"),c<=i&&y([e,s],i)},v.enable=function(){c=a.info},v.enableDatePrefix=function(){d=!0},v.enableProcessPrefix=function(){"undefined"==typeof process?console.error("process not available"):m=!0},v.setDatePrefix=function(e){"string"==typeof e?f=e:v.error(new Error("Le préfixe de log doit être une string"))},v.setLogLevel=function(e){switch(e){case 0:case"0":case"debug":c=a.debug;break;case 1:case"1":case"info":case"notice":c=a.notice;break;case 2:case"2":case"warn":case"warning":c=a.warning;break;case 3:case"3":case"err":case"error":c=a.error;break;case 4:case"4":case"alert":case"crit":case"critical":c=a.critical;break;default:v.error("niveau d’erreur "+e)}},v.levels={debug:0,info:1,notice:1,warn:2,warning:2,error:3,alert:4,critical:4},e.exports=v},599:e=>{e.exports=function e(t,r){"use strict";var n,i,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},p=c(t).replace(o,"")||"",h=c(r).replace(o,"")||"",d=p.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=h.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(p.match(l),16)||1!==d.length&&p.match(a)&&Date.parse(p),g=parseInt(h.match(l),16)||m&&h.match(a)&&Date.parse(h)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var y=0,v=Math.max(d.length,f.length);y<v;y++){if(n=!(d[y]||"").match(u)&&parseFloat(d[y])||d[y]||0,i=!(f[y]||"").match(u)&&parseFloat(f[y])||f[y]||0,isNaN(n)!==isNaN(i))return isNaN(n)?1:-1;if(typeof n!=typeof i&&(n+="",i+=""),n<i)return-1;if(n>i)return 1}return 0}},80677:function(e,t){var r;!function(t,r){"use strict";"object"==typeof e.exports?e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,l=s.flat?function(e){return s.flat.call(e)}:function(e){return s.concat.apply([],e)},u=s.push,c=s.indexOf,p={},h=p.toString,d=p.hasOwnProperty,f=d.toString,m=f.call(Object),g={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},v=function(e){return null!=e&&e===e.window},b=n.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,r){var n,i,s=(r=r||b).createElement("script");if(s.text=e,t)for(n in x)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&s.setAttribute(n,i);r.head.appendChild(s).parentNode.removeChild(s)}function _(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[h.call(e)]||"object":typeof e}var E="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function A(e){var t=!!e&&"length"in e&&e.length,r=_(e);return!y(e)&&!v(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:E,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:s.sort,splice:s.splice},S.extend=S.fn.extend=function(){var e,t,r,n,i,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=e[t],"__proto__"!==t&&o!==n&&(u&&n&&(S.isPlainObject(n)||(i=Array.isArray(n)))?(r=o[t],s=i&&!Array.isArray(r)?[]:i||S.isPlainObject(r)?r:{},i=!1,o[t]=S.extend(u,s,n)):void 0!==n&&(o[t]=n));return o},S.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==h.call(e))&&(!(t=o(e))||"function"==typeof(r=d.call(t,"constructor")&&t.constructor)&&f.call(r)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){w(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,n=0;if(A(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var r=t||[];return null!=e&&(A(Object(e))?S.merge(r,"string"==typeof e?[e]:e):u.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:c.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,s=e.length,o=!r;i<s;i++)!t(e[i],i)!==o&&n.push(e[i]);return n},map:function(e,t,r){var n,i,s=0,o=[];if(A(e))for(n=e.length;s<n;s++)null!=(i=t(e[s],s,r))&&o.push(i);else for(s in e)null!=(i=t(e[s],s,r))&&o.push(i);return l(o)},guid:1,support:g}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=s[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){p["[object "+t+"]"]=t.toLowerCase()}));var N=function(e){var t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x="sizzle"+1*new Date,w=e.document,_=0,E=0,S=le(),A=le(),N=le(),k=le(),M=function(e,t){return e===t&&(p=!0),0},C={}.hasOwnProperty,T=[],O=T.pop,I=T.push,P=T.push,D=T.slice,R=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",q="[\\x20\\t\\r\\n\\f]",$="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\[[\\x20\\t\\r\\n\\f]*("+$+")(?:"+q+"*([*^$|!~]?=)"+q+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+q+"*\\]",z=":("+$+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",F=new RegExp(q+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),j=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp(q+"|>"),H=new RegExp(z),W=new RegExp("^"+$+"$"),Y={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Z=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),re=function(e,t){var r="0x"+e.slice(1)-65536;return t||(r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},se=function(){h()},oe=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(T=D.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(Ae){P={apply:T.length?function(e,t){I.apply(e,D.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function ae(e,t,n,i){var s,a,u,c,p,f,y,v=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!i&&(h(t),t=t||d,m)){if(11!==w&&(p=J.exec(e)))if(s=p[1]){if(9===w){if(!(u=t.getElementById(s)))return n;if(u.id===s)return n.push(u),n}else if(v&&(u=v.getElementById(s))&&b(t,u)&&u.id===s)return n.push(u),n}else{if(p[2])return P.apply(n,t.getElementsByTagName(e)),n;if((s=p[3])&&r.getElementsByClassName&&t.getElementsByClassName)return P.apply(n,t.getElementsByClassName(s)),n}if(r.qsa&&!k[e+" "]&&(!g||!g.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(y=e,v=t,1===w&&(V.test(e)||G.test(e))){for((v=ee.test(e)&&ye(t.parentNode)||t)===t&&r.scope||((c=t.getAttribute("id"))?c=c.replace(ne,ie):t.setAttribute("id",c=x)),a=(f=o(e)).length;a--;)f[a]=(c?"#"+c:":scope")+" "+be(f[a]);y=f.join(",")}try{return P.apply(n,v.querySelectorAll(y)),n}catch(_){k(e,!0)}finally{c===x&&t.removeAttribute("id")}}}return l(e.replace(U,"$1"),t,n,i)}function le(){var e=[];return function t(r,i){return e.push(r+" ")>n.cacheLength&&delete t[e.shift()],t[r+" "]=i}}function ue(e){return e[x]=!0,e}function ce(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(Ae){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var r=e.split("|"),i=r.length;i--;)n.attrHandle[r[i]]=t}function he(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}function me(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return ue((function(t){return t=+t,ue((function(r,n){for(var i,s=e([],r.length,t),o=s.length;o--;)r[i=s[o]]&&(r[i]=!(n[i]=r[i]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in r=ae.support={},s=ae.isXML=function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!X.test(t||r&&r.nodeName||"HTML")},h=ae.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:w;return o!=d&&9===o.nodeType&&o.documentElement?(f=(d=o).documentElement,m=!s(d),w!=d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",se,!1):i.attachEvent&&i.attachEvent("onunload",se)),r.scope=ce((function(e){return f.appendChild(e).appendChild(d.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),r.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),r.getElementsByTagName=ce((function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length})),r.getElementsByClassName=K.test(d.getElementsByClassName),r.getById=ce((function(e){return f.appendChild(e).id=x,!d.getElementsByName||!d.getElementsByName(x).length})),r.getById?(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r=t.getElementById(e);return r?[r]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,re);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var r,n,i,s=t.getElementById(e);if(s){if((r=s.getAttributeNode("id"))&&r.value===e)return[s];for(i=t.getElementsByName(e),n=0;s=i[n++];)if((r=s.getAttributeNode("id"))&&r.value===e)return[s]}return[]}}),n.find.TAG=r.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):r.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,s=t.getElementsByTagName(e);if("*"===e){for(;r=s[i++];)1===r.nodeType&&n.push(r);return n}return s},n.find.CLASS=r.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},y=[],g=[],(r.qsa=K.test(d.querySelectorAll))&&(ce((function(e){var t;f.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+L+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),(t=d.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")}))),(r.matchesSelector=K.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ce((function(e){r.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),y.push("!=",z)})),g=g.length&&new RegExp(g.join("|")),y=y.length&&new RegExp(y.join("|")),t=K.test(f.compareDocumentPosition),b=t||K.test(f.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M=t?function(e,t){if(e===t)return p=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!r.sortDetached&&t.compareDocumentPosition(e)===n?e==d||e.ownerDocument==w&&b(w,e)?-1:t==d||t.ownerDocument==w&&b(w,t)?1:c?R(c,e)-R(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return p=!0,0;var r,n=0,i=e.parentNode,s=t.parentNode,o=[e],a=[t];if(!i||!s)return e==d?-1:t==d?1:i?-1:s?1:c?R(c,e)-R(c,t):0;if(i===s)return he(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;o[n]===a[n];)n++;return n?he(o[n],a[n]):o[n]==w?-1:a[n]==w?1:0},d):d},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if(h(e),r.matchesSelector&&m&&!k[t+" "]&&(!y||!y.test(t))&&(!g||!g.test(t)))try{var n=v.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Ae){k(t,!0)}return ae(t,d,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!=d&&h(e),b(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!=d&&h(e);var i=n.attrHandle[t.toLowerCase()],s=i&&C.call(n.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==s?s:r.attributes||!m?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ae.escape=function(e){return(e+"").replace(ne,ie)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],i=0,s=0;if(p=!r.detectDuplicates,c=!r.sortStable&&e.slice(0),e.sort(M),p){for(;t=e[s++];)t===e[s]&&(i=n.push(s));for(;i--;)e.splice(n[i],1)}return c=null,e},i=ae.getText=function(e){var t,r="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=i(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)r+=i(t);return r},n=ae.selectors={cacheLength:50,createPseudo:ue,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,re),e[3]=(e[3]||e[4]||e[5]||"").replace(te,re),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&H.test(r)&&(t=o(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,re).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+q+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(n){var i=ae.attr(n,e);return null==i?"!="===t:!t||(i+="","="===t?i===r:"!="===t?i!==r:"^="===t?r&&0===i.indexOf(r):"*="===t?r&&i.indexOf(r)>-1:"$="===t?r&&i.slice(-r.length)===r:"~="===t?(" "+i.replace(F," ")+" ").indexOf(r)>-1:"|="===t&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,n,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===n&&0===i?function(e){return!!e.parentNode}:function(t,r,l){var u,c,p,h,d,f,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,y=a&&t.nodeName.toLowerCase(),v=!l&&!a,b=!1;if(g){if(s){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&v){for(b=(d=(u=(c=(p=(h=g)[x]||(h[x]={}))[h.uniqueID]||(p[h.uniqueID]={}))[e]||[])[0]===_&&u[1])&&u[2],h=d&&g.childNodes[d];h=++d&&h&&h[m]||(b=d=0)||f.pop();)if(1===h.nodeType&&++b&&h===t){c[e]=[_,d,b];break}}else if(v&&(b=d=(u=(c=(p=(h=t)[x]||(h[x]={}))[h.uniqueID]||(p[h.uniqueID]={}))[e]||[])[0]===_&&u[1]),!1===b)for(;(h=++d&&h&&h[m]||(b=d=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++b||(v&&((c=(p=h[x]||(h[x]={}))[h.uniqueID]||(p[h.uniqueID]={}))[e]=[_,b]),h!==t)););return(b-=i)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var r,i=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(r=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,r){for(var n,s=i(e,t),o=s.length;o--;)e[n=R(e,s[o])]=!(r[n]=s[o])})):function(e){return i(e,0,r)}):i}},pseudos:{not:ue((function(e){var t=[],r=[],n=a(e.replace(U,"$1"));return n[x]?ue((function(e,t,r,i){for(var s,o=n(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))})):function(e,i,s){return t[0]=e,n(t,null,s,r),t[0]=null,!r.pop()}})),has:ue((function(e){return function(t){return ae(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,re),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ue((function(e){return W.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,re).toLowerCase(),function(t){var r;do{if(r=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:me(!1),disabled:me(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge((function(){return[0]})),last:ge((function(e,t){return[t-1]})),eq:ge((function(e,t,r){return[r<0?r+t:r]})),even:ge((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:ge((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:ge((function(e,t,r){for(var n=r<0?r+t:r>t?t:r;--n>=0;)e.push(n);return e})),gt:ge((function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ve(){}function be(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function xe(e,t,r){var n=t.dir,i=t.next,s=i||n,o=r&&"parentNode"===s,a=E++;return t.first?function(t,r,i){for(;t=t[n];)if(1===t.nodeType||o)return e(t,r,i);return!1}:function(t,r,l){var u,c,p,h=[_,a];if(l){for(;t=t[n];)if((1===t.nodeType||o)&&e(t,r,l))return!0}else for(;t=t[n];)if(1===t.nodeType||o)if(c=(p=t[x]||(t[x]={}))[t.uniqueID]||(p[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=c[s])&&u[0]===_&&u[1]===a)return h[2]=u[2];if(c[s]=h,h[2]=e(t,r,l))return!0}return!1}}function we(e){return e.length>1?function(t,r,n){for(var i=e.length;i--;)if(!e[i](t,r,n))return!1;return!0}:e[0]}function _e(e,t,r,n,i){for(var s,o=[],a=0,l=e.length,u=null!=t;a<l;a++)(s=e[a])&&(r&&!r(s,n,i)||(o.push(s),u&&t.push(a)));return o}function Ee(e,t,r,n,i,s){return n&&!n[x]&&(n=Ee(n)),i&&!i[x]&&(i=Ee(i,s)),ue((function(s,o,a,l){var u,c,p,h=[],d=[],f=o.length,m=s||function(e,t,r){for(var n=0,i=t.length;n<i;n++)ae(e,t[n],r);return r}(t||"*",a.nodeType?[a]:a,[]),g=!e||!s&&t?m:_e(m,h,e,a,l),y=r?i||(s?e:f||n)?[]:o:g;if(r&&r(g,y,a,l),n)for(u=_e(y,d),n(u,[],a,l),c=u.length;c--;)(p=u[c])&&(y[d[c]]=!(g[d[c]]=p));if(s){if(i||e){if(i){for(u=[],c=y.length;c--;)(p=y[c])&&u.push(g[c]=p);i(null,y=[],u,l)}for(c=y.length;c--;)(p=y[c])&&(u=i?R(s,p):h[c])>-1&&(s[u]=!(o[u]=p))}}else y=_e(y===o?y.splice(f,y.length):y),i?i(null,o,y,l):P.apply(o,y)}))}function Se(e){for(var t,r,i,s=e.length,o=n.relative[e[0].type],a=o||n.relative[" "],l=o?1:0,c=xe((function(e){return e===t}),a,!0),p=xe((function(e){return R(t,e)>-1}),a,!0),h=[function(e,r,n){var i=!o&&(n||r!==u)||((t=r).nodeType?c(e,r,n):p(e,r,n));return t=null,i}];l<s;l++)if(r=n.relative[e[l].type])h=[xe(we(h),r)];else{if((r=n.filter[e[l].type].apply(null,e[l].matches))[x]){for(i=++l;i<s&&!n.relative[e[i].type];i++);return Ee(l>1&&we(h),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(U,"$1"),r,l<i&&Se(e.slice(l,i)),i<s&&Se(e=e.slice(i)),i<s&&be(e))}h.push(r)}return we(h)}return ve.prototype=n.filters=n.pseudos,n.setFilters=new ve,o=ae.tokenize=function(e,t){var r,i,s,o,a,l,u,c=A[e+" "];if(c)return t?0:c.slice(0);for(a=e,l=[],u=n.preFilter;a;){for(o in r&&!(i=j.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(s=[])),r=!1,(i=G.exec(a))&&(r=i.shift(),s.push({value:r,type:i[0].replace(U," ")}),a=a.slice(r.length)),n.filter)!(i=Y[o].exec(a))||u[o]&&!(i=u[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),a=a.slice(r.length));if(!r)break}return t?a.length:a?ae.error(e):A(e,l).slice(0)},a=ae.compile=function(e,t){var r,i=[],s=[],a=N[e+" "];if(!a){for(t||(t=o(e)),r=t.length;r--;)(a=Se(t[r]))[x]?i.push(a):s.push(a);a=N(e,function(e,t){var r=t.length>0,i=e.length>0,s=function(s,o,a,l,c){var p,f,g,y=0,v="0",b=s&&[],x=[],w=u,E=s||i&&n.find.TAG("*",c),S=_+=null==w?1:Math.random()||.1,A=E.length;for(c&&(u=o==d||o||c);v!==A&&null!=(p=E[v]);v++){if(i&&p){for(f=0,o||p.ownerDocument==d||(h(p),a=!m);g=e[f++];)if(g(p,o||d,a)){l.push(p);break}c&&(_=S)}r&&((p=!g&&p)&&y--,s&&b.push(p))}if(y+=v,r&&v!==y){for(f=0;g=t[f++];)g(b,x,o,a);if(s){if(y>0)for(;v--;)b[v]||x[v]||(x[v]=O.call(l));x=_e(x)}P.apply(l,x),c&&!s&&x.length>0&&y+t.length>1&&ae.uniqueSort(l)}return c&&(_=S,u=w),b};return r?ue(s):s}(s,i)),a.selector=e}return a},l=ae.select=function(e,t,r,i){var s,l,u,c,p,h="function"==typeof e&&e,d=!i&&o(e=h.selector||e);if(r=r||[],1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&m&&n.relative[l[1].type]){if(!(t=(n.find.ID(u.matches[0].replace(te,re),t)||[])[0]))return r;h&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(s=Y.needsContext.test(e)?0:l.length;s--&&(u=l[s],!n.relative[c=u.type]);)if((p=n.find[c])&&(i=p(u.matches[0].replace(te,re),ee.test(l[0].type)&&ye(t.parentNode)||t))){if(l.splice(s,1),!(e=i.length&&be(l)))return P.apply(r,i),r;break}}return(h||a(e,d))(i,t,!m,r,!t||ee.test(e)&&ye(t.parentNode)||t),r},r.sortStable=x.split("").sort(M).join("")===x,r.detectDuplicates=!!p,h(),r.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||pe("type|href|height|width",(function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),r.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||pe("value",(function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||pe(L,(function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ae}(n);S.find=N,S.expr=N.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=N.uniqueSort,S.text=N.getText,S.isXMLDoc=N.isXML,S.contains=N.contains,S.escapeSelector=N.escape;var k=function(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&S(e).is(r))break;n.push(e)}return n},M=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},C=S.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(e,t,r){return y(t)?S.grep(e,(function(e,n){return!!t.call(e,n,e)!==r})):t.nodeType?S.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?S.grep(e,(function(e){return c.call(t,e)>-1!==r})):S.filter(t,e,r)}S.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?S.find.matchesSelector(n,e)?[n]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<n;t++)if(S.contains(i[t],this))return!0})));for(r=this.pushStack([]),t=0;t<n;t++)S.find(e,i[t],r);return n>1?S.uniqueSort(r):r},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,"string"==typeof e&&C.test(e)?S(e):e||[],!1).length}});var P,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,r){var n,i;if(!e)return this;if(r=r||P,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:D.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),O.test(n[1])&&S.isPlainObject(t))for(n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=b.getElementById(n[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==r.ready?r.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,P=S(b);var R=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function q(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var r,n=0,i=this.length,s=[],o="string"!=typeof e&&S(e);if(!C.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&S.find.matchesSelector(r,e))){s.push(r);break}return this.pushStack(s.length>1?S.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?c.call(S(e),this[0]):c.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,r){return k(e,"parentNode",r)},next:function(e){return q(e,"nextSibling")},prev:function(e){return q(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,r){return k(e,"nextSibling",r)},prevUntil:function(e,t,r){return k(e,"previousSibling",r)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(T(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(r,n){var i=S.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(i=S.filter(n,i)),this.length>1&&(L[e]||S.uniqueSort(i),R.test(e)&&i.reverse()),this.pushStack(i)}}));var $=/[^\x20\t\r\n\f]+/g;function B(e){return e}function z(e){throw e}function F(e,t,r,n){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(r):e&&y(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}S.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return S.each(e.match($)||[],(function(e,r){t[r]=!0})),t}(e):S.extend({},e);var t,r,n,i,s=[],o=[],a=-1,l=function(){for(i=i||e.once,n=t=!0;o.length;a=-1)for(r=o.shift();++a<s.length;)!1===s[a].apply(r[0],r[1])&&e.stopOnFalse&&(a=s.length,r=!1);e.memory||(r=!1),t=!1,i&&(s=r?[]:"")},u={add:function(){return s&&(r&&!t&&(a=s.length-1,o.push(r)),function t(r){S.each(r,(function(r,n){y(n)?e.unique&&u.has(n)||s.push(n):n&&n.length&&"string"!==_(n)&&t(n)}))}(arguments),r&&!t&&l()),this},remove:function(){return S.each(arguments,(function(e,t){for(var r;(r=S.inArray(t,s,r))>-1;)s.splice(r,1),r<=a&&a--})),this},has:function(e){return e?S.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=r="",this},disabled:function(){return!s},lock:function(){return i=o=[],r||t||(s=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=[e,(r=r||[]).slice?r.slice():r],o.push(r),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(r){S.each(t,(function(t,n){var i=y(e[n[4]])&&e[n[4]];s[n[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[n[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var s=0;function o(e,t,r,i){return function(){var a=this,l=arguments,u=function(){var n,u;if(!(e<s)){if((n=r.apply(a,l))===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(u)?i?u.call(n,o(s,t,B,i),o(s,t,z,i)):(s++,u.call(n,o(s,t,B,i),o(s,t,z,i),o(s,t,B,t.notifyWith))):(r!==B&&(a=void 0,l=[n]),(i||t.resolveWith)(a,l))}},c=i?u:function(){try{u()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,c.stackTrace),e+1>=s&&(r!==z&&(a=void 0,l=[n]),t.rejectWith(a,l))}};e?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),n.setTimeout(c))}}return S.Deferred((function(n){t[0][3].add(o(0,n,y(i)?i:B,n.notifyWith)),t[1][3].add(o(0,n,y(e)?e:B)),t[2][3].add(o(0,n,y(r)?r:z))})).promise()},promise:function(e){return null!=e?S.extend(e,i):i}},s={};return S.each(t,(function(e,n){var o=n[2],a=n[5];i[n[1]]=o.add,a&&o.add((function(){r=a}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(n[3].fire),s[n[0]]=function(){return s[n[0]+"With"](this===s?void 0:this,arguments),this},s[n[0]+"With"]=o.fireWith})),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,r=t,n=Array(r),i=a.call(arguments),s=S.Deferred(),o=function(e){return function(r){n[e]=this,i[e]=arguments.length>1?a.call(arguments):r,--t||s.resolveWith(n,i)}};if(t<=1&&(F(e,s.done(o(r)).resolve,s.reject,!t),"pending"===s.state()||y(i[r]&&i[r].then)))return s.then();for(;r--;)F(i[r],o(r),s.reject);return s.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&U.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){n.setTimeout((function(){throw e}))};var j=S.Deferred();function G(){b.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),S.ready()}S.fn.ready=function(e){return j.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||j.resolveWith(b,[S]))}}),S.ready.then=j.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?n.setTimeout(S.ready):(b.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var V=function(e,t,r,n,i,s,o){var a=0,l=e.length,u=null==r;if("object"===_(r))for(a in i=!0,r)V(e,t,a,r[a],!0,s,o);else if(void 0!==n&&(i=!0,y(n)||(o=!0),u&&(o?(t.call(e,n),t=null):(u=t,t=function(e,t,r){return u.call(S(e),r)})),t))for(;a<l;a++)t(e[a],r,o?n:n.call(e[a],a,t(e[a],r)));return i?e:u?t.call(e):l?t(e[0],r):s},H=/^-ms-/,W=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function X(e){return e.replace(H,"ms-").replace(W,Y)}var Z=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Q(){this.expando=S.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Z(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[X(t)]=r;else for(n in t)i[X(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(X):(t=X(t))in n?[t]:t.match($)||[]).length;for(;r--;)delete n[t[r]]}(void 0===t||S.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var K=new Q,J=new Q,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function re(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(r)}catch(i){}J.set(e,t,r)}else r=void 0;return r}S.extend({hasData:function(e){return J.hasData(e)||K.hasData(e)},data:function(e,t,r){return J.access(e,t,r)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,r){return K.access(e,t,r)},_removeData:function(e,t){K.remove(e,t)}}),S.fn.extend({data:function(e,t){var r,n,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=J.get(s),1===s.nodeType&&!K.get(s,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&0===(n=o[r].name).indexOf("data-")&&(n=X(n.slice(5)),re(s,n,i[n]));K.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){J.set(this,e)})):V(this,(function(t){var r;if(s&&void 0===t)return void 0!==(r=J.get(s,e))||void 0!==(r=re(s,e))?r:void 0;this.each((function(){J.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){J.remove(this,e)}))}}),S.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=K.get(e,t),r&&(!n||Array.isArray(r)?n=K.access(e,t,S.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=S.queue(e,t),n=r.length,i=r.shift(),s=S._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete s.stop,i.call(e,(function(){S.dequeue(e,t)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return K.get(e,r)||K.access(e,r,{empty:S.Callbacks("once memory").add((function(){K.remove(e,[t+"queue",r])}))})}}),S.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?S.queue(this[0],e):void 0===t?this:this.each((function(){var r=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,i=S.Deferred(),s=this,o=this.length,a=function(){--n||i.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=K.get(s[o],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(a));return a(),i.promise(t)}});var ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+ne+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],oe=b.documentElement,ae=function(e){return S.contains(e.ownerDocument,e)},le={composed:!0};oe.getRootNode&&(ae=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(le)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ae(e)&&"none"===S.css(e,"display")};function ce(e,t,r,n){var i,s,o=20,a=n?function(){return n.cur()}:function(){return S.css(e,t,"")},l=a(),u=r&&r[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==u&&+l)&&ie.exec(S.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;o--;)S.style(e,t,c+u),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),c/=s;c*=2,S.style(e,t,c+u),r=r||[]}return r&&(c=+c||+l||0,i=r[1]?c+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=c,n.end=i)),i}var pe={};function he(e){var t,r=e.ownerDocument,n=e.nodeName,i=pe[n];return i||(t=r.body.appendChild(r.createElement(n)),i=S.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),pe[n]=i,i)}function de(e,t){for(var r,n,i=[],s=0,o=e.length;s<o;s++)(n=e[s]).style&&(r=n.style.display,t?("none"===r&&(i[s]=K.get(n,"display")||null,i[s]||(n.style.display="")),""===n.style.display&&ue(n)&&(i[s]=he(n))):"none"!==r&&(i[s]="none",K.set(n,"display",r)));for(s=0;s<o;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}S.fn.extend({show:function(){return de(this,!0)},hide:function(){return de(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ue(this)?S(this).show():S(this).hide()}))}});var fe,me,ge=/^(?:checkbox|radio)$/i,ye=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i;fe=b.createDocumentFragment().appendChild(b.createElement("div")),(me=b.createElement("input")).setAttribute("type","radio"),me.setAttribute("checked","checked"),me.setAttribute("name","t"),fe.appendChild(me),g.checkClone=fe.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!fe.cloneNode(!0).lastChild.defaultValue,fe.innerHTML="<option></option>",g.option=!!fe.lastChild;var be={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?S.merge([e],r):r}function we(e,t){for(var r=0,n=e.length;r<n;r++)K.set(e[r],"globalEval",!t||K.get(t[r],"globalEval"))}be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,g.option||(be.optgroup=be.option=[1,"<select multiple='multiple'>","</select>"]);var _e=/<|&#?\w+;/;function Ee(e,t,r,n,i){for(var s,o,a,l,u,c,p=t.createDocumentFragment(),h=[],d=0,f=e.length;d<f;d++)if((s=e[d])||0===s)if("object"===_(s))S.merge(h,s.nodeType?[s]:s);else if(_e.test(s)){for(o=o||p.appendChild(t.createElement("div")),a=(ye.exec(s)||["",""])[1].toLowerCase(),l=be[a]||be._default,o.innerHTML=l[1]+S.htmlPrefilter(s)+l[2],c=l[0];c--;)o=o.lastChild;S.merge(h,o.childNodes),(o=p.firstChild).textContent=""}else h.push(t.createTextNode(s));for(p.textContent="",d=0;s=h[d++];)if(n&&S.inArray(s,n)>-1)i&&i.push(s);else if(u=ae(s),o=xe(p.appendChild(s),"script"),u&&we(o),r)for(c=0;s=o[c++];)ve.test(s.type||"")&&r.push(s);return p}var Se=/^([^.]*)(?:\.(.+)|)/;function Ae(){return!0}function Ne(){return!1}function ke(e,t){return e===function(){try{return b.activeElement}catch(e){}}()==("focus"===t)}function Me(e,t,r,n,i,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)Me(e,a,r,n,t[a],s);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=Ne;else if(!i)return e;return 1===s&&(o=i,i=function(e){return S().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=S.guid++)),e.each((function(){S.event.add(this,t,i,n,r)}))}function Ce(e,t,r){r?(K.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,i,s=K.get(this,t);if(1&e.isTrigger&&this[t]){if(s.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(s=a.call(arguments),K.set(this,t,s),n=r(this,t),this[t](),s!==(i=K.get(this,t))||n?K.set(this,t,!1):i={},s!==i)return e.stopImmediatePropagation(),e.preventDefault(),i&&i.value}else s.length&&(K.set(this,t,{value:S.event.trigger(S.extend(s[0],S.Event.prototype),s.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===K.get(e,t)&&S.event.add(e,t,Ae)}S.event={global:{},add:function(e,t,r,n,i){var s,o,a,l,u,c,p,h,d,f,m,g=K.get(e);if(Z(e))for(r.handler&&(r=(s=r).handler,i=s.selector),i&&S.find.matchesSelector(oe,i),r.guid||(r.guid=S.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match($)||[""]).length;u--;)d=m=(a=Se.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),d&&(p=S.event.special[d]||{},d=(i?p.delegateType:p.bindType)||d,p=S.event.special[d]||{},c=S.extend({type:d,origType:m,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:f.join(".")},s),(h=l[d])||((h=l[d]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,n,f,o)||e.addEventListener&&e.addEventListener(d,o)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),S.event.global[d]=!0)},remove:function(e,t,r,n,i){var s,o,a,l,u,c,p,h,d,f,m,g=K.hasData(e)&&K.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match($)||[""]).length;u--;)if(d=m=(a=Se.exec(t[u])||[])[1],f=(a[2]||"").split(".").sort(),d){for(p=S.event.special[d]||{},h=l[d=(n?p.delegateType:p.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)c=h[s],!i&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(s,1),c.selector&&h.delegateCount--,p.remove&&p.remove.call(e,c));o&&!h.length&&(p.teardown&&!1!==p.teardown.call(e,f,g.handle)||S.removeEvent(e,d,g.handle),delete l[d])}else for(d in l)S.event.remove(e,d+t[u],r,n,!0);S.isEmptyObject(l)&&K.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,s,o,a=new Array(arguments.length),l=S.event.fix(e),u=(K.get(this,"events")||Object.create(null))[l.type]||[],c=S.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(o=S.event.handlers.call(this,l,u),t=0;(i=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,r=0;(s=i.handlers[r++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(n=((S.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,a))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var r,n,i,s,o,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(s=[],o={},r=0;r<l;r++)void 0===o[i=(n=t[r]).selector+" "]&&(o[i]=n.needsContext?S(i,this).index(u)>-1:S.find(i,this,null,[u]).length),o[i]&&s.push(n);s.length&&a.push({elem:u,handlers:s})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&T(t,"input")&&Ce(t,"click",Ae),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&T(t,"input")&&Ce(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&T(t,"input")&&K.get(t,"click")||T(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ae:Ne,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ne,isPropagationStopped:Ne,isImmediatePropagationStopped:Ne,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ae,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ae,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ae,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Ce(this,e,ke),!1},trigger:function(){return Ce(this,e),!0},_default:function(){return!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,i=e.relatedTarget,s=e.handleObj;return i&&(i===n||S.contains(n,i))||(e.type=s.origType,r=s.handler.apply(this,arguments),e.type=t),r}}})),S.fn.extend({on:function(e,t,r,n){return Me(this,e,t,r,n)},one:function(e,t,r,n){return Me(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,S(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Ne),this.each((function(){S.event.remove(this,e,r,t)}))}});var Te=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var r,n,i,s,o,a;if(1===t.nodeType){if(K.hasData(e)&&(a=K.get(e).events))for(i in K.remove(t,"handle events"),a)for(r=0,n=a[i].length;r<n;r++)S.event.add(t,i,a[i][r]);J.hasData(e)&&(s=J.access(e),o=S.extend({},s),J.set(t,o))}}function qe(e,t){var r=t.nodeName.toLowerCase();"input"===r&&ge.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function $e(e,t,r,n){t=l(t);var i,s,o,a,u,c,p=0,h=e.length,d=h-1,f=t[0],m=y(f);if(m||h>1&&"string"==typeof f&&!g.checkClone&&Oe.test(f))return e.each((function(i){var s=e.eq(i);m&&(t[0]=f.call(this,i,s.html())),$e(s,t,r,n)}));if(h&&(s=(i=Ee(t,e[0].ownerDocument,!1,e,n)).firstChild,1===i.childNodes.length&&(i=s),s||n)){for(a=(o=S.map(xe(i,"script"),De)).length;p<h;p++)u=i,p!==d&&(u=S.clone(u,!0,!0),a&&S.merge(o,xe(u,"script"))),r.call(e[p],u,p);if(a)for(c=o[o.length-1].ownerDocument,S.map(o,Re),p=0;p<a;p++)u=o[p],ve.test(u.type||"")&&!K.access(u,"globalEval")&&S.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):w(u.textContent.replace(Ie,""),u,c))}return e}function Be(e,t,r){for(var n,i=t?S.filter(t,e):e,s=0;null!=(n=i[s]);s++)r||1!==n.nodeType||S.cleanData(xe(n)),n.parentNode&&(r&&ae(n)&&we(xe(n,"script")),n.parentNode.removeChild(n));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var n,i,s,o,a=e.cloneNode(!0),l=ae(e);if(!(g.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(o=xe(a),n=0,i=(s=xe(e)).length;n<i;n++)qe(s[n],o[n]);if(t)if(r)for(s=s||xe(e),o=o||xe(a),n=0,i=s.length;n<i;n++)Le(s[n],o[n]);else Le(e,a);return(o=xe(a,"script")).length>0&&we(o,!l&&xe(e,"script")),a},cleanData:function(e){for(var t,r,n,i=S.event.special,s=0;void 0!==(r=e[s]);s++)if(Z(r)){if(t=r[K.expando]){if(t.events)for(n in t.events)i[n]?S.event.remove(r,n):S.removeEvent(r,n,t.handle);r[K.expando]=void 0}r[J.expando]&&(r[J.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Be(this,e,!0)},remove:function(e){return Be(this,e)},text:function(e){return V(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return $e(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)}))},prepend:function(){return $e(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return $e(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Te.test(e)&&!be[(ye.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(S.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return $e(this,arguments,(function(t){var r=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(xe(this)),r&&r.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var r,n=[],i=S(e),s=i.length-1,o=0;o<=s;o++)r=o===s?this:this.clone(!0),S(i[o])[t](r),u.apply(n,r.get());return this.pushStack(n)}}));var ze=new RegExp("^("+ne+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Ue=function(e,t,r){var n,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in n=r.call(e),t)e.style[i]=s[i];return n},je=new RegExp(se.join("|"),"i");function Ge(e,t,r){var n,i,s,o,a=e.style;return(r=r||Fe(e))&&(""!==(o=r.getPropertyValue(t)||r[t])||ae(e)||(o=S.style(e,t)),!g.pixelBoxStyles()&&ze.test(o)&&je.test(t)&&(n=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=r.width,a.width=n,a.minWidth=i,a.maxWidth=s)),void 0!==o?o+"":o}function Ve(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(u).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",o=36===t(e.right),i=36===t(e.width),c.style.position="absolute",s=12===t(c.offsetWidth/3),oe.removeChild(u),c=null}}function t(e){return Math.round(parseFloat(e))}var r,i,s,o,a,l,u=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),s},reliableTrDimensions:function(){var e,t,r,i;return null==a&&(e=b.createElement("table"),t=b.createElement("tr"),r=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",oe.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,oe.removeChild(e)),a}}))}();var He=["Webkit","Moz","ms"],We=b.createElement("div").style,Ye={};function Xe(e){var t=S.cssProps[e]||Ye[e];return t||(e in We?e:Ye[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=He.length;r--;)if((e=He[r]+t)in We)return e}(e)||e)}var Ze=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Ke={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"};function et(e,t,r){var n=ie.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function tt(e,t,r,n,i,s){var o="width"===t?1:0,a=0,l=0;if(r===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===r&&(l+=S.css(e,r+se[o],!0,i)),n?("content"===r&&(l-=S.css(e,"padding"+se[o],!0,i)),"margin"!==r&&(l-=S.css(e,"border"+se[o]+"Width",!0,i))):(l+=S.css(e,"padding"+se[o],!0,i),"padding"!==r?l+=S.css(e,"border"+se[o]+"Width",!0,i):a+=S.css(e,"border"+se[o]+"Width",!0,i));return!n&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-a-.5))||0),l}function rt(e,t,r){var n=Fe(e),i=(!g.boxSizingReliable()||r)&&"border-box"===S.css(e,"boxSizing",!1,n),s=i,o=Ge(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(ze.test(o)){if(!r)return o;o="auto"}return(!g.boxSizingReliable()&&i||!g.reliableTrDimensions()&&T(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===S.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,n),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+tt(e,t,r||(i?"border":"content"),s,n,o)+"px"}function nt(e,t,r,n,i){return new nt.prototype.init(e,t,r,n,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ge(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=X(t),l=Qe.test(t),u=e.style;if(l||(t=Xe(a)),o=S.cssHooks[t]||S.cssHooks[a],void 0===r)return o&&"get"in o&&void 0!==(i=o.get(e,!1,n))?i:u[t];"string"===(s=typeof r)&&(i=ie.exec(r))&&i[1]&&(r=ce(e,t,i),s="number"),null!=r&&r==r&&("number"!==s||l||(r+=i&&i[3]||(S.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,n))||(l?u.setProperty(t,r):u[t]=r))}},css:function(e,t,r,n){var i,s,o,a=X(t);return Qe.test(t)||(t=Xe(a)),(o=S.cssHooks[t]||S.cssHooks[a])&&"get"in o&&(i=o.get(e,!0,r)),void 0===i&&(i=Ge(e,t,n)),"normal"===i&&t in Je&&(i=Je[t]),""===r||r?(s=parseFloat(i),!0===r||isFinite(s)?s||0:i):i}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,r,n){if(r)return!Ze.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?rt(e,t,n):Ue(e,Ke,(function(){return rt(e,t,n)}))},set:function(e,r,n){var i,s=Fe(e),o=!g.scrollboxSize()&&"absolute"===s.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,s),l=n?tt(e,t,n,a,s):0;return a&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-tt(e,t,"border",!1,s)-.5)),l&&(i=ie.exec(r))&&"px"!==(i[3]||"px")&&(e.style[t]=r,r=S.css(e,t)),et(0,r,l)}}})),S.cssHooks.marginLeft=Ve(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(r){for(var n=0,i={},s="string"==typeof r?r.split(" "):[r];n<4;n++)i[e+se[n]+t]=s[n]||s[n-2]||s[0];return i}},"margin"!==e&&(S.cssHooks[e+t].set=et)})),S.fn.extend({css:function(e,t){return V(this,(function(e,t,r){var n,i,s={},o=0;if(Array.isArray(t)){for(n=Fe(e),i=t.length;o<i;o++)s[t[o]]=S.css(e,t[o],!1,n);return s}return void 0!==r?S.style(e,t,r):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,r,n,i,s){this.elem=e,this.prop=r,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(S.cssNumber[r]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,r=nt.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=nt.prototype.init,S.fx.step={};var it,st,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function lt(){st&&(!1===b.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(lt):n.setTimeout(lt,S.fx.interval),S.fx.tick())}function ut(){return n.setTimeout((function(){it=void 0})),it=Date.now()}function ct(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=se[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,r){for(var n,i=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),s=0,o=i.length;s<o;s++)if(n=i[s].call(r,t,e))return n}function ht(e,t,r){var n,i,s=0,o=ht.prefilters.length,a=S.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=it||ut(),r=Math.max(0,u.startTime+u.duration-t),n=1-(r/u.duration||0),s=0,o=u.tweens.length;s<o;s++)u.tweens[s].run(n);return a.notifyWith(e,[u,n,r]),n<1&&o?r:(o||a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},r),originalProperties:t,originalOptions:r,startTime:it||ut(),duration:r.duration,tweens:[],createTween:function(t,r){var n=S.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(i)return this;for(i=!0;r<n;r++)u.tweens[r].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),c=u.props;for(!function(e,t){var r,n,i,s,o;for(r in e)if(i=t[n=X(r)],s=e[r],Array.isArray(s)&&(i=s[1],s=e[r]=s[0]),r!==n&&(e[n]=s,delete e[r]),(o=S.cssHooks[n])&&"expand"in o)for(r in s=o.expand(s),delete e[n],s)r in e||(e[r]=s[r],t[r]=i);else t[n]=i}(c,u.opts.specialEasing);s<o;s++)if(n=ht.prefilters[s].call(u,e,c,u.opts))return y(n.stop)&&(S._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,pt,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),S.fx.timer(S.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}S.Animation=S.extend(ht,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return ce(r.elem,e,ie.exec(t),r),r}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match($);for(var r,n=0,i=e.length;n<i;n++)r=e[n],ht.tweeners[r]=ht.tweeners[r]||[],ht.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,s,o,a,l,u,c,p="width"in t||"height"in t,h=this,d={},f=e.style,m=e.nodeType&&ue(e),g=K.get(e,"fxshow");for(n in r.queue||(null==(o=S._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,S.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[n],ot.test(i)){if(delete t[n],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;m=!0}d[n]=g&&g[n]||S.style(e,n)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(n in p&&1===e.nodeType&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=g&&g.display)&&(u=K.get(e,"display")),"none"===(c=S.css(e,"display"))&&(u?c=u:(de([e],!0),u=e.style.display||u,c=S.css(e,"display"),de([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===S.css(e,"float")&&(l||(h.done((function(){f.display=u})),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),r.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]}))),l=!1,d)l||(g?"hidden"in g&&(m=g.hidden):g=K.access(e,"fxshow",{display:u}),s&&(g.hidden=!m),m&&de([e],!0),h.done((function(){for(n in m||de([e]),K.remove(e,"fxshow"),d)S.style(e,n,d[n])}))),l=pt(m?g[n]:0,n,h),n in g||(g[n]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ht.prefilters.unshift(e):ht.prefilters.push(e)}}),S.speed=function(e,t,r){var n=e&&"object"==typeof e?S.extend({},e):{complete:r||!r&&t||y(e)&&e,duration:e,easing:r&&t||t&&!y(t)&&t};return S.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in S.fx.speeds?n.duration=S.fx.speeds[n.duration]:n.duration=S.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&S.dequeue(this,n.queue)},n},S.fn.extend({fadeTo:function(e,t,r,n){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var i=S.isEmptyObject(e),s=S.speed(t,r,n),o=function(){var t=ht(this,S.extend({},e),s);(i||K.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",s=S.timers,o=K.get(this);if(i)o[i]&&o[i].stop&&n(o[i]);else for(i in o)o[i]&&o[i].stop&&at.test(i)&&n(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(r),t=!1,s.splice(i,1));!t&&r||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=K.get(this),n=r[e+"queue"],i=r[e+"queueHooks"],s=S.timers,o=n?n.length:0;for(r.finish=!0,S.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var r=S.fn[t];S.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(ct(t,!0),e,n,i)}})),S.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}})),S.timers=[],S.fx.tick=function(){var e,t=0,r=S.timers;for(it=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||S.fx.stop(),it=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){st||(st=!0,lt())},S.fx.stop=function(){st=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",g.radioValue="t"===e.value}();var dt,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return V(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,r){var n,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?S.prop(e,t,r):(1===s&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?dt:void 0)),void 0!==r?null===r?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):i&&"get"in i&&null!==(n=i.get(e,t))?n:null==(n=S.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&T(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match($);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),dt={set:function(e,t,r){return!1===t?S.removeAttr(e,r):e.setAttribute(r,r),r}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=ft[t]||S.find.attr;ft[t]=function(e,t,n){var i,s,o=t.toLowerCase();return n||(s=ft[o],ft[o]=i,i=null!=r(e,t,n)?o:null,ft[o]=s),i}}));var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function yt(e){return(e.match($)||[]).join(" ")}function vt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}S.fn.extend({prop:function(e,t){return V(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,r){var n,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,r,n,i,s,o,a,l=0;if(y(e))return this.each((function(t){S(this).addClass(e.call(this,t,vt(this)))}));if((t=bt(e)).length)for(;r=this[l++];)if(i=vt(r),n=1===r.nodeType&&" "+yt(i)+" "){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");i!==(a=yt(n))&&r.setAttribute("class",a)}return this},removeClass:function(e){var t,r,n,i,s,o,a,l=0;if(y(e))return this.each((function(t){S(this).removeClass(e.call(this,t,vt(this)))}));if(!arguments.length)return this.attr("class","");if((t=bt(e)).length)for(;r=this[l++];)if(i=vt(r),n=1===r.nodeType&&" "+yt(i)+" "){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");i!==(a=yt(n))&&r.setAttribute("class",a)}return this},toggleClass:function(e,t){var r=typeof e,n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(r){S(this).toggleClass(e.call(this,r,vt(this),t),t)})):this.each((function(){var t,i,s,o;if(n)for(i=0,s=S(this),o=bt(e);t=o[i++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else void 0!==e&&"boolean"!==r||((t=vt(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":K.get(this,"__className__")||""))}))},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+yt(vt(r))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(e){var t,r,n,i=this[0];return arguments.length?(n=y(e),this.each((function(r){var i;1===this.nodeType&&(null==(i=n?e.call(this,r,S(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(e){return null==e?"":e+""}))),(t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(i,"value"))?r:"string"==typeof(r=i.value)?r.replace(xt,""):null==r?"":r:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:yt(S.text(e))}},select:{get:function(e){var t,r,n,i=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?s+1:i.length;for(n=s<0?l:o?s:0;n<l;n++)if(((r=i[n]).selected||n===s)&&!r.disabled&&(!r.parentNode.disabled||!T(r.parentNode,"optgroup"))){if(t=S(r).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var r,n,i=e.options,s=S.makeArray(t),o=i.length;o--;)((n=i[o]).selected=S.inArray(S.valHooks.option.get(n),s)>-1)&&(r=!0);return r||(e.selectedIndex=-1),s}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in n;var wt=/^(?:focusinfocus|focusoutblur)$/,_t=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,r,i){var s,o,a,l,u,c,p,h,f=[r||b],m=d.call(e,"type")?e.type:e,g=d.call(e,"namespace")?e.namespace.split("."):[];if(o=h=a=r=r||b,3!==r.nodeType&&8!==r.nodeType&&!wt.test(m+S.event.triggered)&&(m.indexOf(".")>-1&&(g=m.split("."),m=g.shift(),g.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[S.expando]?e:new S.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:S.makeArray(t,[e]),p=S.event.special[m]||{},i||!p.trigger||!1!==p.trigger.apply(r,t))){if(!i&&!p.noBubble&&!v(r)){for(l=p.delegateType||m,wt.test(l+m)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(r.ownerDocument||b)&&f.push(a.defaultView||a.parentWindow||n)}for(s=0;(o=f[s++])&&!e.isPropagationStopped();)h=o,e.type=s>1?l:p.bindType||m,(c=(K.get(o,"events")||Object.create(null))[e.type]&&K.get(o,"handle"))&&c.apply(o,t),(c=u&&o[u])&&c.apply&&Z(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(f.pop(),t)||!Z(r)||u&&y(r[m])&&!v(r)&&((a=r[u])&&(r[u]=null),S.event.triggered=m,e.isPropagationStopped()&&h.addEventListener(m,_t),r[m](),e.isPropagationStopped()&&h.removeEventListener(m,_t),S.event.triggered=void 0,a&&(r[u]=a)),e.result}},simulate:function(e,t,r){var n=S.extend(new S.Event,r,{type:e,isSimulated:!0});S.event.trigger(n,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return S.event.trigger(e,t,r,!0)}}),g.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var r=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,i=K.access(n,t);i||n.addEventListener(e,r,!0),K.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,i=K.access(n,t)-1;i?K.access(n,t,i):(n.removeEventListener(e,r,!0),K.remove(n,t))}}}));var Et=n.location,St={guid:Date.now()},At=/\?/;S.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(i){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||S.error("Invalid XML: "+(r?S.map(r.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Nt=/\[\]$/,kt=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,r,n){var i;if(Array.isArray(t))S.each(t,(function(t,i){r||Nt.test(e)?n(e,i):Tt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,n)}));else if(r||"object"!==_(t))n(e,t);else for(i in t)Tt(e+"["+i+"]",t[i],r,n)}S.param=function(e,t){var r,n=[],i=function(e,t){var r=y(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){i(this.name,this.value)}));else for(r in e)Tt(r,e[r],t,i);return n.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Ct.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var r=S(this).val();return null==r?null:Array.isArray(r)?S.map(r,(function(e){return{name:t.name,value:e.replace(kt,"\r\n")}})):{name:t.name,value:r.replace(kt,"\r\n")}})).get()}});var Ot=/%20/g,It=/#.*$/,Pt=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Lt=/^\/\//,qt={},$t={},Bt="*/".concat("*"),zt=b.createElement("a");function Ft(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,i=0,s=t.toLowerCase().match($)||[];if(y(r))for(;n=s[i++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function Ut(e,t,r,n){var i={},s=e===$t;function o(a){var l;return i[a]=!0,S.each(e[a]||[],(function(e,a){var u=a(t,r,n);return"string"!=typeof u||s||i[u]?s?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)})),l}return o(t.dataTypes[0])||!i["*"]&&o("*")}function jt(e,t){var r,n,i=S.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&S.extend(!0,e,n),e}zt.href=Et.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,S.ajaxSettings),t):jt(S.ajaxSettings,e)},ajaxPrefilter:Ft(qt),ajaxTransport:Ft($t),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,a,l,u,c,p,h,d=S.ajaxSetup({},t),f=d.context||d,m=d.context&&(f.nodeType||f.jquery)?S(f):S.event,g=S.Deferred(),y=S.Callbacks("once memory"),v=d.statusCode||{},x={},w={},_="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(u){if(!o)for(o={};t=Dt.exec(s);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?s:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==u&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)E.always(e[E.status]);else for(t in e)v[t]=[v[t],e[t]];return this},abort:function(e){var t=e||_;return r&&r.abort(t),A(0,t),this}};if(g.promise(E),d.url=((e||d.url||Et.href)+"").replace(Lt,Et.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match($)||[""],null==d.crossDomain){l=b.createElement("a");try{l.href=d.url,l.href=l.href,d.crossDomain=zt.protocol+"//"+zt.host!=l.protocol+"//"+l.host}catch(N){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=S.param(d.data,d.traditional)),Ut(qt,d,t,E),u)return E;for(p in(c=S.event&&d.global)&&0==S.active++&&S.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Rt.test(d.type),i=d.url.replace(It,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ot,"+")):(h=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(At.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(Pt,"$1"),h=(At.test(i)?"&":"?")+"_="+St.guid+++h),d.url=i+h),d.ifModified&&(S.lastModified[i]&&E.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&E.setRequestHeader("If-None-Match",S.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Bt+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(p,d.headers[p]);if(d.beforeSend&&(!1===d.beforeSend.call(f,E,d)||u))return E.abort();if(_="abort",y.add(d.complete),E.done(d.success),E.fail(d.error),r=Ut($t,d,t,E)){if(E.readyState=1,c&&m.trigger("ajaxSend",[E,d]),u)return E;d.async&&d.timeout>0&&(a=n.setTimeout((function(){E.abort("timeout")}),d.timeout));try{u=!1,r.send(x,A)}catch(N){if(u)throw N;A(-1,N)}}else A(-1,"No Transport");function A(e,t,o,l){var p,h,b,x,w,_=t;u||(u=!0,a&&n.clearTimeout(a),r=void 0,s=l||"",E.readyState=e>0?4:0,p=e>=200&&e<300||304===e,o&&(x=function(e,t,r){for(var n,i,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){l.unshift(i);break}if(l[0]in r)s=l[0];else{for(i in r){if(!l[0]||e.converters[i+" "+l[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),r[s]}(d,E,o)),!p&&S.inArray("script",d.dataTypes)>-1&&S.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),x=function(e,t,r,n){var i,s,o,a,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(r[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=c.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=u[l+" "+s]||u["* "+s]))for(i in u)if((a=i.split(" "))[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){!0===o?o=u[i]:!0!==u[i]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(N){return{state:"parsererror",error:o?N:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(d,x,E,p),p?(d.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(S.lastModified[i]=w),(w=E.getResponseHeader("etag"))&&(S.etag[i]=w)),204===e||"HEAD"===d.type?_="nocontent":304===e?_="notmodified":(_=x.state,h=x.data,p=!(b=x.error))):(b=_,!e&&_||(_="error",e<0&&(e=0))),E.status=e,E.statusText=(t||_)+"",p?g.resolveWith(f,[h,_,E]):g.rejectWith(f,[E,_,b]),E.statusCode(v),v=void 0,c&&m.trigger(p?"ajaxSuccess":"ajaxError",[E,d,p?h:b]),y.fireWith(f,[E,_]),c&&(m.trigger("ajaxComplete",[E,d]),--S.active||S.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,r){return S.get(e,t,r,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,r,n,i){return y(r)&&(i=i||n,n=r,r=void 0),S.ajax(S.extend({url:e,type:t,dataType:i,data:r,success:n},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,r){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,r)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(r){S(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Vt=S.ajaxSettings.xhr();g.cors=!!Vt&&"withCredentials"in Vt,g.ajax=Vt=!!Vt,S.ajaxTransport((function(e){var t,r;if(g.cors||Vt&&!e.crossDomain)return{send:function(i,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];for(o in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Gt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),r=a.onerror=a.ontimeout=t("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(n,i){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&i("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Ht,Wt=[],Yt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wt.pop()||S.expando+"_"+St.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,r){var i,s,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+i):!1!==e.jsonp&&(e.url+=(At.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||S.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=n[i],n[i]=function(){o=arguments},r.always((function(){void 0===s?S(n).removeProp(i):n[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Wt.push(i)),o&&y(s)&&s(o[0]),o=s=void 0})),"script"})),g.createHTMLDocument=((Ht=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ht.childNodes.length),S.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(g.createHTMLDocument?((n=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(n)):t=b),s=!r&&[],(i=O.exec(e))?[t.createElement(i[1])]:(i=Ee([e],t,s),s&&s.length&&S(s).remove(),S.merge([],i.childNodes)));var n,i,s},S.fn.load=function(e,t,r){var n,i,s,o=this,a=e.indexOf(" ");return a>-1&&(n=yt(e.slice(a)),e=e.slice(0,a)),y(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(n?S("<div>").append(S.parseHTML(e)).find(n):e)})).always(r&&function(e,t){o.each((function(){r.apply(this,s||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,r){var n,i,s,o,a,l,u=S.css(e,"position"),c=S(e),p={};"static"===u&&(e.style.position="relative"),a=c.offset(),s=S.css(e,"top"),l=S.css(e,"left"),("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1?(o=(n=c.position()).top,i=n.left):(o=parseFloat(s)||0,i=parseFloat(l)||0),y(t)&&(t=t.call(e,r,S.extend({},a))),null!=t.top&&(p.top=t.top-a.top+o),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):c.css(p)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,r,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===S.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(n,"marginTop",!0),left:t.left-i.left-S.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||oe}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;S.fn[e]=function(n){return V(this,(function(e,n,i){var s;if(v(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[n];s?s.scrollTo(r?s.pageXOffset:i,r?i:s.pageYOffset):e[n]=i}),e,n,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Ve(g.pixelPosition,(function(e,r){if(r)return r=Ge(e,t),ze.test(r)?S(e).position()[t]+"px":r}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,n){S.fn[n]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),a=r||(!0===i||!0===s?"margin":"border");return V(this,(function(t,r,i){var s;return v(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?S.css(t,r,a):S.style(t,r,i,a)}),t,o?i:void 0,o)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}));var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var r,n,i;if("string"==typeof t&&(r=e[t],t=e,e=r),y(e))return n=a.call(arguments,2),i=function(){return e.apply(t||this,n.concat(a.call(arguments)))},i.guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=T,S.isFunction=y,S.isWindow=v,S.camelCase=X,S.type=_,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},void 0===(r=function(){return S}.apply(t,[]))||(e.exports=r);var Zt=n.jQuery,Qt=n.$;return S.noConflict=function(e){return n.$===S&&(n.$=Qt),e&&n.jQuery===S&&(n.jQuery=Zt),S},void 0===i&&(n.jQuery=n.$=S),S}))},88914:function(e,t){var r,n,i;n=[],void 0===(i="function"==typeof(r=function(){var e=function(){},t={},r={},n={};function i(e,t){e=e.push?e:[e];var i,s,o,a=[],l=e.length,u=l;for(i=function(e,r){r.length&&a.push(e),--u||t(a)};l--;)s=e[l],(o=r[s])?i(s,o):(n[s]=n[s]||[]).push(i)}function s(e,t){if(e){var i=n[e];if(r[e]=t,i)for(;i.length;)i[0](e,t),i.splice(0,1)}}function o(t,r){t.call&&(t={success:t}),r.length?(t.error||e)(r):(t.success||e)(t)}function a(t,r,n,i){var s,o,l=document,u=n.async,c=(n.numRetries||0)+1,p=n.before||e,h=t.replace(/[\?|#].*$/,""),d=t.replace(/^(css|img)!/,"");i=i||0,/(^css!|\.css$)/.test(h)?((o=l.createElement("link")).rel="stylesheet",o.href=d,(s="hideFocus"in o)&&o.relList&&(s=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(o=l.createElement("img")).src=d:((o=l.createElement("script")).src=t,o.async=void 0===u||u),o.onload=o.onerror=o.onbeforeload=function(e){var l=e.type[0];if(s)try{o.sheet.cssText.length||(l="e")}catch(u){18!=u.code&&(l="e")}if("e"==l){if((i+=1)<c)return a(t,r,n,i)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";r(t,l,e.defaultPrevented)},!1!==p(t,o)&&l.head.appendChild(o)}function l(e,t,r){var n,i,s=(e=e.push?e:[e]).length,o=s,l=[];for(n=function(e,r,n){if("e"==r&&l.push(e),"b"==r){if(!n)return;l.push(e)}--s||t(l)},i=0;i<o;i++)a(e[i],n,r)}function u(e,r,n){var i,a;if(r&&r.trim&&(i=r),a=(i?n:r)||{},i){if(i in t)throw"LoadJS";t[i]=!0}function u(t,r){l(e,(function(e){o(a,e),t&&o({success:t,error:r},e),s(i,e)}),a)}if(a.returnPromise)return new Promise(u);u()}return u.ready=function(e,t){return i(e,(function(e){o(t,e)})),u},u.done=function(e){s(e,[])},u.reset=function(){t={},r={},n={}},u.isDefined=function(e){return e in t},u})?r.apply(t,n):r)||(e.exports=i)},68116:(e,t,r)=>{var n=r(65082),i=r(7557),s=r(42262),o=r(42095),a=r(70431),l=r(67131),u=r(67701);u.alea=n,u.xor128=i,u.xorwow=s,u.xorshift7=o,u.xor4096=a,u.tychei=l,e.exports=u},65082:function(e,t,r){var n;!function(e,i,s){function o(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var r=new o(e),n=t&&t.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,i))||(i.exports=n):this.alea=l}(0,e=r.nmd(e),r.amdD)},67131:function(e,t,r){var n;!function(e,i,s){function o(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,i=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var r=new o(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,i))||(i.exports=n):this.tychei=l}(0,e=r.nmd(e),r.amdD)},7557:function(e,t,r){var n;!function(e,i,s){function o(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var r=new o(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,i))||(i.exports=n):this.xor128=l}(0,e=r.nmd(e),r.amdD)},70431:function(e,t,r){var n;!function(e,i,s){function o(e){var t=this;t.next=function(){var e,r,n=t.w,i=t.X,s=t.i;return t.w=n=n+1640531527|0,r=i[s+34&127],e=i[s=s+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=i[s]=r^e,t.i=s,r+(n^n>>>16)|0},function(e,t){var r,n,i,s,o,a=[],l=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,l=Math.max(l,t.length)),i=0,s=-32;s<l;++s)t&&(n^=t.charCodeAt((s+32)%t.length)),0===s&&(o=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(o=o+1640531527|0,i=0==(r=a[127&s]^=n+o)?i+1:0);for(i>=128&&(a[127&(t&&t.length||0)]=-1),i=127,s=512;s>0;--s)n=a[i+34&127],r=a[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,a[i]=n^r;e.w=o,e.X=a,e.i=i}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var r=new o(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&(n.X&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,i))||(i.exports=n):this.xor4096=l}(0,e=r.nmd(e),r.amdD)},42095:function(e,t,r){var n;!function(e,i,s){function o(e){var t=this;t.next=function(){var e,r,n=t.x,i=t.i;return e=n[i],r=(e^=e>>>7)^e<<24,r^=(e=n[i+1&7])^e>>>10,r^=(e=n[i+3&7])^e>>>3,r^=(e=n[i+4&7])^e<<7,e=n[i+7&7],r^=(e^=e<<13)^e<<9,n[i]=r,t.i=i+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var r=new o(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&(n.x&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,i))||(i.exports=n):this.xorshift7=l}(0,e=r.nmd(e),r.amdD)},42262:function(e,t,r){var n;!function(e,i,s){function o(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var r=new o(e),n=t&&t.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=l:r.amdD&&r.amdO?void 0===(n=function(){return l}.call(t,r,t,i))||(i.exports=n):this.xorwow=l}(0,e=r.nmd(e),r.amdD)},67701:function(e,t,r){var n;!function(i,s,o){var a,l=256,u=o.pow(l,6),c=o.pow(2,52),p=2*c,h=255;function d(e,t,r){var n=[],h=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,v(s)]:null==e?function(){try{var e;return a&&(e=a.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),v(e)}catch(n){var t=i.navigator,r=t&&t.plugins;return[+new Date,i,r,i.screen,v(s)]}}():e,3),n),d=new f(n),b=function(){for(var e=d.g(6),t=u,r=0;e<c;)e=(e+r)*l,t*=l,r=d.g(1);for(;e>=p;)e/=2,t/=2,r>>>=1;return(e+r)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,y(v(d.S),s),(t.pass||r||function(e,t,r,n){return n&&(n.S&&m(n,d),e.state=function(){return m(d,{})}),r?(o.random=e,t):e})(b,h,"global"in t?t.global:this==o,t.state)}function f(e){var t,r=e.length,n=this,i=0,s=n.i=n.j=0,o=n.S=[];for(r||(e=[r++]);i<l;)o[i]=i++;for(i=0;i<l;i++)o[i]=o[s=h&s+e[i%r]+(t=o[i])],o[s]=t;(n.g=function(e){for(var t,r=0,i=n.i,s=n.j,o=n.S;e--;)t=o[i=h&i+1],r=r*l+o[h&(o[i]=o[s=h&s+t])+(o[s]=t)];return n.i=i,n.j=s,r})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var r,n=[],i=typeof e;if(t&&"object"==i)for(r in e)try{n.push(g(e[r],t-1))}catch(s){}return n.length?n:"string"==i?e:e+"\0"}function y(e,t){for(var r,n=e+"",i=0;i<n.length;)t[h&i]=h&(r^=19*t[h&i])+n.charCodeAt(i++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(y(o.random(),s),e.exports){e.exports=d;try{a=r(21440)}catch(b){}}else void 0===(n=function(){return d}.call(t,r,t,e))||(e.exports=n)}("undefined"!=typeof self?self:this,[],Math)},90187:function(e,t,r){e.exports=function(e){"use strict";var t=Object.freeze({__proto__:null,get FunctionDeclaration(){return Qe},get VariableDeclaration(){return Ke},get VariableDeclarator(){return Je},get ClassDeclaration(){return et},get ClassBody(){return tt},get MethodDefinition(){return rt}}),n=Object.freeze({__proto__:null,get FunctionDeclaration(){return ir},get VariableDeclaration(){return sr},get VariableDeclarator(){return or},get ClassDeclaration(){return ar},get ClassBody(){return lr},get MethodDefinition(){return ur}}),i=Object.freeze,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.prototype.hasOwnProperty;function l(e,t){return a.call(e,t)}var u=Object.getOwnPropertyNames,c=Object.setPrototypeOf;function p(e,t){c?c(e,t):e.__proto__=t}var h=Object.getPrototypeOf;function d(e){return h?h(e):e.__proto__}var f=Object.getOwnPropertyDescriptor;function m(e,t,r){for(;t;){var n=f(t,r),i=void 0!==n&&void 0===n.writable&&"function"==typeof n[e]&&n[e];if(i)return i;t=d(t)}}function g(e,t){return m("get",e,t)}function y(e,t){return m("set",e,t)}var v=Object.create;function b(e,t){p(e,t),e.prototype=v(t.prototype,{constructor:{value:e,writable:!0}})}function x(e){for(var t=1;t<arguments.length;++t){var r=arguments[t];for(var n in r)l(r,n)&&(e[n]=r[n])}return e}var w=Object.assign||x,_=[],E=v(null);try{if(!window.Object)throw 0;_=u(E=window).filter((function(e){return"webkitStorageInfo"!==e}))}catch(Sr){try{if(!r.g.Object)throw 0;_=u(E=r.g).filter((function(e){return"GLOBAL"!==e&&"root"!==e}))}catch(Sr){try{E.Object=Object}catch(Sr){}try{E.Function=Function}catch(Sr){}try{E.Array=Array}catch(Sr){}try{E.Number=Number}catch(Sr){}try{E.parseFloat=parseFloat}catch(Sr){}try{E.parseInt=parseInt}catch(Sr){}try{E.Infinity=1/0}catch(Sr){}try{E.NaN=NaN}catch(Sr){}try{E.undefined=void 0}catch(Sr){}try{E.Boolean=Boolean}catch(Sr){}try{E.String=String}catch(Sr){}try{E.Symbol=Symbol}catch(Sr){}try{E.Date=Date}catch(Sr){}try{E.Promise=Promise}catch(Sr){}try{E.RegExp=RegExp}catch(Sr){}try{E.Error=Error}catch(Sr){}try{E.EvalError=EvalError}catch(Sr){}try{E.RangeError=RangeError}catch(Sr){}try{E.ReferenceError=ReferenceError}catch(Sr){}try{E.SyntaxError=SyntaxError}catch(Sr){}try{E.TypeError=TypeError}catch(Sr){}try{E.URIError=URIError}catch(Sr){}try{E.JSON=JSON}catch(Sr){}try{E.Math=Math}catch(Sr){}try{E.console=console}catch(Sr){}try{E.Intl=Intl}catch(Sr){}try{E.ArrayBuffer=ArrayBuffer}catch(Sr){}try{E.Uint8Array=Uint8Array}catch(Sr){}try{E.Int8Array=Int8Array}catch(Sr){}try{E.Uint16Array=Uint16Array}catch(Sr){}try{E.Int16Array=Int16Array}catch(Sr){}try{E.Uint32Array=Uint32Array}catch(Sr){}try{E.Int32Array=Int32Array}catch(Sr){}try{E.Float32Array=Float32Array}catch(Sr){}try{E.Float64Array=Float64Array}catch(Sr){}try{E.Uint8ClampedArray=Uint8ClampedArray}catch(Sr){}try{E.DataView=DataView}catch(Sr){}try{E.Map=Map}catch(Sr){}try{E.Set=Set}catch(Sr){}try{E.WeakMap=WeakMap}catch(Sr){}try{E.WeakSet=WeakSet}catch(Sr){}try{E.Proxy=Proxy}catch(Sr){}try{E.Reflect=Reflect}catch(Sr){}try{E.decodeURI=decodeURI}catch(Sr){}try{E.decodeURIComponent=decodeURIComponent}catch(Sr){}try{E.encodeURI=encodeURI}catch(Sr){}try{E.encodeURIComponent=encodeURIComponent}catch(Sr){}try{E.escape=escape}catch(Sr){}try{E.unescape=unescape}catch(Sr){}try{E.eval=eval}catch(Sr){}try{E.isFinite=isFinite}catch(Sr){}try{E.isNaN=isNaN}catch(Sr){}try{E.SharedArrayBuffer=SharedArrayBuffer}catch(Sr){}try{E.Atomics=Atomics}catch(Sr){}try{E.WebAssembly=WebAssembly}catch(Sr){}try{E.clearInterval=clearInterval}catch(Sr){}try{E.clearTimeout=clearTimeout}catch(Sr){}try{E.setInterval=setInterval}catch(Sr){}try{E.setTimeout=setTimeout}catch(Sr){}try{E.crypto=crypto}catch(Sr){}_=u(E)}}E.Symbol&&(!E.Symbol.iterator&&(E.Symbol.iterator=C("iterator")),!E.Symbol.asyncIterator&&(E.Symbol.asyncIterator=C("asynciterator")));for(var S=v({}),A=0;A<_.length;A++){var N=_[A];try{S[N]=E[N]}catch(Sr){}}var k=C("window");function M(){var e;return w(v(((e={})[k]=E,e)),S)}function C(e){return e+Math.random().toString(36).substring(2)}function T(e){var t;if("function"==typeof Symbol&&!(t=e[Symbol.asyncIterator])&&(t=e[Symbol.iterator]),t)return t.call(e);if("function"==typeof e.next)return e;var r=0;return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var O="0.4.8",I={RES:void 0},P={RES:void 0},D=C("continue"),R=C("break"),L=C("super"),q=C("supercall"),$=C("noctor"),B=C("clsctor"),z=C("newtarget"),F=C("noinit"),U=C("deadzone"),j=function(){function e(e,t){this.kind=e,this.value=t}return e.prototype.get=function(){return this.value},e.prototype.set=function(e){if("const"===this.kind)throw new TypeError("Assignment to constant variable");return this.value=e},e}(),G=function(){function e(e,t){this.object=e,this.property=t}return e.prototype.get=function(){return this.object[this.property]},e.prototype.set=function(e){return this.object[this.property]=e,!0},e.prototype.del=function(){return delete this.object[this.property]},e}(),V=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.context=v(null),this.parent=e,this.isolated=t}return e.prototype.global=function(){for(var e=this;e.parent;)e=e.parent;return e},e.prototype.clone=function(){var t=new e(this.parent,this.isolated);for(var r in this.context){var n=this.context[r];t[n.kind](r,n.get())}return t},e.prototype.find=function(e){if(this.context[e])return this.context[e];if(this.parent)return this.parent.find(e);var t=this.global().find("window").get();return e in t?new G(t,e):null},e.prototype.var=function(e,t){for(var r=this;r.parent&&!r.isolated;)r=r.parent;var n=r.context[e];if(n){if("var"!==n.kind)throw new SyntaxError("Identifier '"+e+"' has already been declared");t!==F&&n.set(t)}else r.context[e]=new j("var",t===F?void 0:t);if(!r.parent){var i=r.find("window").get();t!==F&&s(i,e,{value:t,writable:!0,enumerable:!0})}},e.prototype.let=function(e,t){var r=this.context[e];if(r&&r.get()!==U)throw new SyntaxError("Identifier '"+e+"' has already been declared");this.context[e]=new j("let",t)},e.prototype.const=function(e,t){var r=this.context[e];if(r&&r.get()!==U)throw new SyntaxError("Identifier '"+e+"' has already been declared");this.context[e]=new j("const",t)},e.prototype.func=function(e,t){var r=this.context[e];if(r&&"var"!==r.kind)throw new SyntaxError("Identifier '"+e+"' has already been declared");this.context[e]=new j("var",t)},e}();function H(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return l([e,t])}}function l(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function W(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function Y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function X(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Y(arguments[t]));return e}function Z(e,t,r){void 0===r&&(r={});var n=r.getVar,i=void 0!==n&&n,s=r.throwErr,o=void 0===s||s;if("undefined"!==e.name){var a=t.find(e.name);if(a){if(i)return a;var l=a.get();if(l===U)throw new ReferenceError(e.name+" is not defined");return l}if(o)throw new ReferenceError(e.name+" is not defined")}}var Q=Object.freeze({__proto__:null,Identifier:Z});function K(e,t){return e.value}var J=Object.freeze({__proto__:null,Literal:K});function ee(e,t){var r=t.find(q);if(r&&!r.get())throw new ReferenceError("Must call super constructor in derived class before accessing 'this' or returning from derived constructor");return t.find("this").get()}function te(e,t){for(var r=[],n=0;n<e.elements.length;n++){var i=e.elements[n];"SpreadElement"===i.type?r=r.concat(we(i,t)):r.push(Ze(i,t))}return r}function re(e,t){for(var r={},n=0;n<e.properties.length;n++){var i=e.properties[n];if("SpreadElement"===i.type)w(r,we(i,t));else{var a=void 0,l=i.key;a=i.computed?Ze(l,t):"Identifier"===l.type?l.name:""+K(l);var u=Ze(i.value,t),c=i.kind;if("init"===c)r[a]=u;else if("get"===c){var p=o(r,a);s(r,a,{get:u,set:p&&p.set,enumerable:!0,configurable:!0})}else p=o(r,a),s(r,a,{get:p&&p.get,set:u,enumerable:!0,configurable:!0})}}return r}function ne(e,t){if(e.id&&e.id.name){var r=new V(t),n=xr(e,r);return r.const(e.id.name,n),n}return xr(e,t)}function ie(e,t){var r=e.argument;switch(e.operator){case"+":return+Ze(r,t);case"-":return-Ze(r,t);case"!":return!Ze(r,t);case"~":return~Ze(r,t);case"void":return void Ze(r,t);case"typeof":return"Identifier"===r.type?typeof Z(r,t,{throwErr:!1}):typeof Ze(r,t);case"delete":if("MemberExpression"===r.type)return ue(r,t,{getVar:!0}).del();if("Identifier"===r.type)throw new SyntaxError("Delete of an unqualified identifier in strict mode");return Ze(r,t),!0;default:throw new SyntaxError("Unexpected token "+e.operator)}}function se(e,t){var r,n=e.argument;if("Identifier"===n.type)r=Z(n,t,{getVar:!0});else{if("MemberExpression"!==n.type)throw new SyntaxError("Unexpected token");r=ue(n,t,{getVar:!0})}var i=r.get();if("++"===e.operator)return r.set(i+1),e.prefix?r.get():i;if("--"===e.operator)return r.set(i-1),e.prefix?r.get():i;throw new SyntaxError("Unexpected token "+e.operator)}function oe(e,t){var r=Ze(e.left,t),n=Ze(e.right,t);switch(e.operator){case"==":return r==n;case"!=":return r!=n;case"===":return r===n;case"!==":return r!==n;case"<":return r<n;case"<=":return r<=n;case">":return r>n;case">=":return r>=n;case"<<":return r<<n;case">>":return r>>n;case">>>":return r>>>n;case"+":return r+n;case"-":return r-n;case"*":return r*n;case"**":return Math.pow(r,n);case"/":return r/n;case"%":return r%n;case"|":return r|n;case"^":return r^n;case"&":return r&n;case"in":return r in n;case"instanceof":return r instanceof n;default:throw new SyntaxError("Unexpected token "+e.operator)}}function ae(e,t){var r,n=Ze(e.right,t),i=e.left;if("Identifier"===i.type){if(!(r=Z(i,t,{getVar:!0,throwErr:!1}))){var s=t.global().find("window").get();r=new G(s,i.name)}}else{if("MemberExpression"!==i.type)return br(i,t,{feed:n});r=ue(i,t,{getVar:!0})}switch(e.operator){case"=":return r.set(n),r.get();case"+=":return r.set(r.get()+n),r.get();case"-=":return r.set(r.get()-n),r.get();case"*=":return r.set(r.get()*n),r.get();case"/=":return r.set(r.get()/n),r.get();case"%=":return r.set(r.get()%n),r.get();case"**=":return r.set(Math.pow(r.get(),n)),r.get();case"<<=":return r.set(r.get()<<n),r.get();case">>=":return r.set(r.get()>>n),r.get();case">>>=":return r.set(r.get()>>>n),r.get();case"|=":return r.set(r.get()|n),r.get();case"^=":return r.set(r.get()^n),r.get();case"&=":return r.set(r.get()&n),r.get();default:throw new SyntaxError("Unexpected token "+e.operator)}}function le(e,t){switch(e.operator){case"||":return Ze(e.left,t)||Ze(e.right,t);case"&&":return Ze(e.left,t)&&Ze(e.right,t);default:throw new SyntaxError("Unexpected token "+e.operator)}}function ue(e,t,r){void 0===r&&(r={});var n,i,o=r.getObj,a=void 0!==o&&o,l=r.getVar,u=void 0!==l&&l;if(n="Super"===e.object.type?xe(e.object,t,{getProto:!0}):Ze(e.object,t),a)return n;if(i=e.computed?Ze(e.property,t):e.property.name,u){var c=y(n,i);if("Super"===e.object.type&&c){var p=t.find("this").get(),h=C(i);return s(p,h,{set:c}),new G(p,h)}return new G(n,i)}var d=g(n,i);return"Super"===e.object.type&&d?(p=t.find("this").get(),d.call(p)):n[i]}function ce(e,t){return Ze(e.test,t)?Ze(e.consequent,t):Ze(e.alternate,t)}function pe(e,t){var r,n;if("MemberExpression"===e.callee.type){n=ue(e.callee,t,{getObj:!0});var i=void 0;if(i=e.callee.computed?Ze(e.callee.property,t):e.callee.property.name,"Super"===e.callee.object.type){var s=t.find("this").get();r=n[i].bind(s)}else r=n[i];if("function"!=typeof r)throw new TypeError(i+" is not a function");if(r[B])throw new TypeError("Class constructor "+i+" cannot be invoked without 'new'")}else if(n=t.find("this").get(),"function"!=typeof(r=Ze(e.callee,t))||"Super"!==e.callee.type&&r[B]){var o;if("Identifier"===e.callee.type)o=e.callee.name;else try{o=JSON.stringify(r)}catch(Sr){o=""+r}throw"function"!=typeof r?new TypeError(o+" is not a function"):new TypeError("Class constructor "+o+" cannot be invoked without 'new'")}for(var a=[],l=0;l<e.arguments.length;l++){var u=e.arguments[l];"SpreadElement"===u.type?a=a.concat(we(u,t)):a.push(Ze(u,t))}if("Super"===e.callee.type){if(t.find(q).get())throw new ReferenceError("Super constructor may only be called once");t.find(q).set(!0)}return n&&n[k]&&-1!==r.toString().indexOf("[native code]")?r.apply(n[k],a):r.apply(n,a)}function he(e,t){var r=Ze(e.callee,t);if("function"!=typeof r){var n;if("Identifier"===e.callee.type)n=e.callee.name;else try{n=JSON.stringify(r)}catch(Sr){n=""+r}throw new TypeError(n+" is not a constructor")}if(r[$])throw new TypeError((r.name||"(intermediate value)")+" is not a constructor");for(var i=[],s=0;s<e.arguments.length;s++){var o=e.arguments[s];"SpreadElement"===o.type?i=i.concat(we(o,t)):i.push(Ze(o,t))}return new(r.bind.apply(r,X([void 0],i)))}function de(e,t){return t.find(z).get()}function fe(e,t){for(var r,n=0;n<e.expressions.length;n++)r=Ze(e.expressions[n],t);return r}function me(e,t){return xr(e,t)}function ge(e,t){for(var r,n,i=e.quasis.slice(),s=e.expressions.slice(),o="";r=i.shift();)o+=ve(r),(n=s.shift())&&(o+=Ze(n,t));return o}function ye(e,t){var r=Ze(e.tag,t),n=e.quasi.quasis,o=n.map((function(e){return e.value.cooked})),a=n.map((function(e){return e.value.raw}));s(o,"raw",{value:i(a)});var l=e.quasi.expressions,u=[];if(l)for(var c=0;c<l.length;c++)u.push(Ze(l[c],t));return r.apply(void 0,X([i(o)],u))}function ve(e,t){return e.value.raw}function be(e,t){if(e.id&&e.id.name){var r=new V(t),n=wr(e,r);return r.const(e.id.name,n),n}return wr(e,t)}function xe(e,t,r){void 0===r&&(r={});var n=r.getProto,i=void 0!==n&&n,s=t.find(L).get();return i?s.prototype:s}function we(e,t){return Ze(e.argument,t)}var _e=Object.freeze({__proto__:null,ThisExpression:ee,ArrayExpression:te,ObjectExpression:re,FunctionExpression:ne,UnaryExpression:ie,UpdateExpression:se,BinaryExpression:oe,AssignmentExpression:ae,LogicalExpression:le,MemberExpression:ue,ConditionalExpression:ce,CallExpression:pe,NewExpression:he,MetaProperty:de,SequenceExpression:fe,ArrowFunctionExpression:me,TemplateLiteral:ge,TaggedTemplateExpression:ye,TemplateElement:ve,ClassExpression:be,Super:xe,SpreadElement:we});function Ee(e,t){Ze(e.expression,t)}function Se(e,t,r){void 0===r&&(r={});var n=r.invasived,i=void 0!==n&&n,s=r.hoisted,o=void 0!==s&&s,a=i?t:new V(t);o||yr(e,a,{onlyBlock:!0});for(var l=0;l<e.body.length;l++){var u=Ze(e.body[l],a);if(u===R||u===D||u===P)return u}}function Ae(){}function Ne(){}function ke(e,t){return P.RES=e.argument?Ze(e.argument,t):void 0,P}function Me(){return R}function Ce(){return D}function Te(e,t){return Ze(e.test,t)?Ze(e.consequent,t):Ze(e.alternate,t)}function Oe(e,t){for(var r=Ze(e.discriminant,t),n=!1,i=0;i<e.cases.length;i++){var s=e.cases[i];if(n||s.test&&Ze(s.test,t)!==r||(n=!0),n){var o=Ie(s,t);if(o===R)break;if(o===D||o===P)return o}}}function Ie(e,t){for(var r=0;r<e.consequent.length;r++){var n=Ze(e.consequent[r],t);if(n===R||n===D||n===P)return n}}function Pe(e,t){throw Ze(e.argument,t)}function De(e,t){try{return Se(e.block,t)}catch(Sr){if(e.handler){var r=new V(t),n=e.handler.param;if(n)if("Identifier"===n.type){var i=n.name;r.var(i,Sr)}else br(n,t,{feed:Sr});return Re(e.handler,r)}throw Sr}finally{if(e.finalizer){var s=Se(e.finalizer,t);if(s===R||s===D||s===P)return s}}}function Re(e,t){return Se(e.body,t,{invasived:!0})}function Le(e,t){for(;Ze(e.test,t);){var r=Ze(e.body,t);if(r===R)break;if(r!==D&&r===P)return r}}function qe(e,t){do{var r=Ze(e.body,t);if(r===R)break;if(r!==D&&r===P)return r}while(Ze(e.test,t))}function $e(e,t){var r=new V(t);for(Ze(e.init,r);!e.test||Ze(e.test,r);Ze(e.update,r)){var n=new V(r),i=void 0;if((i="BlockStatement"===e.body.type?Se(e.body,n,{invasived:!0}):Ze(e.body,n))===R)break;if(i!==D&&i===P)return i}}function Be(e,t){for(var r in Ze(e.right,t)){var n=_r(e,t,{value:r});if(n===R)break;if(n!==D&&n===P)return n}}function ze(e,t){var r,n,i=Ze(e.right,t);try{for(var s=W(i),o=s.next();!o.done;o=s.next()){var a=_r(e,t,{value:o.value});if(a===R)break;if(a!==D&&a===P)return a}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}var Fe=Object.freeze({__proto__:null,ExpressionStatement:Ee,BlockStatement:Se,EmptyStatement:Ae,DebuggerStatement:Ne,ReturnStatement:ke,BreakStatement:Me,ContinueStatement:Ce,IfStatement:Te,SwitchStatement:Oe,SwitchCase:Ie,ThrowStatement:Pe,TryStatement:De,CatchClause:Re,WhileStatement:Le,DoWhileStatement:qe,ForStatement:$e,ForInStatement:Be,ForOfStatement:ze});function Ue(e,t,r){void 0===r&&(r={});for(var n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,l=void 0!==a&&a,u=r.feed,c=void 0===u?{}:u,p=[],h=0;h<e.properties.length;h++){var d=e.properties[h];if(o)(l||"var"===i)&&("Property"===d.type?"Identifier"===(f=d.value).type?t[i](f.name,l?U:"var"===i?F:void 0):br(f,t,{kind:i,hoist:o,onlyBlock:l}):Ge(d,t,{kind:i,hoist:o,onlyBlock:l}));else if("Property"===d.type){var f,m=void 0;m=d.computed?Ze(d.key,t):d.key.name,p.push(m),"Identifier"===(f=d.value).type?t[i](f.name,c[m]):br(f,t,{kind:i,feed:c[m]})}else{for(var g=w({},c),y=0;y<p.length;y++)delete g[p[y]];Ge(d,t,{kind:i,feed:g})}}}function je(e,t,r){void 0===r&&(r={});for(var n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,l=r.feed,u=void 0===l?[]:l,c=[],p=0;p<e.elements.length;p++){var h=e.elements[p];if(h)if(s)(a||"var"===n)&&("Identifier"===h.type?t[n](h.name,a?U:"var"===n?F:void 0):br(h,t,{kind:n,hoist:s,onlyBlock:a}));else if("Identifier"===h.type)if(n)t[n](h.name,u[p]);else{var d=Z(h,t,{getVar:!0});d.set(u[p]),c.push(d.get())}else"RestElement"===h.type?Ge(h,t,{kind:n,feed:u.slice(p)}):br(h,t,{kind:n,feed:u[p]})}if(c.length)return c}function Ge(e,t,r){void 0===r&&(r={});var n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,l=r.feed,u=void 0===l?[]:l,c=e.argument;s?(a||"var"===n)&&("Identifier"===c.type?t[n](c.name,a?U:"var"===n?F:void 0):br(c,t,{kind:n,hoist:s,onlyBlock:a})):"Identifier"===c.type?n?t[n](c.name,u):Z(c,t,{getVar:!0}).set(u):br(c,t,{kind:n,feed:u})}function Ve(e,t,r){void 0===r&&(r={});var n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,l=void 0!==a&&a,u=r.feed,c=void 0===u?Ze(e.right,t):u,p=e.left;o?(l||"var"===i)&&("Identifier"===p.type?t[i](p.name,l?U:"var"===i?F:void 0):br(p,t,{kind:i,hoist:o,onlyBlock:l})):"Identifier"===p.type?t[i](p.name,c):br(p,t,{kind:i,feed:c})}var He=Object.freeze({__proto__:null,ObjectPattern:Ue,ArrayPattern:je,RestElement:Ge,AssignmentPattern:Ve});function We(e,t){for(var r=0;r<e.body.length;r++)Ze(e.body[r],t)}var Ye,Xe=Object.freeze({__proto__:null,Program:We});function Ze(e,r){if(e){Ye||(Ye=w({},t,_e,Q,Fe,J,He,Xe));var n=Ye[e.type];if(n)return n(e,r);throw new Error(e.type+" isn't implemented")}}function Qe(e,t){t.func(e.id.name,xr(e,t))}function Ke(e,t,r){void 0===r&&(r={});for(var n=0;n<e.declarations.length;n++)Je(e.declarations[n],t,w({kind:e.kind},r))}function Je(e,t,r){void 0===r&&(r={});var n=r.kind,i=void 0===n?"var":n,o=r.hoist,a=void 0!==o&&o,l=r.onlyBlock,u=void 0!==l&&l,c=r.feed;if(a)(u||"var"===i)&&("Identifier"===e.id.type?t[i](e.id.name,u?U:"var"===i?F:void 0):br(e.id,t,{kind:i,hoist:a,onlyBlock:u}));else{var p="feed"in r,h=p?c:Ze(e.init,t);if("Identifier"===e.id.type){var d=e.id.name;"var"!==i||e.init||p?t[i](d,h):t.var(d,F),e.init&&-1!==["ClassExpression","FunctionExpression","ArrowFunctionExpression"].indexOf(e.init.type)&&!h.name&&s(h,"name",{value:d,configurable:!0})}else br(e.id,t,{kind:i,feed:h})}}function et(e,t){t.func(e.id.name,wr(e,t))}function tt(e,t,r){void 0===r&&(r={});for(var n=r.klass,i=r.superClass,s=0;s<e.body.length;s++)rt(e.body[s],t,{klass:n,superClass:i})}function rt(e,t,r){void 0===r&&(r={});var n,i=r.klass,a=r.superClass;if(e.computed)n=Ze(e.key,t);else{if("Identifier"!==e.key.type)throw new SyntaxError("Unexpected token");n=e.key.name}var l=e.static?i:i.prototype,u=xr(e.value,t,{superClass:a});switch(e.kind){case"constructor":break;case"method":s(l,n,{value:u,writable:!0,configurable:!0});break;case"get":var c=o(l,n);s(l,n,{get:u,set:c&&c.set,configurable:!0});break;case"set":c=o(l,n),s(l,n,{get:c&&c.get,set:u,configurable:!0});break;default:throw new SyntaxError("Unexpected token")}}function nt(e,t,r){var n,i,s,o,a,l;return void 0===r&&(r={}),H(this,(function(u){if(n=r.getVar,i=void 0!==n&&n,s=r.throwErr,o=void 0===s||s,"undefined"===e.name)return[2,void 0];if(a=t.find(e.name)){if(i)return[2,a];if((l=a.get())===U)throw new ReferenceError(e.name+" is not defined");return[2,l]}if(o)throw new ReferenceError(e.name+" is not defined");return[2,void 0]}))}var it=Object.freeze({__proto__:null,Identifier:nt});function st(e,t){return H(this,(function(t){return[2,e.value]}))}var ot=Object.freeze({__proto__:null,Literal:st});function at(e,t){var r;return H(this,(function(e){if((r=t.find(q))&&!r.get())throw new ReferenceError("Must call super constructor in derived class before accessing 'this' or returning from derived constructor");return[2,t.find("this").get()]}))}function lt(e,t){var r,n,i,s,o,a,l;return H(this,(function(u){switch(u.label){case 0:r=[],n=0,u.label=1;case 1:return n<e.elements.length?"SpreadElement"!==(i=e.elements[n]).type?[3,3]:(o=(s=r).concat,[5,W(Mt(i,t))]):[3,6];case 2:return r=o.apply(s,[u.sent()]),[3,5];case 3:return l=(a=r).push,[5,W(nr(i,t))];case 4:l.apply(a,[u.sent()]),u.label=5;case 5:return n++,[3,1];case 6:return[2,r]}}))}function ut(e,t){var r,n,i,a,l,u,c,p,h,d,f;return H(this,(function(m){switch(m.label){case 0:r={},n=0,m.label=1;case 1:return n<e.properties.length?"SpreadElement"!==(i=e.properties[n]).type?[3,3]:(a=w,l=[r],[5,W(Mt(i,t))]):[3,11];case 2:return a.apply(void 0,l.concat([m.sent()])),[3,10];case 3:return u=void 0,c=i.key,i.computed?[5,W(nr(c,t))]:[3,5];case 4:return u=m.sent(),[3,8];case 5:return"Identifier"!==c.type?[3,6]:(u=c.name,[3,8]);case 6:return p="",[5,W(st(c))];case 7:u=p+m.sent(),m.label=8;case 8:return[5,W(nr(i.value,t))];case 9:h=m.sent(),"init"===(d=i.kind)?r[u]=h:"get"===d?(f=o(r,u),s(r,u,{get:h,set:f&&f.set,enumerable:!0,configurable:!0})):(f=o(r,u),s(r,u,{get:f&&f.get,set:h,enumerable:!0,configurable:!0})),m.label=10;case 10:return n++,[3,1];case 11:return[2,r]}}))}function ct(e,t){var r,n;return H(this,(function(i){return e.id&&e.id.name?(r=new V(t),n=fr(e,r),r.const(e.id.name,n),[2,n]):[2,fr(e,t)]}))}function pt(e,t){var r;return H(this,(function(n){switch(n.label){case 0:switch(r=e.argument,e.operator){case"+":return[3,1];case"-":return[3,3];case"!":return[3,5];case"~":return[3,7];case"void":return[3,9];case"typeof":return[3,11];case"delete":return[3,15]}return[3,20];case 1:case 3:case 5:case 7:case 9:case 13:case 18:return[5,W(nr(r,t))];case 2:return[2,+n.sent()];case 4:return[2,-n.sent()];case 6:return[2,!n.sent()];case 8:return[2,~n.sent()];case 10:return[2,void n.sent()];case 11:return"Identifier"!==r.type?[3,13]:[5,W(nt(r,t,{throwErr:!1}))];case 12:case 14:return[2,typeof n.sent()];case 15:return"MemberExpression"!==r.type?[3,17]:[5,W(gt(r,t,{getVar:!0}))];case 16:return[2,n.sent().del()];case 17:if("Identifier"!==r.type)return[3,18];throw new SyntaxError("Delete of an unqualified identifier in strict mode");case 19:return n.sent(),[2,!0];case 20:throw new SyntaxError("Unexpected token "+e.operator)}}))}function ht(e,t){var r,n,i;return H(this,(function(s){switch(s.label){case 0:return"Identifier"!==(r=e.argument).type?[3,2]:[5,W(nt(r,t,{getVar:!0}))];case 1:case 3:return n=s.sent(),[3,5];case 2:return"MemberExpression"!==r.type?[3,4]:[5,W(gt(r,t,{getVar:!0}))];case 4:throw new SyntaxError("Unexpected token");case 5:if(i=n.get(),"++"===e.operator)return n.set(i+1),[2,e.prefix?n.get():i];if("--"===e.operator)return n.set(i-1),[2,e.prefix?n.get():i];throw new SyntaxError("Unexpected token "+e.operator)}}))}function dt(e,t){var r,n;return H(this,(function(i){switch(i.label){case 0:return[5,W(nr(e.left,t))];case 1:return r=i.sent(),[5,W(nr(e.right,t))];case 2:switch(n=i.sent(),e.operator){case"==":return[2,r==n];case"!=":return[2,r!=n];case"===":return[2,r===n];case"!==":return[2,r!==n];case"<":return[2,r<n];case"<=":return[2,r<=n];case">":return[2,r>n];case">=":return[2,r>=n];case"<<":return[2,r<<n];case">>":return[2,r>>n];case">>>":return[2,r>>>n];case"+":return[2,r+n];case"-":return[2,r-n];case"*":return[2,r*n];case"**":return[2,Math.pow(r,n)];case"/":return[2,r/n];case"%":return[2,r%n];case"|":return[2,r|n];case"^":return[2,r^n];case"&":return[2,r&n];case"in":return[2,r in n];case"instanceof":return[2,r instanceof n];default:throw new SyntaxError("Unexpected token "+e.operator)}}}))}function ft(e,t){var r,n,i,s;return H(this,(function(o){switch(o.label){case 0:return[5,W(nr(e.right,t))];case 1:return r=o.sent(),"Identifier"!==(n=e.left).type?[3,3]:[5,W(nt(n,t,{getVar:!0,throwErr:!1}))];case 2:return(i=o.sent())||(s=t.global().find("window").get(),i=new G(s,n.name)),[3,7];case 3:return"MemberExpression"!==n.type?[3,5]:[5,W(gt(n,t,{getVar:!0}))];case 4:return i=o.sent(),[3,7];case 5:return[5,W(dr(n,t,{feed:r}))];case 6:return[2,o.sent()];case 7:switch(e.operator){case"=":return i.set(r),[2,i.get()];case"+=":return i.set(i.get()+r),[2,i.get()];case"-=":return i.set(i.get()-r),[2,i.get()];case"*=":return i.set(i.get()*r),[2,i.get()];case"/=":return i.set(i.get()/r),[2,i.get()];case"%=":return i.set(i.get()%r),[2,i.get()];case"**=":return i.set(Math.pow(i.get(),r)),[2,i.get()];case"<<=":return i.set(i.get()<<r),[2,i.get()];case">>=":return i.set(i.get()>>r),[2,i.get()];case">>>=":return i.set(i.get()>>>r),[2,i.get()];case"|=":return i.set(i.get()|r),[2,i.get()];case"^=":return i.set(i.get()^r),[2,i.get()];case"&=":return i.set(i.get()&r),[2,i.get()];default:throw new SyntaxError("Unexpected token "+e.operator)}}}))}function mt(e,t){var r,n;return H(this,(function(i){switch(i.label){case 0:switch(e.operator){case"||":return[3,1];case"&&":return[3,5]}return[3,9];case 1:return[5,W(nr(e.left,t))];case 2:return(r=i.sent())?[3,4]:[5,W(nr(e.right,t))];case 3:r=i.sent(),i.label=4;case 4:return[2,r];case 5:return[5,W(nr(e.left,t))];case 6:return(n=i.sent())?[5,W(nr(e.right,t))]:[3,8];case 7:n=i.sent(),i.label=8;case 8:return[2,n];case 9:throw new SyntaxError("Unexpected token "+e.operator)}}))}function gt(e,t,r){var n,i,o,a,l,u,c,p,h,d;return void 0===r&&(r={}),H(this,(function(f){switch(f.label){case 0:return n=r.getObj,i=void 0!==n&&n,o=r.getVar,a=void 0!==o&&o,"Super"!==e.object.type?[3,2]:[5,W(kt(e.object,t,{getProto:!0}))];case 1:return l=f.sent(),[3,4];case 2:return[5,W(nr(e.object,t))];case 3:l=f.sent(),f.label=4;case 4:return i?[2,l]:e.computed?[5,W(nr(e.property,t))]:[3,6];case 5:return u=f.sent(),[3,7];case 6:u=e.property.name,f.label=7;case 7:return a?(c=y(l,u),"Super"===e.object.type&&c?(d=t.find("this").get(),p=C(u),s(d,p,{set:c}),[2,new G(d,p)]):[2,new G(l,u)]):(h=g(l,u),"Super"===e.object.type&&h?(d=t.find("this").get(),[2,h.call(d)]):[2,l[u]])}}))}function yt(e,t){var r;return H(this,(function(n){switch(n.label){case 0:return[5,W(nr(e.test,t))];case 1:return n.sent()?[5,W(nr(e.consequent,t))]:[3,3];case 2:return r=n.sent(),[3,5];case 3:return[5,W(nr(e.alternate,t))];case 4:r=n.sent(),n.label=5;case 5:return[2,r]}}))}function vt(e,t){var r,n,i,s,o,a,l,u,c,p,h,d;return H(this,(function(f){switch(f.label){case 0:return"MemberExpression"!==e.callee.type?[3,5]:[5,W(gt(e.callee,t,{getObj:!0}))];case 1:return n=f.sent(),i=void 0,e.callee.computed?[5,W(nr(e.callee.property,t))]:[3,3];case 2:return i=f.sent(),[3,4];case 3:i=e.callee.property.name,f.label=4;case 4:if("Super"===e.callee.object.type?(s=t.find("this").get(),r=n[i].bind(s)):r=n[i],"function"!=typeof r)throw new TypeError(i+" is not a function");if(r[B])throw new TypeError("Class constructor "+i+" cannot be invoked without 'new'");return[3,7];case 5:return n=t.find("this").get(),[5,W(nr(e.callee,t))];case 6:if("function"!=typeof(r=f.sent())||"Super"!==e.callee.type&&r[B]){if("Identifier"===e.callee.type)o=e.callee.name;else try{o=JSON.stringify(r)}catch(Sr){o=""+r}throw"function"!=typeof r?new TypeError(o+" is not a function"):new TypeError("Class constructor "+o+" cannot be invoked without 'new'")}f.label=7;case 7:a=[],l=0,f.label=8;case 8:return l<e.arguments.length?"SpreadElement"!==(u=e.arguments[l]).type?[3,10]:(p=(c=a).concat,[5,W(Mt(u,t))]):[3,13];case 9:return a=p.apply(c,[f.sent()]),[3,12];case 10:return d=(h=a).push,[5,W(nr(u,t))];case 11:d.apply(h,[f.sent()]),f.label=12;case 12:return l++,[3,8];case 13:if("Super"===e.callee.type){if(t.find(q).get())throw new ReferenceError("Super constructor may only be called once");t.find(q).set(!0)}return n&&n[k]&&-1!==r.toString().indexOf("[native code]")?[2,r.apply(n[k],a)]:[2,r.apply(n,a)]}}))}function bt(e,t){var r,n,i,s,o,a,l,u,c;return H(this,(function(p){switch(p.label){case 0:return[5,W(nr(e.callee,t))];case 1:if("function"!=typeof(r=p.sent())){if("Identifier"===e.callee.type)n=e.callee.name;else try{n=JSON.stringify(r)}catch(Sr){n=""+r}throw new TypeError(n+" is not a constructor")}if(r[$])throw new TypeError((r.name||"(intermediate value)")+" is not a constructor");i=[],s=0,p.label=2;case 2:return s<e.arguments.length?"SpreadElement"!==(o=e.arguments[s]).type?[3,4]:(l=(a=i).concat,[5,W(Mt(o,t))]):[3,7];case 3:return i=l.apply(a,[p.sent()]),[3,6];case 4:return c=(u=i).push,[5,W(nr(o,t))];case 5:c.apply(u,[p.sent()]),p.label=6;case 6:return s++,[3,2];case 7:return[2,new(r.bind.apply(r,X([void 0],i)))]}}))}function xt(e,t){return H(this,(function(e){return[2,t.find(z).get()]}))}function wt(e,t){var r,n;return H(this,(function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<e.expressions.length?[5,W(nr(e.expressions[n],t))]:[3,4];case 2:r=i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2,r]}}))}function _t(e,t){return H(this,(function(r){return[2,fr(e,t)]}))}function Et(e,t){var r,n,i,s,o,a,l;return H(this,(function(u){switch(u.label){case 0:r=e.quasis.slice(),n=e.expressions.slice(),i="",u.label=1;case 1:return(s=r.shift())?(a=i,[5,W(At(s))]):[3,5];case 2:return i=a+u.sent(),(o=n.shift())?(l=i,[5,W(nr(o,t))]):[3,4];case 3:i=l+u.sent(),u.label=4;case 4:return[3,1];case 5:return[2,i]}}))}function St(e,t){var r,n,o,a,l,u,c,p,h;return H(this,(function(d){switch(d.label){case 0:return[5,W(nr(e.tag,t))];case 1:if(r=d.sent(),n=e.quasi.quasis,o=n.map((function(e){return e.value.cooked})),a=n.map((function(e){return e.value.raw})),s(o,"raw",{value:i(a)}),l=e.quasi.expressions,u=[],!l)return[3,5];c=0,d.label=2;case 2:return c<l.length?(h=(p=u).push,[5,W(nr(l[c],t))]):[3,5];case 3:h.apply(p,[d.sent()]),d.label=4;case 4:return c++,[3,2];case 5:return[2,r.apply(void 0,X([i(o)],u))]}}))}function At(e,t){return H(this,(function(t){return[2,e.value.raw]}))}function Nt(e,t){var r,n;return H(this,(function(i){switch(i.label){case 0:return e.id&&e.id.name?(r=new V(t),[5,W(mr(e,r))]):[3,2];case 1:return n=i.sent(),r.const(e.id.name,n),[2,n];case 2:return[5,W(mr(e,t))];case 3:return[2,i.sent()]}}))}function kt(e,t,r){var n,i,s;return void 0===r&&(r={}),H(this,(function(e){return n=r.getProto,i=void 0!==n&&n,s=t.find(L).get(),[2,i?s.prototype:s]}))}function Mt(e,t){return H(this,(function(r){switch(r.label){case 0:return[5,W(nr(e.argument,t))];case 1:return[2,r.sent()]}}))}function Ct(e,t){var r,n;return H(this,(function(i){switch(i.label){case 0:return[5,W(nr(e.argument,t))];case 1:return r=i.sent(),e.delegate?[5,W(r)]:[3,3];case 2:return n=i.sent(),[3,5];case 3:return[4,r];case 4:n=i.sent(),i.label=5;case 5:return[2,n]}}))}function Tt(e,t){var r;return H(this,(function(n){switch(n.label){case 0:return r=I,[5,W(nr(e.argument,t))];case 1:return r.RES=n.sent(),[4,I];case 2:return[2,n.sent()]}}))}var Ot=Object.freeze({__proto__:null,ThisExpression:at,ArrayExpression:lt,ObjectExpression:ut,FunctionExpression:ct,UnaryExpression:pt,UpdateExpression:ht,BinaryExpression:dt,AssignmentExpression:ft,LogicalExpression:mt,MemberExpression:gt,ConditionalExpression:yt,CallExpression:vt,NewExpression:bt,MetaProperty:xt,SequenceExpression:wt,ArrowFunctionExpression:_t,TemplateLiteral:Et,TaggedTemplateExpression:St,TemplateElement:At,ClassExpression:Nt,Super:kt,SpreadElement:Mt,YieldExpression:Ct,AwaitExpression:Tt});function It(e,t){return H(this,(function(r){switch(r.label){case 0:return[5,W(nr(e.expression,t))];case 1:return r.sent(),[2]}}))}function Pt(e,t,r){var n,i,s,o,a,l,u;return void 0===r&&(r={}),H(this,(function(c){switch(c.label){case 0:return n=r.invasived,i=void 0!==n&&n,s=r.hoisted,o=void 0!==s&&s,a=i?t:new V(t),o?[3,2]:[5,W(pr(e,a,{onlyBlock:!0}))];case 1:c.sent(),c.label=2;case 2:l=0,c.label=3;case 3:return l<e.body.length?[5,W(nr(e.body[l],a))]:[3,6];case 4:if((u=c.sent())===R||u===D||u===P)return[2,u];c.label=5;case 5:return l++,[3,3];case 6:return[2]}}))}function Dt(){return H(this,(function(e){return[2]}))}function Rt(){return H(this,(function(e){return[2]}))}function Lt(e,t){var r,n;return H(this,(function(i){switch(i.label){case 0:return r=P,e.argument?[5,W(nr(e.argument,t))]:[3,2];case 1:return n=i.sent(),[3,3];case 2:n=void 0,i.label=3;case 3:return r.RES=n,[2,P]}}))}function qt(){return H(this,(function(e){return[2,R]}))}function $t(){return H(this,(function(e){return[2,D]}))}function Bt(e,t){return H(this,(function(r){switch(r.label){case 0:return[5,W(nr(e.test,t))];case 1:return r.sent()?[5,W(nr(e.consequent,t))]:[3,3];case 2:case 4:return[2,r.sent()];case 3:return[5,W(nr(e.alternate,t))]}}))}function zt(e,t){var r,n,i,s,o,a,l;return H(this,(function(u){switch(u.label){case 0:return[5,W(nr(e.discriminant,t))];case 1:r=u.sent(),n=!1,i=0,u.label=2;case 2:return i<e.cases.length?(s=e.cases[i],(o=!n)?(a=!s.test)?[3,4]:[5,W(nr(s.test,t))]:[3,5]):[3,8];case 3:a=u.sent()===r,u.label=4;case 4:o=a,u.label=5;case 5:return o&&(n=!0),n?[5,W(Ft(s,t))]:[3,7];case 6:if((l=u.sent())===R)return[3,8];if(l===D||l===P)return[2,l];u.label=7;case 7:return i++,[3,2];case 8:return[2]}}))}function Ft(e,t){var r,n;return H(this,(function(i){switch(i.label){case 0:r=0,i.label=1;case 1:return r<e.consequent.length?[5,W(nr(e.consequent[r],t))]:[3,4];case 2:if((n=i.sent())===R||n===D||n===P)return[2,n];i.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}function Ut(e,t){return H(this,(function(r){switch(r.label){case 0:return[5,W(nr(e.argument,t))];case 1:throw r.sent()}}))}function jt(e,t){var r,n,i,s,o;return H(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,9,12]),[5,W(Pt(e.block,t))];case 1:return[2,a.sent()];case 2:return r=a.sent(),e.handler?(n=new V(t),(i=e.handler.param)?"Identifier"!==i.type?[3,3]:(s=i.name,n.var(s,r),[3,5]):[3,5]):[3,7];case 3:return[5,W(dr(i,t,{feed:r}))];case 4:a.sent(),a.label=5;case 5:return[5,W(Gt(e.handler,n))];case 6:return[2,a.sent()];case 7:throw r;case 8:return[3,12];case 9:return e.finalizer?[5,W(Pt(e.finalizer,t))]:[3,11];case 10:if((o=a.sent())===R||o===D||o===P)return[2,o];a.label=11;case 11:return[7];case 12:return[2]}}))}function Gt(e,t){return H(this,(function(r){switch(r.label){case 0:return[5,W(Pt(e.body,t,{invasived:!0}))];case 1:return[2,r.sent()]}}))}function Vt(e,t){var r;return H(this,(function(n){switch(n.label){case 0:return[5,W(nr(e.test,t))];case 1:return n.sent()?[5,W(nr(e.body,t))]:[3,3];case 2:return(r=n.sent())===R?[3,3]:r===D?[3,0]:r===P?[2,r]:[3,0];case 3:return[2]}}))}function Ht(e,t){var r;return H(this,(function(n){switch(n.label){case 0:return[5,W(nr(e.body,t))];case 1:if((r=n.sent())===R)return[3,4];if(r===D)return[3,2];if(r===P)return[2,r];n.label=2;case 2:return[5,W(nr(e.test,t))];case 3:if(n.sent())return[3,0];n.label=4;case 4:return[2]}}))}function Wt(e,t){var r,n,i,s;return H(this,(function(o){switch(o.label){case 0:return r=new V(t),[5,W(nr(e.init,r))];case 1:o.sent(),o.label=2;case 2:return e.test?[5,W(nr(e.test,r))]:[3,4];case 3:return n=o.sent(),[3,5];case 4:n=!0,o.label=5;case 5:return n?(i=new V(r),s=void 0,"BlockStatement"!==e.body.type?[3,7]:[5,W(Pt(e.body,i,{invasived:!0}))]):[3,12];case 6:return s=o.sent(),[3,9];case 7:return[5,W(nr(e.body,i))];case 8:s=o.sent(),o.label=9;case 9:if(s===R)return[3,12];if(s===D)return[3,10];if(s===P)return[2,s];o.label=10;case 10:return[5,W(nr(e.update,r))];case 11:return o.sent(),[3,2];case 12:return[2]}}))}function Yt(e,t){var r,n,i,s,o;return H(this,(function(a){switch(a.label){case 0:return r=[],[5,W(nr(e.right,t))];case 1:for(n in a.sent())r.push(n);i=0,a.label=2;case 2:return i<r.length?(s=r[i],[5,W(gr(e,t,{value:s}))]):[3,5];case 3:if((o=a.sent())===R)return[3,5];if(o===D)return[3,4];if(o===P)return[2,o];a.label=4;case 4:return i++,[3,2];case 5:return[2]}}))}function Xt(e,t){var r,n,i,s,o,a,l,u,c,p;return H(this,(function(h){switch(h.label){case 0:return[5,W(nr(e.right,t))];case 1:return r=h.sent(),e.await?(n=T(r),i=void 0,I.RES=n.next(),[4,I]):[3,8];case 2:i=h.sent(),h.label=3;case 3:return i.done?[3,7]:[5,W(gr(e,t,{value:i.value}))];case 4:if((l=h.sent())===R)return[3,7];if(l===D)return[3,5];if(l===P)return[2,l];h.label=5;case 5:return I.RES=n.next(),[4,I];case 6:return i=h.sent(),[3,3];case 7:return[3,15];case 8:h.trys.push([8,13,14,15]),s=W(r),o=s.next(),h.label=9;case 9:return o.done?[3,12]:(a=o.value,[5,W(gr(e,t,{value:a}))]);case 10:if((l=h.sent())===R)return[3,12];if(l===D)return[3,11];if(l===P)return[2,l];h.label=11;case 11:return o=s.next(),[3,9];case 12:return[3,15];case 13:return u=h.sent(),c={error:u},[3,15];case 14:try{o&&!o.done&&(p=s.return)&&p.call(s)}finally{if(c)throw c.error}return[7];case 15:return[2]}}))}var Zt=Object.freeze({__proto__:null,ExpressionStatement:It,BlockStatement:Pt,EmptyStatement:Dt,DebuggerStatement:Rt,ReturnStatement:Lt,BreakStatement:qt,ContinueStatement:$t,IfStatement:Bt,SwitchStatement:zt,SwitchCase:Ft,ThrowStatement:Ut,TryStatement:jt,CatchClause:Gt,WhileStatement:Vt,DoWhileStatement:Ht,ForStatement:Wt,ForInStatement:Yt,ForOfStatement:Xt});function Qt(e,t,r){var n,i,s,o,a,l,u,c,p,h,d,f,m,g,y;return void 0===r&&(r={}),H(this,(function(v){switch(v.label){case 0:n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,l=void 0!==a&&a,u=r.feed,c=void 0===u?{}:u,p=[],h=0,v.label=1;case 1:return h<e.properties.length?(d=e.properties[h],o?l||"var"===i?"Property"!==d.type?[3,5]:"Identifier"!==(m=d.value).type?[3,2]:(t[i](m.name,l?U:"var"===i?F:void 0),[3,4]):[3,7]:[3,8]):[3,18];case 2:return[5,W(dr(m,t,{kind:i,hoist:o,onlyBlock:l}))];case 3:v.sent(),v.label=4;case 4:return[3,7];case 5:return[5,W(Jt(d,t,{kind:i,hoist:o,onlyBlock:l}))];case 6:v.sent(),v.label=7;case 7:return[3,17];case 8:return"Property"!==d.type?[3,15]:(f=void 0,d.computed?[5,W(nr(d.key,t))]:[3,10]);case 9:return f=v.sent(),[3,11];case 10:f=d.key.name,v.label=11;case 11:return p.push(f),"Identifier"!==(m=d.value).type?[3,12]:(t[i](m.name,c[f]),[3,14]);case 12:return[5,W(dr(m,t,{kind:i,feed:c[f]}))];case 13:v.sent(),v.label=14;case 14:return[3,17];case 15:for(g=w({},c),y=0;y<p.length;y++)delete g[p[y]];return[5,W(Jt(d,t,{kind:i,feed:g}))];case 16:v.sent(),v.label=17;case 17:return h++,[3,1];case 18:return[2]}}))}function Kt(e,t,r){var n,i,s,o,a,l,u,c,p,h,d;return void 0===r&&(r={}),H(this,(function(f){switch(f.label){case 0:n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,l=r.feed,u=void 0===l?[]:l,c=[],p=0,f.label=1;case 1:return p<e.elements.length?(h=e.elements[p])?s?a||"var"===n?"Identifier"!==h.type?[3,2]:(t[n](h.name,a?U:"var"===n?F:void 0),[3,4]):[3,4]:[3,5]:[3,13]:[3,14];case 2:return[5,W(dr(h,t,{kind:n,hoist:s,onlyBlock:a}))];case 3:f.sent(),f.label=4;case 4:return[3,13];case 5:return"Identifier"!==h.type?[3,9]:n?(t[n](h.name,u[p]),[3,8]):[3,6];case 6:return[5,W(nt(h,t,{getVar:!0}))];case 7:(d=f.sent()).set(u[p]),c.push(d.get()),f.label=8;case 8:return[3,13];case 9:return"RestElement"!==h.type?[3,11]:[5,W(Jt(h,t,{kind:n,feed:u.slice(p)}))];case 10:return f.sent(),[3,13];case 11:return[5,W(dr(h,t,{kind:n,feed:u[p]}))];case 12:f.sent(),f.label=13;case 13:return p++,[3,1];case 14:return c.length?[2,c]:[2]}}))}function Jt(e,t,r){var n,i,s,o,a,l,u,c;return void 0===r&&(r={}),H(this,(function(p){switch(p.label){case 0:return n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,l=r.feed,u=void 0===l?[]:l,c=e.argument,s?a||"var"===n?"Identifier"!==c.type?[3,1]:(t[n](c.name,a?U:"var"===n?F:void 0),[3,3]):[3,3]:[3,4];case 1:return[5,W(dr(c,t,{kind:n,hoist:s,onlyBlock:a}))];case 2:p.sent(),p.label=3;case 3:return[3,10];case 4:return"Identifier"!==c.type?[3,8]:n?(t[n](c.name,u),[3,7]):[3,5];case 5:return[5,W(nt(c,t,{getVar:!0}))];case 6:p.sent().set(u),p.label=7;case 7:return[3,10];case 8:return[5,W(dr(c,t,{kind:n,feed:u}))];case 9:p.sent(),p.label=10;case 10:return[2]}}))}function er(e,t,r){var n,i,s,o,a,l,u,c,p,h;return void 0===r&&(r={}),H(this,(function(d){switch(d.label){case 0:return n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,l=void 0!==a&&a,void 0!==(u=r.feed)?[3,2]:[5,W(nr(e.right,t))];case 1:return p=d.sent(),[3,3];case 2:p=u,d.label=3;case 3:return c=p,h=e.left,o?l||"var"===i?"Identifier"!==h.type?[3,4]:(t[i](h.name,l?U:"var"===i?F:void 0),[3,6]):[3,6]:[3,7];case 4:return[5,W(dr(h,t,{kind:i,hoist:o,onlyBlock:l}))];case 5:d.sent(),d.label=6;case 6:return[3,10];case 7:return"Identifier"!==h.type?[3,8]:(t[i](h.name,c),[3,10]);case 8:return[5,W(dr(h,t,{kind:i,feed:c}))];case 9:d.sent(),d.label=10;case 10:return[2]}}))}var tr,rr=Object.freeze({__proto__:null,ObjectPattern:Qt,ArrayPattern:Kt,RestElement:Jt,AssignmentPattern:er});function nr(e,t){var r;return H(this,(function(i){switch(i.label){case 0:return e?(tr||(tr=w({},n,Ot,it,Zt,ot,rr)),(r=tr[e.type])?[5,W(r(e,t))]:[3,2]):[2];case 1:return[2,i.sent()];case 2:throw new Error(e.type+" isn't implemented")}}))}function ir(e,t){return H(this,(function(r){return t.func(e.id.name,fr(e,t)),[2]}))}function sr(e,t,r){var n;return void 0===r&&(r={}),H(this,(function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<e.declarations.length?[5,W(or(e.declarations[n],t,w({kind:e.kind},r)))]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}function or(e,t,r){var n,i,o,a,l,u,c,p,h,d,f;return void 0===r&&(r={}),H(this,(function(m){switch(m.label){case 0:return n=r.kind,i=void 0===n?"var":n,o=r.hoist,a=void 0!==o&&o,l=r.onlyBlock,u=void 0!==l&&l,c=r.feed,a?u||"var"===i?"Identifier"!==e.id.type?[3,1]:(t[i](e.id.name,u?U:"var"===i?F:void 0),[3,3]):[3,3]:[3,4];case 1:return[5,W(dr(e.id,t,{kind:i,hoist:a,onlyBlock:u}))];case 2:m.sent(),m.label=3;case 3:return[3,10];case 4:return(p="feed"in r)?(d=c,[3,7]):[3,5];case 5:return[5,W(nr(e.init,t))];case 6:d=m.sent(),m.label=7;case 7:return h=d,"Identifier"!==e.id.type?[3,8]:(f=e.id.name,"var"!==i||e.init||p?t[i](f,h):t.var(f,F),e.init&&-1!==["ClassExpression","FunctionExpression","ArrowFunctionExpression"].indexOf(e.init.type)&&!h.name&&s(h,"name",{value:f,configurable:!0}),[3,10]);case 8:return[5,W(dr(e.id,t,{kind:i,feed:h}))];case 9:m.sent(),m.label=10;case 10:return[2]}}))}function ar(e,t){var r,n,i;return H(this,(function(s){switch(s.label){case 0:return n=(r=t).func,i=[e.id.name],[5,W(mr(e,t))];case 1:return n.apply(r,i.concat([s.sent()])),[2]}}))}function lr(e,t,r){var n,i,s;return void 0===r&&(r={}),H(this,(function(o){switch(o.label){case 0:n=r.klass,i=r.superClass,s=0,o.label=1;case 1:return s<e.body.length?[5,W(ur(e.body[s],t,{klass:n,superClass:i}))]:[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}function ur(e,t,r){var n,i,a,l,u,c;return void 0===r&&(r={}),H(this,(function(p){switch(p.label){case 0:return n=r.klass,i=r.superClass,e.computed?[5,W(nr(e.key,t))]:[3,2];case 1:return a=p.sent(),[3,3];case 2:if("Identifier"!==e.key.type)throw new SyntaxError("Unexpected token");a=e.key.name,p.label=3;case 3:switch(l=e.static?n:n.prototype,u=fr(e.value,t,{superClass:i}),e.kind){case"constructor":break;case"method":s(l,a,{value:u,writable:!0,configurable:!0});break;case"get":c=o(l,a),s(l,a,{get:u,set:c&&c.set,configurable:!0});break;case"set":c=o(l,a),s(l,a,{get:c&&c.get,set:u,configurable:!0});break;default:throw new SyntaxError("Unexpected token")}return[2]}}))}function cr(e,t){void 0===t&&(t={});var r=t.res,n=t.err,i=t.ret,s=t.fullRet;return new Promise((function(o,a){if("ret"in t)return o(e.return(i));function l(t){var r;try{r=e.next(t)}catch(n){return a(n)}return c(r),null}function u(t){var r;try{r=e.throw(t)}catch(n){return a(n)}c(r)}function c(e){if(e.done)return o(s?e:e.value);if(e.value!==I)return o(e);var t=e.value.RES;return(t&&"function"===t.then?t:Promise.resolve(t)).then(l,u)}"err"in t?u(n):l(r)}))}function pr(e,t,r){var n,i,s,o,a,l;return void 0===r&&(r={}),H(this,(function(u){switch(u.label){case 0:n=r.onlyBlock,i=void 0!==n&&n,s=[],o=[],l=0,u.label=1;case 1:return l<e.body.length?"FunctionDeclaration"!==(a=e.body[l]).type?[3,2]:(s.push(a),o.push(l),[3,6]):[3,7];case 2:return"VariableDeclaration"!==a.type||-1===["const","let"].indexOf(a.kind)?[3,4]:[5,W(sr(a,t,{hoist:!0,onlyBlock:!0}))];case 3:return u.sent(),[3,6];case 4:return i?[3,6]:[5,W(hr(a,t))];case 5:u.sent(),u.label=6;case 6:return l++,[3,1];case 7:if(o.length){for(l=o.length-1;l>-1;l--)e.body.splice(o[l],1);e.body=s.concat(e.body)}return[2]}}))}function hr(e,t){var r,n,i,s,o;return H(this,(function(a){switch(a.label){case 0:switch(e.type){case"VariableDeclaration":return[3,1];case"ForInStatement":case"ForOfStatement":return[3,3];case"ForStatement":return[3,5];case"WhileStatement":case"DoWhileStatement":return[3,7];case"IfStatement":return[3,9];case"BlockStatement":return[3,13];case"SwitchStatement":return[3,18];case"TryStatement":return[3,25]}return[3,38];case 1:return[5,W(sr(e,t,{hoist:!0}))];case 2:return a.sent(),[3,38];case 3:return"VariableDeclaration"!==e.left.type?[3,5]:[5,W(sr(e.left,t,{hoist:!0}))];case 4:a.sent(),a.label=5;case 5:return"ForStatement"!==e.type||"VariableDeclaration"!==e.init.type?[3,7]:[5,W(sr(e.init,t,{hoist:!0}))];case 6:a.sent(),a.label=7;case 7:return[5,W(hr(e.body,t))];case 8:return a.sent(),[3,38];case 9:return[5,W(hr(e.consequent,t))];case 10:return a.sent(),e.alternate?[5,W(hr(e.alternate,t))]:[3,12];case 11:a.sent(),a.label=12;case 12:return[3,38];case 13:o=0,a.label=14;case 14:return o<e.body.length?[5,W(hr(e.body[o],t))]:[3,17];case 15:a.sent(),a.label=16;case 16:return o++,[3,14];case 17:return[3,38];case 18:o=0,a.label=19;case 19:if(!(o<e.cases.length))return[3,24];r=0,a.label=20;case 20:return r<e.cases[o].consequent.length?[5,W(hr(e.cases[o].consequent[r],t))]:[3,23];case 21:a.sent(),a.label=22;case 22:return r++,[3,20];case 23:return o++,[3,19];case 24:return[3,38];case 25:n=e.block.body,o=0,a.label=26;case 26:return o<n.length?[5,W(hr(n[o],t))]:[3,29];case 27:a.sent(),a.label=28;case 28:return o++,[3,26];case 29:if(!(i=e.handler&&e.handler.body.body))return[3,33];o=0,a.label=30;case 30:return o<i.length?[5,W(hr(i[o],t))]:[3,33];case 31:a.sent(),a.label=32;case 32:return o++,[3,30];case 33:if(!(s=e.finalizer&&e.finalizer.body))return[3,37];o=0,a.label=34;case 34:return o<s.length?[5,W(hr(s[o],t))]:[3,37];case 35:a.sent(),a.label=36;case 36:return o++,[3,34];case 37:return[3,38];case 38:return[2]}}))}function dr(e,t,r){return void 0===r&&(r={}),H(this,(function(n){switch(n.label){case 0:switch(e.type){case"ObjectPattern":return[3,1];case"ArrayPattern":return[3,3];case"RestElement":return[3,5];case"AssignmentPattern":return[3,7]}return[3,9];case 1:return[5,W(Qt(e,t,r))];case 2:case 4:case 6:case 8:return[2,n.sent()];case 3:return[5,W(Kt(e,t,r))];case 5:return[5,W(Jt(e,t,r))];case 7:return[5,W(er(e,t,r))];case 9:throw new SyntaxError("Unexpected token")}}))}function fr(e,t,r){if(void 0===r&&(r={}),!e.generator&&!e.async)return xr(e,t,r);var n,i=r.superClass,o=r.isCtor,a=e.params,l=function r(){var n,s,l,u,c,p=this&&this instanceof r?this.constructor:void 0,h=[];for(n=0;n<arguments.length;n++)h[n]=arguments[n];return H(this,(function(r){switch(r.label){case 0:s=new V(t,!0),"ArrowFunctionExpression"!==e.type&&(s.const("this",this),s.let("arguments",arguments),s.const(z,p),i&&(s.const(L,i),o&&s.let(q,!1))),l=0,r.label=1;case 1:return l<a.length?"Identifier"!==(u=a[l]).type?[3,2]:(s.var(u.name,h[l]),[3,6]):[3,7];case 2:return"RestElement"!==u.type?[3,4]:[5,W(Jt(u,s,{kind:"var",feed:h.slice(l)}))];case 3:return r.sent(),[3,6];case 4:return[5,W(dr(u,s,{feed:h[l]}))];case 5:r.sent(),r.label=6;case 6:return l++,[3,1];case 7:return"BlockStatement"!==e.body.type?[3,10]:[5,W(pr(e.body,s))];case 8:return r.sent(),[5,W(Pt(e.body,s,{invasived:!0,hoisted:!0}))];case 9:return c=r.sent(),[3,12];case 10:return[5,W(nr(e.body,s))];case 11:c=r.sent(),"ArrowFunctionExpression"===e.type&&(P.RES=c,c=P),r.label=12;case 12:return c===P?[2,c.RES]:[2]}}))};return n=e.async&&e.generator?function(){var e=l.apply(this,arguments),t=Promise.resolve(),r=!1,n=function(n){return t=t.then((function(){return cr(e,w({fullRet:!0},n))})).catch((function(e){if(!r)return r=!0,Promise.reject(e)}))},i={next:function(e){return n({res:e})},throw:function(e){return n({err:e})},return:function(e){return n({ret:e})}};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i}:e.async?function(){return cr(l.apply(this,arguments))}:l,s(n,$,{value:!0}),s(n,"name",{value:e.id&&e.id.name||"",configurable:!0}),s(n,"length",{value:a.length,configurable:!0}),n}function mr(e,t){var r,n,i,o,a;return H(this,(function(l){switch(l.label){case 0:return[5,W(nr(e.superClass,t))];case 1:for(r=l.sent(),n=function(){r&&r.apply(this)},i=e.body.body,o=0;o<i.length;o++)if("constructor"===(a=i[o]).kind){n=fr(a.value,t,{superClass:r,isCtor:!0});break}return r&&b(n,r),[5,W(lr(e.body,t,{klass:n,superClass:r}))];case 2:return l.sent(),s(n,B,{value:!0}),s(n,"name",{value:e.id&&e.id.name||"",configurable:!0}),[2,n]}}))}function gr(e,t,r){var n,i,s,o;return H(this,(function(a){switch(a.label){case 0:return n=r.value,i=e.left,s=new V(t),"VariableDeclaration"!==i.type?[3,2]:[5,W(sr(i,s,{feed:n}))];case 1:return a.sent(),[3,6];case 2:return"Identifier"!==i.type?[3,4]:[5,W(Z(i,t,{getVar:!0}))];case 3:return a.sent().set(n),[3,6];case 4:return[5,W(dr(i,t,{feed:n}))];case 5:a.sent(),a.label=6;case 6:return"BlockStatement"!==e.body.type?[3,8]:[5,W(Pt(e.body,s,{invasived:!0}))];case 7:return o=a.sent(),[3,10];case 8:return[5,W(nr(e.body,s))];case 9:o=a.sent(),a.label=10;case 10:return[2,o]}}))}function yr(e,t,r){void 0===r&&(r={});for(var n=r.onlyBlock,i=void 0!==n&&n,s=[],o=[],a=0;a<e.body.length;a++){var l=e.body[a];"FunctionDeclaration"===l.type?(s.push(l),o.push(a)):"VariableDeclaration"===l.type&&-1!==["const","let"].indexOf(l.kind)?Ke(l,t,{hoist:!0,onlyBlock:!0}):i||vr(l,t)}if(o.length){for(a=o.length-1;a>-1;a--)e.body.splice(o[a],1);e.body=s.concat(e.body)}}function vr(e,t){switch(e.type){case"VariableDeclaration":Ke(e,t,{hoist:!0});break;case"ForInStatement":case"ForOfStatement":"VariableDeclaration"===e.left.type&&Ke(e.left,t,{hoist:!0});case"ForStatement":"ForStatement"===e.type&&"VariableDeclaration"===e.init.type&&Ke(e.init,t,{hoist:!0});case"WhileStatement":case"DoWhileStatement":vr(e.body,t);break;case"IfStatement":vr(e.consequent,t),e.alternate&&vr(e.alternate,t);break;case"BlockStatement":for(var r=0;r<e.body.length;r++)vr(e.body[r],t);break;case"SwitchStatement":for(r=0;r<e.cases.length;r++)for(var n=0;n<e.cases[r].consequent.length;n++)vr(e.cases[r].consequent[n],t);break;case"TryStatement":var i=e.block.body;for(r=0;r<i.length;r++)vr(i[r],t);var s=e.handler&&e.handler.body.body;if(s)for(r=0;r<s.length;r++)vr(s[r],t);var o=e.finalizer&&e.finalizer.body;if(o)for(r=0;r<o.length;r++)vr(o[r],t)}}function br(e,t,r){switch(void 0===r&&(r={}),e.type){case"ObjectPattern":return Ue(e,t,r);case"ArrayPattern":return je(e,t,r);case"RestElement":return Ge(e,t,r);case"AssignmentPattern":return Ve(e,t,r);default:throw new SyntaxError("Unexpected token")}}function xr(e,t,r){if(void 0===r&&(r={}),e.generator||e.async)return fr(e,t,r);var n=r.superClass,i=r.isCtor,o=e.params,a=function r(){for(var s=this&&this instanceof r?this.constructor:void 0,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u,c=new V(t,!0);"ArrowFunctionExpression"!==e.type&&(c.const("this",this),c.let("arguments",arguments),c.const(z,s),n&&(c.const(L,n),i&&c.let(q,!1)));for(var p=0;p<o.length;p++){var h=o[p];"Identifier"===h.type?c.var(h.name,a[p]):"RestElement"===h.type?Ge(h,c,{kind:"var",feed:a.slice(p)}):br(h,c,{feed:a[p]})}if("BlockStatement"===e.body.type?(yr(e.body,c),u=Se(e.body,c,{invasived:!0,hoisted:!0})):(u=Ze(e.body,c),"ArrowFunctionExpression"===e.type&&(P.RES=u,u=P)),u===P)return u.RES},l=a;return"ArrowFunctionExpression"===e.type&&s(l,$,{value:!0}),s(l,"name",{value:e.id&&e.id.name||"",configurable:!0}),s(l,"length",{value:o.length,configurable:!0}),l}function wr(e,t){for(var r=Ze(e.superClass,t),n=function(){r&&r.apply(this)},i=e.body.body,o=0;o<i.length;o++){var a=i[o];if("constructor"===a.kind){n=xr(a.value,t,{superClass:r,isCtor:!0});break}}return r&&b(n,r),tt(e.body,t,{klass:n,superClass:r}),s(n,B,{value:!0}),s(n,"name",{value:e.id&&e.id.name||"",configurable:!0}),n}function _r(e,t,r){var n=r.value,i=e.left,s=new V(t);return"VariableDeclaration"===i.type?Ke(i,s,{feed:n}):"Identifier"===i.type?Z(i,t,{getVar:!0}).set(n):br(i,t,{feed:n}),"BlockStatement"===e.body.type?Se(e.body,s,{invasived:!0}):Ze(e.body,s)}var Er=function(){function t(e){void 0===e&&(e={}),this.options={},this.scope=new V(null,!0),this.exports={};var t=e.ecmaVer,r=void 0===t?9:t,n=e.sandBox,i=void 0===n||n;if(-1===[3,5,6,7,8,9,10].indexOf(r-=r<2015?0:2009))throw new Error("unsupported ecmaVer");if(this.options.ecmaVersion=r,i){var s=M();this.scope.let("window",s),this.scope.let("this",s)}else this.scope.let("window",E),this.scope.let("this",E);this.scope.const("exports",this.exports={})}return t.prototype.import=function(e,t){var r;if("string"==typeof e&&((r={})[e]=t,e=r),"object"==typeof e)for(var n=u(e),i=0;i<n.length;i++){var s=n[i];this.scope.var(s,e[s])}},t.prototype.parse=function(t,r){return"function"==typeof r?r(t,w({},this.options)):e.parse(t,this.options)},t.prototype.run=function(t){var r="string"==typeof t?e.parse(t,this.options):t;yr(r,this.scope),Ze(r,this.scope)},t.version=O,t}();return Er}(r(74066))},63581:function(e,t){"use strict";var r,n,i;n=[],r=function(){function e(){return!0}function t(){return!1}function r(){}function n(){var i=[{name:"number",test:function(e){return"number"==typeof e}},{name:"string",test:function(e){return"string"==typeof e}},{name:"boolean",test:function(e){return"boolean"==typeof e}},{name:"Function",test:function(e){return"function"==typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:function(e){return"object"==typeof e&&null!==e&&e.constructor===Object}},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],s={name:"any",test:e},o=[],a=[],l={types:i,conversions:a,ignore:o};function u(e){var t=Y(l.types,(function(t){return t.name===e}));if(t)return t;if("any"===e)return s;var r=Y(l.types,(function(t){return t.name.toLowerCase()===e.toLowerCase()}));throw new TypeError('Unknown type "'+e+'"'+(r?'. Did you mean "'+r.name+'"?':""))}function c(e){return e===s?999:l.types.indexOf(e)}function p(e){var t=Y(l.types,(function(t){return t.test(e)}));if(t)return t.name;throw new TypeError("Value has unknown type. Value: "+e)}function h(e,t){if(!e.signatures)throw new TypeError("Function is no typed-function");var r;if("string"==typeof t){r=t.split(",");for(var n=0;n<r.length;n++)r[n]=r[n].trim()}else{if(!Array.isArray(t))throw new TypeError("String array or a comma separated string expected");r=t}var i=r.join(","),s=e.signatures[i];if(s)return s;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+r.join(", ")+"))")}function d(e,t){var r=p(e);if(t===r)return e;for(var n=0;n<l.conversions.length;n++){var i=l.conversions[n];if(i.from===r&&i.to===t)return i.convert(e)}throw new Error("Cannot convert from "+r+" to "+t)}function f(e){return e.map((function(e){var t=e.types.map(E);return(e.restParam?"...":"")+t.join("|")})).join(",")}function m(e,t){var r=0===e.indexOf("..."),n=(r?e.length>3?e.slice(3):"any":e).split("|").map(B).filter(z).filter($),i=O(t,n),s=n.map((function(e){var t=u(e);return{name:e,typeIndex:c(t),test:t.test,conversion:null,conversionIndex:-1}})),o=i.map((function(e){var r=u(e.from);return{name:e.from,typeIndex:c(r),test:r.test,conversion:e,conversionIndex:t.indexOf(e)}}));return{types:s.concat(o),restParam:r}}function g(e,t,r){var n=[];return""!==e.trim()&&(n=e.split(",").map(B).map((function(e,t,n){var i=m(e,r);if(i.restParam&&t!==n.length-1)throw new SyntaxError('Unexpected rest parameter "'+e+'": only allowed for the last parameter');return i}))),n.some(U)?null:{params:n,fn:t}}function y(e){var t=G(e);return!!t&&t.restParam}function v(e){return e.types.some((function(e){return null!=e.conversion}))}function b(t){if(t&&0!==t.types.length){if(1===t.types.length)return u(t.types[0].name).test;if(2===t.types.length){var r=u(t.types[0].name).test,n=u(t.types[1].name).test;return function(e){return r(e)||n(e)}}var i=t.types.map((function(e){return u(e.name).test}));return function(e){for(var t=0;t<i.length;t++)if(i[t](e))return!0;return!1}}return e}function x(e){var t,r,n;if(y(e)){var i=(t=j(e).map(b)).length,s=b(G(e)),o=function(e){for(var t=i;t<e.length;t++)if(!s(e[t]))return!1;return!0};return function(e){for(var r=0;r<t.length;r++)if(!t[r](e[r]))return!1;return o(e)&&e.length>=i+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(r=b(e[0]),function(e){return r(e[0])&&1===e.length}):2===e.length?(r=b(e[0]),n=b(e[1]),function(e){return r(e[0])&&n(e[1])&&2===e.length}):(t=e.map(b),function(e){for(var r=0;r<t.length;r++)if(!t[r](e[r]))return!1;return e.length===t.length})}function w(e,t){return t<e.params.length?e.params[t]:y(e.params)?G(e.params):null}function _(e,t,r){var n=w(e,t);return(n?r?n.types.filter(S):n.types:[]).map(E)}function E(e){return e.name}function S(e){return null===e.conversion||void 0===e.conversion}function A(e,t){var r=X(Z(e,(function(e){return _(e,t,!1)})));return-1!==r.indexOf("any")?["any"]:r}function N(e,t,r){var n,i,s,o=e||"unnamed",a=r;for(s=0;s<t.length;s++){var l=a.filter((function(e){var r=b(w(e,s));return(s<e.params.length||y(e.params))&&r(t[s])}));if(0===l.length){if((i=A(a,s)).length>0){var u=p(t[s]);return(n=new TypeError("Unexpected type of argument in function "+o+" (expected: "+i.join(" or ")+", actual: "+u+", index: "+s+")")).data={category:"wrongType",fn:o,index:s,actual:u,expected:i},n}}else a=l}var c=a.map((function(e){return y(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,c))return i=A(a,s),(n=new TypeError("Too few arguments in function "+o+" (expected: "+i.join(" or ")+", index: "+t.length+")")).data={category:"tooFewArgs",fn:o,index:t.length,expected:i},n;var h=Math.max.apply(null,c);return t.length>h?((n=new TypeError("Too many arguments in function "+o+" (expected: "+h+", actual: "+t.length+")")).data={category:"tooManyArgs",fn:o,index:t.length,expectedLength:h},n):((n=new TypeError('Arguments of type "'+t.join(", ")+'" do not match any of the defined signatures of function '+o+".")).data={category:"mismatch",actual:t.map(p)},n)}function k(e){for(var t=999,r=0;r<e.types.length;r++)S(e.types[r])&&(t=Math.min(t,e.types[r].typeIndex));return t}function M(e){for(var t=999,r=0;r<e.types.length;r++)S(e.types[r])||(t=Math.min(t,e.types[r].conversionIndex));return t}function C(e,t){var r;return 0!=(r=e.restParam-t.restParam)||0!=(r=v(e)-v(t))||0!=(r=k(e)-k(t))?r:M(e)-M(t)}function T(e,t){var r,n,i=Math.min(e.params.length,t.params.length);if(0!=(n=e.params.some(v)-t.params.some(v)))return n;for(r=0;r<i;r++)if(0!=(n=v(e.params[r])-v(t.params[r])))return n;for(r=0;r<i;r++)if(0!==(n=C(e.params[r],t.params[r])))return n;return e.params.length-t.params.length}function O(e,t){var r={};return e.forEach((function(e){-1!==t.indexOf(e.from)||-1===t.indexOf(e.to)||r[e.from]||(r[e.from]=e)})),Object.keys(r).map((function(e){return r[e]}))}function I(e,t){var r=t;if(e.some(v)){var n=y(e),i=e.map(P);r=function(){for(var e=[],r=n?arguments.length-1:arguments.length,s=0;s<r;s++)e[s]=i[s](arguments[s]);return n&&(e[r]=arguments[r].map(i[r])),t.apply(this,e)}}var s=r;if(y(e)){var o=e.length-1;s=function(){return r.apply(this,V(arguments,0,o).concat([V(arguments,o)]))}}return s}function P(e){var t,r,n,i,s=[],o=[];switch(e.types.forEach((function(e){e.conversion&&(s.push(u(e.conversion.from).test),o.push(e.conversion.convert))})),o.length){case 0:return function(e){return e};case 1:return t=s[0],n=o[0],function(e){return t(e)?n(e):e};case 2:return t=s[0],r=s[1],n=o[0],i=o[1],function(e){return t(e)?n(e):r(e)?i(e):e};default:return function(e){for(var t=0;t<o.length;t++)if(s[t](e))return o[t](e);return e}}}function D(e){var t={};return e.forEach((function(e){e.params.some(v)||R(e.params,!0).forEach((function(r){t[f(r)]=e.fn}))})),t}function R(e,t){function r(e,n,i){if(n<e.length){var s,o=e[n],a=t?o.types.filter(S):o.types;if(o.restParam){var l=a.filter(S);s=l.length<a.length?[l,a]:[a]}else s=a.map((function(e){return[e]}));return Z(s,(function(t){return r(e,n+1,i.concat([t]))}))}return[i.map((function(t,r){return{types:t,restParam:r===e.length-1&&y(e)}}))]}return r(e,0,[])}function L(e,t){for(var r=Math.max(e.params.length,t.params.length),n=0;n<r;n++)if(!W(_(e,n,!0),_(t,n,!0)))return!1;var i=e.params.length,s=t.params.length,o=y(e.params),a=y(t.params);return o?a?i===s:s>=i:a?i>=s:i===s}function q(e,n){if(0===Object.keys(n).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(n).map((function(e){return g(e,n[e],l.conversions)})).filter(F).forEach((function(e){var t=Y(i,(function(t){return L(t,e)}));if(t)throw new TypeError('Conflicting signatures "'+f(t.params)+'" and "'+f(e.params)+'".');i.push(e)}));var s=Z(i,(function(e){return(e?R(e.params,!1):[]).map((function(t){return{params:t,fn:e.fn}}))})).filter(F);s.sort(T);var o=s[0]&&s[0].params.length<=2&&!y(s[0].params),a=s[1]&&s[1].params.length<=2&&!y(s[1].params),u=s[2]&&s[2].params.length<=2&&!y(s[2].params),c=s[3]&&s[3].params.length<=2&&!y(s[3].params),p=s[4]&&s[4].params.length<=2&&!y(s[4].params),h=s[5]&&s[5].params.length<=2&&!y(s[5].params),d=o&&a&&u&&c&&p&&h,m=s.map((function(e){return x(e.params)})),v=o?b(s[0].params[0]):t,w=a?b(s[1].params[0]):t,_=u?b(s[2].params[0]):t,E=c?b(s[3].params[0]):t,S=p?b(s[4].params[0]):t,A=h?b(s[5].params[0]):t,k=o?b(s[0].params[1]):t,M=a?b(s[1].params[1]):t,C=u?b(s[2].params[1]):t,O=c?b(s[3].params[1]):t,P=p?b(s[4].params[1]):t,q=h?b(s[5].params[1]):t,$=s.map((function(e){return I(e.params,e.fn)})),B=o?$[0]:r,z=a?$[1]:r,U=u?$[2]:r,j=c?$[3]:r,G=p?$[4]:r,V=h?$[5]:r,H=o?s[0].params.length:-1,W=a?s[1].params.length:-1,X=u?s[2].params.length:-1,Q=c?s[3].params.length:-1,K=p?s[4].params.length:-1,J=h?s[5].params.length:-1,ee=d?6:0,te=s.length,re=function(){for(var t=ee;t<te;t++)if(m[t](arguments))return $[t].apply(this,arguments);throw N(e,arguments,s)},ne=function e(t,r){return arguments.length===H&&v(t)&&k(r)?B.apply(e,arguments):arguments.length===W&&w(t)&&M(r)?z.apply(e,arguments):arguments.length===X&&_(t)&&C(r)?U.apply(e,arguments):arguments.length===Q&&E(t)&&O(r)?j.apply(e,arguments):arguments.length===K&&S(t)&&P(r)?G.apply(e,arguments):arguments.length===J&&A(t)&&q(r)?V.apply(e,arguments):re.apply(e,arguments)};try{Object.defineProperty(ne,"name",{value:e})}catch(ie){}return ne.signatures=D(s),ne}function $(e){return-1===l.ignore.indexOf(e)}function B(e){return e.trim()}function z(e){return!!e}function F(e){return null!==e}function U(e){return 0===e.types.length}function j(e){return e.slice(0,e.length-1)}function G(e){return e[e.length-1]}function V(e,t,r){return Array.prototype.slice.call(e,t,r)}function H(e,t){return-1!==e.indexOf(t)}function W(e,t){for(var r=0;r<e.length;r++)if(H(t,e[r]))return!0;return!1}function Y(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return e[r]}function X(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return Object.keys(t)}function Z(e,t){return Array.prototype.concat.apply([],e.map(t))}function Q(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(("object"==typeof n.signatures||"string"==typeof n.signature)&&""!==n.name)if(""===t)t=n.name;else if(t!==n.name){var i=new Error("Function names do not match (expected: "+t+", actual: "+n.name+")");throw i.data={actual:n.name,expected:t},i}}return t}function K(e){var t,r={};function n(e,n){if(r.hasOwnProperty(e)&&n!==r[e])throw(t=new Error('Signature "'+e+'" is defined twice')).data={signature:e},t}for(var i=0;i<e.length;i++){var s=e[i];if("object"==typeof s.signatures)for(var o in s.signatures)s.signatures.hasOwnProperty(o)&&(n(o,s.signatures[o]),r[o]=s.signatures[o]);else{if("string"!=typeof s.signature)throw(t=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},t;n(s.signature,s),r[s.signature]=s}}return r}return(l=q("typed",{"string, Object":q,Object:function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return q(Q(t),e)},"...Function":function(e){return q(Q(e),K(e))},"string, ...Function":function(e,t){return q(e,K(t))}})).create=n,l.types=i,l.conversions=a,l.ignore=o,l.convert=d,l.find=h,l.addType=function(e,t){if(!e||"string"!=typeof e.name||"function"!=typeof e.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==t)for(var r=0;r<l.types.length;r++)if("Object"===l.types[r].name)return void l.types.splice(r,0,e);l.types.push(e)},l.addConversion=function(e){if(!e||"string"!=typeof e.from||"string"!=typeof e.to||"function"!=typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");l.conversions.push(e)},l}return n()},void 0===(i="function"==typeof r?r.apply(t,n):r)||(e.exports=i)},54766:(e,t,r)=>{var n,i,s;!function(o){"use strict";i=[r(80677)],n=function(e){var t=window.Slick||{};(t=function(){var t=0;function r(r,n){var i,s=this;s.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(r),appendDots:e(r),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,r){return e('<button type="button" />').text(r+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},s.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.focussed=!1,s.interrupted=!1,s.hidden="hidden",s.paused=!0,s.positionProp=null,s.respondTo=null,s.rowCount=1,s.shouldClick=!0,s.$slider=e(r),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.visibilityChange="visibilitychange",s.windowWidth=0,s.windowTimer=null,i=e(r).data("slick")||{},s.options=e.extend({},s.defaults,n,i),s.currentSlide=s.options.initialSlide,s.originalSettings=s.options,void 0!==document.mozHidden?(s.hidden="mozHidden",s.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(s.hidden="webkitHidden",s.visibilityChange="webkitvisibilitychange"),s.autoPlay=e.proxy(s.autoPlay,s),s.autoPlayClear=e.proxy(s.autoPlayClear,s),s.autoPlayIterator=e.proxy(s.autoPlayIterator,s),s.changeSlide=e.proxy(s.changeSlide,s),s.clickHandler=e.proxy(s.clickHandler,s),s.selectHandler=e.proxy(s.selectHandler,s),s.setPosition=e.proxy(s.setPosition,s),s.swipeHandler=e.proxy(s.swipeHandler,s),s.dragHandler=e.proxy(s.dragHandler,s),s.keyHandler=e.proxy(s.keyHandler,s),s.instanceUid=t++,s.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,s.registerBreakpoints(),s.init(!0)}return r}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,r,n){var i=this;if("boolean"==typeof r)n=r,r=null;else if(r<0||r>=i.slideCount)return!1;i.unload(),"number"==typeof r?0===r&&0===i.$slides.length?e(t).appendTo(i.$slideTrack):n?e(t).insertBefore(i.$slides.eq(r)):e(t).insertAfter(i.$slides.eq(r)):!0===n?e(t).prependTo(i.$slideTrack):e(t).appendTo(i.$slideTrack),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slides.each((function(t,r){e(r).attr("data-slick-index",t)})),i.$slidesCache=i.$slides,i.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,r){var n={},i=this;i.animateHeight(),!0===i.options.rtl&&!1===i.options.vertical&&(t=-t),!1===i.transformsEnabled?!1===i.options.vertical?i.$slideTrack.animate({left:t},i.options.speed,i.options.easing,r):i.$slideTrack.animate({top:t},i.options.speed,i.options.easing,r):!1===i.cssTransitions?(!0===i.options.rtl&&(i.currentLeft=-i.currentLeft),e({animStart:i.currentLeft}).animate({animStart:t},{duration:i.options.speed,easing:i.options.easing,step:function(e){e=Math.ceil(e),!1===i.options.vertical?(n[i.animType]="translate("+e+"px, 0px)",i.$slideTrack.css(n)):(n[i.animType]="translate(0px,"+e+"px)",i.$slideTrack.css(n))},complete:function(){r&&r.call()}})):(i.applyTransition(),t=Math.ceil(t),!1===i.options.vertical?n[i.animType]="translate3d("+t+"px, 0px, 0px)":n[i.animType]="translate3d(0px,"+t+"px, 0px)",i.$slideTrack.css(n),r&&setTimeout((function(){i.disableTransition(),r.call()}),i.options.speed))},t.prototype.getNavTarget=function(){var t=this,r=t.options.asNavFor;return r&&null!==r&&(r=e(r).not(t.$slider)),r},t.prototype.asNavFor=function(t){var r=this.getNavTarget();null!==r&&"object"==typeof r&&r.each((function(){var r=e(this).slick("getSlick");r.unslicked||r.slideHandler(t,!0)}))},t.prototype.applyTransition=function(e){var t=this,r={};!1===t.options.fade?r[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:r[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(r):t.$slides.eq(e).css(r)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(!1===e.options.infinite&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1==0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,r,n=this;if(!0===n.options.dots&&n.slideCount>n.options.slidesToShow){for(n.$slider.addClass("slick-dotted"),r=e("<ul />").addClass(n.options.dotsClass),t=0;t<=n.getDotCount();t+=1)r.append(e("<li />").append(n.options.customPaging.call(this,n,t)));n.$dots=r.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each((function(t,r){e(r).attr("data-slick-index",t).data("originalStyling",e(r).attr("style")||"")})),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0!==t.options.centerMode&&!0!==t.options.swipeToSlide||(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,r,n,i,s,o,a=this;if(n=document.createDocumentFragment(),s=a.$slider.children(),a.options.rows>0){for(o=a.options.slidesPerRow*a.options.rows,i=Math.ceil(s.length/o),e=0;e<i;e++){var l=document.createElement("div");for(t=0;t<a.options.rows;t++){var u=document.createElement("div");for(r=0;r<a.options.slidesPerRow;r++){var c=e*o+(t*a.options.slidesPerRow+r);s.get(c)&&u.appendChild(s.get(c))}l.appendChild(u)}n.appendChild(l)}a.$slider.empty().append(n),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,r){var n,i,s,o=this,a=!1,l=o.$slider.width(),u=window.innerWidth||e(window).width();if("window"===o.respondTo?s=u:"slider"===o.respondTo?s=l:"min"===o.respondTo&&(s=Math.min(u,l)),o.options.responsive&&o.options.responsive.length&&null!==o.options.responsive){for(n in i=null,o.breakpoints)o.breakpoints.hasOwnProperty(n)&&(!1===o.originalSettings.mobileFirst?s<o.breakpoints[n]&&(i=o.breakpoints[n]):s>o.breakpoints[n]&&(i=o.breakpoints[n]));null!==i?null!==o.activeBreakpoint?(i!==o.activeBreakpoint||r)&&(o.activeBreakpoint=i,"unslick"===o.breakpointSettings[i]?o.unslick(i):(o.options=e.extend({},o.originalSettings,o.breakpointSettings[i]),!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),a=i):(o.activeBreakpoint=i,"unslick"===o.breakpointSettings[i]?o.unslick(i):(o.options=e.extend({},o.originalSettings,o.breakpointSettings[i]),!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t)),a=i):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,!0===t&&(o.currentSlide=o.options.initialSlide),o.refresh(t),a=i),t||!1===a||o.$slider.trigger("breakpoint",[o,a])}},t.prototype.changeSlide=function(t,r){var n,i,s=this,o=e(t.currentTarget);switch(o.is("a")&&t.preventDefault(),o.is("li")||(o=o.closest("li")),n=s.slideCount%s.options.slidesToScroll!=0?0:(s.slideCount-s.currentSlide)%s.options.slidesToScroll,t.data.message){case"previous":i=0===n?s.options.slidesToScroll:s.options.slidesToShow-n,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide-i,!1,r);break;case"next":i=0===n?s.options.slidesToScroll:n,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide+i,!1,r);break;case"index":var a=0===t.data.index?0:t.data.index||o.index()*s.options.slidesToScroll;s.slideHandler(s.checkNavigable(a),!1,r),o.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,r;if(r=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var n in t){if(e<t[n]){e=r;break}r=t[n]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>0&&((e=t.$slides.children().children()).removeAttr("style"),t.$slider.empty().append(e))},t.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var r=this;r.autoPlayClear(),r.touchObject={},r.cleanUpEvents(),e(".slick-cloned",r.$slider).detach(),r.$dots&&r.$dots.remove(),r.$prevArrow&&r.$prevArrow.length&&(r.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),r.htmlExpr.test(r.options.prevArrow)&&r.$prevArrow.remove()),r.$nextArrow&&r.$nextArrow.length&&(r.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),r.htmlExpr.test(r.options.nextArrow)&&r.$nextArrow.remove()),r.$slides&&(r.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each((function(){e(this).attr("style",e(this).data("originalStyling"))})),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.detach(),r.$list.detach(),r.$slider.append(r.$slides)),r.cleanUpRows(),r.$slider.removeClass("slick-slider"),r.$slider.removeClass("slick-initialized"),r.$slider.removeClass("slick-dotted"),r.unslicked=!0,t||r.$slider.trigger("destroy",[r])},t.prototype.disableTransition=function(e){var t=this,r={};r[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(r):t.$slides.eq(e).css(r)},t.prototype.fadeSlide=function(e,t){var r=this;!1===r.cssTransitions?(r.$slides.eq(e).css({zIndex:r.options.zIndex}),r.$slides.eq(e).animate({opacity:1},r.options.speed,r.options.easing,t)):(r.applyTransition(e),r.$slides.eq(e).css({opacity:1,zIndex:r.options.zIndex}),t&&setTimeout((function(){r.disableTransition(e),t.call()}),r.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;!1===t.cssTransitions?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",(function(r){r.stopImmediatePropagation();var n=e(this);setTimeout((function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())}),0)}))},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){return this.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,r=0,n=0;if(!0===e.options.infinite)if(e.slideCount<=e.options.slidesToShow)++n;else for(;t<e.slideCount;)++n,t=r+e.options.slidesToScroll,r+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)n=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++n,t=r+e.options.slidesToScroll,r+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return n-1},t.prototype.getLeft=function(e){var t,r,n,i,s=this,o=0;return s.slideOffset=0,r=s.$slides.first().outerHeight(!0),!0===s.options.infinite?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideWidth*s.options.slidesToShow*-1,i=-1,!0===s.options.vertical&&!0===s.options.centerMode&&(2===s.options.slidesToShow?i=-1.5:1===s.options.slidesToShow&&(i=-2)),o=r*s.options.slidesToShow*i),s.slideCount%s.options.slidesToScroll!=0&&e+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(e>s.slideCount?(s.slideOffset=(s.options.slidesToShow-(e-s.slideCount))*s.slideWidth*-1,o=(s.options.slidesToShow-(e-s.slideCount))*r*-1):(s.slideOffset=s.slideCount%s.options.slidesToScroll*s.slideWidth*-1,o=s.slideCount%s.options.slidesToScroll*r*-1))):e+s.options.slidesToShow>s.slideCount&&(s.slideOffset=(e+s.options.slidesToShow-s.slideCount)*s.slideWidth,o=(e+s.options.slidesToShow-s.slideCount)*r),s.slideCount<=s.options.slidesToShow&&(s.slideOffset=0,o=0),!0===s.options.centerMode&&s.slideCount<=s.options.slidesToShow?s.slideOffset=s.slideWidth*Math.floor(s.options.slidesToShow)/2-s.slideWidth*s.slideCount/2:!0===s.options.centerMode&&!0===s.options.infinite?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:!0===s.options.centerMode&&(s.slideOffset=0,s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),t=!1===s.options.vertical?e*s.slideWidth*-1+s.slideOffset:e*r*-1+o,!0===s.options.variableWidth&&(n=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow),t=!0===s.options.rtl?n[0]?-1*(s.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,!0===s.options.centerMode&&(n=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow+1),t=!0===s.options.rtl?n[0]?-1*(s.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,t+=(s.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){return this.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,r=0,n=0,i=[];for(!1===t.options.infinite?e=t.slideCount:(r=-1*t.options.slidesToScroll,n=-1*t.options.slidesToScroll,e=2*t.slideCount);r<e;)i.push(r),r=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return i},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,r,n=this;return r=!0===n.options.centerMode?n.slideWidth*Math.floor(n.options.slidesToShow/2):0,!0===n.options.swipeToSlide?(n.$slideTrack.find(".slick-slide").each((function(i,s){if(s.offsetLeft-r+e(s).outerWidth()/2>-1*n.swipeLeft)return t=s,!1})),Math.abs(e(t).attr("data-slick-index")-n.currentSlide)||1):n.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var r=this;e(r.$slider).hasClass("slick-initialized")||(e(r.$slider).addClass("slick-initialized"),r.buildRows(),r.buildOut(),r.setProps(),r.startLoad(),r.loadSlider(),r.initializeEvents(),r.updateArrows(),r.updateDots(),r.checkResponsive(!0),r.focusHandler()),t&&r.$slider.trigger("init",[r]),!0===r.options.accessibility&&r.initADA(),r.options.autoplay&&(r.paused=!1,r.autoPlay())},t.prototype.initADA=function(){var t=this,r=Math.ceil(t.slideCount/t.options.slidesToShow),n=t.getNavigableIndexes().filter((function(e){return e>=0&&e<t.slideCount}));t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each((function(r){var i=n.indexOf(r);if(e(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+r,tabindex:-1}),-1!==i){var s="slick-slide-control"+t.instanceUid+i;e("#"+s).length&&e(this).attr({"aria-describedby":s})}})),t.$dots.attr("role","tablist").find("li").each((function(i){var s=n[i];e(this).attr({role:"presentation"}),e(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+i,"aria-controls":"slick-slide"+t.instanceUid+s,"aria-label":i+1+" of "+r,"aria-selected":null,tabindex:"-1"})})).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var i=t.currentSlide,s=i+t.options.slidesToShow;i<s;i++)t.options.focusOnChange?t.$slides.eq(i).attr({tabindex:"0"}):t.$slides.eq(i).removeAttr("tabindex");t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&(e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({data:{message:!0===t.options.rtl?"next":"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({data:{message:!0===t.options.rtl?"previous":"next"}}))},t.prototype.lazyLoad=function(){var t,r,n,i=this;function s(t){e("img[data-lazy]",t).each((function(){var t=e(this),r=e(this).attr("data-lazy"),n=e(this).attr("data-srcset"),s=e(this).attr("data-sizes")||i.$slider.attr("data-sizes"),o=document.createElement("img");o.onload=function(){t.animate({opacity:0},100,(function(){n&&(t.attr("srcset",n),s&&t.attr("sizes",s)),t.attr("src",r).animate({opacity:1},200,(function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")})),i.$slider.trigger("lazyLoaded",[i,t,r])}))},o.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),i.$slider.trigger("lazyLoadError",[i,t,r])},o.src=r}))}if(!0===i.options.centerMode?!0===i.options.infinite?n=(r=i.currentSlide+(i.options.slidesToShow/2+1))+i.options.slidesToShow+2:(r=Math.max(0,i.currentSlide-(i.options.slidesToShow/2+1)),n=i.options.slidesToShow/2+1+2+i.currentSlide):(r=i.options.infinite?i.options.slidesToShow+i.currentSlide:i.currentSlide,n=Math.ceil(r+i.options.slidesToShow),!0===i.options.fade&&(r>0&&r--,n<=i.slideCount&&n++)),t=i.$slider.find(".slick-slide").slice(r,n),"anticipated"===i.options.lazyLoad)for(var o=r-1,a=n,l=i.$slider.find(".slick-slide"),u=0;u<i.options.slidesToScroll;u++)o<0&&(o=i.slideCount-1),t=(t=t.add(l.eq(o))).add(l.eq(a)),o--,a++;s(t),i.slideCount<=i.options.slidesToShow?s(i.$slider.find(".slick-slide")):i.currentSlide>=i.slideCount-i.options.slidesToShow?s(i.$slider.find(".slick-cloned").slice(0,i.options.slidesToShow)):0===i.currentSlide&&s(i.$slider.find(".slick-cloned").slice(-1*i.options.slidesToShow))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var r=this;r.unslicked||(r.$slider.trigger("afterChange",[r,t]),r.animating=!1,r.slideCount>r.options.slidesToShow&&r.setPosition(),r.swipeLeft=null,r.options.autoplay&&r.autoPlay(),!0===r.options.accessibility&&(r.initADA(),r.options.focusOnChange&&e(r.$slides.get(r.currentSlide)).attr("tabindex",0).focus()))},t.prototype.prev=t.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var r,n,i,s,o,a=this,l=e("img[data-lazy]",a.$slider);l.length?(r=l.first(),n=r.attr("data-lazy"),i=r.attr("data-srcset"),s=r.attr("data-sizes")||a.$slider.attr("data-sizes"),(o=document.createElement("img")).onload=function(){i&&(r.attr("srcset",i),s&&r.attr("sizes",s)),r.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===a.options.adaptiveHeight&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,r,n]),a.progressiveLazyLoad()},o.onerror=function(){t<3?setTimeout((function(){a.progressiveLazyLoad(t+1)}),500):(r.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,r,n]),a.progressiveLazyLoad())},o.src=n):a.$slider.trigger("allImagesLoaded",[a])},t.prototype.refresh=function(t){var r,n,i=this;n=i.slideCount-i.options.slidesToShow,!i.options.infinite&&i.currentSlide>n&&(i.currentSlide=n),i.slideCount<=i.options.slidesToShow&&(i.currentSlide=0),r=i.currentSlide,i.destroy(!0),e.extend(i,i.initials,{currentSlide:r}),i.init(),t||i.changeSlide({data:{message:"index",index:r}},!1)},t.prototype.registerBreakpoints=function(){var t,r,n,i=this,s=i.options.responsive||null;if("array"===e.type(s)&&s.length){for(t in i.respondTo=i.options.respondTo||"window",s)if(n=i.breakpoints.length-1,s.hasOwnProperty(t)){for(r=s[t].breakpoint;n>=0;)i.breakpoints[n]&&i.breakpoints[n]===r&&i.breakpoints.splice(n,1),n--;i.breakpoints.push(r),i.breakpointSettings[r]=s[t].settings}i.breakpoints.sort((function(e,t){return i.options.mobileFirst?e-t:t-e}))}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout((function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()}),50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,r){var n=this;if(e="boolean"==typeof e?!0===(t=e)?0:n.slideCount-1:!0===t?--e:e,n.slideCount<1||e<0||e>n.slideCount-1)return!1;n.unload(),!0===r?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},t.prototype.setCSS=function(e){var t,r,n=this,i={};!0===n.options.rtl&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",r="top"==n.positionProp?Math.ceil(e)+"px":"0px",i[n.positionProp]=e,!1===n.transformsEnabled?n.$slideTrack.css(i):(i={},!1===n.cssTransitions?(i[n.animType]="translate("+t+", "+r+")",n.$slideTrack.css(i)):(i[n.animType]="translate3d("+t+", "+r+", 0px)",n.$slideTrack.css(i)))},t.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,r=this;r.$slides.each((function(n,i){t=r.slideWidth*n*-1,!0===r.options.rtl?e(i).css({position:"relative",right:t,top:0,zIndex:r.options.zIndex-2,opacity:0}):e(i).css({position:"relative",left:t,top:0,zIndex:r.options.zIndex-2,opacity:0})})),r.$slides.eq(r.currentSlide).css({zIndex:r.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,r,n,i,s,o=this,a=!1;if("object"===e.type(arguments[0])?(n=arguments[0],a=arguments[1],s="multiple"):"string"===e.type(arguments[0])&&(n=arguments[0],i=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?s="responsive":void 0!==arguments[1]&&(s="single")),"single"===s)o.options[n]=i;else if("multiple"===s)e.each(n,(function(e,t){o.options[e]=t}));else if("responsive"===s)for(r in i)if("array"!==e.type(o.options.responsive))o.options.responsive=[i[r]];else{for(t=o.options.responsive.length-1;t>=0;)o.options.responsive[t].breakpoint===i[r].breakpoint&&o.options.responsive.splice(t,1),t--;o.options.responsive.push(i[r])}a&&(o.unload(),o.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&!1!==e.animType},t.prototype.setSlideClasses=function(e){var t,r,n,i,s=this;if(r=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),s.$slides.eq(e).addClass("slick-current"),!0===s.options.centerMode){var o=s.options.slidesToShow%2==0?1:0;t=Math.floor(s.options.slidesToShow/2),!0===s.options.infinite&&(e>=t&&e<=s.slideCount-1-t?s.$slides.slice(e-t+o,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=s.options.slidesToShow+e,r.slice(n-t+1+o,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?r.eq(r.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&r.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=s.slideCount-s.options.slidesToShow?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):r.length<=s.options.slidesToShow?r.addClass("slick-active").attr("aria-hidden","false"):(i=s.slideCount%s.options.slidesToShow,n=!0===s.options.infinite?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-e<s.options.slidesToShow?r.slice(n-(s.options.slidesToShow-i),n+i).addClass("slick-active").attr("aria-hidden","false"):r.slice(n,n+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==s.options.lazyLoad&&"anticipated"!==s.options.lazyLoad||s.lazyLoad()},t.prototype.setupInfinite=function(){var t,r,n,i=this;if(!0===i.options.fade&&(i.options.centerMode=!1),!0===i.options.infinite&&!1===i.options.fade&&(r=null,i.slideCount>i.options.slidesToShow)){for(n=!0===i.options.centerMode?i.options.slidesToShow+1:i.options.slidesToShow,t=i.slideCount;t>i.slideCount-n;t-=1)r=t-1,e(i.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r-i.slideCount).prependTo(i.$slideTrack).addClass("slick-cloned");for(t=0;t<n+i.slideCount;t+=1)r=t,e(i.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r+i.slideCount).appendTo(i.$slideTrack).addClass("slick-cloned");i.$slideTrack.find(".slick-cloned").find("[id]").each((function(){e(this).attr("id","")}))}},t.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},t.prototype.selectHandler=function(t){var r=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),i=parseInt(n.attr("data-slick-index"));i||(i=0),r.slideCount<=r.options.slidesToShow?r.slideHandler(i,!1,!0):r.slideHandler(i)},t.prototype.slideHandler=function(e,t,r){var n,i,s,o,a,l=null,u=this;if(t=t||!1,!(!0===u.animating&&!0===u.options.waitForAnimate||!0===u.options.fade&&u.currentSlide===e))if(!1===t&&u.asNavFor(e),n=e,l=u.getLeft(n),o=u.getLeft(u.currentSlide),u.currentLeft=null===u.swipeLeft?o:u.swipeLeft,!1===u.options.infinite&&!1===u.options.centerMode&&(e<0||e>u.getDotCount()*u.options.slidesToScroll))!1===u.options.fade&&(n=u.currentSlide,!0!==r&&u.slideCount>u.options.slidesToShow?u.animateSlide(o,(function(){u.postSlide(n)})):u.postSlide(n));else if(!1===u.options.infinite&&!0===u.options.centerMode&&(e<0||e>u.slideCount-u.options.slidesToScroll))!1===u.options.fade&&(n=u.currentSlide,!0!==r&&u.slideCount>u.options.slidesToShow?u.animateSlide(o,(function(){u.postSlide(n)})):u.postSlide(n));else{if(u.options.autoplay&&clearInterval(u.autoPlayTimer),i=n<0?u.slideCount%u.options.slidesToScroll!=0?u.slideCount-u.slideCount%u.options.slidesToScroll:u.slideCount+n:n>=u.slideCount?u.slideCount%u.options.slidesToScroll!=0?0:n-u.slideCount:n,u.animating=!0,u.$slider.trigger("beforeChange",[u,u.currentSlide,i]),s=u.currentSlide,u.currentSlide=i,u.setSlideClasses(u.currentSlide),u.options.asNavFor&&(a=(a=u.getNavTarget()).slick("getSlick")).slideCount<=a.options.slidesToShow&&a.setSlideClasses(u.currentSlide),u.updateDots(),u.updateArrows(),!0===u.options.fade)return!0!==r?(u.fadeSlideOut(s),u.fadeSlide(i,(function(){u.postSlide(i)}))):u.postSlide(i),void u.animateHeight();!0!==r&&u.slideCount>u.options.slidesToShow?u.animateSlide(l,(function(){u.postSlide(i)})):u.postSlide(i)}},t.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,r,n,i=this;return e=i.touchObject.startX-i.touchObject.curX,t=i.touchObject.startY-i.touchObject.curY,r=Math.atan2(t,e),(n=Math.round(180*r/Math.PI))<0&&(n=360-Math.abs(n)),n<=45&&n>=0||n<=360&&n>=315?!1===i.options.rtl?"left":"right":n>=135&&n<=225?!1===i.options.rtl?"right":"left":!0===i.options.verticalSwiping?n>=35&&n<=135?"down":"up":"vertical"},t.prototype.swipeEnd=function(e){var t,r,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1,!1;if(n.interrupted=!1,n.shouldClick=!(n.touchObject.swipeLength>10),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(r=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=r&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,r]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,r,n,i,s,o,a=this;return s=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!a.dragging||a.scrolling||s&&1!==s.length)&&(t=a.getLeft(a.currentSlide),a.touchObject.curX=void 0!==s?s[0].pageX:e.clientX,a.touchObject.curY=void 0!==s?s[0].pageY:e.clientY,a.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(a.touchObject.curX-a.touchObject.startX,2))),o=Math.round(Math.sqrt(Math.pow(a.touchObject.curY-a.touchObject.startY,2))),!a.options.verticalSwiping&&!a.swiping&&o>4?(a.scrolling=!0,!1):(!0===a.options.verticalSwiping&&(a.touchObject.swipeLength=o),r=a.swipeDirection(),void 0!==e.originalEvent&&a.touchObject.swipeLength>4&&(a.swiping=!0,e.preventDefault()),i=(!1===a.options.rtl?1:-1)*(a.touchObject.curX>a.touchObject.startX?1:-1),!0===a.options.verticalSwiping&&(i=a.touchObject.curY>a.touchObject.startY?1:-1),n=a.touchObject.swipeLength,a.touchObject.edgeHit=!1,!1===a.options.infinite&&(0===a.currentSlide&&"right"===r||a.currentSlide>=a.getDotCount()&&"left"===r)&&(n=a.touchObject.swipeLength*a.options.edgeFriction,a.touchObject.edgeHit=!0),!1===a.options.vertical?a.swipeLeft=t+n*i:a.swipeLeft=t+n*(a.$list.height()/a.listWidth)*i,!0===a.options.verticalSwiping&&(a.swipeLeft=t+n*i),!0!==a.options.fade&&!1!==a.options.touchMove&&(!0===a.animating?(a.swipeLeft=null,!1):void a.setCSS(a.swipeLeft))))},t.prototype.swipeStart=function(e){var t,r=this;if(r.interrupted=!0,1!==r.touchObject.fingerCount||r.slideCount<=r.options.slidesToShow)return r.touchObject={},!1;void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),r.touchObject.startX=r.touchObject.curX=void 0!==t?t.pageX:e.clientX,r.touchObject.startY=r.touchObject.curY=void 0!==t?t.pageY:e.clientY,r.dragging=!0},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):(e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode||e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode)&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,r,n=this,i=arguments[0],s=Array.prototype.slice.call(arguments,1),o=n.length;for(e=0;e<o;e++)if("object"==typeof i||void 0===i?n[e].slick=new t(n[e],i):r=n[e].slick[i].apply(n[e].slick,s),void 0!==r)return r;return n}},void 0===(s="function"==typeof n?n.apply(t,i):n)||(e.exports=s)}()},21440:()=>{},74066:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Node:()=>ne,Parser:()=>z,Position:()=>D,SourceLocation:()=>R,TokContext:()=>oe,Token:()=>Ce,TokenType:()=>g,defaultOptions:()=>q,getLineInfo:()=>L,isIdentifierChar:()=>m,isIdentifierStart:()=>f,isNewLine:()=>A,keywordTypes:()=>x,lineBreak:()=>E,lineBreakG:()=>S,nonASCIIwhitespace:()=>N,parse:()=>De,parseExpressionAt:()=>Re,tokContexts:()=>ae,tokTypes:()=>_,tokenizer:()=>Le,version:()=>Pe});var n={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:i,"5module":i+" export import",6:i+" const class extends export import super"},o=/^in(stanceof)?$/,a="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-Ᶎꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭧꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",l="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",u=new RegExp("["+a+"]"),c=new RegExp("["+a+l+"]");a=l=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function d(e,t){for(var r=65536,n=0;n<t.length;n+=2){if((r+=t[n])>e)return!1;if((r+=t[n+1])>=e)return!0}}function f(e,t){return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&u.test(String.fromCharCode(e)):!1!==t&&d(e,p)))}function m(e,t){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&c.test(String.fromCharCode(e)):!1!==t&&(d(e,p)||d(e,h)))))}var g=function(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null};function y(e,t){return new g(e,{beforeExpr:!0,binop:t})}var v={beforeExpr:!0},b={startsExpr:!0},x={};function w(e,t){return void 0===t&&(t={}),t.keyword=e,x[e]=new g(e,t)}var _={num:new g("num",b),regexp:new g("regexp",b),string:new g("string",b),name:new g("name",b),eof:new g("eof"),bracketL:new g("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new g("]"),braceL:new g("{",{beforeExpr:!0,startsExpr:!0}),braceR:new g("}"),parenL:new g("(",{beforeExpr:!0,startsExpr:!0}),parenR:new g(")"),comma:new g(",",v),semi:new g(";",v),colon:new g(":",v),dot:new g("."),question:new g("?",v),arrow:new g("=>",v),template:new g("template"),invalidTemplate:new g("invalidTemplate"),ellipsis:new g("...",v),backQuote:new g("`",b),dollarBraceL:new g("${",{beforeExpr:!0,startsExpr:!0}),eq:new g("=",{beforeExpr:!0,isAssign:!0}),assign:new g("_=",{beforeExpr:!0,isAssign:!0}),incDec:new g("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new g("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new g("**",{beforeExpr:!0}),_break:w("break"),_case:w("case",v),_catch:w("catch"),_continue:w("continue"),_debugger:w("debugger"),_default:w("default",v),_do:w("do",{isLoop:!0,beforeExpr:!0}),_else:w("else",v),_finally:w("finally"),_for:w("for",{isLoop:!0}),_function:w("function",b),_if:w("if"),_return:w("return",v),_switch:w("switch"),_throw:w("throw",v),_try:w("try"),_var:w("var"),_const:w("const"),_while:w("while",{isLoop:!0}),_with:w("with"),_new:w("new",{beforeExpr:!0,startsExpr:!0}),_this:w("this",b),_super:w("super",b),_class:w("class",b),_extends:w("extends",v),_export:w("export"),_import:w("import",b),_null:w("null",b),_true:w("true",b),_false:w("false",b),_in:w("in",{beforeExpr:!0,binop:7}),_instanceof:w("instanceof",{beforeExpr:!0,binop:7}),_typeof:w("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:w("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:w("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},E=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(E.source,"g");function A(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}var N=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,k=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,M=Object.prototype,C=M.hasOwnProperty,T=M.toString;function O(e,t){return C.call(e,t)}var I=Array.isArray||function(e){return"[object Array]"===T.call(e)};function P(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var D=function(e,t){this.line=e,this.column=t};D.prototype.offset=function(e){return new D(this.line,this.column+e)};var R=function(e,t,r){this.start=t,this.end=r,null!==e.sourceFile&&(this.source=e.sourceFile)};function L(e,t){for(var r=1,n=0;;){S.lastIndex=n;var i=S.exec(e);if(!(i&&i.index<t))return new D(r,t-n);++r,n=i.index+i[0].length}}var q={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function $(e){var t={};for(var r in q)t[r]=e&&O(e,r)?e[r]:q[r];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),I(t.onToken)){var n=t.onToken;t.onToken=function(e){return n.push(e)}}return I(t.onComment)&&(t.onComment=function(e,t){return function(r,n,i,s,o,a){var l={type:r?"Block":"Line",value:n,start:i,end:s};e.locations&&(l.loc=new R(this,o,a)),e.ranges&&(l.range=[i,s]),t.push(l)}}(t,t.onComment)),t}function B(e,t){return 2|(e?4:0)|(t?8:0)}var z=function(e,t,r){this.options=e=$(e),this.sourceFile=e.sourceFile,this.keywords=P(s[e.ecmaVersion>=6?6:"module"===e.sourceType?"5module":5]);var i="";if(!0!==e.allowReserved){for(var o=e.ecmaVersion;!(i=n[o]);o--);"module"===e.sourceType&&(i+=" await")}this.reservedWords=P(i);var a=(i?i+" ":"")+n.strict;this.reservedWordsStrict=P(a),this.reservedWordsStrictBind=P(a+" "+n.strictBind),this.input=String(t),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(E).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=_.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},F={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};z.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)},F.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},F.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},F.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},F.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},F.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},F.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},z.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},z.extend=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r=this,n=0;n<e.length;n++)r=e[n](r);return r},z.parse=function(e,t){return new this(t,e).parse()},z.parseExpressionAt=function(e,t,r){var n=new this(r,e,t);return n.nextToken(),n.parseExpression()},z.tokenizer=function(e,t){return new this(t,e)},Object.defineProperties(z.prototype,F);var U=z.prototype,j=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function G(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}U.strictDirective=function(e){for(;;){k.lastIndex=e,e+=k.exec(this.input)[0].length;var t=j.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,k.lastIndex=e,e+=k.exec(this.input)[0].length,";"===this.input[e]&&e++}},U.eat=function(e){return this.type===e&&(this.next(),!0)},U.isContextual=function(e){return this.type===_.name&&this.value===e&&!this.containsEsc},U.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},U.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},U.canInsertSemicolon=function(){return this.type===_.eof||this.type===_.braceR||E.test(this.input.slice(this.lastTokEnd,this.start))},U.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},U.semicolon=function(){this.eat(_.semi)||this.insertSemicolon()||this.unexpected()},U.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},U.expect=function(e){this.eat(e)||this.unexpected()},U.unexpected=function(e){this.raise(null!=e?e:this.start,"Unexpected token")},U.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var r=t?e.parenthesizedAssign:e.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},U.checkExpressionErrors=function(e,t){if(!e)return!1;var r=e.shorthandAssign,n=e.doubleProto;if(!t)return r>=0||n>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},U.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},U.isSimpleAssignTarget=function(e){return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var V=z.prototype;V.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==_.eof;){var r=this.parseStatement(null,!0,t);e.body.push(r)}if(this.inModule)for(var n=0,i=Object.keys(this.undefinedExports);n<i.length;n+=1){var s=i[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var H={kind:"loop"},W={kind:"switch"};V.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;k.lastIndex=this.pos;var t=k.exec(this.input),r=this.pos+t[0].length,n=this.input.charCodeAt(r);if(91===n)return!0;if(e)return!1;if(123===n)return!0;if(f(n,!0)){for(var i=r+1;m(this.input.charCodeAt(i),!0);)++i;var s=this.input.slice(r,i);if(!o.test(s))return!0}return!1},V.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;k.lastIndex=this.pos;var e=k.exec(this.input),t=this.pos+e[0].length;return!(E.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&m(this.input.charAt(t+8)))},V.parseStatement=function(e,t,r){var n,i=this.type,s=this.startNode();switch(this.isLet(e)&&(i=_._var,n="let"),i){case _._break:case _._continue:return this.parseBreakContinueStatement(s,i.keyword);case _._debugger:return this.parseDebuggerStatement(s);case _._do:return this.parseDoStatement(s);case _._for:return this.parseForStatement(s);case _._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case _._class:return e&&this.unexpected(),this.parseClass(s,!0);case _._if:return this.parseIfStatement(s);case _._return:return this.parseReturnStatement(s);case _._switch:return this.parseSwitchStatement(s);case _._throw:return this.parseThrowStatement(s);case _._try:return this.parseTryStatement(s);case _._const:case _._var:return n=n||this.value,e&&"var"!==n&&this.unexpected(),this.parseVarStatement(s,n);case _._while:return this.parseWhileStatement(s);case _._with:return this.parseWithStatement(s);case _.braceL:return this.parseBlock(!0,s);case _.semi:return this.parseEmptyStatement(s);case _._export:case _._import:if(this.options.ecmaVersion>10&&i===_._import){k.lastIndex=this.pos;var o=k.exec(this.input),a=this.pos+o[0].length;if(40===this.input.charCodeAt(a))return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===_._import?this.parseImport(s):this.parseExport(s,r);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var l=this.value,u=this.parseExpression();return i===_.name&&"Identifier"===u.type&&this.eat(_.colon)?this.parseLabeledStatement(s,l,u,e):this.parseExpressionStatement(s,u)}},V.parseBreakContinueStatement=function(e,t){var r="break"===t;this.next(),this.eat(_.semi)||this.insertSemicolon()?e.label=null:this.type!==_.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var i=this.labels[n];if(null==e.label||i.name===e.label.name){if(null!=i.kind&&(r||"loop"===i.kind))break;if(e.label&&r)break}}return n===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,r?"BreakStatement":"ContinueStatement")},V.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},V.parseDoStatement=function(e){return this.next(),this.labels.push(H),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(_._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(_.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},V.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(H),this.enterScope(0),this.expect(_.parenL),this.type===_.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var r=this.isLet();if(this.type===_._var||this.type===_._const||r){var n=this.startNode(),i=r?"let":this.value;return this.next(),this.parseVar(n,!0,i),this.finishNode(n,"VariableDeclaration"),(this.type===_._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===n.declarations.length?(this.options.ecmaVersion>=9&&(this.type===_._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,n)):(t>-1&&this.unexpected(t),this.parseFor(e,n))}var s=new G,o=this.parseExpression(!0,s);return this.type===_._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===_._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(o,!1,s),this.checkLVal(o),this.parseForIn(e,o)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,o))},V.parseFunctionStatement=function(e,t,r){return this.next(),this.parseFunction(e,X|(r?0:Z),!1,t)},V.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(_._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},V.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(_.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},V.parseSwitchStatement=function(e){var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(_.braceL),this.labels.push(W),this.enterScope(0);for(var r=!1;this.type!==_.braceR;)if(this.type===_._case||this.type===_._default){var n=this.type===_._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),n?t.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,t.test=null),this.expect(_.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},V.parseThrowStatement=function(e){return this.next(),E.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Y=[];V.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===_._catch){var t=this.startNode();if(this.next(),this.eat(_.parenL)){t.param=this.parseBindingAtom();var r="Identifier"===t.param.type;this.enterScope(r?32:0),this.checkLVal(t.param,r?4:2),this.expect(_.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(_._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},V.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},V.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(H),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},V.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},V.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")},V.parseLabeledStatement=function(e,t,r,n){for(var i=0,s=this.labels;i<s.length;i+=1){s[i].name===t&&this.raise(r.start,"Label '"+t+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===_._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var l=this.labels[a];if(l.statementStart!==e.start)break;l.statementStart=this.start,l.kind=o}return this.labels.push({name:t,kind:o,statementStart:this.start}),e.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")},V.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},V.parseBlock=function(e,t){for(void 0===e&&(e=!0),void 0===t&&(t=this.startNode()),t.body=[],this.expect(_.braceL),e&&this.enterScope(0);!this.eat(_.braceR);){var r=this.parseStatement(null);t.body.push(r)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},V.parseFor=function(e,t){return e.init=t,this.expect(_.semi),e.test=this.type===_.semi?null:this.parseExpression(),this.expect(_.semi),e.update=this.type===_.parenR?null:this.parseExpression(),this.expect(_.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},V.parseForIn=function(e,t){var r=this.type===_._in;return this.next(),"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(!r||this.options.ecmaVersion<8||this.strict||"var"!==t.kind||"Identifier"!==t.declarations[0].id.type)?this.raise(t.start,(r?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===t.type&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=r?this.parseExpression():this.parseMaybeAssign(),this.expect(_.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,r?"ForInStatement":"ForOfStatement")},V.parseVar=function(e,t,r){for(e.declarations=[],e.kind=r;;){var n=this.startNode();if(this.parseVarId(n,r),this.eat(_.eq)?n.init=this.parseMaybeAssign(t):"const"!==r||this.type===_._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===n.id.type||t&&(this.type===_._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(_.comma))break}return e},V.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var X=1,Z=2;V.parseFunction=function(e,t,r,n){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===_.star&&t&Z&&this.unexpected(),e.generator=this.eat(_.star)),this.options.ecmaVersion>=8&&(e.async=!!n),t&X&&(e.id=4&t&&this.type!==_.name?null:this.parseIdent(),!e.id||t&Z||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(B(e.async,e.generator)),t&X||(e.id=this.type===_.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,r,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,t&X?"FunctionDeclaration":"FunctionExpression")},V.parseFunctionParams=function(e){this.expect(_.parenL),e.params=this.parseBindingList(_.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},V.parseClass=function(e,t){this.next();var r=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var n=this.startNode(),i=!1;for(n.body=[],this.expect(_.braceL);!this.eat(_.braceR);){var s=this.parseClassElement(null!==e.superClass);s&&(n.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(i&&this.raise(s.start,"Duplicate constructor in the same class"),i=!0))}return e.body=this.finishNode(n,"ClassBody"),this.strict=r,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},V.parseClassElement=function(e){var t=this;if(this.eat(_.semi))return null;var r=this.startNode(),n=function(e,n){void 0===n&&(n=!1);var i=t.start,s=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===_.parenL||n&&t.canInsertSemicolon())||(r.key&&t.unexpected(),r.computed=!1,r.key=t.startNodeAt(i,s),r.key.name=e,t.finishNode(r.key,"Identifier"),!1))};r.kind="method",r.static=n("static");var i=this.eat(_.star),s=!1;i||(this.options.ecmaVersion>=8&&n("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(_.star)):n("get")?r.kind="get":n("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var o=r.key,a=!1;return r.computed||r.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?r.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),s&&this.raise(o.start,"Constructor can't be an async method"),r.kind="constructor",a=e),this.parseClassMethod(r,i,s,a),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},V.parseClassMethod=function(e,t,r,n){return e.value=this.parseMethod(t,r,n),this.finishNode(e,"MethodDefinition")},V.parseClassId=function(e,t){this.type===_.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},V.parseClassSuper=function(e){e.superClass=this.eat(_._extends)?this.parseExprSubscripts():null},V.parseExport=function(e,t){if(this.next(),this.eat(_.star))return this.expectContextual("from"),this.type!==_.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(_._default)){var r;if(this.checkExport(t,"default",this.lastTokStart),this.type===_._function||(r=this.isAsyncFunction())){var n=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(n,4|X,!1,r)}else if(this.type===_._class){var i=this.startNode();e.declaration=this.parseClass(i,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==_.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,o=e.specifiers;s<o.length;s+=1){var a=o[s];this.checkUnreserved(a.local),this.checkLocalExport(a.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},V.checkExport=function(e,t,r){e&&(O(e,t)&&this.raiseRecoverable(r,"Duplicate export '"+t+"'"),e[t]=!0)},V.checkPatternExport=function(e,t){var r=t.type;if("Identifier"===r)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===r)for(var n=0,i=t.properties;n<i.length;n+=1){var s=i[n];this.checkPatternExport(e,s)}else if("ArrayPattern"===r)for(var o=0,a=t.elements;o<a.length;o+=1){var l=a[o];l&&this.checkPatternExport(e,l)}else"Property"===r?this.checkPatternExport(e,t.value):"AssignmentPattern"===r?this.checkPatternExport(e,t.left):"RestElement"===r?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(e,t.expression)},V.checkVariableExport=function(e,t){if(e)for(var r=0,n=t;r<n.length;r+=1){var i=n[r];this.checkPatternExport(e,i.id)}},V.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},V.parseExportSpecifiers=function(e){var t=[],r=!0;for(this.expect(_.braceL);!this.eat(_.braceR);){if(r)r=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,this.checkExport(e,n.exported.name,n.exported.start),t.push(this.finishNode(n,"ExportSpecifier"))}return t},V.parseImport=function(e){return this.next(),this.type===_.string?(e.specifiers=Y,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===_.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},V.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===_.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(_.comma))return e}if(this.type===_.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportNamespaceSpecifier")),e}for(this.expect(_.braceL);!this.eat(_.braceR);){if(t)t=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportSpecifier"))}return e},V.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},V.isDirectiveCandidate=function(e){return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};var Q=z.prototype;Q.toAssignable=function(e,t,r){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var n=0,i=e.properties;n<i.length;n+=1){var s=i[n];this.toAssignable(s,t),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,r);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return e},Q.toAssignableList=function(e,t){for(var r=e.length,n=0;n<r;n++){var i=e[n];i&&this.toAssignable(i,t)}if(r){var s=e[r-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},Q.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},Q.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==_.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},Q.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case _.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(_.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case _.braceL:return this.parseObj(!0)}return this.parseIdent()},Q.parseBindingList=function(e,t,r){for(var n=[],i=!0;!this.eat(e);)if(i?i=!1:this.expect(_.comma),t&&this.type===_.comma)n.push(null);else{if(r&&this.afterTrailingComma(e))break;if(this.type===_.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===_.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),n.push(o)}return n},Q.parseBindingListItem=function(e){return e},Q.parseMaybeDefault=function(e,t,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(_.eq))return r;var n=this.startNodeAt(e,t);return n.left=r,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},Q.checkLVal=function(e,t,r){switch(void 0===t&&(t=0),e.type){case"Identifier":2===t&&"let"===e.name&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(O(r,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),r[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var n=0,i=e.properties;n<i.length;n+=1){var s=i[n];this.checkLVal(s,t,r)}break;case"Property":this.checkLVal(e.value,t,r);break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var l=a[o];l&&this.checkLVal(l,t,r)}break;case"AssignmentPattern":this.checkLVal(e.left,t,r);break;case"RestElement":this.checkLVal(e.argument,t,r);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,r);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var K=z.prototype;K.checkPropClash=function(e,t,r){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var n,i=e.key;switch(i.type){case"Identifier":n=i.name;break;case"Literal":n=String(i.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===s&&(t.proto&&(r&&r.doubleProto<0?r.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),t.proto=!0);else{var o=t[n="$"+n];if(o)("init"===s?this.strict&&o.init||o.get||o.set:o.init||o[s])&&this.raiseRecoverable(i.start,"Redefinition of property");else o=t[n]={init:!1,get:!1,set:!1};o[s]=!0}}},K.parseExpression=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===_.comma){var s=this.startNodeAt(r,n);for(s.expressions=[i];this.eat(_.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i},K.parseMaybeAssign=function(e,t,r){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var n=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new G,n=!0);var a=this.start,l=this.startLoc;this.type!==_.parenL&&this.type!==_.name||(this.potentialArrowAt=this.start);var u=this.parseMaybeConditional(e,t);if(r&&(u=r.call(this,u,a,l)),this.type.isAssign){var c=this.startNodeAt(a,l);return c.operator=this.value,c.left=this.type===_.eq?this.toAssignable(u,!1,t):u,n||G.call(t),t.shorthandAssign=-1,this.checkLVal(u),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return n&&this.checkExpressionErrors(t,!0),i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),o>-1&&(t.shorthandAssign=o),u},K.parseMaybeConditional=function(e,t){var r=this.start,n=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(_.question)){var s=this.startNodeAt(r,n);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(_.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i},K.parseExprOps=function(e,t){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||i.start===r&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,r,n,-1,e)},K.parseExprOp=function(e,t,r,n,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==_._in)&&s>n){var o=this.type===_.logicalOR||this.type===_.logicalAND,a=this.value;this.next();var l=this.start,u=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,u,s,i),p=this.buildBinary(t,r,e,c,a,o);return this.parseExprOp(p,t,r,n,i)}return e},K.buildBinary=function(e,t,r,n,i,s){var o=this.startNodeAt(e,t);return o.left=r,o.operator=i,o.right=n,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")},K.parseMaybeUnary=function(e,t){var r,n=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),o=this.type===_.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),o?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,r=this.finishNode(s,o?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var a=this.startNodeAt(n,i);a.operator=this.value,a.prefix=!1,a.argument=r,this.checkLVal(r),this.next(),r=this.finishNode(a,"UpdateExpression")}}return!t&&this.eat(_.starstar)?this.buildBinary(n,i,r,this.parseMaybeUnary(null,!1),"**",!1):r},K.parseExprSubscripts=function(e){var t=this.start,r=this.startLoc,n=this.parseExprAtom(e),i="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||i)return n;var s=this.parseSubscripts(n,t,r);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},K.parseSubscripts=function(e,t,r,n){for(var i=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var s=this.parseSubscript(e,t,r,n,i);if(s===e||"ArrowFunctionExpression"===s.type)return s;e=s}},K.parseSubscript=function(e,t,r,n,i){var s=this.eat(_.bracketL);if(s||this.eat(_.dot)){var o=this.startNodeAt(t,r);o.object=e,o.property=s?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!s,s&&this.expect(_.bracketR),e=this.finishNode(o,"MemberExpression")}else if(!n&&this.eat(_.parenL)){var a=new G,l=this.yieldPos,u=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(_.parenR,this.options.ecmaVersion>=8&&"Import"!==e.type,!1,a);if(i&&!this.canInsertSemicolon()&&this.eat(_.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=u,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(t,r),p,!0);this.checkExpressionErrors(a,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=u||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var h=this.startNodeAt(t,r);if(h.callee=e,h.arguments=p,"Import"===h.callee.type){1!==h.arguments.length&&this.raise(h.start,"import() requires exactly one argument");var d=h.arguments[0];d&&"SpreadElement"===d.type&&this.raise(d.start,"... is not allowed in import()")}e=this.finishNode(h,"CallExpression")}else if(this.type===_.backQuote){var f=this.startNodeAt(t,r);f.tag=e,f.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(f,"TaggedTemplateExpression")}return e},K.parseExprAtom=function(e){this.type===_.slash&&this.readRegexp();var t,r=this.potentialArrowAt===this.start;switch(this.type){case _._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==_.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==_.dot&&this.type!==_.bracketL&&this.type!==_.parenL&&this.unexpected(),this.finishNode(t,"Super");case _._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case _.name:var n=this.start,i=this.startLoc,s=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(_._function))return this.parseFunction(this.startNodeAt(n,i),0,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(_.arrow))return this.parseArrowExpression(this.startNodeAt(n,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===_.name&&!s)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(_.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,i),[o],!0)}return o;case _.regexp:var a=this.value;return(t=this.parseLiteral(a.value)).regex={pattern:a.pattern,flags:a.flags},t;case _.num:case _.string:return this.parseLiteral(this.value);case _._null:case _._true:case _._false:return(t=this.startNode()).value=this.type===_._null?null:this.type===_._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case _.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(r);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),u;case _.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(_.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case _.braceL:return this.parseObj(!1,e);case _._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case _._class:return this.parseClass(this.startNode(),!1);case _._new:return this.parseNew();case _.backQuote:return this.parseTemplate();case _._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},K.parseDynamicImport=function(){var e=this.startNode();return this.next(),this.type!==_.parenL&&this.unexpected(),this.finishNode(e,"Import")},K.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),110===t.raw.charCodeAt(t.raw.length-1)&&(t.bigint=t.raw.slice(0,-1)),this.next(),this.finishNode(t,"Literal")},K.parseParenExpression=function(){this.expect(_.parenL);var e=this.parseExpression();return this.expect(_.parenR),e},K.parseParenAndDistinguishExpression=function(e){var t,r=this.start,n=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,o=this.start,a=this.startLoc,l=[],u=!0,c=!1,p=new G,h=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==_.parenR;){if(u?u=!1:this.expect(_.comma),i&&this.afterTrailingComma(_.parenR,!0)){c=!0;break}if(this.type===_.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===_.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var f=this.start,m=this.startLoc;if(this.expect(_.parenR),e&&!this.canInsertSemicolon()&&this.eat(_.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=d,this.parseParenArrowList(r,n,l);l.length&&!c||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?((t=this.startNodeAt(o,a)).expressions=l,this.finishNodeAt(t,"SequenceExpression",f,m)):t=l[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(r,n);return g.expression=t,this.finishNode(g,"ParenthesizedExpression")}return t},K.parseParenItem=function(e){return e},K.parseParenArrowList=function(e,t,r){return this.parseArrowExpression(this.startNodeAt(e,t),r)};var J=[];K.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(_.dot)){e.meta=t;var r=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||r)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var n=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),n,i,!0),this.options.ecmaVersion>10&&"Import"===e.callee.type&&this.raise(e.callee.start,"Cannot use new with import(...)"),this.eat(_.parenL)?e.arguments=this.parseExprList(_.parenR,this.options.ecmaVersion>=8&&"Import"!==e.callee.type,!1):e.arguments=J,this.finishNode(e,"NewExpression")},K.parseTemplateElement=function(e){var t=e.isTagged,r=this.startNode();return this.type===_.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===_.backQuote,this.finishNode(r,"TemplateElement")},K.parseTemplate=function(e){void 0===e&&(e={});var t=e.isTagged;void 0===t&&(t=!1);var r=this.startNode();this.next(),r.expressions=[];var n=this.parseTemplateElement({isTagged:t});for(r.quasis=[n];!n.tail;)this.type===_.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(_.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(_.braceR),r.quasis.push(n=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(r,"TemplateLiteral")},K.isAsyncProp=function(e){return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===_.name||this.type===_.num||this.type===_.string||this.type===_.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===_.star)&&!E.test(this.input.slice(this.lastTokEnd,this.start))},K.parseObj=function(e,t){var r=this.startNode(),n=!0,i={};for(r.properties=[],this.next();!this.eat(_.braceR);){if(n)n=!1;else if(this.expect(_.comma),this.afterTrailingComma(_.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),r.properties.push(s)}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},K.parseProperty=function(e,t){var r,n,i,s,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(_.ellipsis))return e?(o.argument=this.parseIdent(!1),this.type===_.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===_.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,t),this.type===_.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(e||t)&&(i=this.start,s=this.startLoc),e||(r=this.eat(_.star)));var a=this.containsEsc;return this.parsePropertyName(o),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(o)?(n=!0,r=this.options.ecmaVersion>=9&&this.eat(_.star),this.parsePropertyName(o,t)):n=!1,this.parsePropertyValue(o,e,r,n,i,s,t,a),this.finishNode(o,"Property")},K.parsePropertyValue=function(e,t,r,n,i,s,o,a){if((r||n)&&this.type===_.colon&&this.unexpected(),this.eat(_.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===_.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(r,n);else if(t||a||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===_.comma||this.type===_.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((r||n)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,e.key):this.type===_.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(r||n)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l="get"===e.kind?0:1;if(e.value.params.length!==l){var u=e.value.start;"get"===e.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},K.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(_.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(_.bracketR),e.key;e.computed=!1}return e.key=this.type===_.num||this.type===_.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},K.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},K.parseMethod=function(e,t,r){var n=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=e),this.options.ecmaVersion>=8&&(n.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|B(t,n.generator)|(r?128:0)),this.expect(_.parenL),n.params=this.parseBindingList(_.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(n,"FunctionExpression")},K.parseArrowExpression=function(e,t,r){var n=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|B(r,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=n,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},K.parseFunctionBody=function(e,t,r){var n=t&&this.type!==_.braceL,i=this.strict,s=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);i&&!o||(s=this.strictDirective(this.end))&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!i&&!s&&!t&&!r&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=a}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=i},K.isSimpleParamList=function(e){for(var t=0,r=e;t<r.length;t+=1){if("Identifier"!==r[t].type)return!1}return!0},K.checkParams=function(e,t){for(var r={},n=0,i=e.params;n<i.length;n+=1){var s=i[n];this.checkLVal(s,1,t?null:r)}},K.parseExprList=function(e,t,r,n){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(_.comma),t&&this.afterTrailingComma(e))break;var o=void 0;r&&this.type===_.comma?o=null:this.type===_.ellipsis?(o=this.parseSpread(n),n&&this.type===_.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):o=this.parseMaybeAssign(!1,n),i.push(o)}return i},K.checkUnreserved=function(e){var t=e.start,r=e.end,n=e.name;(this.inGenerator&&"yield"===n&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(n)&&this.raise(t,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(t,r).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+n+"' is reserved"))},K.parseIdent=function(e,t){var r=this.startNode();return this.type===_.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(r,"Identifier"),e||(this.checkUnreserved(r),"await"!==r.name||this.awaitIdentPos||(this.awaitIdentPos=r.start)),r},K.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===_.semi||this.canInsertSemicolon()||this.type!==_.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(_.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},K.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var ee=z.prototype;ee.raise=function(e,t){var r=L(this.input,e);t+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(t);throw n.pos=e,n.loc=r,n.raisedAt=this.pos,n},ee.raiseRecoverable=ee.raise,ee.curPosition=function(){if(this.options.locations)return new D(this.curLine,this.pos-this.lineStart)};var te=z.prototype,re=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};te.enterScope=function(e){this.scopeStack.push(new re(e))},te.exitScope=function(){this.scopeStack.pop()},te.treatFunctionsAsVarInScope=function(e){return 2&e.flags||!this.inModule&&1&e.flags},te.declareName=function(e,t,r){var n=!1;if(2===t){var i=this.currentScope();n=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&1&i.flags&&delete this.undefinedExports[e]}else if(4===t){this.currentScope().lexical.push(e)}else if(3===t){var s=this.currentScope();n=this.treatFunctionsAsVar?s.lexical.indexOf(e)>-1:s.lexical.indexOf(e)>-1||s.var.indexOf(e)>-1,s.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var a=this.scopeStack[o];if(a.lexical.indexOf(e)>-1&&!(32&a.flags&&a.lexical[0]===e)||!this.treatFunctionsAsVarInScope(a)&&a.functions.indexOf(e)>-1){n=!0;break}if(a.var.push(e),this.inModule&&1&a.flags&&delete this.undefinedExports[e],3&a.flags)break}n&&this.raiseRecoverable(r,"Identifier '"+e+"' has already been declared")},te.checkLocalExport=function(e){-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},te.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},te.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags)return t}},te.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(3&t.flags&&!(16&t.flags))return t}};var ne=function(e,t,r){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new R(e,r)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},ie=z.prototype;function se(e,t,r,n){return e.type=t,e.end=r,this.options.locations&&(e.loc.end=n),this.options.ranges&&(e.range[1]=r),e}ie.startNode=function(){return new ne(this,this.start,this.startLoc)},ie.startNodeAt=function(e,t){return new ne(this,e,t)},ie.finishNode=function(e,t){return se.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},ie.finishNodeAt=function(e,t,r,n){return se.call(this,e,t,r,n)};var oe=function(e,t,r,n,i){this.token=e,this.isExpr=!!t,this.preserveSpace=!!r,this.override=n,this.generator=!!i},ae={b_stat:new oe("{",!1),b_expr:new oe("{",!0),b_tmpl:new oe("${",!1),p_stat:new oe("(",!1),p_expr:new oe("(",!0),q_tmpl:new oe("`",!0,!0,(function(e){return e.tryReadTemplateToken()})),f_stat:new oe("function",!1),f_expr:new oe("function",!0),f_expr_gen:new oe("function",!0,!1,null,!0),f_gen:new oe("function",!1,!1,null,!0)},le=z.prototype;le.initialContext=function(){return[ae.b_stat]},le.braceIsBlock=function(e){var t=this.curContext();return t===ae.f_expr||t===ae.f_stat||(e!==_.colon||t!==ae.b_stat&&t!==ae.b_expr?e===_._return||e===_.name&&this.exprAllowed?E.test(this.input.slice(this.lastTokEnd,this.start)):e===_._else||e===_.semi||e===_.eof||e===_.parenR||e===_.arrow||(e===_.braceL?t===ae.b_stat:e!==_._var&&e!==_._const&&e!==_.name&&!this.exprAllowed):!t.isExpr)},le.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},le.updateContext=function(e){var t,r=this.type;r.keyword&&e===_.dot?this.exprAllowed=!1:(t=r.updateContext)?t.call(this,e):this.exprAllowed=r.beforeExpr},_.parenR.updateContext=_.braceR.updateContext=function(){if(1!==this.context.length){var e=this.context.pop();e===ae.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},_.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ae.b_stat:ae.b_expr),this.exprAllowed=!0},_.dollarBraceL.updateContext=function(){this.context.push(ae.b_tmpl),this.exprAllowed=!0},_.parenL.updateContext=function(e){var t=e===_._if||e===_._for||e===_._with||e===_._while;this.context.push(t?ae.p_stat:ae.p_expr),this.exprAllowed=!0},_.incDec.updateContext=function(){},_._function.updateContext=_._class.updateContext=function(e){!e.beforeExpr||e===_.semi||e===_._else||e===_._return&&E.test(this.input.slice(this.lastTokEnd,this.start))||(e===_.colon||e===_.braceL)&&this.curContext()===ae.b_stat?this.context.push(ae.f_stat):this.context.push(ae.f_expr),this.exprAllowed=!1},_.backQuote.updateContext=function(){this.curContext()===ae.q_tmpl?this.context.pop():this.context.push(ae.q_tmpl),this.exprAllowed=!1},_.star.updateContext=function(e){if(e===_._function){var t=this.context.length-1;this.context[t]===ae.f_expr?this.context[t]=ae.f_expr_gen:this.context[t]=ae.f_gen}this.exprAllowed=!0},_.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==_.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ue="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ce=ue+" Extended_Pictographic",pe={9:ue,10:ce,11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},he="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",de="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",fe=de+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",me={9:de,10:fe,11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},ge={};function ye(e){var t=ge[e]={binary:P(pe[e]+" "+he),nonBinary:{General_Category:P(he),Script:P(me[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}ye(9),ye(10),ye(11);var ve=z.prototype,be=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":""),this.unicodeProperties=ge[e.options.ecmaVersion>=11?11:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function xe(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function we(e){return 36===e||e>=40&&e<=43||46===e||63===e||e>=91&&e<=94||e>=123&&e<=125}function _e(e){return e>=65&&e<=90||e>=97&&e<=122}function Ee(e){return _e(e)||95===e}function Se(e){return Ee(e)||Ae(e)}function Ae(e){return e>=48&&e<=57}function Ne(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function ke(e){return e>=65&&e<=70?e-65+10:e>=97&&e<=102?e-97+10:e-48}function Me(e){return e>=48&&e<=55}be.prototype.reset=function(e,t,r){var n=-1!==r.indexOf("u");this.start=0|e,this.source=t+"",this.flags=r,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},be.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)},be.prototype.at=function(e){var t=this.source,r=t.length;if(e>=r)return-1;var n=t.charCodeAt(e);if(!this.switchU||n<=55295||n>=57344||e+1>=r)return n;var i=t.charCodeAt(e+1);return i>=56320&&i<=57343?(n<<10)+i-56613888:n},be.prototype.nextIndex=function(e){var t=this.source,r=t.length;if(e>=r)return r;var n,i=t.charCodeAt(e);return!this.switchU||i<=55295||i>=57344||e+1>=r||(n=t.charCodeAt(e+1))<56320||n>57343?e+1:e+2},be.prototype.current=function(){return this.at(this.pos)},be.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},be.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},be.prototype.eat=function(e){return this.current()===e&&(this.advance(),!0)},ve.validateRegExpFlags=function(e){for(var t=e.validFlags,r=e.flags,n=0;n<r.length;n++){var i=r.charAt(n);-1===t.indexOf(i)&&this.raise(e.start,"Invalid regular expression flag"),r.indexOf(i,n+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}},ve.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))},ve.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,r=e.backReferenceNames;t<r.length;t+=1){var n=r[t];-1===e.groupNames.indexOf(n)&&e.raise("Invalid named capture referenced")}},ve.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")},ve.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},ve.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):!!(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},ve.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!r,!0}return e.pos=t,!1},ve.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},ve.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},ve.regexp_eatBracedQuantifier=function(e,t){var r=e.pos;if(e.eat(123)){var n=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(n=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return-1!==i&&i<n&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=r}return!1},ve.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},ve.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},ve.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1},ve.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):63===e.current()&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1},ve.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},ve.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1},ve.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!we(t)&&(e.lastIntValue=t,e.advance(),!0)},ve.regexp_eatPatternCharacters=function(e){for(var t=e.pos,r=0;-1!==(r=e.current())&&!we(r);)e.advance();return e.pos!==t},ve.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||t>=40&&t<=43||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},ve.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise("Duplicate capture group name"),void e.groupNames.push(e.lastStringValue);e.raise("Invalid group")}},ve.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1},ve.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=xe(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=xe(e.lastIntValue);return!0}return!1},ve.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,r=e.current();return e.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(r=e.lastIntValue),function(e){return f(e,!0)||36===e||95===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},ve.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,r=e.current();return e.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(r=e.lastIntValue),function(e){return m(e,!0)||36===e||95===e||8204===e||8205===e}(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)},ve.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)},ve.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var r=e.lastIntValue;if(e.switchU)return r>e.maxBackReference&&(e.maxBackReference=r),!0;if(r<=e.numCapturingParens)return!0;e.pos=t}return!1},ve.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1},ve.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},ve.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},ve.regexp_eatZero=function(e){return 48===e.current()&&!Ae(e.lookahead())&&(e.lastIntValue=0,e.advance(),!0)},ve.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},ve.regexp_eatControlLetter=function(e){var t=e.current();return!!_e(t)&&(e.lastIntValue=t%32,e.advance(),!0)},ve.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t,r=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&n>=55296&&n<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var s=e.lastIntValue;if(s>=56320&&s<=57343)return e.lastIntValue=1024*(n-55296)+(s-56320)+65536,!0}e.pos=i,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&((t=e.lastIntValue)>=0&&t<=1114111))return!0;e.switchU&&e.raise("Invalid unicode escape"),e.pos=r}return!1},ve.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},ve.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do{e.lastIntValue=10*e.lastIntValue+(t-48),e.advance()}while((t=e.current())>=48&&t<=57);return!0}return!1},ve.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(function(e){return 100===e||68===e||115===e||83===e||119===e||87===e}(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1},ve.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var r=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var n=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,r,n),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i),!0}return!1},ve.regexp_validateUnicodePropertyNameAndValue=function(e,t,r){O(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(r)||e.raise("Invalid property value")},ve.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")},ve.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Ee(t=e.current());)e.lastStringValue+=xe(t),e.advance();return""!==e.lastStringValue},ve.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Se(t=e.current());)e.lastStringValue+=xe(t),e.advance();return""!==e.lastStringValue},ve.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},ve.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1},ve.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var r=e.lastIntValue;!e.switchU||-1!==t&&-1!==r||e.raise("Invalid character class"),-1!==t&&-1!==r&&t>r&&e.raise("Range out of order in character class")}}},ve.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var r=e.current();(99===r||Me(r))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var n=e.current();return 93!==n&&(e.lastIntValue=n,e.advance(),!0)},ve.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},ve.regexp_eatClassControlLetter=function(e){var t=e.current();return!(!Ae(t)&&95!==t)&&(e.lastIntValue=t%32,e.advance(),!0)},ve.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1},ve.regexp_eatDecimalDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;Ae(r=e.current());)e.lastIntValue=10*e.lastIntValue+(r-48),e.advance();return e.pos!==t},ve.regexp_eatHexDigits=function(e){var t=e.pos,r=0;for(e.lastIntValue=0;Ne(r=e.current());)e.lastIntValue=16*e.lastIntValue+ke(r),e.advance();return e.pos!==t},ve.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var r=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=64*t+8*r+e.lastIntValue:e.lastIntValue=8*t+r}else e.lastIntValue=t;return!0}return!1},ve.regexp_eatOctalDigit=function(e){var t=e.current();return Me(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},ve.regexp_eatFixedHexDigits=function(e,t){var r=e.pos;e.lastIntValue=0;for(var n=0;n<t;++n){var i=e.current();if(!Ne(i))return e.pos=r,!1;e.lastIntValue=16*e.lastIntValue+ke(i),e.advance()}return!0};var Ce=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new R(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},Te=z.prototype;function Oe(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Te.next=function(){this.options.onToken&&this.options.onToken(new Ce(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Te.getToken=function(){return this.next(),new Ce(this)},"undefined"!=typeof Symbol&&(Te[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===_.eof,value:t}}}}),Te.curContext=function(){return this.context[this.context.length-1]},Te.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(_.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Te.readToken=function(e){return f(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Te.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);return e<=55295||e>=57344?e:(e<<10)+this.input.charCodeAt(this.pos+1)-56613888},Te.skipBlockComment=function(){var e,t=this.options.onComment&&this.curPosition(),r=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(S.lastIndex=r;(e=S.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,n),r,this.pos,t,this.curPosition())},Te.skipLineComment=function(e){for(var t=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!A(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,r,this.curPosition())},Te.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&N.test(String.fromCharCode(e))))break e;++this.pos}}},Te.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=e,this.value=t,this.updateContext(r)},Te.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(_.ellipsis)):(++this.pos,this.finishToken(_.dot))},Te.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(_.assign,2):this.finishOp(_.slash,1)},Te.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),r=1,n=42===e?_.star:_.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++r,n=_.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(_.assign,r+1):this.finishOp(n,r)},Te.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?_.logicalOR:_.logicalAND,2):61===t?this.finishOp(_.assign,2):this.finishOp(124===e?_.bitwiseOR:_.bitwiseAND,1)},Te.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(_.assign,2):this.finishOp(_.bitwiseXOR,1)},Te.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!E.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(_.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(_.assign,2):this.finishOp(_.plusMin,1)},Te.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),r=1;return t===e?(r=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(_.assign,r+1):this.finishOp(_.bitShift,r)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(r=2),this.finishOp(_.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Te.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(_.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(_.arrow)):this.finishOp(61===e?_.eq:_.prefix,1)},Te.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(_.parenL);case 41:return++this.pos,this.finishToken(_.parenR);case 59:return++this.pos,this.finishToken(_.semi);case 44:return++this.pos,this.finishToken(_.comma);case 91:return++this.pos,this.finishToken(_.bracketL);case 93:return++this.pos,this.finishToken(_.bracketR);case 123:return++this.pos,this.finishToken(_.braceL);case 125:return++this.pos,this.finishToken(_.braceR);case 58:return++this.pos,this.finishToken(_.colon);case 63:return++this.pos,this.finishToken(_.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(_.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(_.prefix,1)}this.raise(this.pos,"Unexpected character '"+Oe(e)+"'")},Te.finishOp=function(e,t){var r=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,r)},Te.readRegexp=function(){for(var e,t,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(E.test(n)&&this.raise(r,"Unterminated regular expression"),e)e=!1;else{if("["===n)t=!0;else if("]"===n&&t)t=!1;else if("/"===n&&!t)break;e="\\"===n}++this.pos}var i=this.input.slice(r,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new be(this));a.reset(r,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var l=null;try{l=new RegExp(i,o)}catch(u){}return this.finishToken(_.regexp,{pattern:i,flags:o,value:l})},Te.readInt=function(e,t){for(var r=this.pos,n=0,i=0,s=null==t?1/0:t;i<s;++i){var o=this.input.charCodeAt(this.pos),a=void 0;if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=e)break;++this.pos,n=n*e+a}return this.pos===r||null!=t&&this.pos-r!==t?null:n},Te.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var r=this.readInt(e);return null==r&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(r="undefined"!=typeof BigInt?BigInt(this.input.slice(t,this.pos)):null,++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(_.num,r)},Te.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var r=this.pos-t>=2&&48===this.input.charCodeAt(t);r&&this.strict&&this.raise(t,"Invalid number"),r&&/[89]/.test(this.input.slice(t,this.pos))&&(r=!1);var n=this.input.charCodeAt(this.pos);if(!r&&!e&&this.options.ecmaVersion>=11&&110===n){var i=this.input.slice(t,this.pos),s="undefined"!=typeof BigInt?BigInt(i):null;return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(_.num,s)}46!==n||r||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||r||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(t,this.pos),a=r?parseInt(o,8):parseFloat(o);return this.finishToken(_.num,a)},Te.readCodePoint=function(){var e;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var t=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(t,"Code point out of bounds")}else e=this.readHexChar(4);return e},Te.readString=function(e){for(var t="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===e)break;92===n?(t+=this.input.slice(r,this.pos),t+=this.readEscapedChar(!1),r=this.pos):(A(n,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(r,this.pos++),this.finishToken(_.string,t)};var Ie={};Te.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==Ie)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Te.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ie;this.raise(e,t)},Te.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==_.template&&this.type!==_.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(_.template,e)):36===r?(this.pos+=2,this.finishToken(_.dollarBraceL)):(++this.pos,this.finishToken(_.backQuote));if(92===r)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(A(r)){switch(e+=this.input.slice(t,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Te.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(_.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Te.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Oe(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(r,8);return n>255&&(r=r.slice(0,-1),n=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return A(t)?"":String.fromCharCode(t)}},Te.readHexChar=function(e){var t=this.pos,r=this.readInt(16,e);return null===r&&this.invalidStringToken(t,"Bad character escape sequence"),r},Te.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,r=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(m(i,n))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,e+=this.input.slice(r,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?f:m)(o,n)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Oe(o),r=this.pos}t=!1}return e+this.input.slice(r,this.pos)},Te.readWord=function(){var e=this.readWord1(),t=_.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=x[e]),this.finishToken(t,e)};var Pe="6.4.2";function De(e,t){return z.parse(e,t)}function Re(e,t,r){return z.parseExpressionAt(e,t,r)}function Le(e,t){return z.tokenizer(e,t)}z.acorn={Parser:z,version:Pe,defaultOptions:q,Position:D,SourceLocation:R,getLineInfo:L,Node:ne,TokenType:g,tokTypes:_,keywordTypes:x,TokContext:oe,tokContexts:ae,isIdentifierChar:m,isIdentifierStart:f,Token:Ce,isNewLine:A,lineBreak:E,lineBreakG:S,nonASCIIwhitespace:N}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix,loadStylesheet,installedCssChunks;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>"js/"+e+"."+{88946:"5899e2f380d56c439a46",90321:"ace40aa8bcdff9340a14",90988:"cf86dc4e0ef7b89ffc85"}[e]+".js",__webpack_require__.miniCssF=e=>"css/"+(3436===e?"mathalea2iep":e)+"."+{3436:"44b4d3f0b69188ee2a03",90321:"d9dbf3683c233515838a"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="mathalea:",__webpack_require__.l=(e,t,r,n)=>{if(inProgress[e])inProgress[e].push(t);else{var i,s;if(void 0!==r)for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){var l=o[a];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==dataWebpackPrefix+r){i=l;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+r),i.src=e),inProgress[e]=[t];var u=(t,r)=>{i.onerror=i.onload=null,clearTimeout(c);var n=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),t)return t(r)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),s&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/",loadStylesheet=e=>new Promise(((t,r)=>{var n=__webpack_require__.miniCssF(e),i=__webpack_require__.p+n;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var i=(o=r[n]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){var o;if((i=(o=s[n]).getAttribute("data-href"))===e||i===t)return o}})(n,i))return t();((e,t,r,n)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=s=>{if(i.onerror=i.onload=null,"load"===s.type)r();else{var o=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=a,i.parentNode.removeChild(i),n(l)}},i.href=t,document.head.appendChild(i)})(e,i,t,r)})),installedCssChunks={3436:0,90321:0,62566:0,78938:0,90988:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{90321:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{var e={3436:0,90321:0,62566:0,78938:0,90988:0};__webpack_require__.f.j=(t,r)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else if(90321!=t){var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var s=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(s,(r=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,n[1](o)}}),"chunk-"+t,t)}else e[t]=0};var t=(t,r)=>{var n,i,[s,o,a]=r,l=0;if(s.some((t=>0!==e[t]))){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);if(a)a(__webpack_require__)}for(t&&t(r);l<s.length;l++)i=s[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[s[l]]=0},r=self.webpackChunkmathalea=self.webpackChunkmathalea||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(37047),t=__webpack_require__.n(e);t().start({apiKey:"6f45f454e2366599256bddc91cd7000b",onError:function(e){if(/^file:\/\//.test(e.request.url))return!1;const{errorClass:t,stacktrace:r}=e.errors[0];return!r.some((e=>/^moz-extension:\/\//.test(e.file)))&&(!r.some((e=>/NS_ERROR_FAILURE/.test(e.errorClass)))&&(/ChunkLoadError/.test(t)?(alert("Il y a un problème de chargement de l’application, vous devriez essayer de vider le cache de votre navigateur pour le resoudre (ctrl+maj+suppr en général, puis cocher « fichier en cache »)."),!1):void 0))},appVersion:"2.8.1",releaseStage:"production"}),window.Bugsnag=t()})(),(()=>{"use strict";var e=__webpack_require__(37047),t=__webpack_require__.n(e);window.notify=function(e,r){"string"==typeof e&&(e=Error(e)),window.Bugsnag?(r&&t().addMetadata("ajouts",r),t().notify(e)):(console.error("message qui aurait été envoyé à bugsnag s'il avait été configuré",e),r&&console.log("avec les metadatas",r))}})(),(()=>{"use strict";var e=__webpack_require__(90988),t=__webpack_require__(71614),r=__webpack_require__.n(t);__webpack_require__(49398),__webpack_require__(36881),__webpack_require__(87837),__webpack_require__(40742),__webpack_require__(20450),__webpack_require__(84681),__webpack_require__(28196);function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}var i={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null},s=["Matrix","Array"],o=["number","BigNumber","Fraction"];var a=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(i)};function l(e){return"number"==typeof e}function u(e){return!(!e||"object"!=typeof e||"function"!=typeof e.constructor)&&(!0===e.isBigNumber&&"object"==typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"==typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function c(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function p(e){return e&&"object"==typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function h(e){return e&&!0===e.constructor.prototype.isUnit||!1}function d(e){return"string"==typeof e}n(a,i,{MATRIX_OPTIONS:s,NUMBER_OPTIONS:o});var f=Array.isArray;function m(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function g(e){return Array.isArray(e)||m(e)}function y(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function v(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function b(e){return e&&!0===e.constructor.prototype.isRange||!1}function x(e){return e&&!0===e.constructor.prototype.isIndex||!1}function w(e){return"boolean"==typeof e}function _(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function E(e){return e&&!0===e.constructor.prototype.isHelp||!1}function S(e){return"function"==typeof e}function A(e){return e instanceof Date}function N(e){return e instanceof RegExp}function k(e){return!(!e||"object"!=typeof e||e.constructor!==Object||c(e)||p(e))}function M(e){return null===e}function C(e){return void 0===e}function T(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function O(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function I(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function P(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function D(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function R(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function L(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function q(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function B(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function z(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function F(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function U(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function j(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function G(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function V(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function H(e){return e&&!0===e.constructor.prototype.isChain||!1}function W(e){var t=typeof e;return"object"===t?null===e?"null":Array.isArray(e)?"Array":e instanceof Date?"Date":e instanceof RegExp?"RegExp":u(e)?"BigNumber":c(e)?"Complex":p(e)?"Fraction":m(e)?"Matrix":h(e)?"Unit":x(e)?"Index":b(e)?"Range":_(e)?"ResultSet":z(e)?e.type:H(e)?"Chain":E(e)?"Help":"Object":"function"===t?"Function":t}function Y(e){var t=typeof e;if("number"===t||"string"===t||"boolean"===t||null==e)return e;if("function"==typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return Y(e)}));if(e instanceof Date)return new Date(e.valueOf());if(u(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return function(e,t){var r={};for(var n in e)Q(e,n)&&(r[n]=t(e[n]));return r}(e,Y)}function X(e,t){for(var r in t)Q(t,r)&&(e[r]=t[r]);return e}function Z(e,t){var r,n,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(n=0,i=e.length;n<i;n++)if(!Z(e[n],t[n]))return!1;return!0}if("function"==typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!Z(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}return e===t}function Q(e,t){return e&&Object.hasOwnProperty.call(e,t)}function K(e,t,r,n){function i(n){var i=function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n],s=e[i];void 0!==s&&(r[i]=s)}return r}(n,t.map(J));return function(e,t,r){if(!t.filter((e=>!function(e){return e&&"?"===e[0]}(e))).every((e=>void 0!==r[e]))){var n=t.filter((e=>void 0===r[e]));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map((e=>'"'.concat(e,'"'))).join(", "),"."))}}(e,t,n),r(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),n&&(i.meta=n),i}function J(e){return e&&"?"===e[0]?e.slice(1):e}var ee=K("ResultSet",[],(()=>{function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e}),{isClass:!0}),te=__webpack_require__(35148);function re(e){return"boolean"==typeof e||!!isFinite(e)&&e===Math.round(e)}var ne=Math.sign||function(e){return e>0?1:e<0?-1:0},ie=Math.log2||function(e){return Math.log(e)/Math.LN2},se=Math.log10||function(e){return Math.log(e)/Math.LN10},oe=Math.log1p||function(e){return Math.log(e+1)},ae=Math.cbrt||function(e){if(0===e)return e;var t,r=e<0;return r&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,r?-t:t},le=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function ue(e,t,r){var n={2:"0b",8:"0o",16:"0x"}[t],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!re(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!re(e))throw new Error("Value must be an integer");e<0&&(e+=2**r),i="i".concat(r)}var s="";return e<0&&(e=-e,s="-"),"".concat(s).concat(n).concat(e.toString(t)).concat(i)}function ce(e,t){if("function"==typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r,n,i="auto";if(t&&(t.notation&&(i=t.notation),l(t)?r=t:l(t.precision)&&(r=t.precision),t.wordSize&&"number"!=typeof(n=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return he(e,r);case"exponential":return de(e,r);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=fe(pe(e),t),n=r.exponent,i=r.coefficients,s=n%3==0?n:n<0?n-3-n%3:n-n%3;if(l(t))for(;t>i.length||n-s+1>i.length;)i.push(0);else for(var o=Math.abs(n-s)-(i.length-1),a=0;a<o;a++)i.push(0);var u=Math.abs(n-s),c=1;for(;u>0;)c++,u--;var p=i.slice(c).join(""),h=l(t)&&p.length||p.match(/[1-9]/)?"."+p:"",d=i.slice(0,c).join("")+h+"e"+(n>=0?"+":"")+s.toString();return r.sign+d}(e,r);case"bin":return ue(e,2,n);case"oct":return ue(e,8,n);case"hex":return ue(e,16,n);case"auto":return function(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=r&&void 0!==r.lowerExp?r.lowerExp:-3,i=r&&void 0!==r.upperExp?r.upperExp:5,s=pe(e),o=t?fe(s,t):s;if(o.exponent<n||o.exponent>=i)return de(e,t);var a=o.coefficients,l=o.exponent;a.length<t&&(a=a.concat(me(t-a.length))),a=a.concat(me(l-a.length+1+(a.length<t?t-a.length:0)));var u=l>0?l:0;return u<(a=me(-l).concat(a)).length-1&&a.splice(u+1,0,"."),o.sign+a.join("")}(e,r,t&&t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function pe(e){var t=String(e).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],i=parseFloat(t[4]||"0"),s=n.indexOf(".");i+=-1!==s?s-1:n.length-1;var o=n.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===o.length&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function he(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=pe(e),n="number"==typeof t?fe(r,r.exponent+1+t):r,i=n.coefficients,s=n.exponent+1,o=s+(t||0);return i.length<o&&(i=i.concat(me(o-i.length))),s<0&&(i=me(1-s).concat(i),s=1),s<i.length&&i.splice(s,0,0===s?"0.":"."),n.sign+i.join("")}function de(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=pe(e),n=t?fe(r,t):r,i=n.coefficients,s=n.exponent;i.length<t&&(i=i.concat(me(t-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function fe(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t&&n.splice(t,n.length-t)[0]>=5){var i=t-1;for(n[i]++;10===n[i];)n.pop(),0===i&&(n.unshift(0),r.exponent++,i++),n[--i]++}return r}function me(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}var ge=Number.EPSILON||2220446049250313e-31;function ye(e,t,r){if(null==r)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var n=Math.abs(e-t);return n<ge||n<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}var ve=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},be=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},xe=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},we=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},_e=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},Ee=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)},Se=K("Complex",[],(()=>(te.prototype.type="Complex",te.prototype.isComplex=!0,te.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},te.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},te.prototype.format=function(e){var t=this.im,r=this.re,n=ce(this.re,e),i=ce(this.im,e),s=l(e)?e:e?e.precision:null;if(null!==s){var o=Math.pow(10,-s);Math.abs(r/t)<o&&(r=0),Math.abs(t/r)<o&&(t=0)}return 0===t?n:0===r?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?n+" - i":n+" - "+i.substring(1)+"i":1===t?n+" + i":n+" + "+i+"i"},te.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"==typeof t)return te(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],n=arguments[1];if(l(r)){if(h(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),l(n))return new te({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},te.prototype.valueOf=te.prototype.toString,te.fromJSON=function(e){return new te(e)},te.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},te)),{isClass:!0}),Ae=K("Range",[],(()=>{function e(t,r,n){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var i=null!=t,s=null!=r,o=null!=n;if(i)if(u(t))t=t.toNumber();else if("number"!=typeof t)throw new TypeError("Parameter start must be a number");if(s)if(u(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter end must be a number");if(o)if(u(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(t):0,this.end=s?parseFloat(r):0,this.step=o?parseFloat(n):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!=typeof t)return null;var r=t.split(":").map((function(e){return parseFloat(e)}));if(r.some((function(e){return isNaN(e)})))return null;switch(r.length){case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[2],r[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.start,r=this.step,n=this.end-t;return ne(r)===ne(n)?e=Math.ceil(n/r):0===n&&(e=0),isNaN(e)&&(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,r=this.step,n=this.end,i=0;if(r>0)for(;t<n;)e(t,[i],this),t+=r,i++;else if(r<0)for(;t>n;)e(t,[i],this),t+=r,i++},e.prototype.map=function(e){var t=[];return this.forEach((function(r,n,i){t[n[0]]=e(r,n,i)})),t},e.prototype.toArray=function(){var e=[];return this.forEach((function(t,r){e[r[0]]=t})),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=ce(this.start,e);return 1!==this.step&&(t+=":"+ce(this.step,e)),t+=":"+ce(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e}),{isClass:!0});function Ne(e){var t=0,r=1,n=Object.create(null),i=Object.create(null),s=0,o=function(e){var o=i[e];if(o&&(delete n[o],delete i[e],--t,r===o)){if(!t)return s=0,void(r=1);for(;!hasOwnProperty.call(n,++r););}};return e=Math.abs(e),{hit:function(a){var l=i[a],u=++s;if(n[u]=a,i[a]=u,!l){if(++t<=e)return;return a=n[r],o(a),a}if(delete n[l],r===l)for(;!hasOwnProperty.call(n,++r););},delete:o,clear:function(){t=s=0,r=1,n=Object.create(null),i=Object.create(null)}}}function ke(e){var{hasher:t,limit:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=null==r?Number.POSITIVE_INFINITY:r,t=null==t?JSON.stringify:t,function n(){"object"!=typeof n.cache&&(n.cache={values:new Map,lru:Ne(r||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=t(i);if(n.cache.values.has(o))return n.cache.lru.hit(o),n.cache.values.get(o);var a=e.apply(e,i);return n.cache.values.set(o,a),n.cache.values.delete(n.cache.lru.hit(o)),a}}function Me(e){return Object.keys(e.signatures||{}).reduce((function(e,t){var r=(t.match(/,/g)||[]).length+1;return Math.max(e,r)}),-1)}var Ce=ke((function(e){return new e(1).exp()}),{hasher:Pe}),Te=ke((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:Pe}),Oe=ke((function(e){return e.acos(-1)}),{hasher:Pe}),Ie=ke((function(e){return Oe(e).times(2)}),{hasher:Pe});function Pe(e){return e[0].precision}var De=Math.PI,Re=2*Math.PI,Le=Math.E,qe=K("true",[],(()=>!0)),$e=K("false",[],(()=>!1)),Be=K("null",[],(()=>null)),ze=et("Infinity",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(1/0):1/0})),Fe=et("NaN",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(NaN):NaN})),Ue=et("pi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?Oe(r):De})),je=et("tau",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?Ie(r):Re})),Ge=et("e",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?Ce(r):Le})),Ve=et("phi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?Te(r):1.618033988749895})),He=et("LN2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(2).ln():Math.LN2})),We=et("LN10",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(10).ln():Math.LN10})),Ye=et("LOG2E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(1).div(new r(2).ln()):Math.LOG2E})),Xe=et("LOG10E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(1).div(new r(10).ln()):Math.LOG10E})),Ze=et("SQRT1_2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r("0.5").sqrt():Math.SQRT1_2})),Qe=et("SQRT2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:r}=e;return"BigNumber"===t.number?new r(2).sqrt():Math.SQRT2})),Ke=et("i",["Complex"],(e=>{var{Complex:t}=e;return t.I})),Je=K("version",[],(()=>"9.5.2"));function et(e,t,r){return K(e,t,r,{recreateOnConfigChange:!0})}var tt=__webpack_require__(53539),rt=K("BigNumber",["?on","config"],(e=>{var{on:t,config:r}=e,n=tt.clone({precision:r.precision,modulo:tt.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(e){return new n(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&n.config({precision:e.precision})})),n}),{isClass:!0}),nt=K("Matrix",[],(()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0}),it=K("replacer",[],(()=>function(e,t){return"number"!=typeof t||isFinite(t)&&!isNaN(t)?t:{mathjs:"number",value:String(t)}})),st=tr("speedOfLight","299792458","m s^-1"),ot=tr("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),at=tr("planckConstant","6.62607015e-34","J s"),lt=tr("reducedPlanckConstant","1.0545718176461565e-34","J s"),ut=tr("magneticConstant","1.25663706212e-6","N A^-2"),ct=tr("electricConstant","8.8541878128e-12","F m^-1"),pt=tr("vacuumImpedance","376.730313667","ohm"),ht=tr("coulomb","8.987551792261171e9","N m^2 C^-2"),dt=tr("elementaryCharge","1.602176634e-19","C"),ft=tr("bohrMagneton","9.2740100783e-24","J T^-1"),mt=tr("conductanceQuantum","7.748091729863649e-5","S"),gt=tr("inverseConductanceQuantum","12906.403729652257","ohm"),yt=tr("magneticFluxQuantum","2.0678338484619295e-15","Wb"),vt=tr("nuclearMagneton","5.0507837461e-27","J T^-1"),bt=tr("klitzing","25812.807459304513","ohm"),xt=tr("bohrRadius","5.29177210903e-11","m"),wt=tr("classicalElectronRadius","2.8179403262e-15","m"),_t=tr("electronMass","9.1093837015e-31","kg"),Et=tr("fermiCoupling","1.1663787e-5","GeV^-2"),St=rr("fineStructure",.0072973525693),At=tr("hartreeEnergy","4.3597447222071e-18","J"),Nt=tr("protonMass","1.67262192369e-27","kg"),kt=tr("deuteronMass","3.3435830926e-27","kg"),Mt=tr("neutronMass","1.6749271613e-27","kg"),Ct=tr("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Tt=tr("rydberg","10973731.568160","m^-1"),Ot=tr("thomsonCrossSection","6.6524587321e-29","m^2"),It=rr("weakMixingAngle",.2229),Pt=rr("efimovFactor",22.7),Dt=tr("atomicMass","1.66053906660e-27","kg"),Rt=tr("avogadro","6.02214076e23","mol^-1"),Lt=tr("boltzmann","1.380649e-23","J K^-1"),qt=tr("faraday","96485.33212331001","C mol^-1"),$t=tr("firstRadiation","3.7417718521927573e-16","W m^2"),Bt=tr("loschmidt","2.686780111798444e25","m^-3"),zt=tr("gasConstant","8.31446261815324","J K^-1 mol^-1"),Ft=tr("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Ut=tr("molarVolume","0.022413969545014137","m^3 mol^-1"),jt=rr("sackurTetrode",-1.16487052358),Gt=tr("secondRadiation","0.014387768775039337","m K"),Vt=tr("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Ht=tr("wienDisplacement","2.897771955e-3","m K"),Wt=tr("molarMass","0.99999999965e-3","kg mol^-1"),Yt=tr("molarMassC12","11.9999999958e-3","kg mol^-1"),Xt=tr("gravity","9.80665","m s^-2"),Zt=tr("planckLength","1.616255e-35","m"),Qt=tr("planckMass","2.176435e-8","kg"),Kt=tr("planckTime","5.391245e-44","s"),Jt=tr("planckCharge","1.87554603778e-18","C"),er=tr("planckTemperature","1.416785e+32","K");function tr(e,t,r){return K(e,["config","Unit","BigNumber"],(e=>{var{config:n,Unit:i,BigNumber:s}=e,o=new i("BigNumber"===n.number?new s(t):parseFloat(t),r);return o.fixPrefix=!0,o}))}function rr(e,t){return K(e,["config","BigNumber"],(e=>{var{config:r,BigNumber:n}=e;return"BigNumber"===r.number?new n(t):t}))}var nr=__webpack_require__(93808),ir=K("Fraction",[],(()=>(nr.prototype.type="Fraction",nr.prototype.isFraction=!0,nr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},nr.fromJSON=function(e){return new nr(e)},nr)),{isClass:!0});function sr(e,t,r){var n=new(0,e.constructor)(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!re(r))throw new Error("size must be an integer");if(e.greaterThan(n.pow(r-1).sub(1))||e.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(n.pow(r))),i="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(i);case 8:return"".concat(e.toOctal()).concat(i);case 16:return"".concat(e.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(t," not supported "))}}function or(e,t){if("function"==typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r,n,i="auto";if(void 0!==t&&(t.notation&&(i=t.notation),"number"==typeof t?r=t:t.precision&&(r=t.precision),t.wordSize&&"number"!=typeof(n=t.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function(e,t){return e.toFixed(t)}(e,r);case"exponential":return ar(e,r);case"engineering":return function(e,t){var r=e.e,n=r%3==0?r:r<0?r-3-r%3:r-r%3,i=e.mul(Math.pow(10,-n)),s=i.toPrecision(t);-1!==s.indexOf("e")&&(s=i.toString());return s+"e"+(r>=0?"+":"")+n.toString()}(e,r);case"bin":return sr(e,2,n);case"oct":return sr(e,8,n);case"hex":return sr(e,16,n);case"auto":var s=t&&void 0!==t.lowerExp?t.lowerExp:-3,o=t&&void 0!==t.upperExp?t.upperExp:5;if(e.isZero())return"0";var a=e.toSignificantDigits(r),l=a.e;return(l>=s&&l<o?a.toFixed():ar(e,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ar(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function lr(e,t){var r=e.length-t.length,n=e.length;return e.substring(r,n)===t}function ur(e,t){return"number"==typeof e?ce(e,t):u(e)?or(e,t):function(e){return e&&"object"==typeof e&&"number"==typeof e.s&&"number"==typeof e.n&&"number"==typeof e.d||!1}(e)?t&&"decimal"===t.fraction?e.toString():e.s*e.n+"/"+e.d:Array.isArray(e)?hr(e,t):d(e)?'"'+e+'"':"function"==typeof e?e.syntax?String(e.syntax):"function":e&&"object"==typeof e?"function"==typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((r=>'"'+r+'": '+ur(e[r],t))).join(", ")+"}":String(e)}function cr(e){for(var t=String(e),r="",n=0;n<t.length;){var i=t.charAt(n);"\\"===i?(r+=i,n++,""!==(i=t.charAt(n))&&-1!=='"\\/bfnrtu'.indexOf(i)||(r+="\\"),r+=i):r+='"'===i?'\\"':i,n++}return'"'+r+'"'}function pr(e){var t=String(e);return t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hr(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,i=0;i<n;i++)0!==i&&(r+=", "),r+=hr(e[i],t);return r+="]"}return ur(e,t)}function dr(e,t){if(!d(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+W(e)+", index: 0)");if(!d(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+W(t)+", index: 1)");return e===t?0:e>t?1:-1}function fr(e,t,r){if(!(this instanceof fr))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function mr(e,t,r){if(!(this instanceof mr))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function gr(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function yr(e,t,r){var n,i=e.length;if(i!==t[r])throw new fr(i,t[r]);if(r<t.length-1){var s=r+1;for(n=0;n<i;n++){var o=e[n];if(!Array.isArray(o))throw new fr(t.length-1,t.length,"<");yr(e[n],t,s)}}else for(n=0;n<i;n++)if(Array.isArray(e[n]))throw new fr(t.length+1,t.length,">")}function vr(e,t){if(0===t.length){if(Array.isArray(e))throw new fr(e.length,0)}else yr(e,t,0)}function br(e,t){if(!l(e)||!re(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"==typeof t&&e>=t)throw new mr(e,t)}function xr(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!l(e)||!re(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ur(t)+")")})),wr(e,t,0,void 0!==r?r:0),e}function wr(e,t,r,n){var i,s,o=e.length,a=t[r],l=Math.min(o,a);if(e.length=a,r<t.length-1){var u=r+1;for(i=0;i<l;i++)s=e[i],Array.isArray(s)||(s=[s],e[i]=s),wr(s,t,u,n);for(i=l;i<a;i++)s=[],e[i]=s,wr(s,t,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=l;i<a;i++)e[i]=n}}function _r(e,t){var r=Cr(e),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new fr(0,n,"!=");var i=Sr(t=Er(t,n));if(n!==i)throw new fr(i,n,"!=");try{return function(e,t){for(var r,n=e,i=t.length-1;i>0;i--){var s=t[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}(r,t)}catch(Le){if(Le instanceof fr)throw new fr(i,n,"!=");throw Le}}function Er(e,t){var r=Sr(e),n=e.slice(),i=e.indexOf(-1);if(e.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(!(t%r==0))throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);n[i]=-t/r}return n}function Sr(e){return e.reduce(((e,t)=>e*t),1)}function Ar(e,t){for(var r=t||gr(e);Array.isArray(e)&&1===e.length;)e=e[0],r.shift();for(var n=r.length;1===r[n-1];)n--;return n<r.length&&(e=Nr(e,n,0),r.length=n),e}function Nr(e,t,r){var n,i;if(r<t){var s=r+1;for(n=0,i=e.length;n<i;n++)e[n]=Nr(e[n],t,s)}else for(;Array.isArray(e);)e=e[0];return e}function kr(e,t,r,n){var i=n||gr(e);if(r)for(var s=0;s<r;s++)e=[e],i.unshift(1);for(e=Mr(e,t,0);i.length<t;)i.push(1);return e}function Mr(e,t,r){var n,i;if(Array.isArray(e)){var s=r+1;for(n=0,i=e.length;n<i;n++)e[n]=Mr(e[n],t,s)}else for(var o=r;o<t;o++)e=[e];return e}function Cr(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(r){Array.isArray(r)?r.forEach(e):t.push(r)})),t}function Tr(e,t){return Array.prototype.map.call(e,t)}function Or(e,t){Array.prototype.forEach.call(e,t)}function Ir(e,t){if(1!==gr(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}function Pr(e,t){if(1!==gr(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,(e=>t.test(e)))}function Dr(e,t){return Array.prototype.join.call(e,t)}function Rr(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],r=0;t[0]={value:e[0],identifier:0};for(var n=1;n<e.length;n++)e[n]===e[n-1]?r++:r=0,t.push({value:e[n],identifier:r});return t}function Lr(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],r=0;r<e.length;r++)t.push(e[r].value);return t}function qr(e,t){for(var r,n=0,i=0;i<e.length;i++){var s=e[i],o=Array.isArray(s);if(0===i&&o&&(n=s.length),o&&s.length!==n)return;var a=o?qr(s,t):t(s);if(void 0===r)r=a;else if(r!==a)return"mixed"}return r}fr.prototype=new RangeError,fr.prototype.constructor=RangeError,fr.prototype.name="DimensionError",fr.prototype.isDimensionError=!0,mr.prototype=new RangeError,mr.prototype.constructor=RangeError,mr.prototype.name="IndexError",mr.prototype.isIndexError=!0;var $r=K("DenseMatrix",["Matrix"],(e=>{var{Matrix:t}=e;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!d(t))throw new Error("Invalid datatype: "+t);if(m(e))"DenseMatrix"===e.type?(this._data=Y(e._data),this._size=Y(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&f(e.data)&&f(e.size))this._data=e.data,this._size=e.size,vr(this._data,this._size),this._datatype=t||e.datatype;else if(f(e))this._data=p(e),this._size=gr(this._data),vr(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+W(e)+")");this._data=[],this._size=[0],this._datatype=t}}function n(e,t){if(!x(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n=t.size();if(n.length!==e._size.length)throw new fr(n.length,e._size.length);for(var s=t.min(),o=t.max(),a=0,l=e._size.length;a<l;a++)br(s[a],e._size[a]),br(o[a],e._size[a]);return new r(i(e._data,t,n.length,0),e._datatype)}function i(e,t,r,n){var s=n===r-1,o=t.dimension(n);return s?o.map((function(t){return br(t,e.length),e[t]})).valueOf():o.map((function(s){return br(s,e.length),i(e[s],t,r,n+1)})).valueOf()}function s(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,s=t.size(),a=t.isScalar();if(m(r)?(i=r.size(),r=r.valueOf()):i=gr(r),a){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),r,n)}else{if(s.length<e._size.length)throw new fr(s.length,e._size.length,"<");if(i.length<s.length){for(var l=0,u=0;1===s[l]&&1===i[l];)l++;for(;1===s[l];)u++,l++;r=kr(r,s.length,u,i)}if(!Z(s,i))throw new fr(s,i,">");var p=t.max().map((function(e){return e+1}));c(e,p,n);var h=s.length;o(e._data,t,r,h,0)}return e}function o(e,t,r,n,i){var s=i===n-1,a=t.dimension(i);s?a.forEach((function(t,n){br(t),e[t]=r[n[0]]})):a.forEach((function(s,a){br(s),o(e[s],t,r[a[0]],n,i+1)}))}function a(e,t,r){if(0===t.length){for(var n=e._data;f(n);)n=n[0];return n}return e._size=t.slice(0),e._data=xr(e._data,e._size,r),e}function c(e,t,r){for(var n=e._size.slice(0),i=!1;n.length<t.length;)n.push(0),i=!0;for(var s=0,o=t.length;s<o;s++)t[s]>n[s]&&(n[s]=t[s],i=!0);i&&a(e,n,r)}function p(e){for(var t=0,r=e.length;t<r;t++){var n=e[t];f(n)?e[t]=p(n):n&&!0===n.isMatrix&&(e[t]=p(n.valueOf()))}return e}return r.prototype=new t,r.prototype.createDenseMatrix=function(e,t){return new r(e,t)},r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return qr(this._data,W)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(e,t){return new r(e,t)},r.prototype.subset=function(e,t,r){switch(arguments.length){case 1:return n(this,e);case 2:case 3:return s(this,e,t,r);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(e){if(!f(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new fr(e.length,this._size.length);for(var t=0;t<e.length;t++)br(e[t],this._size[t]);for(var r=this._data,n=0,i=e.length;n<i;n++){var s=e[n];br(s,r.length),r=r[s]}return r},r.prototype.set=function(e,t,r){if(!f(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new fr(e.length,this._size.length,"<");var n,i,s,o=e.map((function(e){return e+1}));c(this,o,r);var a=this._data;for(n=0,i=e.length-1;n<i;n++)br(s=e[n],a.length),a=a[s];return br(s=e[e.length-1],a.length),a[s]=t,this},r.prototype.resize=function(e,t,r){if(!g(e))throw new TypeError("Array or Matrix expected");var n=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));return a(r?this.clone():this,n,t)},r.prototype.reshape=function(e,t){var r=t?this.clone():this;r._data=_r(r._data,e);var n=r._size.reduce(((e,t)=>e*t));return r._size=Er(e,n),r},r.prototype.clone=function(){return new r({data:Y(this._data),size:Y(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(e){var t=this,n=function r(n,i){return f(n)?n.map((function(e,t){return r(e,i.concat(t))})):e(n,i,t)}(this._data,[]);return new r(n,void 0!==this._datatype?qr(n,W):void 0)},r.prototype.forEach=function(e){var t=this;!function r(n,i){f(n)?n.forEach((function(e,t){r(e,i.concat(t))})):e(n,i,t)}(this._data,[])},r.prototype[Symbol.iterator]=function*(){yield*function*e(t,r){if(f(t))for(var n=0;n<t.length;n++)yield*e(t[n],r.concat(n));else yield{value:t,index:r}}(this._data,[])},r.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t=this._data;for(var n of t)e.push(new r([n],this._datatype));return e},r.prototype.columns=function(){var e=this,t=[],n=this.size();if(2!==n.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,s=function(n){var s=i.map((e=>[e[n]]));t.push(new r(s,e._datatype))},o=0;o<n[1];o++)s(o);return t},r.prototype.toArray=function(){return Y(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(e){return ur(this._data,e)},r.prototype.toString=function(){return ur(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(e){if(e){if(u(e)&&(e=e.toNumber()),!l(e)||!re(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,n=e<0?-e:0,i=this._size[0],s=this._size[1],o=Math.min(i-n,s-t),a=[],c=0;c<o;c++)a[c]=this._data[c+n][c+t];return new r({data:a,size:[o],datatype:this._datatype})},r.diagonal=function(e,t,n,i){if(!f(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(u(e)&&(e=e.toNumber()),!l(e)||!re(e)||e<1)throw new Error("Size values must be positive integers");return e})),n){if(u(n)&&(n=n.toNumber()),!l(n)||!re(n))throw new TypeError("The parameter k must be an integer number")}else n=0;var s,o=n>0?n:0,a=n<0?-n:0,c=e[0],p=e[1],h=Math.min(c-a,p-o);if(f(t)){if(t.length!==h)throw new Error("Invalid value array length");s=function(e){return t[e]}}else if(m(t)){var d=t.size();if(1!==d.length||d[0]!==h)throw new Error("Invalid matrix length");s=function(e){return t.get([e])}}else s=function(){return t};i||(i=u(s(0))?s(0).mul(0):0);var g=[];if(e.length>0){g=xr(g,e,i);for(var y=0;y<h;y++)g[y+a][y+o]=s(y)}return new r({data:g,size:[c,p]})},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(e,t){if(!(l(e)&&re(e)&&l(t)&&re(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return br(e,this._size[0]),br(t,this._size[0]),r._swapRows(e,t,this._data),this},r._swapRows=function(e,t,r){var n=r[e];r[e]=r[t],r[t]=n},r}),{isClass:!0}),Br=__webpack_require__(63581);function zr(e,t){if(Gr(e)&&Ur(e,t))return e[t];if("function"==typeof e[t]&&jr(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}function Fr(e,t,r){if(Gr(e)&&Ur(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Ur(e,t){return!(!e||"object"!=typeof e)&&(!!Q(Vr,t)||!(t in Object.prototype)&&!(t in Function.prototype))}function jr(e,t){return null!=e&&"function"==typeof e[t]&&(!(Q(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e))&&(!!Q(Hr,t)||!(t in Object.prototype)&&!(t in Function.prototype)))}function Gr(e){return"object"==typeof e&&e&&e.constructor===Object}var Vr={length:!0,name:!0},Hr={toString:!0,valueOf:!0,toLocaleString:!0};class Wr{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return zr(this.wrappedObject,e)}set(e,t){return Fr(this.wrappedObject,e,t),this}has(e){return t=this.wrappedObject,e in t;var t}}function Yr(){return new Map}function Xr(e){if(!e)return Yr();if(Zr(e))return e;if(k(e))return new Wr(e);throw new Error("createMap can create maps from objects or Maps")}function Zr(e){return!!e&&(e instanceof Map||e instanceof Wr||"function"==typeof e.set&&"function"==typeof e.get&&"function"==typeof e.keys&&"function"==typeof e.has)}function Qr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i of r)if(i)if(Zr(i))for(var s of i.keys())e.set(s,i.get(s));else if(k(i))for(var o of Object.keys(i))e.set(o,i[o]);return e}var Kr=function(){return Kr=Br.create,Br},Jr=K("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var{BigNumber:t,Complex:r,DenseMatrix:n,Fraction:i}=e,s=Kr();return s.types=[{name:"number",test:l},{name:"Complex",test:c},{name:"BigNumber",test:u},{name:"Fraction",test:p},{name:"Unit",test:h},{name:"string",test:d},{name:"Chain",test:H},{name:"Array",test:f},{name:"Matrix",test:m},{name:"DenseMatrix",test:y},{name:"SparseMatrix",test:v},{name:"Range",test:b},{name:"Index",test:x},{name:"boolean",test:w},{name:"ResultSet",test:_},{name:"Help",test:E},{name:"function",test:S},{name:"Date",test:A},{name:"RegExp",test:N},{name:"null",test:M},{name:"undefined",test:C},{name:"AccessorNode",test:T},{name:"ArrayNode",test:O},{name:"AssignmentNode",test:I},{name:"BlockNode",test:P},{name:"ConditionalNode",test:D},{name:"ConstantNode",test:R},{name:"FunctionNode",test:q},{name:"FunctionAssignmentNode",test:L},{name:"IndexNode",test:B},{name:"Node",test:z},{name:"ObjectNode",test:F},{name:"OperatorNode",test:U},{name:"ParenthesisNode",test:j},{name:"RangeNode",test:G},{name:"SymbolNode",test:V},{name:"Map",test:Zr},{name:"Object",test:k}],s.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(t||en(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return r||tn(e),new r(e,0)}},{from:"number",to:"string",convert:function(e){return e+""}},{from:"BigNumber",to:"Complex",convert:function(e){return r||tn(e),new r(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return r||tn(e),new r(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||rn(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||en(e);try{return new t(e)}catch(r){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){i||rn(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){r||tn(e);try{return new r(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||en(e),new t(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||rn(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return n||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new n(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}],s}));function en(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function tn(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function rn(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}function nn(e){for(var t=0;t<e.length;t++)if(g(e[t]))return!0;return!1}function sn(e,t){m(e)&&(e=e.valueOf());for(var r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?sn(i,t):t(i)}}function on(e,t,r){return e&&"function"==typeof e.map?e.map((function(e){return on(e,t,r)})):t(e)}function an(e,t,r){var n=Array.isArray(e)?gr(e):e.size();if(t<0||t>=n.length)throw new mr(t,n.length);return m(e)?e.create(ln(e.valueOf(),t,r)):ln(e,t,r)}function ln(e,t,r){var n,i,s,o;if(t<=0){if(Array.isArray(e[0])){for(o=function(e){var t,r,n=e.length,i=e[0].length,s=[];for(r=0;r<i;r++){var o=[];for(t=0;t<n;t++)o.push(e[t][r]);s.push(o)}return s}(e),i=[],n=0;n<o.length;n++)i[n]=ln(o[n],t-1,r);return i}for(s=e[0],n=1;n<e.length;n++)s=r(s,e[n]);return s}for(i=[],n=0;n<e.length;n++)i[n]=ln(e[n],t-1,r);return i}function un(e,t,r,n,i,s,o,a,l,u,c){var p,h,d,f,m=e._values,g=e._index,y=e._ptr;if(n)for(h=y[t],d=y[t+1],p=h;p<d;p++)r[f=g[p]]!==s?(r[f]=s,o.push(f),u?(n[f]=l?a(m[p],c):a(c,m[p]),i[f]=s):n[f]=m[p]):(n[f]=l?a(m[p],n[f]):a(n[f],m[p]),i[f]=s);else for(h=y[t],d=y[t+1],p=h;p<d;p++)r[f=g[p]]!==s?(r[f]=s,o.push(f)):i[f]=s}var cn="isInteger",pn=K(cn,["typed"],(e=>{var{typed:t}=e;return t(cn,{number:re,BigNumber:function(e){return e.isInt()},Fraction:function(e){return 1===e.d&&isFinite(e.n)},"Array | Matrix":function(e){return on(e,this)}})})),hn="isNumeric",dn=K(hn,["typed"],(e=>{var{typed:t}=e;return t(hn,{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(e){return on(e,this)}})})),fn="number";function mn(e){return e<0}function gn(e){return e>0}function yn(e){return 0===e}function vn(e){return Number.isNaN(e)}mn.signature=fn,gn.signature=fn,yn.signature=fn,vn.signature=fn;var bn="isPositive",xn=K(bn,["typed"],(e=>{var{typed:t}=e;return t(bn,{number:gn,BigNumber:function(e){return!e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s>0&&e.n>0},Unit:function(e){return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),wn="isNaN",_n=K(wn,["typed"],(e=>{var{typed:t}=e;return t(wn,{number:vn,BigNumber:function(e){return e.isNaN()},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":function(e){return on(e,Number.isNaN)}})}));function En(e,t,r){if(null==r)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var n=e.minus(t).abs();if(n.isZero())return!0;var i=e.constructor.max(e.abs(),t.abs());return n.lte(i.times(r))}return!1}var Sn="equalScalar",An=K(Sn,["typed","config"],(e=>{var{typed:t,config:r}=e;return t(Sn,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return ye(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||En(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,r){return ye(e.re,t.re,r)&&ye(e.im,t.im,r)}(e,t,r.epsilon)},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)}})}));K(Sn,["typed","config"],(e=>{var{typed:t,config:r}=e;return t(Sn,{"number, number":function(e,t){return ye(e,t,r.epsilon)}})}));var Nn=K("number",["typed"],(e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t,r,n=(r=(t=e).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:t,radix:{"0b":2,"0o":8,"0x":16}[r[1]],integerPart:r[2],fractionalPart:r[3]}:null;if(n)return function(e){for(var t=parseInt(e.integerPart,e.radix),r=0,n=0;n<e.fractionalPart.length;n++)r+=parseInt(e.fractionalPart[n],e.radix)/Math.pow(e.radix,n+1);var i=t+r;if(isNaN(i))throw new SyntaxError('String "'+e.input+'" is no valid number');return i}(n);var i=0,s=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(i=Number(s[2]),e=s[1]);var o=Number(e);if(isNaN(o))throw new SyntaxError('String "'+e+'" is no valid number');if(s){if(o>2**i-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));o>=2**(i-1)&&(o-=2**i)}return o},BigNumber:function(e){return e.toNumber()},Fraction:function(e){return e.valueOf()},Unit:function(e){throw new Error("Second argument with valueless unit expected")},null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":function(e){return on(e,this)}});return r.fromJSON=function(e){return parseFloat(e.value)},r})),kn="boolean",Mn=K(kn,["typed"],(e=>{var{typed:t}=e;return t(kn,{"":function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var r=Number(e);if(""!==e&&!isNaN(r))return!!r;throw new Error('Cannot convert "'+e+'" to a boolean')},"Array | Matrix":function(e){return on(e,this)}})})),Cn=K("complex",["typed","Complex"],(e=>{var{typed:t,Complex:r}=e;return t("complex",{"":function(){return r.ZERO},number:function(e){return new r(e,0)},"number, number":function(e,t){return new r(e,t)},"BigNumber, BigNumber":function(e,t){return new r(e.toNumber(),t.toNumber())},Fraction:function(e){return new r(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return r(e)},null:function(e){return r(0)},Object:function(e){if("re"in e&&"im"in e)return new r(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new r(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(e){return on(e,this)}})})),Tn="splitUnit",On=K(Tn,["typed"],(e=>{var{typed:t}=e;return t(Tn,{"Unit, Array":function(e,t){return e.splitUnit(t)}})})),In="number",Pn="number, number";function Dn(e){return Math.abs(e)}function Rn(e,t){return e+t}function Ln(e,t){return e*t}function qn(e){return-e}function $n(e){return e}function Bn(e){return ae(e)}function zn(e){return Math.ceil(e)}function Fn(e){return e*e*e}function Un(e){return Math.exp(e)}function jn(e){return le(e)}function Gn(e,t){if(!re(e)||!re(t))throw new Error("Parameters in function gcd must be integer numbers");for(var r;0!==t;)r=e%t,e=t,t=r;return e<0?-e:e}function Vn(e,t){if(!re(e)||!re(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var r,n=e*t;0!==t;)t=e%(r=t),e=r;return Math.abs(n/e)}function Hn(e){return Math.log(e)}function Wn(e){return se(e)}function Yn(e){return ie(e)}function Xn(e,t){if(t>0)return e-t*Math.floor(e/t);if(0===t)return e;throw new Error("Cannot calculate mod for a negative divisor")}function Zn(e,t){var r=t<0;if(r&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===e)return r?1/0:0;if(!isFinite(e))return r?0:e;var n=Math.pow(Math.abs(e),1/t);return n=e<0?-n:n,r?1/n:n}function Qn(e){return ne(e)}function Kn(e){return e*e}function Jn(e,t){var r,n,i,s=0,o=1,a=1,l=0;if(!re(e)||!re(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)i=e-(n=Math.floor(e/t))*t,r=s,s=o-n*s,o=r,r=a,a=l-n*a,l=r,e=t,t=i;return e<0?[-e,-o,-l]:[e,e?o:0,l]}function ei(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function ti(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(he(e,t))}Dn.signature=In,Rn.signature=Pn,Ln.signature=Pn,qn.signature=In,$n.signature=In,Bn.signature=In,zn.signature=In,Fn.signature=In,Un.signature=In,jn.signature=In,Gn.signature=Pn,Vn.signature=Pn,Hn.signature=In,Wn.signature=In,Yn.signature=In,Xn.signature=Pn,Zn.signature=Pn,Qn.signature=In,Kn.signature=In,Jn.signature=Pn,ei.signature=Pn,ti.signature=Pn;var ri="unaryPlus",ni=K(ri,["typed","config","BigNumber"],(e=>{var{typed:t,config:r,BigNumber:n}=e;return t(ri,{number:$n,Complex:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},"Array | Matrix":function(e){return on(e,this,!0)},"boolean | string":function(e){return"BigNumber"===r.number?new n(+e):+e}})})),ii="apply",si=K(ii,["typed","isInteger"],(e=>{var{typed:t,isInteger:r}=e;return t(ii,{"Array | Matrix, number | BigNumber, function":function(e,t,n){if(!r(t))throw new TypeError("Integer number expected for dimension");var i=Array.isArray(e)?gr(e):e.size();if(t<0||t>=i.length)throw new mr(t,i.length);return m(e)?e.create(oi(e.valueOf(),t,n)):oi(e,t,n)}})}));function oi(e,t,r){var n,i,s;if(t<=0){if(Array.isArray(e[0])){for(s=function(e){var t,r,n=e.length,i=e[0].length,s=[];for(r=0;r<i;r++){var o=[];for(t=0;t<n;t++)o.push(e[t][r]);s.push(o)}return s}(e),i=[],n=0;n<s.length;n++)i[n]=oi(s[n],t-1,r);return i}return r(e)}for(i=[],n=0;n<e.length;n++)i[n]=oi(e[n],t-1,r);return i}var ai="cube",li=K(ai,["typed"],(e=>{var{typed:t}=e;return t(ai,{number:Fn,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},Fraction:function(e){return e.pow(3)},"Array | Matrix":function(e){return on(e,this,!0)},Unit:function(e){return e.pow(3)}})})),ui="expm1",ci=K(ui,["typed","Complex"],(e=>{var{typed:t,Complex:r}=e;return t(ui,{number:jn,Complex:function(e){var t=Math.exp(e.re);return new r(t*Math.cos(e.im)-1,t*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)},"Array | Matrix":function(e){return on(e,this)}})})),pi="log10",hi=K(pi,["typed","config","Complex"],(e=>{var{typed:t,config:r,Complex:n}=e;return t(pi,{number:function(e){return e>=0||r.predictable?Wn(e):new n(e,0).log().div(Math.LN10)},Complex:function(e){return new n(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||r.predictable?e.log():new n(e.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(e){return on(e,this)}})})),di=K("multiplyScalar",["typed"],(e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":Ln,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":function(e,t){var r=t.clone();return r.value=null===r.value?r._normalize(e):this(r.value,e),r},"Unit, number | Fraction | BigNumber | Complex":function(e,t){var r=e.clone();return r.value=null===r.value?r._normalize(t):this(r.value,t),r},"Unit, Unit":function(e,t){return e.multiply(t)}})})),fi="sign",mi=K(fi,["typed","BigNumber","Fraction","complex"],(e=>{var{typed:t,BigNumber:r,complex:n,Fraction:i}=e;return t(fi,{number:Qn,Complex:function(e){return 0===e.im?n(Qn(e.re)):e.sign()},BigNumber:function(e){return new r(e.cmp(0))},Fraction:function(e){return new i(e.s,1)},"Array | Matrix":function(e){return on(e,this,!0)},Unit:function(e){return this(e.value)}})})),gi="square",yi=K(gi,["typed"],(e=>{var{typed:t}=e;return t(gi,{number:Kn,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},Fraction:function(e){return e.mul(e)},"Array | Matrix":function(e){return on(e,this,!0)},Unit:function(e){return e.pow(2)}})}));function vi(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new r(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e}return wi(e,t,(function(e,t){return e&t}))}function bi(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,r=t.precision;t.config({precision:1e9});var n=e.plus(new t(1));return n.s=-n.s||null,t.config({precision:r}),n}function xi(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);var n=new r(-1);return e.isZero()||t.eq(n)||e.eq(t)?t:t.isZero()||e.eq(n)?e:e.isFinite()&&t.isFinite()?wi(e,t,(function(e,t){return e|t})):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?n:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function wi(e,t,r){var n,i,s,o,a,l=e.constructor,u=+(e.s<0),c=+(t.s<0);if(u){n=_i(bi(e));for(var p=0;p<n.length;++p)n[p]^=1}else n=_i(e);if(c){i=_i(bi(t));for(var h=0;h<i.length;++h)i[h]^=1}else i=_i(t);n.length<=i.length?(s=n,o=i,a=u):(s=i,o=n,a=c);var d=s.length,f=o.length,m=1^r(u,c),g=new l(1^m),y=new l(1),v=new l(2),b=l.precision;for(l.config({precision:1e9});d>0;)r(s[--d],o[--f])===m&&(g=g.plus(y)),y=y.times(v);for(;f>0;)r(a,o[--f])===m&&(g=g.plus(y)),y=y.times(v);return l.config({precision:b}),0===m&&(g.s=-g.s),g}function _i(e){for(var t=e.d,r=t[0]+"",n=1;n<t.length;++n){for(var i=t[n]+"",s=7-i.length;s--;)i="0"+i;r+=i}for(var o=r.length;"0"===r.charAt(o);)o--;var a=e.e,l=r.slice(0,o+1||1),u=l.length;if(a>0)if(++a>u)for(a-=u;a--;)l+="0";else a<u&&(l=l.slice(0,a)+"."+l.slice(a));for(var c=[0],p=0;p<l.length;){for(var h=c.length;h--;)c[h]*=10;c[0]+=parseInt(l.charAt(p++));for(var d=0;d<c.length;++d)c[d]>1&&(null!==c[d+1]&&void 0!==c[d+1]||(c[d+1]=0),c[d+1]+=c[d]>>1,c[d]&=1)}return c.reverse()}function Ei(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var r=e.constructor;if(e.isNaN()||t.isNaN())return new r(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new r(0);var n=new r(-1);return e.eq(n)?bi(t):t.eq(n)?bi(e):e.isFinite()&&t.isFinite()?wi(e,t,(function(e,t){return e^t})):e.isFinite()||t.isFinite()?new r(e.isNegative()===t.isNegative()?1/0:-1/0):n}function Si(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new r(2).pow(t)):new r(NaN)}function Ai(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var r=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new r(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new r(2).pow(t)).floor():e.isNegative()?new r(-1):e.isFinite()?new r(0):new r(NaN)}var Ni="number, number";function ki(e,t){if(!re(e)||!re(t))throw new Error("Integers expected in function bitAnd");return e&t}function Mi(e){if(!re(e))throw new Error("Integer expected in function bitNot");return~e}function Ci(e,t){if(!re(e)||!re(t))throw new Error("Integers expected in function bitOr");return e|t}function Ti(e,t){if(!re(e)||!re(t))throw new Error("Integers expected in function bitXor");return e^t}function Oi(e,t){if(!re(e)||!re(t))throw new Error("Integers expected in function leftShift");return e<<t}function Ii(e,t){if(!re(e)||!re(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function Pi(e,t){if(!re(e)||!re(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}ki.signature=Ni,Mi.signature="number",Ci.signature=Ni,Ti.signature=Ni,Oi.signature=Ni,Ii.signature=Ni,Pi.signature=Ni;var Di="bitNot",Ri=K(Di,["typed"],(e=>{var{typed:t}=e;return t(Di,{number:Mi,BigNumber:bi,"Array | Matrix":function(e){return on(e,this)}})})),Li=K("arg",["typed"],(e=>{var{typed:t}=e;return t("arg",{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},"Array | Matrix":function(e){return on(e,this)}})})),qi=K("im",["typed"],(e=>{var{typed:t}=e;return t("im",{number:function(e){return 0},BigNumber:function(e){return e.mul(0)},Fraction:function(e){return e.mul(0)},Complex:function(e){return e.im},"Array | Matrix":function(e){return on(e,this)}})})),$i="number, number";function Bi(e){return!e}function zi(e,t){return!(!e&&!t)}function Fi(e,t){return!!e!=!!t}function Ui(e,t){return!(!e||!t)}Bi.signature="number",zi.signature=$i,Fi.signature=$i,Ui.signature=$i;var ji=K("not",["typed"],(e=>{var{typed:t}=e;return t("not",{number:Bi,Complex:function(e){return 0===e.re&&0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},Unit:function(e){return null===e.value||this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Gi=K("filter",["typed"],(e=>{var{typed:t}=e;return t("filter",{"Array, function":Vi,"Matrix, function":function(e,t){return e.create(Vi(e.toArray(),t))},"Array, RegExp":Pr,"Matrix, RegExp":function(e,t){return e.create(Pr(e.toArray(),t))}})}));function Vi(e,t){var r=Me(t);return Ir(e,(function(e,n,i){return 1===r?t(e):2===r?t(e,[n]):t(e,[n],i)}))}var Hi="forEach",Wi=K(Hi,["typed"],(e=>{var{typed:t}=e;return t(Hi,{"Array, function":Yi,"Matrix, function":function(e,t){return e.forEach(t)}})}));function Yi(e,t){var r=Me(t);!function n(i,s){Array.isArray(i)?Or(i,(function(e,t){n(e,s.concat(t))})):1===r?t(i):2===r?t(i,s):t(i,s,e)}(e,[])}var Xi=K("map",["typed"],(e=>{var{typed:t}=e;return t("map",{"Array, function":Zi,"Matrix, function":function(e,t){return e.map(t)}})}));function Zi(e,t){var r=Me(t);return function n(i,s){return Array.isArray(i)?i.map((function(e,t){return n(e,s.concat(t))})):1===r?t(i):2===r?t(i,s):t(i,s,e)}(e,[])}var Qi=K("erf",["typed"],(e=>{var{typed:t}=e;return t("name",{number:function(e){var t=Math.abs(e);return t>=rs?ne(e):t<=Ki?ne(e)*function(e){var t,r=e*e,n=es[0][4]*r,i=r;for(t=0;t<3;t+=1)n=(n+es[0][t])*r,i=(i+ts[0][t])*r;return e*(n+es[0][3])/(i+ts[0][3])}(t):t<=4?ne(e)*(1-function(e){var t,r=es[1][8]*e,n=e;for(t=0;t<7;t+=1)r=(r+es[1][t])*e,n=(n+ts[1][t])*e;var i=(r+es[1][7])/(n+ts[1][7]),s=parseInt(16*e)/16,o=(e-s)*(e+s);return Math.exp(-s*s)*Math.exp(-o)*i}(t)):ne(e)*(1-function(e){var t,r=1/(e*e),n=es[2][5]*r,i=r;for(t=0;t<4;t+=1)n=(n+es[2][t])*r,i=(i+ts[2][t])*r;var s=r*(n+es[2][4])/(i+ts[2][4]);s=(Ji-s)/e,r=parseInt(16*e)/16;var o=(e-r)*(e+r);return Math.exp(-r*r)*Math.exp(-o)*s}(t))},"Array | Matrix":function(e){return on(e,this)}})})),Ki=.46875,Ji=.5641895835477563,es=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],ts=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],rs=Math.pow(2,53),ns="format",is=K(ns,["typed"],(e=>{var{typed:t}=e;return t(ns,{any:ur,"any, Object | function | number":ur})})),ss=K("oct",["typed","format"],(e=>{var{typed:t,format:r}=e;return t("oct",{"number | BigNumber":function(e){return r(e,{notation:"oct"})},"number | BigNumber, number":function(e,t){return r(e,{notation:"oct",wordSize:t})}})})),os="print",as=K(os,["typed"],(e=>{var{typed:t}=e;return t(os,{"string, Object | Array":ls,"string, Object | Array, number | Object":ls})}));function ls(e,t,r){return e.replace(/\$([\w.]+)/g,(function(e,n){for(var i=n.split("."),s=t[i.shift()];i.length&&void 0!==s;){var o=i.shift();s=o?s[o]:s+"."}return void 0!==s?d(s)?s:ur(s,r):e}))}var us="isPrime",cs=K(us,["typed"],(e=>{var{typed:t}=e;return t(us,{number:function(e){if(0*e!=0)return!1;if(e<=3)return e>1;if(e%2==0||e%3==0)return!1;for(var t=5;t*t<=e;t+=6)if(e%t==0||e%(t+2)==0)return!1;return!0},BigNumber:function(e){if(0*e.toNumber()!=0)return!1;if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;if(e.lt(Math.pow(2,32))){for(var t=e.toNumber(),r=5;r*r<=t;r+=6)if(t%r==0||t%(r+2)==0)return!1;return!0}function n(e,t,r){for(var n=1;!t.eq(0);)t.mod(2).eq(0)?(t=t.div(2),e=e.mul(e).mod(r)):(t=t.sub(1),n=e.mul(n).mod(r));return n}for(var i=e.constructor.clone({precision:2*e.toFixed(0).length}),s=0,o=(e=new i(e)).sub(1);o.mod(2).eq(0);)o=o.div(2),s+=1;var a=null;if(e.lt("3317044064679887385961981"))a=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter((t=>t<e));else{var l=Math.min(e.toNumber()-2,Math.floor(2*Math.pow(e.toFixed(0).length*Math.log(10),2)));a=[];for(var u=2;u<=l;u+=1)a.push(l)}for(var c=0;c<a.length;c+=1){var p=a[c],h=n(e.sub(e).add(p),o,e);if(!h.eq(1))for(var d=0,f=h;!f.eq(e.sub(1));d+=1,f=f.mul(f).mod(e))if(d===s-1)return!1}return!0},"Array | Matrix":function(e){return on(e,this)}})})),ps="acos",hs=K(ps,["typed","config","Complex"],(e=>{var{typed:t,config:r,Complex:n}=e;return t(ps,{number:function(e){return e>=-1&&e<=1||r.predictable?Math.acos(e):new n(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()},"Array | Matrix":function(e){return on(e,this)}})})),ds="number";function fs(e){return ve(e)}function ms(e){return Math.atan(1/e)}function gs(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function ys(e){return Math.asin(1/e)}function vs(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function bs(e){return Math.acos(1/e)}function xs(e){var t=1/e,r=Math.sqrt(t*t-1);return Math.log(r+t)}function ws(e){return be(e)}function _s(e){return xe(e)}function Es(e){return 1/Math.tan(e)}function Ss(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function As(e){return 1/Math.sin(e)}function Ns(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*ne(e)}function ks(e){return 1/Math.cos(e)}function Ms(e){return 2/(Math.exp(e)+Math.exp(-e))}function Cs(e){return _e(e)}fs.signature=ds,ms.signature=ds,gs.signature=ds,ys.signature=ds,vs.signature=ds,bs.signature=ds,xs.signature=ds,ws.signature=ds,_s.signature=ds,Es.signature=ds,Ss.signature=ds,As.signature=ds,Ns.signature=ds,ks.signature=ds,Ms.signature=ds,Cs.signature=ds;var Ts="acot",Os=K(Ts,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t(Ts,{number:ms,Complex:function(e){return e.acot()},BigNumber:function(e){return new r(1).div(e).atan()},"Array | Matrix":function(e){return on(e,this)}})})),Is="acsc",Ps=K(Is,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:r,Complex:n,BigNumber:i}=e;return t(Is,{number:function(e){return e<=-1||e>=1||r.predictable?ys(e):new n(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new i(1).div(e).asin()},"Array | Matrix":function(e){return on(e,this)}})})),Ds="asec",Rs=K(Ds,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:r,Complex:n,BigNumber:i}=e;return t(Ds,{number:function(e){return e<=-1||e>=1||r.predictable?bs(e):new n(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new i(1).div(e).acos()},"Array | Matrix":function(e){return on(e,this)}})})),Ls="asin",qs=K(Ls,["typed","config","Complex"],(e=>{var{typed:t,config:r,Complex:n}=e;return t(Ls,{number:function(e){return e>=-1&&e<=1||r.predictable?Math.asin(e):new n(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()},"Array | Matrix":function(e){return on(e,this,!0)}})})),$s=K("atan",["typed"],(e=>{var{typed:t}=e;return t("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()},"Array | Matrix":function(e){return on(e,this,!0)}})})),Bs="atanh",zs=K(Bs,["typed","config","Complex"],(e=>{var{typed:t,config:r,Complex:n}=e;return t(Bs,{number:function(e){return e<=1&&e>=-1||r.predictable?_s(e):new n(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()},"Array | Matrix":function(e){return on(e,this,!0)}})})),Fs="cosh",Us=K(Fs,["typed"],(e=>{var{typed:t}=e;return t(Fs,{number:we,Complex:function(e){return e.cosh()},BigNumber:function(e){return e.cosh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),js="coth",Gs=K(js,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t(js,{number:Ss,Complex:function(e){return e.coth()},BigNumber:function(e){return new r(1).div(e.tanh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Vs="csch",Hs=K(Vs,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t(Vs,{number:Ns,Complex:function(e){return e.csch()},BigNumber:function(e){return new r(1).div(e.sinh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Ws="sech",Ys=K(Ws,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t(Ws,{number:Ms,Complex:function(e){return e.sech()},BigNumber:function(e){return new r(1).div(e.cosh())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Xs="sinh",Zs=K(Xs,["typed"],(e=>{var{typed:t}=e;return t(Xs,{number:Cs,Complex:function(e){return e.sinh()},BigNumber:function(e){return e.sinh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this,!0)}})})),Qs=K("tanh",["typed"],(e=>{var{typed:t}=e;return t("tanh",{number:Ee,Complex:function(e){return e.tanh()},BigNumber:function(e){return e.tanh()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this,!0)}})}));function Ks(e,t){if(t<e)return 1;if(t===e)return t;var r=t+e>>1;return Ks(e,r)*Ks(r+1,t)}function Js(e,t){if(!re(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!re(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");var r=e-t;return t<r?Ks(r+1,e)/Ks(1,t):Ks(t+1,e)/Ks(1,r)}Js.signature="number, number";var eo="combinations",to=K(eo,["typed"],(e=>{var{typed:t}=e;return t(eo,{"number, number":Js,"BigNumber, BigNumber":function(e,t){var r,n,i=e.constructor,s=e.minus(t),o=new i(1);if(!ro(e)||!ro(t))throw new TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw new TypeError("k must be less than n in function combinations");if(r=o,t.lt(s))for(n=o;n.lte(s);n=n.plus(o))r=r.times(t.plus(n)).dividedBy(n);else for(n=o;n.lte(t);n=n.plus(o))r=r.times(s.plus(n)).dividedBy(n);return r}})}));function ro(e){return e.isInteger()&&e.gte(0)}var no=__webpack_require__(68116),io=no(Date.now());function so(e){var t,r;return t=null===(r=e)?io:no(String(r)),function(){return t()}}var oo="pickRandom",ao=K(oo,["typed","config","?on"],(e=>{var{typed:t,config:r,on:n}=e,i=so(r.randomSeed);return n&&n("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=so(e.randomSeed))})),t(oo,{"Array | Matrix":function(e){return s(e,{})},"Array | Matrix, Object":function(e,t){return s(e,t)},"Array | Matrix, number":function(e,t){return s(e,{number:t})},"Array | Matrix, Array | Matrix":function(e,t){return s(e,{weights:t})},"Array | Matrix, Array | Matrix, number":function(e,t,r){return s(e,{number:r,weights:t})},"Array | Matrix, number, Array | Matrix":function(e,t,r){return s(e,{number:t,weights:r})}});function s(e,t){var{number:r,weights:n,elementWise:s=!0}=t,o=void 0===r;o&&(r=1);var a=m(e)?e.create:m(n)?n.create:null;e=e.valueOf(),n&&(n=n.valueOf()),!0===s&&(e=Cr(e),n=Cr(n));var u=0;if(void 0!==n){if(n.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var c=0,p=n.length;c<p;c++){if(!l(n[c])||n[c]<0)throw new Error("Weights must be an array of positive numbers");u+=n[c]}}for(var h,d=e.length,f=[];f.length<r;){if(void 0===n)h=e[Math.floor(i()*d)];else for(var g=i()*u,y=0,v=e.length;y<v;y++)if((g-=n[y])<0){h=e[y];break}f.push(h)}return o?f[0]:a?a(f):f}}));function lo(e,t){var r=[];if((e=e.slice(0)).length>1)for(var n=0,i=e.shift();n<i;n++)r.push(lo(e,t));else for(var s=0,o=e.shift();s<o;s++)r.push(t());return r}var uo="randomInt",co=K(uo,["typed","config","?on"],(e=>{var{typed:t,config:r,on:n}=e,i=so(r.randomSeed);return n&&n("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=so(e.randomSeed))})),t(uo,{"":()=>o(0,1),number:e=>o(0,e),"number, number":(e,t)=>o(e,t),"Array | Matrix":e=>s(e,0,1),"Array | Matrix, number":(e,t)=>s(e,0,t),"Array | Matrix, number, number":(e,t,r)=>s(e,t,r)});function s(e,t,r){var n=lo(e.valueOf(),(()=>o(t,r)));return m(e)?e.create(n):n}function o(e,t){return Math.floor(e+i()*(t-e))}})),po="clone",ho=K(po,["typed"],(e=>{var{typed:t}=e;return t(po,{any:Y})})),fo="hasNumericValue",mo=K(fo,["typed","isNumeric"],(e=>{var{typed:t,isNumeric:r}=e;return t(fo,{string:function(e){return e.trim().length>0&&!isNaN(Number(e))},any:function(e){return r(e)}})})),go="typeOf",yo=K(go,["typed"],(e=>{var{typed:t}=e;return t(go,{any:W})})),vo="string",bo=K(vo,["typed"],(e=>{var{typed:t}=e;return t(vo,{"":function(){return""},number:ce,null:function(e){return"null"},boolean:function(e){return e+""},string:function(e){return e},"Array | Matrix":function(e){return on(e,this)},any:function(e){return String(e)}})})),xo=K("fraction",["typed","Fraction"],(e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new r(e)},string:function(e){return new r(e)},"number, number":function(e,t){return new r(e,t)},null:function(e){return new r(0)},BigNumber:function(e){return new r(e.toString())},Fraction:function(e){return e},Object:function(e){return new r(e)},"Array | Matrix":function(e){return on(e,this)}})})),wo="unaryMinus",_o=K(wo,["typed"],(e=>{var{typed:t}=e;return t(wo,{number:qn,Complex:function(e){return e.neg()},BigNumber:function(e){return e.neg()},Fraction:function(e){return e.neg()},Unit:function(e){var t=e.clone();return t.value=this(e.value),t},"Array | Matrix":function(e){return on(e,this,!0)}})})),Eo="addScalar",So=K(Eo,["typed"],(e=>{var{typed:t}=e;return t(Eo,{"number, number":Rn,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":function(e,t){if(null===e.value||void 0===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value||void 0===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var r=e.clone();return r.value=this(r.value,t.value),r.fixPrefix=!1,r}})})),Ao=K("exp",["typed"],(e=>{var{typed:t}=e;return t("exp",{number:Un,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()},"Array | Matrix":function(e){return on(e,this)}})})),No="log2",ko=K(No,["typed","config","Complex"],(e=>{var{typed:t,config:r,Complex:n}=e;return t(No,{number:function(e){return e>=0||r.predictable?Yn(e):i(new n(e,0))},Complex:i,BigNumber:function(e){return!e.isNegative()||r.predictable?e.log(2):i(new n(e.toNumber(),0))},"Array | Matrix":function(e){return on(e,this)}});function i(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new n(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}})),Mo=K("sqrt",["config","typed","Complex"],(e=>{var{config:t,typed:r,Complex:n}=e;return r("sqrt",{number:i,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber())},"Array | Matrix":function(e){return on(e,this,!0)},Unit:function(e){return e.pow(.5)}});function i(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new n(e,0).sqrt()}})),Co="conj",To=K(Co,["typed"],(e=>{var{typed:t}=e;return t(Co,{number:function(e){return e},BigNumber:function(e){return e},Complex:function(e){return e.conjugate()},"Array | Matrix":function(e){return on(e,this)}})})),Oo="getMatrixDataType",Io=K(Oo,["typed"],(e=>{var{typed:t}=e;return t(Oo,{Array:function(e){return qr(e,W)},Matrix:function(e){return e.getDataType()}})})),Po="mode",Do=K(Po,["typed","isNaN","isNumeric"],(e=>{var{typed:t,isNaN:r,isNumeric:n}=e;return t(Po,{"Array | Matrix":i,"...":function(e){return i(e)}});function i(e){if(0===(e=Cr(e.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var t={},i=[],s=0,o=0;o<e.length;o++){var a=e[o];if(n(a)&&r(a))throw new Error("Cannot calculate mode of an array containing NaN values");a in t||(t[a]=0),t[a]++,t[a]===s?i.push(a):t[a]>s&&(s=t[a],i=[a])}return i}})),Ro=K("bin",["typed","format"],(e=>{var{typed:t,format:r}=e;return t("bin",{"number | BigNumber":function(e){return r(e,{notation:"bin"})},"number | BigNumber, number":function(e,t){return r(e,{notation:"bin",wordSize:t})}})})),Lo="acosh",qo=K(Lo,["typed","config","Complex"],(e=>{var{typed:t,config:r,Complex:n}=e;return t(Lo,{number:function(e){return e>=1||r.predictable?fs(e):e<=-1?new n(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new n(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()},"Array | Matrix":function(e){return on(e,this)}})})),$o="acsch",Bo=K($o,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t($o,{number:vs,Complex:function(e){return e.acsch()},BigNumber:function(e){return new r(1).div(e).asinh()},"Array | Matrix":function(e){return on(e,this)}})})),zo=K("asinh",["typed"],(e=>{var{typed:t}=e;return t("asinh",{number:ws,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()},"Array | Matrix":function(e){return on(e,this,!0)}})})),Fo=K("cos",["typed"],(e=>{var{typed:t}=e;return t("cos",{number:Math.cos,Complex:function(e){return e.cos()},BigNumber:function(e){return e.cos()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Uo=K("csc",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t("csc",{number:As,Complex:function(e){return e.csc()},BigNumber:function(e){return new r(1).div(e.sin())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),jo=K("sin",["typed"],(e=>{var{typed:t}=e;return t("sin",{number:Math.sin,Complex:function(e){return e.sin()},BigNumber:function(e){return e.sin()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this,!0)}})})),Go="combinationsWithRep",Vo=K(Go,["typed"],(e=>{var{typed:t}=e;return t(Go,{"number, number":function(e,t){if(!re(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!re(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw new TypeError("k must be less than or equal to n + k - 1");return t<e-1?Ks(e,e+t-1)/Ks(1,t):Ks(t+1,e+t-1)/Ks(1,e-1)},"BigNumber, BigNumber":function(e,t){var r,n,i=new(0,e.constructor)(1),s=e.minus(i);if(!Ho(e)||!Ho(t))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(r=i,t.lt(s))for(n=i;n.lte(s);n=n.plus(i))r=r.times(t.plus(n)).dividedBy(n);else for(n=i;n.lte(t);n=n.plus(i))r=r.times(s.plus(n)).dividedBy(n);return r}})}));function Ho(e){return e.isInteger()&&e.gte(0)}var Wo="random",Yo=K(Wo,["typed","config","?on"],(e=>{var{typed:t,config:r,on:n}=e,i=so(r.randomSeed);return n&&n("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=so(e.randomSeed))})),t(Wo,{"":()=>o(0,1),number:e=>o(0,e),"number, number":(e,t)=>o(e,t),"Array | Matrix":e=>s(e,0,1),"Array | Matrix, number":(e,t)=>s(e,0,t),"Array | Matrix, number, number":(e,t,r)=>s(e,t,r)});function s(e,t,r){var n=lo(e.valueOf(),(()=>o(t,r)));return m(e)?e.create(n):n}function o(e,t){return e+i()*(t-e)}})),Xo="isNegative",Zo=K(Xo,["typed"],(e=>{var{typed:t}=e;return t(Xo,{number:mn,BigNumber:function(e){return e.isNeg()&&!e.isZero()&&!e.isNaN()},Fraction:function(e){return e.s<0},Unit:function(e){return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Qo=K("SparseMatrix",["typed","equalScalar","Matrix"],(e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!d(t))throw new Error("Invalid datatype: "+t);if(m(e))!function(e,t,r){"SparseMatrix"===t.type?(e._values=t._values?Y(t._values):void 0,e._index=Y(t._index),e._ptr=Y(t._ptr),e._size=Y(t._size),e._datatype=r||t._datatype):s(e,t.valueOf(),r||t._datatype)}(this,e,t);else if(e&&f(e.index)&&f(e.ptr)&&f(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(f(e))s(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+W(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function s(e,n,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var s=n.length,o=0,a=r,l=0;if(d(i)&&(a=t.find(r,[i,i])||r,l=t.convert(0,i)),s>0){var u=0;do{e._ptr.push(e._index.length);for(var c=0;c<s;c++){var p=n[c];if(f(p)){if(0===u&&o<p.length&&(o=p.length),u<p.length){var h=p[u];a(h,l)||(e._values.push(h),e._index.push(c))}}else 0===u&&o<1&&(o=1),a(p,l)||(e._values.push(p),e._index.push(c))}u++}while(u<o)}e._ptr.push(e._index.length),e._size=[s,o]}function o(e,t){if(!x(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var r,n,s,o,a=t.size();if(a.length!==e._size.length)throw new fr(a.length,e._size.length);var l=t.min(),u=t.max();for(r=0,n=e._size.length;r<n;r++)br(l[r],e._size[r]),br(u[r],e._size[r]);var c=e._values,p=e._index,h=e._ptr,d=t.dimension(0),f=t.dimension(1),m=[],g=[];d.forEach((function(e,t){g[e]=t[0],m[e]=!0}));var y=c?[]:void 0,v=[],b=[];return f.forEach((function(e){for(b.push(v.length),s=h[e],o=h[e+1];s<o;s++)r=p[s],!0===m[r]&&(v.push(g[r]),y&&y.push(c[s]))})),b.push(v.length),new i({values:y,index:v,ptr:b,size:a,datatype:e._datatype})}function a(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,s=t.size(),o=t.isScalar();if(m(r)?(i=r.size(),r=r.toArray()):i=gr(r),o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),r,n)}else{if(1!==s.length&&2!==s.length)throw new fr(s.length,e._size.length,"<");if(i.length<s.length){for(var a=0,l=0;1===s[a]&&1===i[a];)a++;for(;1===s[a];)l++,a++;r=kr(r,s.length,l,i)}if(!Z(s,i))throw new fr(s,i,">");for(var u=t.min()[0],c=t.min()[1],p=i[0],h=i[1],d=0;d<p;d++)for(var f=0;f<h;f++){var g=r[d][f];e.set([d+u,f+c],g,n)}}return e}function c(e,t,r,n){if(r-t==0)return r;for(var i=t;i<r;i++)if(n[i]===e)return i;return t}function p(e,t,r,n,i,s,o){i.splice(e,0,n),s.splice(e,0,t);for(var a=r+1;a<o.length;a++)o[a]++}function h(e,n,i,s){var o=s||0,a=r,l=0;d(e._datatype)&&(a=t.find(r,[e._datatype,e._datatype])||r,l=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var u,c,p,h=!a(o,l),f=e._size[0],m=e._size[1];if(i>m){for(c=m;c<i;c++)if(e._ptr[c]=e._values.length,h)for(u=0;u<f;u++)e._values.push(o),e._index.push(u);e._ptr[i]=e._values.length}else i<m&&(e._ptr.splice(i+1,m-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(m=i,n>f){if(h){var g=0;for(c=0;c<m;c++){e._ptr[c]=e._ptr[c]+g,p=e._ptr[c+1]+g;var y=0;for(u=f;u<n;u++,y++)e._values.splice(p+y,0,o),e._index.splice(p+y,0,u),g++}e._ptr[m]=e._values.length}}else if(n<f){var v=0;for(c=0;c<m;c++){e._ptr[c]=e._ptr[c]-v;var b=e._ptr[c],x=e._ptr[c+1]-v;for(p=b;p<x;p++)(u=e._index[p])>n-1&&(e._values.splice(p,1),e._index.splice(p,1),v++)}e._ptr[c]=e._values.length}return e._size[0]=n,e._size[1]=i,e}function y(e,t,r,n,i){var s,o,a=n[0],l=n[1],u=[];for(s=0;s<a;s++)for(u[s]=[],o=0;o<l;o++)u[s][o]=0;for(o=0;o<l;o++)for(var c=r[o],p=r[o+1],h=c;h<p;h++)u[s=t[h]][o]=e?i?Y(e[h]):e[h]:1;return u}return i.prototype=new n,i.prototype.createSparseMatrix=function(e,t){return new i(e,t)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return qr(this._values,W)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(e,t){return new i(e,t)},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},i.prototype.subset=function(e,t,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,e);case 2:case 3:return a(this,e,t,r);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(e){if(!f(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new fr(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],r=e[1];br(t,this._size[0]),br(r,this._size[1]);var n=c(t,this._ptr[r],this._ptr[r+1],this._index);return n<this._ptr[r+1]&&this._index[n]===t?this._values[n]:0},i.prototype.set=function(e,n,i){if(!f(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new fr(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var s=e[0],o=e[1],a=this._size[0],l=this._size[1],u=r,m=0;d(this._datatype)&&(u=t.find(r,[this._datatype,this._datatype])||r,m=t.convert(0,this._datatype)),(s>a-1||o>l-1)&&(h(this,Math.max(s+1,a),Math.max(o+1,l),i),a=this._size[0],l=this._size[1]),br(s,a),br(o,l);var g=c(s,this._ptr[o],this._ptr[o+1],this._index);return g<this._ptr[o+1]&&this._index[g]===s?u(n,m)?function(e,t,r,n,i){r.splice(e,1),n.splice(e,1);for(var s=t+1;s<i.length;s++)i[s]--}(g,o,this._values,this._index,this._ptr):this._values[g]=n:p(g,s,o,n,this._values,this._index,this._ptr),this},i.prototype.resize=function(e,t,r){if(!g(e))throw new TypeError("Array or Matrix expected");var n=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));if(2!==n.length)throw new Error("Only two dimensions matrix are supported");return n.forEach((function(e){if(!l(e)||!re(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ur(n)+")")})),h(r?this.clone():this,n[0],n[1],t)},i.prototype.reshape=function(e,t){if(!f(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach((function(t){if(!l(t)||!re(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+ur(e)+")")}));var r=this._size[0]*this._size[1];if(r!==(e=Er(e,r))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return n;for(var i=[],s=0;s<n._ptr.length;s++)for(var o=0;o<n._ptr[s+1]-n._ptr[s];o++)i.push(s);for(var a=n._values.slice(),u=n._index.slice(),h=0;h<n._index.length;h++){var d=u[h],m=i[h],g=d*n._size[1]+m;i[h]=g%e[1],u[h]=Math.floor(g/e[1])}n._values.length=0,n._index.length=0,n._ptr.length=e[1]+1,n._size=e.slice();for(var y=0;y<n._ptr.length;y++)n._ptr[y]=0;for(var v=0;v<a.length;v++){var b=u[v],x=i[v],w=a[v];p(c(b,n._ptr[x],n._ptr[x+1],n._index),b,x,w,n._values,n._index,n._ptr)}return n},i.prototype.clone=function(){return new i({values:this._values?Y(this._values):void 0,index:Y(this._index),ptr:Y(this._ptr),size:Y(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(e,n){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var s=this;return function(e,n,s,o,a,l,u){var c=[],p=[],h=[],f=r,m=0;d(e._datatype)&&(f=t.find(r,[e._datatype,e._datatype])||r,m=t.convert(0,e._datatype));for(var g=function(e,t,r){e=l(e,t,r),f(e,m)||(c.push(e),p.push(t))},y=o;y<=a;y++){h.push(c.length);var v=e._ptr[y],b=e._ptr[y+1];if(u)for(var x=v;x<b;x++){var w=e._index[x];w>=n&&w<=s&&g(e._values[x],w-n,y-o)}else{for(var _={},E=v;E<b;E++){_[e._index[E]]=e._values[E]}for(var S=n;S<=s;S++){g(S in _?_[S]:0,S-n,y-o)}}}return h.push(c.length),new i({values:c,index:p,ptr:h,size:[s-n+1,a-o+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(t,r,n){return e(t,[r,n],s)}),n)},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this._size[0],n=this._size[1],i=0;i<n;i++){var s=this._ptr[i],o=this._ptr[i+1];if(t)for(var a=s;a<o;a++){var l=this._index[a];e(this._values[a],[l,i],this)}else{for(var u={},c=s;c<o;c++){u[this._index[c]]=this._values[c]}for(var p=0;p<r;p++){e(p in u?u[p]:0,[p,i],this)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var e=this._size[1],t=0;t<e;t++)for(var r=this._ptr[t],n=this._ptr[t+1],i=r;i<n;i++){var s=this._index[i];yield{value:this._values[i],index:[s,t]}}},i.prototype.toArray=function(){return y(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return y(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(e){for(var t=this._size[0],r=this._size[1],n=this.density(),i="Sparse Matrix ["+ur(t,e)+" x "+ur(r,e)+"] density: "+ur(n,e)+"\n",s=0;s<r;s++)for(var o=this._ptr[s],a=this._ptr[s+1],l=o;l<a;l++){i+="\n    ("+ur(this._index[l],e)+", "+ur(s,e)+") ==> "+(this._values?ur(this._values[l],e):"X")}return i},i.prototype.toString=function(){return ur(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(e){if(e){if(u(e)&&(e=e.toNumber()),!l(e)||!re(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,r=e<0?-e:0,n=this._size[0],s=this._size[1],o=Math.min(n-r,s-t),a=[],c=[],p=[];p[0]=0;for(var h=t;h<s&&a.length<o;h++)for(var d=this._ptr[h],f=this._ptr[h+1],m=d;m<f;m++){var g=this._index[m];if(g===h-t+r){a.push(this._values[m]),c[a.length-1]=g-r;break}}return p.push(a.length),new i({values:a,index:c,ptr:p,size:[o,1]})},i.fromJSON=function(e){return new i(e)},i.diagonal=function(e,n,s,o,a){if(!f(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(u(e)&&(e=e.toNumber()),!l(e)||!re(e)||e<1)throw new Error("Size values must be positive integers");return e})),s){if(u(s)&&(s=s.toNumber()),!l(s)||!re(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var c=r,p=0;d(a)&&(c=t.find(r,[a,a])||r,p=t.convert(0,a));var h,g=s>0?s:0,y=s<0?-s:0,v=e[0],b=e[1],x=Math.min(v-y,b-g);if(f(n)){if(n.length!==x)throw new Error("Invalid value array length");h=function(e){return n[e]}}else if(m(n)){var w=n.size();if(1!==w.length||w[0]!==x)throw new Error("Invalid matrix length");h=function(e){return n.get([e])}}else h=function(){return n};for(var _=[],E=[],S=[],A=0;A<b;A++){S.push(_.length);var N=A-g;if(N>=0&&N<x){var k=h(N);c(k,p)||(E.push(N+y),_.push(k))}}return S.push(_.length),new i({values:_,index:E,ptr:S,size:[v,b]})},i.prototype.swapRows=function(e,t){if(!(l(e)&&re(e)&&l(t)&&re(t)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return br(e,this._size[0]),br(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(e,t,r,n,i){for(var s=n[e],o=n[e+1],a=s;a<o;a++)i(r[a],t[a])},i._swapRows=function(e,t,r,n,i,s){for(var o=0;o<r;o++){var a=s[o],l=s[o+1],u=c(e,a,l,i),p=c(t,a,l,i);if(u<l&&p<l&&i[u]===e&&i[p]===t){if(n){var h=n[u];n[u]=n[p],n[p]=h}}else if(u<l&&i[u]===e&&(p>=l||i[p]!==t)){var d=n?n[u]:void 0;i.splice(p,0,t),n&&n.splice(p,0,d),i.splice(p<=u?u+1:u,1),n&&n.splice(p<=u?u+1:u,1)}else if(p<l&&i[p]===t&&(u>=l||i[u]!==e)){var f=n?n[p]:void 0;i.splice(u,0,e),n&&n.splice(u,0,f),i.splice(u<=p?p+1:p,1),n&&n.splice(u<=p?p+1:p,1)}}},i}),{isClass:!0}),Ko="matrix",Jo=K(Ko,["typed","Matrix","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:i}=e;return t(Ko,{"":function(){return s([])},string:function(e){return s([],e)},"string, string":function(e,t){return s([],e,t)},Array:function(e){return s(e)},Matrix:function(e){return s(e,e.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(e,t,r){if("dense"===t||"default"===t||void 0===t)return new n(e,r);if("sparse"===t)return new i(e,r);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}})),ea=K("abs",["typed"],(e=>{var{typed:t}=e;return t("abs",{number:Dn,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},Fraction:function(e){return e.abs()},"Array | Matrix":function(e){return on(e,this,!0)},Unit:function(e){return e.abs()}})})),ta=K("algorithm01",["typed"],(e=>{var{typed:t}=e;return function(e,r,n,i){var s=e._data,o=e._size,a=e._datatype,l=r._values,u=r._index,c=r._ptr,p=r._size,h=r._datatype;if(o.length!==p.length)throw new fr(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,f,m=o[0],g=o[1],y="string"==typeof a&&a===h?a:void 0,v=y?t.find(n,[y,y]):n,b=[];for(d=0;d<m;d++)b[d]=[];var x=[],w=[];for(f=0;f<g;f++){for(var _=f+1,E=c[f],S=c[f+1],A=E;A<S;A++)x[d=u[A]]=i?v(l[A],s[d][f]):v(s[d][f],l[A]),w[d]=_;for(d=0;d<m;d++)w[d]===_?b[d][f]=x[d]:b[d][f]=s[d][f]}return e.createDenseMatrix({data:b,size:[m,g],datatype:y})}})),ra=K("algorithm04",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return function(e,n,i){var s=e._values,o=e._index,a=e._ptr,l=e._size,u=e._datatype,c=n._values,p=n._index,h=n._ptr,d=n._size,f=n._datatype;if(l.length!==d.length)throw new fr(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");var m,g=l[0],y=l[1],v=r,b=0,x=i;"string"==typeof u&&u===f&&(m=u,v=t.find(r,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));var w,_,E,S,A,N=s&&c?[]:void 0,k=[],M=[],C=s&&c?[]:void 0,T=s&&c?[]:void 0,O=[],I=[];for(_=0;_<y;_++){M[_]=k.length;var P=_+1;for(S=a[_],A=a[_+1],E=S;E<A;E++)w=o[E],k.push(w),O[w]=P,C&&(C[w]=s[E]);for(S=h[_],A=h[_+1],E=S;E<A;E++)if(O[w=p[E]]===P){if(C){var D=x(C[w],c[E]);v(D,b)?O[w]=null:C[w]=D}}else k.push(w),I[w]=P,T&&(T[w]=c[E]);if(C&&T)for(E=M[_];E<k.length;)O[w=k[E]]===P?(N[E]=C[w],E++):I[w]===P?(N[E]=T[w],E++):k.splice(E,1)}return M[y]=k.length,e.createSparseMatrix({values:N,index:k,ptr:M,size:[g,y],datatype:m})}})),na=K("algorithm10",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:r}=e;return function(e,n,i,s){var o=e._values,a=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=u[0],d=u[1],f=i;"string"==typeof c&&(p=c,n=t.convert(n,p),f=t.find(i,[p,p]));for(var m=[],g=[],y=[],v=0;v<d;v++){for(var b=v+1,x=l[v],w=l[v+1],_=x;_<w;_++){var E=a[_];g[E]=o[_],y[E]=b}for(var S=0;S<h;S++)0===v&&(m[S]=[]),y[S]===b?m[S][v]=s?f(n,g[S]):f(g[S],n):m[S][v]=n}return new r({data:m,size:[h,d],datatype:p})}})),ia=K("algorithm13",["typed"],(e=>{var{typed:t}=e;return function(e,n,i){var s,o=e._data,a=e._size,l=e._datatype,u=n._data,c=n._size,p=n._datatype,h=[];if(a.length!==c.length)throw new fr(a.length,c.length);for(var d=0;d<a.length;d++){if(a[d]!==c[d])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");h[d]=a[d]}var f=i;"string"==typeof l&&l===p&&(s=l,f=t.find(i,[s,s]));var m=h.length>0?r(f,0,h,h[0],o,u):[];return e.createDenseMatrix({data:m,size:h,datatype:s})};function r(e,t,n,i,s,o){var a=[];if(t===n.length-1)for(var l=0;l<i;l++)a[l]=e(s[l],o[l]);else for(var u=0;u<i;u++)a[u]=r(e,t+1,n,n[t+1],s[u],o[u]);return a}})),sa=K("algorithm14",["typed"],(e=>{var{typed:t}=e;return function(e,n,i,s){var o,a=e._data,l=e._size,u=e._datatype,c=i;"string"==typeof u&&(o=u,n=t.convert(n,o),c=t.find(i,[o,o]));var p=l.length>0?r(c,0,l,l[0],a,n,s):[];return e.createDenseMatrix({data:p,size:Y(l),datatype:o})};function r(e,t,n,i,s,o,a){var l=[];if(t===n.length-1)for(var u=0;u<i;u++)l[u]=a?e(o,s[u]):e(s[u],o);else for(var c=0;c<i;c++)l[c]=r(e,t+1,n,n[t+1],s[c],o,a);return l}})),oa=K("gcd",["typed","matrix","equalScalar","BigNumber","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,BigNumber:i,DenseMatrix:s}=e,o=ta({typed:t}),a=ra({typed:t,equalScalar:n}),l=na({typed:t,DenseMatrix:s}),u=ia({typed:t}),c=sa({typed:t});return t("gcd",{"number, number":Gn,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function gcd must be integer numbers");var r=new i(0);for(;!t.isZero();){var n=e.mod(t);e=t,t=n}return e.lt(r)?e.neg():e},"Fraction, Fraction":function(e,t){return e.gcd(t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return l(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return c(e,t,this,!1)},"number | BigNumber, SparseMatrix":function(e,t){return l(t,e,this,!0)},"number | BigNumber, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return c(r(e),t,this,!1).valueOf()},"number | BigNumber, Array":function(e,t){return c(r(t),e,this,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(e,t,r){for(var n=this(e,t),i=0;i<r.length;i++)n=this(n,r[i]);return n}})})),aa=K("algorithm02",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return function(e,n,i,s){var o=e._data,a=e._size,l=e._datatype,u=n._values,c=n._index,p=n._ptr,h=n._size,d=n._datatype;if(a.length!==h.length)throw new fr(a.length,h.length);if(a[0]!==h[0]||a[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m=a[0],g=a[1],y=r,v=0,b=i;"string"==typeof l&&l===d&&(f=l,y=t.find(r,[f,f]),v=t.convert(0,f),b=t.find(i,[f,f]));for(var x=[],w=[],_=[],E=0;E<g;E++){_[E]=w.length;for(var S=p[E],A=p[E+1],N=S;N<A;N++){var k=c[N],M=s?b(u[N],o[k][E]):b(o[k][E],u[N]);y(M,v)||(w.push(k),x.push(M))}}return _[g]=w.length,n.createSparseMatrix({values:x,index:w,ptr:_,size:[m,g],datatype:f})}})),la=K("algorithm03",["typed"],(e=>{var{typed:t}=e;return function(e,r,n,i){var s=e._data,o=e._size,a=e._datatype,l=r._values,u=r._index,c=r._ptr,p=r._size,h=r._datatype;if(o.length!==p.length)throw new fr(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,f=o[0],m=o[1],g=0,y=n;"string"==typeof a&&a===h&&(d=a,g=t.convert(0,d),y=t.find(n,[d,d]));for(var v=[],b=0;b<f;b++)v[b]=[];for(var x=[],w=[],_=0;_<m;_++){for(var E=_+1,S=c[_],A=c[_+1],N=S;N<A;N++){var k=u[N];x[k]=i?y(l[N],s[k][_]):y(s[k][_],l[N]),w[k]=E}for(var M=0;M<f;M++)w[M]===E?v[M][_]=x[M]:v[M][_]=i?y(g,s[M][_]):y(s[M][_],g)}return e.createDenseMatrix({data:v,size:[f,m],datatype:d})}})),ua=K("algorithm05",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return function(e,n,i){var s=e._values,o=e._index,a=e._ptr,l=e._size,u=e._datatype,c=n._values,p=n._index,h=n._ptr,d=n._size,f=n._datatype;if(l.length!==d.length)throw new fr(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");var m,g=l[0],y=l[1],v=r,b=0,x=i;"string"==typeof u&&u===f&&(m=u,v=t.find(r,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));var w,_,E,S,A=s&&c?[]:void 0,N=[],k=[],M=A?[]:void 0,C=A?[]:void 0,T=[],O=[];for(_=0;_<y;_++){k[_]=N.length;var I=_+1;for(E=a[_],S=a[_+1];E<S;E++)w=o[E],N.push(w),T[w]=I,M&&(M[w]=s[E]);for(E=h[_],S=h[_+1];E<S;E++)T[w=p[E]]!==I&&N.push(w),O[w]=I,C&&(C[w]=c[E]);if(A)for(E=k[_];E<N.length;){var P=T[w=N[E]],D=O[w];if(P===I||D===I){var R=x(P===I?M[w]:b,D===I?C[w]:b);v(R,b)?N.splice(E,1):(A.push(R),E++)}}}return k[y]=N.length,e.createSparseMatrix({values:A,index:N,ptr:k,size:[g,y],datatype:m})}})),ca=K("algorithm11",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return function(e,n,i,s){var o=e._values,a=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=u[0],d=u[1],f=r,m=0,g=i;"string"==typeof c&&(p=c,f=t.find(r,[p,p]),m=t.convert(0,p),n=t.convert(n,p),g=t.find(i,[p,p]));for(var y=[],v=[],b=[],x=0;x<d;x++){b[x]=v.length;for(var w=l[x],_=l[x+1],E=w;E<_;E++){var S=a[E],A=s?g(n,o[E]):g(o[E],n);f(A,m)||(v.push(S),y.push(A))}}return b[d]=v.length,e.createSparseMatrix({values:y,index:v,ptr:b,size:[h,d],datatype:p})}})),pa=K("algorithm12",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:r}=e;return function(e,n,i,s){var o=e._values,a=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=u[0],d=u[1],f=i;"string"==typeof c&&(p=c,n=t.convert(n,p),f=t.find(i,[p,p]));for(var m=[],g=[],y=[],v=0;v<d;v++){for(var b=v+1,x=l[v],w=l[v+1],_=x;_<w;_++){var E=a[_];g[E]=o[_],y[E]=b}for(var S=0;S<h;S++)0===v&&(m[S]=[]),y[S]===b?m[S][v]=s?f(n,g[S]):f(g[S],n):m[S][v]=s?f(n,0):f(0,n)}return new r({data:m,size:[h,d],datatype:p})}})),ha=K("mod",["typed","matrix","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,DenseMatrix:i}=e,s=aa({typed:t,equalScalar:n}),o=la({typed:t}),a=ua({typed:t,equalScalar:n}),l=ca({typed:t,equalScalar:n}),u=pa({typed:t,DenseMatrix:i}),c=ia({typed:t}),p=sa({typed:t});return t("mod",{"number, number":Xn,"BigNumber, BigNumber":function(e,t){if(t.isNeg())throw new Error("Cannot calculate mod for a negative divisor");return t.isZero()?e:e.mod(t)},"Fraction, Fraction":function(e,t){if(t.compare(0)<0)throw new Error("Cannot calculate mod for a negative divisor");return e.compare(0)>=0?e.mod(t):e.mod(t).add(t).mod(t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return l(e,t,this,!1)},"DenseMatrix, any":function(e,t){return p(e,t,this,!1)},"any, SparseMatrix":function(e,t){return u(t,e,this,!0)},"any, DenseMatrix":function(e,t){return p(t,e,this,!0)},"Array, any":function(e,t){return p(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return p(r(t),e,this,!0).valueOf()}})})),da=K("algorithm06",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return function(e,n,i){var s=e._values,o=e._size,a=e._datatype,l=n._values,u=n._size,c=n._datatype;if(o.length!==u.length)throw new fr(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var p,h=o[0],d=o[1],f=r,m=0,g=i;"string"==typeof a&&a===c&&(p=a,f=t.find(r,[p,p]),m=t.convert(0,p),g=t.find(i,[p,p]));for(var y=s&&l?[]:void 0,v=[],b=[],x=y?[]:void 0,w=[],_=[],E=0;E<d;E++){b[E]=v.length;var S=E+1;if(un(e,E,w,x,_,S,v,g),un(n,E,w,x,_,S,v,g),x)for(var A=b[E];A<v.length;){var N=v[A];if(_[N]===S){var k=x[N];f(k,m)?v.splice(A,1):(y.push(k),A++)}else v.splice(A,1)}else for(var M=b[E];M<v.length;){_[v[M]]!==S?v.splice(M,1):M++}}return b[d]=v.length,e.createSparseMatrix({values:y,index:v,ptr:b,size:[h,d],datatype:p})}})),fa="nthRoot",ma=K(fa,["typed","matrix","equalScalar","BigNumber"],(e=>{var{typed:t,matrix:r,equalScalar:n,BigNumber:i}=e,s=ta({typed:t}),o=aa({typed:t,equalScalar:n}),a=da({typed:t,equalScalar:n}),l=ca({typed:t,equalScalar:n}),u=ia({typed:t}),c=sa({typed:t}),p="Complex number not supported in function nthRoot. Use nthRoots instead.";return t(fa,{number:function(e){return Zn(e,2)},"number, number":Zn,BigNumber:function(e){return h(e,new i(2))},Complex:function(e){throw new Error(p)},"Complex, number":function(e,t){throw new Error(p)},"BigNumber, BigNumber":h,"Array | Matrix":function(e){return this(e,2)},"SparseMatrix, SparseMatrix":function(e,t){if(1===t.density())return a(e,t,this);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){if(1===t.density())return s(e,t,this,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return l(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return c(e,t,this,!1)},"number | BigNumber, SparseMatrix":function(e,t){if(1===t.density())return l(t,e,this,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(e,t){return c(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return this(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return this(e,r(t)).valueOf()}});function h(e,t){var r=i.precision,n=i.clone({precision:r+2}),s=new i(0),o=new n(1),a=t.isNegative();if(a&&(t=t.neg()),t.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return a?new n(1/0):0;if(!e.isFinite())return a?s:e;var l=e.abs().pow(o.div(t));return l=e.isNeg()?l.neg():l,new i((a?o.div(l):l).toPrecision(r))}})),ga="xgcd",ya=K(ga,["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t(ga,{"number, number":function(e,t){var i=Jn(e,t);return"Array"===r.matrix?i:n(i)},"BigNumber, BigNumber":function(e,t){var s,o,a,l,u=new i(0),c=new i(1),p=u,h=c,d=c,f=u;if(!e.isInt()||!t.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!t.isZero();)o=e.div(t).floor(),a=e.mod(t),s=p,p=h.minus(o.times(p)),h=s,s=d,d=f.minus(o.times(d)),f=s,e=t,t=a;l=e.lt(u)?[e.neg(),h.neg(),f.neg()]:[e,e.isZero()?0:h,f];return"Array"===r.matrix?l:n(l)}})})),va="bitAnd",ba=K(va,["typed","matrix","equalScalar"],(e=>{var{typed:t,matrix:r,equalScalar:n}=e,i=aa({typed:t,equalScalar:n}),s=da({typed:t,equalScalar:n}),o=ca({typed:t,equalScalar:n}),a=ia({typed:t}),l=sa({typed:t});return t(va,{"number, number":ki,"BigNumber, BigNumber":vi,"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return a(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return o(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,this,!0).valueOf()}})})),xa=K("algorithm07",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:r}=e;return function(e,i,s){var o=e._size,a=e._datatype,l=i._size,u=i._datatype;if(o.length!==l.length)throw new fr(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");var c,p,h,d=o[0],f=o[1],m=0,g=s;"string"==typeof a&&a===u&&(c=a,m=t.convert(0,c),g=t.find(s,[c,c]));var y=[];for(p=0;p<d;p++)y[p]=[];var v=[],b=[],x=[],w=[];for(h=0;h<f;h++){var _=h+1;for(n(e,h,x,v,_),n(i,h,w,b,_),p=0;p<d;p++){var E=x[p]===_?v[p]:m,S=w[p]===_?b[p]:m;y[p][h]=g(E,S)}}return new r({data:y,size:[d,f],datatype:c})};function n(e,t,r,n,i){for(var s=e._values,o=e._index,a=e._ptr,l=a[t],u=a[t+1];l<u;l++){var c=o[l];r[c]=i,n[c]=s[l]}}})),wa="bitXor",_a=K(wa,["typed","matrix","DenseMatrix"],(e=>{var{typed:t,matrix:r,DenseMatrix:n}=e,i=la({typed:t}),s=xa({typed:t,DenseMatrix:n}),o=pa({typed:t,DenseMatrix:n}),a=ia({typed:t}),l=sa({typed:t});return t(wa,{"number, number":Ti,"BigNumber, BigNumber":Ei,"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return a(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return o(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,this,!0).valueOf()}})})),Ea=K("or",["typed","matrix","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,DenseMatrix:i}=e,s=la({typed:t}),o=ua({typed:t,equalScalar:n}),a=pa({typed:t,DenseMatrix:i}),l=ia({typed:t}),u=sa({typed:t});return t("or",{"number, number":zi,"Complex, Complex":function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN()},"Unit, Unit":function(e,t){return this(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,this,!0).valueOf()}})})),Sa="concat",Aa=K(Sa,["typed","matrix","isInteger"],(e=>{var{typed:t,matrix:r,isInteger:n}=e;return t(Sa,{"...Array | Matrix | number | BigNumber":function(e){var t,i,s=e.length,o=-1,a=!1,c=[];for(t=0;t<s;t++){var p=e[t];if(m(p)&&(a=!0),l(p)||u(p)){if(t!==s-1)throw new Error("Dimension must be specified as last argument");if(i=o,o=p.valueOf(),!n(o))throw new TypeError("Integer number expected for dimension");if(o<0||t>0&&o>i)throw new mr(o,i+1)}else{var h=Y(p).valueOf(),d=gr(h);if(c[t]=h,i=o,o=d.length-1,t>0&&o!==i)throw new fr(i+1,o+1)}}if(0===c.length)throw new SyntaxError("At least one matrix expected");for(var f=c.shift();c.length;)f=Na(f,c.shift(),o,0);return a?r(f):f},"...string":function(e){return e.join("")}})}));function Na(e,t,r,n){if(n<r){if(e.length!==t.length)throw new fr(e.length,t.length);for(var i=[],s=0;s<e.length;s++)i[s]=Na(e[s],t[s],r,n+1);return i}return e.concat(t)}var ka="diag",Ma=K(ka,["typed","matrix","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,matrix:r,DenseMatrix:n,SparseMatrix:i}=e;return t(ka,{Array:function(e){return s(e,0,gr(e),null)},"Array, number":function(e,t){return s(e,t,gr(e),null)},"Array, BigNumber":function(e,t){return s(e,t.toNumber(),gr(e),null)},"Array, string":function(e,t){return s(e,0,gr(e),t)},"Array, number, string":function(e,t,r){return s(e,t,gr(e),r)},"Array, BigNumber, string":function(e,t,r){return s(e,t.toNumber(),gr(e),r)},Matrix:function(e){return s(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return s(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return s(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return s(e,0,e.size(),t)},"Matrix, number, string":function(e,t,r){return s(e,t,e.size(),r)},"Matrix, BigNumber, string":function(e,t,r){return s(e,t.toNumber(),e.size(),r)}});function s(e,t,s,o){if(!re(t))throw new TypeError("Second parameter in function diag must be an integer");var a=t>0?t:0,l=t<0?-t:0;switch(s.length){case 1:return function(e,t,r,s,o,a){var l=[s+o,s+a];if(r&&"sparse"!==r&&"dense"!==r)throw new TypeError("Unknown matrix type ".concat(r,'"'));var u="sparse"===r?i.diagonal(l,e,t):n.diagonal(l,e,t);return null!==r?u:u.valueOf()}(e,t,o,s[0],l,a);case 2:return function(e,t,n,i,s,o){if(m(e)){var a=e.diagonal(t);return null!==n?n!==a.storage()?r(a,n):a:a.valueOf()}for(var l=Math.min(i[0]-s,i[1]-o),u=[],c=0;c<l;c++)u[c]=e[c+s][c+o];return null!==n?r(u):u}(e,t,o,s,l,a)}throw new RangeError("Matrix for function diag must be 2 dimensional")}})),Ca="identity",Ta=K(Ca,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,config:r,matrix:n,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=e;return t(Ca,{"":function(){return"Matrix"===r.matrix?n([]):[]},string:function(e){return n(e)},"number | BigNumber":function(e){return l(e,e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return l(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return l(e,t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,r){return l(e,t,r)},Array:function(e){return a(e)},"Array, string":function(e,t){return a(e,t)},Matrix:function(e){return a(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){switch(e.length){case 0:return t?n(t):[];case 1:return l(e[0],e[0],t);case 2:return l(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function l(e,t,r){var n=u(e)||u(t)?i:null;if(u(e)&&(e=e.toNumber()),u(t)&&(t=t.toNumber()),!re(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!re(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var a=n?new i(1):1,l=n?new n(0):0,c=[e,t];if(r){if("sparse"===r)return o.diagonal(c,a,0,l);if("dense"===r)return s.diagonal(c,a,0,l);throw new TypeError('Unknown matrix type "'.concat(r,'"'))}for(var p=xr([],c,l),h=e<t?e:t,d=0;d<h;d++)p[d][d]=a;return p}})),Oa=K("ones",["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t("ones",{"":function(){return"Array"===r.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return s(e,t)}return"Array"===r.matrix?s(e):s(e,"default")},Array:s,Matrix:function(e){var t=e.storage();return s(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return s(e.valueOf(),t)}});function s(e,t){var r=function(e){var t=!1;return e.forEach((function(e,r,n){u(e)&&(t=!0,n[r]=e.toNumber())})),t}(e),s=r?new i(1):1;if(function(e){e.forEach((function(e){if("number"!=typeof e||!re(e)||e<0)throw new Error("Parameters in function ones must be positive integers")}))}(e),t){var o=n(t);return e.length>0?o.resize(e,s):o}var a=[];return e.length>0?xr(a,e,s):a}})),Ia="reshape",Pa=K(Ia,["typed","isInteger","matrix"],(e=>{var{typed:t,isInteger:r}=e;return t(Ia,{"Matrix, Array":function(e,t){return e.reshape(t)},"Array, Array":function(e,t){return t.forEach((function(e){if(!r(e))throw new TypeError("Invalid size for dimension: "+e)})),_r(e,t)}})}));function Da(){throw new Error('No "bignumber" implementation available')}function Ra(){throw new Error('No "fraction" implementation available')}function La(){throw new Error('No "matrix" implementation available')}var qa="size",$a=K(qa,["typed","config","?matrix"],(e=>{var{typed:t,config:r,matrix:n}=e;return t(qa,{Matrix:function(e){return e.create(e.size())},Array:gr,string:function(e){return"Array"===r.matrix?[e.length]:n([e.length])},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===r.matrix?[]:n?n([]):La()}})})),Ba="subset",za=K(Ba,["typed","matrix"],(e=>{var{typed:t,matrix:r}=e;return t(Ba,{"Array, Index":function(e,t){var n=r(e).subset(t);return t.isScalar()?n:n.valueOf()},"Matrix, Index":function(e,t){return e.subset(t)},"Object, Index":ja,"string, Index":Fa,"Array, Index, any":function(e,t,n){return r(Y(e)).subset(t,n,void 0).valueOf()},"Array, Index, any, any":function(e,t,n,i){return r(Y(e)).subset(t,n,i).valueOf()},"Matrix, Index, any":function(e,t,r){return e.clone().subset(t,r)},"Matrix, Index, any, any":function(e,t,r,n){return e.clone().subset(t,r,n)},"string, Index, string":Ua,"string, Index, string, string":Ua,"Object, Index, any":Ga})}));function Fa(e,t){if(!x(t))throw new TypeError("Index expected");if(1!==t.size().length)throw new fr(t.size().length,1);var r=e.length;br(t.min()[0],r),br(t.max()[0],r);var n=t.dimension(0),i="";return n.forEach((function(t){i+=e.charAt(t)})),i}function Ua(e,t,r,n){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(1!==t.size().length)throw new fr(t.size().length,1);if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=t.dimension(0);if(i.size()[0]!==r.length)throw new fr(i.size()[0],r.length);var s=e.length;br(t.min()[0]),br(t.max()[0]);for(var o=[],a=0;a<s;a++)o[a]=e.charAt(a);if(i.forEach((function(e,t){o[e]=r.charAt(t[0])})),o.length>s)for(var l=s-1,u=o.length;l<u;l++)o[l]||(o[l]=n);return o.join("")}function ja(e,t){if(1!==t.size().length)throw new fr(t.size(),1);var r=t.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");return zr(e,r)}function Ga(e,t,r){if(1!==t.size().length)throw new fr(t.size(),1);var n=t.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");var i=Y(e);return Fr(i,n,r),i}var Va="zeros",Ha=K(Va,["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t(Va,{"":function(){return"Array"===r.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(e){if("string"==typeof e[e.length-1]){var t=e.pop();return s(e,t)}return"Array"===r.matrix?s(e):s(e,"default")},Array:s,Matrix:function(e){var t=e.storage();return s(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return s(e.valueOf(),t)}});function s(e,t){var r=function(e){var t=!1;return e.forEach((function(e,r,n){u(e)&&(t=!0,n[r]=e.toNumber())})),t}(e),s=r?new i(0):0;if(function(e){e.forEach((function(e){if("number"!=typeof e||!re(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var o=n(t);return e.length>0?o.resize(e,s):o}var a=[];return e.length>0?xr(a,e,s):a}})),Wa=K("hex",["typed","format"],(e=>{var{typed:t,format:r}=e;return t("hex",{"number | BigNumber":function(e){return r(e,{notation:"hex"})},"number | BigNumber, number":function(e,t){return r(e,{notation:"hex",wordSize:t})}})}));function Ya(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Za(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(r),!0).forEach((function(t){Ya(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qa="Number of decimals in function round must be an integer",Ka="round",Ja=K(Ka,["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,zeros:i,BigNumber:s,DenseMatrix:o}=e,a=ca({typed:t,equalScalar:n}),l=pa({typed:t,DenseMatrix:o}),u=sa({typed:t});return t(Ka,Za(Za({},el),{},{Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(Qa);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Qa);var r=t.toNumber();return e.round(r)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Qa);return new s(e).toDecimalPlaces(t.toNumber())},BigNumber:function(e){return e.toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(Qa);return e.toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(Qa);return e.round(t)},"Array | Matrix":function(e){return on(e,this,!0)},"SparseMatrix, number | BigNumber":function(e,t){return a(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return u(e,t,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):l(t,e,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):u(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return u(r(e),t,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(e,t){return u(r(t),e,this,!0).valueOf()}}))})),el={number:ti,"number, number":function(e,t){if(!re(t))throw new TypeError(Qa);if(t<0||t>15)throw new Error("Number of decimals in function round must be in the range of 0-15");return ti(e,t)}},tl=K("algorithm08",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return function(e,n,i){var s=e._values,o=e._index,a=e._ptr,l=e._size,u=e._datatype,c=n._values,p=n._index,h=n._ptr,d=n._size,f=n._datatype;if(l.length!==d.length)throw new fr(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!s||!c)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m,g=l[0],y=l[1],v=r,b=0,x=i;"string"==typeof u&&u===f&&(m=u,v=t.find(r,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));for(var w,_,E,S,A=[],N=[],k=[],M=[],C=[],T=0;T<y;T++){k[T]=N.length;var O=T+1;for(_=a[T],E=a[T+1],w=_;w<E;w++)C[S=o[w]]=O,M[S]=s[w],N.push(S);for(_=h[T],E=h[T+1],w=_;w<E;w++)C[S=p[w]]===O&&(M[S]=x(M[S],c[w]));for(w=k[T];w<N.length;){var I=M[S=N[w]];v(I,b)?N.splice(w,1):(A.push(I),w++)}}return k[y]=N.length,e.createSparseMatrix({values:A,index:N,ptr:k,size:[g,y],datatype:m})}})),rl="leftShift",nl=K(rl,["typed","matrix","equalScalar","zeros","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,zeros:i,DenseMatrix:s}=e,o=ta({typed:t}),a=aa({typed:t,equalScalar:n}),l=tl({typed:t,equalScalar:n}),u=na({typed:t,DenseMatrix:s}),c=ca({typed:t,equalScalar:n}),p=ia({typed:t}),h=sa({typed:t});return t(rl,{"number, number":Oi,"BigNumber, BigNumber":Si,"SparseMatrix, SparseMatrix":function(e,t){return l(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():c(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():h(e,t,this,!1)},"number | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):u(t,e,this,!0)},"number | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):h(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return this(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return this(e,r(t)).valueOf()}})})),il="rightLogShift",sl=K(il,["typed","matrix","equalScalar","zeros","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,zeros:i,DenseMatrix:s}=e,o=ta({typed:t}),a=aa({typed:t,equalScalar:n}),l=tl({typed:t,equalScalar:n}),u=na({typed:t,DenseMatrix:s}),c=ca({typed:t,equalScalar:n}),p=ia({typed:t}),h=sa({typed:t});return t(il,{"number, number":Pi,"SparseMatrix, SparseMatrix":function(e,t){return l(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():c(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():h(e,t,this,!1)},"number | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):u(t,e,this,!0)},"number | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):h(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return this(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return this(e,r(t)).valueOf()}})})),ol="compare",al=K(ol,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],(e=>{var{typed:t,config:r,equalScalar:n,matrix:i,BigNumber:s,Fraction:o,DenseMatrix:a}=e,l=la({typed:t}),u=ua({typed:t,equalScalar:n}),c=pa({typed:t,DenseMatrix:a}),p=ia({typed:t}),h=sa({typed:t});return t(ol,{"boolean, boolean":function(e,t){return e===t?0:e>t?1:-1},"number, number":function(e,t){return ye(e,t,r.epsilon)?0:e>t?1:-1},"BigNumber, BigNumber":function(e,t){return En(e,t,r.epsilon)?new s(0):new s(e.cmp(t))},"Fraction, Fraction":function(e,t){return new o(e.compare(t))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return u(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return l(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return l(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,this)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return c(e,t,this,!1)},"DenseMatrix, any":function(e,t){return h(e,t,this,!1)},"any, SparseMatrix":function(e,t){return c(t,e,this,!0)},"any, DenseMatrix":function(e,t){return h(t,e,this,!0)},"Array, any":function(e,t){return h(i(e),t,this,!1).valueOf()},"any, Array":function(e,t){return h(i(t),e,this,!0).valueOf()}})})),ll="compareText",ul=K(ll,["typed","matrix"],(e=>{var{typed:t,matrix:r}=e,n=ia({typed:t}),i=sa({typed:t});return t(ll,{"any, any":dr,"DenseMatrix, DenseMatrix":function(e,t){return n(e,t,dr)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"DenseMatrix, any":function(e,t){return i(e,t,dr,!1)},"any, DenseMatrix":function(e,t){return i(t,e,dr,!0)},"Array, any":function(e,t){return i(r(e),t,dr,!1).valueOf()},"any, Array":function(e,t){return i(r(t),e,dr,!0).valueOf()}})})),cl="smaller",pl=K(cl,["typed","config","matrix","DenseMatrix"],(e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i}=e,s=la({typed:t}),o=xa({typed:t,DenseMatrix:i}),a=pa({typed:t,DenseMatrix:i}),l=ia({typed:t}),u=sa({typed:t});return t(cl,{"boolean, boolean":function(e,t){return e<t},"number, number":function(e,t){return e<t&&!ye(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!En(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return-1===e.compare(t)},"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,this,!0).valueOf()}})})),hl="larger",dl=K(hl,["typed","config","matrix","DenseMatrix"],(e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i}=e,s=la({typed:t}),o=xa({typed:t,DenseMatrix:i}),a=pa({typed:t,DenseMatrix:i}),l=ia({typed:t}),u=sa({typed:t});return t(hl,{"boolean, boolean":function(e,t){return e>t},"number, number":function(e,t){return e>t&&!ye(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!En(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return 1===e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,this,!0).valueOf()}})})),fl="unequal",ml=K(fl,["typed","config","equalScalar","matrix","DenseMatrix"],(e=>{var{typed:t,config:r,equalScalar:n,matrix:i,DenseMatrix:s}=e,o=la({typed:t}),a=xa({typed:t,DenseMatrix:s}),l=pa({typed:t,DenseMatrix:s}),u=ia({typed:t}),c=sa({typed:t});return t("unequal",{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:p(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,p)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,p,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,p,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,p)},"Array, Array":function(e,t){return this(i(e),i(t)).valueOf()},"Array, Matrix":function(e,t){return this(i(e),t)},"Matrix, Array":function(e,t){return this(e,i(t))},"SparseMatrix, any":function(e,t){return l(e,t,p,!1)},"DenseMatrix, any":function(e,t){return c(e,t,p,!1)},"any, SparseMatrix":function(e,t){return l(t,e,p,!0)},"any, DenseMatrix":function(e,t){return c(t,e,p,!0)},"Array, any":function(e,t){return c(i(e),t,p,!1).valueOf()},"any, Array":function(e,t){return c(i(t),e,p,!0).valueOf()}});function p(e,t){return!n(e,t)}})),gl=(K(fl,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return t(fl,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!r(e,t)}})})),K("ImmutableDenseMatrix",["smaller","DenseMatrix"],(e=>{var{smaller:t,DenseMatrix:r}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!d(t))throw new Error("Invalid datatype: "+t);if(m(e)||f(e)){var i=new r(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&f(e.data)&&f(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min=void 0!==e.min?e.min:null,this._max=void 0!==e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+W(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(e){switch(arguments.length){case 1:var t=r.prototype.subset.call(this,e);return m(t)?new n({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Y(this._data),size:Y(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(r){(null===e||t(r,e))&&(e=r)})),this._min=null!==e?e:void 0}return this._min},n.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(r){(null===e||t(e,r))&&(e=r)})),this._max=null!==e?e:void 0}return this._max},n}),{isClass:!0})),yl=K("FibonacciHeap",["smaller","larger"],(e=>{var{smaller:t,larger:r}=e,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function s(e,t,r){t.left.right=t.right,t.right.left=t.left,r.degree--,r.child===t&&(r.child=t.right),0===r.degree&&(r.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function o(e,t){var r=t.parent;r&&(t.mark?(s(e,t,r),o(r)):t.mark=!0)}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,r){var n={key:e,value:r,degree:0};if(this._minimum){var i=this._minimum;n.left=i,n.right=i.right,i.right=n,n.right.left=n,t(e,i.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,s=e.degree,o=e.child;s>0;){var l=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=l,s--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var s,o=Math.floor(Math.log(i)*n)+1,l=new Array(o),u=0,c=e;if(c)for(u++,c=c.right;c!==e;)u++,c=c.right;for(;u>0;){for(var p=c.degree,h=c.right;s=l[p];){if(r(c.key,s.key)){var d=s;s=c,c=d}a(s,c),l[p]=null,p++}l[p]=c,c=h,u--}e=null;for(var f=0;f<o;f++)(s=l[f])&&(e?(s.left.right=s.right,s.right.left=s.left,s.left=e,s.right=e.right,e.right=s,s.right.left=s,t(s.key,e.key)&&(e=s)):e=s);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,r,n){r.key=n;var i=r.parent;i&&t(r.key,i.key)&&(s(e,r,i),o(e,i));t(r.key,e.key)&&(e=r);return e}(this._minimum,e,-1),this.extractMinimum()};var a=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0}),vl="sparse",bl=K(vl,["typed","SparseMatrix"],(e=>{var{typed:t,SparseMatrix:r}=e;return t(vl,{"":function(){return new r([])},string:function(e){return new r([],e)},"Array | Matrix":function(e){return new r(e)},"Array | Matrix, string":function(e,t){return new r(e,t)}})})),xl="acoth",wl=K(xl,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:r,Complex:n,BigNumber:i}=e;return t(xl,{number:function(e){return e>=1||e<=-1||r.predictable?gs(e):new n(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new i(1).div(e).atanh()},"Array | Matrix":function(e){return on(e,this)}})})),_l=K("algorithm09",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return function(e,n,i){var s=e._values,o=e._index,a=e._ptr,l=e._size,u=e._datatype,c=n._values,p=n._index,h=n._ptr,d=n._size,f=n._datatype;if(l.length!==d.length)throw new fr(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");var m,g=l[0],y=l[1],v=r,b=0,x=i;"string"==typeof u&&u===f&&(m=u,v=t.find(r,[m,m]),b=t.convert(0,m),x=t.find(i,[m,m]));var w,_,E,S,A,N=s&&c?[]:void 0,k=[],M=[],C=N?[]:void 0,T=[];for(_=0;_<y;_++){M[_]=k.length;var O=_+1;if(C)for(S=h[_],A=h[_+1],E=S;E<A;E++)T[w=p[E]]=O,C[w]=c[E];for(S=a[_],A=a[_+1],E=S;E<A;E++)if(w=o[E],C){var I=T[w]===O?C[w]:b,P=x(s[E],I);v(P,b)||(k.push(w),N.push(P))}else k.push(w)}return M[y]=k.length,e.createSparseMatrix({values:N,index:k,ptr:M,size:[g,y],datatype:m})}})),El="atan2",Sl=K(El,["typed","matrix","equalScalar","BigNumber","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,BigNumber:i,DenseMatrix:s}=e,o=aa({typed:t,equalScalar:n}),a=la({typed:t}),l=_l({typed:t,equalScalar:n}),u=ca({typed:t,equalScalar:n}),c=pa({typed:t,DenseMatrix:s}),p=ia({typed:t}),h=sa({typed:t});return t(El,{"number, number":Math.atan2,"BigNumber, BigNumber":function(e,t){return i.atan2(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return l(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return u(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return h(e,t,this,!1)},"number | BigNumber, SparseMatrix":function(e,t){return c(t,e,this,!0)},"number | BigNumber, DenseMatrix":function(e,t){return h(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return h(r(e),t,this,!1).valueOf()},"number | BigNumber, Array":function(e,t){return h(r(t),e,this,!0).valueOf()}})})),Al=K("sec",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t("sec",{number:ks,Complex:function(e){return e.sec()},BigNumber:function(e){return new r(1).div(e.cos())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Nl=K("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:s,SparseMatrix:o}=e,a=ta({typed:t}),l=ra({typed:t,equalScalar:i}),u=na({typed:t,DenseMatrix:s}),c=ia({typed:t}),p=sa({typed:t});return t("add",X({"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,n)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,n,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,n,!0)},"SparseMatrix, SparseMatrix":function(e,t){return l(e,t,n)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"DenseMatrix, any":function(e,t){return p(e,t,n,!1)},"SparseMatrix, any":function(e,t){return u(e,t,n,!1)},"any, DenseMatrix":function(e,t){return p(t,e,n,!0)},"any, SparseMatrix":function(e,t){return u(t,e,n,!0)},"Array, any":function(e,t){return p(r(e),t,n,!1).valueOf()},"any, Array":function(e,t){return p(r(t),e,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(e,t,r){for(var n=this(e,t),i=0;i<r.length;i++)n=this(n,r[i]);return n}},n.signatures))})),kl=K("dot",["typed","addScalar","multiplyScalar","conj","size"],(e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:i,size:s}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,s){var l=o(e,s),u=m(e)?e._data:e,c=m(e)?e._datatype:void 0,p=m(s)?s._data:s,h=m(s)?s._datatype:void 0,d=2===a(e).length,f=2===a(s).length,g=r,y=n;if(c&&h&&c===h&&"string"==typeof c){var v=c;g=t.find(r,[v,v]),y=t.find(n,[v,v])}if(!d&&!f){for(var b=y(i(u[0]),p[0]),x=1;x<l;x++)b=g(b,y(i(u[x]),p[x]));return b}if(!d&&f){for(var w=y(i(u[0]),p[0][0]),_=1;_<l;_++)w=g(w,y(i(u[_]),p[_][0]));return w}if(d&&!f){for(var E=y(i(u[0][0]),p[0]),S=1;S<l;S++)E=g(E,y(i(u[S][0]),p[S]));return E}if(d&&f){for(var A=y(i(u[0][0]),p[0][0]),N=1;N<l;N++)A=g(A,y(i(u[N][0]),p[N][0]));return A}},"SparseMatrix, SparseMatrix":function(e,t){o(e,t);var i=e._index,s=e._values,a=t._index,l=t._values,u=0,c=r,p=n,h=0,d=0;for(;h<i.length&&d<a.length;){var f=i[h],m=a[d];f<m?h++:f>m?d++:f===m&&(u=c(u,p(s[h],l[d])),h++,d++)}return u}});function o(e,t){var r,n,i=a(e),s=a(t);if(1===i.length)r=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");r=i[0]}if(1===s.length)n=s[0];else{if(2!==s.length||1!==s[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+s.join(", ")+")");n=s[0]}if(r!==n)throw new RangeError("Vectors must have equal length ("+r+" != "+n+")");if(0===r)throw new RangeError("Cannot calculate the dot product of empty vectors");return r}function a(e){return m(e)?e.size():s(e)}})),Ml="composition",Cl=K(Ml,["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],(e=>{var{typed:t,addScalar:r,combinations:n,isPositive:i,isNegative:s,isInteger:o,larger:a}=e;return t(Ml,{"number | BigNumber, number | BigNumber":function(e,t){if(!(o(e)&&i(e)&&o(t)&&i(t)))throw new TypeError("Positive integer value expected in function composition");if(a(t,e))throw new TypeError("k must be less than or equal to n in function composition");return n(r(e,-1),r(t,-1))}})})),Tl="isZero",Ol=K(Tl,["typed"],(e=>{var{typed:t}=e;return t(Tl,{number:yn,BigNumber:function(e){return e.isZero()},Complex:function(e){return 0===e.re&&0===e.im},Fraction:function(e){return 1===e.d&&0===e.n},Unit:function(e){return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Il="matrixFromFunction",Pl=K(Il,["typed","matrix","isZero"],(e=>{var{typed:t,matrix:r,isZero:n}=e;return t(Il,{"Array | Matrix, function, string, string":function(e,t,r,n){return i(e,t,r,n)},"Array | Matrix, function, string":function(e,t,r){return i(e,t,r)},"Matrix, function":function(e,t){return i(e,t,"dense")},"Array, function":function(e,t){return i(e,t,"dense").toArray()},"Array | Matrix, string, function":function(e,t,r){return i(e,r,t)},"Array | Matrix, string, string, function":function(e,t,r,n){return i(e,n,t,r)}});function i(e,t,i,s){var o;return(o=void 0!==s?r(i,s):r(i)).resize(e),o.forEach((function(e,r){var i=t(r);n(i)||o.set(r,i)})),o}})),Dl="cbrt",Rl=K(Dl,["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],(e=>{var{config:t,typed:r,isNegative:n,unaryMinus:i,matrix:s,Complex:o,BigNumber:a,Fraction:l}=e;return r(Dl,{number:Bn,Complex:h,"Complex, boolean":h,BigNumber:function(e){return e.cbrt()},Unit:function(e){if(e.value&&c(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=h(e.value),t}var r,s=n(e.value);s&&(e.value=i(e.value)),r=u(e.value)?new a(1).div(3):p(e.value)?new l(1,3):1/3;var o=e.pow(r);return s&&(o.value=i(o.value)),o},"Array | Matrix":function(e){return on(e,this,!0)}});function h(e,r){var n=e.arg()/3,i=e.abs(),a=new o(Bn(i),0).mul(new o(0,n).exp());if(r){var l=[a,new o(Bn(i),0).mul(new o(0,n+2*Math.PI/3).exp()),new o(Bn(i),0).mul(new o(0,n-2*Math.PI/3).exp())];return"Array"===t.matrix?l:s(l)}return a}})),Ll=K("floor",["typed","config","round","matrix","equalScalar"],(e=>{var{typed:t,config:r,round:n,matrix:i,equalScalar:s}=e,o=ca({typed:t,equalScalar:s}),a=sa({typed:t});return t("floor",{number:function(e){return ye(e,n(e),r.epsilon)?n(e):Math.floor(e)},"number, number":function(e,t){if(ye(e,n(e,t),r.epsilon))return n(e,t);var[i,s]="".concat(e,"e").split("e"),o=Math.floor(Number("".concat(i,"e").concat(Number(s)+t)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-t))},Complex:function(e){return e.floor()},"Complex, number":function(e,t){return e.floor(t)},BigNumber:function(e){return En(e,n(e),r.epsilon)?n(e):e.floor()},"BigNumber, BigNumber":function(e,t){return En(e,n(e,t),r.epsilon)?n(e,t):e.toDecimalPlaces(t.toNumber(),tt.ROUND_FLOOR)},Fraction:function(e){return e.floor()},"Fraction, number":function(e,t){return e.floor(t)},"Array | Matrix":function(e){return on(e,this,!0)},"Array | Matrix, number":function(e,t){return on(e,(e=>this(e,t)),!0)},"SparseMatrix, number | BigNumber":function(e,t){return o(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return a(e,t,this,!1)},"number | Complex | BigNumber, Array":function(e,t){return a(i(t),e,this,!0).valueOf()}})})),ql="multiply",$l=K(ql,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:s,dot:o}=e,a=ca({typed:t,equalScalar:s}),l=sa({typed:t});function u(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}function c(e,r){if("dense"!==r.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,r){var s,o=e._data,a=e._size,l=e._datatype,u=r._data,c=r._size,p=r._datatype,h=a[0],d=c[1],f=n,m=i;l&&p&&l===p&&"string"==typeof l&&(s=l,f=t.find(n,[s,s]),m=t.find(i,[s,s]));for(var g=[],y=0;y<d;y++){for(var v=m(o[0],u[0][y]),b=1;b<h;b++)v=f(v,m(o[b],u[b][y]));g[y]=v}return e.createDenseMatrix({data:g,size:[d],datatype:s})}(e,r)}var p=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,r){var s,o=e._data,a=e._size,l=e._datatype,u=r._data,c=r._datatype,p=a[0],h=a[1],d=n,f=i;l&&c&&l===c&&"string"==typeof l&&(s=l,d=t.find(n,[s,s]),f=t.find(i,[s,s]));for(var m=[],g=0;g<p;g++){for(var y=o[g],v=f(y[0],u[0]),b=1;b<h;b++)v=d(v,f(y[b],u[b]));m[g]=v}return e.createDenseMatrix({data:m,size:[p],datatype:s})},"SparseMatrix, any":function(e,r){var o=e._values,a=e._index,l=e._ptr,u=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,p=r._data,h=r._datatype,d=e._size[0],f=r._size[0],m=[],g=[],y=[],v=n,b=i,x=s,w=0;u&&h&&u===h&&"string"==typeof u&&(c=u,v=t.find(n,[c,c]),b=t.find(i,[c,c]),x=t.find(s,[c,c]),w=t.convert(0,c));var _=[],E=[];y[0]=0;for(var S=0;S<f;S++){var A=p[S];if(!x(A,w))for(var N=l[S],k=l[S+1],M=N;M<k;M++){var C=a[M];E[C]?_[C]=v(_[C],b(A,o[M])):(E[C]=!0,g.push(C),_[C]=b(A,o[M]))}}for(var T=g.length,O=0;O<T;O++){var I=g[O];m[O]=_[I]}return y[1]=g.length,e.createSparseMatrix({values:m,index:g,ptr:y,size:[d,1],datatype:c})}}),h=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,r){var s,o=e._data,a=e._size,l=e._datatype,u=r._data,c=r._size,p=r._datatype,h=a[0],d=a[1],f=c[1],m=n,g=i;l&&p&&l===p&&"string"==typeof l&&(s=l,m=t.find(n,[s,s]),g=t.find(i,[s,s]));for(var y=[],v=0;v<h;v++){var b=o[v];y[v]=[];for(var x=0;x<f;x++){for(var w=g(b[0],u[0][x]),_=1;_<d;_++)w=m(w,g(b[_],u[_][x]));y[v][x]=w}}return e.createDenseMatrix({data:y,size:[h,f],datatype:s})},"DenseMatrix, SparseMatrix":function(e,r){var o=e._data,a=e._size,l=e._datatype,u=r._values,c=r._index,p=r._ptr,h=r._size,d=r._datatype;if(!u)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var f,m=a[0],g=h[1],y=n,v=i,b=s,x=0;l&&d&&l===d&&"string"==typeof l&&(f=l,y=t.find(n,[f,f]),v=t.find(i,[f,f]),b=t.find(s,[f,f]),x=t.convert(0,f));for(var w=[],_=[],E=[],S=r.createSparseMatrix({values:w,index:_,ptr:E,size:[m,g],datatype:f}),A=0;A<g;A++){E[A]=_.length;var N=p[A],k=p[A+1];if(k>N)for(var M=0,C=0;C<m;C++){for(var T=C+1,O=void 0,I=N;I<k;I++){var P=c[I];M!==T?(O=v(o[C][P],u[I]),M=T):O=y(O,v(o[C][P],u[I]))}M!==T||b(O,x)||(_.push(C),w.push(O))}}return E[g]=_.length,S},"SparseMatrix, DenseMatrix":function(e,r){var o=e._values,a=e._index,l=e._ptr,u=e._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,p=r._data,h=r._datatype,d=e._size[0],f=r._size[0],m=r._size[1],g=n,y=i,v=s,b=0;u&&h&&u===h&&"string"==typeof u&&(c=u,g=t.find(n,[c,c]),y=t.find(i,[c,c]),v=t.find(s,[c,c]),b=t.convert(0,c));for(var x=[],w=[],_=[],E=e.createSparseMatrix({values:x,index:w,ptr:_,size:[d,m],datatype:c}),S=[],A=[],N=0;N<m;N++){_[N]=w.length;for(var k=N+1,M=0;M<f;M++){var C=p[M][N];if(!v(C,b))for(var T=l[M],O=l[M+1],I=T;I<O;I++){var P=a[I];A[P]!==k?(A[P]=k,w.push(P),S[P]=y(C,o[I])):S[P]=g(S[P],y(C,o[I]))}}for(var D=_[N],R=w.length,L=D;L<R;L++){var q=w[L];x[L]=S[q]}}return _[m]=w.length,E},"SparseMatrix, SparseMatrix":function(e,r){var s,o=e._values,a=e._index,l=e._ptr,u=e._datatype,c=r._values,p=r._index,h=r._ptr,d=r._datatype,f=e._size[0],m=r._size[1],g=o&&c,y=n,v=i;u&&d&&u===d&&"string"==typeof u&&(s=u,y=t.find(n,[s,s]),v=t.find(i,[s,s]));for(var b,x,w,_,E,S,A,N,k=g?[]:void 0,M=[],C=[],T=e.createSparseMatrix({values:k,index:M,ptr:C,size:[f,m],datatype:s}),O=g?[]:void 0,I=[],P=0;P<m;P++){C[P]=M.length;var D=P+1;for(E=h[P],S=h[P+1],_=E;_<S;_++)if(N=p[_],g)for(x=l[N],w=l[N+1],b=x;b<w;b++)A=a[b],I[A]!==D?(I[A]=D,M.push(A),O[A]=v(c[_],o[b])):O[A]=y(O[A],v(c[_],o[b]));else for(x=l[N],w=l[N+1],b=x;b<w;b++)A=a[b],I[A]!==D&&(I[A]=D,M.push(A));if(g)for(var R=C[P],L=M.length,q=R;q<L;q++){var $=M[q];k[q]=O[$]}}return C[m]=M.length,T}});return t(ql,X({"Array, Array":function(e,t){u(gr(e),gr(t));var n=this(r(e),r(t));return m(n)?n.valueOf():n},"Matrix, Matrix":function(e,t){var r=e.size(),n=t.size();return u(r,n),1===r.length?1===n.length?function(e,t,r){if(0===r)throw new Error("Cannot multiply two empty vectors");return o(e,t)}(e,t,r[0]):c(e,t):1===n.length?p(e,t):h(e,t)},"Matrix, Array":function(e,t){return this(e,r(t))},"Array, Matrix":function(e,t){return this(r(e,t.storage()),t)},"SparseMatrix, any":function(e,t){return a(e,t,i,!1)},"DenseMatrix, any":function(e,t){return l(e,t,i,!1)},"any, SparseMatrix":function(e,t){return a(t,e,i,!0)},"any, DenseMatrix":function(e,t){return l(t,e,i,!0)},"Array, any":function(e,t){return l(r(e),t,i,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(e,t,r){for(var n=this(e,t),i=0;i<r.length;i++)n=this(n,r[i]);return n}},i.signatures))})),Bl="dotMultiply",zl=K(Bl,["typed","matrix","equalScalar","multiplyScalar"],(e=>{var{typed:t,matrix:r,equalScalar:n,multiplyScalar:i}=e,s=aa({typed:t,equalScalar:n}),o=_l({typed:t,equalScalar:n}),a=ca({typed:t,equalScalar:n}),l=ia({typed:t}),u=sa({typed:t});return t(Bl,{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,i)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return a(e,t,i,!1)},"DenseMatrix, any":function(e,t){return u(e,t,i,!1)},"any, SparseMatrix":function(e,t){return a(t,e,i,!0)},"any, DenseMatrix":function(e,t){return u(t,e,i,!0)},"Array, any":function(e,t){return u(r(e),t,i,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,i,!0).valueOf()}})})),Fl=K("re",["typed"],(e=>{var{typed:t}=e;return t("re",{number:function(e){return e},BigNumber:function(e){return e},Fraction:function(e){return e},Complex:function(e){return e.re},"Array | Matrix":function(e){return on(e,this)}})})),Ul="flatten",jl=K(Ul,["typed","matrix"],(e=>{var{typed:t,matrix:r}=e;return t(Ul,{Array:function(e){return Cr(Y(e))},Matrix:function(e){var t=Cr(Y(e.toArray()));return r(t)}})}));function Gl(e,t,r,n){if(!(this instanceof Gl))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+r+(null!=n?"-"+n:"")+" expected)",this.stack=(new Error).stack}Gl.prototype=new Error,Gl.prototype.constructor=Error,Gl.prototype.name="ArgumentsError",Gl.prototype.isArgumentsError=!0;var Vl=K("resize",["config","matrix"],(e=>{var{config:t,matrix:r}=e;return function(e,i,s){if(2!==arguments.length&&3!==arguments.length)throw new Gl("resize",arguments.length,2,3);if(m(i)&&(i=i.valueOf()),u(i[0])&&(i=i.map((function(e){return u(e)?e.toNumber():e}))),m(e))return e.resize(i,s,!0);if("string"==typeof e)return n(e,i,s);var o=!Array.isArray(e)&&"Array"!==t.matrix;if(0===i.length){for(;Array.isArray(e);)e=e[0];return Y(e)}Array.isArray(e)||(e=[e]);var a=xr(e=Y(e),i,s);return o?r(a):a};function n(e,t,r){if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";if(1!==t.length)throw new fr(t.length,1);var n=t[0];if("number"!=typeof n||!re(n))throw new TypeError("Invalid size, must contain positive integers (size: "+ur(t)+")");if(e.length>n)return e.substring(0,n);if(e.length<n){for(var i=e,s=0,o=n-e.length;s<o;s++)i+=r;return i}return e}})),Hl="squeeze",Wl=K(Hl,["typed","matrix"],(e=>{var{typed:t,matrix:r}=e;return t(Hl,{Array:function(e){return Ar(Y(e))},Matrix:function(e){var t=Ar(e.toArray());return Array.isArray(t)?r(t):t},any:function(e){return Y(e)}})})),Yl=K("to",["typed","matrix"],(e=>{var{typed:t,matrix:r}=e,n=ia({typed:t}),i=sa({typed:t});return t("to",{"Unit, Unit | string":function(e,t){return e.to(t)},"Matrix, Matrix":function(e,t){return n(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"Matrix, any":function(e,t){return i(e,t,this,!1)},"any, Matrix":function(e,t){return i(t,e,this,!0)},"Array, any":function(e,t){return i(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return i(r(t),e,this,!0).valueOf()}})})),Xl=K("pow",["typed","config","identity","multiply","matrix","fraction","number","Complex"],(e=>{var{typed:t,config:r,identity:n,multiply:i,matrix:s,number:o,fraction:a,Complex:l}=e;return t("pow",{"number, number":u,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||r.predictable?e.pow(t):new l(e.toNumber(),0).pow(t.toNumber(),0)},"Fraction, Fraction":function(e,t){var n=e.pow(t);if(null!=n)return n;if(r.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return u(e.valueOf(),t.valueOf())},"Array, number":c,"Array, BigNumber":function(e,t){return c(e,t.toNumber())},"Matrix, number":p,"Matrix, BigNumber":function(e,t){return p(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function u(e,t){if(r.predictable&&!re(t)&&e<0)try{var n=a(t),i=o(n);if((t===i||Math.abs((t-i)/t)<1e-14)&&n.d%2==1)return(n.n%2==0?1:-1)*Math.pow(-e,t)}catch(s){}return r.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:re(t)||e>=0||r.predictable?ei(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new l(e,0).pow(t,0)}function c(e,t){if(!re(t)||t<0)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var r=gr(e);if(2!==r.length)throw new Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!==r[1])throw new Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");for(var s=n(r[0]).valueOf(),o=e;t>=1;)1==(1&t)&&(s=i(o,s)),t>>=1,o=i(o,o);return s}function p(e,t){return s(c(e.valueOf(),t))}})),Zl="dotPow",Ql=K(Zl,["typed","equalScalar","matrix","pow","DenseMatrix"],(e=>{var{typed:t,equalScalar:r,matrix:n,pow:i,DenseMatrix:s}=e,o=la({typed:t}),a=xa({typed:t,DenseMatrix:s}),l=ca({typed:t,equalScalar:r}),u=pa({typed:t,DenseMatrix:s}),c=ia({typed:t}),p=sa({typed:t});return t(Zl,{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return c(e,t,i)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return l(e,t,this,!1)},"DenseMatrix, any":function(e,t){return p(e,t,this,!1)},"any, SparseMatrix":function(e,t){return u(t,e,this,!0)},"any, DenseMatrix":function(e,t){return p(t,e,this,!0)},"Array, any":function(e,t){return p(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return p(n(t),e,this,!0).valueOf()}})})),Kl="rightArithShift",Jl=K(Kl,["typed","matrix","equalScalar","zeros","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,zeros:i,DenseMatrix:s}=e,o=ta({typed:t}),a=aa({typed:t,equalScalar:n}),l=tl({typed:t,equalScalar:n}),u=na({typed:t,DenseMatrix:s}),c=ca({typed:t,equalScalar:n}),p=ia({typed:t}),h=sa({typed:t});return t(Kl,{"number, number":Ii,"BigNumber, BigNumber":Ai,"SparseMatrix, SparseMatrix":function(e,t){return l(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return a(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():c(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return n(t,0)?e.clone():h(e,t,this,!1)},"number | BigNumber, SparseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):u(t,e,this,!0)},"number | BigNumber, DenseMatrix":function(e,t){return n(e,0)?i(t.size(),t.storage()):h(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return this(r(e),t).valueOf()},"number | BigNumber, Array":function(e,t){return this(e,r(t)).valueOf()}})})),eu=__webpack_require__(599),tu="compareNatural",ru=K(tu,["typed","compare"],(e=>{var{typed:t,compare:r}=e,n=r.signatures["boolean,boolean"];return t(tu,{"any, any":function(e,t){var o,a=W(e),l=W(t);if(!("number"!==a&&"BigNumber"!==a&&"Fraction"!==a||"number"!==l&&"BigNumber"!==l&&"Fraction"!==l))return"0"!==(o=r(e,t)).toString()?o>0?1:-1:eu(a,l);if("Array"===a||"Matrix"===a||"Array"===l||"Matrix"===l)return 0!==(o=i(this,e,t))?o:eu(a,l);if(a!==l)return eu(a,l);if("Complex"===a)return function(e,t){if(e.re>t.re)return 1;if(e.re<t.re)return-1;if(e.im>t.im)return 1;if(e.im<t.im)return-1;return 0}(e,t);if("Unit"===a)return e.equalBase(t)?this(e.value,t.value):s(this,e.formatUnits(),t.formatUnits());if("boolean"===a)return n(e,t);if("string"===a)return eu(e,t);if("Object"===a)return function(e,t,r){var n=Object.keys(t),i=Object.keys(r);n.sort(eu),i.sort(eu);var o=s(e,n,i);if(0!==o)return o;for(var a=0;a<n.length;a++){var l=e(t[n[a]],r[i[a]]);if(0!==l)return l}return 0}(this,e,t);if("null"===a)return 0;if("undefined"===a)return 0;throw new TypeError('Unsupported type of value "'+a+'"')}});function i(e,t,r){return v(t)&&v(r)?s(e,t.toJSON().values,r.toJSON().values):v(t)?i(e,t.toArray(),r):v(r)?i(e,t,r.toArray()):y(t)?i(e,t.toJSON().data,r):y(r)?i(e,t,r.toJSON().data):Array.isArray(t)?Array.isArray(r)?s(e,t,r):i(e,t,[r]):i(e,[t],r)}function s(e,t,r){for(var n=0,i=Math.min(t.length,r.length);n<i;n++){var s=e(t[n],r[n]);if(0!==s)return s}return t.length>r.length?1:t.length<r.length?-1:0}}));var nu="equalText",iu=K(nu,["typed","compareText","isZero"],(e=>{var{typed:t,compareText:r,isZero:n}=e;return t(nu,{"any, any":function(e,t){return n(r(e,t))}})})),su="largerEq",ou=K(su,["typed","config","matrix","DenseMatrix"],(e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i}=e,s=la({typed:t}),o=xa({typed:t,DenseMatrix:i}),a=pa({typed:t,DenseMatrix:i}),l=ia({typed:t}),u=sa({typed:t});return t(su,{"boolean, boolean":function(e,t){return e>=t},"number, number":function(e,t){return e>=t||ye(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.gte(t)||En(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return-1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,this,!0).valueOf()}})})),au="partitionSelect",lu=K(au,["typed","isNumeric","isNaN","compare"],(e=>{var{typed:t,isNumeric:r,isNaN:n,compare:i}=e,s=i,o=(e,t)=>-i(e,t);return t(au,{"Array | Matrix, number":function(e,t){return a(e,t,s)},"Array | Matrix, number, string":function(e,t,r){if("asc"===r)return a(e,t,s);if("desc"===r)return a(e,t,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":a});function a(e,t,r){if(!re(t)||t<0)throw new Error("k must be a non-negative integer");if(m(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return l(e.valueOf(),t,r)}if(Array.isArray(e))return l(e,t,r)}function l(e,t,i){if(t>=e.length)throw new Error("k out of bounds");for(var s=0;s<e.length;s++)if(r(e[s])&&n(e[s]))return e[s];for(var o=0,a=e.length-1;o<a;){for(var l=o,u=a,c=e[Math.floor(Math.random()*(a-o+1))+o];l<u;)if(i(e[l],c)>=0){var p=e[u];e[u]=e[l],e[l]=p,--u}else++l;i(e[l],c)>0&&--l,t<=l?a=l:o=l+1}return e[t]}})),uu=K("Index",["ImmutableDenseMatrix"],(e=>{var{ImmutableDenseMatrix:t}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var t=0,i=arguments.length;t<i;t++){var s=arguments[t];if(b(s))this._dimensions.push(s),this._isScalar=!1;else if(Array.isArray(s)||m(s)){var o=n(s.valueOf());this._dimensions.push(o);var a=o.size();1===a.length&&1===a[0]||(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(n([s]));else{if("string"!=typeof s)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(s)}}}function n(e){for(var r=0,n=e.length;r<n;r++)if("number"!=typeof e[r]||!re(e[r]))throw new TypeError("Index parameters must be positive integer numbers");return new t(e)}return r.prototype.type="Index",r.prototype.isIndex=!0,r.prototype.clone=function(){var e=new r;return e._dimensions=Y(this._dimensions),e._isScalar=this._isScalar,e},r.create=function(e){var t=new r;return r.apply(t,e),t},r.prototype.size=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e[t]="string"==typeof n?1:n.size()[0]}return e},r.prototype.max=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e[t]="string"==typeof n?n:n.max()}return e},r.prototype.min=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e[t]="string"==typeof n?n:n.min()}return e},r.prototype.forEach=function(e){for(var t=0,r=this._dimensions.length;t<r;t++)e(this._dimensions[t],t,this)},r.prototype.dimension=function(e){return this._dimensions[e]||null},r.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];e.push("string"==typeof n?n:n.toArray())}return e},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var e=[],t=0,r=this._dimensions.length;t<r;t++){var n=this._dimensions[t];"string"==typeof n?e.push(JSON.stringify(n)):e.push(n.toString())}return"["+e.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(e){return r.create(e.dimensions)},r}),{isClass:!0}),cu="asech",pu=K(cu,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:r,Complex:n,BigNumber:i}=e;return t(cu,{number:function(e){if(e<=1&&e>=-1||r.predictable){var t=1/e;if(t>0||r.predictable)return xs(e);var i=Math.sqrt(t*t-1);return new n(Math.log(i-t),Math.PI)}return new n(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new i(1).div(e).acosh()},"Array | Matrix":function(e){return on(e,this)}})})),hu=K("tan",["typed"],(e=>{var{typed:t}=e;return t("tan",{number:Math.tan,Complex:function(e){return e.tan()},BigNumber:function(e){return e.tan()},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this,!0)}})})),du="setDifference",fu=K(du,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=e;return t(du,{"Array | Matrix, Array | Matrix":function(e,t){var a;if(0===n(r(e),new s(0)))a=[];else{if(0===n(r(t),new s(0)))return Cr(e.toArray());var l,u=Rr(Cr(Array.isArray(e)?e:e.toArray()).sort(i)),c=Rr(Cr(Array.isArray(t)?t:t.toArray()).sort(i));a=[];for(var p=0;p<u.length;p++){l=!1;for(var h=0;h<c.length;h++)if(0===i(u[p].value,c[h].value)&&u[p].identifier===c[h].identifier){l=!0;break}l||a.push(u[p])}}return Array.isArray(e)&&Array.isArray(t)?Lr(a):new o(Lr(a))}})})),mu="setIntersect",gu=K(mu,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=e;return t(mu,{"Array | Matrix, Array | Matrix":function(e,t){var a;if(0===n(r(e),new s(0))||0===n(r(t),new s(0)))a=[];else{var l=Rr(Cr(Array.isArray(e)?e:e.toArray()).sort(i)),u=Rr(Cr(Array.isArray(t)?t:t.toArray()).sort(i));a=[];for(var c=0;c<l.length;c++)for(var p=0;p<u.length;p++)if(0===i(l[c].value,u[p].value)&&l[c].identifier===u[p].identifier){a.push(l[c]);break}}return Array.isArray(e)&&Array.isArray(t)?Lr(a):new o(Lr(a))}})})),yu="setMultiplicity",vu=K(yu,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:r,subset:n,compareNatural:i,Index:s}=e;return t(yu,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,t){if(0===n(r(t),new s(0)))return 0;for(var o=Cr(Array.isArray(t)?t:t.toArray()),a=0,l=0;l<o.length;l++)0===i(o[l],e)&&a++;return a}})})),bu="setSize",xu=K(bu,["typed","compareNatural"],(e=>{var{typed:t,compareNatural:r}=e;return t(bu,{"Array | Matrix":function(e){return Array.isArray(e)?Cr(e).length:Cr(e.toArray()).length},"Array | Matrix, boolean":function(e,t){if(!1===t||0===e.length)return Array.isArray(e)?Cr(e).length:Cr(e.toArray()).length;for(var n=Cr(Array.isArray(e)?e:e.toArray()).sort(r),i=1,s=1;s<n.length;s++)0!==r(n[s],n[s-1])&&i++;return i}})})),wu=K("trace",["typed","matrix","add"],(e=>{var{typed:t,matrix:r,add:n}=e;return t("trace",{Array:function(e){return i(r(e))},SparseMatrix:function(e){var t=e._values,r=e._index,i=e._ptr,s=e._size,o=s[0],a=s[1];if(o===a){var l=0;if(t.length>0)for(var u=0;u<a;u++)for(var c=i[u],p=i[u+1],h=c;h<p;h++){var d=r[h];if(d===u){l=n(l,t[h]);break}if(d>u)break}return l}throw new RangeError("Matrix must be square (size: "+ur(s)+")")},DenseMatrix:i,any:Y});function i(e){var t=e._size,r=e._data;switch(t.length){case 1:if(1===t[0])return Y(r[0]);throw new RangeError("Matrix must be square (size: "+ur(t)+")");case 2:var i=t[0];if(i===t[1]){for(var s=0,o=0;o<i;o++)s=n(s,r[o][o]);return s}throw new RangeError("Matrix must be square (size: "+ur(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ur(t)+")")}}})),_u=K("quantileSeq",["typed","add","multiply","partitionSelect","compare"],(e=>{var{typed:t,add:r,multiply:n,partitionSelect:i,compare:s}=e;function o(e,t,o){var u=Cr(e),c=u.length;if(0===c)throw new Error("Cannot calculate quantile of an empty sequence");if(l(t)){var p=t*(c-1),h=p%1;if(0===h){var d=o?u[p]:i(u,p);return a(d),d}var f,m,g=Math.floor(p);if(o)f=u[g],m=u[g+1];else{m=i(u,g+1),f=u[g];for(var y=0;y<g;++y)s(u[y],f)>0&&(f=u[y])}return a(f),a(m),r(n(f,1-h),n(m,h))}var v=t.times(c-1);if(v.isInteger()){v=v.toNumber();var b=o?u[v]:i(u,v);return a(b),b}var x,w,_=v.floor(),E=v.minus(_),S=_.toNumber();if(o)x=u[S],w=u[S+1];else{w=i(u,S+1),x=u[S];for(var A=0;A<S;++A)s(u[A],x)>0&&(x=u[A])}a(x),a(w);var N=new E.constructor(1);return r(n(x,N.minus(E)),n(w,E))}var a=t({"number | BigNumber | Unit":function(e){return e}});return function(e,t,r){var n,i,s;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(g(e)){if("boolean"==typeof(r=r||!1)){if(i=e.valueOf(),l(t)){if(t<0)throw new Error("N/prob must be non-negative");if(t<=1)return o(i,t,r);if(t>1){if(!re(t))throw new Error("N must be a positive integer");var a=t+1;n=new Array(t);for(var c=0;c<t;)n[c]=o(i,++c/a,r);return n}}if(u(t)){var p=t.constructor;if(t.isNegative())throw new Error("N/prob must be non-negative");if(s=new p(1),t.lte(s))return new p(o(i,t,r));if(t.gt(s)){if(!t.isInteger())throw new Error("N must be a positive integer");var h=t.toNumber();if(h>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var d=new p(h+1);n=new Array(h);for(var f=0;f<h;)n[f]=new p(o(i,new p(++f).div(d),r));return n}}if(Array.isArray(t)){n=new Array(t.length);for(var m=0;m<n.length;++m){var y=t[m];if(l(y)){if(y<0||y>1)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!u(y))throw new TypeError("Unexpected type of argument in function quantileSeq");if(s=new y.constructor(1),y.isNegative()||y.gt(s))throw new Error("Probability must be between 0 and 1, inclusive")}n[m]=o(i,y,r)}return n}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}}));function Eu(e){var t;if(re(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:Ks(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Eu(1-e));if(e>=171.35)return 1/0;if(e>85){var r=e*e,n=r*e,i=n*e,s=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*e))}--e,t=Au[0];for(var o=1;o<Au.length;++o)t+=Au[o]/(e+o);var a=e+Su+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*t}Eu.signature="number";var Su=4.7421875,Au=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],Nu="gamma",ku=K(Nu,["typed","config","multiplyScalar","pow","BigNumber","Complex"],(e=>{var{typed:t,config:r,multiplyScalar:n,pow:i,BigNumber:s,Complex:o}=e;return t(Nu,{number:Eu,Complex:function(e){if(0===e.im)return this(e.re);e=new o(e.re-1,e.im);for(var t=new o(Au[0],0),r=1;r<Au.length;++r){var s=e.re+r,a=s*s+e.im*e.im;0!==a?(t.re+=Au[r]*s/a,t.im+=-Au[r]*e.im/a):t.re=Au[r]<0?-1/0:1/0}var l=new o(e.re+Su+.5,e.im),u=Math.sqrt(2*Math.PI);e.re+=.5;var c=i(l,e);0===c.im?c.re*=u:(0===c.re||(c.re*=u),c.im*=u);var p=Math.exp(-l.re);return l.re=p*Math.cos(-l.im),l.im=p*Math.sin(-l.im),n(n(c,l),t)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new s(1/0):a(e.minus(1));if(!e.isFinite())return new s(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(e){return on(e,this)}});function a(e){if(e<8)return new s([1,1,2,6,24,120,720,5040][e]);var t=r.precision+(0|Math.log(e.toNumber())),n=s.clone({precision:t});if(e%2==1)return e.times(a(new s(e-1)));for(var i=e,o=new n(e),l=e.toNumber();i>2;)l+=i-=2,o=o.times(l);return new s(o.toPrecision(s.precision))}})),Mu=K("bignumber",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(e){return new r(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var n=t[2],i=r(t[1]),s=new r(2).pow(Number(n));if(i.gt(s.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var o=new r(2).pow(Number(n)-1);return i.gte(o)?i.sub(s):i}return new r(e)},BigNumber:function(e){return e},Fraction:function(e){return new r(e.n).div(e.d).times(e.s)},null:function(e){return new r(0)},"Array | Matrix":function(e){return on(e,this)}})})),Cu="matrixFromColumns",Tu=K(Cu,["typed","matrix","flatten","size"],(e=>{var{typed:t,matrix:r,flatten:n,size:i}=e;return t(Cu,{"...Array":function(e){return s(e)},"...Matrix":function(e){return r(s(e.map((e=>e.toArray()))))}});function s(e){if(0===e.length)throw new TypeError("At least one column is needed to construct a matrix.");for(var t=o(e[0]),r=[],i=0;i<t;i++)r[i]=[];for(var s of e){var a=o(s);if(a!==t)throw new TypeError("The vectors had different length: "+(0|t)+" ≠ "+(0|a));for(var l=n(s),u=0;u<t;u++)r[u].push(l[u])}return r}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}})),Ou=K("lcm",["typed","matrix","equalScalar"],(e=>{var{typed:t,matrix:r,equalScalar:n}=e,i=aa({typed:t,equalScalar:n}),s=da({typed:t,equalScalar:n}),o=ca({typed:t,equalScalar:n}),a=ia({typed:t}),l=sa({typed:t});return t("lcm",{"number, number":Vn,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;var r=e.times(t);for(;!t.isZero();){var n=t;t=e.mod(n),e=n}return r.div(e).abs()},"Fraction, Fraction":function(e,t){return e.lcm(t)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return a(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, number | BigNumber":function(e,t){return o(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return l(e,t,this,!1)},"number | BigNumber, SparseMatrix":function(e,t){return o(t,e,this,!0)},"number | BigNumber, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, number | BigNumber":function(e,t){return l(r(e),t,this,!1).valueOf()},"number | BigNumber, Array":function(e,t){return l(r(t),e,this,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(e,t,r){for(var n=this(e,t),i=0;i<r.length;i++)n=this(n,r[i]);return n}})})),Iu="bitOr",Pu=K(Iu,["typed","matrix","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,DenseMatrix:i}=e,s=ta({typed:t}),o=ra({typed:t,equalScalar:n}),a=na({typed:t,DenseMatrix:i}),l=ia({typed:t}),u=sa({typed:t});return t(Iu,{"number, number":Ci,"BigNumber, BigNumber":xi,"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,this,!0).valueOf()}})})),Du="kron",Ru=K(Du,["typed","matrix","multiplyScalar"],(e=>{var{typed:t,matrix:r,multiplyScalar:n}=e;return t(Du,{"Matrix, Matrix":function(e,t){return r(i(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return r(i(e.toArray(),t))},"Array, Matrix":function(e,t){return r(i(e,t.toArray()))},"Array, Array":i});function i(e,t){if(1===gr(e).length&&(e=[e]),1===gr(t).length&&(t=[t]),gr(e).length>2||gr(t).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var r=[],i=[];return e.map((function(e){return t.map((function(t){return i=[],r.push(i),e.map((function(e){return t.map((function(t){return i.push(n(e,t))}))}))}))}))&&r}})),Lu=K("transpose",["typed","matrix"],(e=>{var{typed:t,matrix:r}=e;return t("transpose",{Array:function(e){return this(r(e)).valueOf()},Matrix:function(e){var t,r=e.size();switch(r.length){case 1:t=e.clone();break;case 2:var n=r[0],i=r[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+ur(r)+")");switch(e.storage()){case"dense":t=function(e,t,r){for(var n,i=e._data,s=[],o=0;o<r;o++){n=s[o]=[];for(var a=0;a<t;a++)n[a]=Y(i[a][o])}return e.createDenseMatrix({data:s,size:[r,t],datatype:e._datatype})}(e,n,i);break;case"sparse":t=function(e,t,r){for(var n,i,s,o=e._values,a=e._index,l=e._ptr,u=o?[]:void 0,c=[],p=[],h=[],d=0;d<t;d++)h[d]=0;for(n=0,i=a.length;n<i;n++)h[a[n]]++;for(var f=0,m=0;m<t;m++)p.push(f),f+=h[m],h[m]=p[m];for(p.push(f),s=0;s<r;s++)for(var g=l[s],y=l[s+1],v=g;v<y;v++){var b=h[a[v]]++;c[b]=s,o&&(u[b]=Y(o[v]))}return e.createSparseMatrix({values:u,index:c,ptr:p,size:[r,t],datatype:e._datatype})}(e,n,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+ur(this._size)+")")}return t},any:function(e){return Y(e)}})})),qu=K("numeric",["number","?bignumber","?fraction"],(e=>{var{number:t,bignumber:r,fraction:n}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:e=>t(e),BigNumber:r?e=>r(e):Da,Fraction:n?e=>n(e):Ra};return function(e,t){var r=W(e);if(!(r in i))throw new TypeError("Cannot convert "+e+' of type "'+r+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in s))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(s).join(", "));return t===r?e:s[t](e)}})),$u=K("and",["typed","matrix","equalScalar","zeros","not"],(e=>{var{typed:t,matrix:r,equalScalar:n,zeros:i,not:s}=e,o=aa({typed:t,equalScalar:n}),a=da({typed:t,equalScalar:n}),l=ca({typed:t,equalScalar:n}),u=ia({typed:t}),c=sa({typed:t});return t("and",{"number, number":Ui,"Complex, Complex":function(e,t){return!(0===e.re&&0===e.im||0===t.re&&0===t.im)},"BigNumber, BigNumber":function(e,t){return!(e.isZero()||t.isZero()||e.isNaN()||t.isNaN())},"Unit, Unit":function(e,t){return this(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return a(e,t,this,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return o(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return u(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return s(t)?i(e.size(),e.storage()):l(e,t,this,!1)},"DenseMatrix, any":function(e,t){return s(t)?i(e.size(),e.storage()):c(e,t,this,!1)},"any, SparseMatrix":function(e,t){return s(e)?i(e.size(),e.storage()):l(t,e,this,!0)},"any, DenseMatrix":function(e,t){return s(e)?i(e.size(),e.storage()):c(t,e,this,!0)},"Array, any":function(e,t){return this(r(e),t).valueOf()},"any, Array":function(e,t){return this(e,r(t)).valueOf()}})})),Bu="smallerEq",zu=K(Bu,["typed","config","matrix","DenseMatrix"],(e=>{var{typed:t,config:r,matrix:n,DenseMatrix:i}=e,s=la({typed:t}),o=xa({typed:t,DenseMatrix:i}),a=pa({typed:t,DenseMatrix:i}),l=ia({typed:t}),u=sa({typed:t});return t(Bu,{"boolean, boolean":function(e,t){return e<=t},"number, number":function(e,t){return e<=t||ye(e,t,r.epsilon)},"BigNumber, BigNumber":function(e,t){return e.lte(t)||En(e,t,r.epsilon)},"Fraction, Fraction":function(e,t){return 1!==e.compare(t)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(e,t){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return this(e.value,t.value)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,this)},"Array, Array":function(e,t){return this(n(e),n(t)).valueOf()},"Array, Matrix":function(e,t){return this(n(e),t)},"Matrix, Array":function(e,t){return this(e,n(t))},"SparseMatrix, any":function(e,t){return a(e,t,this,!1)},"DenseMatrix, any":function(e,t){return u(e,t,this,!1)},"any, SparseMatrix":function(e,t){return a(t,e,this,!0)},"any, DenseMatrix":function(e,t){return u(t,e,this,!0)},"Array, any":function(e,t){return u(n(e),t,this,!1).valueOf()},"any, Array":function(e,t){return u(n(t),e,this,!0).valueOf()}})})),Fu="sort",Uu=K(Fu,["typed","matrix","compare","compareNatural"],(e=>{var{typed:t,matrix:r,compare:n,compareNatural:i}=e,s=n,o=(e,t)=>-n(e,t);return t(Fu,{Array:function(e){return l(e),e.sort(s)},Matrix:function(e){return u(e),r(e.toArray().sort(s),e.storage())},"Array, function":function(e,t){return l(e),e.sort(t)},"Matrix, function":function(e,t){return u(e),r(e.toArray().sort(t),e.storage())},"Array, string":function(e,t){return l(e),e.sort(a(t))},"Matrix, string":function(e,t){return u(e),r(e.toArray().sort(a(t)),e.storage())}});function a(e){if("asc"===e)return s;if("desc"===e)return o;if("natural"===e)return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(e){if(1!==gr(e).length)throw new Error("One dimensional array expected")}function u(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected")}}));function ju(e,t,r){var n;return-1!==String(e).indexOf("Unexpected type")?(n=arguments.length>2?" (type: "+W(r)+", value: "+JSON.stringify(r)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+n)):-1!==String(e).indexOf("complex numbers")?(n=arguments.length>2?" (type: "+W(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+n)):e}var Gu=K("min",["typed","config","numeric","smaller"],(e=>{var{typed:t,config:r,numeric:n,smaller:i}=e;return t("min",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){return an(e,t.valueOf(),s)},"...":function(e){if(nn(e))throw new TypeError("Scalar values expected in function min");return o(e)}});function s(e,t){try{return i(e,t)?e:t}catch(r){throw ju(r,"min",t)}}function o(e){var t;if(sn(e,(function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e)}catch(r){throw ju(r,"min",e)}})),void 0===t)throw new Error("Cannot calculate min of an empty array");return"string"==typeof t&&(t=n(t,r.number)),t}})),Vu=K("cot",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:r}=e;return t("cot",{number:Es,Complex:function(e){return e.cot()},BigNumber:function(e){return new r(1).div(e.tan())},Unit:function(e){if(!e.hasBase(e.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return this(e.value)},"Array | Matrix":function(e){return on(e,this)}})})),Hu="setDistinct",Wu=K(Hu,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=e;return t(Hu,{"Array | Matrix":function(e){var t;if(0===n(r(e),new s(0)))t=[];else{var a=Cr(Array.isArray(e)?e:e.toArray()).sort(i);(t=[]).push(a[0]);for(var l=1;l<a.length;l++)0!==i(a[l],a[l-1])&&t.push(a[l])}return Array.isArray(e)?t:new o(t)}})})),Yu="setPowerset",Xu=K(Yu,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:r,subset:n,compareNatural:i,Index:s}=e;return t(Yu,{"Array | Matrix":function(e){if(0===n(r(e),new s(0)))return[];for(var t=Cr(Array.isArray(e)?e:e.toArray()).sort(i),a=[],l=0;l.toString(2).length<=t.length;)a.push(o(t,l.toString(2).split("").reverse())),l++;return function(e){for(var t=[],r=e.length-1;r>0;r--)for(var n=0;n<r;n++)e[n].length>e[n+1].length&&(t=e[n],e[n]=e[n+1],e[n+1]=t);return e}(a)}});function o(e,t){for(var r=[],n=0;n<t.length;n++)"1"===t[n]&&r.push(e[n]);return r}})),Zu="index",Qu=K(Zu,["typed","Index"],(e=>{var{typed:t,Index:r}=e;return t(Zu,{"...number | string | BigNumber | Range | Array | Matrix":function(e){var t=e.map((function(e){return u(e)?e.toNumber():Array.isArray(e)||m(e)?e.map((function(e){return u(e)?e.toNumber():e})):e})),n=new r;return r.apply(n,t),n}})})),Ku=K("sum",["typed","config","add","numeric"],(e=>{var{typed:t,config:r,add:n,numeric:i}=e;return t("sum",{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(e,t){try{return an(e,t,n)}catch(r){throw ju(r,"sum")}},"...":function(e){if(nn(e))throw new TypeError("Scalar values expected in function sum");return s(e)}});function s(e){var t;return sn(e,(function(e){try{t=void 0===t?e:n(t,e)}catch(r){throw ju(r,"sum",e)}})),void 0===t&&(t=i(0,r.number)),"string"==typeof t&&(t=i(t,r.number)),t}})),Ju="factorial",ec=K(Ju,["typed","gamma"],(e=>{var{typed:t,gamma:r}=e;return t(Ju,{number:function(e){if(e<0)throw new Error("Value must be non-negative");return r(e+1)},BigNumber:function(e){if(e.isNegative())throw new Error("Value must be non-negative");return r(e.plus(1))},"Array | Matrix":function(e){return on(e,this)}})})),tc="permutations",rc=K(tc,["typed","factorial"],(e=>{var{typed:t,factorial:r}=e;return t(tc,{"number | BigNumber":r,"number, number":function(e,t){if(!re(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(!re(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(t>e)throw new TypeError("second argument k must be less than or equal to first argument n");return Ks(e-t+1,e)},"BigNumber, BigNumber":function(e,t){var r,n;if(!nc(e)||!nc(t))throw new TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(r=e.mul(0).add(1),n=e.minus(t).plus(1);n.lte(e);n=n.plus(1))r=r.times(n);return r}})}));function nc(e){return e.isInteger()&&e.gte(0)}var ic="matrixFromRows",sc=K(ic,["typed","matrix","flatten","size"],(e=>{var{typed:t,matrix:r,flatten:n,size:i}=e;return t(ic,{"...Array":function(e){return s(e)},"...Matrix":function(e){return r(s(e.map((e=>e.toArray()))))}});function s(e){if(0===e.length)throw new TypeError("At least one row is needed to construct a matrix.");var t=o(e[0]),r=[];for(var i of e){var s=o(i);if(s!==t)throw new TypeError("The vectors had different length: "+(0|t)+" ≠ "+(0|s));r.push(n(i))}return r}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}})),oc="subtract",ac=K(oc,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,addScalar:i,unaryMinus:s,DenseMatrix:o}=e,a=ta({typed:t}),l=la({typed:t}),u=ua({typed:t,equalScalar:n}),c=na({typed:t,DenseMatrix:o}),p=ia({typed:t}),h=sa({typed:t});return t(oc,{"number, number":function(e,t){return e-t},"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":function(e,t){if(null===e.value)throw new Error("Parameter x contains a unit with undefined value");if(null===t.value)throw new Error("Parameter y contains a unit with undefined value");if(!e.equalBase(t))throw new Error("Units do not match");var r=e.clone();return r.value=this(r.value,t.value),r.fixPrefix=!1,r},"SparseMatrix, SparseMatrix":function(e,t){return lc(e,t),u(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return lc(e,t),l(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return lc(e,t),a(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return lc(e,t),p(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return c(e,s(t),i)},"DenseMatrix, any":function(e,t){return h(e,t,this)},"any, SparseMatrix":function(e,t){return c(t,e,this,!0)},"any, DenseMatrix":function(e,t){return h(t,e,this,!0)},"Array, any":function(e,t){return h(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return h(r(t),e,this,!0).valueOf()}})}));function lc(e,t){var r=e.size(),n=t.size();if(r.length!==n.length)throw new fr(r.length,n.length)}var uc="cross",cc=K(uc,["typed","matrix","subtract","multiply"],(e=>{var{typed:t,matrix:r,subtract:n,multiply:i}=e;return t(uc,{"Matrix, Matrix":function(e,t){return r(s(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return r(s(e.toArray(),t))},"Array, Matrix":function(e,t){return r(s(e,t.toArray()))},"Array, Array":s});function s(e,t){var r=Math.max(gr(e).length,gr(t).length);e=Ar(e),t=Ar(t);var s=gr(e),o=gr(t);if(1!==s.length||1!==o.length||3!==s[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+s.join(", ")+"], B = ["+o.join(", ")+"])");var a=[n(i(e[1],t[2]),i(e[2],t[1])),n(i(e[2],t[0]),i(e[0],t[2])),n(i(e[0],t[1]),i(e[1],t[0]))];return r>1?[a]:a}})),pc="range",hc=K(pc,["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],(e=>{var{typed:t,config:r,matrix:n,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:l}=e;return t(pc,{string:c,"string, boolean":c,"number, number":function(e,t){return u(p(e,t,1))},"number, number, number":function(e,t,r){return u(p(e,t,r))},"number, number, boolean":function(e,t,r){return u(r?h(e,t,1):p(e,t,1))},"number, number, number, boolean":function(e,t,r,n){return u(n?h(e,t,r):p(e,t,r))},"BigNumber, BigNumber":function(e,t){return u(d(e,t,new(0,e.constructor)(1)))},"BigNumber, BigNumber, BigNumber":function(e,t,r){return u(d(e,t,r))},"BigNumber, BigNumber, boolean":function(e,t,r){var n=e.constructor;return u(r?f(e,t,new n(1)):d(e,t,new n(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,r,n){return u(n?f(e,t,r):d(e,t,r))}});function u(e){return"Matrix"===r.matrix?n?n(e):La():e}function c(e,t){var n=function(e){var t=e.split(":").map((function(e){return Number(e)}));if(t.some((function(e){return isNaN(e)})))return null;switch(t.length){case 2:return{start:t[0],end:t[1],step:1};case 3:return{start:t[0],end:t[2],step:t[1]};default:return null}}(e);if(!n)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===r.number?(void 0===i&&Da(),u((t?f:d)(i(n.start),i(n.end),i(n.step)))):u((t?h:p)(n.start,n.end,n.step))}function p(e,t,r){var n=[],i=e;if(r>0)for(;s(i,t);)n.push(i),i+=r;else if(r<0)for(;a(i,t);)n.push(i),i+=r;return n}function h(e,t,r){var n=[],i=e;if(r>0)for(;o(i,t);)n.push(i),i+=r;else if(r<0)for(;l(i,t);)n.push(i),i+=r;return n}function d(e,t,r){var n=i(0),o=[],l=e;if(r.gt(n))for(;s(l,t);)o.push(l),l=l.plus(r);else if(r.lt(n))for(;a(l,t);)o.push(l),l=l.plus(r);return o}function f(e,t,r){var n=i(0),s=[],a=e;if(r.gt(n))for(;o(a,t);)s.push(a),a=a.plus(r);else if(r.lt(n))for(;l(a,t);)s.push(a),a=a.plus(r);return s}})),dc=K("row",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:r,matrix:n,range:i}=e;return t("row",{"Matrix, number":s,"Array, number":function(e,t){return s(n(Y(e)),t).valueOf()}});function s(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");br(t,e.size()[0]);var n=i(0,e.size()[1]),s=new r(t,n);return e.subset(s)}})),fc="prod",mc=K(fc,["typed","config","multiplyScalar","numeric"],(e=>{var{typed:t,config:r,multiplyScalar:n,numeric:i}=e;return t(fc,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("prod(A, dim) is not yet supported")},"...":function(e){return s(e)}});function s(e){var t;if(sn(e,(function(e){try{t=void 0===t?e:n(t,e)}catch(r){throw ju(r,"prod",e)}})),"string"==typeof t&&(t=i(t,r.number)),void 0===t)throw new Error("Cannot calculate prod of an empty array");return t}})),gc="equal",yc=K(gc,["typed","matrix","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,DenseMatrix:i}=e,s=la({typed:t}),o=xa({typed:t,DenseMatrix:i}),a=pa({typed:t,DenseMatrix:i}),l=ia({typed:t}),u=sa({typed:t});return t(gc,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)},"SparseMatrix, SparseMatrix":function(e,t){return o(e,t,n)},"SparseMatrix, DenseMatrix":function(e,t){return s(t,e,n,!0)},"DenseMatrix, SparseMatrix":function(e,t){return s(e,t,n,!1)},"DenseMatrix, DenseMatrix":function(e,t){return l(e,t,n)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return a(e,t,n,!1)},"DenseMatrix, any":function(e,t){return u(e,t,n,!1)},"any, SparseMatrix":function(e,t){return a(t,e,n,!0)},"any, DenseMatrix":function(e,t){return u(t,e,n,!0)},"Array, any":function(e,t){return u(r(e),t,n,!1).valueOf()},"any, Array":function(e,t){return u(r(t),e,n,!0).valueOf()}})})),vc=(K(gc,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:r}=e;return t(gc,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:r(e,t)}})})),K("max",["typed","config","numeric","larger"],(e=>{var{typed:t,config:r,numeric:n,larger:i}=e;return t("max",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){return an(e,t.valueOf(),s)},"...":function(e){if(nn(e))throw new TypeError("Scalar values expected in function max");return o(e)}});function s(e,t){try{return i(e,t)?e:t}catch(r){throw ju(r,"max",t)}}function o(e){var t;if(sn(e,(function(e){try{isNaN(e)&&"number"==typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e)}catch(r){throw ju(r,"max",e)}})),void 0===t)throw new Error("Cannot calculate max of an empty array");return"string"==typeof t&&(t=n(t,r.number)),t}}))),bc="setCartesian",xc=K(bc,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=e;return t(bc,{"Array | Matrix, Array | Matrix":function(e,t){var a=[];if(0!==n(r(e),new s(0))&&0!==n(r(t),new s(0))){var l=Cr(Array.isArray(e)?e:e.toArray()).sort(i),u=Cr(Array.isArray(t)?t:t.toArray()).sort(i);a=[];for(var c=0;c<l.length;c++)for(var p=0;p<u.length;p++)a.push([l[c],u[p]])}return Array.isArray(e)&&Array.isArray(t)?a:new o(a)}})})),wc="setSymDifference",_c=K(wc,["typed","size","concat","subset","setDifference","Index"],(e=>{var{typed:t,size:r,concat:n,subset:i,setDifference:s,Index:o}=e;return t(wc,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(r(e),new o(0)))return Cr(t);if(0===i(r(t),new o(0)))return Cr(e);var a=Cr(e),l=Cr(t);return n(s(a,l),s(l,a))}})})),Ec=K("ceil",["typed","config","round","matrix","equalScalar"],(e=>{var{typed:t,config:r,round:n,matrix:i,equalScalar:s}=e,o=ca({typed:t,equalScalar:s}),a=sa({typed:t});return t("ceil",{number:function(e){return ye(e,n(e),r.epsilon)?n(e):zn(e)},"number, number":function(e,t){if(ye(e,n(e,t),r.epsilon))return n(e,t);var[i,s]="".concat(e,"e").split("e"),o=Math.ceil(Number("".concat(i,"e").concat(Number(s)+t)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-t))},Complex:function(e){return e.ceil()},"Complex, number":function(e,t){return e.ceil(t)},BigNumber:function(e){return En(e,n(e),r.epsilon)?n(e):e.ceil()},"BigNumber, BigNumber":function(e,t){return En(e,n(e,t),r.epsilon)?n(e,t):e.toDecimalPlaces(t.toNumber(),tt.ROUND_CEIL)},Fraction:function(e){return e.ceil()},"Fraction, number":function(e,t){return e.ceil(t)},"Array | Matrix":function(e){return on(e,this,!0)},"Array | Matrix, number":function(e,t){return on(e,(e=>this(e,t)),!0)},"SparseMatrix, number | BigNumber":function(e,t){return o(e,t,this,!1)},"DenseMatrix, number | BigNumber":function(e,t){return a(e,t,this,!1)},"number | Complex | BigNumber, Array":function(e,t){return a(i(t),e,this,!0).valueOf()}})})),Sc=K("xor",["typed","matrix","DenseMatrix"],(e=>{var{typed:t,matrix:r,DenseMatrix:n}=e,i=la({typed:t}),s=xa({typed:t,DenseMatrix:n}),o=pa({typed:t,DenseMatrix:n}),a=ia({typed:t}),l=sa({typed:t});return t("xor",{"number, number":Fi,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)!=(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return(!e.isZero()&&!e.isNaN())!=(!t.isZero()&&!t.isNaN())},"Unit, Unit":function(e,t){return this(e.value||0,t.value||0)},"SparseMatrix, SparseMatrix":function(e,t){return s(e,t,this)},"SparseMatrix, DenseMatrix":function(e,t){return i(t,e,this,!0)},"DenseMatrix, SparseMatrix":function(e,t){return i(e,t,this,!1)},"DenseMatrix, DenseMatrix":function(e,t){return a(e,t,this)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return o(e,t,this,!1)},"DenseMatrix, any":function(e,t){return l(e,t,this,!1)},"any, SparseMatrix":function(e,t){return o(t,e,this,!0)},"any, DenseMatrix":function(e,t){return l(t,e,this,!0)},"Array, any":function(e,t){return l(r(e),t,this,!1).valueOf()},"any, Array":function(e,t){return l(r(t),e,this,!0).valueOf()}})})),Ac="count",Nc=K(Ac,["typed","size","prod"],(e=>{var{typed:t,size:r,prod:n}=e;return t(Ac,{string:function(e){return e.length},"Matrix | Array":function(e){return n(r(e))}})})),kc="ctranspose",Mc=K(kc,["typed","transpose","conj"],(e=>{var{typed:t,transpose:r,conj:n}=e;return t(kc,{any:function(e){return n(r(e))}})})),Cc="deepEqual",Tc=K(Cc,["typed","equal"],(e=>{var{typed:t,equal:r}=e;return t(Cc,{"any, any":function(e,t){return n(e.valueOf(),t.valueOf())}});function n(e,t){if(Array.isArray(e)){if(Array.isArray(t)){var i=e.length;if(i!==t.length)return!1;for(var s=0;s<i;s++)if(!n(e[s],t[s]))return!1;return!0}return!1}return!Array.isArray(t)&&r(e,t)}})),Oc="setIsSubset",Ic=K(Oc,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:r,subset:n,compareNatural:i,Index:s}=e;return t(Oc,{"Array | Matrix, Array | Matrix":function(e,t){if(0===n(r(e),new s(0)))return!0;if(0===n(r(t),new s(0)))return!1;for(var o,a=Rr(Cr(Array.isArray(e)?e:e.toArray()).sort(i)),l=Rr(Cr(Array.isArray(t)?t:t.toArray()).sort(i)),u=0;u<a.length;u++){o=!1;for(var c=0;c<l.length;c++)if(0===i(a[u].value,l[c].value)&&a[u].identifier===l[c].identifier){o=!0;break}if(!1===o)return!1}return!0}})})),Pc=K("fix",["typed","Complex","matrix","ceil","floor"],(e=>{var{typed:t,Complex:r,matrix:n,ceil:i,floor:s}=e,o=sa({typed:t});return t("fix",{number:function(e){return e>0?s(e):i(e)},"number, number | BigNumber":function(e,t){return e>0?s(e,t):i(e,t)},Complex:function(e){return new r(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},"Complex, number | BigNumber":function(e,t){return new r(e.re>0?s(e.re,t):i(e.re,t),e.im>0?s(e.im,t):i(e.im,t))},BigNumber:function(e){return e.isNegative()?i(e):s(e)},"BigNumber, number | BigNumber":function(e,t){return e.isNegative()?i(e,t):s(e,t)},Fraction:function(e){return e.s<0?e.ceil():e.floor()},"Fraction, number | BigNumber":function(e,t){return e.s<0?e.ceil(t):e.floor(t)},"Array | Matrix":function(e){return on(e,this,!0)},"Array | Matrix, number | BigNumber":function(e,t){return on(e,(e=>this(e,t)),!0)},"number | Complex | BigNumber, Array":function(e,t){return o(n(t),e,this,!0).valueOf()}})})),Dc="diff",Rc=K(Dc,["typed","matrix","subtract","number"],(e=>{var{typed:t,matrix:r,subtract:n,number:i}=e;return t(Dc,{"Array | Matrix":function(e){return m(e)?r(o(e.toArray())):o(e)},"Array | Matrix, number":function(e,t){if(!re(t))throw new RangeError("Dimension must be a whole number");return m(e)?r(s(e.toArray(),t)):s(e,t)},"Array | Matrix, BigNumber":function(e,t){return this(e,i(t))}});function s(e,t){if(m(e)&&(e=e.toArray()),!Array.isArray(e))throw RangeError("Array/Matrix does not have that many dimensions");if(t>0){var r=[];return e.forEach((e=>{r.push(s(e,t-1))})),r}if(0===t)return o(e);throw RangeError("Cannot have negative dimension")}function o(e){var t=[],r=e.length;if(r<2)return e;for(var n=1;n<r;n++)t.push(a(e[n-1],e[n]));return t}function a(e,t){m(e)&&(e=e.toArray()),m(t)&&(t=t.toArray());var r=Array.isArray(e),i=Array.isArray(t);if(r&&i)return function(e,t){if(e.length!==t.length)throw RangeError("Not all sub-arrays have the same length");for(var r=[],n=e.length,i=0;i<n;i++)r.push(a(e[i],t[i]));return r}(e,t);if(!r&&!i)return n(t,e);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}})),Lc="divideScalar",qc=K(Lc,["typed","numeric"],(e=>{var{typed:t,numeric:r}=e;return t(Lc,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Fraction | BigNumber":function(e,t){var n=e.clone(),i=r(1,W(t));return n.value=this(null===n.value?n._normalize(i):n.value,t),n},"number | Fraction | BigNumber, Unit":function(e,t){var n=t.clone();n=n.pow(-1);var i=r(1,W(e));return n.value=this(e,null===t.value?t._normalize(i):t.value),n},"Unit, Unit":function(e,t){return e.divide(t)}})})),$c="nthRoots",Bc=K($c,["config","typed","divideScalar","Complex"],(e=>{var{typed:t,config:r,divideScalar:n,Complex:i}=e,s=[function(e){return new i(e,0)},function(e){return new i(0,e)},function(e){return new i(-e,0)},function(e){return new i(0,-e)}];function o(e,t){if(t<0)throw new Error("Root must be greater than zero");if(0===t)throw new Error("Root must be non-zero");if(t%1!=0)throw new Error("Root must be an integer");if(0===e||0===e.abs())return[new i(0,0)];var r,n="number"==typeof e;(n||0===e.re||0===e.im)&&(r=n?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var o=e.arg(),a=e.abs(),l=[],u=Math.pow(a,1/t),c=0;c<t;c++){var p=(r+4*c)/t;p!==Math.round(p)?l.push(new i({r:u,phi:(o+2*Math.PI*c)/t})):l.push(s[p%4](u))}return l}return t($c,{Complex:function(e){return o(e,2)},"Complex, number":o})}));function zc(e){var{DenseMatrix:t}=e;return function(e,r,n){var i=e.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+ur(i)+")");var s=i[0];if(s!==i[1])throw new RangeError("Matrix must be square (size: "+ur(i)+")");var o=[];if(m(r)){var a=r.size(),l=r._data;if(1===a.length){if(a[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var u=0;u<s;u++)o[u]=[l[u]];return new t({data:o,size:[s,1],datatype:r._datatype})}if(2===a.length){if(a[0]!==s||1!==a[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(y(r)){if(n){o=[];for(var c=0;c<s;c++)o[c]=[l[c][0]];return new t({data:o,size:[s,1],datatype:r._datatype})}return r}if(v(r)){for(var p=0;p<s;p++)o[p]=[0];for(var h=r._values,d=r._index,g=r._ptr,b=g[1],x=g[0];x<b;x++){o[d[x]][0]=h[x]}return new t({data:o,size:[s,1],datatype:r._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(f(r)){var w=gr(r);if(1===w.length){if(w[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<s;_++)o[_]=[r[_]];return new t({data:o,size:[s,1]})}if(2===w.length){if(w[0]!==s||1!==w[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var E=0;E<s;E++)o[E]=[r[E][0]];return new t({data:o,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var Fc="lsolve",Uc=K(Fc,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=e,l=zc({DenseMatrix:a});return t(Fc,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],p=e._values,h=e._index,d=e._ptr,f=[],m=0;m<c;m++){var g=r[m][0]||0;if(o(g,0))f[m]=[0];else{for(var y=0,v=[],b=[],x=d[m],w=d[m+1],_=x;_<w;_++){var E=h[_];E===m?y=p[_]:E>m&&(v.push(p[_]),b.push(E))}if(o(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var S=n(g,y),A=0,N=b.length;A<N;A++){var k=b[A];r[k]=[s(r[k][0]||0,i(S,v[A]))]}f[m]=[S]}}return new a({data:f,size:[u,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(r(e),t).valueOf()}});function u(e,t){for(var r=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],p=[],h=e._data,d=0;d<c;d++){var f=r[d][0]||0,m=void 0;if(o(f,0))m=0;else{var g=h[d][d];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=n(f,g);for(var y=d+1;y<u;y++)r[y]=[s(r[y][0]||0,i(m,h[y][d]))]}p[d]=[m]}return new a({data:p,size:[u,1]})}})),jc="lsolveAll",Gc=K(jc,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=e,l=zc({DenseMatrix:a});return t(jc,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=[l(e,t,!0)._data.map((e=>e[0]))],u=e._size[0],c=e._size[1],p=e._values,h=e._index,d=e._ptr,f=0;f<c;f++)for(var m=r.length,g=0;g<m;g++){for(var y=r[g],v=[],b=[],x=d[f],w=d[f+1],_=0,E=x;E<w;E++){var S=h[E];S===f?_=p[E]:S>f&&(v.push(p[E]),b.push(S))}if(o(_,0))if(o(y[f],0)){if(0===g){var A=[...y];A[f]=1;for(var N=0,k=b.length;N<k;N++){var M=b[N];A[M]=s(A[M],v[N])}r.push(A)}}else{if(0===g)return[];r.splice(g,1),g-=1,m-=1}else{y[f]=n(y[f],_);for(var C=0,T=b.length;C<T;C++){var O=b[C];y[O]=s(y[O],i(y[f],v[C]))}}}return r.map((e=>new a({data:e.map((e=>[e])),size:[u,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(r(e),t).map((e=>e.valueOf()))}});function u(e,t){for(var r=[l(e,t,!0)._data.map((e=>e[0]))],u=e._data,c=e._size[0],p=e._size[1],h=0;h<p;h++)for(var d=r.length,f=0;f<d;f++){var m=r[f];if(o(u[h][h],0))if(o(m[h],0)){if(0===f){var g=[...m];g[h]=1;for(var y=h+1;y<p;y++)g[y]=s(g[y],u[y][h]);r.push(g)}}else{if(0===f)return[];r.splice(f,1),f-=1,d-=1}else{m[h]=n(m[h],u[h][h]);for(var v=h+1;v<p;v++)m[v]=s(m[v],i(m[h],u[v][h]))}}return r.map((e=>new a({data:e.map((e=>[e])),size:[c,1]})))}})),Vc=K("Spa",["addScalar","equalScalar","FibonacciHeap"],(e=>{var{addScalar:t,equalScalar:r,FibonacciHeap:n}=e;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var r=this._heap.insert(e,t);this._values[e]=r}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,r){var n=this._values[e];n?n.value=t(n.value,r):(n=this._heap.insert(e,r),this._values[e]=n)},i.prototype.forEach=function(e,t,n){var i=this._heap,s=this._values,o=[],a=i.extractMinimum();for(a&&o.push(a);a&&a.key<=t;)a.key>=e&&(r(a.value,0)||n(a.key,a.value,this)),(a=i.extractMinimum())&&o.push(a);for(var l=0;l<o.length;l++){var u=o[l];s[(a=i.insert(u.key,u.value)).key]=a}},i.prototype.swap=function(e,t){var r=this._values[e],n=this._values[t];if(!r&&n)r=this._heap.insert(e,n.value),this._heap.remove(n),this._values[e]=r,this._values[t]=void 0;else if(r&&!n)n=this._heap.insert(t,r.value),this._heap.remove(r),this._values[t]=n,this._values[e]=void 0;else if(r&&n){var i=r.value;r.value=n.value,n.value=i}},i}),{isClass:!0}),Hc="setUnion",Wc=K(Hc,["typed","size","concat","subset","setIntersect","setSymDifference","Index"],(e=>{var{typed:t,size:r,concat:n,subset:i,setIntersect:s,setSymDifference:o,Index:a}=e;return t(Hc,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(r(e),new a(0)))return Cr(t);if(0===i(r(t),new a(0)))return Cr(e);var l=Cr(e),u=Cr(t);return n(o(l,u),s(l,u))}})})),Yc=K("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(e=>{var{typed:t,matrix:r,abs:n,addScalar:i,divideScalar:s,multiplyScalar:o,subtract:a,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:p,SparseMatrix:h,Spa:d}=e;return t("lup",{DenseMatrix:function(e){return f(e)},SparseMatrix:function(e){return m(e)},Array:function(e){var t=f(r(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function f(e){var t,r,c,h=e._size[0],d=e._size[1],f=Math.min(h,d),m=Y(e._data),g=[],y=[h,f],v=[],b=[f,d],x=[];for(t=0;t<h;t++)x[t]=t;for(r=0;r<d;r++){if(r>0)for(t=0;t<h;t++){var w=Math.min(t,r),_=0;for(c=0;c<w;c++)_=i(_,o(m[t][c],m[c][r]));m[t][r]=a(m[t][r],_)}var E=r,S=0,A=0;for(t=r;t<h;t++){var N=m[t][r],k=n(N);l(k,S)&&(E=t,S=k,A=N)}if(r!==E&&(x[r]=[x[E],x[E]=x[r]][0],p._swapRows(r,E,m)),r<h)for(t=r+1;t<h;t++){var M=m[t][r];u(M,0)||(m[t][r]=s(m[t][r],A))}}for(r=0;r<d;r++)for(t=0;t<h;t++)0===r&&(t<d&&(v[t]=[]),g[t]=[]),t<r?(t<d&&(v[t][r]=m[t][r]),r<h&&(g[t][r]=0)):t!==r?(t<d&&(v[t][r]=0),r<h&&(g[t][r]=m[t][r])):(t<d&&(v[t][r]=m[t][r]),r<h&&(g[t][r]=1));var C=new p({data:g,size:y}),T=new p({data:v,size:b}),O=[];for(t=0,f=x.length;t<f;t++)O[x[t]]=t;return{L:C,U:T,p:O,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}function m(e){var t,r,i,a=e._size[0],p=e._size[1],f=Math.min(a,p),m=e._values,g=e._index,y=e._ptr,v=[],b=[],x=[],w=[a,f],_=[],E=[],S=[],A=[f,p],N=[],k=[];for(t=0;t<a;t++)N[t]=t,k[t]=t;var M=function(){var e=new d;r<a&&(x.push(v.length),v.push(1),b.push(r)),S.push(_.length);var p=y[r],f=y[r+1];for(i=p;i<f;i++)t=g[i],e.set(N[t],m[i]);r>0&&e.forEach(0,r-1,(function(t,r){h._forEachRow(t,v,b,x,(function(n,i){n>t&&e.accumulate(n,c(o(i,r)))}))}));var M,C,T,O,I=r,P=e.get(r),D=n(P);e.forEach(r+1,a-1,(function(e,t){var r=n(t);l(r,D)&&(I=e,D=r,P=t)})),r!==I&&(h._swapRows(r,I,w[1],v,b,x),h._swapRows(r,I,A[1],_,E,S),e.swap(r,I),C=I,T=k[M=r],O=k[C],N[T]=C,N[O]=M,k[M]=O,k[C]=T),e.forEach(0,a-1,(function(e,t){e<=r?(_.push(t),E.push(e)):(t=s(t,P),u(t,0)||(v.push(t),b.push(e)))}))};for(r=0;r<p;r++)M();return S.push(_.length),x.push(v.length),{L:new h({values:v,index:b,ptr:x,size:w}),U:new h({values:_,index:E,ptr:S,size:A}),p:N,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}));function Xc(e,t,r,n,i,s,o){var a=0;for(r[o]=e;a>=0;){var l=r[o+a],u=r[n+l];-1===u?(a--,s[t++]=l):(r[n+l]=r[i+u],r[o+ ++a]=u)}return t}function Zc(e){return-e-2}var Qc=K("csAmd",["add","multiply","transpose"],(e=>{var{add:t,multiply:r,transpose:n}=e;return function(e,o){if(!o||e<=0||e>3)return null;var a=o._size,l=a[0],u=a[1],c=0,p=Math.max(16,10*Math.sqrt(u)),h=function(e,i,s,o,a){var l=n(i);if(1===e&&o===s)return t(i,l);if(2===e){for(var u=l._index,c=l._ptr,p=0,h=0;h<s;h++){var d=c[h];if(c[h]=p,!(c[h+1]-d>a))for(var f=c[h+1];d<f;d++)u[p++]=u[d]}return c[s]=p,i=n(l),r(l,i)}return r(l,i)}(e,o,l,u,p=Math.min(u-2,p));!function(e,t,r){for(var n=e._values,i=e._index,s=e._ptr,o=e._size[1],a=0,l=0;l<o;l++){var u=s[l];for(s[l]=a;u<s[l+1];u++)t(i[u],l,n?n[u]:1,r)&&(i[a]=i[u],n&&(n[a]=n[u]),a++)}s[o]=a,i.splice(a,i.length-a),n&&n.splice(a,n.length-a)}(h,s,null);for(var d,f,m,g,y,v,b,x,w,_,E,S,A,N,k,M,C=h._index,T=h._ptr,O=T[u],I=[],P=[],D=u+1,R=2*(u+1),L=3*(u+1),q=4*(u+1),$=5*(u+1),B=6*(u+1),z=7*(u+1),F=I,U=function(e,t,r,n,s,o,a,l,u,c,p,h){for(var d=0;d<e;d++)r[n+d]=t[d+1]-t[d];r[n+e]=0;for(var f=0;f<=e;f++)r[s+f]=-1,o[f]=-1,r[a+f]=-1,r[l+f]=-1,r[u+f]=1,r[c+f]=1,r[p+f]=0,r[h+f]=r[n+f];var m=i(0,0,r,c,e);return r[p+e]=-2,t[e]=-1,r[c+e]=0,m}(u,T,P,0,L,F,R,z,D,B,q,$),j=function(e,t,r,n,i,s,o,a,l,u,c){for(var p=0,h=0;h<e;h++){var d=r[n+h];if(0===d)r[i+h]=-2,p++,t[h]=-1,r[s+h]=0;else if(d>o)r[a+h]=0,r[i+h]=-1,p++,t[h]=Zc(e),r[a+e]++;else{var f=r[l+d];-1!==f&&(u[f]=h),r[c+h]=r[l+d],r[l+d]=h}}return p}(u,T,P,$,q,B,p,D,L,F,R),G=0;j<u;){for(m=-1;G<u&&-1===(m=P[L+G]);G++);-1!==P[R+m]&&(F[P[R+m]]=-1),P[L+G]=P[R+m];var V=P[q+m],H=P[D+m];j+=H;var W=0;P[D+m]=-H;var Y=T[m],X=0===V?Y:O,Z=X;for(g=1;g<=V+1;g++){for(g>V?(v=m,b=Y,x=P[0+m]-V):(b=T[v=C[Y++]],x=P[0+v]),y=1;y<=x;y++)(w=P[D+(d=C[b++])])<=0||(W+=w,P[D+d]=-w,C[Z++]=d,-1!==P[R+d]&&(F[P[R+d]]=F[d]),-1!==F[d]?P[R+F[d]]=P[R+d]:P[L+P[$+d]]=P[R+d]);v!==m&&(T[v]=Zc(m),P[B+v]=0)}for(0!==V&&(O=Z),P[$+m]=W,T[m]=X,P[0+m]=Z-X,P[q+m]=-2,U=i(U,c,P,B,u),_=X;_<Z;_++)if(!((E=P[q+(d=C[_])])<=0)){var Q=U-(w=-P[D+d]);for(Y=T[d],S=T[d]+E-1;Y<=S;Y++)P[B+(v=C[Y])]>=U?P[B+v]-=w:0!==P[B+v]&&(P[B+v]=P[$+v]+Q)}for(_=X;_<Z;_++){for(A=(S=T[d=C[_]])+P[q+d]-1,N=S,k=0,M=0,Y=S;Y<=A;Y++)if(0!==P[B+(v=C[Y])]){var K=P[B+v]-U;K>0?(M+=K,C[N++]=v,k+=v):(T[v]=Zc(m),P[B+v]=0)}P[q+d]=N-S+1;var J=N,ee=S+P[0+d];for(Y=A+1;Y<ee;Y++){var te=P[D+(f=C[Y])];te<=0||(M+=te,C[N++]=f,k+=f)}0===M?(T[d]=Zc(m),W-=w=-P[D+d],H+=w,j+=w,P[D+d]=0,P[q+d]=-1):(P[$+d]=Math.min(P[$+d],M),C[N]=C[J],C[J]=C[S],C[S]=m,P[0+d]=N-S+1,k=(k<0?-k:k)%u,P[R+d]=P[z+k],P[z+k]=d,F[d]=k)}for(P[$+m]=W,U=i(U+(c=Math.max(c,W)),c,P,B,u),_=X;_<Z;_++)if(!(P[D+(d=C[_])]>=0))for(d=P[z+(k=F[d])],P[z+k]=-1;-1!==d&&-1!==P[R+d];d=P[R+d],U++){for(x=P[0+d],E=P[q+d],Y=T[d]+1;Y<=T[d]+x-1;Y++)P[B+C[Y]]=U;var re=d;for(f=P[R+d];-1!==f;){var ne=P[0+f]===x&&P[q+f]===E;for(Y=T[f]+1;ne&&Y<=T[f]+x-1;Y++)P[B+C[Y]]!==U&&(ne=0);ne?(T[f]=Zc(d),P[D+d]+=P[D+f],P[D+f]=0,P[q+f]=-1,f=P[R+f],P[R+re]=f):(re=f,f=P[R+f])}}for(Y=X,_=X;_<Z;_++)(w=-P[D+(d=C[_])])<=0||(P[D+d]=w,M=P[$+d]+W-w,-1!==P[L+(M=Math.min(M,u-j-w))]&&(F[P[L+M]]=d),P[R+d]=P[L+M],F[d]=-1,P[L+M]=d,G=Math.min(G,M),P[$+d]=M,C[Y++]=d);P[D+m]=H,0==(P[0+m]=Y-X)&&(T[m]=-1,P[B+m]=0),0!==V&&(O=Y)}for(d=0;d<u;d++)T[d]=Zc(T[d]);for(f=0;f<=u;f++)P[L+f]=-1;for(f=u;f>=0;f--)P[D+f]>0||(P[R+f]=P[L+T[f]],P[L+T[f]]=f);for(v=u;v>=0;v--)P[D+v]<=0||-1!==T[v]&&(P[R+v]=P[L+T[v]],P[L+T[v]]=v);for(m=0,d=0;d<=u;d++)-1===T[d]&&(m=Xc(d,m,P,L,R,I,B));return I.splice(I.length-1,1),I};function i(e,t,r,n,i){if(e<2||e+t<0){for(var s=0;s<i;s++)0!==r[n+s]&&(r[n+s]=1);e=2}return e}function s(e,t){return e!==t}}));function Kc(e,t,r,n,i,s,o){var a,l,u,c=0;if(e<=t||r[n+t]<=r[i+e])return-1;r[i+e]=r[n+t];var p=r[s+e];if(r[s+e]=t,-1===p)c=1,u=e;else{for(c=2,u=p;u!==r[o+u];u=r[o+u]);for(a=p;a!==u;a=l)l=r[o+a],r[o+a]=u}return{jleaf:c,q:u}}var Jc=K("csCounts",["transpose"],(e=>{var{transpose:t}=e;return function(e,r,n,i){if(!e||!r||!n)return null;var s,o,a,l,u,c,p,h=e._size,d=h[0],f=h[1],m=4*f+(i?f+d+1:0),g=[],y=f,v=2*f,b=3*f,x=4*f,w=5*f+1;for(a=0;a<m;a++)g[a]=-1;var _=[],E=t(e),S=E._index,A=E._ptr;for(a=0;a<f;a++)for(_[o=n[a]]=-1===g[b+o]?1:0;-1!==o&&-1===g[b+o];o=r[o])g[b+o]=a;if(i){for(a=0;a<f;a++)g[n[a]]=a;for(s=0;s<d;s++){for(a=f,c=A[s],p=A[s+1],u=c;u<p;u++)a=Math.min(a,g[S[u]]);g[w+s]=g[x+a],g[x+a]=s}}for(s=0;s<f;s++)g[0+s]=s;for(a=0;a<f;a++){for(-1!==r[o=n[a]]&&_[r[o]]--,l=i?g[x+a]:o;-1!==l;l=i?g[w+l]:-1)for(u=A[l];u<A[l+1];u++){var N=Kc(s=S[u],o,g,b,y,v,0);N.jleaf>=1&&_[o]++,2===N.jleaf&&_[N.q]--}-1!==r[o]&&(g[0+o]=r[o])}for(o=0;o<f;o++)-1!==r[o]&&(_[r[o]]+=_[o]);return _}})),ep=K("csSqr",["add","multiply","transpose"],(e=>{var{add:t,multiply:r,transpose:n}=e,i=Qc({add:t,multiply:r,transpose:n}),s=Jc({transpose:n});return function(e,t,r){var n,o=t._ptr,a=t._size[1],l={};if(l.q=i(e,t),e&&!l.q)return null;if(r){var u=e?function(e,t,r,n){for(var i=e._values,s=e._index,o=e._ptr,a=e._size,l=e._datatype,u=a[0],c=a[1],p=n&&e._values?[]:null,h=[],d=[],f=0,m=0;m<c;m++){d[m]=f;for(var g=r?r[m]:m,y=o[g],v=o[g+1],b=y;b<v;b++){var x=t?t[s[b]]:s[b];h[f]=x,p&&(p[f]=i[b]),f++}}return d[c]=f,e.createSparseMatrix({values:p,index:h,ptr:d,size:[u,c],datatype:l})}(t,null,l.q,0):t;l.parent=function(e,t){if(!e)return null;var r,n,i=e._index,s=e._ptr,o=e._size,a=o[0],l=o[1],u=[],c=[],p=l;if(t)for(r=0;r<a;r++)c[p+r]=-1;for(var h=0;h<l;h++){u[h]=-1,c[0+h]=-1;for(var d=s[h],f=s[h+1],m=d;m<f;m++){var g=i[m];for(r=t?c[p+g]:g;-1!==r&&r<h;r=n)n=c[0+r],c[0+r]=h,-1===n&&(u[r]=h);t&&(c[p+g]=h)}}return u}(u,1);var c=function(e,t){if(!e)return null;var r,n=0,i=[],s=[],o=t,a=2*t;for(r=0;r<t;r++)s[0+r]=-1;for(r=t-1;r>=0;r--)-1!==e[r]&&(s[o+r]=s[0+e[r]],s[0+e[r]]=r);for(r=0;r<t;r++)-1===e[r]&&(n=Xc(r,n,s,0,o,i,a));return i}(l.parent,a);if(l.cp=s(u,l.parent,c,1),u&&l.parent&&l.cp&&function(e,t){var r=e._ptr,n=e._index,i=e._size,s=i[0],o=i[1];t.pinv=[],t.leftmost=[];var a,l,u,c,p,h=t.parent,d=t.pinv,f=t.leftmost,m=[],g=0,y=s,v=s+o,b=s+2*o;for(l=0;l<o;l++)m[y+l]=-1,m[v+l]=-1,m[b+l]=0;for(a=0;a<s;a++)f[a]=-1;for(l=o-1;l>=0;l--)for(c=r[l],p=r[l+1],u=c;u<p;u++)f[n[u]]=l;for(a=s-1;a>=0;a--)d[a]=-1,-1!==(l=f[a])&&(0==m[b+l]++&&(m[v+l]=a),m[g+a]=m[y+l],m[y+l]=a);for(t.lnz=0,t.m2=s,l=0;l<o;l++)if(a=m[y+l],t.lnz++,a<0&&(a=t.m2++),d[a]=l,!(--b[l]<=0)){t.lnz+=m[b+l];var x=h[l];-1!==x&&(0===m[b+x]&&(m[v+x]=m[v+l]),m[g+m[v+l]]=m[y+x],m[y+x]=m[g+a],m[b+x]+=m[b+l])}for(a=0;a<s;a++)d[a]<0&&(d[a]=l++);return!0}(u,l))for(l.unz=0,n=0;n<a;n++)l.unz+=l.cp[n]}else l.unz=4*o[a]+a,l.lnz=l.unz;return l}}));function tp(e,t){return e[t]<0}function rp(e,t){e[t]=Zc(e[t])}function np(e){return e<0?Zc(e):e}function ip(e,t,r,n,i){var s,o,a,l=t._index,u=t._ptr,c=t._size[1],p=0;for(n[0]=e;p>=0;){e=n[p];var h=i?i[e]:e;tp(u,e)||(rp(u,e),n[c+p]=h<0?0:np(u[h]));var d=1;for(o=n[c+p],a=h<0?0:np(u[h+1]);o<a;o++)if(!tp(u,s=l[o])){n[c+p]=o,n[++p]=s,d=0;break}d&&(p--,n[--r]=e)}return r}var sp=K("csSpsolve",["divideScalar","multiply","subtract"],(e=>{var{divideScalar:t,multiply:r,subtract:n}=e;return function(e,i,s,o,a,l,u){var c,p,h,d,f=e._values,m=e._index,g=e._ptr,y=e._size[1],v=i._values,b=i._index,x=i._ptr,w=function(e,t,r,n,i){var s,o,a,l=e._ptr,u=e._size,c=t._index,p=t._ptr,h=u[1],d=h;for(o=p[r],a=p[r+1],s=o;s<a;s++){var f=c[s];tp(l,f)||(d=ip(f,e,d,n,i))}for(s=d;s<h;s++)rp(l,n[s]);return d}(e,i,s,o,l);for(c=w;c<y;c++)a[o[c]]=0;for(p=x[s],h=x[s+1],c=p;c<h;c++)a[b[c]]=v[c];for(var _=w;_<y;_++){var E=o[_],S=l?l[E]:E;if(!(S<0))for(p=g[S],h=g[S+1],a[E]=t(a[E],f[u?p:h-1]),c=u?p+1:p,d=u?h:h-1;c<d;c++){var A=m[c];a[A]=n(a[A],r(f[c],a[E]))}}return w}})),op=K("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],(e=>{var{abs:t,divideScalar:r,multiply:n,subtract:i,larger:s,largerEq:o,SparseMatrix:a}=e,l=sp({divideScalar:r,multiply:n,subtract:i});return function(e,i,u){if(!e)return null;var c,p=e._size[1],h=100,d=100;i&&(c=i.q,h=i.lnz||h,d=i.unz||d);var f,m,g=[],y=[],v=[],b=new a({values:g,index:y,ptr:v,size:[p,p]}),x=[],w=[],_=[],E=new a({values:x,index:w,ptr:_,size:[p,p]}),S=[],A=[],N=[];for(f=0;f<p;f++)A[f]=0,S[f]=-1,v[f+1]=0;h=0,d=0;for(var k=0;k<p;k++){v[k]=h,_[k]=d;var M=c?c[k]:k,C=l(b,e,M,N,A,S,1),T=-1,O=-1;for(m=C;m<p;m++)if(S[f=N[m]]<0){var I=t(A[f]);s(I,O)&&(O=I,T=f)}else w[d]=S[f],x[d++]=A[f];if(-1===T||O<=0)return null;S[M]<0&&o(t(A[M]),n(O,u))&&(T=M);var P=A[T];for(w[d]=k,x[d++]=P,S[T]=k,y[h]=T,g[h++]=1,m=C;m<p;m++)S[f=N[m]]<0&&(y[h]=f,g[h++]=r(A[f],P)),A[f]=0}for(v[p]=h,_[p]=d,m=0;m<h;m++)y[m]=S[y[m]];return g.splice(h,g.length-h),y.splice(h,y.length-h),x.splice(d,x.length-d),w.splice(d,w.length-d),{L:b,U:E,pinv:S}}})),ap=K("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],(e=>{var{typed:t,abs:r,add:n,multiply:i,transpose:s,divideScalar:o,subtract:a,larger:l,largerEq:u,SparseMatrix:c}=e,p=ep({add:n,multiply:i,transpose:s}),h=op({abs:r,divideScalar:o,multiply:i,subtract:a,larger:l,largerEq:u,SparseMatrix:c});return t("slu",{"SparseMatrix, number, number":function(e,t,r){if(!re(t)||t<0||t>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(r<0||r>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var n=p(t,e,!1),i=h(e,n,r);return{L:i.L,U:i.U,p:i.pinv,q:n.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})})),lp=K("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(e=>{var{typed:t,matrix:r,subtract:n,multiply:i,unaryMinus:s,lup:o}=e;return t("det",{any:function(e){return Y(e)},"Array | Matrix":function(e){var t;switch((t=m(e)?e.size():Array.isArray(e)?(e=r(e)).size():[]).length){case 0:return Y(e);case 1:if(1===t[0])return Y(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+ur(t)+")");case 2:var a=t[0],l=t[1];if(a===l)return function(e,t,r){if(1===t)return Y(e[0][0]);if(2===t)return n(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var a=o(e),l=a.U[0][0],u=1;u<t;u++)l=i(l,a.U[u][u]);for(var c=0,p=0,h=[];;){for(;h[p];)p++;if(p>=t)break;for(var d=p,f=0;!h[a.p[d]];)h[a.p[d]]=!0,d=a.p[d],f++;f%2==0&&c++}return c%2==0?l:s(l)}(e.clone().valueOf(),a);throw new RangeError("Matrix must be square (size: "+ur(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ur(t)+")")}}})})),up="distance",cp=K(up,["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],(e=>{var{typed:t,addScalar:r,subtract:n,multiplyScalar:i,divideScalar:s,unaryMinus:o,sqrt:a,abs:l}=e;return t(up,{"Array, Array, Array":function(e,t,r){if(2===e.length&&2===t.length&&2===r.length){if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!p(r))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var a=s(n(r[1],r[0]),n(t[1],t[0])),l=i(i(a,a),t[0]),u=o(i(a,t[0])),c=e[1];return g(e[0],e[1],l,u,c)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(e,t,r){if(2===Object.keys(e).length&&2===Object.keys(t).length&&2===Object.keys(r).length){if(!p(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!p(r))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in r&&"lineTwoPtY"in r){var a=s(n(r.lineTwoPtY,r.lineTwoPtX),n(t.lineOnePtY,t.lineOnePtX)),l=i(i(a,a),t.lineOnePtX),u=o(i(a,t.lineOnePtX)),c=e.pointX;return g(e.pointX,e.pointY,l,u,c)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(e,t){if(2===e.length&&3===t.length){if(!p(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return g(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&&6===t.length){if(!h(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(t))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return y(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(e.length===t.length&&e.length>0){if(!d(e))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(t))throw new TypeError("All values of an array should be numbers or BigNumbers");return v(e,t)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!p(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(t))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return g(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!h(e))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(t))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return y(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError("Key names do not match")}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!p(e))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return v([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&3===Object.keys(t).length){if(!h(e))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(t))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return v([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(e){if(!function(e){if(2===e[0].length&&c(e[0][0])&&c(e[0][1])){if(e.some((e=>2!==e.length||!c(e[0])||!c(e[1]))))return!1}else{if(!(3===e[0].length&&c(e[0][0])&&c(e[0][1])&&c(e[0][2])))return!1;if(e.some((e=>3!==e.length||!c(e[0])||!c(e[1])||!c(e[2]))))return!1}return!0}(e))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],r=[],n=[],i=0;i<e.length-1;i++)for(var s=i+1;s<e.length;s++)2===e[0].length?(r=[e[i][0],e[i][1]],n=[e[s][0],e[s][1]]):3===e[0].length&&(r=[e[i][0],e[i][1],e[i][2]],n=[e[s][0],e[s][1],e[s][2]]),t.push(v(r,n));return t}(e)}});function c(e){return"number"==typeof e||u(e)}function p(e){return e.constructor!==Array&&(e=m(e)),c(e[0])&&c(e[1])}function h(e){return e.constructor!==Array&&(e=m(e)),c(e[0])&&c(e[1])&&c(e[2])}function d(e){return Array.isArray(e)||(e=m(e)),e.every(c)}function f(e){return e.constructor!==Array&&(e=m(e)),c(e[0])&&c(e[1])&&c(e[2])&&c(e[3])&&c(e[4])&&c(e[5])}function m(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;n++)r.push(e[t[n]]);return r}function g(e,t,n,o,u){var c=l(r(r(i(n,e),i(o,t)),u)),p=a(r(i(n,n),i(o,o)));return s(c,p)}function y(e,t,o,l,u,c,p,h,d){var f=[n(i(n(u,t),d),i(n(c,o),h)),n(i(n(c,o),p),i(n(l,e),d)),n(i(n(l,e),h),i(n(u,t),p))];f=a(r(r(i(f[0],f[0]),i(f[1],f[1])),i(f[2],f[2])));var m=a(r(r(i(p,p),i(h,h)),i(d,d)));return s(f,m)}function v(e,t){for(var s=e.length,o=0,l=0,u=0;u<s;u++)l=n(e[u],t[u]),o=r(i(l,l),o);return a(o)}})),pp="stirlingS2",hp=K(pp,["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],(e=>{var{typed:t,addScalar:r,subtract:n,multiplyScalar:i,divideScalar:s,pow:o,factorial:a,combinations:l,isNegative:u,isInteger:c,larger:p}=e;return t(pp,{"number | BigNumber, number | BigNumber":function(e,t){if(!c(e)||u(e)||!c(t)||u(t))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(t,e))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var h=a(t),d=0,f=0;f<=t;f++){var m=o(-1,n(t,f)),g=l(t,f),y=o(f,e);d=r(d,i(i(g,y),m))}return s(d,h)}})})),dp="catalan",fp=K(dp,["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],(e=>{var{typed:t,addScalar:r,divideScalar:n,multiplyScalar:i,combinations:s,isNegative:o,isInteger:a}=e;return t(dp,{"number | BigNumber":function(e){if(!a(e)||o(e))throw new TypeError("Non-negative integer value expected in function catalan");return n(s(i(e,2),e),r(e,1))}})})),mp="column",gp=K(mp,["typed","Index","matrix","range"],(e=>{var{typed:t,Index:r,matrix:n,range:i}=e;return t(mp,{"Matrix, number":s,"Array, number":function(e,t){return s(n(Y(e)),t).valueOf()}});function s(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");br(t,e.size()[1]);var n=i(0,e.size()[0]),s=new r(n,t);return e.subset(s)}})),yp=K("log",["config","typed","divideScalar","Complex"],(e=>{var{typed:t,config:r,divideScalar:n,Complex:i}=e;return t("log",{number:function(e){return e>=0||r.predictable?Hn(e):new i(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||r.predictable?e.ln():new i(e.toNumber(),0).log()},"Array | Matrix":function(e){return on(e,this)},"any, any":function(e,t){return n(this(e),this(t))}})})),vp="dotDivide",bp=K(vp,["typed","matrix","equalScalar","divideScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,equalScalar:n,divideScalar:i,DenseMatrix:s}=e,o=aa({typed:t,equalScalar:n}),a=la({typed:t}),l=xa({typed:t,DenseMatrix:s}),u=ca({typed:t,equalScalar:n}),c=pa({typed:t,DenseMatrix:s}),p=ia({typed:t}),h=sa({typed:t});return t(vp,{"any, any":i,"SparseMatrix, SparseMatrix":function(e,t){return l(e,t,i,!1)},"SparseMatrix, DenseMatrix":function(e,t){return o(t,e,i,!0)},"DenseMatrix, SparseMatrix":function(e,t){return a(e,t,i,!1)},"DenseMatrix, DenseMatrix":function(e,t){return p(e,t,i)},"Array, Array":function(e,t){return this(r(e),r(t)).valueOf()},"Array, Matrix":function(e,t){return this(r(e),t)},"Matrix, Array":function(e,t){return this(e,r(t))},"SparseMatrix, any":function(e,t){return u(e,t,i,!1)},"DenseMatrix, any":function(e,t){return h(e,t,i,!1)},"any, SparseMatrix":function(e,t){return c(t,e,i,!0)},"any, DenseMatrix":function(e,t){return h(t,e,i,!0)},"Array, any":function(e,t){return h(r(e),t,i,!1).valueOf()},"any, Array":function(e,t){return h(r(t),e,i,!0).valueOf()}})})),xp="usolveAll",wp=K(xp,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=e,l=zc({DenseMatrix:a});return t(xp,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=[l(e,t,!0)._data.map((e=>e[0]))],u=e._size[0],c=e._size[1],p=e._values,h=e._index,d=e._ptr,f=c-1;f>=0;f--)for(var m=r.length,g=0;g<m;g++){for(var y=r[g],v=[],b=[],x=d[f],w=0,_=d[f+1]-1;_>=x;_--){var E=h[_];E===f?w=p[_]:E<f&&(v.push(p[_]),b.push(E))}if(o(w,0))if(o(y[f],0)){if(0===g){var S=[...y];S[f]=1;for(var A=0,N=b.length;A<N;A++){var k=b[A];S[k]=s(S[k],v[A])}r.push(S)}}else{if(0===g)return[];r.splice(g,1),g-=1,m-=1}else{y[f]=n(y[f],w);for(var M=0,C=b.length;M<C;M++){var T=b[M];y[T]=s(y[T],i(y[f],v[M]))}}}return r.map((e=>new a({data:e.map((e=>[e])),size:[u,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(r(e),t).map((e=>e.valueOf()))}});function u(e,t){for(var r=[l(e,t,!0)._data.map((e=>e[0]))],u=e._data,c=e._size[0],p=e._size[1]-1;p>=0;p--)for(var h=r.length,d=0;d<h;d++){var f=r[d];if(o(u[p][p],0))if(o(f[p],0)){if(0===d){var m=[...f];m[p]=1;for(var g=p-1;g>=0;g--)m[g]=s(m[g],u[g][p]);r.push(m)}}else{if(0===d)return[];r.splice(d,1),d-=1,h-=1}else{f[p]=n(f[p],u[p][p]);for(var y=p-1;y>=0;y--)f[y]=s(f[y],i(f[p],u[y][p]))}}return r.map((e=>new a({data:e.map((e=>[e])),size:[c,1]})))}})),_p="hypot",Ep=K(_p,["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],(e=>{var{typed:t,abs:r,addScalar:n,divideScalar:i,multiplyScalar:s,sqrt:o,smaller:a,isPositive:l}=e;return t(_p,{"... number | BigNumber":function(e){for(var t=0,u=0,c=0;c<e.length;c++){var p=r(e[c]);a(u,p)?(t=s(t,s(i(u,p),i(u,p))),t=n(t,1),u=p):t=n(t,l(p)?s(i(p,u),i(p,u)):p)}return s(u,o(t))},Array:function(e){return this.apply(this,Cr(e))},Matrix:function(e){return this.apply(this,Cr(e.toArray()))}})})),Sp=K("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],(e=>{var{typed:t,matrix:r,zeros:i,identity:s,isZero:o,equal:a,sign:l,sqrt:u,conj:c,unaryMinus:p,addScalar:h,divideScalar:d,multiplyScalar:f,subtract:m,complex:g}=e;return n(t("qr",{DenseMatrix:function(e){return v(e)},SparseMatrix:function(e){return function(e){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=v(r(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:y});function y(e){var t,r,n,g=e._size[0],y=e._size[1],v=s([g],"dense"),b=v._data,x=e.clone(),w=x._data,_=i([g],"");for(n=0;n<Math.min(y,g);++n){var E=w[n][n],S=p(a(E,0)?1:l(E)),A=c(S),N=0;for(t=n;t<g;t++)N=h(N,f(w[t][n],c(w[t][n])));var k=f(S,u(N));if(!o(k)){var M=m(E,k);for(_[n]=1,t=n+1;t<g;t++)_[t]=d(w[t][n],M);var C=p(c(d(M,k))),T=void 0;for(r=n;r<y;r++){for(T=0,t=n;t<g;t++)T=h(T,f(c(_[t]),w[t][r]));for(T=f(T,C),t=n;t<g;t++)w[t][r]=f(m(w[t][r],f(_[t],T)),A)}for(t=0;t<g;t++){for(T=0,r=n;r<g;r++)T=h(T,f(b[t][r],_[r]));for(T=f(T,C),r=n;r<g;++r)b[t][r]=d(m(b[t][r],f(T,c(_[r]))),A)}}}return{Q:v,R:x,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function v(e){var t=y(e),r=t.R._data;if(e._data.length>0)for(var n="Complex"===r[0][0].type?g(0):0,i=0;i<r.length;++i)for(var s=0;s<i&&s<(r[0]||[]).length;++s)r[i][s]=n;return t}})),Ap=K("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(e=>{var{typed:t,matrix:r,divideScalar:n,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:l,abs:u}=e;return t("inv",{"Array | Matrix":function(e){var t=m(e)?e.size():gr(e);switch(t.length){case 1:if(1===t[0])return m(e)?r([n(1,e.valueOf()[0])]):[n(1,e[0])];throw new RangeError("Matrix must be square (size: "+ur(t)+")");case 2:var i=t[0],s=t[1];if(i===s)return m(e)?r(c(e.valueOf(),i,s),e.storage()):c(e,i,s);throw new RangeError("Matrix must be square (size: "+ur(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ur(t)+")")}},any:function(e){return n(1,e)}});function c(e,t,r){var c,p,h,d,f;if(1===t){if(0===(d=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,d)]]}if(2===t){var m=a(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[n(e[1][1],m),n(o(e[0][1]),m)],[n(o(e[1][0]),m),n(e[0][0],m)]]}var g=e.concat();for(c=0;c<t;c++)g[c]=g[c].concat();for(var y=l(t).valueOf(),v=0;v<r;v++){var b=u(g[v][v]),x=v;for(c=v+1;c<t;)u(g[c][v])>b&&(b=u(g[c][v]),x=c),c++;if(0===b)throw Error("Cannot calculate inverse, determinant is zero");(c=x)!==v&&(f=g[v],g[v]=g[c],g[c]=f,f=y[v],y[v]=y[c],y[c]=f);var w=g[v],_=y[v];for(c=0;c<t;c++){var E=g[c],S=y[c];if(c!==v){if(0!==E[v]){for(h=n(o(E[v]),w[v]),p=v;p<r;p++)E[p]=i(E[p],s(h,w[p]));for(p=0;p<r;p++)S[p]=i(S[p],s(h,_[p]))}}else{for(h=w[v],p=v;p<r;p++)E[p]=n(E[p],h);for(p=0;p<r;p++)S[p]=n(S[p],h)}}}return y}})),Np="expm",kp=K(Np,["typed","abs","add","identity","inv","multiply"],(e=>{var{typed:t,abs:r,add:n,identity:i,inv:s,multiply:o}=e;return t(Np,{Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+ur(t)+")");for(var l=t[0],u=function(e){for(var t=e.size()[0],n=0,i=0;i<t;i++){for(var s=0,o=0;o<t;o++)s+=r(e.get([i,o]));n=Math.max(s,n)}return n}(e),c=function(e,t){for(var r=30,n=0;n<r;n++)for(var i=0;i<=n;i++){var s=n-i;if(a(e,i,s)<t)return{q:i,j:s}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(u,1e-15),p=c.q,h=c.j,d=o(e,Math.pow(2,-h)),f=i(l),m=i(l),g=1,y=d,b=-1,x=1;x<=p;x++)x>1&&(y=o(y,d),b=-b),f=n(f,o(g=g*(p-x+1)/((2*p-x+1)*x),y)),m=n(m,o(g*b,y));for(var w=o(s(m),f),_=0;_<h;_++)w=o(w,w);return v(e)?e.createSparseMatrix(w):w}});function a(e,t,r){for(var n=1,i=2;i<=t;i++)n*=i;for(var s=n,o=t+1;o<=2*t;o++)s*=o;var a=s*(2*t+1);return 8*Math.pow(e/Math.pow(2,r),2*t)*n*n/(s*a)}})),Mp=K("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(e=>{var{typed:t,matrix:r,multiply:n,equalScalar:i,divideScalar:s,inv:o}=e,a=ca({typed:t,equalScalar:i}),l=sa({typed:t});return t("divide",X({"Array | Matrix, Array | Matrix":function(e,t){return n(e,o(t))},"DenseMatrix, any":function(e,t){return l(e,t,s,!1)},"SparseMatrix, any":function(e,t){return a(e,t,s,!1)},"Array, any":function(e,t){return l(r(e),t,s,!1).valueOf()},"any, Array | Matrix":function(e,t){return n(e,o(t))}},s.signatures))})),Cp="mean",Tp=K(Cp,["typed","add","divide"],(e=>{var{typed:t,add:r,divide:n}=e;return t(Cp,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(e,t){try{var i=an(e,t,r),s=Array.isArray(e)?gr(e):e.size();return n(i,s[t])}catch(o){throw ju(o,"mean")}},"...":function(e){if(nn(e))throw new TypeError("Scalar values expected in function mean");return i(e)}});function i(e){var t,i=0;if(sn(e,(function(e){try{t=void 0===t?e:r(t,e),i++}catch(n){throw ju(n,"mean",e)}})),0===i)throw new Error("Cannot calculate the mean of an empty array");return n(t,i)}})),Op="unbiased",Ip="variance",Pp=K(Ip,["typed","add","subtract","multiply","divide","apply","isNaN"],(e=>{var{typed:t,add:r,subtract:n,multiply:i,divide:s,apply:o,isNaN:a}=e;return t(Ip,{"Array | Matrix":function(e){return l(e,Op)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(e,t){return c(e,t,Op)},"Array | Matrix, number | BigNumber, string":c,"...":function(e){return l(e,Op)}});function l(e,t){var o,l=0;if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(sn(e,(function(e){try{o=void 0===o?e:r(o,e),l++}catch(t){throw ju(t,"variance",e)}})),0===l)throw new Error("Cannot calculate variance of an empty array");var c=s(o,l);if(o=void 0,sn(e,(function(e){var t=n(e,c);o=void 0===o?i(t,t):r(o,i(t,t))})),a(o))return o;switch(t){case"uncorrected":return s(o,l);case"biased":return s(o,l+1);case"unbiased":var p=u(o)?o.mul(0):0;return 1===l?p:s(o,l-1);default:throw new Error('Unknown normalization "'+t+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function c(e,t,r){try{if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(e,t,(e=>l(e,r)))}catch(n){throw ju(n,"variance")}}})),Dp="kldivergence",Rp=K(Dp,["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],(e=>{var{typed:t,matrix:r,divide:n,sum:i,multiply:s,dotDivide:o,log:a,isNumeric:l}=e;return t(Dp,{"Array, Array":function(e,t){return u(r(e),r(t))},"Matrix, Array":function(e,t){return u(e,r(t))},"Array, Matrix":function(e,t){return u(r(e),t)},"Matrix, Matrix":function(e,t){return u(e,t)}});function u(e,t){var r=t.size().length,u=e.size().length;if(r>1)throw new Error("first object must be one dimensional");if(u>1)throw new Error("second object must be one dimensional");if(r!==u)throw new Error("Length of two vectors must be equal");if(0===i(e))throw new Error("Sum of elements in first object must be non zero");if(0===i(t))throw new Error("Sum of elements in second object must be non zero");var c=n(e,i(e)),p=n(t,i(t)),h=i(s(c,a(o(c,p))));return l(h)?h:Number.NaN}})),Lp="bellNumbers",qp=K(Lp,["typed","addScalar","isNegative","isInteger","stirlingS2"],(e=>{var{typed:t,addScalar:r,isNegative:n,isInteger:i,stirlingS2:s}=e;return t(Lp,{"number | BigNumber":function(e){if(!i(e)||n(e))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var t=0,o=0;o<=e;o++)t=r(t,s(e,o));return t}})})),$p="log1p",Bp=K($p,["typed","config","divideScalar","log","Complex"],(e=>{var{typed:t,config:r,divideScalar:n,log:i,Complex:s}=e;return t($p,{number:function(e){return e>=-1||r.predictable?oe(e):o(new s(e,0))},Complex:o,BigNumber:function(e){var t=e.plus(1);return!t.isNegative()||r.predictable?t.ln():o(new s(e.toNumber(),0))},"Array | Matrix":function(e){return on(e,this)},"any, any":function(e,t){return n(this(e),i(t))}});function o(e){var t=e.re+1;return new s(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}}));function zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(r),!0).forEach((function(t){Ya(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Up=K("Unit",["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],(e=>{var t,r,i,{on:s,config:o,addScalar:a,subtract:l,multiplyScalar:u,divideScalar:p,pow:d,abs:f,fix:m,round:g,equal:y,isNumeric:v,format:b,number:x,Complex:w,BigNumber:_,Fraction:E}=e,S=x;function A(e,t){if(!(this instanceof A))throw new Error("Constructor must be called with the new operator");if(null!=e&&!v(e)&&!c(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==t&&("string"!=typeof t||""===t))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==t){var r=A.parse(t);this.units=r.units,this.dimensions=r.dimensions}else{this.units=[{unit:B,prefix:R.NONE,power:0}],this.dimensions=[];for(var n=0;n<L.length;n++)this.dimensions[n]=0}this.value=null!=e?this._normalize(e):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}function N(){for(;" "===i||"\t"===i;)M()}function k(e){return e>="0"&&e<="9"}function M(){r++,i=t.charAt(r)}function C(e){r=e,i=t.charAt(r)}function T(){var e="",t=r;if("+"===i?M():"-"===i&&(e+=i,M()),!function(e){return e>="0"&&e<="9"||"."===e}(i))return C(t),null;if("."===i){if(e+=i,M(),!k(i))return C(t),null}else{for(;k(i);)e+=i,M();"."===i&&(e+=i,M())}for(;k(i);)e+=i,M();if("E"===i||"e"===i){var n="",s=r;if(n+=i,M(),"+"!==i&&"-"!==i||(n+=i,M()),!k(i))return C(s),e;for(e+=n;k(i);)e+=i,M()}return e}function O(){for(var e="";k(i)||A.isValidAlpha(i);)e+=i,M();var t=e.charAt(0);return A.isValidAlpha(t)?e:null}function I(e){return i===e?(M(),e):null}A.prototype.type="Unit",A.prototype.isUnit=!0,A.parse=function(e,n){if(n=n||{},r=-1,i="","string"!=typeof(t=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var s=new A;s.units=[];var a=1,l=!1;M(),N();var u=T(),c=null;if(u){if("BigNumber"===o.number)c=new _(u);else if("Fraction"===o.number)try{c=new E(u)}catch(x){c=parseFloat(u)}else c=parseFloat(u);N(),I("*")?(a=1,l=!0):I("/")&&(a=-1,l=!0)}for(var p=[],h=1;;){for(N();"("===i;)p.push(a),h*=a,a=1,M(),N();var d=void 0;if(!i)break;var f=i;if(null===(d=O()))throw new SyntaxError('Unexpected "'+f+'" in "'+t+'" at index '+r.toString());var m=P(d);if(null===m)throw new SyntaxError('Unit "'+d+'" not found.');var g=a*h;if(N(),I("^")){N();var y=T();if(null===y)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');g*=y}s.units.push({unit:m.unit,prefix:m.prefix,power:g});for(var v=0;v<L.length;v++)s.dimensions[v]+=(m.unit.dimensions[v]||0)*g;for(N();")"===i;){if(0===p.length)throw new SyntaxError('Unmatched ")" in "'+t+'" at index '+r.toString());h/=p.pop(),M(),N()}if(l=!1,I("*")?(a=1,l=!0):I("/")?(a=-1,l=!0):a=1,m.unit.base){var b=m.unit.base.key;j.auto[b]={unit:m.unit,prefix:m.prefix}}}if(N(),i)throw new SyntaxError('Could not parse: "'+e+'"');if(l)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==p.length)throw new SyntaxError('Unmatched "(" in "'+t+'"');if(0===s.units.length&&!n.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return s.value=void 0!==c?s._normalize(c):null,s},A.prototype.clone=function(){var e=new A;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=Y(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var r in e.units[t]={},this.units[t])Q(this.units[t],r)&&(e.units[t][r]=this.units[t][r]);return e},A.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},A.prototype._normalize=function(e){var t,r,n,i,s;if(null==e||0===this.units.length)return e;if(this._isDerived()){var o=e;s=A._getNumberConverter(W(e));for(var l=0;l<this.units.length;l++)t=s(this.units[l].unit.value),i=s(this.units[l].prefix.value),n=s(this.units[l].power),o=u(o,d(u(t,i),n));return o}return t=(s=A._getNumberConverter(W(e)))(this.units[0].unit.value),r=s(this.units[0].unit.offset),i=s(this.units[0].prefix.value),u(a(e,r),u(t,i))},A.prototype._denormalize=function(e,t){var r,n,i,s,o;if(null==e||0===this.units.length)return e;if(this._isDerived()){var a=e;o=A._getNumberConverter(W(e));for(var c=0;c<this.units.length;c++)r=o(this.units[c].unit.value),s=o(this.units[c].prefix.value),i=o(this.units[c].power),a=p(a,d(u(r,s),i));return a}return r=(o=A._getNumberConverter(W(e)))(this.units[0].unit.value),s=o(this.units[0].prefix.value),n=o(this.units[0].unit.offset),l(p(p(e,r),null==t?s:t),n)};var P=ke((e=>{if(Q(z,e)){var t=z[e];return{unit:t,prefix:t.prefixes[""]}}for(var r in z)if(Q(z,r)&&lr(e,r)){var n=z[r],i=e.length-r.length,s=e.substring(0,i),o=Q(n.prefixes,s)?n.prefixes[s]:void 0;if(void 0!==o)return{unit:n,prefix:o}}return null}),{hasher:e=>e[0],limit:100});function D(e){return e.equalBase(q.NONE)&&null!==e.value&&!o.predictable?e.value:e}A.isValuelessUnit=function(e){return null!==P(e)},A.prototype.hasBase=function(e){if("string"==typeof e&&(e=q[e]),!e)return!1;for(var t=0;t<L.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},A.prototype.equalBase=function(e){for(var t=0;t<L.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},A.prototype.equals=function(e){return this.equalBase(e)&&y(this.value,e.value)},A.prototype.multiply=function(e){for(var t=this.clone(),r=0;r<L.length;r++)t.dimensions[r]=(this.dimensions[r]||0)+(e.dimensions[r]||0);for(var n=0;n<e.units.length;n++){var i=Fp({},e.units[n]);t.units.push(i)}if(null!==this.value||null!==e.value){var s=null===this.value?this._normalize(1):this.value,o=null===e.value?e._normalize(1):e.value;t.value=u(s,o)}else t.value=null;return t.skipAutomaticSimplification=!1,D(t)},A.prototype.divide=function(e){for(var t=this.clone(),r=0;r<L.length;r++)t.dimensions[r]=(this.dimensions[r]||0)-(e.dimensions[r]||0);for(var n=0;n<e.units.length;n++){var i=Fp(Fp({},e.units[n]),{},{power:-e.units[n].power});t.units.push(i)}if(null!==this.value||null!==e.value){var s=null===this.value?this._normalize(1):this.value,o=null===e.value?e._normalize(1):e.value;t.value=p(s,o)}else t.value=null;return t.skipAutomaticSimplification=!1,D(t)},A.prototype.pow=function(e){for(var t=this.clone(),r=0;r<L.length;r++)t.dimensions[r]=(this.dimensions[r]||0)*e;for(var n=0;n<t.units.length;n++)t.units[n].power*=e;return null!==t.value?t.value=d(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,D(t)},A.prototype.abs=function(){var e=this.clone();for(var t in e.value=null!==e.value?f(e.value):null,e.units)"VA"!==e.units[t].unit.name&&"VAR"!==e.units[t].unit.name||(e.units[t].unit=z.W);return e},A.prototype.to=function(e){var t,r=null===this.value?this._normalize(1):this.value;if("string"==typeof e){if(t=A.parse(e),!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");return t.value=Y(r),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}if(h(e)){if(!this.equalBase(e))throw new Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return(t=e.clone()).value=Y(r),t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t}throw new Error("String or Unit expected as parameter")},A.prototype.toNumber=function(e){return S(this.toNumeric(e))},A.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},A.prototype.toString=function(){return this.format()},A.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},A.fromJSON=function(e){var t=new A(e.value,e.unit);return t.fixPrefix=e.fixPrefix||!1,t},A.prototype.valueOf=A.prototype.toString,A.prototype.simplify=function(){var e,t,r=this.clone(),n=[];for(var i in G)if(Q(G,i)&&r.hasBase(q[i])){e=i;break}if("NONE"===e)r.units=[];else if(e&&Q(G,e)&&(t=G[e]),t)r.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var s=!1,o=0;o<L.length;o++){var a=L[o];Math.abs(r.dimensions[o]||0)>1e-12&&(Q(G,a)?n.push({unit:G[a].unit,prefix:G[a].prefix,power:r.dimensions[o]||0}):s=!0)}n.length<r.units.length&&!s&&(r.units=n)}return r},A.prototype.toSI=function(){for(var e=this.clone(),t=[],r=0;r<L.length;r++){var n=L[r];if(Math.abs(e.dimensions[r]||0)>1e-12){if(!Q(j.si,n))throw new Error("Cannot express custom unit "+n+" in SI units");t.push({unit:j.si[n].unit,prefix:j.si[n].prefix,power:e.dimensions[r]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e},A.prototype.formatUnits=function(){for(var e="",t="",r=0,n=0,i=0;i<this.units.length;i++)this.units[i].power>0?(r++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(e+="^"+this.units[i].power)):this.units[i].power<0&&n++;if(n>0)for(var s=0;s<this.units.length;s++)this.units[s].power<0&&(r>0?(t+=" "+this.units[s].prefix.name+this.units[s].unit.name,Math.abs(this.units[s].power+1)>1e-15&&(t+="^"+-this.units[s].power)):(t+=" "+this.units[s].prefix.name+this.units[s].unit.name,t+="^"+this.units[s].power));e=e.substr(1),t=t.substr(1),r>1&&n>0&&(e="("+e+")"),n>1&&r>0&&(t="("+t+")");var o=e;return r>0&&n>0&&(o+=" / "),o+=t},A.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),r=!1;for(var n in void 0!==t.value&&null!==t.value&&c(t.value)&&(r=Math.abs(t.value.re)<1e-14),t.units)Q(t.units,n)&&t.units[n].unit&&("VA"===t.units[n].unit.name&&r?t.units[n].unit=z.VAR:"VAR"!==t.units[n].unit.name||r||(t.units[n].unit=z.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),s=null!==t.value?b(i,e||{}):"",o=t.formatUnits();return t.value&&c(t.value)&&(s="("+s+")"),o.length>0&&s.length>0&&(s+=" "),s+=o},A.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?f(this.value):0,t=f(this.units[0].unit.value),r=this.units[0].prefix;if(0===e)return r;var n=this.units[0].power,i=Math.log(e/Math.pow(r.value*t,n))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return r;i=Math.abs(i);var s=this.units[0].unit.prefixes;for(var o in s)if(Q(s,o)){var a=s[o];if(a.scientific){var l=Math.abs(Math.log(e/Math.pow(a.value*t,n))/Math.LN10-1.2);(l<i||l===i&&a.name.length<r.name.length)&&(r=a,i=l)}}return r},A.prototype.splitUnit=function(e){for(var t=this.clone(),r=[],n=0;n<e.length&&(t=t.to(e[n]),n!==e.length-1);n++){var i=t.toNumeric(),s=g(i),o=new A(y(s,i)?s:m(t.toNumeric()),e[n].toString());r.push(o),t=l(t,o)}for(var u=0,c=0;c<r.length;c++)u=a(u,r[c].value);return y(u,this.value)&&(t.value=0),r.push(t),r};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=n({},R.SHORT,R.LONG),R.BINARY_SHORT=n({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=n({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var L=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],q={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var $ in q)Q(q,$)&&(q[$].key=$);var B={name:"",base:{},value:1,offset:0,dimensions:L.map((e=>0))},z={meter:{name:"meter",base:q.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:q.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:q.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:q.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:q.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:q.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:q.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:q.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:q.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:q.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:q.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:q.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:q.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:q.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:q.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:q.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:q.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:q.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:q.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:q.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:q.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:q.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:q.SURFACE,prefixes:R.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:q.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:q.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:q.SURFACE,prefixes:R.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:q.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:q.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:q.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:q.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:q.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:q.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:q.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:q.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:q.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:q.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:q.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:q.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:q.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:q.VOLUME,prefixes:R.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:q.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:q.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:q.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:q.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:q.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:q.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:q.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:q.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:q.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:q.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:q.VOLUME,prefixes:R.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:q.VOLUME,prefixes:R.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:q.VOLUME,prefixes:R.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:q.VOLUME,prefixes:R.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:q.VOLUME,prefixes:R.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:q.VOLUME,prefixes:R.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:q.VOLUME,prefixes:R.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:q.VOLUME,prefixes:R.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:q.VOLUME,prefixes:R.NONE,value:.1173478,offset:0},obl:{name:"obl",base:q.VOLUME,prefixes:R.NONE,value:.1589873,offset:0},g:{name:"g",base:q.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:q.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:q.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:q.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:q.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:q.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:q.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:q.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:q.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:q.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:q.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:q.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:q.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:q.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:q.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:q.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:q.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:q.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:q.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:q.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:q.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:q.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:q.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:q.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:q.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:q.TIME,prefixes:R.NONE,value:604800,offset:0},month:{name:"month",base:q.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:q.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:q.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:q.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:q.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:q.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:q.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:q.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:q.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:q.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:q.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:q.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:q.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:q.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:q.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:q.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:q.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:q.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:q.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},degC:{name:"degC",base:q.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},degF:{name:"degF",base:q.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:q.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:q.TEMPERATURE,prefixes:R.NONE,value:1,offset:0},celsius:{name:"celsius",base:q.TEMPERATURE,prefixes:R.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:q.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:q.TEMPERATURE,prefixes:R.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:q.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:q.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:q.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:q.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:q.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:q.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:q.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:q.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:q.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:q.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:q.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:q.FORCE,prefixes:R.NONE,value:9.80665,offset:0},J:{name:"J",base:q.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:q.ENERGY,prefixes:R.SHORT,value:1,offset:0},erg:{name:"erg",base:q.ENERGY,prefixes:R.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:q.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:q.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:q.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:q.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:q.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:q.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:q.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:q.POWER,prefixes:R.SHORT,value:w.I,offset:0},VA:{name:"VA",base:q.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:q.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:q.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:q.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:q.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:q.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:q.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:q.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:q.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:q.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:q.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:q.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:q.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:q.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:q.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:q.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:q.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:q.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:q.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:q.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:q.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:q.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:q.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:q.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:q.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:q.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:q.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:q.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},F={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function U(e){if("BigNumber"===e.number){var t=Oe(_);z.rad.value=new _(1),z.deg.value=t.div(180),z.grad.value=t.div(200),z.cycle.value=t.times(2),z.arcsec.value=t.div(648e3),z.arcmin.value=t.div(10800)}else z.rad.value=1,z.deg.value=Math.PI/180,z.grad.value=Math.PI/200,z.cycle.value=2*Math.PI,z.arcsec.value=Math.PI/648e3,z.arcmin.value=Math.PI/10800;z.radian.value=z.rad.value,z.degree.value=z.deg.value,z.gradian.value=z.grad.value}U(o),s&&s("config",(function(e,t){e.number!==t.number&&U(e)}));var j={si:{NONE:{unit:B,prefix:R.NONE[""]},LENGTH:{unit:z.m,prefix:R.SHORT[""]},MASS:{unit:z.g,prefix:R.SHORT.k},TIME:{unit:z.s,prefix:R.SHORT[""]},CURRENT:{unit:z.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:z.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:z.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:z.mol,prefix:R.SHORT[""]},ANGLE:{unit:z.rad,prefix:R.SHORT[""]},BIT:{unit:z.bits,prefix:R.SHORT[""]},FORCE:{unit:z.N,prefix:R.SHORT[""]},ENERGY:{unit:z.J,prefix:R.SHORT[""]},POWER:{unit:z.W,prefix:R.SHORT[""]},PRESSURE:{unit:z.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:z.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:z.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:z.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:z.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:z.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:z.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:z.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:z.T,prefix:R.SHORT[""]},FREQUENCY:{unit:z.Hz,prefix:R.SHORT[""]}}};j.cgs=JSON.parse(JSON.stringify(j.si)),j.cgs.LENGTH={unit:z.m,prefix:R.SHORT.c},j.cgs.MASS={unit:z.g,prefix:R.SHORT[""]},j.cgs.FORCE={unit:z.dyn,prefix:R.SHORT[""]},j.cgs.ENERGY={unit:z.erg,prefix:R.NONE[""]},j.us=JSON.parse(JSON.stringify(j.si)),j.us.LENGTH={unit:z.ft,prefix:R.NONE[""]},j.us.MASS={unit:z.lbm,prefix:R.NONE[""]},j.us.TEMPERATURE={unit:z.degF,prefix:R.NONE[""]},j.us.FORCE={unit:z.lbf,prefix:R.NONE[""]},j.us.ENERGY={unit:z.BTU,prefix:R.BTU[""]},j.us.POWER={unit:z.hp,prefix:R.NONE[""]},j.us.PRESSURE={unit:z.psi,prefix:R.NONE[""]},j.auto=JSON.parse(JSON.stringify(j.si));var G=j.auto;for(var V in A.setUnitSystem=function(e){if(!Q(j,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(j).join(", "));G=j[e]},A.getUnitSystem=function(){for(var e in j)if(Q(j,e)&&j[e]===G)return e},A.typeConverters={BigNumber:function(e){return new _(e+"")},Fraction:function(e){return new E(e)},Complex:function(e){return e},number:function(e){return e}},A._getNumberConverter=function(e){if(!A.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return A.typeConverters[e]},z)if(Q(z,V)){var H=z[V];H.dimensions=H.base.dimensions}for(var X in F)if(Q(F,X)){var Z=z[F[X]],K={};for(var J in Z)Q(Z,J)&&(K[J]=Z[J]);K.name=X,z[X]=K}return A.isValidAlpha=function(e){return/^[a-zA-Z]$/.test(e)},A.createUnit=function(e,t){if("object"!=typeof e)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var r in e)if(Q(e,r)&&A.deleteUnit(r),e[r].aliases)for(var n=0;n<e[r].aliases.length;n++)A.deleteUnit(e[r].aliases[n]);var i;for(var s in e)Q(e,s)&&(i=A.createUnitSingle(s,e[s]));return i},A.createUnitSingle=function(e,t,r){if(null==t&&(t={}),"string"!=typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Q(z,e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){if(i=e.charAt(t),0===t&&!A.isValidAlpha(i))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!A.isValidAlpha(i)&&!k(i))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}(e);var n,s,o,a=null,l=[],u=0;if(t&&"Unit"===t.type)a=t.clone();else if("string"==typeof t)""!==t&&(n=t);else{if("object"!=typeof t)throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');n=t.definition,s=t.prefixes,u=t.offset,o=t.baseName,t.aliases&&(l=t.aliases.valueOf())}if(l)for(var c=0;c<l.length;c++)if(Q(z,l[c]))throw new Error('Cannot create alias "'+l[c]+'": a unit with that name already exists');if(n&&"string"==typeof n&&!a)try{a=A.parse(n,{allowNoUnits:!0})}catch(S){throw S.message='Could not create unit "'+e+'" from "'+n+'": '+S.message,S}else n&&"Unit"===n.type&&(a=n.clone());l=l||[],u=u||0,s=s&&s.toUpperCase&&R[s.toUpperCase()]||R.NONE;var p={};if(a){p={name:e,value:a.value,dimensions:a.dimensions.slice(0),prefixes:s,offset:u};var h=!1;for(var d in q)if(Q(q,d)){for(var f=!0,m=0;m<L.length;m++)if(Math.abs((p.dimensions[m]||0)-(q[d].dimensions[m]||0))>1e-12){f=!1;break}if(f){h=!0,p.base=q[d];break}}if(!h){o=o||e+"_STUFF";var g={dimensions:a.dimensions.slice(0)};g.key=o,q[o]=g,G[o]={unit:p,prefix:R.NONE[""]},p.base=q[o]}}else{if(o=o||e+"_STUFF",L.indexOf(o)>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var y in L.push(o),q)Q(q,y)&&(q[y].dimensions[L.length-1]=0);for(var v={dimensions:[]},b=0;b<L.length;b++)v.dimensions[b]=0;v.dimensions[L.length-1]=1,v.key=o,q[o]=v,p={name:e,value:1,dimensions:q[o].dimensions.slice(0),prefixes:s,offset:u,base:q[o]},G[o]={unit:p,prefix:R.NONE[""]}}A.UNITS[e]=p;for(var x=0;x<l.length;x++){var w=l[x],_={};for(var E in p)Q(p,E)&&(_[E]=p[E]);_.name=w,A.UNITS[w]=_}return delete P.cache,new A(null,e)},A.deleteUnit=function(e){delete A.UNITS[e]},A.PREFIXES=R,A.BASE_DIMENSIONS=L,A.BASE_UNITS=q,A.UNIT_SYSTEMS=j,A.UNITS=z,A}),{isClass:!0}),jp="createUnit",Gp=K(jp,["typed","Unit"],(e=>{var{typed:t,Unit:r}=e;return t(jp,{"Object, Object":function(e,t){return r.createUnit(e,t)},Object:function(e){return r.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,t,n){var i={};return i[e]=t,r.createUnit(i,n)},"string, Unit | string | Object":function(e,t){var n={};return n[e]=t,r.createUnit(n,{})},string:function(e){var t={};return t[e]={},r.createUnit(t,{})}})})),Vp="sqrtm",Hp=K(Vp,["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],(e=>{var{typed:t,abs:r,add:n,multiply:i,sqrt:s,subtract:o,inv:a,size:l,max:u,identity:c}=e,p=1e-6;function h(e){var t,s=0,h=e,d=c(l(e));do{var f=h;if(h=i(.5,n(f,a(d))),d=i(.5,n(d,a(f))),(t=u(r(o(h,f))))>p&&++s>1e3)throw new Error("computing square root of matrix: iterative method could not converge")}while(t>p);return h}return t(Vp,{"Array | Matrix":function(e){var t=m(e)?e.size():gr(e);switch(t.length){case 1:if(1===t[0])return s(e);throw new RangeError("Matrix must be square (size: "+ur(t)+")");case 2:if(t[0]===t[1])return h(e);throw new RangeError("Matrix must be square (size: "+ur(t)+")");default:throw new RangeError("Matrix must be at most two dimensional (size: "+ur(t)+")")}}})})),Wp="median",Yp=K(Wp,["typed","add","divide","compare","partitionSelect"],(e=>{var{typed:t,add:r,divide:n,compare:i,partitionSelect:s}=e;function o(e){try{var t=(e=Cr(e.valueOf())).length;if(0===t)throw new Error("Cannot calculate median of an empty array");if(t%2==0){for(var r=t/2-1,n=s(e,r+1),o=e[r],u=0;u<r;++u)i(e[u],o)>0&&(o=e[u]);return l(o,n)}var c=s(e,(t-1)/2);return a(c)}catch(p){throw ju(p,"median")}}var a=t({"number | BigNumber | Complex | Unit":function(e){return e}}),l=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(e,t){return n(r(e,t),2)}});return t(Wp,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("median(A, dim) is not yet supported")},"...":function(e){if(nn(e))throw new TypeError("Scalar values expected in function median");return o(e)}})})),Xp=K("std",["typed","sqrt","variance"],(e=>{var{typed:t,sqrt:r,variance:n}=e;return t("std",{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(e){return i(e)}});function i(e,t){if(0===e.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return r(n.apply(null,arguments))}catch(i){throw i instanceof TypeError&&-1!==i.message.indexOf(" variance")?new TypeError(i.message.replace(" variance"," std")):i}}})),Zp="usolve",Qp=K(Zp,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=e,l=zc({DenseMatrix:a});return t(Zp,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var r=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],p=e._values,h=e._index,d=e._ptr,f=[],m=c-1;m>=0;m--){var g=r[m][0]||0;if(o(g,0))f[m]=[0];else{for(var y=0,v=[],b=[],x=d[m],w=d[m+1]-1;w>=x;w--){var _=h[w];_===m?y=p[w]:_<m&&(v.push(p[w]),b.push(_))}if(o(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var E=n(g,y),S=0,A=b.length;S<A;S++){var N=b[S];r[N]=[s(r[N][0],i(E,v[S]))]}f[m]=[E]}}return new a({data:f,size:[u,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(r(e),t).valueOf()}});function u(e,t){for(var r=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],p=[],h=e._data,d=c-1;d>=0;d--){var f=r[d][0]||0,m=void 0;if(o(f,0))m=0;else{var g=h[d][d];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=n(f,g);for(var y=d-1;y>=0;y--)r[y]=[s(r[y][0]||0,i(m,h[y][d]))]}p[d]=[m]}return new a({data:p,size:[u,1]})}}));function Kp(e,t){var r,n=t.length,i=[];if(e)for(r=0;r<n;r++)i[e[r]]=t[r];else for(r=0;r<n;r++)i[r]=t[r];return i}var Jp="lusolve",eh=K(Jp,["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],(e=>{var{typed:t,matrix:r,lup:n,slu:i,usolve:s,lsolve:o,DenseMatrix:a}=e,l=zc({DenseMatrix:a});return t(Jp,{"Array, Array | Matrix":function(e,t){e=r(e);var i=n(e);return c(i.L,i.U,i.p,null,t).valueOf()},"DenseMatrix, Array | Matrix":function(e,t){var r=n(e);return c(r.L,r.U,r.p,null,t)},"SparseMatrix, Array | Matrix":function(e,t){var r=n(e);return c(r.L,r.U,r.p,null,t)},"SparseMatrix, Array | Matrix, number, number":function(e,t,r,n){var s=i(e,r,n);return c(s.L,s.U,s.p,s.q,t)},"Object, Array | Matrix":function(e,t){return c(e.L,e.U,e.p,e.q,t)}});function u(e){if(m(e))return e;if(f(e))return r(e);throw new TypeError("Invalid Matrix LU decomposition")}function c(e,t,r,n,i){e=u(e),t=u(t),r&&((i=l(e,i,!0))._data=Kp(r,i._data));var a=o(e,i),c=s(t,a);return n&&(c._data=Kp(n,c._data)),c}}));function th(e){var{addScalar:t,subtract:r,flatten:n,multiply:i,multiplyScalar:s,divideScalar:o,sqrt:a,abs:l,bignumber:u,diag:c,inv:p,qr:h,usolve:d,usolveAll:f,equal:m,complex:g,larger:y,smaller:v,matrixFromColumns:b,dot:x}=e;function w(e,n,i,o){var l=t(e,o),u=r(s(e,o),s(n,i)),c=s(l,.5),p=s(a(r(s(l,l),s(4,u))),.5);return[t(c,p),r(c,p)]}function _(e,t,n,i,s,o,a,c){var p="BigNumber"===c,h="Complex"===c,d=p?u(0):h?g(0):0,f=p?u(1):h?g(1):1;if(v(l(n),a))return[[f,d],[d,f]];if(y(l(r(s,o)),a))return[[r(s,i),r(o,i)],[n,n]];var m=r(e,s),b=r(t,s),x=r(n,s),w=r(i,s);return v(l(b),a)?[[m,f],[x,d]]:[[b,d],[w,f]]}function E(e,t){for(var r=0;r<e.length;r++)e[r].push(...Array(t-e[r].length).fill(0));for(var n=e.length;n<t;n++)e.push(Array(t).fill(0)),e[n][n]=1;return e}function S(e,t,r){for(var n=0;n<e.length;n++)if(r(e[n],t))return n;return-1}function A(e,t,r,n,i){for(var s,o="BigNumber"===i?u(1e3):1e3,a=0;s=N(t,r,i),s=d(e,s),!y(M(s),o);)if(++a>=5)return null;for(a=0;;){var l=d(e,s);if(v(M(k(s,[l])),n))break;if(++a>=10)return null;s=C(l)}return s}function N(e,t,r){var n="BigNumber"===r,i="Complex"===r,s=Array(e).fill(0).map((e=>2*Math.random()-1));return n&&(s=s.map((e=>u(e)))),i&&(s=s.map((e=>g(e)))),C(s=k(s,t),r)}function k(e,t){for(var n of t)e=r(e,i(o(x(n,e),x(n,n)),n));return e}function M(e){return l(a(x(e,e)))}function C(e,t){var r="Complex"===t,n="BigNumber"===t?u(1):r?g(1):1;return i(o(n,M(e)),e)}return function(e,a,d,x,N){void 0===N&&(N=!0);var k=function(e,r,n,i,a){var p,h="BigNumber"===i,d="Complex"===i,f=h?u(0):d?g(0):0,b=h?u(1):d?g(1):1,x=h?u(10):2,w=s(x,x);a&&(p=Array(r).fill(b));var _=!1;for(;!_;){_=!0;for(var E=0;E<r;E++){for(var S=f,A=f,N=0;N<r;N++)if(E!==N){var k=l(e[E][N]);S=t(S,k),A=t(A,k)}if(!m(S,0)&&!m(A,0)){for(var M=b,C=S,T=o(A,x),O=s(A,x);v(C,T);)C=s(C,w),M=s(M,x);for(;y(C,O);)C=o(C,w),M=o(M,x);if(v(o(t(C,A),M),s(t(S,A),.95))){_=!1;for(var I=o(1,M),P=0;P<r;P++)E!==P&&(e[E][P]=s(e[E][P],M),e[P][E]=s(e[P][E],I));a&&(p[E]=s(p[E],M))}}}}return c(p)}(e,a,0,x,N);!function(e,n,i,a,c,p){var h="BigNumber"===a,d="Complex"===a,f=h?u(0):d?g(0):0;h&&(i=u(i));for(var m=0;m<n-2;m++){for(var y=0,b=f,x=m+1;x<n;x++){var w=e[x][m];v(l(b),l(w))&&(b=w,y=x)}if(!v(l(b),i)){if(y!==m+1){var _=e[y];e[y]=e[m+1],e[m+1]=_;for(var E=0;E<n;E++){var S=e[E][y];e[E][y]=e[E][m+1],e[E][m+1]=S}if(c){var A=p[y];p[y]=p[m+1],p[m+1]=A}}for(var N=m+2;N<n;N++){var k=o(e[N][m],b);if(0!==k){for(var M=0;M<n;M++)e[N][M]=r(e[N][M],s(k,e[m+1][M]));for(var C=0;C<n;C++)e[C][m+1]=t(e[C][m+1],s(k,e[C][N]));if(c)for(var T=0;T<n;T++)p[N][T]=r(p[N][T],s(k,p[m+1][T]))}}}}}(e,a,d,x,N,k);var M,{values:C,C:T}=function(e,n,s,o,a){var p="BigNumber"===o,d="Complex"===o,f=p?u(1):d?g(1):1;p&&(s=u(s));var m=Y(e),y=[],b=n,x=[],S=a?c(Array(n).fill(f)):void 0,A=a?c(Array(b).fill(f)):void 0,N=0;for(;N<=100;){N+=1;for(var k=0,M=0;M<b;M++)m[M][M]=r(m[M][M],k);var{Q:C,R:T}=h(m);m=i(T,C);for(var O=0;O<b;O++)m[O][O]=t(m[O][O],k);if(a&&(A=i(A,C)),1===b||v(l(m[b-1][b-2]),s)){N=0,y.push(m[b-1][b-1]),a&&(x.unshift([[1]]),E(A,n),S=i(S,A),b>1&&(A=c(Array(b-1).fill(f)))),b-=1,m.pop();for(var I=0;I<b;I++)m[I].pop()}else if(2===b||v(l(m[b-2][b-3]),s)){N=0;var P=w(m[b-2][b-2],m[b-2][b-1],m[b-1][b-2],m[b-1][b-1]);y.push(...P),a&&(x.unshift(_(m[b-2][b-2],m[b-2][b-1],m[b-1][b-2],m[b-1][b-1],P[0],P[1],s,o)),E(A,n),S=i(S,A),b>2&&(A=c(Array(b-2).fill(f)))),b-=2,m.pop(),m.pop();for(var D=0;D<b;D++)m[D].pop(),m[D].pop()}if(0===b)break}if(y.sort(((e,t)=>+r(l(e),l(t)))),N>100){var R=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+y.join(", "));throw R.values=y,R.vectors=[],R}var L=a?i(S,function(e,t){for(var r=[],n=0;n<t;n++)r[n]=Array(t).fill(0);var i=0;for(var s of e){for(var o=s.length,a=0;a<o;a++)for(var l=0;l<o;l++)r[i+a][i+l]=s[a][l];i+=o}return r}(x,n)):void 0;return{values:y,C:L}}(e,a,d,x,N);return T=i(p(k),T),N&&(M=function(e,t,s,o,a,l){var h=p(s),d=i(h,e,s),y="BigNumber"===l,v="Complex"===l,b=y?u(0):v?g(0):0,x=y?u(1):v?g(1):1,w=[],_=[];for(var E of o){var N=S(w,E,m);-1===N?(w.push(E),_.push(1)):_[N]+=1}for(var k=[],M=w.length,C=Array(t).fill(b),T=c(Array(t).fill(x)),O=[],I=0;I<M;I++){var P=w[I],D=r(d,i(P,T)),R=f(D,C);for((R=R.map((e=>i(s,e)))).shift();R.length<_[I];){var L=A(D,t,R,a,l);if(null==L){O.push(P);break}R.push(L)}k.push(...R.map((e=>n(e))))}if(0!==O.length){var q=new Error("Failed to find eigenvectors for the following eigenvalues: "+O.join(", "));throw q.values=o,q.vectors=k,q}return k}(e,a,T,C,d,x),M=b(...M)),{values:C,vectors:M}}}var rh=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],nh=K("eigs",rh,(e=>{var{config:t,typed:r,matrix:n,addScalar:i,subtract:s,equal:o,abs:a,atan:h,cos:d,sin:f,multiplyScalar:m,divideScalar:g,inv:y,bignumber:v,multiply:b,add:x,larger:w,column:_,flatten:E,number:S,complex:A,sqrt:N,diag:k,qr:M,usolve:C,usolveAll:T,im:O,re:I,smaller:P,matrixFromColumns:D,dot:R}=e,L=function(e){var{config:t,addScalar:r,subtract:n,abs:i,atan:s,cos:o,sin:a,multiplyScalar:l,inv:u,bignumber:c,multiply:p,add:h}=e;function d(e,t){for(var r,n=e.length,i=Math.abs(t/n),s=new Array(n),o=0;o<n;o++)s[o]=S(n,0),s[o][o]=1;for(var a=w(e);Math.abs(a[1])>=Math.abs(i);){var l=a[0][0],u=a[0][1];e=x(e,r=m(e[l][l],e[u][u],e[l][u]),l,u),s=y(s,r,l,u),a=w(e)}for(var c=S(n,0),p=0;p<n;p++)c[p]=e[p][p];return E(Y(c),Y(s))}function f(e,t){for(var r,n=e.length,s=i(t/n),o=new Array(n),a=0;a<n;a++)o[a]=S(n,0),o[a][a]=1;for(var l=_(e);i(l[1])>=i(s);){var u=l[0][0],c=l[0][1];e=b(e,r=g(e[u][u],e[c][c],e[u][c]),u,c),o=v(o,r,u,c),l=_(e)}for(var p=S(n,0),h=0;h<n;h++)p[h]=e[h][h];return E(Y(p),Y(o))}function m(e,r,n){var i=r-e;return Math.abs(i)<=t.epsilon?Math.PI/4:.5*Math.atan(2*n/(r-e))}function g(e,r,o){var a=n(r,e);return i(a)<=t.epsilon?c(-1).acos().div(4):l(.5,s(p(2,o,u(a))))}function y(e,t,r,n){for(var i=e.length,s=Math.cos(t),o=Math.sin(t),a=S(i,0),l=S(i,0),u=0;u<i;u++)a[u]=s*e[u][r]-o*e[u][n],l[u]=o*e[u][r]+s*e[u][n];for(var c=0;c<i;c++)e[c][r]=a[c],e[c][n]=l[c];return e}function v(e,t,i,s){for(var u=e.length,p=o(t),h=a(t),d=S(u,c(0)),f=S(u,c(0)),m=0;m<u;m++)d[m]=n(l(p,e[m][i]),l(h,e[m][s])),f[m]=r(l(h,e[m][i]),l(p,e[m][s]));for(var g=0;g<u;g++)e[g][i]=d[g],e[g][s]=f[g];return e}function b(e,t,i,s){for(var u=e.length,d=c(o(t)),f=c(a(t)),m=l(d,d),g=l(f,f),y=S(u,c(0)),v=S(u,c(0)),b=p(c(2),d,f,e[i][s]),x=r(n(l(m,e[i][i]),b),l(g,e[s][s])),w=h(l(g,e[i][i]),b,l(m,e[s][s])),_=0;_<u;_++)y[_]=n(l(d,e[i][_]),l(f,e[s][_])),v[_]=r(l(f,e[i][_]),l(d,e[s][_]));e[i][i]=x,e[s][s]=w,e[i][s]=c(0),e[s][i]=c(0);for(var E=0;E<u;E++)E!==i&&E!==s&&(e[i][E]=y[E],e[E][i]=y[E],e[s][E]=v[E],e[E][s]=v[E]);return e}function x(e,t,r,n){for(var i=e.length,s=Math.cos(t),o=Math.sin(t),a=s*s,l=o*o,u=S(i,0),c=S(i,0),p=a*e[r][r]-2*s*o*e[r][n]+l*e[n][n],h=l*e[r][r]+2*s*o*e[r][n]+a*e[n][n],d=0;d<i;d++)u[d]=s*e[r][d]-o*e[n][d],c[d]=o*e[r][d]+s*e[n][d];e[r][r]=p,e[n][n]=h,e[r][n]=0,e[n][r]=0;for(var f=0;f<i;f++)f!==r&&f!==n&&(e[r][f]=u[f],e[f][r]=u[f],e[n][f]=c[f],e[f][n]=c[f]);return e}function w(e){for(var t=e.length,r=0,n=[0,1],i=0;i<t;i++)for(var s=i+1;s<t;s++)Math.abs(r)<Math.abs(e[i][s])&&(r=Math.abs(e[i][s]),n=[i,s]);return[n,r]}function _(e){for(var t=e.length,r=0,n=[0,1],s=0;s<t;s++)for(var o=s+1;o<t;o++)i(r)<i(e[s][o])&&(r=i(e[s][o]),n=[s,o]);return[n,r]}function E(e,t){for(var r=e.length,n=Array(r),s=Array(r),o=0;o<r;o++)s[o]=Array(r);for(var a=0;a<r;a++){for(var l=0,u=e[0],c=0;c<e.length;c++)i(e[c])<i(u)&&(u=e[l=c]);n[a]=e.splice(l,1)[0];for(var p=0;p<r;p++)s[p][a]=t[p][l],t[p].splice(l,1)}return{values:n,vectors:s}}function S(e,t){for(var r=new Array(e),n=0;n<e;n++)r[n]=t;return r}return function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.epsilon,i=arguments.length>3?arguments[3]:void 0;if("number"===i)return d(e,n);if("BigNumber"===i)return f(e,n);throw TypeError("Unsupported data type: "+i)}}({config:t,addScalar:i,subtract:s,column:_,flatten:E,equal:o,abs:a,atan:h,cos:d,sin:f,multiplyScalar:m,inv:y,bignumber:v,complex:A,multiply:b,add:x}),q=th({config:t,addScalar:i,subtract:s,multiply:b,multiplyScalar:m,flatten:E,divideScalar:g,sqrt:N,abs:a,bignumber:v,diag:k,qr:M,inv:y,usolve:C,usolveAll:T,equal:o,complex:A,larger:w,smaller:P,matrixFromColumns:D,dot:R});return r("eigs",{Array:function(e){return $(n(e))},"Array, number|BigNumber":function(e,t){return $(n(e),t)},Matrix:function(e){var{values:t,vectors:r}=$(e);return{values:n(t),vectors:n(r)}},"Matrix, number|BigNumber":function(e,t){var{values:r,vectors:i}=$(e,t);return{values:n(r),vectors:n(i)}}});function $(e,r){void 0===r&&(r=t.epsilon);var n=e.size();if(2!==n.length||n[0]!==n[1])throw new RangeError("Matrix must be square (size: "+ur(n)+")");var i=e.toArray(),o=n[0];if(function(e,t,r){for(var n=0;n<t;n++)for(var i=0;i<t;i++)if(w(v(a(O(e[n][i]))),r))return!1;return!0}(i,o,r)&&(function(e,t){for(var r=0;r<t;r++)for(var n=0;n<t;n++)e[r][n]=I(e[r][n])}(i,o),function(e,t,r){for(var n=0;n<t;n++)for(var i=n;i<t;i++)if(w(v(a(s(e[n][i],e[i][n]))),r))return!1;return!0}(i,o,r))){var l=B(e,i,o);return L(i,o,r,l)}var u=B(e,i,o);return q(i,o,r,u)}function B(e,t,r){var n=e.datatype();if("number"===n||"BigNumber"===n||"Complex"===n)return n;for(var i=!1,s=!1,o=!1,a=0;a<r;a++)for(var h=0;h<r;h++){var d=t[a][h];if(l(d)||p(d))i=!0;else if(u(d))s=!0;else{if(!c(d))throw TypeError("Unsupported type in Matrix: "+W(d));o=!0}}if(s&&o&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),o){for(var f=0;f<r;f++)for(var m=0;m<r;m++)t[f][m]=A(t[f][m]);return"Complex"}if(s){for(var g=0;g<r;g++)for(var y=0;y<r;y++)t[g][y]=v(t[g][y]);return"BigNumber"}if(i){for(var b=0;b<r;b++)for(var x=0;x<r;x++)t[b][x]=S(t[b][x]);return"number"}throw TypeError("Matrix contains unsupported types only.")}})),ih=["typed","abs","map","median","subtract"],sh=K("mad",ih,(e=>{var{typed:t,abs:r,map:n,median:i,subtract:s}=e;return t("mad",{"Array | Matrix":o,"...":function(e){return o(e)}});function o(e){if(0===(e=Cr(e.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var t=i(e);return i(n(e,(function(e){return r(s(e,t))})))}catch(o){throw o instanceof TypeError&&-1!==o.message.indexOf("median")?new TypeError(o.message.replace("median","mad")):ju(o,"mad")}}})),oh="unit",ah=["typed","Unit"],lh=K(oh,ah,(e=>{var{typed:t,Unit:r}=e;return t(oh,{Unit:function(e){return e.clone()},string:function(e){return r.isValuelessUnit(e)?new r(null,e):r.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(e,t){return new r(e,t)},"Array | Matrix":function(e){return on(e,this)}})})),uh=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten"],ch=K("intersect",uh,(e=>{var{typed:t,config:r,abs:n,add:i,addScalar:s,matrix:o,multiply:a,multiplyScalar:l,divideScalar:c,subtract:p,smaller:h,equalScalar:d,flatten:f}=e;return t("intersect",{"Array, Array, Array":m,"Array, Array, Array, Array":g,"Matrix, Matrix, Matrix":function(e,t,r){var n=m(e.valueOf(),t.valueOf(),r.valueOf());return null===n?null:o(n)},"Matrix, Matrix, Matrix, Matrix":function(e,t,r,n){var i=g(e.valueOf(),t.valueOf(),r.valueOf(),n.valueOf());return null===i?null:o(i)}});function m(e,t,r){if(e=y(e),t=y(t),r=y(r),!x(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!x(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(e){return 4===e.length&&v(e[0])&&v(e[1])&&v(e[2])&&v(e[3])}(r))throw new TypeError("Array with 4 numbers expected as third argument");return function(e,t,r,n,i,o,a,u,h,d){var f=l(e,a),m=l(n,a),g=l(t,u),y=l(i,u),v=l(r,h),b=l(o,h),x=p(p(p(d,f),g),v),w=p(p(p(s(s(m,y),b),f),g),v),_=c(x,w),E=s(e,l(_,p(n,e))),S=s(t,l(_,p(i,t))),A=s(r,l(_,p(o,r)));return[E,S,A]}(e[0],e[1],e[2],t[0],t[1],t[2],r[0],r[1],r[2],r[3])}function g(e,t,o,u){if(e=y(e),t=y(t),o=y(o),u=y(u),2===e.length){if(!b(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!b(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!b(o))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!b(u))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,t,o,u){var d=e,f=o,m=p(d,t),g=p(f,u),y=p(l(m[0],g[1]),l(g[0],m[1]));if(h(n(y),r.epsilon))return null;var v=l(g[0],d[1]),b=l(g[1],d[0]),x=l(g[0],f[1]),w=l(g[1],f[0]),_=c(s(p(p(v,b),x),w),y);return i(a(m,_),d)}(e,t,o,u)}if(3===e.length){if(!x(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!x(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(o))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!x(u))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return f=e[0],m=e[1],g=e[2],v=t[0],_=t[1],E=t[2],S=o[0],A=o[1],N=o[2],k=u[0],M=u[1],C=u[2],T=w(f,S,k,S,m,A,M,A,g,N,C,N),O=w(k,S,v,f,M,A,_,m,C,N,E,g),I=w(f,S,v,f,m,A,_,m,g,N,E,g),P=w(k,S,k,S,M,A,M,A,C,N,C,N),D=w(v,f,v,f,_,m,_,m,E,g,E,g),R=c(p(l(T,O),l(I,P)),p(l(D,P),l(O,O))),L=c(s(T,l(R,O)),P),q=s(f,l(R,p(v,f))),$=s(m,l(R,p(_,m))),B=s(g,l(R,p(E,g))),z=s(S,l(L,p(k,S))),F=s(A,l(L,p(M,A))),U=s(N,l(L,p(C,N))),d(q,z)&&d($,F)&&d(B,U)?[q,$,B]:null}throw new TypeError("Arrays with two or thee dimensional points expected");var f,m,g,v,_,E,S,A,N,k,M,C,T,O,I,P,D,R,L,q,$,B,z,F,U}function y(e){return 1===e.length?e[0]:e.length>1&&Array.isArray(e[0])&&e.every((e=>Array.isArray(e)&&1===e.length))?f(e):e}function v(e){return"number"==typeof e||u(e)}function b(e){return 2===e.length&&v(e[0])&&v(e[1])}function x(e){return 3===e.length&&v(e[0])&&v(e[1])&&v(e[2])}function w(e,t,r,n,i,o,a,u,c,h,d,f){var m=l(p(e,t),p(r,n)),g=l(p(i,o),p(a,u)),y=l(p(c,h),p(d,f));return s(s(m,g),y)}})),ph="norm",hh=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],dh=K(ph,hh,(e=>{var{typed:t,abs:r,add:n,pow:i,conj:s,sqrt:o,multiply:a,equalScalar:l,larger:u,smaller:c,matrix:p,ctranspose:h,eigs:d}=e;return t(ph,{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return g(p(e),2)},Matrix:function(e){return g(e,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(e){return this(e)},"Array, number | BigNumber | string":function(e,t){return g(p(e),t)},"Matrix, number | BigNumber | string":function(e,t){return g(e,t)}});function f(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=0;return e.forEach((function(e){var n=r(e);u(n,t)&&(t=n)}),!0),t}(e);if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return function(e){var t;return e.forEach((function(e){var n=r(e);t&&!c(n,t)||(t=n)}),!0),t||0}(e);if("fro"===t)return g(e,2);if("number"==typeof t&&!isNaN(t)){if(!l(t,0)){var s=0;return e.forEach((function(e){s=n(i(r(e),t),s)}),!0),i(s,1/t)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function m(e,t){if(1===t)return function(e){var t=[],i=0;return e.forEach((function(e,s){var o=s[1],a=n(t[o]||0,r(e));u(a,i)&&(i=a),t[o]=a}),!0),i}(e);if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=[],i=0;return e.forEach((function(e,s){var o=s[0],a=n(t[o]||0,r(e));u(a,i)&&(i=a),t[o]=a}),!0),i}(e);if("fro"===t)return function(e){var t=0;return e.forEach((function(e,r){t=n(t,a(e,s(e)))})),r(o(t))}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError("Invalid matrix dimensions");var n=h(e),i=a(n,e),s=d(i).values.toArray(),l=s[s.length-1];return r(o(l))}(e);throw new Error("Unsupported parameter value "+t)}function g(e,t){var r=e.size();if(1===r.length)return f(e,t);if(2===r.length){if(r[0]&&r[1])return m(e,t);throw new RangeError("Invalid matrix dimensions")}}})),fh="rotationMatrix",mh=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],gh=K(fh,mh,(e=>{var{typed:t,config:r,multiplyScalar:n,addScalar:i,unaryMinus:s,norm:o,BigNumber:a,matrix:l,DenseMatrix:c,SparseMatrix:p,cos:h,sin:d}=e;return t(fh,{"":function(){return"Matrix"===r.matrix?l([]):[]},string:function(e){return l(e)},"number | BigNumber | Complex | Unit":function(e){return f(e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(e,t){return f(e,t)},"number | BigNumber | Complex | Unit, Array":function(e,t){var r=l(t);return m(r),v(e,r,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(e,t){m(t);var n=t.storage()||("Matrix"===r.matrix?"dense":void 0);return v(e,t,n)},"number | BigNumber | Complex | Unit, Array, string":function(e,t,r){var n=l(t);return m(n),v(e,n,r)},"number | BigNumber | Complex | Unit, Matrix, string":function(e,t,r){return m(t),v(e,t,r)}});function f(e,t){var r=u(e)?new a(-1):-1,i=h(e),s=d(e);return y([[i,n(r,s)],[s,i]],t)}function m(e){var t=e.size();if(t.length<1||3!==t[0])throw new RangeError("Vector must be of dimensions 1x3")}function g(e){return e.reduce(((e,t)=>n(e,t)))}function y(e,t){if(t){if("sparse"===t)return new p(e);if("dense"===t)return new c(e);throw new TypeError('Unknown matrix type "'.concat(t,'"'))}return e}function v(e,t,r){var n=o(t);if(0===n)throw new RangeError("Rotation around zero vector");var l=u(e)?a:null,c=l?new l(1):1,p=l?new l(-1):-1,f=l?new l(t.get([0])/n):t.get([0])/n,m=l?new l(t.get([1])/n):t.get([1])/n,v=l?new l(t.get([2])/n):t.get([2])/n,b=h(e),x=i(c,s(b)),w=d(e);return y([[i(b,g([f,f,x])),i(g([f,m,x]),g([p,v,w])),i(g([f,v,x]),g([m,w]))],[i(g([f,m,x]),g([v,w])),i(b,g([m,m,x])),i(g([m,v,x]),g([p,f,w]))],[i(g([f,v,x]),g([p,m,w])),i(g([m,v,x]),g([f,w])),i(b,g([v,v,x]))]],r)}})),yh="rotate",vh=["typed","multiply","rotationMatrix"],bh=K(yh,vh,(e=>{var{typed:t,multiply:r,rotationMatrix:n}=e;return t(yh,{"Array , number | BigNumber | Complex | Unit":function(e,t){return i(e,2),r(n(t),e).toArray()},"Matrix , number | BigNumber | Complex | Unit":function(e,t){return i(e,2),r(n(t),e)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,s){return i(e,3),r(n(t,s),e)},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,s){return i(e,3),r(n(t,s),e)}});function i(e,t){var r=Array.isArray(e)?gr(e):e.size();if(r.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(t));if(2===r.length&&1!==r[1])throw new RangeError("Vector must be of dimensions 1x".concat(t));if(r[0]!==t)throw new RangeError("Vector must be of dimensions 1x".concat(t))}})),xh="multinomial",wh=["typed","add","divide","multiply","factorial","isInteger","isPositive"],_h=K(xh,wh,(e=>{var{typed:t,add:r,divide:n,multiply:i,factorial:s,isInteger:o,isPositive:a}=e;return t(xh,{"Array | Matrix":function(e){var t=0,l=1;return sn(e,(function(e){if(!o(e)||!a(e))throw new TypeError("Positive integer value expected in function multinomial");t=r(t,e),l=i(l,s(e))})),n(s(t),l)}})})),Eh=ee({}),Sh=Se({}),Ah=Ae({}),Nh=$e({}),kh=Be({}),Mh=qe({}),Ch=rt({config:a}),Th=nt({}),Oh=it({}),Ih=Ke({Complex:Sh}),Ph=We({BigNumber:Ch,config:a}),Dh=Xe({BigNumber:Ch,config:a}),Rh=Fe({BigNumber:Ch,config:a}),Lh=Ue({BigNumber:Ch,config:a}),qh=Ze({BigNumber:Ch,config:a}),$h=je({BigNumber:Ch,config:a}),Bh=Pt({BigNumber:Ch,config:a}),zh=St({BigNumber:Ch,config:a}),Fh=jt({BigNumber:Ch,config:a}),Uh=It({BigNumber:Ch,config:a}),jh=ir({}),Gh=Ge({BigNumber:Ch,config:a}),Vh=ze({BigNumber:Ch,config:a}),Hh=Ye({BigNumber:Ch,config:a}),Wh=Je({}),Yh=$r({Matrix:Th}),Xh=Ve({BigNumber:Ch,config:a}),Zh=Jr({BigNumber:Ch,Complex:Sh,DenseMatrix:Yh,Fraction:jh}),Qh=pn({typed:Zh}),Kh=dn({typed:Zh}),Jh=xn({typed:Zh}),ed=_n({typed:Zh}),td=An({config:a,typed:Zh}),rd=Nn({typed:Zh}),nd=Mn({typed:Zh}),id=Cn({Complex:Sh,typed:Zh}),sd=On({typed:Zh}),od=ni({BigNumber:Ch,config:a,typed:Zh}),ad=si({isInteger:Qh,typed:Zh}),ld=li({typed:Zh}),ud=ci({Complex:Sh,typed:Zh}),cd=hi({Complex:Sh,config:a,typed:Zh}),pd=di({typed:Zh}),hd=mi({BigNumber:Ch,Fraction:jh,complex:id,typed:Zh}),dd=yi({typed:Zh}),fd=Ri({typed:Zh}),md=Li({typed:Zh}),gd=qi({typed:Zh}),yd=ji({typed:Zh}),vd=Gi({typed:Zh}),bd=Wi({typed:Zh}),xd=Xi({typed:Zh}),wd=Qi({typed:Zh}),_d=is({typed:Zh}),Ed=ss({format:_d,typed:Zh}),Sd=as({typed:Zh}),Ad=cs({typed:Zh}),Nd=hs({Complex:Sh,config:a,typed:Zh}),kd=Os({BigNumber:Ch,typed:Zh}),Md=Ps({BigNumber:Ch,Complex:Sh,config:a,typed:Zh}),Cd=Rs({BigNumber:Ch,Complex:Sh,config:a,typed:Zh}),Td=qs({Complex:Sh,config:a,typed:Zh}),Od=$s({typed:Zh}),Id=zs({Complex:Sh,config:a,typed:Zh}),Pd=Us({typed:Zh}),Dd=Gs({BigNumber:Ch,typed:Zh}),Rd=Hs({BigNumber:Ch,typed:Zh}),Ld=Ys({BigNumber:Ch,typed:Zh}),qd=Zs({typed:Zh}),$d=Qs({typed:Zh}),Bd=to({typed:Zh}),zd=ao({config:a,typed:Zh}),Fd=co({config:a,typed:Zh}),Ud=He({BigNumber:Ch,config:a}),jd=ho({typed:Zh}),Gd=mo({isNumeric:Kh,typed:Zh}),Vd=yo({typed:Zh}),Hd=bo({typed:Zh}),Wd=xo({Fraction:jh,typed:Zh}),Yd=_o({typed:Zh}),Xd=So({typed:Zh}),Zd=Ao({typed:Zh}),Qd=ko({Complex:Sh,config:a,typed:Zh}),Kd=Mo({Complex:Sh,config:a,typed:Zh}),Jd=To({typed:Zh}),ef=Io({typed:Zh}),tf=Do({isNaN:ed,isNumeric:Kh,typed:Zh}),rf=Ro({format:_d,typed:Zh}),nf=qo({Complex:Sh,config:a,typed:Zh}),sf=Bo({BigNumber:Ch,typed:Zh}),of=zo({typed:Zh}),af=Fo({typed:Zh}),lf=Uo({BigNumber:Ch,typed:Zh}),uf=jo({typed:Zh}),cf=Vo({typed:Zh}),pf=Yo({config:a,typed:Zh}),hf=Qe({BigNumber:Ch,config:a}),df=Zo({typed:Zh}),ff=Qo({Matrix:Th,equalScalar:td,typed:Zh}),mf=Jo({DenseMatrix:Yh,Matrix:Th,SparseMatrix:ff,typed:Zh}),gf=ea({typed:Zh}),yf=oa({BigNumber:Ch,DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh}),vf=ha({DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh}),bf=ma({BigNumber:Ch,equalScalar:td,matrix:mf,typed:Zh}),xf=ya({BigNumber:Ch,config:a,matrix:mf,typed:Zh}),wf=ba({equalScalar:td,matrix:mf,typed:Zh}),_f=_a({DenseMatrix:Yh,matrix:mf,typed:Zh}),Ef=Ea({DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh}),Sf=Aa({isInteger:Qh,matrix:mf,typed:Zh}),Af=Ma({DenseMatrix:Yh,SparseMatrix:ff,matrix:mf,typed:Zh}),Nf=Ta({BigNumber:Ch,DenseMatrix:Yh,SparseMatrix:ff,config:a,matrix:mf,typed:Zh}),kf=Oa({BigNumber:Ch,config:a,matrix:mf,typed:Zh}),Mf=Pa({isInteger:Qh,matrix:mf,typed:Zh}),Cf=$a({matrix:mf,config:a,typed:Zh}),Tf=za({matrix:mf,typed:Zh}),Of=Ha({BigNumber:Ch,config:a,matrix:mf,typed:Zh}),If=Wa({format:_d,typed:Zh}),Pf=Ja({BigNumber:Ch,DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh,zeros:Of}),Df=nl({DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh,zeros:Of}),Rf=sl({DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh,zeros:Of}),Lf=al({BigNumber:Ch,DenseMatrix:Yh,Fraction:jh,config:a,equalScalar:td,matrix:mf,typed:Zh}),qf=ul({matrix:mf,typed:Zh}),$f=pl({DenseMatrix:Yh,config:a,matrix:mf,typed:Zh}),Bf=dl({DenseMatrix:Yh,config:a,matrix:mf,typed:Zh}),zf=ml({DenseMatrix:Yh,config:a,equalScalar:td,matrix:mf,typed:Zh}),Ff=gl({DenseMatrix:Yh,smaller:$f}),Uf=yl({larger:Bf,smaller:$f}),jf=bl({SparseMatrix:ff,typed:Zh}),Gf=wl({BigNumber:Ch,Complex:Sh,config:a,typed:Zh}),Vf=Sl({BigNumber:Ch,DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh}),Hf=Al({BigNumber:Ch,typed:Zh}),Wf=Nl({DenseMatrix:Yh,SparseMatrix:ff,addScalar:Xd,equalScalar:td,matrix:mf,typed:Zh}),Yf=kl({addScalar:Xd,conj:Jd,multiplyScalar:pd,size:Cf,typed:Zh}),Xf=Cl({addScalar:Xd,combinations:Bd,isInteger:Qh,isNegative:df,isPositive:Jh,larger:Bf,typed:Zh}),Zf=Ol({typed:Zh}),Qf=Pl({isZero:Zf,matrix:mf,typed:Zh}),Kf=Rl({BigNumber:Ch,Complex:Sh,Fraction:jh,config:a,isNegative:df,matrix:mf,typed:Zh,unaryMinus:Yd}),Jf=Ll({config:a,equalScalar:td,matrix:mf,round:Pf,typed:Zh}),em=$l({addScalar:Xd,dot:Yf,equalScalar:td,matrix:mf,multiplyScalar:pd,typed:Zh}),tm=zl({equalScalar:td,matrix:mf,multiplyScalar:pd,typed:Zh}),rm=Fl({typed:Zh}),nm=jl({matrix:mf,typed:Zh}),im=Vl({config:a,matrix:mf}),sm=Wl({matrix:mf,typed:Zh}),om=Yl({matrix:mf,typed:Zh}),am=Xl({Complex:Sh,config:a,fraction:Wd,identity:Nf,matrix:mf,multiply:em,number:rd,typed:Zh}),lm=Ql({DenseMatrix:Yh,equalScalar:td,matrix:mf,pow:am,typed:Zh}),um=Jl({DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh,zeros:Of}),cm=ru({compare:Lf,typed:Zh}),pm=iu({compareText:qf,isZero:Zf,typed:Zh}),hm=ou({DenseMatrix:Yh,config:a,matrix:mf,typed:Zh}),dm=lu({compare:Lf,isNaN:ed,isNumeric:Kh,typed:Zh}),fm=uu({ImmutableDenseMatrix:Ff}),mm=pu({BigNumber:Ch,Complex:Sh,config:a,typed:Zh}),gm=hu({typed:Zh}),ym=fu({DenseMatrix:Yh,Index:fm,compareNatural:cm,size:Cf,subset:Tf,typed:Zh}),vm=gu({DenseMatrix:Yh,Index:fm,compareNatural:cm,size:Cf,subset:Tf,typed:Zh}),bm=vu({Index:fm,compareNatural:cm,size:Cf,subset:Tf,typed:Zh}),xm=xu({compareNatural:cm,typed:Zh}),wm=wu({add:Wf,matrix:mf,typed:Zh}),_m=_u({add:Wf,compare:Lf,multiply:em,partitionSelect:dm,typed:Zh}),Em=ku({BigNumber:Ch,Complex:Sh,config:a,multiplyScalar:pd,pow:am,typed:Zh}),Sm=Mu({BigNumber:Ch,typed:Zh}),Am=Tu({flatten:nm,matrix:mf,size:Cf,typed:Zh}),Nm=Ou({equalScalar:td,matrix:mf,typed:Zh}),km=Pu({DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh}),Mm=Ru({matrix:mf,multiplyScalar:pd,typed:Zh}),Cm=Lu({matrix:mf,typed:Zh}),Tm=qu({bignumber:Sm,fraction:Wd,number:rd}),Om=$u({equalScalar:td,matrix:mf,not:yd,typed:Zh,zeros:Of}),Im=zu({DenseMatrix:Yh,config:a,matrix:mf,typed:Zh}),Pm=Uu({compare:Lf,compareNatural:cm,matrix:mf,typed:Zh}),Dm=Gu({config:a,numeric:Tm,smaller:$f,typed:Zh}),Rm=Vu({BigNumber:Ch,typed:Zh}),Lm=Wu({DenseMatrix:Yh,Index:fm,compareNatural:cm,size:Cf,subset:Tf,typed:Zh}),qm=Xu({Index:fm,compareNatural:cm,size:Cf,subset:Tf,typed:Zh}),$m=Qu({Index:fm,typed:Zh}),Bm=Ku({add:Wf,config:a,numeric:Tm,typed:Zh}),zm=ec({gamma:Em,typed:Zh}),Fm=rc({factorial:zm,typed:Zh}),Um=sc({flatten:nm,matrix:mf,size:Cf,typed:Zh}),jm=ac({DenseMatrix:Yh,addScalar:Xd,equalScalar:td,matrix:mf,typed:Zh,unaryMinus:Yd}),Gm=cc({matrix:mf,multiply:em,subtract:jm,typed:Zh}),Vm=hc({bignumber:Sm,matrix:mf,config:a,larger:Bf,largerEq:hm,smaller:$f,smallerEq:Im,typed:Zh}),Hm=dc({Index:fm,matrix:mf,range:Vm,typed:Zh}),Wm=mc({config:a,multiplyScalar:pd,numeric:Tm,typed:Zh}),Ym=yc({DenseMatrix:Yh,equalScalar:td,matrix:mf,typed:Zh}),Xm=vc({config:a,larger:Bf,numeric:Tm,typed:Zh}),Zm=xc({DenseMatrix:Yh,Index:fm,compareNatural:cm,size:Cf,subset:Tf,typed:Zh}),Qm=_c({Index:fm,concat:Sf,setDifference:ym,size:Cf,subset:Tf,typed:Zh}),Km=Ec({config:a,equalScalar:td,matrix:mf,round:Pf,typed:Zh}),Jm=Sc({DenseMatrix:Yh,matrix:mf,typed:Zh}),eg=Nc({prod:Wm,size:Cf,typed:Zh}),tg=Mc({conj:Jd,transpose:Cm,typed:Zh}),rg=Tc({equal:Ym,typed:Zh}),ng=Ic({Index:fm,compareNatural:cm,size:Cf,subset:Tf,typed:Zh}),ig=Pc({Complex:Sh,ceil:Km,floor:Jf,matrix:mf,typed:Zh}),sg=Rc({matrix:mf,number:rd,subtract:jm,typed:Zh}),og=qc({numeric:Tm,typed:Zh}),ag=Bc({Complex:Sh,config:a,divideScalar:og,typed:Zh}),lg=Uc({DenseMatrix:Yh,divideScalar:og,equalScalar:td,matrix:mf,multiplyScalar:pd,subtract:jm,typed:Zh}),ug=Gc({DenseMatrix:Yh,divideScalar:og,equalScalar:td,matrix:mf,multiplyScalar:pd,subtract:jm,typed:Zh}),cg=Vc({FibonacciHeap:Uf,addScalar:Xd,equalScalar:td}),pg=Wc({Index:fm,concat:Sf,setIntersect:vm,setSymDifference:Qm,size:Cf,subset:Tf,typed:Zh}),hg=Yc({DenseMatrix:Yh,Spa:cg,SparseMatrix:ff,abs:gf,addScalar:Xd,divideScalar:og,equalScalar:td,larger:Bf,matrix:mf,multiplyScalar:pd,subtract:jm,typed:Zh,unaryMinus:Yd}),dg=ap({SparseMatrix:ff,abs:gf,add:Wf,divideScalar:og,larger:Bf,largerEq:hm,multiply:em,subtract:jm,transpose:Cm,typed:Zh}),fg=lp({lup:hg,matrix:mf,multiply:em,subtract:jm,typed:Zh,unaryMinus:Yd}),mg=cp({abs:gf,addScalar:Xd,divideScalar:og,multiplyScalar:pd,sqrt:Kd,subtract:jm,typed:Zh,unaryMinus:Yd}),gg=hp({addScalar:Xd,combinations:Bd,divideScalar:og,factorial:zm,isInteger:Qh,isNegative:df,larger:Bf,multiplyScalar:pd,pow:am,subtract:jm,typed:Zh}),yg=fp({addScalar:Xd,combinations:Bd,divideScalar:og,isInteger:Qh,isNegative:df,multiplyScalar:pd,typed:Zh}),vg=gp({Index:fm,matrix:mf,range:Vm,typed:Zh}),bg=yp({Complex:Sh,config:a,divideScalar:og,typed:Zh}),xg=bp({DenseMatrix:Yh,divideScalar:og,equalScalar:td,matrix:mf,typed:Zh}),wg=wp({DenseMatrix:Yh,divideScalar:og,equalScalar:td,matrix:mf,multiplyScalar:pd,subtract:jm,typed:Zh}),_g=Ep({abs:gf,addScalar:Xd,divideScalar:og,isPositive:Jh,multiplyScalar:pd,smaller:$f,sqrt:Kd,typed:Zh}),Eg=Sp({addScalar:Xd,complex:id,conj:Jd,divideScalar:og,equal:Ym,identity:Nf,isZero:Zf,matrix:mf,multiplyScalar:pd,sign:hd,sqrt:Kd,subtract:jm,typed:Zh,unaryMinus:Yd,zeros:Of}),Sg=Ap({abs:gf,addScalar:Xd,det:fg,divideScalar:og,identity:Nf,matrix:mf,multiply:em,typed:Zh,unaryMinus:Yd}),Ag=kp({abs:gf,add:Wf,identity:Nf,inv:Sg,multiply:em,typed:Zh}),Ng=Mp({divideScalar:og,equalScalar:td,inv:Sg,matrix:mf,multiply:em,typed:Zh}),kg=Tp({add:Wf,divide:Ng,typed:Zh}),Mg=Pp({add:Wf,apply:ad,divide:Ng,isNaN:ed,multiply:em,subtract:jm,typed:Zh}),Cg=Rp({divide:Ng,dotDivide:xg,isNumeric:Kh,log:bg,matrix:mf,multiply:em,sum:Bm,typed:Zh}),Tg=qp({addScalar:Xd,isInteger:Qh,isNegative:df,stirlingS2:gg,typed:Zh}),Og=Bp({Complex:Sh,config:a,divideScalar:og,log:bg,typed:Zh}),Ig=Up({BigNumber:Ch,Complex:Sh,Fraction:jh,abs:gf,addScalar:Xd,config:a,divideScalar:og,equal:Ym,fix:ig,format:_d,isNumeric:Kh,multiplyScalar:pd,number:rd,pow:am,round:Pf,subtract:jm}),Pg=Gp({Unit:Ig,typed:Zh}),Dg=Hp({abs:gf,add:Wf,identity:Nf,inv:Sg,max:Xm,multiply:em,size:Cf,sqrt:Kd,subtract:jm,typed:Zh}),Rg=Yp({add:Wf,compare:Lf,divide:Ng,partitionSelect:dm,typed:Zh}),Lg=Xp({sqrt:Kd,typed:Zh,variance:Mg}),qg=Dt({BigNumber:Ch,Unit:Ig,config:a}),$g=ft({BigNumber:Ch,Unit:Ig,config:a}),Bg=Lt({BigNumber:Ch,Unit:Ig,config:a}),zg=mt({BigNumber:Ch,Unit:Ig,config:a}),Fg=kt({BigNumber:Ch,Unit:Ig,config:a}),Ug=_t({BigNumber:Ch,Unit:Ig,config:a}),jg=qt({BigNumber:Ch,Unit:Ig,config:a}),Gg=$t({BigNumber:Ch,Unit:Ig,config:a}),Vg=ot({BigNumber:Ch,Unit:Ig,config:a}),Hg=At({BigNumber:Ch,Unit:Ig,config:a}),Wg=bt({BigNumber:Ch,Unit:Ig,config:a}),Yg=ut({BigNumber:Ch,Unit:Ig,config:a}),Xg=Wt({BigNumber:Ch,Unit:Ig,config:a}),Zg=Ft({BigNumber:Ch,Unit:Ig,config:a}),Qg=Mt({BigNumber:Ch,Unit:Ig,config:a}),Kg=Jt({BigNumber:Ch,Unit:Ig,config:a}),Jg=Zt({BigNumber:Ch,Unit:Ig,config:a}),ey=er({BigNumber:Ch,Unit:Ig,config:a}),ty=Nt({BigNumber:Ch,Unit:Ig,config:a}),ry=lt({BigNumber:Ch,Unit:Ig,config:a}),ny=Gt({BigNumber:Ch,Unit:Ig,config:a}),iy=Vt({BigNumber:Ch,Unit:Ig,config:a}),sy=pt({BigNumber:Ch,Unit:Ig,config:a}),oy=Qp({DenseMatrix:Yh,divideScalar:og,equalScalar:td,matrix:mf,multiplyScalar:pd,subtract:jm,typed:Zh}),ay=eh({DenseMatrix:Yh,lsolve:lg,lup:hg,matrix:mf,slu:dg,typed:Zh,usolve:oy}),ly=nh({abs:gf,add:Wf,addScalar:Xd,atan:Od,bignumber:Sm,column:vg,complex:id,config:a,cos:af,diag:Af,divideScalar:og,dot:Yf,equal:Ym,flatten:nm,im:gd,inv:Sg,larger:Bf,matrix:mf,matrixFromColumns:Am,multiply:em,multiplyScalar:pd,number:rd,qr:Eg,re:rm,sin:uf,smaller:$f,sqrt:Kd,subtract:jm,typed:Zh,usolve:oy,usolveAll:wg}),uy=sh({abs:gf,map:xd,median:Rg,subtract:jm,typed:Zh}),cy=Rt({BigNumber:Ch,Unit:Ig,config:a}),py=wt({BigNumber:Ch,Unit:Ig,config:a}),hy=ct({BigNumber:Ch,Unit:Ig,config:a}),dy=Et({BigNumber:Ch,Unit:Ig,config:a}),fy=Xt({BigNumber:Ch,Unit:Ig,config:a}),my=Bt({BigNumber:Ch,Unit:Ig,config:a}),gy=Yt({BigNumber:Ch,Unit:Ig,config:a}),yy=vt({BigNumber:Ch,Unit:Ig,config:a}),vy=Qt({BigNumber:Ch,Unit:Ig,config:a}),by=Ct({BigNumber:Ch,Unit:Ig,config:a}),xy=st({BigNumber:Ch,Unit:Ig,config:a}),wy=Ht({BigNumber:Ch,Unit:Ig,config:a}),_y=lh({Unit:Ig,typed:Zh}),Ey=ch({abs:gf,add:Wf,addScalar:Xd,config:a,divideScalar:og,equalScalar:td,flatten:nm,matrix:mf,multiply:em,multiplyScalar:pd,smaller:$f,subtract:jm,typed:Zh}),Sy=ht({BigNumber:Ch,Unit:Ig,config:a}),Ay=zt({BigNumber:Ch,Unit:Ig,config:a}),Ny=yt({BigNumber:Ch,Unit:Ig,config:a}),ky=at({BigNumber:Ch,Unit:Ig,config:a}),My=Tt({BigNumber:Ch,Unit:Ig,config:a}),Cy=dh({abs:gf,add:Wf,conj:Jd,ctranspose:tg,eigs:ly,equalScalar:td,larger:Bf,matrix:mf,multiply:em,pow:am,smaller:$f,sqrt:Kd,typed:Zh}),Ty=dt({BigNumber:Ch,Unit:Ig,config:a}),Oy=Ut({BigNumber:Ch,Unit:Ig,config:a}),Iy=Ot({BigNumber:Ch,Unit:Ig,config:a}),Py=gh({BigNumber:Ch,DenseMatrix:Yh,SparseMatrix:ff,addScalar:Xd,config:a,cos:af,matrix:mf,multiplyScalar:pd,norm:Cy,sin:uf,typed:Zh,unaryMinus:Yd}),Dy=xt({BigNumber:Ch,Unit:Ig,config:a}),Ry=Kt({BigNumber:Ch,Unit:Ig,config:a}),Ly=bh({multiply:em,rotationMatrix:Py,typed:Zh}),qy=_h({add:Wf,divide:Ng,factorial:zm,isInteger:Qh,isPositive:Jh,multiply:em,typed:Zh}),$y=gt({BigNumber:Ch,Unit:Ig,config:a});const By=(e,t,r)=>{Object.defineProperty(e,t,{enumerable:!0,get:r,set:()=>{throw Error(`${t} est en lecture seule`)}})};class zy extends jh{constructor(...e){let t,r,n,i,s,o,a,l,u,c,p,h,d,f,m,g;super(...e),2===e.length?("Fraction"===e[0].type?this.num=Fy(e[0].num||e[0].n*e[0].s,e[0].den||e[0].d):this.num=e[0],"Fraction"===e[1].type?this.den=Fy(e[1].num||e[1].n*e[1].s,e[1].den||e[1].d):this.den=e[1]):(this.num=this.n*this.s,this.den=this.d),By(this,"numIrred",(()=>(t||(t=_x(this.num,this.den)[0]),t))),By(this,"denIrred",(()=>(r||(r=_x(this.num,this.den)[1]),r))),By(this,"pourcentage",(()=>(n||(n=bx(this.s*this.n*100/this.d,2)),n))),By(this,"signe",(()=>(i||(i=this.s),i))),By(this,"signeString",(()=>(s||(s=-1===this.s?"-":"+"),s))),By(this,"texFraction",(()=>(o||(o=`\\dfrac{${this.num}}{${this.den}}`),o))),By(this,"texFSD",(()=>(a||(a=-1===this.s?1===Math.abs(this.den)?"-"+String(Math.abs(this.num)):`-\\dfrac{${Math.abs(this.num)}}{${Math.abs(this.den)}}`:1===Math.abs(this.den)?String(Math.abs(this.num)):`\\dfrac{${Math.abs(this.num)}}{${Math.abs(this.den)}}`),a))),By(this,"texFractionSignee",(()=>(l||(l=-1===this.s?this.texFSD:"+"+this.texFSD),l))),By(this,"texFSP",(()=>(u||(u=this.s>0?this.texFSD:"\\left("+this.texFSD+"\\right)"),u))),By(this,"texFractionSimplifiee",(()=>(c||(c=new zy(this.numIrred,this.denIrred).texFSD),c))),By(this,"ecritureAlgebrique",(()=>(p||(p=1===this.s?"+"+this.texFSD:this.texFSD),p))),By(this,"ecritureParentheseSiNegatif",(()=>(h||(h=1===this.s?this.texFSD:"\\left("+this.texFSD+"\\right)"),h))),By(this,"valeurDecimale",(()=>(d||(d=bx(this.n*this.s/this.d,6)),d))),By(this,"estEntiere",(()=>(f||(f=1===this.d),f))),By(this,"estParfaite",(()=>(m||(m=!1!==this.racineCarree()),m))),By(this,"estIrreductible",(()=>(g||(g=1===yf(this.num,this.den)),g))),this.toLatex=()=>super.toLatex().replace("\\frac","\\dfrac")}}zy.prototype.toFraction=function(){return new jh(this.n*this.s,this.d)},zy.prototype.valeurAbsolue=function(){return Fy(gf(this.n),gf(this.d))},zy.prototype.simplifie=function(){return Fy(this.n*this.s/yf(this.n,this.d),this.d/yf(this.n,this.d))},zy.prototype.oppose=function(){return Fy(-1*this.num,this.den)},zy.prototype.fractionEgale=function(e){return Fy(em(this.num,e),em(this.den,e))},zy.prototype.egal=function(e){return Ym(this,e)},zy.prototype.differenceFraction=function(e){return Fy(jm(this,e))},zy.prototype.multiplieEntier=function(e){return Fy(this.num*e,this.den)},zy.prototype.entierDivise=function(e){return Fy(this.num,e*this.den)},zy.prototype.ajouteEntier=function(e){return Fy(this.num+e*this.den,this.den)},zy.prototype.entierMoinsFraction=function(e){return Fy(e*this.den-this.num,this.den)},zy.prototype.superieurLarge=function(e){return hm(this,e)},zy.prototype.superieurstrict=function(e){return Bf(this,e)},zy.prototype.inferieurstrict=function(e){return $f(this,e)},zy.prototype.inferieurlarge=function(e){return this.n/this.d<e.n/e.d},zy.prototype.estUneSimplification=function(e){return Ym(this,e)&&gf(this.num)<gf(e.num)},zy.prototype.sommeFraction=function(e){return Fy(Wf(this,e))},zy.prototype.sommeFractions=function(...e){let t=Fy(this.s*this.n,this.d);for(const r of e)t=Fy(Wf(t,r));return t.simplifie()},zy.prototype.produitFraction=function(e){return Fy(em(this,e))},zy.prototype.produitFractions=function(...e){let t=Fy(this.s*this.n,this.d);for(const r of e)t=Fy(em(t,r));return t.simplifie()},zy.prototype.texProduitFraction=function(e){return`${this.texFraction}\\times ${e.texFraction}=\\dfrac{${this.num+"\\times"+e.num}}{${this.den+"\\times"+e.den}}=\\dfrac{${this.num*e.num}}{${this.den*e.den}}`},zy.prototype.puissanceFraction=function(e){return Fy(this.num**e,this.den**e)},zy.prototype.inverse=function(){const e=this;return 0!==this.n?new jh(this.den,this.num):(window.notify("Fraction.inverse() : division par zéro",{f:e}),NaN)},zy.prototype.diviseFraction=function(e){return this.produitFraction(e.inverse())},zy.prototype.diviseEntier=function(e){return new jh(e*this.d,this.n)},zy.prototype.texQuotientFraction=function(e){return`${this.texFraction}\\div ${e.texFraction}=${this.texFraction}\\times ${e.inverse().texFraction}=\\dfrac{${this.num+"\\times"+e.den}}{${this.den+"\\times"+e.num}}=\\dfrac{${this.num*e.den}}{${this.den*e.num}}`},zy.prototype.fractionDecimale=function(){const e=this,t=this.simplifie().d,r=this.simplifie().n,n=this.simplifie().s,i=Ex(t);let s=0,o=0;for(const a of i)if(2===a)s++;else{if(5!==a)return window.notify("Fraction.valeurDecimale : Fraction non décimale",{f:e}),NaN;o++}return o===s?Fy(r*n,t):o>s?Fy(n*r*2**(o-s),t*2**(o-s)):Fy(n*r*5**(s-o),t*5**(s-o))},zy.prototype.texRacineCarree=function(e=!1){if(-1===this.s)return!1;let t,r,n=Ax(Math.abs(this.den));r=1!==this.d?e?`\\sqrt{\\dfrac{${this.num}}{${this.den}}}=`:"":1!==t[0]&&e?`\\sqrt{${this.num}}=`:"",1!==n[1]?(1!==this.d&&(r+=e?`\\sqrt{\\dfrac{${Math.abs(this.num)}\\times ${n[1]}}{${Math.abs(this.den)}\\times ${n[1]}}}=`:"",r+=e?`\\sqrt{\\dfrac{${Math.abs(this.num*n[1])}}{${Math.abs(this.den*n[1])}}}=`:""),t=Ax(Math.abs(this.num*n[1])),n=Ax(Math.abs(this.den*n[1]))):t=Ax(Math.abs(this.num));const i=Fy(t[0],n[0]).simplifie(),s=Fy(t[1],n[1]).simplifie();return e&&1!==i.valeurDecimale&&(1===i.d?(r+=e?`\\sqrt{${t[0]}^2\\times${t[1]}}=`:"",r+=e?`${t[0]}${1!==t[1]?"\\sqrt{"+t[1]+"}":"}"}`:""):1!==t[0]?(r+=e?`\\sqrt{\\dfrac{${t[0]}^2${1!==t[1]?"\\times "+t[1]:""}}{${n[0]}^2${1!==n[1]?"\\times"+n[1]:""}}}=`:"",r+=e?`\\dfrac{${t[0]}${1!==t[1]?"\\times\\sqrt{"+t[1]+"}":""}}{${n[0]}${1!==n[1]?"\\times\\sqrt{"+n[1]+"}":""}}=`:""):1!==n[1]?r+=e?`\\sqrt{\\dfrac{${t[1]}}{${n[0]}^2\\times ${n[1]}}}=`:"":r+=e?`\\sqrt{\\dfrac{${t[1]}}{${n[0]}^2}}=`:""),1===bx(t[1]/n[1],6)?r+i.texFraction:1===i.n&&1!==i.d&&1===s.d?1===i.valeurDecimale?r:r+`\\dfrac{\\sqrt{${s.n}}}{${i.d}}`:(1===i.valeurDecimale?r:r+i.texFraction)+`\\sqrt{${s.toLatex()}}`},zy.prototype.racineCarree=function(){const e=Ax(Math.abs(this.num)),t=Ax(Math.abs(this.den)),r=Fy(e[0],t[0]).simplifie();return 1===Fy(e[1],t[1]).simplifie().valeurDecimale&&-1!==this.s&&r},zy.prototype.representationIrred=function(e,t,r,n=0,i="gateau",s="gray",o=0,a=1,l=1,u=""){let c,p,h,d,f,m,g;const y=[],v=dx(this.numIrred,this.denIrred);if(c=this.numIrred,"gateau"===i){for(p=0;p<v;p++){m=zx(e+2*p*(r+.5),t),g=u_(m,r),y.push(g);for(let n=0;n<this.denIrred;n++)d=$w(m,j_(zx(e+r+2*p*(r+.5),t),m,90-360*n/this.denIrred)),y.push(d);h=j_(zx(e+r+2*p*(r+.5),t),m,90-360*n/this.denIrred);for(let e=0;e<Math.min(this.denIrred,c);e++)f=y_(h,m,-360/this.denIrred,!0,s),f.opacite=.3,h=j_(h,m,-360/this.denIrred),y.push(f);c-=this.denIrred}if(this.n%this.d!=0){m=zx(e+2*p*(r+.5),t),g=u_(m,r),y.push(g);for(let n=0;n<this.denIrred;n++)d=$w(m,j_(zx(e+r+2*p*(r+.5),t),m,90-360*n/this.denIrred)),y.push(d);h=j_(zx(e+r+2*p*(r+.5),t),m,90-360*n/this.denIrred);for(let e=0;e<Math.min(this.denIrred,c);e++)f=y_(h,m,-360/this.denIrred,!0,s),f.opacite=.3,h=j_(h,m,-360/this.denIrred),y.push(f)}}else if("segment"===i){for(p=0;p<v;p++){m=zx(e+p*r,t),g=F_(m,Dw(r,0)),d=$w(m,g),d.styleExtremites="-|",y.push(d);for(let e=0;e<this.denIrred;e++)d=$w(F_(m,Dw(e*r/this.denIrred,0)),F_(m,Dw((e+1)*r/this.denIrred,0))),d.styleExtremites="|-",y.push(d);f=$w(m,zx(m.x+Math.min(c,this.denIrred)*r/this.denIrred,m.y)),f.color=s,f.opacite=.4,f.epaisseur=6,y.push(f),c-=this.denIrred}m=zx(e+p*r,t),g=F_(m,Dw(r,0)),d=$w(m,g),d.styleExtremites="-|",y.push(d);for(let e=0;e<this.denIrred;e++)d=$w(F_(m,Dw(e*r/this.denIrred,0)),F_(m,Dw((e+1)*r/this.denIrred,0))),d.styleExtremites="|-",y.push(d);if(f=$w(m,zx(m.x+Math.min(this.numIrred,this.denIrred)*r/this.denIrred,m.y)),f.color=s,f.opacite=.4,f.epaisseur=6,y.push(f),y.push(function(e,t,r="black",n=1){const i=$w(zx(e,t+.2),zx(e,t-.2));return i.color=r,i.epaisseur=n,i}(e,t)),"number"==typeof o&&"number"==typeof a)for(p=0;p<=v+1;p++)y.push(HS(o+p*(a-o),e+r*p,t-.6,"milieu","black",l));else""!==o&&y.push(HS(o,e,t-.6,"milieu","black",l)),""!==a&&y.push(HS(a,e+r,t-.6,"milieu","black",l)),""!==u&&y.push(HS(u,e+r*this.numIrred/this.denIrred,t-.6,"milieu","black",l))}else{let n;for(n=this.denIrred%6==0?6:this.denIrred%5==0?5:this.denIrred%4==0?4:this.denIrred%3==0?3:this.denIrred%2==0?2:1,p=0;p<v;p++){for(let i=0;i<n;i++)for(let o=0;o<bx(this.denIrred/n);o++)m=zx(e+p*(r+1)+i*r/n,t+o*r/n),g=F_(m,Dw(r/n,0)),h=Ww(m,g),h.color="black",h.couleurDeRemplissage=s,h.opaciteDeRemplissage=.4,y.push(h);c-=this.d}if(c>0){for(let i=0;i<n;i++)for(let s=0;s<bx(this.denIrred/n);s++)m=zx(e+p*(r+1)+i*r/n,t+s*r/n),g=F_(m,Dw(r/n,0)),h=Ww(m,g),h.color="black",y.push(h);for(let i=0;i<c;i++)m=zx(e+p*(r+1)+i%n*r/n,t+dx(i,n)*r/n),g=F_(m,Dw(r/n,0)),h=Ww(m,g),h.color="black",h.couleurDeRemplissage=s,h.opaciteDeRemplissage=.4,y.push(h)}}return y},zy.prototype.representation=function(e,t,r,n=0,i="gateau",s="gray",o=0,a=1,l=1,u=""){const c=[];let p,h,d,f,m,g,y;const v=dx(this.num,this.den);if(p=this.num,"gateau"===i){for(h=0;h<v;h++){const i=zx(e+2*h*(r+.5),t),o=u_(i,r);let a,l;c.push(o);for(let n=0;n<this.den;n++)a=$w(i,j_(zx(e+r+2*h*(r+.5),t),i,90-360*n/this.den)),c.push(a);d=j_(zx(e+r+2*h*(r+.5),t),i,90-360*n/this.den);for(let e=0;e<Math.min(this.den,p);e++)l=y_(d,i,-360/this.den,!0,s),l.opacite=.3,d=j_(d,i,-360/this.den),c.push(l);p-=this.den}if(this.num%this.den!=0){const i=zx(e+2*h*(r+.5),t),o=u_(i,r);c.push(o);for(let n=0;n<this.den;n++)f=$w(i,j_(zx(e+r+2*h*(r+.5),t),i,90-360*n/this.den)),c.push(f);if(d=j_(zx(e+r+2*h*(r+.5),t),i,90-360*n/this.den),this.num%this.den!=0)for(let e=0;e<Math.min(this.den,p);e++)m=y_(d,i,-360/this.den,!0,s),m.opacite=.3,d=j_(d,i,-360/this.den),c.push(m)}}else if("segment"===i){for(h=0;h<v;h++){g=zx(e+h*r,t),y=F_(g,Dw(r,0)),f=$w(g,y),f.styleExtremites="-|",c.push(f);for(let e=0;e<this.den;e++)f=$w(F_(g,Dw(e*r/this.den,0)),F_(g,Dw((e+1)*r/this.den,0))),f.styleExtremites="|-",c.push(f);m=$w(g,zx(g.x+Math.min(p,this.den)*r/this.den,g.y)),m.color=s,m.opacite=.4,m.epaisseur=6,c.push(m),p-=this.den}g=zx(e+h*r,t),y=F_(g,Dw(r,0)),f=$w(g,y),f.styleExtremites="-|",c.push(f);for(let e=0;e<this.den;e++)f=$w(F_(g,Dw(e*r/this.den,0)),F_(g,Dw((e+1)*r/this.den,0))),f.styleExtremites="|-",c.push(f);if(m=$w(g,zx(g.x+Math.min(p,this.den)*r/this.den,g.y)),m.color=s,m.opacite=.4,m.epaisseur=6,c.push(m),c.push(function(e,t,r="black",n=1){const i=$w(zx(e,t+.2),zx(e,t-.2));return i.color=r,i.epaisseur=n,i}(e,t)),"number"==typeof o&&"number"==typeof a)for(h=0;h<=v+1;h++)c.push(HS(o+h*(a-o),e+r*h,t-.6,"milieu","black",l));else""!==o&&c.push(HS(o,e,t-.6,"milieu","black",l)),""!==a&&c.push(HS(a,e+r,t-.6,"milieu","black",l)),""!==u&&c.push(HS(u,e+r*this.num/this.den,t-.6,"milieu","black",l))}else{let n;for(n=this.den%6==0?6:this.den%5==0?5:this.den%4==0?4:this.den%3==0?3:this.den%2==0?2:1,h=0;h<v;h++){for(let i=0;i<n;i++)for(let o=0;o<bx(this.den/n);o++)g=zx(e+h*(r+1)+i*r/n,t+o*r/n),y=F_(g,Dw(r/n,0)),d=Ww(g,y),d.color="black",d.couleurDeRemplissage=s,d.opaciteDeRemplissage=.4,c.push(d);p-=this.den}if(p>0){for(let i=0;i<n;i++)for(let s=0;s<bx(this.den/n);s++)g=zx(e+h*(r+1)+i*r/n,t+s*r/n),y=F_(g,Dw(r/n,0)),d=Ww(g,y),d.color="black",c.push(d);for(let i=0;i<p;i++)g=zx(e+h*(r+1)+i%n*r/n,t+dx(i,n)*r/n),y=F_(g,Dw(r/n,0)),d=Ww(g,y),d.color="black",d.couleurDeRemplissage=s,d.opaciteDeRemplissage=.4,c.push(d)}}return c};function Fy(e,t){return"Fraction"===e.type&&void 0===t||"number"==typeof e&&void 0===t?new zy(e):"number"==typeof e&&"number"==typeof t?new zy(e,t):"string"==typeof e?new zy(e):"Fraction"===e.type&&"Fraction"===t.type?new zy(e,t):void 0}var Uy=__webpack_require__(13786),jy=__webpack_require__.n(Uy),Gy=new Set(["end"]),Vy=K("Node",["mathWithTransform"],(e=>{var{mathWithTransform:t}=e;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.evaluate=function(e){return this.compile().evaluate(e)},r.prototype.type="Node",r.prototype.isNode=!0,r.prototype.comment="",r.prototype.compile=function(){var e=this._compile(t,{}),r={};return{evaluate:function(t){var n=Xr(t);return function(e){for(var t of[...Gy])if(e.has(t))throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(n),e(n,r,null)}}},r.prototype._compile=function(e,t){throw new Error("Method _compile should be implemented by type "+this.type)},r.prototype.forEach=function(e){throw new Error("Cannot run forEach on a Node interface")},r.prototype.map=function(e){throw new Error("Cannot run map on a Node interface")},r.prototype._ifNode=function(e){if(!z(e))throw new TypeError("Callback function must return a Node");return e},r.prototype.traverse=function(e){e(this,null,null),function e(t,r){t.forEach((function(t,n,i){r(t,n,i),e(t,r)}))}(this,e)},r.prototype.transform=function(e){return function t(r,n,i){var s=e(r,n,i);return s!==r?s:r.map(t)}(this,null,null)},r.prototype.filter=function(e){var t=[];return this.traverse((function(r,n,i){e(r,n,i)&&t.push(r)})),t},r.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},r.prototype.cloneDeep=function(){return this.map((function(e){return e.cloneDeep()}))},r.prototype.equals=function(e){return!!e&&Z(this,e)},r.prototype.toString=function(e){var t=this._getCustomString(e);return void 0!==t?t:this._toString(e)},r.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},r.prototype.toHTML=function(e){var t=this._getCustomString(e);return void 0!==t?t:this.toHTML(e)},r.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},r.prototype.toTex=function(e){var t=this._getCustomString(e);return void 0!==t?t:this._toTex(e)},r.prototype._toTex=function(e){throw new Error("_toTex not implemented for "+this.type)},r.prototype._getCustomString=function(e){if(e&&"object"==typeof e)switch(typeof e.handler){case"object":case"undefined":return;case"function":return e.handler(this,e);default:throw new TypeError("Object or function expected as callback")}},r.prototype.getIdentifier=function(){return this.type},r.prototype.getContent=function(){return this},r}),{isClass:!0,isNode:!0}),Hy=K("ArrayNode",["Node"],(e=>{var{Node:t}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=e||[],!Array.isArray(this.items)||!this.items.every(z))throw new TypeError("Array containing Nodes expected")}return r.prototype=new t,r.prototype.type="ArrayNode",r.prototype.isArrayNode=!0,r.prototype._compile=function(e,t){var r=Tr(this.items,(function(r){return r._compile(e,t)}));if("Array"!==e.config.matrix){var n=e.matrix;return function(e,t,i){return n(Tr(r,(function(r){return r(e,t,i)})))}}return function(e,t,n){return Tr(r,(function(r){return r(e,t,n)}))}},r.prototype.forEach=function(e){for(var t=0;t<this.items.length;t++){e(this.items[t],"items["+t+"]",this)}},r.prototype.map=function(e){for(var t=[],n=0;n<this.items.length;n++)t[n]=this._ifNode(e(this.items[n],"items["+n+"]",this));return new r(t)},r.prototype.clone=function(){return new r(this.items.slice(0))},r.prototype._toString=function(e){return"["+this.items.map((function(t){return t.toString(e)})).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},r.fromJSON=function(e){return new r(e.items)},r.prototype.toHTML=function(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map((function(t){return t.toHTML(e)})).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},r.prototype._toTex=function(e){return function t(r,n){var i=r.some(O)&&!r.every(O),s=n||i,o=s?"&":"\\\\",a=r.map((function(r){return r.items?t(r.items,!n):r.toTex(e)})).join(o);return i||!s||s&&!n?"\\begin{bmatrix}"+a+"\\end{bmatrix}":a}(this.items,!1)},r}),{isClass:!0,isNode:!0}),Wy=K("BlockNode",["ResultSet","Node"],(e=>{var{ResultSet:t,Node:r}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map((function(e){var t=e&&e.node,r=!e||void 0===e.visible||e.visible;if(!z(t))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof r)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:r}}))}return n.prototype=new r,n.prototype.type="BlockNode",n.prototype.isBlockNode=!0,n.prototype._compile=function(e,r){var n=Tr(this.blocks,(function(t){return{evaluate:t.node._compile(e,r),visible:t.visible}}));return function(e,r,i){var s=[];return Or(n,(function(t){var n=t.evaluate(e,r,i);t.visible&&s.push(n)})),new t(s)}},n.prototype.forEach=function(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)},n.prototype.map=function(e){for(var t=[],r=0;r<this.blocks.length;r++){var i=this.blocks[r],s=this._ifNode(e(i.node,"blocks["+r+"].node",this));t[r]={node:s,visible:i.visible}}return new n(t)},n.prototype.clone=function(){return new n(this.blocks.map((function(e){return{node:e.node,visible:e.visible}})))},n.prototype._toString=function(e){return this.blocks.map((function(t){return t.node.toString(e)+(t.visible?"":";")})).join("\n")},n.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},n.fromJSON=function(e){return new n(e.blocks)},n.prototype.toHTML=function(e){return this.blocks.map((function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>')})).join('<span class="math-separator"><br /></span>')},n.prototype._toTex=function(e){return this.blocks.map((function(t){return t.node.toTex(e)+(t.visible?"":";")})).join("\\;\\;\n")},n}),{isClass:!0,isNode:!0}),Yy=__webpack_require__(43770),Xy={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Zy={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},Qy={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Zy.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Zy.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Zy.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Zy.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Zy.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Zy.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Zy.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Zy.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Zy.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Zy.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Zy.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Zy.bitAnd,"${args[1]}\\right)")},bitNot:{1:Zy.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Zy.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Zy.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Zy.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Zy.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Zy.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Zy.and,"${args[1]}\\right)")},not:{1:Zy.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Zy.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Zy.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Zy.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(Zy.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Zy.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Zy.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Zy.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Zy.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Zy.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Zy.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Zy.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Zy.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Zy.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Xy.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Ky={deg:"^\\circ"};function Jy(e){return Yy(e,{preserveFormatting:!0})}function ev(e,t){return(t=void 0!==t&&t)?Q(Ky,e)?Ky[e]:"\\mathrm{"+Jy(e)+"}":Q(Xy,e)?Xy[e]:Jy(e)}var tv=K("ConstantNode",["Node"],(e=>{var{Node:t}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.value=e}return r.prototype=new t,r.prototype.type="ConstantNode",r.prototype.isConstantNode=!0,r.prototype._compile=function(e,t){var r=this.value;return function(){return r}},r.prototype.forEach=function(e){},r.prototype.map=function(e){return this.clone()},r.prototype.clone=function(){return new r(this.value)},r.prototype._toString=function(e){return ur(this.value,e)},r.prototype.toHTML=function(e){var t=this._toString(e);switch(W(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}},r.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},r.fromJSON=function(e){return new r(e.value)},r.prototype._toTex=function(e){var t=this._toString(e);switch(W(this.value)){case"string":return"\\mathtt{"+Jy(t)+"}";case"number":case"BigNumber":if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var r=t.toLowerCase().indexOf("e");return-1!==r?t.substring(0,r)+"\\cdot10^{"+t.substring(r+1)+"}":t;case"Fraction":return this.value.toLatex();default:return t}},r}),{isClass:!0,isNode:!0}),rv=K("ObjectNode",["Node"],(e=>{var{Node:t}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=e||{},e&&("object"!=typeof e||!Object.keys(e).every((function(t){return z(e[t])}))))throw new TypeError("Object containing Nodes expected")}return r.prototype=new t,r.prototype.type="ObjectNode",r.prototype.isObjectNode=!0,r.prototype._compile=function(e,t){var r={};for(var n in this.properties)if(Q(this.properties,n)){var i=cr(n),s=JSON.parse(i);if(!Ur(this.properties,s))throw new Error('No access to property "'+s+'"');r[s]=this.properties[n]._compile(e,t)}return function(e,t,n){var i={};for(var s in r)Q(r,s)&&(i[s]=r[s](e,t,n));return i}},r.prototype.forEach=function(e){for(var t in this.properties)Q(this.properties,t)&&e(this.properties[t],"properties["+cr(t)+"]",this)},r.prototype.map=function(e){var t={};for(var n in this.properties)Q(this.properties,n)&&(t[n]=this._ifNode(e(this.properties[n],"properties["+cr(n)+"]",this)));return new r(t)},r.prototype.clone=function(){var e={};for(var t in this.properties)Q(this.properties,t)&&(e[t]=this.properties[t]);return new r(e)},r.prototype._toString=function(e){var t=[];for(var r in this.properties)Q(this.properties,r)&&t.push(cr(r)+": "+this.properties[r].toString(e));return"{"+t.join(", ")+"}"},r.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},r.fromJSON=function(e){return new r(e.properties)},r.prototype.toHTML=function(e){var t=[];for(var r in this.properties)Q(this.properties,r)&&t.push('<span class="math-symbol math-property">'+pr(r)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[r].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},r.prototype._toTex=function(e){var t=[];for(var r in this.properties)Q(this.properties,r)&&t.push("\\mathbf{"+r+":} & "+this.properties[r].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(t.join("\n"),"\\end{array}\\right\\}")},r}),{isClass:!0,isNode:!0}),nv=K("ParenthesisNode",["Node"],(e=>{var{Node:t}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!z(e))throw new TypeError('Node expected for parameter "content"');this.content=e}return r.prototype=new t,r.prototype.type="ParenthesisNode",r.prototype.isParenthesisNode=!0,r.prototype._compile=function(e,t){return this.content._compile(e,t)},r.prototype.getContent=function(){return this.content.getContent()},r.prototype.forEach=function(e){e(this.content,"content",this)},r.prototype.map=function(e){return new r(e(this.content,"content",this))},r.prototype.clone=function(){return new r(this.content)},r.prototype._toString=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)},r.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},r.fromJSON=function(e){return new r(e.content)},r.prototype.toHTML=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)},r.prototype._toTex=function(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)},r}),{isClass:!0,isNode:!0}),iv=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function sv(e,t){var r=e;"keep"!==t&&(r=e.getContent());for(var n=r.getIdentifier(),i=0;i<iv.length;i++)if(n in iv[i])return i;return null}function ov(e,t){var r=e;"keep"!==t&&(r=e.getContent());var n=r.getIdentifier(),i=sv(r,t);if(null===i)return null;var s=iv[i][n];if(Q(s,"associativity")){if("left"===s.associativity)return"left";if("right"===s.associativity)return"right";throw Error("'"+n+"' has the invalid associativity '"+s.associativity+"'.")}return null}function av(e,t,r){var n="keep"!==r?e.getContent():e,i="keep"!==r?e.getContent():t,s=n.getIdentifier(),o=i.getIdentifier(),a=sv(n,r);if(null===a)return null;var l=iv[a][s];if(Q(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===o)return!0;return!1}return null}var lv=K("RelationalNode",["Node"],(e=>{var{Node:t}=e;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw new TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t}return r.prototype=new t,r.prototype.type="RelationalNode",r.prototype.isRelationalNode=!0,r.prototype._compile=function(e,t){var r=this,n=this.params.map((r=>r._compile(e,t)));return function(t,i,s){for(var o,a=n[0](t,i,s),l=0;l<r.conditionals.length;l++){if(o=a,a=n[l+1](t,i,s),!zr(e,r.conditionals[l])(o,a))return!1}return!0}},r.prototype.forEach=function(e){this.params.forEach(((t,r)=>e(t,"params["+r+"]",this)),this)},r.prototype.map=function(e){return new r(this.conditionals.slice(),this.params.map(((t,r)=>this._ifNode(e(t,"params["+r+"]",this))),this))},r.prototype.clone=function(){return new r(this.conditionals,this.params)},r.prototype._toString=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=sv(this,t),n=this.params.map((function(n,i){var s=sv(n,t);return"all"===t||null!==s&&s<=r?"("+n.toString(e)+")":n.toString(e)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},s=n[0],o=0;o<this.conditionals.length;o++)s+=" "+i[this.conditionals[o]]+" "+n[o+1];return s},r.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},r.fromJSON=function(e){return new r(e.conditionals,e.params)},r.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=sv(this,t),n=this.params.map((function(n,i){var s=sv(n,t);return"all"===t||null!==s&&s<=r?'<span class="math-parenthesis math-round-parenthesis">(</span>'+n.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':n.toHTML(e)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},s=n[0],o=0;o<this.conditionals.length;o++)s+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pr(i[this.conditionals[o]])+"</span>"+n[o+1];return s},r.prototype._toTex=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=sv(this,t),n=this.params.map((function(n,i){var s=sv(n,t);return"all"===t||null!==s&&s<=r?"\\left("+n.toTex(e)+"\right)":n.toTex(e)})),i=n[0],s=0;s<this.conditionals.length;s++)i+=Zy[this.conditionals[s]]+n[s+1];return i},r}),{isClass:!0,isNode:!0}),uv=K("Chain",["?on","math"],(e=>{var{on:t,math:r}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");H(e)?this.value=e.value:this.value=e}function i(e,t){var r,i,o,a,l;r=n.prototype,i=e,o=function(){var e=t();if("function"==typeof e)return s(e)},l=!0,Object.defineProperty(r,i,{get:function(){return l&&(a=o(),l=!1),a},set:function(e){a=e,l=!1},configurable:!0,enumerable:!0})}function s(e){return function(){for(var t=[this.value],r=0;r<arguments.length;r++)t[r+1]=arguments[r];return new n(e.apply(e,t))}}n.prototype.type="Chain",n.prototype.isChain=!0,n.prototype.done=function(){return this.value},n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return ur(this.value)},n.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},n.fromJSON=function(e){return new n(e.value)},n.createProxy=function(e,t){if("string"==typeof e)l=e,"function"==typeof(u=t)&&(n.prototype[l]=s(u));else{var r=function(t){Q(e,t)&&void 0===o[t]&&i(t,(()=>e[t]))};for(var a in e)r(a)}var l,u};var o={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return n.createProxy(r),t&&t("import",(function(e,t,r){r||i(e,t)})),n}),{isClass:!0}),cv=K("reviver",["classes"],(e=>{var{classes:t}=e;return function(e,r){var n=t[r&&r.mathjs];return n&&"function"==typeof n.fromJSON?n.fromJSON(r):r}})),pv=K("ConditionalNode",["Node"],(e=>{var{Node:t}=e;function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!z(e))throw new TypeError("Parameter condition must be a Node");if(!z(t))throw new TypeError("Parameter trueExpr must be a Node");if(!z(n))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=n}return r.prototype=new t,r.prototype.type="ConditionalNode",r.prototype.isConditionalNode=!0,r.prototype._compile=function(e,t){var r=this.condition._compile(e,t),n=this.trueExpr._compile(e,t),i=this.falseExpr._compile(e,t);return function(e,t,s){return function(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e)return!!e;if(e){if(u(e))return!e.isZero();if(c(e))return!(!e.re&&!e.im);if(h(e))return!!e.value}if(null==e)return!1;throw new TypeError('Unsupported type of condition "'+W(e)+'"')}(r(e,t,s))?n(e,t,s):i(e,t,s)}},r.prototype.forEach=function(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)},r.prototype.map=function(e){return new r(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))},r.prototype.clone=function(){return new r(this.condition,this.trueExpr,this.falseExpr)},r.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=sv(this,t),n=this.condition.toString(e),i=sv(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=r)&&(n="("+n+")");var s=this.trueExpr.toString(e),o=sv(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=r)&&(s="("+s+")");var a=this.falseExpr.toString(e),l=sv(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==l&&l<=r)&&(a="("+a+")"),n+" ? "+s+" : "+a},r.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},r.fromJSON=function(e){return new r(e.condition,e.trueExpr,e.falseExpr)},r.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=sv(this,t),n=this.condition.toHTML(e),i=sv(this.condition,t);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=r)&&(n='<span class="math-parenthesis math-round-parenthesis">(</span>'+n+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.trueExpr.toHTML(e),o=sv(this.trueExpr,t);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=r)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.falseExpr.toHTML(e),l=sv(this.falseExpr,t);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==l&&l<=r)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n+'<span class="math-operator math-conditional-operator">?</span>'+s+'<span class="math-operator math-conditional-operator">:</span>'+a},r.prototype._toTex=function(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},r}),{isClass:!0,isNode:!0}),hv=K("OperatorNode",["Node"],(e=>{var{Node:t}=e;function r(e,t,n,i,s){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('string expected for parameter "op"');if("string"!=typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(n)||!n.every(z))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.isPercentage=!0===s,this.op=e,this.fn=t,this.args=n||[]}function n(e,t,r,n,i){var s,o=sv(e,t),a=ov(e,t);if("all"===t||n.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return n.map((function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}));switch(n.length){case 0:s=[];break;case 1:var l=sv(n[0],t);if(i&&null!==l){var u,c;if("keep"===t?(u=n[0].getIdentifier(),c=e.getIdentifier()):(u=n[0].getContent().getIdentifier(),c=e.getContent().getIdentifier()),!1===iv[o][c].latexLeftParens){s=[!1];break}if(!1===iv[l][u].latexParens){s=[!1];break}}if(null===l){s=[!1];break}if(l<=o){s=[!0];break}s=[!1];break;case 2:var p,h,d=sv(n[0],t),f=av(e,n[0],t);p=null!==d&&(d===o&&"right"===a&&!f||d<o);var m,g,y,v=sv(n[1],t),b=av(e,n[1],t);if(h=null!==v&&(v===o&&"left"===a&&!b||v<o),i)"keep"===t?(m=e.getIdentifier(),g=e.args[0].getIdentifier(),y=e.args[1].getIdentifier()):(m=e.getContent().getIdentifier(),g=e.args[0].getContent().getIdentifier(),y=e.args[1].getContent().getIdentifier()),null!==d&&(!1===iv[o][m].latexLeftParens&&(p=!1),!1===iv[d][g].latexParens&&(p=!1)),null!==v&&(!1===iv[o][m].latexRightParens&&(h=!1),!1===iv[v][y].latexParens&&(h=!1));s=[p,h];break;default:"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier()||(s=n.map((function(r){var n=sv(r,t),i=av(e,r,t),s=ov(r,t);return null!==n&&(o===n&&a===s&&!i||n<o)})))}return n.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"auto"===t&&"hide"===r&&(s=n.map((function(e,t){var r="ParenthesisNode"===e.getIdentifier();return!(!s[t]&&!r)}))),s}return r.prototype=new t,r.prototype.type="OperatorNode",r.prototype.isOperatorNode=!0,r.prototype._compile=function(e,t){if("string"!=typeof this.fn||!jr(e,this.fn))throw e[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var r=zr(e,this.fn),n=Tr(this.args,(function(r){return r._compile(e,t)}));if(1===n.length){var i=n[0];return function(e,t,n){return r(i(e,t,n))}}if(2===n.length){var s=n[0],o=n[1];return function(e,t,n){return r(s(e,t,n),o(e,t,n))}}return function(e,t,i){return r.apply(null,Tr(n,(function(r){return r(e,t,i)})))}},r.prototype.forEach=function(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},r.prototype.map=function(e){for(var t=[],n=0;n<this.args.length;n++)t[n]=this._ifNode(e(this.args[n],"args["+n+"]",this));return new r(this.op,this.fn,t,this.implicit,this.isPercentage)},r.prototype.clone=function(){return new r(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)},r.prototype.isUnary=function(){return 1===this.args.length},r.prototype.isBinary=function(){return 2===this.args.length},r.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=e&&e.implicit?e.implicit:"hide",i=this.args,s=n(this,t,r,i,!1);if(1===i.length){var o=ov(this,t),a=i[0].toString(e);s[0]&&(a="("+a+")");var l=/[a-zA-Z]+/.test(this.op);return"right"===o?this.op+(l?" ":"")+a:"left"===o?a+(l?" ":"")+this.op:a+this.op}if(2===i.length){var u=i[0].toString(e),c=i[1].toString(e);return s[0]&&(u="("+u+")"),s[1]&&(c="("+c+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?u+" "+c:u+" "+this.op+" "+c}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var p=i.map((function(t,r){return t=t.toString(e),s[r]&&(t="("+t+")"),t}));return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?p.join(" "):p.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},r.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}},r.fromJSON=function(e){return new r(e.op,e.fn,e.args,e.implicit,e.isPercentage)},r.prototype.toHTML=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=e&&e.implicit?e.implicit:"hide",i=this.args,s=n(this,t,r,i,!1);if(1===i.length){var o=ov(this,t),a=i[0].toHTML(e);return s[0]&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===o?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+pr(this.op)+"</span>"+a:a+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+pr(this.op)+"</span>"}if(2===i.length){var l=i[0].toHTML(e),u=i[1].toHTML(e);return s[0]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s[1]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?l+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+u:l+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pr(this.op)+"</span>"+u}var c=i.map((function(t,r){return t=t.toHTML(e),s[r]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t}));return i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?c.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):c.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+pr(this.op)+"</span>"):'<span class="math-function">'+pr(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},r.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=e&&e.implicit?e.implicit:"hide",i=this.args,s=n(this,t,r,i,!0),o=Zy[this.fn];if(o=void 0===o?this.op:o,1===i.length){var a=ov(this,t),l=i[0].toTex(e);return s[0]&&(l="\\left(".concat(l,"\\right)")),"right"===a?o+l:l+o}if(2===i.length){var u=i[0],c=u.toTex(e);s[0]&&(c="\\left(".concat(c,"\\right)"));var p,h=i[1].toTex(e);switch(s[1]&&(h="\\left(".concat(h,"\\right)")),p="keep"===t?u.getIdentifier():u.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return o+"{"+c+"}{"+h+"}";case"OperatorNode:pow":switch(c="{"+c+"}",h="{"+h+"}",p){case"ConditionalNode":case"OperatorNode:divide":c="\\left(".concat(c,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===r)return c+"~"+h}return c+o+h}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var d=i.map((function(t,r){return t=t.toTex(e),s[r]&&(t="\\left(".concat(t,"\\right)")),t}));return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?d.join("~"):d.join(o)}return"\\mathrm{"+this.fn+"}\\left("+i.map((function(t){return t.toTex(e)})).join(",")+"\\right)"},r.prototype.getIdentifier=function(){return this.type+":"+this.fn},r}),{isClass:!0,isNode:!0}),dv=K("RangeNode",["Node"],(e=>{var{Node:t}=e;function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!z(e))throw new TypeError("Node expected");if(!z(t))throw new TypeError("Node expected");if(n&&!z(n))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=n||null}function n(e,t){var r=sv(e,t),n={},i=sv(e.start,t);if(n.start=null!==i&&i<=r||"all"===t,e.step){var s=sv(e.step,t);n.step=null!==s&&s<=r||"all"===t}var o=sv(e.end,t);return n.end=null!==o&&o<=r||"all"===t,n}return r.prototype=new t,r.prototype.type="RangeNode",r.prototype.isRangeNode=!0,r.prototype.needsEnd=function(){return this.filter((function(e){return V(e)&&"end"===e.name})).length>0},r.prototype._compile=function(e,t){var r=e.range,n=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var s=this.step._compile(e,t);return function(e,t,o){return r(n(e,t,o),i(e,t,o),s(e,t,o))}}return function(e,t,s){return r(n(e,t,s),i(e,t,s))}},r.prototype.forEach=function(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)},r.prototype.map=function(e){return new r(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))},r.prototype.clone=function(){return new r(this.start,this.end,this.step&&this.step)},r.prototype._toString=function(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toString(e);if(r.start&&(i="("+i+")"),t=i,this.step){var s=this.step.toString(e);r.step&&(s="("+s+")"),t+=":"+s}var o=this.end.toString(e);return r.end&&(o="("+o+")"),t+=":"+o},r.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r.prototype.toHTML=function(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep"),i=this.start.toHTML(e);if(r.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=i,this.step){var s=this.step.toHTML(e);r.step&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+s}var o=this.end.toHTML(e);return r.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+o},r.prototype._toTex=function(e){var t=n(this,e&&e.parenthesis?e.parenthesis:"keep"),r=this.start.toTex(e);if(t.start&&(r="\\left(".concat(r,"\\right)")),this.step){var i=this.step.toTex(e);t.step&&(i="\\left(".concat(i,"\\right)")),r+=":"+i}var s=this.end.toTex(e);return t.end&&(s="\\left(".concat(s,"\\right)")),r+=":"+s},r}),{isClass:!0,isNode:!0}),fv=K("FunctionAssignmentNode",["typed","Node"],(e=>{var{typed:t,Node:r}=e;function n(e,t,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!z(r))throw new TypeError('Node expected for parameter "expr"');if(Gy.has(e))throw new Error('Illegal function name, "'+e+'" is a reserved keyword');this.name=e,this.params=t.map((function(e){return e&&e.name||e})),this.types=t.map((function(e){return e&&e.type||"any"})),this.expr=r}function i(e,t){var r=sv(e,t),n=sv(e.expr,t);return"all"===t||null!==n&&n<=r}return n.prototype=new r,n.prototype.type="FunctionAssignmentNode",n.prototype.isFunctionAssignmentNode=!0,n.prototype._compile=function(e,r){var n=Object.create(r);Or(this.params,(function(e){n[e]=!0}));var i=this.expr._compile(e,n),s=this.name,o=this.params,a=Dr(this.types,","),l=s+"("+Dr(this.params,", ")+")";return function(e,r,n){var u={};u[a]=function(){for(var t=Object.create(r),s=0;s<o.length;s++)t[o[s]]=arguments[s];return i(e,t,n)};var c=t(s,u);return c.syntax=l,e.set(s,c),c}},n.prototype.forEach=function(e){e(this.expr,"expr",this)},n.prototype.map=function(e){var t=this._ifNode(e(this.expr,"expr",this));return new n(this.name,this.params.slice(0),t)},n.prototype.clone=function(){return new n(this.name,this.params.slice(0),this.expr)},n.prototype._toString=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=this.expr.toString(e);return i(this,t)&&(r="("+r+")"),this.name+"("+this.params.join(", ")+") = "+r},n.prototype.toJSON=function(){var e=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map((function(t,r){return{name:t,type:e[r]}})),expr:this.expr}},n.fromJSON=function(e){return new n(e.name,e.params,e.expr)},n.prototype.toHTML=function(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=[],n=0;n<this.params.length;n++)r.push('<span class="math-symbol math-parameter">'+pr(this.params[n])+"</span>");var s=this.expr.toHTML(e);return i(this,t)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+pr(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+r.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+s},n.prototype._toTex=function(e){var t=e&&e.parenthesis?e.parenthesis:"keep",r=this.expr.toTex(e);return i(this,t)&&(r="\\left(".concat(r,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(ev).join(",")+"\\right):="+r},n}),{isClass:!0,isNode:!0}),mv="chain",gv=K(mv,["typed","Chain"],(e=>{var{typed:t,Chain:r}=e;return t(mv,{"":function(){return new r},any:function(e){return new r(e)}})}));function yv(e){return e&&e.isIndexError?new mr(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function vv(e){var{subset:t}=e;return function(e,r){try{if(Array.isArray(e))return t(e,r);if(e&&"function"==typeof e.subset)return e.subset(r);if("string"==typeof e)return t(e,r);if("object"==typeof e){if(!r.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return zr(e,r.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(n){throw yv(n)}}}var bv=K("AccessorNode",["subset","Node"],(e=>{var{subset:t,Node:r}=e,n=vv({subset:t});function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!z(e))throw new TypeError('Node expected for parameter "object"');if(!B(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e||null,this.index=t,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function s(e){return!(T(e)||O(e)||R(e)||q(e)||F(e)||j(e)||V(e))}return i.prototype=new r,i.prototype.type="AccessorNode",i.prototype.isAccessorNode=!0,i.prototype._compile=function(e,t){var r=this.object._compile(e,t),i=this.index._compile(e,t);if(this.index.isObjectProperty()){var s=this.index.getObjectProperty();return function(e,t,n){return zr(r(e,t,n),s)}}return function(e,t,s){var o=r(e,t,s),a=i(e,t,o);return n(o,a)}},i.prototype.forEach=function(e){e(this.object,"object",this),e(this.index,"index",this)},i.prototype.map=function(e){return new i(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))},i.prototype.clone=function(){return new i(this.object,this.index)},i.prototype._toString=function(e){var t=this.object.toString(e);return s(this.object)&&(t="("+t+")"),t+this.index.toString(e)},i.prototype.toHTML=function(e){var t=this.object.toHTML(e);return s(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)},i.prototype._toTex=function(e){var t=this.object.toTex(e);return s(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)},i.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},i.fromJSON=function(e){return new i(e.object,e.index)},i}),{isClass:!0,isNode:!0}),xv=K("IndexNode",["Range","Node","size"],(e=>{var{Range:t,Node:r,size:n}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(z))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}function s(e,r,n){return new t(u(e)?e.toNumber():e,u(r)?r.toNumber():r,u(n)?n.toNumber():n)}return i.prototype=new r,i.prototype.type="IndexNode",i.prototype.isIndexNode=!0,i.prototype._compile=function(e,t){var r=Tr(this.dimensions,(function(r,i){if(G(r)){if(r.needsEnd()){var o=Object.create(t);o.end=!0;var a=r.start._compile(e,o),l=r.end._compile(e,o),u=r.step?r.step._compile(e,o):function(){return 1};return function(e,t,r){var o=n(r).valueOf(),c=Object.create(t);return c.end=o[i],s(a(e,c,r),l(e,c,r),u(e,c,r))}}var c=r.start._compile(e,t),p=r.end._compile(e,t),h=r.step?r.step._compile(e,t):function(){return 1};return function(e,t,r){return s(c(e,t,r),p(e,t,r),h(e,t,r))}}if(V(r)&&"end"===r.name){var d=Object.create(t);d.end=!0;var f=r._compile(e,d);return function(e,t,r){var s=n(r).valueOf(),o=Object.create(t);return o.end=s[i],f(e,o,r)}}var m=r._compile(e,t);return function(e,t,r){return m(e,t,r)}})),i=zr(e,"index");return function(e,t,n){var s=Tr(r,(function(r){return r(e,t,n)}));return i(...s)}},i.prototype.forEach=function(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)},i.prototype.map=function(e){for(var t=[],r=0;r<this.dimensions.length;r++)t[r]=this._ifNode(e(this.dimensions[r],"dimensions["+r+"]",this));return new i(t,this.dotNotation)},i.prototype.clone=function(){return new i(this.dimensions.slice(0),this.dotNotation)},i.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&R(this.dimensions[0])&&"string"==typeof this.dimensions[0].value},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},i.prototype._toString=function(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},i.fromJSON=function(e){return new i(e.dimensions,e.dotNotation)},i.prototype.toHTML=function(e){for(var t=[],r=0;r<this.dimensions.length;r++)t[r]=this.dimensions[r].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+pr(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},i.prototype._toTex=function(e){var t=this.dimensions.map((function(t){return t.toTex(e)}));return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"},i}),{isClass:!0,isNode:!0});var wv=K("AssignmentNode",["subset","?matrix","Node"],(e=>{var{subset:t,matrix:r,Node:n}=e,i=vv({subset:t}),s=function(e){var{subset:t,matrix:r}=e;return function(e,n,i){try{if(Array.isArray(e))return r(e).subset(n,i).valueOf();if(e&&"function"==typeof e.subset)return e.subset(n,i);if("string"==typeof e)return t(e,n,i);if("object"==typeof e){if(!n.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Fr(e,n.getObjectProperty(),i),e}throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw yv(s)}}}({subset:t,matrix:r});function o(e,t,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=e,this.index=r?t:null,this.value=r||t,!V(e)&&!T(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(V(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!B(this.index))throw new TypeError('IndexNode expected as "index"');if(!z(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function a(e,t){t||(t="keep");var r=sv(e,t),n=sv(e.value,t);return"all"===t||null!==n&&n<=r}return o.prototype=new n,o.prototype.type="AssignmentNode",o.prototype.isAssignmentNode=!0,o.prototype._compile=function(e,t){var r=this.object._compile(e,t),n=this.index?this.index._compile(e,t):null,o=this.value._compile(e,t),a=this.object.name;if(this.index){if(this.index.isObjectProperty()){var l=this.index.getObjectProperty();return function(e,t,n){var i=r(e,t,n),s=o(e,t,n);return Fr(i,l,s),s}}if(V(this.object))return function(e,t,i){var l=r(e,t,i),u=o(e,t,i),c=n(e,t,l);return e.set(a,s(l,c,u)),u};var u=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var c=this.object.index.getObjectProperty();return function(e,t,r){var i=u(e,t,r),a=zr(i,c),l=n(e,t,a),p=o(e,t,r);return Fr(i,c,s(a,l,p)),p}}var p=this.object.index._compile(e,t);return function(e,t,r){var a=u(e,t,r),l=p(e,t,a),c=i(a,l),h=n(e,t,c),d=o(e,t,r);return s(a,l,s(c,h,d)),d}}if(!V(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,r){var n=o(e,t,r);return e.set(a,n),n}},o.prototype.forEach=function(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)},o.prototype.map=function(e){return new o(this._ifNode(e(this.object,"object",this)),this.index?this._ifNode(e(this.index,"index",this)):null,this._ifNode(e(this.value,"value",this)))},o.prototype.clone=function(){return new o(this.object,this.index,this.value)},o.prototype._toString=function(e){var t=this.object.toString(e),r=this.index?this.index.toString(e):"",n=this.value.toString(e);return a(this,e&&e.parenthesis)&&(n="("+n+")"),t+r+" = "+n},o.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},o.fromJSON=function(e){return new o(e.object,e.index,e.value)},o.prototype.toHTML=function(e){var t=this.object.toHTML(e),r=this.index?this.index.toHTML(e):"",n=this.value.toHTML(e);return a(this,e&&e.parenthesis)&&(n='<span class="math-paranthesis math-round-parenthesis">(</span>'+n+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+r+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+n},o.prototype._toTex=function(e){var t=this.object.toTex(e),r=this.index?this.index.toTex(e):"",n=this.value.toTex(e);return a(this,e&&e.parenthesis)&&(n="\\left(".concat(n,"\\right)")),t+r+":="+n},o}),{isClass:!0,isNode:!0}),_v=K("SymbolNode",["math","?Unit","Node"],(e=>{var{math:t,Unit:r,Node:n}=e;function i(e){return!!r&&r.isValuelessUnit(e)}function s(e){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}return s.prototype=new n,s.prototype.type="SymbolNode",s.prototype.isSymbolNode=!0,s.prototype._compile=function(e,t){var n=this.name;if(!0===t[n])return function(e,t,r){return t[n]};if(n in e)return function(t,r,i){return t.has(n)?t.get(n):zr(e,n)};var o=i(n);return function(e,t,i){return e.has(n)?e.get(n):o?new r(null,n):s.onUndefinedSymbol(n)}},s.prototype.forEach=function(e){},s.prototype.map=function(e){return this.clone()},s.onUndefinedSymbol=function(e){throw new Error("Undefined symbol "+e)},s.prototype.clone=function(){return new s(this.name)},s.prototype._toString=function(e){return this.name},s.prototype.toHTML=function(e){var t=pr(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"},s.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},s.fromJSON=function(e){return new s(e.name)},s.prototype._toTex=function(e){var r=!1;void 0===t[this.name]&&i(this.name)&&(r=!0);var n=ev(this.name,r);return"\\"===n[0]?n:" "+n},s}),{isClass:!0,isNode:!0});function Ev(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return"function"==typeof e.createSubScope?Qr(e.createSubScope(),...r):Qr(Yr(),e,...r)}var Sv=["math","Node","SymbolNode"],Av=K("FunctionNode",Sv,(e=>{var{math:t,Node:r,SymbolNode:n}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof e&&(e=new n(e)),!z(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(z))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}i.prototype=new r,i.prototype.type="FunctionNode",i.prototype.isFunctionNode=!0,i.prototype._compile=function(e,t){if(!(this instanceof i))throw new TypeError("No valid FunctionNode");var r=this.args.map((r=>r._compile(e,t)));if(!V(this.fn)){if(T(this.fn)&&B(this.fn.index)&&this.fn.index.isObjectProperty()){var n=this.fn.object._compile(e,t),s=this.fn.index.getObjectProperty(),o=this.args;return function(t,i,a){var l=n(t,i,a);if(function(e,t){if(!jr(e,t))throw new Error('No access to method "'+t+'"')}(l,s),l[s]&&l[s].rawArgs)return l[s](o,e,Ev(t,i),t);var u=r.map((e=>e(t,i,a)));return l[s].apply(l,u)}}var a=this.fn._compile(e,t),l=this.args;return function(t,n,i){var s=a(t,n,i);if(s&&s.rawArgs)return s(l,e,Ev(t,n),t);var o=r.map((e=>e(t,n,i)));return s.apply(s,o)}}var u=this.fn.name,c=u in e?zr(e,u):void 0,p="function"==typeof c&&!0===c.rawArgs,h=t=>t.has(u)?t.get(u):u in e?zr(e,u):i.onUndefinedFunction(u);if(p){var d=this.args;return function(t,r,n){return h(t)(d,e,Ev(t,r),t)}}switch(r.length){case 0:return function(e,t,r){return h(e)()};case 1:return function(e,t,n){return h(e)((0,r[0])(e,t,n))};case 2:return function(e,t,n){var i=h(e),s=r[0],o=r[1];return i(s(e,t,n),o(e,t,n))};default:return function(e,t,n){return h(e)(...r.map((r=>r(e,t,n))))}}},i.prototype.forEach=function(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)},i.prototype.map=function(e){for(var t=this._ifNode(e(this.fn,"fn",this)),r=[],n=0;n<this.args.length;n++)r[n]=this._ifNode(e(this.args[n],"args["+n+"]",this));return new i(t,r)},i.prototype.clone=function(){return new i(this.fn,this.args.slice(0))},i.onUndefinedFunction=function(e){throw new Error("Undefined function "+e)};var s=i.prototype.toString;function o(e,t,r){for(var n,i="",s=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,o=0;null!==(n=s.exec(e));)if(i+=e.substring(o,n.index),o=n.index,"$$"===n[0])i+="$",o++;else{o+=n[0].length;var a=t[n[1]];if(!a)throw new ReferenceError("Template: Property "+n[1]+" does not exist.");if(void 0===n[2])switch(typeof a){case"string":i+=a;break;case"object":if(z(a))i+=a.toTex(r);else{if(!Array.isArray(a))throw new TypeError("Template: "+n[1]+" has to be a Node, String or array of Nodes");i+=a.map((function(e,t){if(z(e))return e.toTex(r);throw new TypeError("Template: "+n[1]+"["+t+"] is not a Node.")})).join(",")}break;default:throw new TypeError("Template: "+n[1]+" has to be a Node, String or array of Nodes")}else{if(!z(a[n[2]]&&a[n[2]]))throw new TypeError("Template: "+n[1]+"["+n[2]+"] is not a Node.");i+=a[n[2]].toTex(r)}}return i+=e.slice(o)}i.prototype.toString=function(e){var t,r=this.fn.toString(e);return e&&"object"==typeof e.handler&&Q(e.handler,r)&&(t=e.handler[r](this,e)),void 0!==t?t:s.call(this,e)},i.prototype._toString=function(e){var t=this.args.map((function(t){return t.toString(e)}));return(L(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")"},i.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},i.fromJSON=function(e){return new i(e.fn,e.args)},i.prototype.toHTML=function(e){var t=this.args.map((function(t){return t.toHTML(e)}));return'<span class="math-function">'+pr(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var a=i.prototype.toTex;return i.prototype.toTex=function(e){var t;return e&&"object"==typeof e.handler&&Q(e.handler,this.name)&&(t=e.handler[this.name](this,e)),void 0!==t?t:a.call(this,e)},i.prototype._toTex=function(e){var r,n,i=this.args.map((function(t){return t.toTex(e)}));switch(Qy[this.name]&&(r=Qy[this.name]),!t[this.name]||"function"!=typeof t[this.name].toTex&&"object"!=typeof t[this.name].toTex&&"string"!=typeof t[this.name].toTex||(r=t[this.name].toTex),typeof r){case"function":n=r(this,e);break;case"string":n=o(r,this,e);break;case"object":switch(typeof r[i.length]){case"function":n=r[i.length](this,e);break;case"string":n=o(r[i.length],this,e)}}return void 0!==n?n:o("\\mathrm{${name}}\\left(${args}\\right)",this,e)},i.prototype.getIdentifier=function(){return this.type+":"+this.name},i}),{isClass:!0,isNode:!0}),Nv="parse",kv=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Mv=K(Nv,kv,(e=>{var{typed:t,numeric:r,config:i,AccessorNode:s,ArrayNode:o,AssignmentNode:a,BlockNode:l,ConditionalNode:u,ConstantNode:c,FunctionAssignmentNode:p,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:m,ParenthesisNode:g,RangeNode:y,RelationalNode:v,SymbolNode:b}=e,x=t(Nv,{string:function(e){return G(e,{})},"Array | Matrix":function(e){return w(e,{})},"string, Object":function(e,t){return G(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":w});function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==t.nodes?t.nodes:{};return on(e,(function(e){if("string"!=typeof e)throw new TypeError("String expected");return G(e,r)}))}var _=0,E=1,S=2,A=3,N=4,k={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},M={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},C={true:!0,false:!1,null:null,undefined:void 0},O=["NaN","Infinity"];function I(e,t){return e.expression.substr(e.index,t)}function P(e){return I(e,1)}function D(e){e.index++}function L(e){return e.expression.charAt(e.index-1)}function $(e){return e.expression.charAt(e.index+1)}function B(e){for(e.tokenType=_,e.token="",e.comment="";x.isWhitespace(P(e),e.nestingLevel);)D(e);if("#"===P(e))for(;"\n"!==P(e)&&""!==P(e);)e.comment+=P(e),D(e);if(""!==P(e)){if("\n"===P(e)&&!e.nestingLevel)return e.tokenType=E,e.token=P(e),void D(e);var t=P(e),r=I(e,2),n=I(e,3);if(3===n.length&&k[n])return e.tokenType=E,e.token=n,D(e),D(e),void D(e);if(2===r.length&&k[r])return e.tokenType=E,e.token=r,D(e),void D(e);if(k[t])return e.tokenType=E,e.token=t,void D(e);if(x.isDigitDot(t)){e.tokenType=S;var i=I(e,2);if("0b"===i||"0o"===i||"0x"===i){for(e.token+=P(e),D(e),e.token+=P(e),D(e);x.isHexDigit(P(e));)e.token+=P(e),D(e);if("."===P(e))for(e.token+=".",D(e);x.isHexDigit(P(e));)e.token+=P(e),D(e);else if("i"===P(e))for(e.token+="i",D(e);x.isDigit(P(e));)e.token+=P(e),D(e);return}if("."===P(e)){if(e.token+=P(e),D(e),!x.isDigit(P(e)))return void(e.tokenType=E)}else{for(;x.isDigit(P(e));)e.token+=P(e),D(e);x.isDecimalMark(P(e),$(e))&&(e.token+=P(e),D(e))}for(;x.isDigit(P(e));)e.token+=P(e),D(e);if("E"===P(e)||"e"===P(e))if(x.isDigit($(e))||"-"===$(e)||"+"===$(e)){if(e.token+=P(e),D(e),"+"!==P(e)&&"-"!==P(e)||(e.token+=P(e),D(e)),!x.isDigit(P(e)))throw fe(e,'Digit expected, got "'+P(e)+'"');for(;x.isDigit(P(e));)e.token+=P(e),D(e);if(x.isDecimalMark(P(e),$(e)))throw fe(e,'Digit expected, got "'+P(e)+'"')}else if("."===$(e))throw D(e),fe(e,'Digit expected, got "'+P(e)+'"')}else{if(!x.isAlpha(P(e),L(e),$(e))){for(e.tokenType=N;""!==P(e);)e.token+=P(e),D(e);throw fe(e,'Syntax error in part "'+e.token+'"')}for(;x.isAlpha(P(e),L(e),$(e))||x.isDigit(P(e));)e.token+=P(e),D(e);Q(M,e.token)?e.tokenType=E:e.tokenType=A}}else e.tokenType=E}function z(e){do{B(e)}while("\n"===e.token)}function F(e){e.nestingLevel++}function j(e){e.nestingLevel--}function G(e,t){var r={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:_,nestingLevel:0,conditionalLevel:null};n(r,{expression:e,extraNodes:t}),B(r);var i=function(e){var t,r,n=[];""!==e.token&&"\n"!==e.token&&";"!==e.token&&((t=H(e)).comment=e.comment);for(;"\n"===e.token||";"===e.token;)0===n.length&&t&&(r=";"!==e.token,n.push({node:t,visible:r})),B(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&((t=H(e)).comment=e.comment,r=";"!==e.token,n.push({node:t,visible:r}));return n.length>0?new l(n):(t||((t=new c(void 0)).comment=e.comment),t)}(r);if(""!==r.token)throw r.tokenType===E?me(r,"Unexpected operator "+r.token):fe(r,'Unexpected part "'+r.token+'"');return i}function H(e){var t,r,n,i,s=function(e){var t=function(e){var t=W(e);for(;"or"===e.token;)z(e),t=new m("or","or",[t,W(e)]);return t}(e);for(;"?"===e.token;){var r=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,z(e);var n=t,i=H(e);if(":"!==e.token)throw fe(e,"False part of conditional expression expected");e.conditionalLevel=null,z(e);var s=H(e);t=new u(n,i,s),e.conditionalLevel=r}return t}(e);if("="===e.token){if(V(s))return t=s.name,z(e),n=H(e),new a(new b(t),n);if(T(s))return z(e),n=H(e),new a(s.object,s.index,n);if(q(s)&&V(s.fn)&&(i=!0,r=[],t=s.name,s.args.forEach((function(e,t){V(e)?r[t]=e.name:i=!1})),i))return z(e),n=H(e),new p(t,r,n);throw fe(e,"Invalid left hand side of assignment operator =")}return s}function W(e){for(var t=Y(e);"xor"===e.token;)z(e),t=new m("xor","xor",[t,Y(e)]);return t}function Y(e){for(var t=X(e);"and"===e.token;)z(e),t=new m("and","and",[t,X(e)]);return t}function X(e){for(var t=Z(e);"|"===e.token;)z(e),t=new m("|","bitOr",[t,Z(e)]);return t}function Z(e){for(var t=K(e);"^|"===e.token;)z(e),t=new m("^|","bitXor",[t,K(e)]);return t}function K(e){for(var t=J(e);"&"===e.token;)z(e),t=new m("&","bitAnd",[t,J(e)]);return t}function J(e){for(var t=[ee(e)],r=[],n={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Q(n,e.token);){var i={name:e.token,fn:n[e.token]};r.push(i),z(e),t.push(ee(e))}return 1===t.length?t[0]:2===t.length?new m(r[0].name,r[0].fn,t):new v(r.map((e=>e.fn)),t)}function ee(e){var t,r,n,i;t=te(e);for(var s={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Q(s,e.token);)n=s[r=e.token],z(e),i=[t,te(e)],t=new m(r,n,i);return t}function te(e){var t,r,n,i;t=re(e);for(var s={to:"to",in:"to"};Q(s,e.token);)n=s[r=e.token],z(e),"in"===r&&""===e.token?t=new m("*","multiply",[t,new b("in")],!0):(i=[t,re(e)],t=new m(r,n,i));return t}function re(e){var t,r=[];if(t=":"===e.token?new c(1):ne(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(r.push(t);":"===e.token&&r.length<3;)z(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?r.push(new b("end")):r.push(ne(e));t=3===r.length?new y(r[0],r[2],r[1]):new y(r[0],r[1])}return t}function ne(e){var t,r,n,i;t=ie(e);for(var s={"+":"add","-":"subtract"};Q(s,e.token);){n=s[r=e.token],z(e);var o=ie(e);i=o.isPercentage?[t,new m("*","multiply",[t,o])]:[t,o],t=new m(r,n,i)}return t}function ie(e){var t,r,n,i;r=t=se(e);for(var s={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};Q(s,e.token);)i=s[n=e.token],z(e),r=se(e),t=new m(n,i,[t,r]);return t}function se(e){var t,r;for(r=t=oe(e);e.tokenType===A||"in"===e.token&&R(t)||!(e.tokenType!==S||R(r)||U(r)&&"!"!==r.op)||"("===e.token;)r=oe(e),t=new m("*","multiply",[t,r],!0);return t}function oe(e){for(var t=ae(e),r=t,i=[];"/"===e.token&&R(r);){if(i.push(n({},e)),z(e),e.tokenType!==S){n(e,i.pop());break}if(i.push(n({},e)),z(e),e.tokenType!==A&&"("!==e.token){i.pop(),n(e,i.pop());break}n(e,i.pop()),i.pop(),r=ae(e),t=new m("/","divide",[t,r])}return t}function ae(e){var t,r,n,i;t=le(e);for(var s={"%":"mod",mod:"mod"};Q(s,e.token);)n=s[r=e.token],z(e),"%"===r&&e.tokenType===E&&"("!==e.token?t=new m("/","divide",[t,new c(100)],!1,!0):(i=[t,le(e)],t=new m(r,n,i));return t}function le(e){var t,n,s,a={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Q(a,e.token)?(s=a[e.token],t=e.token,z(e),n=[le(e)],new m(t,s,n)):function(e){var t,n,s,a;t=function(e){var t,n,s;t=function(e){var t=[];if(e.tokenType===A&&Q(e.extraNodes,e.token)){var n=e.extraNodes[e.token];if(B(e),"("===e.token){if(t=[],F(e),B(e),")"!==e.token)for(t.push(H(e));","===e.token;)B(e),t.push(H(e));if(")"!==e.token)throw fe(e,"Parenthesis ) expected");j(e),B(e)}return new n(t)}return function(e){var t;if(e.tokenType===A||e.tokenType===E&&e.token in M)return t=e.token,B(e),ue(e,Q(C,t)?new c(C[t]):-1!==O.indexOf(t)?new c(r(t,"number")):new b(t));return function(e){var t;if('"'===e.token)return t=ce(e),ue(e,new c(t));return function(e){var t;if("'"===e.token)return t=pe(e),ue(e,new c(t));return function(e){var t,n,s,a;if("["===e.token){if(F(e),B(e),"]"!==e.token){var l=he(e);if(";"===e.token){for(s=1,n=[l];";"===e.token;)B(e),n[s]=he(e),s++;if("]"!==e.token)throw fe(e,"End of matrix ] expected");j(e),B(e),a=n[0].items.length;for(var u=1;u<s;u++)if(n[u].items.length!==a)throw me(e,"Column dimensions mismatch ("+n[u].items.length+" !== "+a+")");t=new o(n)}else{if("]"!==e.token)throw fe(e,"End of matrix ] expected");j(e),B(e),t=l}}else j(e),B(e),t=new o([]);return ue(e,t)}return function(e){if("{"===e.token){var t;F(e);var n={};do{if(B(e),"}"!==e.token){if('"'===e.token)t=ce(e);else if("'"===e.token)t=pe(e);else{if(!(e.tokenType===A||e.tokenType===E&&e.token in M))throw fe(e,"Symbol or string expected as object key");t=e.token,B(e)}if(":"!==e.token)throw fe(e,"Colon : expected after object key");B(e),n[t]=H(e)}}while(","===e.token);if("}"!==e.token)throw fe(e,"Comma , or bracket } expected after object value");j(e),B(e);var s=new f(n);return s=ue(e,s)}return function(e){var t;if(e.tokenType===S)return t=e.token,B(e),new c(r(t,i.number));return function(e){var t;if("("===e.token){if(F(e),B(e),t=H(e),")"!==e.token)throw fe(e,"Parenthesis ) expected");return j(e),B(e),t=ue(e,t=new g(t))}return function(e){throw""===e.token?fe(e,"Unexpected end of expression"):fe(e,"Value expected")}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e);var a={"!":"factorial","'":"ctranspose"};for(;Q(a,e.token);)s=a[n=e.token],B(e),t=ue(e,t=new m(n,s,[t]));return t}(e),("^"===e.token||".^"===e.token)&&(s="^"===(n=e.token)?"pow":"dotPow",z(e),a=[t,le(e)],t=new m(n,s,a));return t}(e)}function ue(e,t,r){for(var n;!("("!==e.token&&"["!==e.token&&"."!==e.token||r&&-1===r.indexOf(e.token));)if(n=[],"("===e.token){if(!V(t)&&!T(t))return t;if(F(e),B(e),")"!==e.token)for(n.push(H(e));","===e.token;)B(e),n.push(H(e));if(")"!==e.token)throw fe(e,"Parenthesis ) expected");j(e),B(e),t=new h(t,n)}else if("["===e.token){if(F(e),B(e),"]"!==e.token)for(n.push(H(e));","===e.token;)B(e),n.push(H(e));if("]"!==e.token)throw fe(e,"Parenthesis ] expected");j(e),B(e),t=new s(t,new d(n))}else{if(B(e),e.tokenType!==A)throw fe(e,"Property name expected after dot");n.push(new c(e.token)),B(e);t=new s(t,new d(n,!0))}return t}function ce(e){for(var t="";""!==P(e)&&'"'!==P(e);)"\\"===P(e)&&(t+=P(e),D(e)),t+=P(e),D(e);if(B(e),'"'!==e.token)throw fe(e,'End of string " expected');return B(e),JSON.parse('"'+t+'"')}function pe(e){for(var t="";""!==P(e)&&"'"!==P(e);)"\\"===P(e)&&(t+=P(e),D(e)),t+=P(e),D(e);if(B(e),"'"!==e.token)throw fe(e,"End of string ' expected");return B(e),JSON.parse('"'+t+'"')}function he(e){for(var t=[H(e)],r=1;","===e.token;)B(e),t[r]=H(e),r++;return new o(t)}function de(e){return e.index-e.token.length+1}function fe(e,t){var r=de(e),n=new SyntaxError(t+" (char "+r+")");return n.char=r,n}function me(e,t){var r=de(e),n=new SyntaxError(t+" (char "+r+")");return n.char=r,n}return x.isAlpha=function(e,t,r){return x.isValidLatinOrGreek(e)||x.isValidMathSymbol(e,r)||x.isValidMathSymbol(t,e)},x.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},x.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},x.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&t>0},x.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},x.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},x.isDigit=function(e){return e>="0"&&e<="9"},x.isHexDigit=function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"},x})),Cv="evaluate",Tv=["typed","parse"],Ov=K(Cv,Tv,(e=>{var{typed:t,parse:r}=e;return t(Cv,{string:function(e){var t=Yr();return r(e).compile().evaluate(t)},"string, Map | Object":function(e,t){return r(e).compile().evaluate(t)},"Array | Matrix":function(e){var t=Yr();return on(e,(function(e){return r(e).compile().evaluate(t)}))},"Array | Matrix, Map | Object":function(e,t){return on(e,(function(e){return r(e).compile().evaluate(t)}))}})})),Iv=["parse"],Pv=K("Help",Iv,(e=>{var{parse:t}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error('Argument "doc" missing');this.doc=e}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var e=this.doc||{},r="\n";if(e.name&&(r+="Name: "+e.name+"\n\n"),e.category&&(r+="Category: "+e.category+"\n\n"),e.description&&(r+="Description:\n    "+e.description+"\n\n"),e.syntax&&(r+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){r+="Examples:\n";for(var n={},i=0;i<e.examples.length;i++){var s=e.examples[i];r+="    "+s+"\n";var o=void 0;try{o=t(s).compile().evaluate(n)}catch(Le){o=Le}void 0===o||E(o)||(r+="        "+ur(o,{precision:14})+"\n")}r+="\n"}return e.seealso&&e.seealso.length&&(r+="See also: "+e.seealso.join(", ")+"\n"),r},r.prototype.toJSON=function(){var e=Y(this.doc);return e.mathjs="Help",e},r.fromJSON=function(e){var t={};return Object.keys(e).filter((e=>"mathjs"!==e)).forEach((r=>{t[r]=e[r]})),new r(t)},r.prototype.valueOf=r.prototype.toString,r}),{isClass:!0}),Dv=["FunctionNode","OperatorNode","SymbolNode"],Rv=K("simplifyUtil",Dv,(e=>{var{FunctionNode:t,OperatorNode:r,SymbolNode:n}=e,i={add:!0,multiply:!0},s={add:!0,multiply:!0};function o(e,t){if(!U(e))return!1;var r=e.fn.toString();return t&&Q(t,r)&&Q(t[r],"associative")?t[r].associative:s[r]||!1}function a(e){var t,r=[];return o(e)?(t=e.op,function e(n){for(var i=0;i<n.args.length;i++){var s=n.args[i];U(s)&&t===s.op?e(s):r.push(s)}}(e),r):e.args}function l(e){return U(e)?function(t){try{return new r(e.op,e.fn,t,e.implicit)}catch(n){return console.error(n),[]}}:function(r){return new t(new n(e.name),r)}}return{createMakeNodeFunction:l,isCommutative:function(e,t){if(!U(e))return!0;var r=e.fn.toString();return t&&Q(t,r)&&Q(t[r],"commutative")?t[r].commutative:i[r]||!1},isAssociative:o,flatten:function e(t){if(!t.args||0===t.args.length)return t;t.args=a(t);for(var r=0;r<t.args.length;r++)e(t.args[r])},allChildren:a,unflattenr:function e(t){if(t.args&&0!==t.args.length){for(var r=l(t),n=t.args.length,i=0;i<n;i++)e(t.args[i]);if(n>2&&o(t)){for(var s=t.args.pop();t.args.length>0;)s=r([t.args.pop(),s]);t.args=s.args}}},unflattenl:function e(t){if(t.args&&0!==t.args.length){for(var r=l(t),n=t.args.length,i=0;i<n;i++)e(t.args[i]);if(n>2&&o(t)){for(var s=t.args.shift();t.args.length>0;)s=r([s,t.args.shift()]);t.args=s.args}}}}})),Lv=["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],qv=K("simplifyCore",Lv,(e=>{var{equal:t,isZero:r,add:n,subtract:i,multiply:s,divide:o,pow:a,ConstantNode:l,OperatorNode:u,FunctionNode:c,ParenthesisNode:p}=e,h=new l(0),d=new l(1);return function e(f){if(U(f)&&f.isUnary()){var m=e(f.args[0]);if("+"===f.op)return m;if("-"===f.op){if(U(m)){if(m.isUnary()&&"-"===m.op)return m.args[0];if(m.isBinary()&&"subtract"===m.fn)return new u("-","subtract",[m.args[1],m.args[0]])}return new u(f.op,f.fn,[m])}}else if(U(f)&&f.isBinary()){var g=e(f.args[0]),y=e(f.args[1]);if("+"===f.op){if(R(g)){if(r(g.value))return y;if(R(y))return new l(n(g.value,y.value))}return R(y)&&r(y.value)?g:U(y)&&y.isUnary()&&"-"===y.op?new u("-","subtract",[g,y.args[0]]):new u(f.op,f.fn,y?[g,y]:[g])}if("-"===f.op){if(R(g)&&y){if(R(y))return new l(i(g.value,y.value));if(r(g.value))return new u("-","unaryMinus",[y])}if("subtract"===f.fn)return R(y)&&r(y.value)?g:U(y)&&y.isUnary()&&"-"===y.op?e(new u("+","add",[g,y.args[0]])):new u(f.op,f.fn,[g,y])}else{if("*"===f.op){if(R(g)){if(r(g.value))return h;if(t(g.value,1))return y;if(R(y))return new l(s(g.value,y.value))}if(R(y)){if(r(y.value))return h;if(t(y.value,1))return g;if(U(g)&&g.isBinary()&&g.op===f.op){var v=g.args[0];if(R(v)){var b=new l(s(v.value,y.value));return new u(f.op,f.fn,[b,g.args[1]],f.implicit)}}return new u(f.op,f.fn,[y,g],f.implicit)}return new u(f.op,f.fn,[g,y],f.implicit)}if("/"===f.op){if(R(g)){if(r(g.value))return h;if(R(y)&&(t(y.value,1)||t(y.value,2)||t(y.value,4)))return new l(o(g.value,y.value))}return new u(f.op,f.fn,[g,y])}if("^"===f.op){if(R(y)){if(r(y.value))return d;if(t(y.value,1))return g;if(R(g))return new l(a(g.value,y.value));if(U(g)&&g.isBinary()&&"^"===g.op){var x=g.args[1];if(R(x))return new u(f.op,f.fn,[g.args[0],new l(s(x.value,y.value))])}}return new u(f.op,f.fn,[g,y])}}}else{if(j(f)){var w=e(f.content);return j(w)||V(w)||R(w)?w:new p(w)}if(q(f)){var _=f.args.map(e).map((function(e){return j(e)?e.content:e}));return new c(e(f.fn),_)}}return f}})),$v=["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],Bv=K("simplifyConstant",$v,(e=>{var{typed:t,config:r,mathWithTransform:n,fraction:i,bignumber:s,ConstantNode:o,OperatorNode:a,FunctionNode:l,SymbolNode:u}=e,{isCommutative:c,isAssociative:h,allChildren:d,createMakeNodeFunction:f}=Rv({FunctionNode:l,OperatorNode:a,SymbolNode:u});function m(e,t,r){try{return v(n[e].apply(null,t),r)}catch(i){return t=t.map((function(e){return p(e)?e.valueOf():e})),v(n[e].apply(null,t),r)}}var g=t({Fraction:function(e){var t,r=e.s*e.n;t=r<0?new a("-","unaryMinus",[new o(-r)]):new o(r);if(1===e.d)return t;return new a("/","divide",[t,new o(e.d)])},number:function(e){return e<0?b(new o(-e)):new o(e)},BigNumber:function(e){return e<0?b(new o(-e)):new o(e)},Complex:function(e){throw new Error("Cannot convert Complex number to Node")}});function y(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&i){var r=i(e),n=t&&"number"==typeof t.fractionsLimit?t.fractionsLimit:1/0;if(r.valueOf()===e&&r.n<n&&r.d<n)return r}return e}var v=t({"string, Object":function(e,t){return"BigNumber"===r.number?(void 0===s&&Da(),s(e)):"Fraction"===r.number?(void 0===i&&Ra(),i(e)):y(parseFloat(e),t)},"Fraction, Object":function(e,t){return e},"BigNumber, Object":function(e,t){return e},"number, Object":function(e,t){return y(e,t)},"Complex, Object":function(e,t){return 0!==e.im?e:y(e.re,t)}});function b(e){return new a("-","unaryMinus",[e])}function x(e,t,r,n){return t.reduce((function(t,i){if(z(t)||z(i))z(t)?z(i)||(i=g(i)):t=g(t);else{try{return m(e,[t,i],n)}catch(s){}t=g(t),i=g(i)}return r([t,i])}))}function w(e,t){switch(e.type){case"SymbolNode":return e;case"ConstantNode":return"number"!=typeof e.value&&isNaN(e.value)?e:v(e.value,t);case"FunctionNode":if(n[e.name]&&n[e.name].rawArgs)return e;if(-1===["add","multiply"].indexOf(e.name)){var r=e.args.map((e=>w(e,t)));if(!r.some(z))try{return m(e.name,r,t)}catch(b){}return r=r.map((function(e){return z(e)?e:g(e)})),new l(e.name,r)}case"OperatorNode":var i,s,o=e.fn.toString(),a=f(e);if(U(e)&&e.isUnary())s=z((i=[w(e.args[0],t)])[0])?a(i):m(o,i,t);else if(h(e))if(i=(i=d(e)).map((e=>w(e,t))),c(o)){for(var u=[],p=[],y=0;y<i.length;y++)z(i[y])?p.push(i[y]):u.push(i[y]);u.length>1?(s=x(o,u,a,t),p.unshift(s),s=x(o,p,a,t)):s=x(o,i,a,t)}else s=x(o,i,a,t);else i=e.args.map((e=>w(e,t))),s=x(o,i,a,t);return s;case"ParenthesisNode":return w(e.content,t);default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(e.type))}}return function(e,t){var r=w(e,t);return z(r)?r:g(r)}})),zv=["parse","FunctionNode","OperatorNode","ParenthesisNode"],Fv=K("resolve",zv,(e=>{var{parse:t,FunctionNode:r,OperatorNode:n,ParenthesisNode:i}=e;return function e(s,o){if(!o)return s;if(Zr(o)||(o=Xr(o)),V(s)){var a=o.get(s.name);if(z(a))return e(a,o);if("number"==typeof a)return t(String(a))}else{if(U(s)){var l=s.args.map((function(t){return e(t,o)}));return new n(s.op,s.fn,l,s.implicit)}if(j(s))return new i(e(s.content,o));if(q(s)){var u=s.args.map((function(t){return e(t,o)}));return new r(s.name,u)}}return s}})),Uv=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],jv=K("simplify",Uv,(e=>{var{config:t,typed:r,parse:n,add:i,subtract:s,multiply:o,divide:a,pow:l,isZero:u,equal:c,fraction:p,bignumber:h,mathWithTransform:d,ConstantNode:f,FunctionNode:m,OperatorNode:g,ParenthesisNode:y,SymbolNode:v}=e,b=Bv({typed:r,config:t,mathWithTransform:d,fraction:p,bignumber:h,ConstantNode:f,OperatorNode:g,FunctionNode:m,SymbolNode:v}),x=qv({equal:c,isZero:u,add:i,subtract:s,multiply:o,divide:a,pow:l,ConstantNode:f,OperatorNode:g,FunctionNode:m,ParenthesisNode:y}),w=Fv({parse:n,FunctionNode:m,OperatorNode:g,ParenthesisNode:y}),{isCommutative:_,isAssociative:E,flatten:S,unflattenr:A,unflattenl:N,createMakeNodeFunction:k}=Rv({FunctionNode:m,OperatorNode:g,SymbolNode:v}),M=r("simplify",{string:function(e){return this(n(e),this.rules,Yr(),{})},"string, Map | Object":function(e,t){return this(n(e),this.rules,t,{})},"string, Map | Object, Object":function(e,t,r){return this(n(e),this.rules,t,r)},"string, Array":function(e,t){return this(n(e),t,Yr(),{})},"string, Array, Map | Object":function(e,t,r){return this(n(e),t,r,{})},"string, Array, Map | Object, Object":function(e,t,r,i){return this(n(e),t,r,i)},"Node, Map | Object":function(e,t){return this(e,this.rules,t,{})},"Node, Map | Object, Object":function(e,t,r){return this(e,this.rules,t,r)},Node:function(e){return this(e,this.rules,Yr(),{})},"Node, Array":function(e,t){return this(e,t,Yr(),{})},"Node, Array, Map | Object":function(e,t,r){return this(e,t,r,{})},"Node, Array, Object, Object":function(e,t,r,n){return this(e,t,Xr(r),n)},"Node, Array, Map, Object":function(e,t,r,i){t=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r],s=void 0,o=typeof i;switch(o){case"string":var a=i.split("->");if(2!==a.length)throw SyntaxError("Could not parse rule: "+i);i={l:a[0],r:a[1]};case"object":if(s={l:C(n(i.l)),r:C(n(i.r))},i.context&&(s.evaluate=i.context),i.evaluate&&(s.evaluate=n(i.evaluate)),E(s.l)){var l=k(s.l),u=I();s.expanded={},s.expanded.l=l([s.l.clone(),u]),S(s.expanded.l),A(s.expanded.l),s.expanded.r=l([s.r,u])}break;case"function":s=i;break;default:throw TypeError("Unsupported type of rule: "+o)}t.push(s)}return t}(t);for(var s=w(e,r),o={},a=(s=C(s)).toString({parenthesis:"all"});!o[a];){o[a]=!0,O=0;for(var l=0;l<t.length;l++)"function"==typeof t[l]?s=t[l](s,i):(S(s),s=P(s,t[l])),N(s);a=s.toString({parenthesis:"all"})}return s}});function C(e){return e.transform((function(e,t,r){return j(e)?C(e.content):e}))}M.simplifyCore=x,M.resolve=w;var T={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};M.rules=[x,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},b,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"},{l:"n1/(n2/n3)",r:"(n1*n3)/n2"}];var O=0;function I(){return new v("_p"+O++)}var P=r("applyRule",{"Node, Object":function(e,t){var r=e;if(r instanceof g||r instanceof m){if(r.args)for(var n=0;n<r.args.length;n++)r.args[n]=P(r.args[n],t)}else r instanceof y&&r.content&&(r.content=P(r.content,t));var i=t.r,s=q(t.l,r)[0];if(!s&&t.expanded&&(i=t.expanded.r,s=q(t.expanded.l,r)[0]),s){var o=r.implicit;r=i.clone(),o&&"implicit"in i&&(r.implicit=!0),r=r.transform((function(e){return e.isSymbolNode&&Q(s.placeholders,e.name)?s.placeholders[e.name].clone():e}))}return r}});function D(e,t){var r={placeholders:{}};if(!e.placeholders&&!t.placeholders)return r;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var n in e.placeholders)if(Q(e.placeholders,n)&&(r.placeholders[n]=e.placeholders[n],Q(t.placeholders,n)&&!$(e.placeholders[n],t.placeholders[n])))return null;for(var i in t.placeholders)Q(t.placeholders,i)&&(r.placeholders[i]=t.placeholders[i]);return r}function L(e,t){var r,n=[];if(0===e.length||0===t.length)return n;for(var i=0;i<e.length;i++)for(var s=0;s<t.length;s++)(r=D(e[i],t[s]))&&n.push(r);return n}function q(e,t,r){var n=[{placeholders:{}}];if(e instanceof g&&t instanceof g||e instanceof m&&t instanceof m){if(e instanceof g){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof m&&e.name!==t.name)return[];if(!(1===t.args.length&&1===e.args.length||!E(t)&&t.args.length===e.args.length||r)){if(t.args.length>=2&&2===e.args.length){for(var i=function(e,t){var r,n,i=[],s=k(e);if(_(e,t))for(var o=0;o<e.args.length;o++)(n=e.args.slice(0)).splice(o,1),r=1===n.length?n[0]:s(n),i.push(s([e.args[o],r]));else r=1===(n=e.args.slice(1)).length?n[0]:s(n),i.push(s([e.args[0],r]));return i}(t,e.context),s=[],o=0;o<i.length;o++){var a=q(e,i[o],!0);s=s.concat(a)}return s}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var l=[],u=0;u<e.args.length;u++){var p=q(e.args[u],t.args[u]);if(0===p.length)return[];l.push(p)}n=function(e){if(0===e.length)return e;for(var t=e.reduce(L),r=[],n={},i=0;i<t.length;i++){var s=JSON.stringify(t[i]);n[s]||(n[s]=!0,r.push(t[i]))}return r}(l)}else if(e instanceof v){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(T[e.name]){if(e.name!==t.name)return[]}else if("n"===e.name[0]||"_p"===e.name.substring(0,2))n[0].placeholders[e.name]=t;else if("v"===e.name[0]){if(R(t))return[];n[0].placeholders[e.name]=t}else{if("c"!==e.name[0])throw new Error("Invalid symbol in rule: "+e.name);if(!(t instanceof f))return[];n[0].placeholders[e.name]=t}}else{if(!(e instanceof f))return[];if(!c(e.value,t.value))return[]}return n}function $(e,t){if(e instanceof f&&t instanceof f){if(!c(e.value,t.value))return!1}else if(e instanceof v&&t instanceof v){if(e.name!==t.name)return!1}else{if(!(e instanceof g&&t instanceof g||e instanceof m&&t instanceof m))return!1;if(e instanceof g){if(e.op!==t.op||e.fn!==t.fn)return!1}else if(e instanceof m&&e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var r=0;r<e.args.length;r++)if(!$(e.args[r],t.args[r]))return!1}return!0}return M})),Gv="rationalize",Vv=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],Hv=K(Gv,Vv,(e=>{var{config:t,typed:r,equal:n,isZero:i,add:s,subtract:o,multiply:a,divide:l,pow:u,parse:c,simplify:p,fraction:h,bignumber:d,mathWithTransform:f,ConstantNode:m,OperatorNode:g,FunctionNode:y,SymbolNode:v,ParenthesisNode:b}=e,x=Bv({typed:r,config:t,mathWithTransform:f,fraction:h,bignumber:d,ConstantNode:m,OperatorNode:g,FunctionNode:y,SymbolNode:v}),w=qv({equal:n,isZero:i,add:s,subtract:o,multiply:a,divide:l,pow:u,ConstantNode:m,OperatorNode:g,FunctionNode:y,ParenthesisNode:b});return r(Gv,{string:function(e){return this(c(e),{},!1)},"string, boolean":function(e,t){return this(c(e),{},t)},"string, Object":function(e,t){return this(c(e),t,!1)},"string, Object, boolean":function(e,t,r){return this(c(e),t,r)},Node:function(e){return this(e,{},!1)},"Node, boolean":function(e,t){return this(e,{},t)},"Node, Object":function(e,t){return this(e,t,!1)},"Node, Object, boolean":function(e,t,r){var n=function(){var e=[w,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},x,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],t=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],r=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],n=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],i={};return i.firstRules=e.concat(t,n),i.distrDivRules=r,i.sucDivRules=n,i.firstRulesAgain=e.concat(t),i.finalRules=[w,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},x,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],i}(),i=function(e,t,r,n){var i=[],s=p(e,n,t,{exactFractions:!1}),o="+-*"+((r=!!r)?"/":"");l(s);var a={};return a.expression=s,a.variables=i,a;function l(e){var t=e.type;if("FunctionNode"===t)throw new Error("There is an unsolved function call");if("OperatorNode"===t)if("^"===e.op){if("ConstantNode"!==e.args[1].type||!re(parseFloat(e.args[1].value)))throw new Error("There is a non-integer exponent");l(e.args[0])}else{if(-1===o.indexOf(e.op))throw new Error("Operator "+e.op+" invalid in polynomial expression");for(var r=0;r<e.args.length;r++)l(e.args[r])}else if("SymbolNode"===t){var n=e.name;-1===i.indexOf(n)&&i.push(n)}else if("ParenthesisNode"===t)l(e.content);else if("ConstantNode"!==t)throw new Error("type "+t+" is not allowed in polynomial expression")}}(e,t,!0,n.firstRules),s=i.variables.length;if(e=i.expression,s>=1){var o,a;e=_(e);var l,u=!0,c=!1;for(e=p(e,n.firstRules,{},{exactFractions:!1});a=u?n.distrDivRules:n.sucDivRules,u=!u,(l=(e=p(e,a)).toString())!==o;)c=!0,o=l;c&&(e=p(e,n.firstRulesAgain,{},{exactFractions:!1})),e=p(e,n.finalRules,{},{exactFractions:!1})}var h=[],d={};return"OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===s&&(e.args[0]=E(e.args[0],h),e.args[1]=E(e.args[1])),r&&(d.numerator=e.args[0],d.denominator=e.args[1])):(1===s&&(e=E(e,h)),r&&(d.numerator=e,d.denominator=null)),r?(d.coefficients=h,d.variables=i.variables,d.expression=e,d):e}});function _(e,t,r){var n=e.type,i=arguments.length>1;if("OperatorNode"===n&&e.isBinary()){var s,o=!1;if("^"===e.op&&("ParenthesisNode"!==e.args[0].type&&"OperatorNode"!==e.args[0].type||"ConstantNode"!==e.args[1].type||(o=(s=parseFloat(e.args[1].value))>=2&&re(s))),o){if(s>2){var a=e.args[0],l=new g("^","pow",[e.args[0].cloneDeep(),new m(s-1)]);e=new g("*","multiply",[a,l])}else e=new g("*","multiply",[e.args[0],e.args[0].cloneDeep()]);i&&("content"===r?t.content=e:t.args[r]=e)}}if("ParenthesisNode"===n)_(e.content,e,"content");else if("ConstantNode"!==n&&"SymbolNode"!==n)for(var u=0;u<e.args.length;u++)_(e.args[u],e,u);if(!i)return e}function E(e,t){void 0===t&&(t=[]),t[0]=0;var r={cte:1,oper:"+",fire:""},n=0,i="";!function e(r,s,o){var a=r.type;if("FunctionNode"===a)throw new Error("There is an unsolved function call");if("OperatorNode"===a){if(-1==="+-*^".indexOf(r.op))throw new Error("Operator "+r.op+" invalid");if(null!==s){if(("unaryMinus"===r.fn||"pow"===r.fn)&&"add"!==s.fn&&"subtract"!==s.fn&&"multiply"!==s.fn)throw new Error("Invalid "+r.op+" placing");if(("subtract"===r.fn||"add"===r.fn||"multiply"===r.fn)&&"add"!==s.fn&&"subtract"!==s.fn)throw new Error("Invalid "+r.op+" placing");if(("subtract"===r.fn||"add"===r.fn||"unaryMinus"===r.fn)&&0!==o.noFil)throw new Error("Invalid "+r.op+" placing")}"^"!==r.op&&"*"!==r.op||(o.fire=r.op);for(var l=0;l<r.args.length;l++)"unaryMinus"===r.fn&&(o.oper="-"),"+"!==r.op&&"subtract"!==r.fn||(o.fire="",o.cte=1,o.oper=0===l?"+":r.op),o.noFil=l,e(r.args[l],r,o)}else if("SymbolNode"===a){if(r.name!==i&&""!==i)throw new Error("There is more than one variable");if(i=r.name,null===s)return void(t[1]=1);if("^"===s.op&&0!==o.noFil)throw new Error("In power the variable should be the first parameter");if("*"===s.op&&1!==o.noFil)throw new Error("In multiply the variable should be the second parameter");""!==o.fire&&"*"!==o.fire||(n<1&&(t[1]=0),t[1]+=o.cte*("+"===o.oper?1:-1),n=Math.max(1,n))}else{if("ConstantNode"!==a)throw new Error("Type "+a+" is not allowed");var u=parseFloat(r.value);if(null===s)return void(t[0]=u);if("^"===s.op){if(1!==o.noFil)throw new Error("Constant cannot be powered");if(!re(u)||u<=0)throw new Error("Non-integer exponent is not allowed");for(var c=n+1;c<u;c++)t[c]=0;return u>n&&(t[u]=0),t[u]+=o.cte*("+"===o.oper?1:-1),void(n=Math.max(u,n))}o.cte=u,""===o.fire&&(t[0]+=o.cte*("+"===o.oper?1:-1))}}(e,null,r);for(var s,o=!0,a=n=t.length-1;a>=0;a--)if(0!==t[a]){var l=new m(o?t[a]:Math.abs(t[a])),u=t[a]<0?"-":"+";if(a>0){var c=new v(i);if(a>1){var p=new m(a);c=new g("^","pow",[c,p])}l=-1===t[a]&&o?new g("-","unaryMinus",[c]):1===Math.abs(t[a])?c:new g("*","multiply",[l,c])}s=o?l:"+"===u?new g("+","add",[s,l]):new g("-","subtract",[s,l]),o=!1}return o?new m(0):s}})),Wv=["evaluate"],Yv=K("Parser",Wv,(e=>{var{evaluate:t}=e;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:Yr(),writable:!1})}return r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(e){return t(e,this.scope)},r.prototype.get=function(e){if(this.scope.has(e))return this.scope.get(e)},r.prototype.getAll=function(){return function(e){if(e instanceof Wr)return e.wrappedObject;var t={};for(var r of e.keys())Fr(t,r,e.get(r));return t}(this.scope)},r.prototype.getAllAsMap=function(){return this.scope},r.prototype.set=function(e,t){return this.scope.set(e,t),t},r.prototype.remove=function(e){this.scope.delete(e)},r.prototype.clear=function(){this.scope.clear()},r}),{isClass:!0}),Xv={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},Zv={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},Qv={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:Zv,E:Zv,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:Xv,PI:Xv,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAll:{name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAll:{name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:{name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]},help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},count:{name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diff:{name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["diff([1, 2, 4, 7, 0])","diff([1, 2, 4, 7, 0], 0)","diff(matrix([1, 2, 4, 7, 0]))","diff([[1, 2], [3, 4]])","diff([[1, 2], [3, 4]], 0)","diff([[1, 2], [3, 4]], 1)","diff([[1, 2], [3, 4]], bignumber(1))","diff(matrix([[1, 2], [3, 4]]), 1)","diff([[1, 2], matrix([3, 4])], 1)"],seealso:["subtract","partitionSelect"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},matrixFromFunction:{name:"matrixFromFunction",category:"Matrix",syntax:["math.matrixFromFunction(size, fn)","math.matrixFromFunction(size, fn, format)","math.matrixFromFunction(size, fn, format, datatype)","math.matrixFromFunction(size, format, fn)","math.matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},matrixFromRows:{name:"matrixFromRows",category:"Matrix",syntax:["math.matrixFromRows(...arr)","math.matrixFromRows(row1, row2)","math.matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},matrixFromColumns:{name:"matrixFromColumns",category:"Matrix",syntax:["math.matrixFromColumns(...arr)","math.matrixFromColumns(row1, row2)","math.matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]},rotate:{name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], math.pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrix:{name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:{name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},bin:{name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},oct:{name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},hex:{name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},typeOf:{name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]}},Kv="help",Jv=K(Kv,["typed","mathWithTransform","Help"],(e=>{var{typed:t,mathWithTransform:r,Help:n}=e;return t(Kv,{any:function(e){var t,i=e;if("string"!=typeof e)for(t in r)if(Q(r,t)&&e===r[t]){i=t;break}var s=zr(Qv,i);if(!s){var o="function"==typeof i?i.name:i;throw new Error('No documentation found on "'+o+'"')}return new n(s)}})})),eb=K("derivative",["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],(e=>{var{typed:t,config:r,parse:n,simplify:i,equal:s,isZero:o,numeric:a,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:p,SymbolNode:h}=e,d=t("derivative",{"Node, SymbolNode, Object":function(e,t,r){var n={};m(n,e,t.name);var s=g(e,n);return r.simplify?i(s):s},"Node, SymbolNode":function(e,t){return this(e,t,{simplify:!0})},"string, SymbolNode":function(e,t){return this(n(e),t)},"string, SymbolNode, Object":function(e,t,r){return this(n(e),t,r)},"string, string":function(e,t){return this(n(e),n(t))},"string, string, Object":function(e,t,r){return this(n(e),n(t),r)},"Node, string":function(e,t){return this(e,n(t))},"Node, string, Object":function(e,t,r){return this(e,n(t),r)}});d._simplify=!0,d.toTex=function(e){return f.apply(null,e.args)};var f=t("_derivTex",{"Node, SymbolNode":function(e,t){return R(e)&&"string"===W(e.value)?f(n(e.value).toString(),t.toString(),1):f(e.toString(),t.toString(),1)},"Node, ConstantNode":function(e,t){if("string"===W(t.value))return f(e,n(t.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(e,t,r){return f(e.toString(),t.name,r.value)},"string, string, number":function(e,t,r){return(1===r?"{d\\over d"+t+"}":"{d^{"+r+"}\\over d"+t+"^{"+r+"}}")+"\\left[".concat(e,"\\right]")}}),m=t("constTag",{"Object, ConstantNode, string":function(e,t){return e[t]=!0,!0},"Object, SymbolNode, string":function(e,t,r){return t.name!==r&&(e[t]=!0,!0)},"Object, ParenthesisNode, string":function(e,t,r){return m(e,t.content,r)},"Object, FunctionAssignmentNode, string":function(e,t,r){return-1===t.params.indexOf(r)?(e[t]=!0,!0):m(e,t.expr,r)},"Object, FunctionNode | OperatorNode, string":function(e,t,r){if(t.args.length>0){for(var n=m(e,t.args[0],r),i=1;i<t.args.length;++i)n=m(e,t.args[i],r)&&n;if(n)return e[t]=!0,!0}return!1}}),g=t("_derivative",{"ConstantNode, Object":function(e){return y(0)},"SymbolNode, Object":function(e,t){return void 0!==t[e]?y(0):y(1)},"ParenthesisNode, Object":function(e,t){return new p(g(e.content,t))},"FunctionAssignmentNode, Object":function(e,t){return void 0!==t[e]?y(0):g(e.expr,t)},"FunctionNode, Object":function(e,t){if(1!==e.args.length&&function(e){if(("log"===e.name||"nthRoot"===e.name||"pow"===e.name)&&2===e.args.length)return;for(var t=0;t<e.args.length;++t)e.args[t]=y(0);throw e.compile().evaluate(),new Error("Expected TypeError, but none found")}(e),void 0!==t[e])return y(0);var r,n,i,s,o=e.args[0],a=!1,l=!1;switch(e.name){case"cbrt":a=!0,n=new c("*","multiply",[y(3),new c("^","pow",[o,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)a=!0,n=new c("*","multiply",[y(2),new u("sqrt",[o])]);else if(2===e.args.length)return t[r=new c("/","divide",[y(1),e.args[1]])]=t[e.args[1]],g(new c("^","pow",[o,r]),t);break;case"log10":r=y(10);case"log":if(r||1!==e.args.length){if(1===e.args.length&&r||2===e.args.length&&void 0!==t[e.args[1]])n=new c("*","multiply",[o.clone(),new u("log",[r||e.args[1]])]),a=!0;else if(2===e.args.length)return g(new c("/","divide",[new u("log",[o]),new u("log",[e.args[1]])]),t)}else n=o.clone(),a=!0;break;case"pow":return t[r]=t[e.args[1]],g(new c("^","pow",[o,e.args[1]]),t);case"exp":n=new u("exp",[o.clone()]);break;case"sin":n=new u("cos",[o.clone()]);break;case"cos":n=new c("-","unaryMinus",[new u("sin",[o.clone()])]);break;case"tan":n=new c("^","pow",[new u("sec",[o.clone()]),y(2)]);break;case"sec":n=new c("*","multiply",[e,new u("tan",[o.clone()])]);break;case"csc":l=!0,n=new c("*","multiply",[e,new u("cot",[o.clone()])]);break;case"cot":l=!0,n=new c("^","pow",[new u("csc",[o.clone()]),y(2)]);break;case"asin":a=!0,n=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])]);break;case"acos":a=!0,l=!0,n=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])]);break;case"atan":a=!0,n=new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)]);break;case"asec":a=!0,n=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acsc":a=!0,l=!0,n=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acot":a=!0,l=!0,n=new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)]);break;case"sinh":n=new u("cosh",[o.clone()]);break;case"cosh":n=new u("sinh",[o.clone()]);break;case"tanh":n=new c("^","pow",[new u("sech",[o.clone()]),y(2)]);break;case"sech":l=!0,n=new c("*","multiply",[e,new u("tanh",[o.clone()])]);break;case"csch":l=!0,n=new c("*","multiply",[e,new u("coth",[o.clone()])]);break;case"coth":l=!0,n=new c("^","pow",[new u("csch",[o.clone()]),y(2)]);break;case"asinh":a=!0,n=new u("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)])]);break;case"acosh":a=!0,n=new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])]);break;case"atanh":a=!0,n=new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])]);break;case"asech":a=!0,l=!0,n=new c("*","multiply",[o.clone(),new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])])]);break;case"acsch":a=!0,l=!0,n=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acoth":a=!0,l=!0,n=new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])]);break;case"abs":n=new c("/","divide",[new u(new h("abs"),[o.clone()]),o.clone()]);break;default:throw new Error('Function "'+e.name+'" is not supported by derivative, or a wrong number of arguments is passed')}a?(i="/",s="divide"):(i="*",s="multiply");var p=g(o,t);return l&&(p=new c("-","unaryMinus",[p])),new c(i,s,[p,n])},"OperatorNode, Object":function(e,t){if(void 0!==t[e])return y(0);if("+"===e.op)return new c(e.op,e.fn,e.args.map((function(e){return g(e,t)})));if("-"===e.op){if(e.isUnary())return new c(e.op,e.fn,[g(e.args[0],t)]);if(e.isBinary())return new c(e.op,e.fn,[g(e.args[0],t),g(e.args[1],t)])}if("*"===e.op){var r=e.args.filter((function(e){return void 0!==t[e]}));if(r.length>0){var n=e.args.filter((function(e){return void 0===t[e]})),i=1===n.length?n[0]:new c("*","multiply",n),a=r.concat(g(i,t));return new c("*","multiply",a)}return new c("+","add",e.args.map((function(r){return new c("*","multiply",e.args.map((function(e){return e===r?g(e,t):e.clone()})))})))}if("/"===e.op&&e.isBinary()){var l=e.args[0],p=e.args[1];return void 0!==t[p]?new c("/","divide",[g(l,t),p]):void 0!==t[l]?new c("*","multiply",[new c("-","unaryMinus",[l]),new c("/","divide",[g(p,t),new c("^","pow",[p.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[g(l,t),p.clone()]),new c("*","multiply",[l.clone(),g(p,t)])]),new c("^","pow",[p.clone(),y(2)])])}if("^"===e.op&&e.isBinary()){var h=e.args[0],d=e.args[1];if(void 0!==t[h])return R(h)&&(o(h.value)||s(h.value,1))?y(0):new c("*","multiply",[e,new c("*","multiply",[new u("log",[h.clone()]),g(d.clone(),t)])]);if(void 0!==t[d]){if(R(d)){if(o(d.value))return y(0);if(s(d.value,1))return g(h,t)}var f=new c("^","pow",[h.clone(),new c("-","subtract",[d,y(1)])]);return new c("*","multiply",[d.clone(),new c("*","multiply",[g(h,t),f])])}return new c("*","multiply",[new c("^","pow",[h.clone(),d.clone()]),new c("+","add",[new c("*","multiply",[g(h,t),new c("/","divide",[d.clone(),h.clone()])]),new c("*","multiply",[g(d,t),new u("log",[h.clone()])])])])}throw new Error('Operator "'+e.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function y(e,t){return new l(a(e,t||r.number))}return d})),tb="parser",rb=K(tb,["typed","Parser"],(e=>{var{typed:t,Parser:r}=e;return t(tb,{"":function(){return new r}})})),nb="compile",ib=K(nb,["typed","parse"],(e=>{var{typed:t,parse:r}=e;return t(nb,{string:function(e){return r(e).compile()},"Array | Matrix":function(e){return on(e,(function(e){return r(e).compile()}))}})})),sb=K("apply",["typed","isInteger"],(e=>{var{typed:t,isInteger:r}=e,n=si({typed:t,isInteger:r});return t("apply",{"...any":function(e){var t=e[1];l(t)?e[1]=t-1:u(t)&&(e[1]=t.minus(1));try{return n.apply(null,e)}catch(r){throw yv(r)}}})}),{isTransformFunction:!0});function ob(e,t,r){var n=e.filter((function(e){return V(e)&&!(e.name in t)&&!r.has(e.name)}))[0];if(!n)throw new Error('No undefined variable found in inline expression "'+e+'"');var i=n.name,s=Ev(r),o=e.compile();return function(e){return s.set(i,e),o.evaluate(s)}}var ab=K("filter",["typed"],(e=>{var{typed:t}=e;function r(e,t,r){var i,s;return e[0]&&(i=e[0].compile().evaluate(r)),e[1]&&(s=V(e[1])||L(e[1])?e[1].compile().evaluate(r):ob(e[1],t,r)),n(i,s)}r.rawArgs=!0;var n=t("filter",{"Array, function":lb,"Matrix, function":function(e,t){return e.create(lb(e.toArray(),t))},"Array, RegExp":Pr,"Matrix, RegExp":function(e,t){return e.create(Pr(e.toArray(),t))}});return r}),{isTransformFunction:!0});function lb(e,t){var r=Me(t);return Ir(e,(function(e,n,i){return 1===r?t(e):2===r?t(e,[n+1]):t(e,[n+1],i)}))}var ub=K("map",["typed"],(e=>{var{typed:t}=e;function r(e,t,r){var i,s;return e[0]&&(i=e[0].compile().evaluate(r)),e[1]&&(s=V(e[1])||L(e[1])?e[1].compile().evaluate(r):ob(e[1],t,r)),n(i,s)}r.rawArgs=!0;var n=t("map",{"Array, function":function(e,t){return cb(e,t,e)},"Matrix, function":function(e,t){return e.create(cb(e.valueOf(),t,e))}});return r}),{isTransformFunction:!0});function cb(e,t,r){var n=Me(t);return function e(i,s){return Array.isArray(i)?Tr(i,(function(t,r){return e(t,s.concat(r+1))})):1===n?t(i):2===n?t(i,s):t(i,s,r)}(e,[])}var pb=K("forEach",["typed"],(e=>{var{typed:t}=e;function r(e,t,r){var i,s;return e[0]&&(i=e[0].compile().evaluate(r)),e[1]&&(s=V(e[1])||L(e[1])?e[1].compile().evaluate(r):ob(e[1],t,r)),n(i,s)}r.rawArgs=!0;var n=t("forEach",{"Array | Matrix, function":function(e,t){var r=Me(t);!function n(i,s){Array.isArray(i)?Or(i,(function(e,t){n(e,s.concat(t+1))})):1===r?t(i):2===r?t(i,s):t(i,s,e)}(e.valueOf(),[])}});return r}),{isTransformFunction:!0}),hb=K("subset",["typed","matrix"],(e=>{var{typed:t,matrix:r}=e,n=za({typed:t,matrix:r});return t("subset",{"...any":function(e){try{return n.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),db=K("index",["Index"],(e=>{var{Index:t}=e;return function(){for(var e=[],r=0,n=arguments.length;r<n;r++){var i=arguments[r];if(b(i))i.start--,i.end-=i.step>0?0:2;else if(i&&!0===i.isSet)i=i.map((function(e){return e-1}));else if(f(i)||m(i))i=i.map((function(e){return e-1}));else if(l(i))i--;else if(u(i))i=i.toNumber()-1;else if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[r]=i}var s=new t;return t.apply(s,e),s}}),{isTransformFunction:!0}),fb=K("concat",["typed","matrix","isInteger"],(e=>{var{typed:t,matrix:r,isInteger:n}=e,i=Aa({typed:t,matrix:r,isInteger:n});return t("concat",{"...any":function(e){var t=e.length-1,r=e[t];l(r)?e[t]=r-1:u(r)&&(e[t]=r.minus(1));try{return i.apply(null,e)}catch(n){throw yv(n)}}})}),{isTransformFunction:!0});function mb(e){if(2===e.length&&g(e[0])){var t=(e=e.slice())[1];l(t)?e[1]=t-1:u(t)&&(e[1]=t.minus(1))}return e}var gb=K("max",["typed","config","numeric","larger"],(e=>{var{typed:t,config:r,numeric:n,larger:i}=e,s=vc({typed:t,config:r,numeric:n,larger:i});return t("max",{"...any":function(e){e=mb(e);try{return s.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),yb=K("min",["typed","config","numeric","smaller"],(e=>{var{typed:t,config:r,numeric:n,smaller:i}=e,s=Gu({typed:t,config:r,numeric:n,smaller:i});return t("min",{"...any":function(e){e=mb(e);try{return s.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),vb=K("sum",["typed","config","add","numeric"],(e=>{var{typed:t,config:r,add:n,numeric:i}=e,s=Ku({typed:t,config:r,add:n,numeric:i});return t("sum",{"...any":function(e){e=mb(e);try{return s.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),bb=K("column",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:r,matrix:n,range:i}=e,s=gp({typed:t,Index:r,matrix:n,range:i});return t("column",{"...any":function(e){var t=e.length-1,r=e[t];l(r)&&(e[t]=r-1);try{return s.apply(null,e)}catch(n){throw yv(n)}}})}),{isTransformFunction:!0}),xb=K("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],(e=>{var{typed:t,config:r,matrix:n,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:l}=e,u=hc({typed:t,config:r,matrix:n,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:l});return t("range",{"...any":function(e){return"boolean"!=typeof e[e.length-1]&&e.push(!0),u.apply(null,e)}})}),{isTransformFunction:!0}),wb="diff",_b=K(wb,["typed","matrix","subtract","number","bignumber"],(e=>{var{typed:t,matrix:r,subtract:n,number:i,bignumber:s}=e,o=Rc({typed:t,matrix:r,subtract:n,number:i,bignumber:s});return t(wb,{"...any":function(e){e=mb(e);try{return o.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),Eb=K("row",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:r,matrix:n,range:i}=e,s=dc({typed:t,Index:r,matrix:n,range:i});return t("row",{"...any":function(e){var t=e.length-1,r=e[t];l(r)&&(e[t]=r-1);try{return s.apply(null,e)}catch(n){throw yv(n)}}})}),{isTransformFunction:!0}),Sb=K("mean",["typed","add","divide"],(e=>{var{typed:t,add:r,divide:n}=e,i=Tp({typed:t,add:r,divide:n});return t("mean",{"...any":function(e){e=mb(e);try{return i.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),Ab="variance",Nb=K(Ab,["typed","add","subtract","multiply","divide","apply","isNaN"],(e=>{var{typed:t,add:r,subtract:n,multiply:i,divide:s,apply:o,isNaN:a}=e,l=Pp({typed:t,add:r,subtract:n,multiply:i,divide:s,apply:o,isNaN:a});return t(Ab,{"...any":function(e){e=mb(e);try{return l.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),kb=K("std",["typed","sqrt","variance"],(e=>{var{typed:t,sqrt:r,variance:n}=e,i=Xp({typed:t,sqrt:r,variance:n});return t("std",{"...any":function(e){e=mb(e);try{return i.apply(null,e)}catch(t){throw yv(t)}}})}),{isTransformFunction:!0}),Mb={},Cb={},Tb={},Ob=Vy({mathWithTransform:Cb}),Ib=Hy({Node:Ob}),Pb=Wy({Node:Ob,ResultSet:Eh}),Db=tv({Node:Ob}),Rb=rv({Node:Ob}),Lb=nv({Node:Ob}),qb=lv({Node:Ob}),$b=uv({math:Mb}),Bb=cv({classes:Tb}),zb=pv({Node:Ob}),Fb=hv({Node:Ob}),Ub=dv({Node:Ob}),jb=fv({Node:Ob,typed:Zh}),Gb=gv({Chain:$b,typed:Zh}),Vb=bv({Node:Ob,subset:Tf}),Hb=xv({Node:Ob,Range:Ah,size:Cf}),Wb=wv({matrix:mf,Node:Ob,subset:Tf}),Yb=_v({Unit:Ig,Node:Ob,math:Mb}),Xb=Av({Node:Ob,SymbolNode:Yb,math:Mb}),Zb=Mv({AccessorNode:Vb,ArrayNode:Ib,AssignmentNode:Wb,BlockNode:Pb,ConditionalNode:zb,ConstantNode:Db,FunctionAssignmentNode:jb,FunctionNode:Xb,IndexNode:Hb,ObjectNode:Rb,OperatorNode:Fb,ParenthesisNode:Lb,RangeNode:Ub,RelationalNode:qb,SymbolNode:Yb,config:a,numeric:Tm,typed:Zh}),Qb=Ov({parse:Zb,typed:Zh}),Kb=Pv({parse:Zb}),Jb=jv({bignumber:Sm,fraction:Wd,ConstantNode:Db,FunctionNode:Xb,OperatorNode:Fb,ParenthesisNode:Lb,SymbolNode:Yb,add:Wf,config:a,divide:Ng,equal:Ym,isZero:Zf,mathWithTransform:Cb,multiply:em,parse:Zb,pow:am,subtract:jm,typed:Zh}),ex=Hv({bignumber:Sm,fraction:Wd,ConstantNode:Db,FunctionNode:Xb,OperatorNode:Fb,ParenthesisNode:Lb,SymbolNode:Yb,add:Wf,config:a,divide:Ng,equal:Ym,isZero:Zf,mathWithTransform:Cb,multiply:em,parse:Zb,pow:am,simplify:Jb,subtract:jm,typed:Zh}),tx=Yv({evaluate:Qb}),rx=Jv({Help:Kb,mathWithTransform:Cb,typed:Zh}),nx=eb({ConstantNode:Db,FunctionNode:Xb,OperatorNode:Fb,ParenthesisNode:Lb,SymbolNode:Yb,config:a,equal:Ym,isZero:Zf,numeric:Tm,parse:Zb,simplify:Jb,typed:Zh}),ix=rb({Parser:tx,typed:Zh}),sx=ib({parse:Zb,typed:Zh});n(Mb,{reviver:Bb,false:Nh,null:kh,true:Mh,replacer:Oh,i:Ih,LN10:Ph,LOG10E:Dh,NaN:Rh,pi:Lh,SQRT1_2:qh,tau:$h,efimovFactor:Bh,fineStructure:zh,sackurTetrode:Fh,weakMixingAngle:Uh,e:Gh,Infinity:Vh,LOG2E:Hh,PI:Lh,version:Wh,E:Gh,phi:Xh,typed:Zh,isInteger:Qh,isNumeric:Kh,isPositive:Jh,isNaN:ed,equalScalar:td,number:rd,boolean:nd,complex:id,splitUnit:sd,unaryPlus:od,apply:ad,cube:ld,expm1:ud,log10:cd,multiplyScalar:pd,sign:hd,square:dd,bitNot:fd,arg:md,im:gd,not:yd,filter:vd,forEach:bd,map:xd,erf:wd,format:_d,oct:Ed,print:Sd,isPrime:Ad,acos:Nd,acot:kd,acsc:Md,asec:Cd,asin:Td,atan:Od,atanh:Id,cosh:Pd,coth:Dd,csch:Rd,sech:Ld,sinh:qd,tanh:$d,chain:Gb,combinations:Bd,pickRandom:zd,randomInt:Fd,LN2:Ud,clone:jd,hasNumericValue:Gd,typeOf:Vd,string:Hd,fraction:Wd,unaryMinus:Yd,addScalar:Xd,exp:Zd,log2:Qd,sqrt:Kd,conj:Jd,getMatrixDataType:ef,mode:tf,bin:rf,acosh:nf,acsch:sf,asinh:of,cos:af,csc:lf,sin:uf,combinationsWithRep:cf,random:pf,SQRT2:hf,isNegative:df,matrix:mf,abs:gf,gcd:yf,mod:vf,nthRoot:bf,xgcd:xf,bitAnd:wf,bitXor:_f,or:Ef,concat:Sf,diag:Af,identity:Nf,ones:kf,reshape:Mf,size:Cf,subset:Tf,zeros:Of,hex:If,round:Pf,leftShift:Df,rightLogShift:Rf,compare:Lf,compareText:qf,smaller:$f,larger:Bf,unequal:zf,sparse:jf,acoth:Gf,atan2:Vf,sec:Hf,add:Wf,dot:Yf,composition:Xf,isZero:Zf,matrixFromFunction:Qf,cbrt:Kf,floor:Jf,multiply:em,dotMultiply:tm,re:rm,flatten:nm,resize:im,squeeze:sm,to:om,pow:am,dotPow:lm,rightArithShift:um,compareNatural:cm,equalText:pm,largerEq:hm,partitionSelect:dm,asech:mm,tan:gm,setDifference:ym,setIntersect:vm,setMultiplicity:bm,setSize:xm,trace:wm,quantileSeq:_m,gamma:Em,bignumber:Sm,matrixFromColumns:Am,lcm:Nm,bitOr:km,kron:Mm,transpose:Cm,numeric:Tm,and:Om,smallerEq:Im,sort:Pm,min:Dm,cot:Rm,setDistinct:Lm,setPowerset:qm,index:$m,sum:Bm,factorial:zm,permutations:Fm,matrixFromRows:Um,subtract:jm,cross:Gm,range:Vm,row:Hm,prod:Wm,equal:Ym,max:Xm,setCartesian:Zm,setSymDifference:Qm,ceil:Km,xor:Jm,count:eg,ctranspose:tg,deepEqual:rg,setIsSubset:ng,fix:ig,diff:sg,divideScalar:og,nthRoots:ag,lsolve:lg,lsolveAll:ug,setUnion:pg,lup:hg,slu:dg,det:fg,distance:mg,stirlingS2:gg,catalan:yg,column:vg,log:bg,dotDivide:xg,usolveAll:wg,hypot:_g,qr:Eg,inv:Sg,expm:Ag,divide:Ng,mean:kg,variance:Mg,kldivergence:Cg,bellNumbers:Tg,log1p:Og,createUnit:Pg,sqrtm:Dg,median:Rg,std:Lg,atomicMass:qg,bohrMagneton:$g,boltzmann:Bg,conductanceQuantum:zg,deuteronMass:Fg,electronMass:Ug,faraday:jg,firstRadiation:Gg,gravitationConstant:Vg,hartreeEnergy:Hg,klitzing:Wg,magneticConstant:Yg,molarMass:Xg,molarPlanckConstant:Zg,neutronMass:Qg,planckCharge:Kg,planckLength:Jg,planckTemperature:ey,protonMass:ty,reducedPlanckConstant:ry,secondRadiation:ny,stefanBoltzmann:iy,vacuumImpedance:sy,usolve:oy,lusolve:ay,eigs:ly,mad:uy,avogadro:cy,classicalElectronRadius:py,electricConstant:hy,fermiCoupling:dy,gravity:fy,loschmidt:my,molarMassC12:gy,nuclearMagneton:yy,planckMass:vy,quantumOfCirculation:by,speedOfLight:xy,wienDisplacement:wy,unit:_y,parse:Zb,evaluate:Qb,intersect:Ey,simplify:Jb,rationalize:ex,coulomb:Sy,gasConstant:Ay,magneticFluxQuantum:Ny,planckConstant:ky,rydberg:My,norm:Cy,help:rx,derivative:nx,elementaryCharge:Ty,molarVolume:Oy,thomsonCrossSection:Iy,rotationMatrix:Py,parser:ix,bohrRadius:Dy,planckTime:Ry,rotate:Ly,multinomial:qy,compile:sx,inverseConductanceQuantum:$y,config:a}),n(Cb,Mb,{apply:sb({isInteger:Qh,typed:Zh}),filter:ab({typed:Zh}),map:ub({typed:Zh}),forEach:pb({typed:Zh}),subset:hb({matrix:mf,typed:Zh}),index:db({Index:fm}),concat:fb({isInteger:Qh,matrix:mf,typed:Zh}),max:gb({config:a,larger:Bf,numeric:Tm,typed:Zh}),min:yb({config:a,numeric:Tm,smaller:$f,typed:Zh}),sum:vb({add:Wf,config:a,numeric:Tm,typed:Zh}),column:bb({Index:fm,matrix:mf,range:Vm,typed:Zh}),range:xb({bignumber:Sm,matrix:mf,config:a,larger:Bf,largerEq:hm,smaller:$f,smallerEq:Im,typed:Zh}),diff:_b({bignumber:Sm,matrix:mf,number:rd,subtract:jm,typed:Zh}),row:Eb({Index:fm,matrix:mf,range:Vm,typed:Zh}),mean:Sb({add:Wf,divide:Ng,typed:Zh}),variance:Nb({add:Wf,apply:ad,divide:Ng,isNaN:ed,multiply:em,subtract:jm,typed:Zh}),std:kb({sqrt:Kd,typed:Zh,variance:Mg})}),n(Tb,{ResultSet:Eh,Complex:Sh,Range:Ah,Node:Ob,ArrayNode:Ib,BlockNode:Pb,ConstantNode:Db,ObjectNode:Rb,ParenthesisNode:Lb,RelationalNode:qb,Chain:$b,BigNumber:Ch,Matrix:Th,ConditionalNode:zb,OperatorNode:Fb,Fraction:jh,RangeNode:Ub,DenseMatrix:Yh,FunctionAssignmentNode:jb,SparseMatrix:ff,ImmutableDenseMatrix:Ff,FibonacciHeap:Uf,AccessorNode:Vb,IndexNode:Hb,Index:fm,AssignmentNode:Wb,Spa:cg,Unit:Ig,SymbolNode:Yb,FunctionNode:Xb,Help:Kb,Parser:tx}),$b.createProxy(Mb);__webpack_require__(88914),__webpack_require__(54766);const ox={isHtml:!0,isAmc:!1,isDiaporama:!1,issortieNB:!1,anglePerspective:30,coeffPerspective:.5,pixelsParCm:20,scale:1,unitesLutinParCm:50,isMainlevee:!1,amplitude:1,fenetreMathalea2d:[-1,-10,29,10],objets2D:[],graine:"",nbBonnesReponses:0,nbMauvaisesReponses:0,zoom:1,seedSpecial:!1};Error;__webpack_require__(70420);function ax(e){return e*Math.PI/180}function lx(e,t=!1){return t?"string"==typeof e?parseFloat(Number(e).toFixed(t)):parseFloat(e.toFixed(t)):"string"==typeof e?parseFloat(Number(e).toFixed(6)):parseFloat(e.toFixed(6))}const ux=1e-6;function cx(e,t,r=ux){return Math.abs(e-t)<r}function px(e,t,r=ux){return t-e>r||cx(e,t,r)}function hx(e,t=ux){return Math.abs(e-Pf(e))<t}function dx(e,t){return!(!hx(e)||!hx(t))&&Math.floor(e/t)}function fx(e,t,r=[]){const n=t-e;let i=Math.floor(Math.random()*(n+1));if(Number.isInteger(r)&&(r=[r]),r.length>0)for(;-1!==r.indexOf(e+i);)i=Math.floor(Math.random()*(n+1));return e+i}function mx(e,t){for(let r=e.length-1;r>=0;r--)"number"==typeof t?cx(e[r],t)&&e.splice(r,1):e[r]===t&&e.splice(r,1)}function gx(e,t=[]){Array.isArray(t)||(t=[t]);const r=e.slice();for(let n=0;n<t.length;n++)mx(r,t[n]);return r[Math.floor(Math.random()*r.length)]}function yx(e,t,r=[],n=1){const i=[];for(let s=e;s<=t;s=Nx(s+n))i.push(s);for(let s=0;s<r.length;s++)mx(i,r[s]);return i}function vx(e){return e<0?-1:1}function bx(e,t=2){return isNaN(e)?(window.notify("Le nombre à arrondir n'en est pas un, ça retourne NaN",{nombre:e,precision:t}),NaN):Pf(e,t)}function xx(e,t=2){return String(Pf(e,t)).replace(".",",")}function wx(...e){return yf(...e)}Object.fromEntries||Object.defineProperty(Object,"fromEntries",{value(e){if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");const t={};return Object.keys(e).forEach((r=>{const[n,i]=e[r];t[n]=i})),t}});function _x(e,t){const r=wx(e,t);let n=e/r,i=t/r;return n<0&&i<0&&([n,i]=[-n,-i]),n>0&&i<0&&([n,i]=[-n,-i]),[n,i]}function Ex(e){const t=[];let r=2;for(;e>1&&r<=e;)if(e%r==0)t.push(r),e/=r;else for(r++;!Ad(r);)r++;return 0===t.length&&t.push(e),t}function Sx(e){const t=Ex(e),r=[];let n=0;for(let i=0;i<t.length;)if(0===t[i])i++;else{r.push([t[i],1]),n++;for(let e=i+1;e<t.length;e++)t[e]===t[i]&&(r[n-1][1]++,t[e]=0);i++}return r}function Ax(e){const t=Sx(e);let r=1,n=1;for(let i=0;i<t.length;i++)t[i][1]%2==0?n*=t[i][0]**Nx(t[i][1]/2):t[i][1]>1?(n*=t[i][0]**Nx((t[i][1]-1)/2),r*=t[i][0]):r*=t[i][0];return[n,r]}function Nx(e,t=!1){return t?bx(parseFloat(jy().eval("float("+e+")")),t):parseFloat(jy().eval("float("+e+")"))}function kx(e,t=!1){return Ox(t?Nx(e,t):Nx(e))}function Mx(e){let t="";return e<=26?t=String.fromCharCode(64+e):e%26==0?(t=String.fromCharCode(64+Math.floor(e/26)-1),t+=String.fromCharCode(90)):(t=String.fromCharCode(64+Math.floor(e/26)),t+=String.fromCharCode(64+e%26)),t}function Cx(e){if(ox.isHtml)return Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(e).toString().replace(/\s+/g,"\\thickspace ");{let t;return t=e>999||Ix(e)>3?"\\numprint{"+e.toString().replace(".",",")+"}":e.toString().replace(".","{,}"),t}}function Tx(e){if(ox.isHtml)return Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(e).toString().replace(/\s+/g," ");{let t;return t=e>999||Ix(e)>3?"\\numprint{"+e.toString().replace(".",",")+"}":e.toString().replace(".",","),t}}function Ox(e){const t=e.toString(),r=t.split(".")[0],n=t.split(".")[1];let i,s="";if(r.length>3){for(i=0;i<Math.floor(r.length/3);i++)s=" "+r.slice(r.length-3*i-3,r.length-3*i)+s;s=r.slice(0,r.length-3*i)+s}else s=r;return" "===s[0]&&(s=s.substring(1,s.length)),void 0!==n&&(s+=","+n),s}function Ix(e){return String(e).indexOf(".")>0?String(e).split(".")[1].length:0}function Px(e,t){let r,n=t;if(Number.isInteger(e)&&Number.isInteger(t)){for(;n%e!=0;)n+=1;return n}return cx(Math.floor(t/e,t/e))?t:(r=t/e-Math.floor(t/e),t-r*e+e)}function Dx(e,t){const r=Px(e,t);return r!==t?r-e:t}let Rx=0;function Lx(){this.positionLabel="above",this.isVisible=!0,this.color="black",this.style="",this.styleTikz="",this.epaisseur=1,this.opacite=1,this.pointilles=!1,this.id=Rx,Rx++,ox.objets2D.push(this)}class qx{constructor(){this.tikz=function(){return""},this.svg=function(){return""}}}function $x(){return new qx}function Bx(e,t,r,n="above"){this.typeObjet="point",Rx++,this.id=Rx,1===arguments.length?this.nom=e:2===arguments.length?((Number.isNaN(e)||Number.isNaN(t))&&window.notify("Point : les coordonnées ne sont pas valides",{arg1:e,arg2:t}),this.x=bx(e,3),this.y=bx(t,3)):((Number.isNaN(e)||Number.isNaN(t))&&window.notify("Point : les coordonnées ne sont pas valides",{arg1:e,arg2:t}),this.x=bx(e,3),this.y=bx(t,3),this.nom=r),this.positionLabel=n,this.bordures=[this.x,this.y,this.x,this.y],this.xSVG=function(e){return bx(this.x*e,3)},this.ySVG=function(e){return-bx(this.y*e,3)},this.nom||(this.nom=" ")}function zx(e,t,r,n="above"){return new Bx(e,t,r,n)}function Fx(e,t,{rayon:r=.05,couleur:n="black",couleurDeRemplissage:i="black",opacite:s=1,opaciteDeRemplissage:o=1}={}){Lx.call(this),(Number.isNaN(e)||Number.isNaN(t))&&window.notify("Plot : les coordonnées ne sont pas valides",{x:e,y:t}),this.color=n,this.couleurDeRemplissage=i,this.rayon=r,this.x=e,this.y=t,this.bordures=[e-r,t-r,e+r,t+r],this.opacite=s,this.opaciteDeRemplissage=o,this.svg=function(e){return""===this.couleurDeRemplissage?`\n\t <circle cx="${bx(this.x*e,1)}" cy="${bx(-this.y*e,1)}" r="${bx(this.rayon*e,2)}" stroke="${this.color}" stroke-opacity="${this.opacite||1}"/>`:`\n\t <circle cx="${bx(this.x*e,1)}" cy="${bx(-this.y*e,1)}" r="${bx(this.rayon*e,2)}" stroke="${this.color}" fill="${this.couleurDeRemplissage}" stroke-opacity="${this.opacite||1}" fill-opacity="${this.opaciteDeRemplissage||1}"/>`},this.tikz=function(){const e=[];this.color.length>1&&"black"!==this.color&&e.push(this.color),1!==this.epaisseur&&e.push(`line-width=${this.epaisseur}`),1!==this.opacite&&e.push(`opacity=${this.opacite}`),1!==this.opaciteDeRemplissage&&e.push(`fill opacity=${this.opaciteDeRemplissage}`),""!==this.couleurDeRemplissage&&e.push(`fill=${this.couleurDeRemplissage}`);let t=[];return e.length>0&&(t="["+e.join(",")+"]"),`\n\t \\filldraw${t} (${bx(this.x,2)},${bx(this.y,2)}) circle (${bx(this.rayon,2)});`}}function Ux(e,t,{rayon:r=.05,couleur:n="black",couleurDeRemplissage:i="black",opacite:s=1,opaciteDeRemplissage:o=1}={}){return new Fx(e,t,{rayon:r,couleur:n,couleurDeRemplissage:i,opacite:s,opaciteDeRemplissage:o})}function jx(...e){Lx.call(this),this.taille=3,this.epaisseur=1,this.opacite=.8,this.style="x";let t,r=1e3,n=-1e3,i=1e3,s=-1e3;"string"==typeof e[e.length-1]?(this.color=e[e.length-1],e.length--):this.color="black";for(const o of e)"point3d"!==o.typeObjet&&"point"!==o.typeObjet&&window.notify("TracePoint : argument invalide",{...e}),t="point"===o.typeObjet?o:o.c2d,r=Math.min(r,t.x-this.taille/ox.pixelsParCm),n=Math.max(n,t.x+this.taille/ox.pixelsParCm),i=Math.min(i,t.y-this.taille/ox.pixelsParCm),s=Math.max(s,t.y+this.taille/ox.pixelsParCm);this.bordures=[r,i,n,s],this.svg=function(t){const r=[];let n,i,s,o,a,l;for(const c of e)l="point3d"===c.typeObjet?c.c2d:c,l.constructor===Bx&&("x"===this.style?(n=$w(zx(l.x-this.taille/t,l.y+this.taille/t),zx(l.x+this.taille/t,l.y-this.taille/t),this.color),i=$w(zx(l.x-this.taille/t,l.y-this.taille/t),zx(l.x+this.taille/t,l.y+this.taille/t),this.color),n.epaisseur=this.epaisseur,i.epaisseur=this.epaisseur,n.opacite=this.opacite,i.opacite=this.opacite,r.push(n,i),n.isVisible=!1,i.isVisible=!1):"o"===this.style?(s=zx(l.x,l.y),a=u_(s,this.taille/t,this.color),a.isVisible=!1,a.epaisseur=this.epaisseur,a.opacite=this.opacite,a.couleurDeRemplissage=this.color,a.opaciteDeRemplissage=this.opacite/2,r.push(a)):"#"===this.style?(s=zx(l.x-this.taille/t,l.y-this.taille/t),o=zx(l.x+this.taille/t,l.y-this.taille/t),a=Ww(s,o,this.color),a.isVisible=!1,a.epaisseur=this.epaisseur,a.opacite=this.opacite,a.couleurDeRemplissage=this.color,a.opaciteDeRemplissage=this.opacite/2,r.push(a)):"+"===this.style?(n=$w(zx(l.x,l.y+this.taille/t),zx(l.x,l.y-this.taille/t),this.color),i=$w(zx(l.x-this.taille/t,l.y),zx(l.x+this.taille/t,l.y),this.color),n.epaisseur=this.epaisseur,i.epaisseur=this.epaisseur,n.opacite=this.opacite,i.opacite=this.opacite,r.push(n,i)):"|"===this.style?(n=$w(zx(l.x,l.y+this.taille/t),zx(l.x,l.y-this.taille/t),this.color),n.epaisseur=this.epaisseur,n.opacite=this.opacite,r.push(n)):"."===this.style&&(n=Ux(l.y,l.y,{couleur:this.color,rayon:.05*this.epaisseur,couleurDeRemplissage:this.couleurDeRemplissage})));let u="";for(const e of r)u+="\n\t"+e.svg(t);return u=`<g id="${this.id}">`+u+"</g>",u},this.tikz=function(){const t=[];let r,n,i,s,o,a;const l=this.taille*ox.scale/20;for(const c of e)a="point3d"===c.typeObjet?c.c2d:c,a.constructor===Bx&&("x"===this.style?(r=$w(zx(a.x-l,a.y+l),zx(a.x+l,a.y-l),this.color),n=$w(zx(a.x-l,a.y-l),zx(a.x+l,a.y+l),this.color),r.epaisseur=this.epaisseur,n.epaisseur=this.epaisseur,r.opacite=this.opacite,n.opacite=this.opacite,t.push(r,n)):"o"===this.style?(i=zx(a.x,a.y),o=u_(i,l,this.color),o.epaisseur=this.epaisseur,o.opacite=this.opacite,o.couleurDeRemplissage=this.color,o.opaciteDeRemplissage=this.opacite/2,t.push(o)):"#"===this.style?(i=zx(a.x-l,a.y-l),s=zx(a.x+l,a.y-l),o=Yw(i,s,this.color),o.epaisseur=this.epaisseur,o.opacite=this.opacite,o.couleurDeRemplissage=this.color,o.opaciteDeRemplissage=this.opacite/2,t.push(o)):"+"===this.style?(r=$w(zx(a.x,a.y+l),zx(a.x,a.y-l),this.color),n=$w(zx(a.x-l,a.y),zx(a.x+l,a.y),this.color),r.epaisseur=this.epaisseur,n.epaisseur=this.epaisseur,r.opacite=this.opacite,n.opacite=this.opacite,t.push(r,n)):"|"===this.style&&(r=$w(zx(a.x,a.y+l),zx(a.x,a.y-l),this.color),r.epaisseur=this.epaisseur,r.opacite=this.opacite,t.push(r)));let u="";for(const e of t)u+="\n\t"+e.tikz();return u}}function Gx(...e){return new jx(...e)}function Vx(e,t){let r,n;Lx.call(this),this.lieu=e,this.taille=.2,this.x=e.x,this.y=e.y,this.bordures=[e.x-.2,e.y-.2,e.x+.2,e.x+.2],t.constructor===Bx&&(KS(e,t)<.001&&window.notify("TracePointSurDroite : points trop rapprochés pour définir une droite",{A:e,O:t}),r=Xx(e,t,1),this.direction=j_(r,e,90)),t.constructor===ow&&(n=dw(e,t),n.isVisible=!1,this.direction=Xx(zx(n.x1,n.y1),zx(n.x2,n.y2),1)),this.svg=function(e){const t=$w(Xx(this.lieu,this.direction,20*this.taille/e),Xx(this.lieu,this.direction,20*-this.taille/e));return this.id=t.id,t.isVisible=!1,t.svg(e)},this.tikz=function(){return $w(Xx(this.lieu,this.direction,this.taille/ox.scale),Xx(this.lieu,this.direction,-this.taille/ox.scale)).tikz()}}function Hx(e,t){return new Vx(e,t)}function Wx(e,t){return new Vx(Yx(e,t),aw(e,t))}function Yx(e,t,r,n="above"){Number.isNaN(KS(e,t))&&window.notify("milieu : Quelque chose ne va pas avec les points",{A:e,B:t});return new Bx(Nx((e.x+t.x)/2),Nx((e.y+t.y)/2),r,n)}function Xx(e,t,r,n="",i="above"){return Number.isNaN(KS(e,t))&&window.notify("pointSurSegment : Quelque chose ne va pas avec les points",{A:e,B:t}),void 0!==r&&"string"!=typeof r||(r=Nx(KS(e,t)*fx(15,85)/100)),H_(t,e,Nx(r/KS(e,t)),n,i)}function Zx(e,t,r){const n=(r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y),i=(e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y),s=(r.x-t.x)**2+(r.y-t.y)**2;return 0===n&&i>0&&i<s}function Qx(e,t,r){return 0===(r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y)}function Kx(e,t,r){const n=(r.x-t.x)*(e.y-t.y)-(e.x-t.x)*(r.y-t.y),i=(e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y);return 0===n&&i>0}function Jx(e,t,r,n="above"){"number"!=typeof t&&(t=fx(-180,180));return zx(e.centre.x+e.rayon*Math.cos(ax(t)),e.centre.y+e.rayon*Math.sin(ax(t)),r,n)}function ew(e,t,r,n="above"){return 0===e.b?zx(Nx(-e.c/e.a),t,r,n):0===e.a?zx(t,Nx(-e.c/e.b),r,n):zx(t,Nx((-e.c-e.a*t)/e.b),r,n)}function tw(e,t,r="",n="above"){let i,s;return t.a*e.b-t.b*e.a==0?(console.log("Les droites sont parallèles, pas de point d'intersection"),!1):(s=Nx((t.c*e.a-e.c*t.a)/(t.a*e.b-t.b*e.a)),i=0===e.a?Nx((-t.c-t.b*s)/t.a):Nx((-e.c-e.b*s)/e.a),zx(i,s,r,n))}function rw(...e){const t=e.length,r=fx(1,360),n=e[0],i=zx(n.x+1,n.y),s=e[1];return!(t<2)&&(2===t?Q_(i,n,r,s):3===t?"number"==typeof e[2]?Q_(i,n,e[2],s):Q_(i,n,r,s,e[2]):4===t?"number"==typeof e[2]?Q_(i,n,e[2],s,e[3]):Q_(i,n,r,s,e[2],e[3]):Q_(i,n,e[2],s,e[3],e[4]))}function nw(...e){Lx.call(this),this.taille||(this.taille=10),this.largeur||(this.largeur=10),"string"==typeof e[e.length-1]?(this.color=e[e.length-1],e.length--):this.color="black";let t,r=1e3,n=-1e3,i=1e3,s=-1e3;for(const o of e)"point3d"!==o.typeObjet&&"point"!==o.typeObjet&&window.notify("LabelPoint : argument invalide",{...e}),t="point"===o.typeObjet?o:o.c2d,r=Math.min(r,t.x-t.positionLabel.indexOf("left")!=-1?1:0),n=Math.max(n,t.x+t.positionLabel.indexOf("right")!==-1?1:0),i=Math.min(i,t.y-t.positionLabel.indexOf("below")!=-1?1:0),s=Math.max(s,t.y+t.positionLabel.indexOf("above")!==-1?1:0);this.bordures=[r,i,n,s],this.svg=function(t){let r,n,i,s="";Array.isArray(e[0])?this.listePoints=e[0]:this.listePoints=e;for(const e of this.listePoints)switch(i="point3d"===e.typeObjet?e.c2d:e,r=i.x,n=i.y,i.positionLabel){case"left":s+=HS(i.nom,r-10/t,n,"milieu",this.color,1,"middle",!0).svg(t)+"\n";break;case"right":s+=HS(i.nom,r+10/t,n,"milieu",this.color,1,"middle",!0).svg(t)+"\n";break;case"below":s+=HS(i.nom,r,n-10/t,"milieu",this.color,1,"middle",!0).svg(t)+"\n";break;case"above":s+=HS(i.nom,r,n+10/t,"milieu",this.color,1,"middle",!0).svg(t)+"\n";break;case"above right":s+=HS(i.nom,r+10/t,n+10/t,"milieu",this.color,1,"middle",!0).svg(t)+"\n";break;case"below left":s+=HS(i.nom,r-10/t,n-10/t,"milieu",this.color,1,"middle",!0).svg(t)+"\n";break;case"below right":s+=HS(i.nom,r+10/t,n-10/t,"milieu",this.color,1,"middle",!0).svg(t)+"\n";break;default:s+=HS(i.nom,r-10/t,n+10/t,"milieu",this.color,1,"middle",!0).svg(t)+"\n"}return s=`<g id="${this.id}">${s}</g>`,s},this.tikz=function(){let t,r="",n="";"black"!==this.color&&(n=`,${this.color}`);for(const i of e)t="point3d"===i.typeObjet?i.c2d:i,r+=`\t\\draw (${t.x},${t.y}) node[${t.positionLabel}${n}] {$${t.nom}$};\n`;return r}}function iw(...e){return new nw(...e)}function sw(e,t="",r="above"){let n=0,i=0,s=0;for(const o of e.listePoints)n+=o.x,i+=o.y,s++;return new Bx(Nx(n/s),Nx(i/s),t,r)}function ow(e,t,r,n){let i,s,o,a,l,u,c,p;if(Lx.call(this),2===arguments.length?((Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y))&&window.notify("Droite : (attendus : A et B) les arguments de sont pas des points valides",{arg1:e,arg2:t}),this.nom="",this.x1=e.x,this.y1=e.y,this.x2=t.x,this.y2=t.y,this.a=Nx(this.y1-this.y2),this.b=Nx(this.x2-this.x1),this.c=Nx((this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1)):3===arguments.length?"number"==typeof e?((Number.isNaN(e)||Number.isNaN(t)||Number.isNaN(r))&&window.notify("Droite : (attendus : a, b et c) les arguments de sont pas des nombres valides",{arg1:e,arg2:t,arg3:r}),this.nom="",this.a=e,this.b=t,this.c=r,i=e,s=t,o=r,cx(i,0)?(this.x1=0,this.x2=1,this.y1=Nx(-o/s),this.y2=Nx(-o/s)):cx(s,0)?(this.y1=0,this.y2=1,this.x1=Nx(-o/i),this.x2=Nx(-o/i)):(this.x1=0,this.y1=Nx(-o/s),this.x2=1,this.y2=Nx((-o-i)/s))):((Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y))&&window.notify('Droite : (attendus : A, B et "nom") les arguments de sont pas des points valides',{arg1:e,arg2:t}),this.x1=e.x,this.y1=e.y,this.x2=t.x,this.y2=t.y,this.a=Nx(this.y1-this.y2),this.b=Nx(this.x2-this.x1),this.c=Nx((this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1),this.nom=r):4===arguments.length&&("number"==typeof e?((Number.isNaN(e)||Number.isNaN(t)||Number.isNaN(r))&&window.notify('Droite : (attendus : a, b, c et "nom") les arguments de sont pas des nombres valides',{arg1:e,arg2:t,arg3:r}),this.a=e,this.b=t,this.c=r,i=e,s=t,o=r,this.nom=n,cx(i,0)?(this.x1=0,this.x2=1,this.y1=Nx(-o/s),this.y2=Nx(-o/s)):cx(s,0)?(this.y1=0,this.y2=1,this.x1=Nx(-o/i),this.x2=Nx(-o/i)):(this.x1=0,this.y1=Nx(-o/s),this.x2=1,this.y2=Nx((-o-i)/s))):((Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y))&&window.notify('Droite : (attendus : A, B, "nom" et "couleur") les arguments de sont pas des points valides',{arg1:e,arg2:t}),this.x1=e.x,this.y1=e.y,this.x2=t.x,this.y2=t.y,this.a=Nx(this.y1-this.y2),this.b=Nx(this.x2-this.x1),this.c=Nx((this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1),this.nom=r,this.color=n)),0!==this.b&&(this.pente=Nx(-this.a/this.b)),this.x1>this.x2&&(a=this.x1,l=this.y1,this.x1=this.x2+0,this.y1=this.y2+0,this.x2=a,this.y2=l),this.normal=Dw(this.a,this.b),this.directeur=Dw(this.b,-this.a),this.angleAvecHorizontale=tA(zx(1,0),zx(0,0),zx(this.directeur.x,this.directeur.y)),""!==this.nom){if(cx(this.b,0,.1))u=-this.c/this.a+.8,c=ox.fenetreMathalea2d[1]+1;else if(cx(this.a,0,.1))u=ox.fenetreMathalea2d[0]+.8,c=-this.c/this.b+.8;else{const e=(-this.a*(ox.fenetreMathalea2d[0]+1)-this.c)/this.b,t=(-this.a*(ox.fenetreMathalea2d[2]-1)-this.c)/this.b,r=(-this.b*(ox.fenetreMathalea2d[1]+1)-this.c)/this.a,n=(-this.b*(ox.fenetreMathalea2d[3]-1)-this.c)/this.a;e>ox.fenetreMathalea2d[1]&&e<ox.fenetreMathalea2d[3]?(u=ox.fenetreMathalea2d[0]+1,c=e+this.pente):t>ox.fenetreMathalea2d[1]&&t<ox.fenetreMathalea2d[3]?(u=ox.fenetreMathalea2d[2]-1,c=t-this.pente):r>ox.fenetreMathalea2d[0]&&r<ox.fenetreMathalea2d[2]?(u=r,c=ox.fenetreMathalea2d[1]+Math.abs(this.pente)):n>ox.fenetreMathalea2d[0]&&n<ox.fenetreMathalea2d[2]?(u=n,c=ox.fenetreMathalea2d[3]+this.pente):(u=(ox.fenetreMathalea2d[0]+ox.fenetreMathalea2d[2])/2,c=ew(this,u).y)}u=bx(u,2),c=bx(c,2),p=HS(this.nom,u,c,"milieu",this.color,1,"middle",!0)}this.svg=function(e){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);const t=zx(this.x1,this.y1),r=zx(this.x2,this.y2),n=Xx(t,r,-50),i=Xx(r,t,-50);return""===this.nom?`<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${i.xSVG(e)}" y2="${i.ySVG(e)}" stroke="${this.color}" ${this.style} id ="${this.id}" />`:`<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${i.xSVG(e)}" y2="${i.ySVG(e)}" stroke="${this.color}" ${this.style} id ="${this.id}" />`+p.svg(e)},this.tikz=function(){const e=[];if(this.color.length>1&&"black"!==this.color&&e.push(this.color),1!==this.epaisseur&&e.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:e.push(" dash dot ");break;case 2:e.push(" densely dash dot dot ");break;case 3:e.push(" dash dot dot ");break;case 4:e.push(" dotted ");break;default:e.push(" dashed ")}1!==this.opacite&&e.push(`opacity = ${this.opacite}`);let t=[];e.length>0&&(t="["+e.join(",")+"]");const r=zx(this.x1,this.y1),n=zx(this.x2,this.y2),i=Xx(r,n,-50),s=Xx(n,r,-50);return""!==this.nom?`\\draw${t} (${i.x},${i.y})--(${s.x},${s.y});`+p.tikz():`\\draw${t} (${i.x},${i.y})--(${s.x},${s.y});`},this.svgml=function(e,t){const r=zx(this.x1,this.y1),n=zx(this.x2,this.y2),i=$w(Xx(r,n,-50),Xx(n,r,-50),this.color);return i.isVisible=!1,i.svgml(e,t)+p.svg(e)},this.tikzml=function(e){const t=zx(this.x1,this.y1),r=zx(this.x2,this.y2),n=$w(Xx(t,r,-50),Xx(r,t,-50),this.color);return n.isVisible=!1,n.tikzml(e)+p.tikz()}}function aw(...e){return new ow(...e)}function lw(e,t){return"sur"===function(e,t){return 0===Nx(e.a*t.x+e.b*t.y+e.c)?"sur":0===e.b?t.x<-e.c/e.a?"gauche":"droite":Nx(e.a*t.x+e.b*t.y+e.c)<0?"dessous":"dessus"}(t,e)}function uw(e,{rxmin:t,rymin:r,rxmax:n,rymax:i,rzoom:s=1}={}){let o=1e3,a=1e3,l=-1e3,u=-1e3,c=!1;t=void 0!==t?t:-.5,r=void 0!==r?r:-.5,n=void 0!==n?n:.5,i=void 0!==i?i:.5;for(const p of e)Array.isArray(p.bordures)&&4===p.bordures.length&&(o=Math.min(o,p.bordures[0]),l=Math.max(l,p.bordures[2]),a=Math.min(a,p.bordures[1]),u=Math.max(u,p.bordures[3]),c=!0);return c||window.notify("fixeBordures : aucun objet ne définit de bordures valides",{...e}),{xmin:o+t*s,xmax:l+n*s,ymin:a+r*s,ymax:u+i*s}}function cw(e,{xmin:t=0,ymin:r=0,xmax:n=10,ymax:i=10}){let s,o,a,l,u,c;if(0===e.b)s=-e.b/e.c-.5,o=i-.5;else{const p=t=>(-e.c-e.a*t)/e.b;if(a=p(n),a<i&&a>r)s=n-.8,o=p(s);else if(u=p(t),u<i&&u>r)s=t+.8,o=p(s);else{const a=t=>(-e.c-e.b*t)/e.a;if(l=a(i),l<n&&l>t)o=i-.8,s=a(o);else{if(c=a(r),!(c<n&&c>t))return $x();o=r+.8,s=a(o)}}}return F_(zx(s,o),H_(Dw(e.a,e.b),zx(0,0),.5/JS(Dw(e.a,e.b))))}function pw(e,t,r="",n="black"){return aw(e,zx(Nx(e.x+t.x),Nx(e.y+t.y)),r,n)}function hw(e,t,r="",n="black"){return pw(e,t.directeur,r,n)}function dw(e,t,r="",n="black"){return pw(e,t.normal,r,n)}function fw(e,t="",r="black"){return gw(e,0,t,r)}function mw(e,t="",r){return pw(e,Dw(0,1),t,r)}function gw(e,t,r="",n="black"){return aw(e,zx(Nx(e.x+1),Nx(e.y+t)),r,n)}function yw(e,t,r="",n="black"){KS(e,t)<.001&&window.notify("mediatrice : Points trop rapprochés pour créer cet objet",{A:e,B:t});const i=Yx(e,t);return aw(j_(e,i,90),j_(e,i,-90),r,n)}function vw(e,t,r="black",n="×"){KS(e,t)<.1&&window.notify("CodageMediatrice : Points trop rapprochés pour créer ce codage",{A:e,B:t}),Lx.call(this),this.color=r;const i=Yx(e,t),s=AE(j_(e,i,90),i,t,this.color),o=qE(n,this.color,e,i,i,t);s.isVisible=!1,o.isVisible=!1,this.svg=function(e){return`<g id="${this.id}">${s.svg(e)+"\n"+o.svg(e)}</g>`},this.tikz=function(){return s.tikz()+"\n"+o.tikz()},this.svgml=function(e,t){return s.svgml(e,t)+"\n"+o.svg(e)},this.tikzml=function(e){return s.tikzml(e)+"\n"+o.tikz()}}function bw(...e){return new vw(...e)}function xw(e,t,r="black",n="×",i=!0){KS(e,t)<.1&&window.notify("CodageMilieu : Points trop rapprochés pour créer ce codage",{A:e,B:t}),Lx.call(this),this.color=r;const s=Yx(e,t),o=aw(e,t),a=Hx(s,o),l=qE(n,r,e,s,s,t);let u="";this.svg=function(e){return u=i?a.svg(e)+"\n"+l.svg(e):l.svg(e),u=`<g id="${this.id}">${u}</g>`,a.isVisible=!1,o.isVisible=!1,l.isVisible=!1,u},this.tikz=function(){return i?a.tikz()+"\n"+l.tikz():l.tikz()}}function ww(...e){return new xw(...e)}function _w(e,t,r=!1,n="blue",i="×",s="||",o="red",a=2){KS(e,t)<.1&&window.notify("ConstructionMediatrice : Points trop rapprochés pour créer cet objet",{A:e,B:t}),Lx.call(this);const l=Yx(e,t),u=j_(e,l,90),c=j_(e,l,-90),p=Xx(l,u,.785*KS(e,t)),h=Xx(l,c,.785*KS(e,t)),d=x_(e,p),f=x_(t,p),m=x_(e,h),g=x_(t,h),y=yw(e,t);d.isVisible=!1,f.isVisible=!1,m.isVisible=!1,g.isVisible=!1,y.isVisible=!1,y.color=o,y.epaisseur=a;const v=bw(e,t,n,i);v.isVisible=!1;const b=[d,f,m,g,y,v];if(r){const r=$w(e,p);r.pointilles=!0;const i=$w(t,p);i.pointilles=!0;const o=$w(e,h);o.pointilles=!0;const a=$w(t,h);a.pointilles=!0;const l=qE(s,n,e,p,t,p,e,h,t,h);b.push(r,i,o,a,l,v)}this.svg=function(e){let t="";for(const r of b)t+="\n\t"+r.svg(e);return t=`<g id="${this.id}">${t}</g>`,t},this.tikz=function(){let e="";for(const t of b)e+="\n\t"+t.tikz();return e},this.svgml=function(e,t){let r="";for(const n of b)void 0===n.svgml?r+="\n\t"+n.svg(e):r+="\n\t"+n.svgml(e,t);return r},this.tikzml=function(e){let t="";for(const r of b)void 0===r.tikzml?t+="\n\t"+r.tikz():t+="\n\t"+r.tikzml(e);return t}}function Ew(...e){return new _w(...e)}function Sw(e,t,r,n="black"){const i=Nx(tA(e,t,r)/2);return zw(t,j_(Xx(t,e,3),t,i),n)}function Aw(e,t,r,n="black",i="×"){Lx.call(this),this.color=n,this.mark=i,this.centre=t,this.depart=Xx(t,e,1.5),this.demiangle=Nx(tA(e,t,r)/2),this.lieu=j_(this.depart,t,this.demiangle),this.arrivee=Xx(t,r,1.5),this.svg=function(e){const r=BE(Xx(this.centre,this.depart,30/e),t,this.demiangle,30/e,this.mark,this.color,2,1),n=BE(Xx(this.centre,this.lieu,30/e),t,this.demiangle,30/e,this.mark,this.color,2,1);return r.svg(e)+"\n"+n.svg(e)+"\n"},this.tikz=function(){const e=BE(Xx(this.centre,this.depart,1.5/ox.scale),t,this.demiangle,1.5/ox.scale,this.mark,this.color,2,1),r=BE(Xx(this.centre,this.lieu,1.5/ox.scale),t,this.demiangle,1.5/ox.scale,this.mark,this.color,2,1);return e.tikz()+"\n"+r.tikz()+"\n"}}function Nw(...e){return new Aw(...e)}function kw(e,t,r,n=!1,i="blue",s="×",o=5,a="red",l=2){(KS(e,t)<.001||KS(t,r)<.001)&&window.notify("ConstructionBissectrice : points confondus",{A:e,O:t,B:r});const u=Xx(t,e,o),c=Xx(t,r,o),p=$w(t,u),h=$w(t,c);p.styleExtremites="-|",h.styleExtremites="-|";const d=aw(u,c);d.isVisible=!1;const f=W_(t,d),m=x_(c,f),g=x_(u,f),y=Sw(e,t,r);y.color=a,y.epaisseur=l;const v=[p,h,m,g,y];if(n){const e=$w(u,f),r=$w(c,f);e.pointilles=!0,r.pointilles=!0;const n=qE(s,i,t,u,u,f,t,c,c,f);v.push(e,r,n)}this.svg=function(e){let t="";for(const r of v)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of v)e+="\n\t"+t.tikz();return e}}function Mw(...e){return new kw(...e)}function Cw(...e){Lx.call(this),Array.isArray(e[0])?(this.listePoints=e[0],this.color=e[1]):this.listePoints=e;let t=1e3,r=-1e3,n=1e3,i=-1e3;for(const s of this.listePoints)"point"!==s.typeObjet&&window.notify("Polyline : argument invalide",{...e}),t=Math.min(t,s.x-this.taille/ox.pixelsParCm),r=Math.max(r,s.x+this.taille/ox.pixelsParCm),n=Math.min(n,s.y-this.taille/ox.pixelsParCm),i=Math.max(i,s.y+this.taille/ox.pixelsParCm);if(this.bordures=[t,n,r,i],this.nom="",e.length<15)for(const s of e)this.nom+=s.nom;this.svg=function(e){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);let t="";for(const r of this.listePoints)t+=`${Nx(r.x*e)},${Nx(-r.y*e)} `;return`<polyline points="${t}" fill="none" stroke="${this.color}" ${this.style} id="${this.id}" />`},this.tikz=function(){const e=[];if(this.color.length>1&&"black"!==this.color&&e.push(this.color),1!==this.epaisseur&&e.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:e.push(" dash dot ");break;case 2:e.push(" densely dash dot dot ");break;case 3:e.push(" dash dot dot ");break;case 4:e.push(" dotted ");break;default:e.push(" dashed ")}1!==this.opacite&&e.push(`opacity = ${this.opacite}`);let t=[];e.length>0&&(t="["+e.join(",")+"]");let r="";for(const n of this.listePoints)r+=`(${n.x},${n.y})--`;return r=r.substr(0,r.length-2),`\\draw${t} ${r};`},this.svgml=function(e,t){let r,n="";for(let i=1;i<this.listePoints.length;i++)r=$w(this.listePoints[i-1],this.listePoints[i]),r.epaisseur=this.epaisseur,r.color=this.color,r.opacite=this.opacite,n+=r.svgml(e,t);return n},this.tikzml=function(e){const t=[];this.color.length>1&&"black"!==this.color&&t.push(this.color),1!==this.epaisseur&&t.push(`line width = ${this.epaisseur}`),1!==this.opacite&&t.push(`opacity = ${this.opacite}`),t.push(`decorate,decoration={random steps , segment length=3pt, amplitude = ${e}pt}`);let r=[];t.length>0&&(r="["+t.join(",")+"]");let n="";for(const i of this.listePoints)n+=`(${i.x},${i.y})--`;return n=n.substr(0,n.length-2),`\\draw${r} ${n};`}}function Tw(...e){return new Cw(...e)}function Ow(e=10,t=5,r=5,n=zx(0,0),i=!0,s=30,o=.5){const a=[],l=n,u=zx(l.x+e,l.y),c=zx(u.x,u.y+t),p=zx(l.x,l.y+t),h=jw(l,u,c,p),d=rw(l,Nx(r*o),s),f=F_(u,Dw(l,d)),m=F_(c,Dw(l,d)),g=F_(p,Dw(l,d)),y=$w(l,d),v=$w(u,f),b=$w(c,m),x=$w(p,g),w=$w(d,f),_=$w(f,m),E=$w(m,g),S=$w(g,d);y.pointilles=!0,w.pointilles=!0,S.pointilles=!0,a.push(h,y,v,b,x,w,_,E,S),i&&(a.push(PE($w(u,l),"",1)),a.push(PE($w(l,p),"",1)),a.push(PE($w(f,u),r+" cm",1))),this.svg=function(e){let t="";for(const r of a)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of a)e+="\n\t"+t.tikz();return e}}function Iw(...e){return new Ow(...e)}function Pw(e,t,r=""){Lx.call(this),1===arguments.length?this.nom=e:("number"==typeof e?(this.x=e,this.y=t):(this.x=Nx(t.x-e.x),this.y=Nx(t.y-e.y)),this.nom=r),this.norme=function(){return Nx(Math.sqrt(this.x**2+this.y**2))},this.oppose=function(){this.x=-this.x,this.y=-this.y},this.xSVG=function(e){return this.x*e},this.ySVG=function(e){return-this.y*e},this.representant=function(e){const t=$w(e,zx(e.x+this.x,e.y+this.y));return t.styleExtremites="|->",t},this.representantNomme=function(e,t,r=1,n="black"){let i,s,o;const a=zx(e.x+this.x,e.y+this.y),l=Yx(e,a);i=$w(e,a),s=i.angleAvecHorizontale,o=Q_(this,e,90,.5/this.norme()),Math.abs(s)>90&&(i=$w(a,e),s=i.angleAvecHorizontale,o=Q_(this,e,-90,.5/this.norme()));const u=F_(l,o);return Lw(t,u.x,u.y,r,0,n)}}function Dw(e,t,r=""){return new Pw(e,t,r)}function Rw(e,t,r,n=1,i=0,s="black"){Lx.call(this),this.nom=e,this.x=t,this.y=r,this.color=s,this.angle=i,this.taille=n;const o=[],a=HS(this.nom,this.x,this.y,-this.angle,this.color,this.taille,"middle",!0),l=zx(this.x,this.y),u=zx(l.x+.25*this.nom.length,l.y),c=Q_(u,l,90+this.angle,2/this.nom.length),p=j_(F_(c,Dw(u,l)),c,this.angle),h=$w(p,j_(p,c,180));h.styleExtremites="->",h.tailleExtremites=3,h.color=this.color,o.push(a,h),this.svg=function(e){let t="";for(const r of o)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of o)e+="\n\t"+t.tikz();return e}}function Lw(e,t,r,n=1,i=0,s="black"){return new Rw(e,t,r,n,i,s)}function qw(e,t,r,n,i){Lx.call(this),this.typeObjet="segment",this.styleExtremites="",this.tailleExtremites=4,2===arguments.length?((Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y))&&window.notify("Segment : (attendus : A et B) les arguments de sont pas des points valides",{arg1:e,arg2:t}),this.x1=bx(e.x,2),this.y1=bx(e.y,2),this.x2=bx(t.x,2),this.y2=bx(t.y,2),this.bordure=[e,t]):3===arguments.length?((Number.isNaN(e.x)||Number.isNaN(e.y)||Number.isNaN(t.x)||Number.isNaN(t.y))&&window.notify('Segment : (attendus : A, B et "couleur") les arguments de sont pas des points valides',{arg1:e,arg2:t}),this.x1=bx(e.x,2),this.y1=bx(e.y,2),this.x2=bx(t.x,2),this.y2=bx(t.y,2),this.bordure=[e,t],this.color=r):4===arguments.length?((Number.isNaN(e)||Number.isNaN(t)||Number.isNaN(r)||Number.isNaN(n))&&window.notify("Segment : (attendus : x1, y1, x2 et y2) les arguments de sont pas des nombres valides",{arg1:e,arg2:t}),this.x1=bx(e,2),this.y1=bx(t,2),this.x2=bx(r,2),this.y2=bx(n,2),this.bordure=[zx(e,t),zx(r,n)]):((Number.isNaN(e)||Number.isNaN(t)||Number.isNaN(r)||Number.isNaN(n))&&window.notify('Segment : (attendus : x1, y1, x2, y2 et "couleur") les arguments de sont pas des nombres valides',{arg1:e,arg2:t}),this.x1=bx(e,2),this.y1=bx(t,2),this.x2=bx(r,2),this.y2=bx(n,2),this.bordure=[zx(e,t),zx(r,n)],this.color=i),this.bordures=[Math.min(this.x1,this.x2)-.2,Math.min(this.y1,this.y2)-.2,Math.max(this.x1,this.x2)+.2,Math.max(this.y1,this.y2)+.2],this.extremite1=zx(this.x1,this.y1),this.extremite2=zx(this.x2,this.y2),this.longueur=Nx(Math.sqrt((this.x2-this.x1)**2+(this.y2-this.y1)**2)),this.angleAvecHorizontale=tA(zx(this.x1+1,this.y1),this.extremite1,this.extremite2),this.svg=function(e){const t=this.tailleExtremites;if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);let r="";const n=zx(this.x1,this.y1),i=zx(this.x2,this.y2);if(this.styleExtremites.length>1){if("|"===this.styleExtremites.substr(-1)){const s=Xx(i,n,t/ox.pixelsParCm),o=j_(s,i,90),a=j_(s,i,-90);r+=`<line x1="${o.xSVG(e)}" y1="${o.ySVG(e)}" x2="${a.xSVG(e)}" y2="${a.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`}if(">"===this.styleExtremites.substr(-1)){const s=Xx(i,n,t/ox.pixelsParCm),o=j_(i,s,90),a=j_(i,s,-90);r+=`<line x1="${i.xSVG(e)}" y1="${i.ySVG(e)}" x2="${o.xSVG(e)}" y2="${o.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`,r+=`\n\t<line x1="${i.xSVG(e)}" y1="${i.ySVG(e)}" x2="${a.xSVG(e)}" y2="${a.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`}if("<"===this.styleExtremites.substr(-1)){const s=Xx(i,n,-t/ox.pixelsParCm),o=j_(i,s,90),a=j_(i,s,-90);r+=`<line x1="${i.xSVG(e)}" y1="${i.ySVG(e)}" x2="${o.xSVG(e)}" y2="${o.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`,r+=`\n\t<line x1="${i.xSVG(e)}" y1="${i.ySVG(e)}" x2="${a.xSVG(e)}" y2="${a.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`}if("<"===this.styleExtremites[0]){const s=Xx(n,i,t/ox.pixelsParCm),o=j_(n,s,90),a=j_(n,s,-90);r+=`<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${o.xSVG(e)}" y2="${o.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`,r+=`\n\t<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${a.xSVG(e)}" y2="${a.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`}if(">"===this.styleExtremites[0]){const s=Xx(n,i,-t/ox.pixelsParCm),o=j_(n,s,90),a=j_(n,s,-90);r+=`<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${o.xSVG(e)}" y2="${o.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`,r+=`\n\t<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${a.xSVG(e)}" y2="${a.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`}if("|"===this.styleExtremites[0]){const s=Xx(n,i,t/ox.pixelsParCm),o=j_(s,n,90),a=j_(s,n,-90);r+=`<line x1="${o.xSVG(e)}" y1="${o.ySVG(e)}" x2="${a.xSVG(e)}" y2="${a.ySVG(e)}" stroke="${this.color}" stroke-width="${this.epaisseur}" />`}}return r+=`\n\t<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${i.xSVG(e)}" y2="${i.ySVG(e)}" stroke="${this.color}" ${this.style} />`,r=this.styleExtremites.length>0?`<g id="${this.id}">${r}</g>`:r.replace("/>",`id="${this.id}" />`),r},this.tikz=function(){let e=[];const t=[];if(this.color.length>1&&"black"!==this.color&&t.push(this.color),1!==this.epaisseur&&t.push(`line width = ${this.epaisseur}`),1!==this.opacite&&t.push(`opacity = ${this.opacite}`),this.pointilles)switch(this.pointilles){case 1:t.push(" dash dot ");break;case 2:t.push(" densely dash dot dot ");break;case 3:t.push(" dash dot dot ");break;case 4:t.push(" dotted ");break;default:t.push(" dashed ")}return this.styleExtremites.length>1&&t.push(this.styleExtremites),t.length>0&&(e="["+t.join(",")+"]"),`\\draw${e} (${this.x1},${this.y1})--(${this.x2},${this.y2});`},this.svgml=function(e,t){this.style='fill="none"',1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);const r=zx(this.x1,this.y1),n=zx(this.x2,this.y2),i=KS(r,n),s=(n.xSVG(e)-r.xSVG(e))/i/2,o=(n.ySVG(e)-r.ySVG(e))/i/2;let a=`<path d="M ${r.xSVG(e)}, ${r.ySVG(e)} Q ${Math.round(r.xSVG(e),0)}, ${bx(r.ySVG(e),0)} `,l=1;for(let u=0;u<2*i+.25;u+=.5)l++,a+=`${Math.round(r.xSVG(e)+u*s+fx(-2,2,0)*t)}, ${Math.round(r.ySVG(e)+u*o+fx(-2,2,0)*t)} `;return a+=l%2==1?` ${Math.round(n.xSVG(e),0)}, ${bx(n.ySVG(e),0)}" stroke="${this.color}" ${this.style}/>`:` ${Math.round(n.xSVG(e),0)}, ${bx(n.ySVG(e),0)} ${bx(n.xSVG(e),0)}, ${bx(n.ySVG(e),0)}" stroke="${this.color}" ${this.style}/>`,a},this.tikzml=function(e){const t=zx(this.x1,this.y1),r=zx(this.x2,this.y2);let n=[];const i=[];this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),this.styleExtremites.length>1&&i.push(this.styleExtremites),i.push(`decorate,decoration={random steps , amplitude = ${e}pt}`),n="["+i.join(",")+"]";return`\\draw${n} (${t.x},${t.y})--(${r.x},${r.y});`}}function $w(...e){return new qw(...e)}function Bw(...e){const t=$w(...e);return t.styleExtremites="|-|",t}function zw(e,t,r="black"){return $w(e,Xx(t,e,-10),r)}function Fw(e,t,r="black"){const n=$w(e,Xx(t,e,-10),r);return n.styleExtremites="|-",n}function Uw(...e){Lx.call(this),this.couleurDeRemplissage="none",this.opaciteDeRemplissage=1.1,this.hachures=!1,this.couleurDesHachures="black",this.epaisseurDesHachures=1,this.distanceDesHachures=10,Array.isArray(e[0])?(this.listePoints=e[0],e[1]&&(this.color=e[1]),this.nom=this.listePoints.join()):(this.listePoints=e,this.nom=this.listePoints.join());let t=1e3,r=-1e3,n=1e3,i=-1e3;for(const s of this.listePoints)"point"!==s.typeObjet&&window.notify("Polygone : argument invalide",{...e}),t=Math.min(t,s.x-s.positionLabel.indexOf("left")!=-1?1:0),r=Math.max(r,s.x+s.positionLabel.indexOf("right")!==-1?1:0),n=Math.min(n,s.y-s.positionLabel.indexOf("below")!=-1?1:0),i=Math.max(i,s.y+s.positionLabel.indexOf("above")!==-1?1:0);this.bordures=[t,n,r,i],this.binomesXY=function(e){let t="";for(const r of this.listePoints)t+=`${Nx(r.x*e)},${Nx(-r.y*e)} `;return t},this.svg=function(e){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return this.hachures?(this.couleurDeRemplissage.length<1&&(this.couleurDeRemplissage="none"),AA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})+`<polygon points="${this.binomesXY(e)}" stroke="${this.color}" ${this.style} id="${this.id}" fill="url(#pattern${this.id})" />`):(""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),`<polygon points="${this.binomesXY(e)}" stroke="${this.color}" ${this.style} id="${this.id}" />`)},this.tikz=function(){const e=[];if(this.color.length>1&&"black"!==this.color&&e.push(this.color),1!==this.epaisseur&&e.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:e.push(" dash dot ");break;case 2:e.push(" densely dash dot dot ");break;case 3:e.push(" dash dot dot ");break;case 4:e.push(" dotted ");break;default:e.push(" dashed ")}1!==this.opacite&&e.push(`opacity=${this.opacite}`),1!==this.opaciteDeRemplissage&&e.push(`fill opacity = ${this.opaciteDeRemplissage}`),""!==this.couleurDeRemplissage&&e.push(`fill = ${this.couleurDeRemplissage}`),this.hachures&&this.hachures&&e.push(AA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage}));let t=[];e.length>0&&(t="["+e.join(",")+"]");let r="";for(const n of this.listePoints)r+=`(${n.x},${n.y})--`;return""===this.couleurDeRemplissage?`\\draw ${t} ${r}cycle;`:`\\filldraw ${t} ${r}cycle;`},this.svgml=function(e,t){let r,n,i="",s=this.listePoints[0];for(let o=1;o<=this.listePoints.length;o++)n=this.listePoints[o%this.listePoints.length],s=this.listePoints[o-1],r=$w(s,n),r.isVisible=!0,r.epaisseur=this.epaisseur,r.color=this.color,r.opacite=this.opacite,i+=r.svgml(e,t);return i},this.tikzml=function(e){let t,r,n,i="";for(let s=1;s<=this.listePoints.length;s++)n=this.listePoints[s%this.listePoints.length],r=this.listePoints[s-1],t=$w(r,n),t.isVisible=!1,t.epaisseur=this.epaisseur,t.color=this.color,t.opacite=this.opacite,i+="\t"+t.tikzml(e)+"\n";return i}}function jw(...e){return new Uw(...e)}function Gw(...e){const t=jw(...e);return t.sommets=s_(t),t.sommets.bordures=[],t.sommets.bordures[0]=t.bordures[0]-1,t.sommets.bordures[1]=t.bordures[1]-1,t.sommets.bordures[2]=t.bordures[2]+1,t.sommets.bordures[3]=t.bordures[3]+1,[t,t.sommets]}function Vw(e,t,r,n="black"){const i=[e,t];for(let s=1;s<r-1;s++)i[s+1]=j_(i[s-1],i[s],Nx(360/r-180));return jw(i,n)}function Hw(e,t,r,n="black"){const i=[e,t];for(let s=1;s<r-1;s++)i[s+1]=j_(i[s-1],i[s],Nx(180-360/r));return jw(i,n)}function Ww(e,t,r){return Vw(e,t,4,r)}function Yw(e,t,r){return Hw(e,t,4,r)}function Xw(e,t="black",r="×"){const n=[];n.push(qE(r,t,e.listePoints)),n.push(AE(e.listePoints[0],e.listePoints[1],e.listePoints[2],t)),n.push(AE(e.listePoints[1],e.listePoints[2],e.listePoints[3],t)),n.push(AE(e.listePoints[2],e.listePoints[3],e.listePoints[0],t)),n.push(AE(e.listePoints[3],e.listePoints[0],e.listePoints[1],t)),this.svg=function(e){let t="";for(const r of n)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of n)e+="\n\t"+t.tikz();return e}}function Zw(...e){return new Xw(...e)}function Qw(e,t,r,n="black"){const i=[];i[0]=zx(Nx(e.x+t),e.y);for(let s=1;s<r;s++)i[s]=j_(i[s-1],e,Nx(-360/r));return jw(i,n)}class Kw{constructor({Xmin:e=0,Ymin:t=0,Xmax:r=1,Ymax:n=1,color:i="black",colorFill:s=!1,opaciteDeRemplissage:o=.7,texteIn:a="",tailleTexte:l=1,texteColor:u="black",texteOpacite:c=.7,texteMath:p=!1,echelleFigure:h=1}={}){Lx.call(this),this.forme=jw([zx(e,t),zx(r,t),zx(r,n),zx(e,n)],i),this.bordures=this.forme.bordures,s&&(this.forme.couleurDeRemplissage=s,this.forme.opaciteDeRemplissage=o),""!==a?(this.texte=function(e,t,r,n="milieu",i="black",s=1,o="middle",a=!1,l=1){return VS(e,zx(t,r,"","center"),n,i,s,o,a,l)}(a,(e+r)/2,(t+n)/2,"milieu",u,l,"middle",p,h),this.texte.opacite=c):this.texte=!1,this.svg=function(e){return this.texte?this.forme.svg(e)+this.texte.svg(e):this.forme.svg(e)},this.tikz=function(){return this.texte?this.forme.tikz()+this.texte.tikz():this.forme.tikz()}}}function Jw({Xmin:e=0,Ymin:t=0,Xmax:r=1,Ymax:n=1,color:i="black",colorFill:s=!1,opaciteDeRemplissage:o=.7,texteIn:a="",tailleTexte:l=1,texteColor:u="black",texteOpacite:c=.7,texteMath:p=!1,echelleFigure:h=1}={}){return new Kw({Xmin:e,Ymin:t,Xmax:r,Ymax:n,color:i,colorFill:s,opaciteDeRemplissage:o,texteIn:a,tailleTexte:l,texteColor:u,texteOpacite:c,texteMath:p,echelleFigure:h})}function e_(e,t,r,n,i=1){const s=u_(e,r),o=u_(t,n);let a;return a=1===i?d_(s,o):d_(s,o,"",2),s.isVisible=!1,o.isVisible=!1,jw(e,t,a)}function t_(e,t,r,n,i=1){1===i?n*=-1:r*=-1;const s=j_(Xx(e,t,1),e,r),o=j_(Xx(t,e,1),t,n),a=aw(e,s),l=aw(t,o);a.isVisible=!1,l.isVisible=!1;return jw(e,t,tw(a,l,"C"))}function r_(e,t,r,n,i=1){r=1===i?Math.abs(r)%180:-Math.abs(r)%180;return jw(e,t,j_(Xx(e,t,n),e,r))}function n_(e,t,r,n,i=1){let s;r=i%2==1?Math.abs(r)%180:-Math.abs(r)%180;const o=aw(e,t),a=j_(o,e,r),l=u_(t,n);return o.isVisible=!1,a.isVisible=!1,l.isVisible=!1,s=h_(a,l,"",i+1>>1==1?1:2),jw(e,t,s)}function i_(e,t="",r=.5){Lx.call(this),this.poly=e,this.dist=r;for(let n=0;n<e.listePoints.length;n++)""!==t&&(e.listePoints[n].nom=t[n]);this.svg=function(e){let t,r="";const n=this.poly,i=this.dist,s=sw(n);for(let o=0;o<n.listePoints.length;o++)t=Xx(s,n.listePoints[o],KS(s,n.listePoints[o])+20*i/e),t.positionLabel="center",r+="\n\t"+jS(n.listePoints[o].nom,t,"milieu","black",1,"middle",!0).svg(e);return r},this.tikz=function(){let e,t="";const r=this.poly,n=this.dist,i=sw(r);for(let s=0;s<r.listePoints.length;s++)e=Xx(i,r.listePoints[s],KS(i,r.listePoints[s])+n/ox.scale),t+="\n\t"+jS(`$${r.listePoints[s].nom}$`,e,"milieu").tikz();return t}}function s_(...e){return new i_(...e)}function o_(e,t,r){for(let n=0;n<e.listePoints.length;n++)for(const i in t)e.listePoints[n].nom===t[i]&&(e.listePoints[n].positionLabel=r,iw(e.listePoints[n]))}function a_(e){if(3!==e.listePoints.length)return!1;const t=e.listePoints[0],r=e.listePoints[1],n=e.listePoints[2];return.5*Math.abs((r.x-t.x)*(n.y-t.y)-(n.x-t.x)*(r.y-t.y))}function l_(e,t,r){Lx.call(this),r&&(this.color=r,this.styleTikz=`[${r}]`),this.centre=e,this.rayon=t,this.couleurDeRemplissage="",this.opaciteDeRemplissage=1.1,this.hachures=!1,this.couleurDesHachures="black",this.epaisseurDesHachures=1,this.distanceDesHachures=10,this.bordures=[e.x-t,e.y-t,e.x+t,e.y+t],this.svg=function(r){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return this.hachures?(this.couleurDeRemplissage.length<1&&(this.couleurDeRemplissage="none"),AA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})+`<circle cx="${e.xSVG(r)}" cy="${e.ySVG(r)}" r="${t*r}" stroke="${this.color}" ${this.style} id="${this.id}" fill="url(#pattern${this.id})" />`):(1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),`<circle cx="${e.xSVG(r)}" cy="${e.ySVG(r)}" r="${t*r}" stroke="${this.color}" ${this.style} id="${this.id}" />`)},this.tikz=function(){let r=[];const n=[];if(this.color.length>1&&"black"!==this.color&&n.push(this.color),1!==this.epaisseur&&n.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:n.push(" dash dot ");break;case 2:n.push(" densely dash dot dot ");break;case 3:n.push(" dash dot dot ");break;case 4:n.push(" dotted ");break;default:n.push(" dashed ")}return 1!==this.opacite&&n.push(`opacity = ${this.opacite}`),this.hachures&&this.hachures&&n.push(AA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})),n.length>0&&(r="["+n.join(",")+"]"),`\\draw${r} (${e.x},${e.y}) circle (${t});`},this.svgml=function(r,n){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);let i=`<path d="M ${e.xSVG(r)+t*r} ${e.ySVG(r)} C ${e.xSVG(r)+t*r} ${e.ySVG(r)}, `;for(let s=1;s<101;s++)i+=`${bx(e.xSVG(r)+t*Math.cos(2*s*Math.PI/101)*r+fx(-1,1)*n,2)} ${bx(e.ySVG(r)+t*Math.sin(2*s*Math.PI/100)*r+fx(-1,1)*n,2)}, `;return i+=` ${e.xSVG(r)+t*r} ${e.ySVG(r)} Z" stroke="${this.color}" ${this.style}"/>`,i},this.tikzml=function(r){let n=[];const i=[];this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.push(`decorate,decoration={random steps , amplitude = ${r}pt}`),n="["+i.join(",")+"]";return`\\draw${n} (${e.x},${e.y}) circle (${t});`}}function u_(e,t,r="black"){return new l_(e,t,r)}function c_(e,t,r,n){Lx.call(this),n&&(this.color=n,this.styleTikz=`[${n}]`),this.centre=e,this.rx=t,this.ry=r,this.couleurDeRemplissage="",this.opaciteDeRemplissage=1.1,this.bordures=[e.x-t,e.y-r,e.x+t,e.y+r],this.svg=function(n){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return 1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),`<ellipse cx="${e.xSVG(n)}" cy="${e.ySVG(n)}" rx="${Nx(t*n)}" ry="${Nx(r*n)}" stroke="${this.color}" ${this.style} id="${this.id}" />`},this.tikz=function(){let n=[];const i=[];if(this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:i.push(" dash dot ");break;case 2:i.push(" densely dash dot dot ");break;case 3:i.push(" dash dot dot ");break;case 4:i.push(" dotted ");break;default:i.push(" dashed ")}return 1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.length>0&&(n="["+i.join(",")+"]"),`\\draw${n} (${e.x},${e.y}) ellipse (${t}cm and ${r}cm);`},this.tikzml=function(n){let i=[];const s=[];this.color.length>1&&"black"!==this.color&&s.push(this.color),1!==this.epaisseur&&s.push(`line width = ${this.epaisseur}`),1!==this.opacite&&s.push(`opacity = ${this.opacite}`),s.push(`decorate,decoration={random steps , amplitude = ${n}pt}`),i="["+s.join(",")+"]";return`\\draw${i} (${e.x},${e.y}) ellipse (${t}cm and ${r}cm);`}}function p_(...e){return new c_(...e)}function h_(e,t,r="",n=1){const i=t.centre,s=t.rayon,o=e.a,a=e.b,l=e.c,u=i.x,c=i.y;let p,h,d,f,m,g;if(0===a){if(d=Nx(-l/o),m=d,p=Nx(4*(-u*u-l*l/(o*o)-2*u*l/o+s*s)),p<0)return!1;cx(p,0)?(f=Nx(c+Math.sqrt(p)/2),g=f):(f=Nx(c-Math.sqrt(p)/2),g=Nx(c+Math.sqrt(p)/2))}else if(0===o){if(f=Nx(-l/a),g=f,p=Nx(4*(-c*c-l*l/(a*a)-2*c*l/a+s*s)),p<0)return!1;cx(p,0)?(d=Nx(u+Math.sqrt(p)/2),m=d):(d=Nx(u-Math.sqrt(p)/2),m=Nx(u+Math.sqrt(p)/2))}else{if(p=Nx((2*(o*l/(a*a)+c*o/a-u))**2-4*(1+(o/a)**2)*(u*u+c*c+(l/a)**2+2*c*l/a-s*s)),p<0)return!1;cx(p,0)?(h=Nx(Math.sqrt(p)),d=Nx((-2*(o*l/(a*a)+c*o/a-u)-h)/(2*(1+(o/a)**2))),m=d,f=Nx((-o*d-l)/a),g=f):(h=Nx(Math.sqrt(p)),d=Nx((-2*(o*l/(a*a)+c*o/a-u)-h)/(2*(1+(o/a)**2))),m=Nx((-2*(o*l/(a*a)+c*o/a-u)+h)/(2*(1+(o/a)**2))),f=Nx((-o*d-l)/a),g=Nx((-o*m-l)/a))}return 1===n?g>f?zx(m,g,r):zx(d,f,r):g>f?zx(d,f,r):zx(m,g,r)}function d_(e,t,r="",n=1){const i=e.centre,s=t.centre,o=e.rayon,a=t.rayon,l=i.x,u=s.x,c=i.y,p=u-l,h=s.y-c,d=Math.sqrt(h*h+p*p);if(d>o+a)return!1;if(d<Math.abs(o-a))return!1;const f=(o*o-a*a+d*d)/(2*d),m=l+p*f/d,g=c+h*f/d,y=Math.sqrt(o*o-f*f),v=y/d*-h,b=p*(y/d),x=m+v,w=m-v,_=g+b,E=g-b;return 1===n?E>_?zx(w,E,r):zx(x,_,r):E>_?zx(x,_,r):zx(w,E,r)}function f_(e,t,r="black"){l_.call(this,e,KS(e,t),r)}function m_(...e){return new f_(...e)}function g_(e,t,r,n=!1,i="none",s="black",o=.2){Lx.call(this),this.color=s,this.couleurDeRemplissage=i,this.opaciteDeRemplissage=o,this.hachures=!1,this.couleurDesHachures="black",this.epaisseurDesHachures=1,this.distanceDesHachures=10,this.bordure=j_(e,t,r/2);const a=j_(e,t,r/2);"number"!=typeof r&&(r=bx(tA(e,t,r),1));let l=KS(t,e),u=0,c=0;const p=bx(tA(zx(t.x+1,t.y),t,e),1),h=bx(p+r,1);r>180?(r-=360,u=1,c=0):r<-180?(r=360+r,u=1,c=1):(u=0,c=1-(r>0));const d=j_(e,t,r);let f,m,g,y,v,b,x,w;this.bordures=[Math.min(e.x,d.x,a.x)-.1,Math.min(e.y,d.y,a.y)-.1,Math.max(e.x,d.x,a.x)+.1,Math.max(e.y,d.y,a.y)+.1],this.svg=n?function(r){if(this.style="",1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return this.hachures?(this.couleurDeRemplissage.length<1&&(this.couleurDeRemplissage="none"),AA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})+`<path d="M${e.xSVG(r)} ${e.ySVG(r)} A ${bx(l*r,1)} ${bx(l*r,1)} 0 ${u} ${c} ${d.xSVG(r)} ${d.ySVG(r)} L ${t.xSVG(r)} ${t.ySVG(r)} Z" stroke="${this.color}"  ${this.style} id="${this.id}" fill="url(#pattern${this.id})" />`):(1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),"none"!==this.couleurDeRemplissage&&(this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),`<path d="M${e.xSVG(r)} ${e.ySVG(r)} A ${bx(l*r,1)} ${bx(l*r,1)} 0 ${u} ${c} ${d.xSVG(r)} ${d.ySVG(r)} L ${t.xSVG(r)} ${t.ySVG(r)} Z" stroke="${this.color}" fill="${this.couleurDeRemplissage}" ${this.style}/>`)}:function(t){if(this.style="",1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return 1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),`<path d="M${e.xSVG(t)} ${e.ySVG(t)} A ${bx(l*t,1)} ${bx(l*t,1)} 0 ${u} ${c} ${d.xSVG(t)} ${d.ySVG(t)}" stroke="${this.color}" fill="${i}" ${this.style} id="${this.id}" />`},this.tikz=function(){let r=[];const s=[];if(this.color.length>1&&"black"!==this.color&&s.push(this.color),1!==this.epaisseur&&s.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:s.push(" dash dot ");break;case 2:s.push(" densely dash dot dot ");break;case 3:s.push(" dash dot dot ");break;case 4:s.push(" dotted ");break;default:s.push(" dashed ")}return 1!==this.opacite&&s.push(`opacity = ${this.opacite}`),n&&"none"!==i&&s.push(`fill opacity = ${this.opaciteDeRemplissage}`),n&&"none"!==i&&s.push(`fill = ${this.couleurDeRemplissage}`),this.hachures&&s.push(AA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})),s.length>0&&(r="["+s.join(",")+"]"),n?`\\filldraw  ${r} (${d.x},${d.y}) -- (${t.x},${t.y}) -- (${e.x},${e.y}) arc (${p}:${h}:${bx(KS(t,e),2)}) -- cycle ;`:`\\draw${r} (${e.x},${e.y}) arc (${p}:${h}:${bx(KS(t,e),2)}) ;`},this.svgml=function(i,o){if(this.style="",n){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage||"none"===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),f=KS(e,t),m=r/f/10,g=`<path d="M${e.xSVG(i)} ${e.ySVG(i)} C `;for(let n=0;n<=r;n+=m)y=j_(e,t,n),g+=`${Math.round(y.xSVG(i)+fx(-1,1)*o)} ${Math.round(y.ySVG(i)+fx(-1,1)*o)}, `;y=j_(e,t,f*m),g+=`${Math.round(y.xSVG(i)+fx(-1,1)*o)} ${Math.round(y.ySVG(i)+fx(-1,1)*o)} `,l=KS(t,e),v=(e.xSVG(i)-t.xSVG(i))/(4*l),b=(e.ySVG(i)-t.ySVG(i))/(4*l),x=(t.xSVG(i)-y.xSVG(i))/(4*l),w=(t.ySVG(i)-y.ySVG(i))/(4*l);for(let e=0;e<=4*l;e++)g+=`${Math.round(y.xSVG(i)+e*x+fx(-1,1)*o)} ${Math.round(y.ySVG(i)+e*w+fx(-1,1)*o)}, `;for(let e=0;e<=4*l;e++)g+=`${Math.round(t.xSVG(i)+e*v+fx(-1,1)*o)} ${Math.round(t.ySVG(i)+e*b+fx(-1,1)*o)}, `;return g+=`${Math.round(t.xSVG(i)+4*l*v+fx(-1,1)*o)} ${Math.round(t.ySVG(i)+4*l*b+fx(-1,1)*o)} Z `,g+=`" stroke="${s}" ${this.style} />`,g}1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),this.style+=' fill="none" ',f=KS(e,t),m=r/f/10,g=`<path d="M${e.xSVG(i)} ${e.ySVG(i)} C `;for(let n=0;Math.abs(n)<=Math.abs(r);n+=m)y=j_(e,t,n),g+=`${Math.round(y.xSVG(i)+fx(-1,1)*o)} ${Math.round(y.ySVG(i)+fx(-1,1)*o)}, `;return y=j_(e,t,r),g+=`${Math.round(y.xSVG(i)+fx(-1,1)*o)} ${Math.round(y.ySVG(i)+fx(-1,1)*o)} `,g+=`" stroke="${s}" ${this.style}/>`,g},this.tikzml=function(s){let o=[];const a=[],l=bx(tA(zx(t.x+1,t.y),t,e),1),u=bx(l+r,1),c=j_(e,t,r);return this.color.length>1&&"black"!==this.color&&a.push(this.color),1!==this.epaisseur&&a.push(`line width = ${this.epaisseur}`),1!==this.opacite&&a.push(`opacity = ${this.opacite}`),n&&"none"!==i&&a.push(`fill opacity = ${this.opaciteDeRemplissage}`),n&&"none"!==i&&a.push(`fill = ${this.couleurDeRemplissage}`),a.push(`decorate,decoration={random steps , amplitude = ${s}pt}`),o="["+a.join(",")+"]",n?`\\filldraw  ${o} (${c.x},${c.y}) -- (${t.x},${t.y}) -- (${e.x},${e.y}) arc (${l}:${u}:${bx(KS(t,e),2)}) -- cycle ;`:`\\draw${o} (${e.x},${e.y}) arc (${l}:${u}:${bx(KS(t,e),2)}) ;`}}function y_(e,t,r,n=!1,i="none",s="black",o=.2){return new g_(e,t,r,n,i,s,o)}function v_(e,t,r,n=!1,i="none",s="black",o=.2){let a;a=Nx(r<0?(r+180)/2:(r-180)/2);const l=yw(e,t,"black");l.isVisible=!1;const u=aw(t,e);u.isVisible=!1;const c=j_(u,t,a);c.isVisible=!1;const p=Nx((-c.c+l.c*c.a/l.a)/(c.b-c.a*l.b/l.a)),h=zx(Nx(-l.c/l.a-l.b*p/l.a),p);g_.call(this,e,h,r,n,i,s,o)}function b_(...e){return new v_(...e)}function x_(e,t,r=20,n="gray",i=1.1,s=1,o=!1){const a=y_(j_(t,e,-r/2),e,r,!1);return a.epaisseur=s,a.opacite=i,a.color=n,a.pointilles=o,a}function w_(e,t,r){Lx.call(this),this.svg=function(n){return`<path d="M${e.xSVG(n)} ${e.ySVG(n)} Q ${t.xSVG(n)} ${t.ySVG(n)}, ${r.xSVG(n)} ${r.ySVG(n)}" stroke="black" fill="transparent"/>`}}function __(...e){return new w_(...e)}function E_(e,t,r,n="black"){Lx.call(this),this.svg=function(i){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);const s=Math.round(KS(e,t)),o=(t.xSVG(i)-e.xSVG(i))/(4*s),a=(t.ySVG(i)-e.ySVG(i))/(4*s);let l=`<path d="M${e.xSVG(i)} ${e.ySVG(i)} C `;for(let t=0;t<=4*s;t++)l+=`${bx(e.xSVG(i)+t*o+fx(-1,1)*r,0)} ${bx(e.ySVG(i)+t*a+fx(-1,1)*r,0)}, `;return l+=`${t.xSVG(i)} ${t.ySVG(i)}" stroke="${n}" ${this.style}"/>`,l},this.tikz=function(){let n=[];const i=[];this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.push(`decorate,decoration={random steps , amplitude = ${r}pt}`),n="["+i.join(",")+"]";return`\\draw ${n} (${e.x},${e.y})--(${t.x},${t.y});`}}function S_(e,t,r,n="black",i=1){return new E_(e,t,r,n,i)}function A_(e,t,r,n="black"){Lx.call(this),this.color=n,this.svg=function(i){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);let s=`<path d="M ${e.xSVG(i)+t*i} ${e.ySVG(i)} C ${e.xSVG(i)+t*i} ${e.ySVG(i)}, `;for(let n=1;n<101;n++)s+=`${bx(e.xSVG(i)+t*Math.cos(2*n*Math.PI/101)*i+fx(-1,1)*r,2)} ${bx(e.ySVG(i)+t*Math.sin(2*n*Math.PI/100)*i+fx(-1,1)*r,2)}, `;return s+=` ${e.xSVG(i)+t*i} ${e.ySVG(i)} Z" stroke="${n}" ${this.style}"/>`,s},this.tikz=function(){let n=[];const i=[];this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.push(`decorate,decoration={random steps , amplitude = ${r}pt}`),n="["+i.join(",")+"]";return`\\draw${n} (${e.x},${e.y}) circle (${t});`}}function N_(e,t,r,n="black",i=1){return new A_(e,t,r,n,i)}function k_(e,t,r,n="black"){Lx.call(this),this.svg=function(i){const s=aw(e,t,n);return s.isVisible=!1,s.svgml(i,r)},this.tikz=function(){const i=aw(e,t,n);return i.isVisible=!1,i.tikzml(r)}}function M_(e,t,r,n="black",i=1){return new k_(e,t,r,n,i)}function C_(e,t){Lx.call(this),this.couleurDeRemplissage="",this.opaciteDeRemplissage=1.1,this.listePoints=e,this.svg=function(e){let r,n,i,s="";for(let o=1;o<=this.listePoints.length;o++)i=this.listePoints[o%this.listePoints.length],n=this.listePoints[o-1],r=$w(n,i),r.isVisible=!1,r.epaisseur=this.epaisseur,r.color=this.color,r.opacite=this.opacite,s+=r.svgml(e,t);return s},this.tikz=function(){let e,r,n,i="";for(let s=1;s<=this.listePoints.length;s++)n=this.listePoints[s%this.listePoints.length],r=this.listePoints[s-1],e=$w(r,n),e.isVisible=!1,e.epaisseur=this.epaisseur,e.color=this.color,e.opacite=this.opacite,i+=e.tikzml(t);return i}}function T_(e,t,r="black"){return new C_(e,t,r)}function O_(e,t,r,n,i=!1,s="none",o="black",a=.2){Lx.call(this),this.couleurDeRemplissage=s,this.opaciteDeRemplissage=a,this.color=o,this.svg=function(s){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage||"none"===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);const a=Math.round(2*KS(e,t)*Math.PI*r/360),l=r/a;let u,c=`<path d="M${e.xSVG(s)} ${e.ySVG(s)} C `;for(let r=0;r<=a;r++)u=j_(e,t,r*l),c+=`${bx(u.xSVG(s)+fx(-1,1)*n,0)} ${bx(u.ySVG(s)+fx(-1,1)*n,0)}, `;c+=`${bx(u.xSVG(s)+fx(-1,1)*n,0)} ${bx(u.ySVG(s)+fx(-1,1)*n,0)} `;const p=Math.abs(Math.round(KS(t,e))),h=(e.xSVG(s)-t.xSVG(s))/(4*p),d=(e.ySVG(s)-t.ySVG(s))/(4*p),f=(t.xSVG(s)-u.xSVG(s))/(4*p),m=(t.ySVG(s)-u.ySVG(s))/(4*p);if(i){for(let e=0;e<=4*p;e++)c+=`${bx(u.xSVG(s)+e*f+fx(-1,1)*n,0)} ${bx(u.ySVG(s)+e*m+fx(-1,1)*n,0)}, `;for(let e=0;e<=4*p;e++)c+=`${bx(t.xSVG(s)+e*h+fx(-1,1)*n,0)} ${bx(t.ySVG(s)+e*d+fx(-1,1)*n,0)}, `;c+=`${bx(t.xSVG(s)+4*p*h+fx(-1,1)*n,0)} ${bx(t.ySVG(s)+4*p*d+fx(-1,1)*n,0)} Z `}return c+=`" stroke="${o}" ${this.style}"/>`,c},this.tikz=function(){let o=[];const a=[],l=tA(zx(t.x+1,t.y),t,e),u=l+r,c=j_(e,t,r);return this.color.length>1&&"black"!==this.color&&a.push(this.color),1!==this.epaisseur&&a.push(`line width = ${this.epaisseur}`),1!==this.opacite&&a.push(`opacity = ${this.opacite}`),i&&"none"!==s&&a.push(`fill opacity = ${this.opaciteDeRemplissage}`),i&&"none"!==s&&a.push(`fill = ${this.couleurDeRemplissage}`),a.push(`decorate,decoration={random steps , amplitude = ${n}pt}`),o="["+a.join(",")+"]",i?`\\filldraw  ${o} (${c.x},${c.y}) -- (${t.x},${t.y}) -- (${e.x},${e.y}) arc (${l}:${u}:${KS(t,e)}) -- cycle ;`:`\\draw${o} (${e.x},${e.y}) arc (${l}:${u}:${KS(t,e)}) ;`}}function I_(e,t,r,n,i=!1,s="none",o="black",a=.2){return new O_(e,t,r,n,i,s,o,a)}function P_(e,t,r,n,i){const s=i[0].charCodeAt(0)-64,o=Math.floor(4*n),a=parseInt(i[1]),l=Nx(fx(-o,o)/10),u=Nx(fx(-o,o)/10),c=n/2;return a>r||s>r?"Cette cellule n'existe pas dans la cible":[bx(e+l-s*n+c+r*c,2),bx(t+u-2*a*c+(r+1)*c,2)]}function D_(e,t,r,n,i){const s=i[0].charCodeAt(0)-64,o=Math.floor(4*n),a=parseInt(i[1]),l=Nx(fx(-o,o)/10),u=Nx(45*(s-1)-157.5+fx(-20,20)),c=Nx(n/2+(a-1)*n+l),p=Q_(zx(1,0),zx(0,0),u,c);return p.x+=e,p.y+=t,a>r||s>8?"Cette cellule n'existe pas dans la cible":[bx(p.x,2),bx(p.y,2)]}function R_({x:e=0,y:t=0,rang:r=4,num:n,taille:i=.6,color:s="gray",opacite:o=.5}){Lx.call(this),this.x=e,this.y=t,this.rang=r,void 0!==n&&(this.n=n),this.taille=i,this.color=s,this.opacite=o;const a=[];let l,u,c;void 0!==n&&(l=HS(n,e-r*this.taille/4,t-r*this.taille/4,"milieu",this.color),l.opacite=.5,l.taille=30*this.taille,l.contour=!0,a.push(l)),this.n=n,a.push(eS(Nx(e-r*this.taille/2),Nx(t-r*this.taille/2),Nx(e+r*this.taille/2),Nx(t+r*this.taille/2),this.color,this.opacite,this.taille,!1));for(let m=0;m<r;m++)u=HS(Mx(1+m),e-r*this.taille/2+(2*m+1)*this.taille/2,t-(r+1)*this.taille/2,"milieu"),c=HS(m+1,e-(r+1)*this.taille/2,t-r*this.taille/2+(2*m+1)*this.taille/2,"milieu"),u.taille=10*this.taille,c.taille=10*this.taille,a.push(u),a.push(c);let p=1e3,h=1e3,d=-1e3,f=-1e3;for(const m of a)void 0!==m.bordures&&(p=Math.min(p,m.bordures[0]),h=Math.min(h,m.bordures[1]),d=Math.max(d,m.bordures[2]),f=Math.max(f,m.bordures[3]));this.bordures=[p,h,d,f],this.svg=function(e){let t="";for(const r of a)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of a)e+="\n\t"+t.tikz();return e}}function L_({x:e=0,y:t=0,rang:r=4,num:n,taille:i=.6}){return new R_({x:e,y:t,rang:r,num:n,taille:i})}function q_({x:e=0,y:t=0,rang:r=3,num:n,taille:i=.3}){Lx.call(this),this.x=e,this.y=t,this.n=n,this.taille=i,this.rang=r,this.opacite=.5,this.color="gray";const s=[];let o,a;const l=zx(this.x,this.y,this.y),u=zx(this.x+this.rang*this.taille,this.y),c=Xx(l,u,KS(l,u)+.3);this.bordures=[e-r*i-1,t-r*i-1,e+r*i+1,t+r*i+1];for(let h=0;h<8;h++)a=$w(l,j_(u,l,45*h)),a.color=this.color,a.opacite=this.opacite,s.push(a),s.push(jS(Mx(1+h),j_(c,l,45*h+22.5),"milieu","gray"));for(let h=0;h<this.rang;h++)o=u_(zx(this.x,this.y),this.taille*(1+h)),o.opacite=this.opacite,o.color=this.color,s.push(o);const p=HS(Tx(n),this.x,this.y,0,"gray");p.opacite=.5,p.taille=30,p.contour=!0,s.push(p),this.svg=function(e){let t="";for(const r of s)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of s)e+="\n\t"+t.tikz();return e}}function $_({x:e=0,y:t=0,rang:r=3,num:n=1,taille:i=.3}){return new q_({x:e,y:t,rang:r,num:n,taille:i})}function B_({x:e=0,y:t=0,taille:r=5,depart:n=0,nbDivisions:i=18,nbSubDivisions:s=3,semi:o=!1,label:a=!0}){Lx.call(this),this.x=e,this.y=t,this.taille=r,this.opacite=.5,this.color="gray";const l=[];let u,c,p,h;h=o?180:360;const d=zx(this.x,this.y);c=j_(zx(this.x+this.taille,this.y),d,n);let f=Xx(d,c,KS(d,c)+1);const m=[],g=y_(c,d,h-.1,!1,"none","gray"),y=y_(f,d,h-.1,!1,"none","gray");p=$w(c,f),l.push(g,y,p);for(let v=0;v<i;v++){for(let e=1;e<s;e++)m[e-1]=j_(p,d,e*h/i/s),m[e-1].pointilles=1,m[e-1].color=this.color,m[e-1].opacite=this.opacite,l.push(m[e-1]);a&&(u=jS(Mx(1+v),j_(Yx(c,f),d,h/i/2),"milieu","gray"),u.contour=!0,l.push(u)),p.color=this.color,p.opacite=this.opacite,l.push(p),c=j_(c,d,h/i),f=j_(f,d,h/i),p=$w(c,f)}this.bordures=[e-r-1,t-r-1,e+r+1,t+r+1],this.svg=function(e){let t="";for(const r of l)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of l)e+="\n\t"+t.tikz();return e}}function z_({x:e=0,y:t=0,taille:r=5,depart:n=0,nbDivisions:i=18,nbSubDivisions:s=3,semi:o=!1,label:a=!0}){return new B_({x:e,y:t,taille:r,depart:n,nbDivisions:i,nbSubDivisions:s,semi:o,label:a})}function F_(e,t,r="",n="above"){if(e.constructor===Bx){return zx(Nx(e.x+t.x),Nx(e.y+t.y),r,n)}if(e.constructor===Uw){const r=[];for(let n=0;n<e.listePoints.length;n++)r[n]=F_(e.listePoints[n],t),r[n].nom=e.listePoints[n].nom+"'";return jw(r)}if(e.constructor===ow){return aw(F_(zx(e.x1,e.y1),t),F_(zx(e.x2,e.y2),t))}if(e.constructor===qw){const r=$w(F_(e.extremite1,t),F_(e.extremite2,t));return r.styleExtremites=e.styleExtremites,r}if(e.constructor===Pw)return e}function U_(e,t,r,n="",i="above"){if(e.constructor===Bx){return zx(Nx(e.x+r.x-t.x),Nx(e.y+r.y-t.y),n,i)}if(e.constructor===Uw){const n=[];for(let i=0;i<e.listePoints.length;i++)n[i]=U_(e.listePoints[i],e,t,r),n[i].nom=t.listePoints[i].nom+"'";return jw(n)}if(e.constructor===ow){return aw(U_(zx(e.x1,e.y1),t,r),U_(zx(e.x2,e.y2),t,r))}if(e.constructor===qw){const n=$w(U_(e.extremite1,t,r),U_(e.extremite2,t,r));return n.styleExtremites=e.styleExtremites,n}if(t.constructor===Pw)return t}function j_(e,t,r,n="",i="above"){if(e.constructor===Bx){return zx(Nx(t.x+(e.x-t.x)*Math.cos(r*Math.PI/180)-(e.y-t.y)*Math.sin(r*Math.PI/180)),Nx(t.y+(e.x-t.x)*Math.sin(r*Math.PI/180)+(e.y-t.y)*Math.cos(r*Math.PI/180)),n,i)}if(e.constructor===Uw){const n=[];for(let i=0;i<e.listePoints.length;i++)n[i]=j_(e.listePoints[i],t,r),n[i].nom=e.listePoints[i].nom+"'";return jw(n)}if(e.constructor===ow){return aw(j_(zx(e.x1,e.y1),t,r),j_(zx(e.x2,e.y2),t,r))}if(e.constructor===qw){const n=$w(j_(e.extremite1,t,r),j_(e.extremite2,t,r));return n.styleExtremites=e.styleExtremites,n}if(e.constructor===Pw){return Dw(Nx(e.x*Math.cos(r*Math.PI/180)-e.y*Math.sin(r*Math.PI/180)),Nx(e.x*Math.sin(r*Math.PI/180)+e.y*Math.cos(r*Math.PI/180)))}}function G_(e,t,r){Lx.call(this);const n=[],i=y_(e,t,20*r),s=j_(e,t,20*r),o=Q_(s,t,-5*r,.95),a=Q_(s,t,-5*r,1.05),l=$w(s,o),u=$w(s,a);n.push(i,l,u),this.svg=function(e){let t="";for(const r of n)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of n)e+="\n\t"+t.tikz();return e}}function V_(e,t,r){return new G_(e,t,r)}function H_(e,t,r,n="",i="above"){if(e.constructor===Bx){return new Bx(Nx(t.x+r*(e.x-t.x)),Nx(t.y+r*(e.y-t.y)),n,i)}if(e.constructor===Uw){const n=[];for(let i=0;i<e.listePoints.length;i++)n[i]=H_(e.listePoints[i],t,r),n[i].nom=e.listePoints[i].nom+"'";return jw(n)}if(e.constructor===ow){return aw(H_(zx(e.x1,e.y1),t,r),H_(zx(e.x2,e.y2),t,r))}if(e.constructor===qw){const n=$w(H_(e.extremite1,t,r),H_(e.extremite2,t,r));return n.styleExtremites=e.styleExtremites,n}if(e.constructor===Pw){return Dw(e.x*r,e.y*r)}}function W_(e,t,r="",n="above"){let i,s;const o=t.a,a=t.b,l=t.c,u=1/(o*o+a*a);if(e.constructor===Bx)return 0===o?(i=e.x,s=Nx(-(e.y+2*l/a))):0===a?(s=e.y,i=Nx(-(e.x+2*l/o))):(i=Nx(u*((a*a-o*o)*e.x-2*o*a*e.y-2*o*l)),s=Nx(u*((o*o-a*a)*e.y-2*o*a*e.x+o*o*l/a-a*l)-l/a)),zx(i,s,r,n);if(e.constructor===Uw){const r=[];for(let n=0;n<e.listePoints.length;n++)r[n]=W_(e.listePoints[n],t),r[n].nom=e.listePoints[n].nom+"'";return jw(r)}if(e.constructor===ow){return aw(W_(zx(e.x1,e.y1),t),W_(zx(e.x2,e.y2),t))}if(e.constructor===qw){const r=$w(W_(e.extremite1,t),W_(e.extremite2,t));return r.styleExtremites=e.styleExtremites,r}if(e.constructor===Pw){let r;r=cx(a,0)?zx(Nx(-l/o),0):zx(0,Nx(-l/a));return Dw(r,W_(F_(r,e),t))}}function Y_(e,t){return KS(e,X_(e,t),9)}function X_(e,t,r="",n="above"){const i=t.a,s=t.b,o=t.c,a=Nx(1/(i*i+s*s));let l,u;if(e.constructor===Bx)return 0===i?(l=e.x,u=Nx(-o/s)):0===s?(u=e.y,l=Nx(-o/i)):(l=Nx(a*(s*s*e.x-i*s*e.y-i*o)),u=Nx(a*(-i*s*e.x+i*i*e.y+i*i*o/s)-o/s)),zx(l,u,r,n);if(e.constructor===Pw){let r;r=cx(s,0)?zx(Nx(-o/i),0):zx(0,Nx(-o/s));return Dw(r,X_(F_(r,e),t))}}function Z_(e,t,r,n="",i="above"){const s=t.a,o=t.b,a=t.c,l=Nx(1/(s*s+o*o));let u,c;if(e.constructor===Bx)return 0===s?(u=e.x,c=Nx(r*e.y+a*(r-1)/o)):0===o?(c=e.y,u=Nx(r*e.x+a*(r-1)/s)):(u=Nx(l*(o*o*e.x-s*o*e.y-s*a)*(1-r)+r*e.x),c=Nx(l*(s*s*e.y-s*o*e.x+s*s*a/o)*(1-r)+r*a/o+r*e.y-a/o)),zx(u,c,n,i);if(e.constructor===Uw){const n=[];for(let i=0;i<e.listePoints.length;i++)n[i]=Z_(e.listePoints[i],t,r),n[i].nom=e.listePoints[i].nom+"'";return jw(n)}if(e.constructor===ow){return aw(Z_(zx(e.x1,e.y1),t,r),Z_(zx(e.x2,e.y2),t,r))}if(e.constructor===qw){const n=$w(Z_(e.extremite1,t,r),Z_(e.extremite2,t,r));return n.styleExtremites=e.styleExtremites,n}if(e.constructor===Pw){let n;n=cx(o,0)?zx(Nx(-a/s),0):zx(0,Nx(-a/o));return Dw(n,Z_(F_(n,e),t,r))}}function Q_(e,t,r,n,i="",s="above"){if(e.constructor===Bx){const o=ax(r);return zx(Nx(t.x+n*(Math.cos(o)*(e.x-t.x)-Math.sin(o)*(e.y-t.y))),Nx(t.y+n*(Math.cos(o)*(e.y-t.y)+Math.sin(o)*(e.x-t.x))),i,s)}if(e.constructor===Uw){const i=[];for(let s=0;s<e.listePoints.length;s++)i[s]=Q_(e.listePoints[s],t,r,n),i[s].nom=e.listePoints[s].nom+"'";return jw(i)}if(e.constructor===ow){return aw(Q_(zx(e.x1,e.y1),t,r,n),Q_(zx(e.x2,e.y2),t,r,n))}if(e.constructor===qw){const i=$w(Q_(e.extremite1,t,r,n),Q_(e.extremite2,t,r,n));return i.styleExtremites=e.styleExtremites,i}if(e.constructor===Pw){return H_(j_(e,t,r),t,n)}}function K_(e,t=2,r=.5,n="indefinite"){Lx.call(this),this.svg=function(i){let s="<g> ";if(Array.isArray(e))for(const t of e)s+="\n"+t.svg(i);else s+="\n"+e.svg(i),e.color="orange",console.log(e);return s+=`<animate attributeType="CSS"\n    attributeName="visibility"\n    from="hidden" \n    to="hidden"\n    values="hidden;visible;hidden"\n    keyTimes="0; ${r}; 1"\n    dur="${t}"\n    repeatCount="${n}"/>`,s+="</g>",s}}function J_(...e){return new K_(...e)}function eE(e,t,r='begin="0s" dur="2s" repeatCount="indefinite"'){Lx.call(this),this.svg=function(n){let i="<g> ";if(Array.isArray(e))for(const t of e)i+="\n"+t.svg(n);else i+="\n"+e.svg(n);if(Array.isArray(t)){i+='<animateMotion path="M 0 0 l';for(const e of t)i+=` ${e.xSVG(n)} ${e.ySVG(n)} `;i+=`${r} />`}else i+=`<animateMotion path="M 0 0 l ${t.xSVG(n)} ${t.ySVG(n)} " ${r} />`;return i+="</g>",i}}function tE(...e){return new eE(...e)}function rE(e,t,r,n='begin="0s" dur="2s" repeatCount="indefinite"'){Lx.call(this),this.svg=function(i){let s="<g> ";if(Array.isArray(e))for(const t of e)s+="\n"+t.svg(i);else s+="\n"+e.svg(i);return s+=`<animateTransform\n  attributeName="transform"\n  type="rotate"\n  from="0 ${t.xSVG(i)} ${t.ySVG(i)}"\n  to="${-r} ${t.xSVG(i)} ${t.ySVG(i)}"\n  ${n}\n  />`,s+="</g>",s}}function nE(...e){return new rE(...e)}function iE(e,t,r,n='begin="0s" dur="2s" repeatCount="indefinite"'){Lx.call(this),this.svg=function(i){const s=e.binomesXY(i),o=H_(e,t,r);o.isVisible=!1;const a=o.binomesXY(i);return`<polygon stroke="${e.color}" stroke-width="${e.epaisseur}" fill="${e.couleurDeRemplissage}" >\n  <animate attributeName="points" ${n}\n  from="${s}"\n  to="${a}"\n  />\n  </polygon>`}}function sE(...e){return new iE(...e)}function oE(e,t,r='begin="0s" dur="2s" repeatCount="indefinite"'){Lx.call(this),this.svg=function(n){const i=e.binomesXY(n),s=W_(e,t);s.isVisible=!1;const o=s.binomesXY(n);return`<polygon stroke="${e.color}" stroke-width="${e.epaisseur}" fill="${e.couleurDeRemplissage}" >\n    <animate attributeName="points" ${r}\n    from="${i}"\n    to="${o}"\n    />\n    </polygon>`}}function aE(...e){return new oE(...e)}function lE(e,t,r,n='begin="0s" dur="2s" repeatCount="indefinite"'){Lx.call(this),this.svg=function(i){const s=e.binomesXY(i),o=Z_(e,t,r);o.isVisible=!1;const a=o.binomesXY(i);return`<polygon stroke="${e.color}" stroke-width="${e.epaisseur}" fill="${e.couleurDeRemplissage}" >\n    <animate attributeName="points" ${n}\n    from="${s}"\n    to="${a}"\n    />\n    </polygon>`}}function uE(...e){return new lE(...e)}function cE(e){document.getElementById(e)?document.getElementById(e).style.visibility="visible":console.log(e+" n'existe pas et ne peut pas être rendu visible.")}function pE(e){document.getElementById(e)?document.getElementById(e).style.visibility="hidden":console.log(e+" n'existe pas et ne peut pas être caché.")}function hE(e,t=1,r=5,n="Infinity"){let i=1;const s=setInterval((function(){if(document.getElementById(e.id))if(clearInterval(s),pE(e.id),1===n)setTimeout((function(){cE(e.id)}),1e3*t);else{const s=setInterval((function(){pE(e.id)}),1e3*r);setTimeout((function(){cE(e.id);const t=setInterval((function(){cE(e.id),i++,"number"==typeof n&&i>=n&&(clearInterval(s),clearInterval(t))}),1e3*r)}),1e3*t)}}),100)}function dE(e,t=1,r=5,n="Infinity"){let i=1;const s=setInterval((function(){if(document.getElementById(e))if(clearInterval(s),pE(e),1===n)setTimeout((function(){cE(e)}),1e3*t);else{const s=setInterval((function(){pE(e)}),1e3*r);setTimeout((function(){cE(e);const t=setInterval((function(){cE(e),i++,"number"==typeof n&&i>=n&&(clearInterval(s),clearInterval(t))}),1e3*r)}),1e3*t)}}),100)}function fE(e,t=1,r="Infinity",n=5){let i=t;const s=e.length*t+n;for(const o of e)hE(o,i,s,r),i+=t}function mE(e,t,r,n="black"){return aw(e,Yx(t,r),"",n)}function gE(e,t,r,n=""){const i=mE(t,e,r),s=mE(e,t,r);i.isVisible=!1,s.isVisible=!1;const o=tw(i,s);return zx(o.x,o.y,"",n)}function yE(e,t,r,n="black"){const i=aw(t,r);i.isVisible=!1;return aw(X_(e,i),e,"",n)}function vE(e,t,r,n="black"){Lx.call(this),this.color=n;const i=aw(t,r),s=X_(e,i),o=j_(e,s,-90);t.x<r.x?s.x>r.x||s.x<t.x?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1:r.x<t.x?s.x<r.x||s.x>t.x?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1:t.y<r.y?s.y>r.y||s.y<t.y?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1:r.y<t.y&&(s.y<r.y||s.y>t.y?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1);const a=AE(e,s,o,this.color);this.svg=function(e){return i.isVisible?a.svg(e)+"\n\t"+i.svg(e):a.svg(e)},this.tikz=function(){return i.isVisible?a.tikz()+"\n\t"+i.tikz():a.tikz()}}function bE(...e){return new vE(...e)}function xE(e,t,r="black",n="//"){Lx.call(this),this.color=r;const i=Yx(e,t),s=qE(n,this.color,e,i,i,t);this.svg=function(e){return s.svg(e)},this.tikz=function(e){return s.tikz(e)}}function wE(...e){return new xE(...e)}function _E(e,t,r,n="",i="above"){const s=yE(t,e,r),o=yE(e,t,r);s.isVisible=!1,o.isVisible=!1;const a=tw(s,o);return zx(a.x,a.y,n,i)}function EE(e,t,r,n="",i="above"){const s=yw(e,t),o=yw(t,r);s.isVisible=!1,o.isVisible=!1;const a=tw(s,o);return zx(a.x,a.y,n,i)}function SE(e,t,r,n="black",i=.4){Lx.call(this),this.sommet=t,this.depart=e,this.arrivee=r,this.taille=i,this.color=n,this.svg=function(t){const i=Xx(this.sommet,this.depart,20*this.taille/t),s=Xx(this.sommet,this.arrivee,20*this.taille/t);let o={};o=tA(e,this.sommet,r)>0?j_(this.sommet,i,-90):j_(this.sommet,i,90);const a=Tw([i,o,s],n);return a.isVisible=!1,this.id=a.id,a.svg(t)},this.tikz=function(){const t=Xx(this.sommet,this.depart,this.taille/ox.scale),i=Xx(this.sommet,this.arrivee,this.taille/ox.scale);let s={};return s=tA(e,this.sommet,r)>0?j_(this.sommet,t,-90):j_(this.sommet,t,90),Tw([t,s,i],n).tikz()},this.svgml=function(t,i){const s=Xx(this.sommet,this.depart,20*this.taille/t),o=Xx(this.sommet,this.arrivee,20*this.taille/t);let a={};return a=tA(e,this.sommet,r)>0?j_(this.sommet,s,-90):j_(this.sommet,s,90),Tw([s,a,o],n).svgml(t,i)},this.tikzml=function(t){const i=Xx(this.sommet,this.depart,this.taille/ox.scale),s=Xx(this.sommet,this.arrivee,this.taille/ox.scale);let o={};return o=tA(e,this.sommet,r)>0?j_(this.sommet,i,-90):j_(this.sommet,i,90),Tw([i,o,s],n).tikzml(t)}}function AE(e,t,r,n="black",i=.4){return new SE(e,t,r,n,i)}function NE(e,t,r="black",n=.5,i="cm"){Lx.call(this),this.color=r,this.extremite1=e,this.extremite2=t,this.distance=n;const s=Yx(this.extremite1,this.extremite2),o=j_(this.extremite1,s,-90),a=$w(this.extremite1,this.extremite2);let l;a.isVisible=!1;const u=Ox(bx(a.longueur,1));this.svg=function(e){const t=Xx(s,o,20*this.distance/e);return l=this.extremite2.x>this.extremite1.x?-a.angleAvecHorizontale:180-a.angleAvecHorizontale,jS(`${u}${""!==i?" "+i:""}`,t,l,this.color,1,"middle",!1).svg(e)},this.tikz=function(){const e=Xx(s,o,this.distance/ox.scale);return l=this.extremite2.x>this.extremite1.x?-a.angleAvecHorizontale:180-a.angleAvecHorizontale,jS(`${u}${""!==i?" "+i:""}`,e,l,this.color,1,"middle",!1).tikz()}}function kE(...e){return new NE(...e)}function ME(e,t,r,n="black",i=.5){Lx.call(this),KS(t,r)<.1&&window.notify("TexteSurSegment : Points trop proches pour cette fonction",{A:t,B:r}),this.color=n,this.extremite1=t,this.extremite2=r,this.distance=i,this.texte=e;const s=Yx(this.extremite1,this.extremite2),o=j_(this.extremite1,s,-90),a=$w(this.extremite1,this.extremite2);let l;a.isVisible=!1,this.bordure=Xx(s,o,this.distance);const u=Xx(s,o,this.distance),c=.2*e.length;this.bordures=[u.x-c,u.y-c,u.x+c,u.y+c],this.svg=function(e){const t=Xx(s,o,20*this.distance/e);return l=this.extremite2.x>this.extremite1.x?-a.angleAvecHorizontale:180-a.angleAvecHorizontale,"$"===this.texte.charAt(0)?WS(this.texte.substr(1,this.texte.length-2),t,this.color,8*this.texte,12,"").svg(e):jS(this.texte,t,l,this.color).svg(e)},this.tikz=function(){const e=Xx(s,o,this.distance/ox.scale);return l=this.extremite2.x>this.extremite1.x?-a.angleAvecHorizontale:180-a.angleAvecHorizontale,jS(this.texte,e,l,this.color).tikz()}}function CE(...e){return new ME(...e)}function TE(e,t,r,n="black",i=1.5,s=""){Lx.call(this),this.depart=e,this.arrivee=r,this.sommet=t,this.distance=i,this.svg=function(e){const r=Xx(this.sommet,this.depart,this.distance),i=j_(Xx(this.sommet,r,this.distance+10/e),this.sommet,tA(this.depart,this.sommet,this.arrivee)/2,"","center");let o;return o=""!==s?s:xx(eA(this.depart,this.sommet,this.arrivee),0)+"°","\n"+jS(o,i,"milieu",n,1,"middle",!0).svg(e)+"\n"+y_(r,t,tA(this.depart,this.sommet,this.arrivee)).svg(e)},this.tikz=function(){const e=Xx(this.sommet,this.depart,this.distance),r=j_(Xx(this.sommet,e,this.distance+.5),this.sommet,tA(this.depart,this.sommet,this.arrivee)/2,"","center");let i;return i=""!==s?s:xx(eA(this.depart,this.sommet,this.arrivee),0)+"°","\n"+jS(i,r,"milieu",n,1,"middle",!0).tikz()+"\n"+y_(e,t,tA(this.depart,this.sommet,this.arrivee)).tikz()}}function OE(...e){return new TE(...e)}function IE(e,t="",r=.5,n="black",i=1,s=.5,o="black"){Lx.call(this),this.positionCoteSVG=20*r/ox.pixelsParCm,this.positionCoteTIKZ=r/ox.scale,this.positionValeur=s,this.seg=e,this.cote=t,this.svg=function(e){let t;const r=this.seg.extremite1,s=this.seg.extremite2,a=Q_(Dw(r,s),r,90,this.positionCoteSVG/this.seg.longueur),l=$w(F_(r,a),F_(s,a),n);return KS(r,s)>1?l.styleExtremites="<->":l.styleExtremites=">-<",l.epaisseur=i,t=""===this.cote?kE(l.extremite1,l.extremite2,o,this.positionValeur):CE(this.cote,l.extremite1,l.extremite2,o,this.positionValeur),"\n\t"+l.svg(e)+"\n\t"+t.svg(e)},this.tikz=function(){let e;const t=this.seg.extremite1,r=this.seg.extremite2,s=Q_(Dw(t,r),t,90,this.positionCoteTIKZ/this.seg.longueur),a=$w(F_(t,s),F_(r,s),n);return KS(t,r)>1?a.styleExtremites="<->":a.styleExtremites=">-<",a.epaisseur=i,e=""===this.cote?kE(a.extremite1,a.extremite2,o,this.positionValeur):CE(this.cote,a.extremite1,a.extremite2,o,this.positionValeur),"\n\t"+a.tikz()+"\n\t"+e.tikz()}}function PE(...e){return new IE(...e)}function DE(e,t,r="||",n="black"){Lx.call(this),this.color=n;const i=Yx(e,t),s=$w(e,t);let o;return s.isVisible=!1,o=t.x>e.x?-parseInt(s.angleAvecHorizontale):180-parseInt(s.angleAvecHorizontale),jS(r,i,o,this.color)}function RE(...e){return new DE(...e)}function LE(e="||",t="black",...r){Lx.call(this),this.svg=function(n){let i="";if(Array.isArray(r[0])){for(let o=0;o<r[0].length-1;o++){const s=RE(r[0][o],r[0][o+1],e,t);s.isVisible=!1,i+=s.svg(n),i+="\n"}const s=RE(r[0][r[0].length-1],r[0][0],e,t);s.isVisible=!1,i+=s.svg(n),i+="\n"}else if(r[0].constructor===qw)for(let s=0;s<r.length;s++){const o=RE(r[s].extremite1,r[s].extremite2,e,t);o.isVisible=!1,i+=o.svg(n),i+="\n"}else for(let s=0;s<r.length;s+=2){const o=RE(r[s],r[s+1],e,t);o.isVisible=!1,i+=o.svg(n),i+="\n"}return i=`<g id="${this.id}">${i}</g>`,i},this.tikz=function(){let n="";if(Array.isArray(r[0])){for(let i=0;i<r[0].length-1;i++)n+=RE(r[0][i],r[0][i+1],e,t).tikz(),n+="\n";n+=RE(r[0][r[0].length-1],r[0][0],e,t).tikz(),n+="\n"}else if(r[0].constructor===qw)for(let i=0;i<r.length;i++)n+=RE(r[i].extremite1,r[i].extremite2,e,t).tikz(),n+="\n";else for(let i=0;i<r.length;i+=2)n+=RE(r[i],r[i+1],e,t).tikz(),n+="\n";return n}}function qE(e="||",t="black",...r){return new LE(e,t,...r)}function $E(e,t,r,n=.8,i="",s="black",o=1,a=1,l="none",u=.2,c=!1){let p;Lx.call(this),this.color=s,this.debut=e,this.centre=t,this.taille=n,this.mark=i,this.epaisseur=o,this.opacite=a,"none"!==l?(this.couleurDeRemplissage=l,this.opaciteDeRemplissage=u):this.couleurDeRemplissage="none",p="none"!==l,this.angle=r,this.svg=function(e){let t="";const o=[],a=Xx(this.centre,this.debut,20*this.taille/ox.pixelsParCm),l=j_(a,this.centre,this.angle/2),u=Xx(this.centre,l,n+12/e),h=aw(this.centre,l);h.isVisible=!1;const d=xx(Math.abs(r),0)+"°",f=y_(a,this.centre,this.angle,p,this.couleurDeRemplissage,this.color);if(f.isVisible=!1,o.push(f),f.opacite=this.opacite,f.epaisseur=this.epaisseur,f.couleurDeRemplissage=this.couleurDeRemplissage,f.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark){const e=jS(i,l,90-h.angleAvecHorizontale,s);e.isVisible=!1,o.push(e)}if(c){const e=jS(d,u,"milieu",s);e.isVisible=!1,o.push(e)}for(const r of o)t+="\n\t"+r.svg(e);return o.length>1?t=`<g id="${this.id}">${t}</g>`:this.id=f.id,t},this.tikz=function(){let e="";const t=Xx(this.centre,this.debut,this.taille/ox.scale),o=j_(t,this.centre,this.angle/2),a=Xx(this.centre,o,n+.6/ox.scale),l=xx(Math.abs(r),0)+"°",u=aw(this.centre,o);u.isVisible=!1;const h=y_(t,this.centre,this.angle,p,this.couleurDeRemplissage,this.color);return h.opacite=this.opacite,h.epaisseur=this.epaisseur,h.couleurDeRemplissage=this.couleurDeRemplissage,h.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark&&(e+=jS(i,o,90-u.angleAvecHorizontale,s).tikz()+"\n"),c&&(e+=jS(l,a,"milieu",s).tikz()+"\n"),e+=h.tikz(),e},this.svgml=function(e,t){let o="";const a=Xx(this.centre,this.debut,20*this.taille/ox.pixelsParCm),l=j_(a,this.centre,this.angle/2),u=Xx(this.centre,l,n+12/e),p=xx(Math.abs(r),0)+"°",h=aw(this.centre,l);h.isVisible=!1;const d=y_(a,this.centre,this.angle,!1,this.couleurDeRemplissage,this.color);return d.opacite=this.opacite,d.epaisseur=this.epaisseur,d.couleurDeRemplissage=this.couleurDeRemplissage,d.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark&&(o+=jS(i,l,90-h.angleAvecHorizontale,s).svg(e)+"\n"),c&&(o+=jS(p,u,"milieu",s).svg(e)+"\n"),o+=d.svgml(e,t),o},this.tikzml=function(e){let t="";const o=Xx(this.centre,this.debut,this.taille/ox.scale),a=j_(o,this.centre,this.angle/2),l=Xx(this.centre,a,n+.6/ox.scale),u=xx(Math.abs(r),0)+"°",h=aw(this.centre,a);h.isVisible=!1;const d=y_(o,this.centre,this.angle,p,this.couleurDeRemplissage,this.color);return d.opacite=this.opacite,d.epaisseur=this.epaisseur,d.couleurDeRemplissage=this.couleurDeRemplissage,d.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark&&(t+=jS(i,a,90-h.angleAvecHorizontale,s).tikz()+"\n"),c&&(t+=jS(u,l,"milieu",s).tikz()+"\n"),t+=d.tikzml(e),t}}function BE(e,t,r,n=.8,i="",s="black",o=1,a=1,l="none",u=.2,c=!1){return"number"!=typeof r&&(r=tA(e,t,r)),90===r||-90===r?new SE(e,t,j_(e,t,r),s,n):new $E(e,t,r,n,i,s,o,a,l,u,c)}function zE(e,t,r,n,i){Lx.call(this);const s=[];s.push(HS(e,t,r,"milieu",n,1,"middle",!0));const o=$w(t-.6,r+.4-i/10,t+.1,r+.4+i/10),a=$w(t+.1,r+.4+i/10,t+.8,r+.4-i/10);o.color=n,a.color=n,s.push(o,a),this.svg=function(e){let t="";for(const r of s)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of s)e+="\n\t"+t.tikz();return e}}function FE(e,t,r,n){return new zE(e,t,r,n,1)}function UE(e,t,r,n){return new zE(e,t,r,n,-1)}function jE(e=0,t=0,r="H",n="dd",i=10,s=10,o=15,a=0,l=1,u="O",c="I",p=!0,...h){Lx.call(this);let d,f,m,g,y=[1,0];const v=l-a;"H"!==r&&(y=[0,1]);const b=[];for(let E=0;E<h.length;E++)b.push(HS(h[E][0],e+(-a+h[E][1])*y[0]*i/v+.8*y[1],t+(-a+h[E][1])*y[1]*i/v+.8*y[0])),b.push(HS("X",e+(-a+h[E][1])*y[0]*i/v,t+(-a+h[E][1])*y[1]*i/v,"milieu","blue"));g=$w(zx(e+o*y[0],t+o*y[1]),zx(e+(o-.3)*y[0]+.3*y[1],t+(o-.3)*y[1]+.3*y[0])),g.epaisseur=2,b.push(g),g=$w(zx(e+o*y[0],t+o*y[1]),zx(e+(o-.3)*y[0]-.3*y[1],t+(o-.3)*y[1]-.3*y[0])),g.epaisseur=2,b.push(g);const x=bx(i/s,2);d=$w("dd"===n?zx(e,t):zx(e-.5*y[0],t-.5*y[1]),zx(e+o*y[0],t+o*y[1]));const w=HS(u,e-.8*y[1],t-.8*y[0]),_=HS(c,e-.8*y[1]+i*y[0],t-.8*y[0]+i*y[1]);f=0;for(let E=0;E<o;E+=x)f%s==0?(m=$w(zx(e+E*y[0]-.3*y[1],t-.3*y[0]+E*y[1]),zx(e+E*y[0]+.3*y[1],t+.3*y[0]+E*y[1])),m.epaisseur=2,b.push(m),p&&0!==f&&f!==s&&b.push(HS(Tx(bx(Nx(a+E/i*v),3)),e+E*y[0]-.8*y[1],t+E*y[1]-.8*y[0]))):(m=$w(zx(e+E*y[0]-.2*y[1],t-.2*y[0]+E*y[1]),zx(e+E*y[0]+.2*y[1],t+.2*y[0]+E*y[1])),b.push(m)),f++;b.push(d,w,_,undefined),this.svg=function(e){let t="";for(const r of b)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of b)e+="\n\t"+t.tikz();return e},this.svgml=function(e,t){let r="";for(const n of b)ox.mainlevee&&void 0!==n.svgml?r+="\t"+n.svgml(e,t)+"\n":r+="\t"+n.svg(e)+"\n";return r},this.tikzml=function(e){let t="";for(const r of b)ox.mainlevee&&void 0!==r.tikzml?t+="\t"+r.tikzml(e)+"\n":t+="\t"+r.tikz()+"\n";return t}}function GE(...e){return new jE(...e)}function VE({Unite:e=10,Min:t=0,Max:r=2,x:n=0,y:i=0,axeEpaisseur:s=2,axeCouleur:o="black",axeStyle:a="->",axeHauteur:l=4,axePosition:u="H",thickEpaisseur:c=2,thickCouleur:p=o,thickDistance:h=1,thickOffset:d=0,thickSecDist:f=.1,thickSec:m=!1,thickTerDist:g=.01,thickTer:y=!1,pointListe:v=!1,labelPointTaille:b=10,labelPointLargeur:x=10,pointCouleur:w="blue",pointTaille:_=4,pointStyle:E="+",pointOpacite:S=.8,pointEpaisseur:A=2,labelsPrincipaux:N=!0,labelsSecondaires:k=!1,step1:M=1,step2:C=1,labelDistance:T=(l+10)/ox.pixelsParCm,labelListe:O=!1,Legende:I="",LegendePosition:P=Nx((r-t)*e+1.5)}={}){Lx.call(this),this.Unite=e,this.Min=t,this.Max=r;const D=[];let R,L,q,$,B,z=(r-t)*e+.5,F=[1,0];"H"!==u&&(F=[0,1]),"->"===a?(z+=.2,R=$w(zx(n-.2*F[0],i-.2*F[1]),zx(n+z*F[0],i+z*F[1]),o),R.styleExtremites="->",R.tailleExtremites=l,R.epaiseur=s):(R=$w(zx(n,i),zx(n+z*F[0],i+z*F[1]),o),R.styleExtremites="|->",R.epaiseur=s,R.tailleExtremites=l),D.push(R);const U=10/ox.pixelsParCm;B=Nx(y?1/g:m?1/f:1/h);const j=Math.round((t+d)*B),G=Math.round((r-d)*B),V=Math.round(h*B),H=Math.round(f*B);for(let Y=j;Y<=G;Y++)$=Nx((Y-t*B)/B),Y%V==0?(R=$w(zx(n+$*e*F[0]-l/8*U*F[1],i-l/8*U*F[0]+$*e*F[1]),zx(n+$*e*F[0]+l/8*U*F[1],i+l/8*U*F[0]+$*e*F[1]),p),R.epaisseur=c,D.push(R)):Y%H==0&&m?(R=$w(zx(n+$*e*F[0]-l/12*U*F[1],i-l/12*U*F[0]+$*e*F[1]),zx(n+$*e*F[0]+l/12*U*F[1],i+l/12*U*F[0]+$*e*F[1]),p),R.epaisseur=c/2,R.opacite=.8,D.push(R)):y&&(R=$w(zx(n+$*e*F[0]-l/16*U*F[1],i-l/16*U*F[0]+$*e*F[1]),zx(n+$*e*F[0]+l/16*U*F[1],i+l/16*U*F[0]+$*e*F[1]),p),R.epaisseur=c/4,R.opacite=.6,D.push(R));if(N)for(let Y=j;Y<=G;Y++)Y%(M*V)==0&&($=Nx((Y-t*B)/B),L=HS(`${Tx(bx(Nx(t+$),3))}`,n+$*e*F[0]-T*F[1],i+$*e*F[1]-T*F[0]),D.push(L));if(k)for(let Y=j;Y<=G;Y++)Y%(C*H)==0&&Y%(M*V)!=0&&($=Nx((Y-t*B)/B),L=HS(`${Tx(bx(Nx(t+$),3))}`,n+$*e*F[0]-T*F[1],i+$*e*F[1]-T*F[0]),D.push(L));let W;if(O)for(const Y of O)W=HS(Y[1],n-T*F[1]+(Y[0]-t)*F[0]*e,i-T*F[0]+(Y[0]-t)*F[1]*e),D.push(W);if(""!==I&&D.push(HS(I,n+P*F[0],i+P*F[1])),v){let r;for(const s of v)q=zx(n+(s[0]-t)*F[0]*e,i+(s[0]-t)*F[1]*e,s[1],"above"),L=Gx(q,w),L.taille=_,L.opacite=S,L.style=E,L.epaisseur=A,r=iw(q),r.taille=b,r.largeur=x,D.push(L,r)}this.svg=function(e){let t="";for(const r of D)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of D)e+="\n\t"+t.tikz();return e},this.svgml=function(e,t){let r="";for(const n of D)void 0===n.svgml?r+="\t"+n.svg(e)+"\n":r+="\t"+n.svgml(e,t)+"\n";return r},this.tikzml=function(e){let t="";for(const r of D)void 0===r.tikzml?t+="\t"+r.tikz()+"\n":t+="\t"+r.tikzml(e)+"\n";return t}}function HE(...e){return new VE(...e)}function WE(e=-30,t=-30,r=30,n=30,i=.2,s=1,o=1,a=2,l="black"){Lx.call(this);const u=[];let c,p;c=t>0?t:0,p=e>0?e:0;const h=$w(e,c,r,c);h.styleExtremites="->",h.epaisseur=a,h.color=l;const d=$w(p,t,p,n);d.styleExtremites="->",d.epaisseur=a,u.push(h,d),d.color=l;for(let f=e;f<r;f=Nx(f+s)){const e=$w(f,c-i,f,c+i);e.epaisseur=a,e.color=l,u.push(e)}for(let f=t;f<n;f=Nx(f+o)){const e=$w(p-i,f,p+i,f);e.epaisseur=a,e.color=l,u.push(e)}this.svg=function(e){let t="";for(const r of u)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of u)e+="\n\t"+t.tikz();return e},this.commentaire=`Axes(xmin = ${e}, ymin = ${t}, xmax = ${r}, ymax = ${n}, thick = ${i})`}function YE(...e){return new WE(...e)}function XE(e=1,t=20,r=1,n="black",i=-.6,s=1){Lx.call(this);const o=[];for(let a=Math.ceil(e/s);Nx(a*s)<=t;a=Nx(a+r))o.push(jS(Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(Nx(a*s)).toString(),zx(a,i),"milieu",n));this.svg=function(e){let t="";for(const r of o)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of o)e+="\n\t"+t.tikz();return e},this.commentaire=`labelX(xmin=${e},xmax=${t},step=${r},color=${n},pos=${i},coeff=${s})`}function ZE(...e){return new XE(...e)}function QE(e=1,t=20,r=1,n="black",i=-.6,s=1){Lx.call(this);const o=[];for(let a=Math.ceil(e/s);Nx(a*s)<=t;a=Nx(a+r))o.push(jS(Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(Nx(a*s)).toString(),zx(i,a),"milieu",n));this.svg=function(e){let t="";for(const r of o)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of o)e+="\n\t"+t.tikz();return e},this.commentaire=`labelX(ymin=${e},ymax=${t},step=${r},color=${n},pos=${i})`}function KE(...e){return new QE(...e)}function JE(e=-30,t=-30,r=30,n=30,i="gray",s=.4,o=1,a=!1){Lx.call(this),this.color=i,this.opacite=s;const l=[];for(let u=bx(e,2);u<=bx(r,2);u=bx(Nx(u+o),2)){const e=$w(u,t,u,n);e.color=this.color,e.opacite=this.opacite,a&&(e.pointilles=!0),l.push(e)}for(let u=bx(t,2);u<=bx(n+.005,2);u=bx(Nx(u+o),2)){const t=$w(e,u,r,u);t.color=this.color,t.opacite=this.opacite,a&&(t.pointilles=!0),l.push(t)}this.commentaire=`Grille(xmin = ${e}, ymin = ${t}, xmax = ${r}, ymax = ${n}, color = ${i}, opacite = ${s}, pas = ${o})`,this.svg=function(e){let t="";for(const r of l)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of l)e+="\n\t"+t.tikz();return e}}function eS(...e){return new JE(...e)}function tS(e=-30,t=-30,r=30,n=30,i="gray",s=.4,o=1,a=!1){Lx.call(this),this.color=i,this.opacite=s;const l=[];for(let u=t;u<=n;u+=o){const t=$w(e,u,r,u);t.color=this.color,t.opacite=this.opacite,a&&(t.pointilles=!0),l.push(t)}this.svg=function(e){let t="";for(const r of l)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of l)e+="\n\t"+t.tikz();return e}}function rS(...e){return new tS(...e)}function nS(e=-30,t=-30,r=30,n=30,i="gray",s=.4,o=1,a=!1){Lx.call(this),this.color=i,this.opacite=s;const l=[];for(let u=bx(e,2);u<=bx(r,2);u=bx(Nx(u+o),2)){const e=$w(u,t,u,n);e.color=this.color,e.opacite=this.opacite,a&&(e.pointilles=!0),l.push(e)}this.svg=function(e){let t="";for(const r of l)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of l)e+="\n\t"+t.tikz();return e}}function iS(...e){return new nS(...e)}function sS(e=0,t=0,r=15,n=15,i=.5,s=.2){Lx.call(this);const o=[];for(let a=t;a<=n;a=Nx(a+.25))if(a%1!=0){const t=$w(e,a,r,a);t.color="red",t.opacite=s,o.push(t)}o.push(eS(e,t,r,n,"blue",i,1)),this.svg=function(e){let t="";for(const r of o)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of o)e+="\n\t"+t.tikz();return e}}function oS(...e){return new sS(...e)}function aS({xmin:e=-10,xmax:t=10,ymin:r=-10,ymax:n=10,xstep:i=1,ystep:s=1,type:o="quad",pointColor:a="black",pointRayon:l=.05,opacite:u=1,opaciteDeRemplissage:c=1}){Lx.call(this),this.listeCoords=[];const p=[];let h,d,f,m;switch(o){case"quad":for(let o=e;o<=t;o+=i)for(let e=r;e<=n;e+=s)p.push(Ux(o,e,{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),this.listeCoords.push([o,e]);break;case"hexa":m=!1,f=Math.min(i,s),h=bx(.866*f,2),d=bx(1.732*f,2);for(let i=e;i<=t;i+=d){for(let e=r;e<=n;e+=bx(1.5*f,2))m=!m,m?(p.push(Ux(i,e,{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),p.push(Ux(bx(i+h,2),bx(e+f/2,2),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),p.push(Ux(bx(i+h,2),bx(e+1.5*f,2),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),this.listeCoords.push([i,e],[bx(i+h,2),bx(e+f/2,2)],[bx(i+h,2),bx(e+1.5*f,2)])):(p.push(Ux(i,bx(e+f/2,2),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),this.listeCoords.push([i,bx(e+f/2,2)]));m=!m}break;case"equi":m=!1,f=Math.min(i,s),h=bx(.866*f,2),d=bx(1.732*f,2);for(let i=e;i<=t;i=bx(i+d)){for(let e=r;e<=n;e=bx(e+1.5*f,2))m=!m,m?(p.push(Ux(i,e,{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),p.push(Ux(i,bx(e+f,2),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),p.push(Ux(bx(i+h,2),bx(e+f/2,2),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),p.push(Ux(bx(i+h,2),bx(e+1.5*f,2),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),this.listeCoords.push([i,e],[i,bx(e+f,2)],[bx(i+h,2),bx(e+f/2,2)],[bx(i+h,2),bx(e+1.5*f,2)])):(p.push(Ux(bx(i+h,2),bx(e+f),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),p.push(Ux(i,bx(e+f/2,2),{rayon:l,couleur:a,opacite:u,couleurDeRemplissage:"",opaciteDeRemplissage:c})),this.listeCoords.push([bx(i+h,2),bx(e+f)],[i,bx(e+f/2,2)]));m=!m}}this.svg=function(e){let t="";for(const r of p)t+=r.svg(e);return t},this.tikz=function(){let e="";for(const t of p)e+=t.tikz();return e}}function lS({xmin:e=-10,xmax:t=10,ymin:r=-10,ymax:n=10,xstep:i=1,ystep:s=1,type:o="quad",pointColor:a="black",pointRayon:l=.05,opacite:u=.4,opaciteDeRemplissage:c=.4}){return new aS({xmin:e,xmax:t,ymin:r,ymax:n,xstep:i,ystep:s,type:o,pointColor:a,pointRayon:l,opacite:u,opaciteDeRemplissage:c})}function uS({xmin:e=-10,xmax:t=10,ymin:r=-10,ymax:n=10,xscale:i=1,yscale:s=1,xstep:o=1,ystep:a=1,graduationColor:l="black",afficheZero:u=!1,afficheNumeros:c=!0,afficheLabelX:p=!0,afficheLabelY:h=!0,axesEpaisseur:d=2,axesColor:f="black",grilleHorizontaleVisible:m=!1,grillePrincipaleDistance:g=1,grillePrincipaleColor:y="gray",grillePrincipaleOpacite:v=1.1,grillePrincipalePointilles:b=!1,grillePrincipaleVisible:x=!0,grilleSecondaireDistance:w=.1,grilleSecondaireColor:_="gray",grilleSecondaireOpacite:E=.3,grilleSecondairePointilles:S=!1,grilleSecondaireVisible:A=!1,graduationsxMin:N=e,graduationsxMax:k=t,graduationsyMin:M=r,graduationsyMax:C=n,positionLabelX:T=-.6,positionLabelY:O=-.6,legendeX:I="x",legendeY:P="y",positionLegendeX:D,positionLegendeY:R}={}){let L,q;Lx.call(this),L=r>0?r:0,q=e>0?e:0,1!==s&&(r=Dx(s,r),n=Px(s,n)),1!==i&&(e=Dx(i,e),t=Px(i,t)),this.svg=function($){let B="";return x&&(B+=m?rS(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),y,v,g,b).svg($):eS(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),y,v,g,b).svg($)),A&&(B+=eS(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),_,E,w,S).svg($)),B+=YE(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),4/$,o,a,d,f).svg($),c&&(u?(p&&(B+=ZE(Px(o,N),k,o,l,Nx(L/s)+20*T/$,i).svg($)),h&&(B+=KE(Px(a,M),C,a,l,Nx(q/i)+20*O/$,s).svg($))):(p&&(B+=ZE(Px(o,N),-1,o,l,Nx(L/s)+20*T/$,i).svg($)),h&&(B+=KE(Px(a,M),-1,a,l,Nx(q/i)+20*O/$,s).svg($)),p&&(B+=ZE(Math.max(o,Px(o,N)),k,o,l,Nx(L/s)+20*T/$,i).svg($)),h&&(B+=KE(Math.max(a,Px(a,M)),C,a,l,Nx(q/i)+20*O/$,s).svg($)))),void 0===D&&(D=[t+4/$,L+6/$]),void 0===R&&(R=[q+6/$,n+8/$]),B+=HS(I,Nx(D[0]/i),Nx(D[1]/s),"droite").svg($),B+=HS(P,Nx(R[0]/i),Nx(R[1]/s),"droite").svg($),B},this.tikz=function(){let c="";return x&&(c+=m?rS(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),y,v,g,b).tikz():eS(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),y,v,g,b).tikz()),A&&(c+=eS(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),_,E,w,S).tikz()),c+=YE(Nx(e/i),Nx(r/s),Nx(t/i),Nx(n/s),.2/ox.scale,o,a,d,f).tikz(),u?(p&&(c+=ZE(Px(o,N),k,o,l,Nx(L/s)+T/ox.scale,i).tikz()),h&&(c+=KE(Px(a,M),C,a,l,Nx(q/i)+O/ox.scale,s).tikz())):(p&&(c+=ZE(Px(o,N),-1,o,l,Nx(L/s)+T/ox.scale,i).tikz()),h&&(c+=KE(Px(a,M),-1,a,l,Nx(q/i)+O/ox.scale,s).tikz()),p&&(c+=ZE(Math.max(o,Px(o,N)),k,o,l,Nx(L/s)+T/ox.scale,i).tikz()),h&&(c+=KE(Math.max(a,Px(a,M)),C,a,l,Nx(q/i)+O/ox.scale,s).tikz())),void 0===D&&(D=[t+.2/ox.scale,L+.3/ox.scale]),void 0===R&&(R=[q+.3/ox.scale,n+.2/ox.scale]),c+=HS(I,Nx(D[0]/i),Nx(D[1]/s),"droite").tikz(),c+=HS(P,Nx(R[0]/i),Nx(R[1]/s),"droite").tikz(),c},this.xscale=i,this.yscale=s}function cS(...e){return new uS(...e)}function pS({xUnite:e=1,yUnite:t=1,xMin:r=-10,xMax:n=10,yMin:i=-10,yMax:s=10,axesEpaisseur:o=2,axesCouleur:a="black",axeXStyle:l="->",axeYStyle:u="->",thickEpaisseur:c=2,thickHauteur:p=.2,thickCouleur:h=a,xThickDistance:d=1,xThickListe:f=!1,xThickMin:m=r+d,xThickMax:g=n-d,yThickDistance:y=1,yThickListe:v=!1,yThickMin:b=i+y,yThickMax:x=s-y,xLabelDistance:w=d,xLabelListe:_=!1,xLabelMin:E=m,xLabelMax:S=g,yLabelDistance:A=y,yLabelListe:N=!1,yLabelMin:k=b,yLabelMax:M=x,xLegende:C="",xLegendePosition:T=[Nx(n*e)+.5,.5],yLegende:O="",yLegendePosition:I=[.5,Nx(s*t)+.5],grille:P=!0,grilleDistance:D=!1,grilleCouleur:R="black",grilleOpacite:L=.5,grilleEpaisseur:q=1,grilleSecondaire:$=!1,grilleSecondaireDistance:B=!1,grilleSecondaireCouleur:z="gray",grilleSecondaireOpacite:F=.3,grilleSecondaireEpaisseur:U=1,grilleX:j=P,grilleXListe:G=!1,grilleXDistance:V=D,grilleXMin:H=!1,grilleXMax:W=!1,grilleXCouleur:Y=R,grilleXOpacite:X=L,grilleY:Z=P,grilleYListe:Q=!1,grilleYDistance:K=D,grilleYMin:J=!1,grilleYMax:ee=!1,grilleYCouleur:te=R,grilleYOpacite:re=L,grilleSecondaireX:ne=$,grilleSecondaireXListe:ie=!1,grilleSecondaireXDistance:se=B,grilleSecondaireXMin:oe=!1,grilleSecondaireXMax:ae=!1,grilleSecondaireXCouleur:le=z,grilleSecondaireXOpacite:ue=F,grilleSecondaireY:ce=$,grilleSecondaireYListe:pe=!1,grilleSecondaireYDistance:he=B,grilleSecondaireYMin:de=!1,grilleSecondaireYMax:fe=!1,grilleSecondaireYCouleur:me=z,grilleSecondaireYOpacite:ge=F}={}){Lx.call(this),this.xUnite=e,this.yUnite=t,this.xMin=r,this.xMax=n,this.yMin=i,this.yMax=s;const ye=[],ve=Math.max(0,i),be=$w(Nx(r*e),Nx(ve*t),Nx(n*e),Nx(ve*t));be.epaisseur=o,be.styleExtremites=l,be.color=a;const xe=Math.max(0,r),we=$w(Nx(xe*e),Nx(i*t),Nx(xe*e),Nx(s*t));we.epaisseur=o,we.styleExtremites=u,we.color=a,ye.push(be,we),be.isVisible=!1,we.isVisible=!1,f||(f=yx(m,g,[0],d));for(const _e of f){const r=$w(Nx(_e*e),Nx(ve*t-p),Nx(_e*e),Nx(ve*t+p));r.isVisible=!1,r.epaisseur=c,r.color=h,ye.push(r)}v||(v=yx(b,x,[0],y));for(const _e of v){const r=$w(Nx(xe*e-p),Nx(_e*t),Nx(xe*e+p),Nx(_e*t));r.isVisible=!1,r.epaisseur=c,r.color=h,ye.push(r)}_||(_=yx(E,S,[0],w));for(const _e of _){const r=HS(Cx(_e),Nx(_e*e),Nx(ve*t)-.5,"milieu","black",1,"middle",!1);r.isVisible=!1,ye.push(r)}N||(N=yx(k,M,[0],A));for(const _e of N){const r=HS(Cx(_e),Nx(xe*e)-.5,Nx(_e*t),"milieu","black",1,"middle",!1);r.isVisible=!1,ye.push(r)}if(C.length>0&&ye.push(HS(C,T[0],T[1],"droite")),O.length>0&&ye.push(HS(O,I[0],I[1],"droite")),Z){Q||("number"!=typeof J&&(J=b),"number"!=typeof ee&&(ee=x),K||(K=y),Q=yx(J,ee,[0],K));for(const i of Q){const s=$w(Nx(r*e),Nx(i*t),Nx(n*e),Nx(i*t));s.isVisible=!1,s.color=te,s.opacite=re,s.epaisseur=q,"pointilles"===Z&&(s.pointilles=!0),ye.push(s)}}if(j){G||("number"!=typeof H&&(H=m),"number"!=typeof W&&(W=g),"number"!=typeof V&&(V=d),G=yx(H,W,[0],V));for(const r of G){const n=$w(Nx(r*e),Nx(i*t),Nx(r*e),Nx(s*t));n.isVisible=!1,n.color=Y,n.opacite=X,n.epaisseur=q,"pointilles"===j&&(n.pointilles=!0),ye.push(n)}}if(ce){pe||("number"!=typeof de&&(de=b),"number"!=typeof fe&&(fe=x),"number"!=typeof he&&(he=Nx(y/2)),pe=yx(de,fe,Q,he));for(const i of pe){const s=$w(Nx(r*e),Nx(i*t),Nx(n*e),Nx(i*t));s.isVisible=!1,s.color=me,s.opacite=ge,s.epaisseur=U,"pointilles"===ce&&(s.pointilles=!0),ye.push(s)}}if(ne){ie||("number"!=typeof oe&&(oe=m),"number"!=typeof ae&&(ae=g),"number"!=typeof se&&(se=Nx(d/2)),ie=yx(oe,ae,G,se));for(const r of ie){const n=$w(Nx(r*e),Nx(i*t),Nx(r*e),Nx(s*t));n.isVisible=!1,n.color=le,n.opacite=ue,n.epaisseur=U,"pointilles"===ne&&(n.pointilles=!0),ye.push(n)}}this.svg=function(e){let t="";for(const r of ye)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of ye)e+="\n\t"+t.tikz();return e},this.svgml=function(e,t){let r="";for(const n of ye)void 0===n.svgml?r+="\n\t"+n.svg(e):r+="\n\t"+n.svgml(e,t);return r},this.tikzml=function(e){let t="";for(const r of ye)void 0===r.tikzml?t+="\n\t"+r.tikz():t+="\n\t"+r.tikzml(e);return t}}function hS(...e){return new pS(...e)}function dS(e,t,r={xUnite:1,yUnite:1}){return zx(Nx(e*r.xUnite),Nx(t*r.yUnite))}function fS(e,t,{couleurDesPoints:r="red",couleurDuTrait:n="blue",styleDuTrait:i="",epaisseurDuTrait:s=2,styleDesPoints:o="x",tailleDesPoints:a=3}={}){Lx.call(this);const l=[],u=[];for(const[p,h]of e){const e=dS(p,h,t);u.push(e);const n=Gx(e);n.color=r,n.style=o,n.taille=a,n.isVisible=!1,e.isVisible=!1,l.push(n)}const c=Tw(...u);c.isVisible=!1,c.epaisseur=s,c.color=n,"pointilles"===i&&(c.pointilles=!0),l.push(c),this.svg=function(e){let t="";for(const r of l)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of l)e+="\n\t"+t.tikz();return e},this.svgml=function(e,t){let r="";for(const n of l)void 0===n.svgml?r+="\n\t"+n.svg(e):r+="\n\t"+n.svgml(e,t);return r},this.tikzml=function(e){let t="";for(const r of l)void 0===r.tikzml?t+="\n\t"+r.tikz():t+="\n\t"+r.tikzml(e);return t}}function mS(...e){return new fS(...e)}function gS(e,t,r="",{epaisseur:n=.6,couleurDeRemplissage:i="blue",color:s="black",opaciteDeRemplissage:o=.3,angle:a=66,unite:l=1,hachures:u=!1}={}){Lx.call(this);const c=jw(zx(Nx(e-n/2),0),zx(Nx(e-n/2),Nx(t*l)),zx(Nx(e+n/2),Nx(t*l)),zx(Nx(e+n/2),0));c.couleurDeRemplissage=i,c.opaciteDeRemplissage=o,c.color=s,u&&(c.hachures=u);const p=HS(r,e,-.2,a,"black",1,"gauche");this.tikz=function(){return c.tikz()+"\n"+p.tikz()},this.svg=function(e){return c.svg(e)+"\n"+p.svg(e)}}function yS(...e){return new gS(...e)}function vS(e,t,r="",{epaisseur:n=.6,couleurDeRemplissage:i="blue",color:s="black",opaciteDeRemplissage:o=.3,unite:a=1,angle:l="gauche",hachures:u=!1}={}){Lx.call(this);const c=jw(zx(0,Nx(t-n/2)),zx(0,Nx(t+n/2)),zx(Nx(a*e),Nx(t+n/2)),zx(Nx(a*e),Nx(t-n/2)));c.couleurDeRemplissage=i,c.opaciteDeRemplissage=o,c.color=s,u&&(c.hachures=u);const p=HS(r,-.2,t,l,"black",1,"gauche");this.tikz=function(){return c.tikz()+"\n"+p.tikz()},this.svg=function(e){return c.svg(e)+"\n"+p.svg(e)}}function bS(...e){return new vS(...e)}function xS(e,t,r=1,n=1,i="red",s="",o=""){Lx.call(this),this.x=e,this.y=t,this.xscale=r,this.yscale=n,""===s&&(s=e.toString()),""===o&&(o=t.toString()),this.textAbs=s,this.textOrd=o,this.color=i,this.svg=function(e){const t=Nx(this.x/this.xscale),r=Nx(this.y/this.yscale),n=zx(t,r),i=zx(t,0),s=zx(0,r),o=$w(i,n,this.color),a=$w(n,s,this.color);return o.styleExtremites="->",a.styleExtremites="->",o.pointilles=!0,a.pointilles=!0,"\t\n"+o.svg(e)+"\t\n"+a.svg(e)+"\t\n"+HS(this.textAbs,t,-20/e,"milieu",this.color).svg(e)+"\t\n"+HS(this.textOrd,-20/e,r,"milieu",this.color).svg(e)},this.tikz=function(){const e=Nx(this.x/this.xscale),t=Nx(this.y/this.yscale),r=zx(e,t),n=zx(e,0),i=zx(0,t),s=$w(n,r,this.color),o=$w(r,i,this.color);return s.styleExtremites="->",o.styleExtremites="->",s.pointilles=!0,o.pointilles=!0,"\t\n"+s.tikz()+"\t\n"+o.tikz()+"\t\n"+HS(this.textAbs,e,-1/ox.scale,"milieu",this.color).tikz()+"\t\n"+HS(this.textOrd,-1/ox.scale,t,"milieu",this.color).tikz()},this.svgml=function(r,n){const i=Nx(this.x/this.xscale),s=Nx(this.y/this.yscale),o=zx(e,t),a=zx(i,0),l=zx(0,s),u=$w(a,o,this.color),c=$w(o,l,this.color);return u.styleExtremites="->",c.styleExtremites="->",u.pointilles=!0,c.pointilles=!0,"\t\n"+u.svgml(r,n)+"\t\n"+c.svgml(r,n)+"\t\n"+HS(this.textAbs,i,-20/r,"milieu",this.color).svg(r)+"\t\n"+HS(this.textOrd,-20/r,s,"milieu",this.color).svg(r)},this.tikzml=function(r){const n=Nx(this.x/this.xscale),s=Nx(this.y/this.yscale),o=zx(e,t),a=zx(n,0),l=zx(0,s),u=$w(a,o,i),c=$w(o,l,i);return u.styleExtremites="->",c.styleExtremites="->",u.pointilles=!0,c.pointilles=!0,"\t\n"+u.tikzml(r)+"\t\n"+c.tikzml(r)+"\t\n"+HS(this.textAbs,n,-1/ox.scale,"milieu",this.color).tikz()+"\t\n"+HS(this.textOrd,-1/ox.scale,s,"milieu",this.color).tikz()}}function wS(...e){return new xS(...e)}function _S(e,t,r,n,i,s,o){Lx.call(this),this.x=e,this.y=t,this.xscale=r,this.yscale=n,""===o&&(o=this.x.toString()),""===s&&(s=this.y.toString()),this.textAbs=o,this.textOrd=s,this.color=i,this.svg=function(e){const t=Nx(this.x/this.xscale),r=Nx(this.y/this.yscale),n=zx(t,r),s=zx(t,0),o=zx(0,r),a=$w(n,s,i),l=$w(o,n,i);return a.styleExtremites="->",l.styleExtremites="->",a.pointilles=!0,l.pointilles=!0,"\t\n"+a.svg(e)+"\t\n"+l.svg(e)+"\t\n"+HS(this.textAbs,t,-20/e,"milieu",this.color).svg(e)+"\t\n"+HS(this.textOrd,-20/e,r,"milieu",this.color).svg(e)},this.tikz=function(){const e=Nx(this.x/this.xscale),t=Nx(this.y/this.yscale),r=zx(e,t),n=zx(e,0),s=zx(0,t),o=$w(r,n,i),a=$w(s,r,i);return o.styleExtremites="->",a.styleExtremites="->",o.pointilles=!0,a.pointilles=!0,"\t\n"+o.tikz()+"\t\n"+a.tikz()+"\t\n"+HS(this.textAbs,e,-1/ox.scale,"milieu",this.color).tikz()+"\t\n"+HS(this.textOrd,-1/ox.scale,t,"milieu",this.color).tikz()},this.svgml=function(e,t){const r=Nx(this.x/this.xscale),n=Nx(this.y/this.yscale),s=zx(r,n),o=zx(r,0),a=zx(0,n),l=$w(s,o,i),u=$w(a,s,i);return l.styleExtremites="->",u.styleExtremites="->",l.pointilles=!0,u.pointilles=!0,"\t\n"+l.svgml(e,t)+"\t\n"+u.svgml(e,t)+"\t\n"+HS(this.textAbs,r,-20/e,"milieu",this.color).svg(e)+"\t\n"+HS(this.textOrd,-20/e,n,"milieu",this.color).svg(e)},this.tikzml=function(e){const t=Nx(this.x/this.xscale),r=Nx(this.y/this.yscale),n=zx(t,r),s=zx(t,0),o=zx(0,r),a=$w(n,s,i),l=$w(o,n,i);return a.styleExtremites="->",l.styleExtremites="->",a.pointilles=!0,l.pointilles=!0,"\t\n"+a.tikzml(e)+"\t\n"+l.tikzml(e)+"\t\n"+HS(this.textAbs,t,-1/ox.scale,"milieu",this.color).tikz()+"\t\n"+HS(this.textOrd,-1/ox.scale,r,"milieu",this.color).tikz()}}function ES(...e){return new _S(...e)}function SS(e,t=-20,r=30,n="black",i=2,s=[1,1],o=.1){let a,l;Lx.call(this),this.color=n,s.constructor===uS?(a=s.xscale,l=s.yscale):(a=s[0],l=s[1]);const u=[];for(let p=Nx(t/a);p<=Nx(r/a);p=Nx(p+o))isFinite(e(p*a))&&u.push(zx(p,e(p*a)/l));const c=Tw([...u],this.color);return c.epaisseur=i,c}function AS(e,t=-20,r=30,n="black",i=2,s=[1,1],o=.1){return new SS(e,t,r,n,i,s,o)}function NS(e,{repere:t={},color:r="black",epaisseur:n=2,step:i=!1,xMin:s,xMax:o,yMin:a,yMax:l,xUnite:u=1,yUnite:c=1}={}){let p,h,d,f,m,g;Lx.call(this),this.color=r,p=void 0===s?t.xMin:s,h=void 0===a?t.yMin:a,d=void 0===o?t.xMax:o,f=void 0===l?t.yMax:l,m=t.xUnite,g=t.yUnite,isNaN(m)&&(m=u),isNaN(g)&&(g=c);const y=[];let v,b,x=[];v=i||Nx(.2/u);for(let w=p;px(w,d);w+=v)isNaN(e(w))?w+=.05:e(w)<f+1&&e(w)>h-1?x.push(zx(Nx(w*m),Nx(e(w)*g))):(b=Tw([...x],this.color),b.epaisseur=n,y.push(b),x=[]);b=Tw([...x],this.color),b.epaisseur=n,y.push(b),this.svg=function(e){let t="";for(const r of y)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of y)e+="\n\t"+t.tikz();return e},this.svgml=function(e,t){let r="";for(const n of y)void 0===n.svgml?r+="\n\t"+n.svg(e):r+="\n\t"+n.svgml(e,t);return r},this.tikzml=function(e){let t="";for(const r of y)void 0===r.tikzml?t+="\n\t"+r.tikz():t+="\n\t"+r.tikzml(e);return t}}function kS(...e){return new NS(...e)}function MS(e,t="black",r=2,n=[1,1],i,s){Lx.call(this),this.color=t,this.epaisseur=r,this.svg=function(t){let r=`<path d="M ${e[0][0]*t} ${-e[0][1]*t} L `;for(let n=1;n<e.length;n++)r+=`${bx(e[n][0]*t,1)} ${-bx(e[n][1]*t,1)} `;return r+=`" stroke="${this.color}" stroke-width="${this.epaisseur}" fill="transparent"  id="${this.id}" />`,r},this.tikz=function(){let t="\\draw plot[smooth] coordinates{";for(let r=0;r<e.length;r++)t+=`(${e[r][0]},${e[r][1]}) `;return t+="};\n",t}}function CS(...e){return new MS(...e)}const TS=(e,t,r)=>{const n=(1-Math.cos(r*Math.PI))/2;return e*(1-n)+t*n};function OS(e,t="black",r=2,n=[1,1],i,s){Lx.call(this);const o=[];for(let a=0;a<e.length-1;a++){const l=e[a][0],u=e[a][1],c=e[a+1][0],p=e[a+1][1];let h,d;h=i>l?i:l,d=s<c?s:c;const f=AS((e=>TS(u,p,Nx((e-l)/(c-l)))),h,d,t,r,n);o.push(f),this.svg=function(e){let t="";for(const r of o)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of o)e+="\n\t"+t.tikz();return e}}}function IS(...e){return new OS(...e)}function PS(e,{color:t="black",epaisseur:r=1,repere:n={},step:i=.2}={}){Lx.call(this);const s=[];for(let o=0;o<e.length-1;o++){const a=e[o][0],l=e[o][1],u=e[o+1][0],c=e[o+1][1],p=e=>TS(l,c,Nx((e-a)/(u-a)));let h,d;h=n.xMin>a?n.xMin:a,d=n.xMax<u?n.xMax:u;const f=kS(p,{step:i,xMin:h,xMax:d,color:t,epaisseur:r,xUnite:n.xUnite,yUnite:n.yUnite,yMin:n.yMin,yMax:n.yMax});s.push(f)}this.svg=function(e){let t="";for(const r of s)t+="\n\t"+r.svg(e);return t},this.tikz=function(){let e="";for(const t of s)e+="\n\t"+t.tikz();return e}}function DS(...e){return new PS(...e)}function RS(e,t){const r=e[0][0],n=e[0][1],i=e[1][0],s=e[1][1];return TS(n,s,Nx((t-r)/(i-r)))}function LS(e,t){const r=e[0][0],n=e[0][1],i=e[1][0],s=e[1][1];return function(e,t,r,n,i=.01){let s,o;e>t&&(s=e,e=t,t=s);s=(t+e)/2,o=r(s);for(;Math.abs(o-n)>i;)r(e)<r(t)?o>n?t=s:e=s:o>n?e=s:t=s,s=(e+t)/2,o=r(s);return s}(r,i,(e=>TS(n,s,Nx((e-r)/(i-r)))),t,.01)}function qS(e,t="blue"){Lx.call(this),this.epaisseur=2,this.color=t,this.taille=.2,this.svg=function(t){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}let r=`<polyline points="${Nx(e.xSVG(t)+20*this.taille)},${Nx(e.ySVG(t)+2*this.taille*20/t*t)} ${e.xSVG(t)},${Nx(e.ySVG(t)+2*this.taille*20)} ${e.xSVG(t)},${Nx(e.ySVG(t)+-2*this.taille*20)} ${Nx(e.xSVG(t)+20*this.taille)},${Nx(e.ySVG(t)+-2*this.taille*20)}" fill="none" stroke="${this.color}" ${this.style} />`;return r+=`\n\t<text x="${e.xSVG(t)}" y="${Nx(e.ySVG(t)+20*this.taille*5)}" text-anchor="middle" dominant-baseline="central" fill="${this.color}">${e.nom}</text>\n `,r},this.tikz=function(){let t=`\\draw[very thick,${this.color}] (${Nx(e.x+this.taille/ox.scale)},${e.y+this.taille/ox.scale})--(${e.x},${e.y+this.taille/ox.scale})--(${e.x},${e.y-this.taille/ox.scale})--(${Nx(e.x+this.taille/ox.scale)},${e.y-this.taille/ox.scale});`;return t+=`\n\t\\draw[${this.color}] (${e.x},${e.y-this.taille/ox.scale}) node[below] {$${e.nom}$};`,t}}function $S(...e){return new qS(...e)}function BS(e,t="blue"){Lx.call(this),this.epaisseur=2,this.color=t,this.taille=.2,this.svg=function(t){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}let r=`<polyline points="${Nx(e.xSVG(t)-20*this.taille)},${Nx(e.ySVG(t)+2*this.taille*20)} ${e.xSVG(t)},${Nx(e.ySVG(t)+2*this.taille*20)} ${e.xSVG(t)},${Nx(e.ySVG(t)-2*this.taille*20)} ${Nx(e.xSVG(t)-20*this.taille)},${Nx(e.ySVG(t)-2*this.taille*20)}" fill="none" stroke="${this.color}" ${this.style} />`;return r+=`\n\t<text x="${e.xSVG(t)}" y="${e.ySVG(t)+5*this.taille*20}" text-anchor="middle" dominant-baseline="central" fill="${this.color}">${e.nom}</text>\n `,r},this.tikz=function(){let t=`\\draw[very thick,${this.color}] (${Nx(e.x-this.taille/ox.scale)},${e.y+this.taille/ox.scale})--(${e.x},${e.y+this.taille/ox.scale})--(${e.x},${e.y-this.taille/ox.scale})--(${Nx(e.x-this.taille/ox.scale)},${e.y-this.taille/ox.scale});`;return t+=`\n\t\\draw[${this.color}] (${e.x},${e.y-this.taille/ox.scale}) node[below] {$${e.nom}$};`,t}}function zS(...e){return new BS(...e)}function FS(e,t,r="blue",n=0){const i=$w(zx(e.x,e.y+n),zx(t.x,t.y+n));return i.epaisseur=3,i.color=r,i}function US(e,t,r="milieu",n="black",i=1,s="middle",o=!1){Lx.call(this),this.color=n,this.contour=!1,this.taille=10*i,this.opacite=1,this.couleurDeRemplissage=n,this.opaciteDeRemplissage=this.opacite,this.bordures=[t.x-.2*e.length,t.y-.4,t.x+.2*e.length,t.y+.4],"string"!=typeof e&&(e=String(e)),"$"===e.charAt(0)?(t.positionLabel="centre",this.svg=function(r){return WS(e.substr(1,e.length-2),t,this.color,8*e.length,12,"").svg(r)},this.tikz=function(){let o="";if("number"==typeof r){let i="center";"gauche"===s&&(i="west"),"droite"===s&&(i="east"),o=`\\draw [${n}] (${t.x},${t.y}) node[anchor = ${i}, rotate = ${-r}] {${e}};`}else{let s="";"gauche"===r&&(s=`node[anchor = east,scale=${i}]`),"droite"===r&&(s=`node[anchor = west,scale=${i}]`),"milieu"===r&&(s=`node[anchor = center,scale=${i}]`),o=`\\draw [${n}] (${t.x},${t.y}) ${s} {${e}};`}return o}):(this.svg=function(n){let i="",a="";if(o&&(a=' font-family= "Book Antiqua"; font-style= "italic" '),this.contour?a+=` style="font-size: ${this.taille}px;fill: ${this.couleurDeRemplissage};fill-opacity: ${this.opaciteDeRemplissage};stroke: ${this.color};stroke-width: 0.5px;stroke-linecap: butt;stroke-linejoin:miter;stroke-opacity: ${this.opacite}" `:a+=` style="font-size:${this.taille}px;fill:${this.color};fill-opacity:${this.opacite};${this.gras?"font-weight:bolder":""}" `,"number"==typeof r)i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor = "${s}" dominant-baseline = "central" fill="${this.couleurDeRemplissage}" transform="rotate(${r} ${t.xSVG(n)} ${t.ySVG(n)})" id="${this.id}" >${e}</text>\n `;else switch(r){case"milieu":i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor="middle" dominant-baseline="central" fill="${this.couleurDeRemplissage}" id="${this.id}" >${e}</text>\n `;break;case"gauche":i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor="end" dominant-baseline="central" fill="${this.couleurDeRemplissage}" id="${this.id}" >${e}</text>\n `;break;case"droite":i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor="start" dominant-baseline="central" fill="${this.couleurDeRemplissage}" id="${this.id}" >${e}</text>\n `}return i},this.tikz=function(){let a="";if("number"==typeof r){let i="center";"gauche"===s&&(i="west"),"droite"===s&&(i="east"),a=`\\draw [${n}] (${t.x},${t.y}) node[anchor = ${i}, rotate = ${-r}] {${e}};`}else{let s="";"gauche"===r&&(s=`node[anchor = east,scale=${i}]`),"droite"===r&&(s=`node[anchor = west,scale=${i}]`),"milieu"===r&&(s=`node[anchor = center,scale=${i}]`),a=o?`\\draw [${n},fill opacity = ${this.opacite}] (${t.x},${t.y}) ${s} {$${e}$};`:`\\draw [${n},fill opacity = ${this.opacite}] (${t.x},${t.y}) ${s} {${e}};`}return a})}function jS(e,t,r="milieu",n="black",i=1,s="middle",o=!1){return new US(e,t,r,n,i,s,o)}function GS(e,t,r="milieu",n="black",i=1,s="middle",o=!1,a){Lx.call(this),this.color=n,this.contour=!1,this.taille=10*i,this.opacite=1,this.couleurDeRemplissage=n,this.opaciteDeRemplissage=this.opacite,this.bordures=[t.x-.2*e.length,t.y-.4,t.x+.2*e.length,t.y+.4],"$"===e.charAt(0)?(this.svg=function(r){return WS(e.substr(1,e.length-2),t,this.color,8*e.length,10,"",.8*this.taille).svg(r)},this.tikz=function(){let o="";if("number"==typeof r){let i="center";"gauche"===s&&(i="west"),"droite"===s&&(i="east"),o=`\\draw [${n}] (${t.x},${t.y}) node[anchor = ${i}, rotate = ${-r}] {${e}};`}else{let s="";"gauche"===r&&(s=`node[anchor = east,scale=${i*a*1.25}]`),"droite"===r&&(s=`node[anchor = west,scale=${i*a*1.25}]`),"milieu"===r&&(s=`node[anchor = center,scale=${i*a*1.25}]`),o=`\\draw [${n}] (${t.x},${t.y}) ${s} {${e}};`}return o}):(this.svg=function(n){let i="",a="";if(o&&(a=' font-family= "Book Antiqua"; font-style= "italic" '),this.contour?a+=` style="font-size: ${this.taille}px;fill: ${this.couleurDeRemplissage};fill-opacity: ${this.opaciteDeRemplissage};stroke: ${this.color};stroke-width: 0.5px;stroke-linecap: butt;stroke-linejoin:miter;stroke-opacity: ${this.opacite}" `:a+=` style="font-size:${this.taille}px;fill:${this.color};fill-opacity:${this.opacite};${this.gras?"font-weight:bolder":""}" `,"number"==typeof r)i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor = "${s}" dominant-baseline = "central" fill="${this.color}" transform="rotate(${r} ${t.xSVG(n)} ${t.ySVG(n)})" id="${this.id}" >${e}</text>\n `;else switch(r){case"milieu":i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor="middle" dominant-baseline="central" fill="${this.color}" id="${this.id}" >${e}</text>\n `;break;case"gauche":i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor="end" dominant-baseline="central" fill="${this.color}" id="${this.id}" >${e}</text>\n `;break;case"droite":i=`<text ${a} x="${t.xSVG(n)}" y="${t.ySVG(n)}" text-anchor="start" dominant-baseline="central" fill="${this.color}" id="${this.id}" >${e}</text>\n `}return i},this.tikz=function(){let l="";if(o&&(e="$"+e+"$"),"number"==typeof r){let o="center";"gauche"===s&&(o="west"),"droite"===s&&(o="east"),l=`\\draw [${n},fill opacity = ${this.opacite}] (${t.x},${t.y}) node[anchor = ${o},scale=${i*a*1.25}, rotate = ${-r}] {${e}};`}else{let s="";"gauche"===r&&(s=`node[anchor = east,scale=${Nx(i*a*1.25)}]`),"droite"===r&&(s=`node[anchor = west,scale=${Nx(i*a*1.25)}]`),"milieu"===r&&(s=`node[anchor = center,scale=${Nx(i*a*1.25)}]`),l=`\\draw [${n},fill opacity = ${this.opacite}] (${t.x},${t.y}) ${s} {${e}};`}return l})}function VS(e,t,r="milieu",n="black",i=1,s="middle",o=!1,a=1){return new GS(e,t,r,n,i,s,o,a)}function HS(e,t,r,n="milieu",i,s=1,o="middle",a=!1){return new US(e,zx(t,r),n,i,s,o,a)}function WS(e,t,r="black",n=20,i=12,s="white",o=8){let a,l;const u=ox.pixelsParCm,c=bx(10*Math.log10(o),2);switch(t.positionLabel){case"above":a=t.x,l=t.y+c/u;break;case"below":a=t.x,l=t.y-c/u;break;case"left":a=t.x-c/u,l=t.y;break;case"right":a=t.x+c/u,l=t.y;break;case"above right":a=t.x+c/u,l=t.y+c/u;break;case"above left":a=t.x-c/u,l=t.y+c/u;break;case"below right":a=t.x+c/u,l=t.y-c/u;break;case"below left":a=t.x-c/u,l=t.y-c/u;break;default:a=t.x,l=t.y}return XS(e,bx(a,2),bx(l,2),r,n,i,s,o)}function YS(e,t,r,n,i,s,o,a){Lx.call(this),this.x=t,this.y=r,this.largeur=bx(i*Math.log10(2*a),2),this.hauteur=bx(s*Math.log10(a),2),this.colorBackground=o,this.color=n,this.texte=e,this.tailleCaracteres=a,this.bordures=[t-.2*e.length,r-.02*this.hauteur,t+.2*e.length,r+.02*this.hauteur],this.svg=function(e){let t;t=this.tailleCaracteres>19?"\\huge":this.tailleCaracteres>16?"\\LARGE":this.tailleCaracteres>13?"\\Large":this.tailleCaracteres>11?"\\large":this.tailleCaracteres<6?"\\tiny":this.tailleCaracteres<8?"\\scriptsize":this.tailleCaracteres<9?"\\footnotesize":this.tailleCaracteres<10?"\\small":"\\normalsize";const r=Nx(this.largeur/2),i=bx(.05*ox.pixelsParCm*Math.log10(a),2);return""!==this.colorBackground?`<foreignObject style=" overflow: visible; line-height: 0;" x="${bx(this.x*e,2)-r}" y="${bx(-this.y*e-i-this.hauteur/2,2)}"  width="${this.largeur}" height="${this.hauteur}" id="${this.id}" ><div style="margin:auto;width:${this.largeur}px;height:${this.hauteur}px;position:fixed!important; text-align:center">\n    $\\colorbox{${this.colorBackground}}{$\\color{${n}}{${t} ${this.texte}}$}$</div></foreignObject>`:`<foreignObject style=" overflow: visible; line-height: 0;" x="${bx(this.x*e,2)-r}" y="${bx(-this.y*e-i-this.hauteur/2,2)}"  width="${this.largeur}" height="${this.hauteur}" id="${this.id}" ><div style="width:${this.largeur}px;height:${this.hauteur}px;position:fixed!important; text-align:center">\n      $\\color{${this.color}}{${t} ${this.texte}}$</div></foreignObject>`},this.tikz=function(){let i;return i=""!==this.colorBackground?`\\draw (${t},${r}) node[anchor = center] {\\colorbox{${o}}{$\\color{${n}}{${e}}$}};`:`\\draw (${t},${r}) node[anchor = center] {$\\color{${n}}{${e}}$};`,i}}function XS(e,t,r,n="black",i=50,s=20,o="white",a=8){return""===e?$x():new YS(e,t,r,n,i,s,o,a)}function ZS({x:e=0,y:t=0,fraction:r={num:1,den:2},couleur:n="black"}={}){Lx.call(this);const i=Math.abs(r.n),s=Math.abs(r.d),o=vx(r.n)*vx(r.d),a=10*Math.max(Math.floor(Math.log10(i))+1,Math.floor(Math.log10(s))+1);this.svg=function(r){const l=$w(e-a/r/2,t,e+a/r/2,t,n);l.isVisible=!1;let u=l.svg(r);-1===o&&(u+=$w(Nx(e-(a+15)/r/2,0),t,Nx(e-(a+5)/r/2,0),t,n).svg(r));const c=HS(Tx(i),e,Nx(t+10/r),"milieu",n);u+=c.svg(r);const p=HS(Tx(s),e,Nx(t-10/r),"milieu",n);return u+=p.svg(r),c.isVisible=!1,p.isVisible=!1,u=`<g id="${this.id}">${u}</g>`,u},this.tikz=function(){let r=$w(e,t,Nx(e+a/30/ox.scale,2),t,n).tikz();return-1===o&&(r+=$w(Nx(e-(a/30+.785)/ox.scale/2,2),t,Nx(e-(a/30+.25)/ox.scale/2,2),t,n).tikz()),r+=HS(Tx(i),Nx(e+a/60/ox.scale,2),Nx(t+10/30/ox.scale,2),"milieu",n).tikz(),r+=HS(Tx(s),Nx(e+a/60/ox.scale,2),Nx(t-10/30/ox.scale,2),"milieu",n).tikz(),r}}function QS(e){return new ZS(e)}function KS(e,t,r){return void 0===r?Nx(Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)):Nx(Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),r)}function JS(e){return Nx(Math.sqrt(e.x**2+e.y**2))}function eA(e,t,r){const n=KS(t,e),i=KS(t,r),s=KS(e,r),o=Dw(t,e),a=Dw(t,r);return o.x*a.y-o.y*a.x==0?o.x*a.x>0?0:o.x*a.x<0?180:o.y*a.y>0?0:180:Nx(180*Math.acos((s**2-n**2-i**2)/(-2*n*i))/Math.PI,2)}function tA(e,t,r){const n=j_(e,t,90),i=Dw(t,r),s=Dw(t,n);return vx(i.x*s.x+i.y*s.y)*eA(e,t,r)}function rA(e,t,r){const n=KS(t,e),i=KS(t,r),s=KS(e,r);return Nx(Math.acos((s**2-n**2-i**2)/(-2*n*i)),2)}function nA(e){let t=90-e;return t<-180&&(t+=360),iA(t)}function iA(e){return e<-180?e+360:e>180?e-360:e}function sA(){Lx.call(this),this.x=0,this.y=0,this.xMin=0,this.xMax=0,this.yMin=0,this.yMax=0,this.xSVG=function(e){return this.x*e},this.ySVG=function(e){return-this.y*e},this.orientation=0,this.historiquePositions=[],this.crayonBaisse=!1,this.isVisible=!0,this.costume="",this.listeTraces=[],this.color="black",this.epaisseur=2,this.pointilles=!1,this.opacite=1,this.style="",this.animation="",this.svg=function(e){let t="";for(const r of this.listeTraces){const n=zx(r[0],r[1]),i=zx(r[2],r[3]),s=r[4],o=r[5],a=r[6],l=r[7];let u="";1!==o&&(u+=` stroke-width="${o}" `),a&&(u+=' stroke-dasharray="4 3" '),1!==l&&(u+=` stroke-opacity="${l}" `),t+=`\n\t<line x1="${n.xSVG(e)}" y1="${n.ySVG(e)}" x2="${i.xSVG(e)}" y2="${i.ySVG(e)}" stroke="${s}" ${u}  />`}return this.isVisible&&""!==this.animation&&(t+="\n <g>"+this.animation+"</g>"),t},this.tikz=function(){let e="";for(const t of this.listeTraces){const r=zx(t[0],t[1]),n=zx(t[2],t[3]),i=t[4],s=t[5],o=t[6],a=t[7];let l=[];const u=[];i.length>1&&"black"!==i&&u.push(i),isNaN(s)||1===s||u.push(`line width = ${s}`),isNaN(a)||1===a||u.push(`opacity = ${a}`),o&&u.push("dashed"),u.length>0&&(l="["+u.join(",")+"]"),e+=`\n\t\\draw${l} (${r.x},${r.y})--(${n.x},${n.y});`}return e}}function oA(...e){return new sA(...e)}function aA(e,t=ox.lutin){const r=t.x,n=t.y;t.x=Nx(t.x+e/ox.unitesLutinParCm*Math.cos(ax(t.orientation))),t.y=Nx(t.y+e/ox.unitesLutinParCm*Math.sin(ax(t.orientation))),t.historiquePositions.push([t.x,t.y]),t.crayonBaisse&&t.listeTraces.push([r,n,t.x,t.y,t.color,t.epaisseur,t.pointilles,t.opacite]),t.xMin=Math.min(t.xMin,t.x),t.yMin=Math.min(t.yMin,t.y),t.xMax=Math.max(t.xMax,t.x),t.yMax=Math.max(t.yMax,t.y)}function lA(e=ox.lutin){e.crayonBaisse=!0}function uA(e=ox.lutin){e.crayonBaisse=!1}function cA(e,t=ox.lutin){t.orientation=iA(e)}function pA(e,t=ox.lutin){t.orientation=iA(t.orientation+e)}function hA(e,t=ox.lutin){t.orientation=iA(t.orientation-e)}function dA(e,t,r=ox.lutin){const n=r.x,i=r.y;r.x=Nx(e/ox.unitesLutinParCm),r.y=Nx(t/ox.unitesLutinParCm),r.historiquePositions.push([r.x,r.y]),r.crayonBaisse&&r.listeTraces.push([n,i,r.x,r.y,r.color,r.epaisseur,r.pointilles,r.opacite]),r.xMin=Math.min(r.xMin,r.x),r.yMin=Math.min(r.yMin,r.y),r.xMax=Math.max(r.xMax,r.x),r.yMax=Math.max(r.yMax,r.y)}function fA(e,t=ox.lutin){const r=t.x;t.x=Nx(e/ox.unitesLutinParCm),t.historiquePositions.push([t.x,t.y]),t.crayonBaisse&&t.listeTraces.push([r,t.y,t.x,t.y,t.color,t.epaisseur,t.pointilles,t.opacite]),t.xMin=Math.min(t.xMin,t.x),t.xMax=Math.max(t.xMax,t.x)}function mA(e,t=ox.lutin){const r=t.y;t.y=Nx(e/ox.unitesLutinParCm),t.historiquePositions.push([t.x,t.y]),t.crayonBaisse&&t.listeTraces.push([t.x,r,t.x,t.y,t.color,t.epaisseur,t.pointilles,t.opacite]),t.yMin=Math.min(t.yMin,t.y),t.yMax=Math.max(t.yMax,t.y)}function gA(e,t=ox.lutin){const r=t.x;t.x+=Nx(e/ox.unitesLutinParCm),t.historiquePositions.push([t.x,t.y]),t.crayonBaisse&&t.listeTraces.push([r,t.y,t.x,t.y,t.color,t.epaisseur,t.pointilles,t.opacite]),t.xMin=Math.min(t.xMin,t.x),t.xMax=Math.max(t.xMax,t.x)}function yA(e,t=ox.lutin){const r=t.y;t.y+=Nx(e/ox.unitesLutinParCm),t.historiquePositions.push([t.x,t.y]),t.crayonBaisse&&t.listeTraces.push([t.x,r,t.x,t.y,t.color,t.epaisseur,t.pointilles,t.opacite]),t.yMin=Math.min(t.yMin,t.y),t.yMax=Math.max(t.yMax,t.y)}function vA(e){const t=/[\\{}]/,r=/[[]<>]/,n=/[{ ]/,i=function e(i,s,o){let a,l,u,c,p,h=[],d=[],f=[],m=[];const g=function(e){let t;return"}"===e[0]?"}":(t=e.split(n)[0],t)}(i.substring(s));switch(g.substring(0,5)){case"\\bloc":switch(l=g.split("{")[0],a=l.length,l=l.substring(6),o++,l){case"stop":d=e(i,s+a+1,o),f=e(i,d[1],d[2]),h=[`${d[0]} ${f[0]} `,f[1],f[2]];break;case"move":case"variable":case"control":case"init":default:d=e(i,s+a+1,o),h=[d[0],d[1],d[2]];break;case"pen":d=e(i,s+a+1,o),h=[d[0]+" :: pen",d[1],d[2]];break;case"list":d=e(i,s+a+1,o),h=[d[0]+" :: list",d[1],d[2]];break;case"space\n":h=["\n",11+s,--o];break;case"if":for(d=e(i,s+a+1,o),f=e(i,d[1],d[2]),m=e(i,f[1],f[2]),h=[`${d[0]} ${f[0]} ${m[0]}`,m[1]+1,m[2]-1],c=(o=h[2])+1,p=i.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)d=e(i,h[1],c),h[0]+=" "+d[0],h[1]=d[1],c=d[2];h[0]+=" fin";break;case"ifelse":for(d=e(i,s+a+1,o),f=e(i,d[1],d[2]),m=e(i,f[1],f[2]),h=[`${d[0]} ${f[0]} ${m[0]}`,m[1]+1,m[2]-1],c=(o=h[2])+1,p=i.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)d=e(i,h[1],c),h[0]+=" "+d[0],h[1]=d[1],c=d[2];for(h[0]+=" sinon",c=o+1,p=i.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)d=e(i,h[1],c),h[0]+=" "+d[0],h[1]=d[1],c=d[2];h[0]+=" fin";break;case"repeat":for(d=e(i,s+a+1,o),"indéfiniment"!==d[0].split(" ")[1]?"jusqu'à"!==d[0].split(" ")[1]?(f=e(i,d[1],d[2]),m=e(i,f[1],f[2]),h=[`${d[0]} ${f[0]} ${m[0]}`,m[1]+1,m[2]-1],o=h[2]):(f=e(i,d[1],d[2]),h=[`${d[0]} ${f[0]} `,f[1]+1,f[2]-1],o=h[2]):(h=[`${d[0]} `,d[1]+1,d[2]-1],o=h[2]),c=o+1,p=i.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)d=e(i,h[1],c),h[0]+=" "+d[0],h[1]=d[1],c=d[2];h[0]+=" fin"}break;case"\\oval":switch(l=g.split("{")[0],a=l.length,l=l.substring(5),o++,"*"===l.charAt(l.length-1)?(u=!0,l=l.substring(0,l.length-1)):u=!1,l){case"num":d=e(i,s+a+1,o),h=isNaN(d[0])&&d[0].indexOf(r)?[`[${d[0]}]`,d[1]+1,d[2]-1]:[`(${d[0]})`,d[1]+1,d[2]-1];break;case"moreblocks":d=e(i,s+a+1,o),h=u?[`(${d[0]} v)`,d[1],d[2]]:[`(${d[0]})`,d[1],d[2]];break;case"variable":default:d=e(i,s+a+1,o),h=u?[`(${d[0]} v)`,d[1]+1,d[2]-1]:[`(${d[0]})`,d[1]+1,d[2]-1];break;case"sound":d=e(i,s+a+1,o),h=u?[`(${d[0]} v :: sound)`,d[1]+1,d[2]-1]:[`(${d[0]} :: sound)`,d[1]+1,d[2]-1];break;case"sensing":d=e(i,s+a+1,o),h=u?[`(${d[0]} v :: sensing)`,d[1]+1,d[2]-1]:[`(${d[0]} :: sensing)`,d[1]+1,d[2]-1];break;case"operator":for(d=e(i,s+a+1,o),f=e(i,d[1],d[2]),h=[`(${d[0]} ${f[0]}`,f[1],f[2]];"}"!==i.charAt(f[1]);)f=e(i,f[1],f[2]),h[0]+=" "+f[0];h[0]+=")",h[1]=f[1]+1,h[2]=f[2]-1}break;case"\\bool":switch(l=g.split(/\{ /)[0],a=l.length,l=l.substring(5,9),l){case"oper":for(d=e(i,s+a+1,++o),f=e(i,d[1],d[2]),h=[`<${d[0]} ${f[0]}`,f[1],f[2]];"}"!==i.charAt(f[1]);)f=e(i,f[1],f[2]),h[0]+=" "+f[0];h[0]+=" :: operators boolean>",h[1]=f[1]+1,h[2]=f[2]-1;break;case"empt":h=["< vide :: operators boolean>",s+a+1,o];break;case"sens":for(d=e(i,s+a+1,++o),f=e(i,d[1],d[2]),h=[`<${d[0]} ${f[0]}`,f[1],f[2]];"}"!==i.charAt(f[1]);)f=e(i,f[1],f[2]),h[0]+=" "+f[0];h[0]+=" :: sensing>",h[1]=f[1]+1,h[2]=f[2]-1;break;case"list":for(d=e(i,s+a+1,++o),f=e(i,d[1],d[2]),h=[`<${d[0]} ${f[0]}`,f[1],f[2]];"}"!==i.charAt(f[1]);)f=e(i,f[1],f[2]),h[0]+=" "+f[0];h[0]+=" :: list>",h[1]=f[1]+1,h[2]=f[2]-1;break;default:d=e(i,s+a+1,o),h=[`<${d[0]}>`,d[1],d[2]]}break;case"\\init":l=g.split("{")[0],a=l.length,d=e(i,s+a+1,++o),f=e(i,d[1],d[2]),h=[`${d[0]} ${f[0]} `,f[1],f[2]];break;case"\\name":for(l=g.split("{")[0],a=l.length,d=e(i,s+a+1,++o),f=e(i,d[1],d[2]),h=[`${d[0]} ${f[0]}`,f[1],f[2]];"}"!==i.charAt(f[1]);)f=e(i,f[1],f[2]),h[0]+=" "+f[0];h[1]=f[1]+1,h[2]=f[2]-1;break;default:switch(g){case"}":h=[" ",1+s,--o];break;case"\\begin":o++,"["===i.substring(15+s)[0]?s=i.substring(15+s).indexOf("]")+16+s:s+=15,h=[" \x3c!-- Code Scratch  --\x3e",s,o];break;case"\\end":h=[" \x3c!-- Fin du Code Scratch  --\x3e\n",13+s,--o];break;case"\\turnleft":h=["gauche ",11+s,o];break;case"\\turnright":h=["droite ",12+s,o];break;case"\\greenflag":h=[" @greenFlag ",10+s,o];break;case"\\selectmenu":d=e(i,12+s,++o),h=[`[${d[0]} v]`,d[1]+1,d[2]-1];break;default:l=i.substring(s).split(t)[0],h=[l,l.length+s,o]}}return h};let s,o,a="",l=[],u=0;if((e.match(/\{/g)||[]).length!==(e.match(/\}/g)||[]).length)return console.log("Il n'y a pas le même nombre de { que de }. Je préfère m'arrêter."),!1;if(ox.isHtml){for(a="<pre class='blocks'>",o=0,s=!1;!s;)l=i(e,o,u),a+=l[0],o=l[1],u=l[2],0===u&&(s=!0);a+="</pre>\n"}else a=e;return a}function bA(e){Lx.call(this),this.x=e.x,this.y=e.y,this.svg=function(){return`<g id="${this.id}" stroke="#000000" fill="none" transform="translate(${(this.x-.2)*ox.pixelsParCm},${-60-(this.y-.2)*ox.pixelsParCm}) scale(.1) ">\n   <path id="rect2990" d="m70.064 422.35 374.27-374.26 107.58 107.58-374.26 374.27-129.56 21.97z" stroke-width="30"/>\n   <path id="path3771" d="m70.569 417.81 110.61 110.61" stroke-width="25"/>\n   <path id="path3777" d="m491.47 108.37-366.69 366.68" stroke-width="25"/>\n   <path id="path3763" d="m54.222 507.26 40.975 39.546" stroke-width="25"/>\n  </g>`}}function xA(...e){return new bA(...e)}function wA(e,t,r,...n){let i="";const s=e[0],o=-1*e[3],a=e[2],l=-1*e[1];i=`<svg width="${(a-s)*t}" height="${(l-o)*t}" viewBox="${s*t} ${o*t} ${(a-s)*t} ${(l-o)*t}" xmlns="http://www.w3.org/2000/svg">\n`;for(const c of n){if(Array.isArray(c))for(let e=0;e<c.length;e++)try{c[e].isVisible&&(r&&void 0!==c[e].svgml?i+="\t"+c[e].svgml(t,ox.amplitude)+"\n":i+="\t"+c[e].svg(t)+"\n")}catch(u){}try{c.isVisible&&(r&&void 0!==c.svgml?i+="\t"+c.svgml(t,ox.amplitude)+"\n":i+="\t"+c.svg(t)+"\n")}catch(u){}}return i+="</svg>",i}function _A(e,t,r,...n){let i="";const s=e[0],o=-1*e[3],a=e[2],l=-1*e[1],u=ox.isHtml;ox.isHtml=!1,i+=1===t?"\\begin{tikzpicture}[baseline]\n":`\\begin{tikzpicture}[baseline,scale = ${t}]\n`,i+=`\\tikzset{\n    point/.style={\n      thick,\n      draw,\n      cross out,\n      inner sep=0pt,\n      minimum width=5pt,\n      minimum height=5pt,\n    },\n  }\n  \\clip (${s},${o}) rectangle (${a},${l});\n\n  \n\n`;for(const p of n){if(Array.isArray(p))for(let e=0;e<p.length;e++)try{p[e].isVisible&&(r&&void 0!==p[e].tikzml?i+="\t"+p[e].tikzml(ox.amplitude)+"\n":i+="\t"+p[e].tikz(t)+"\n")}catch(c){}try{p.isVisible&&(r&&void 0!==p.tikzml?i+="\t"+p.tikzml(ox.amplitude)+"\n":i+="\t"+p.tikz(t)+"\n")}catch(c){}}return i+="\\end{tikzpicture}\n",ox.isHtml=u,i}function EA({xmin:e=0,ymin:t=0,xmax:r=15,ymax:n=6,pixelsParCm:i=20,scale:s=1,zoom:o=1,optionsTikz:a,mainlevee:l=!1,amplitude:u=1,style:c="display: block",id:p=""}={},...h){let d="";if(ox.isHtml){d=`<svg class="mathalea2d" id="${p}" width="${(r-e)*i*o}" height="${(n-t)*i*o}" viewBox="${e*i} ${-n*i} ${(r-e)*i} ${(n-t)*i}" xmlns="http://www.w3.org/2000/svg" ${c?`style="${c}"`:""}>\n`;for(const e of h){if(Array.isArray(e))for(let t=0;t<e.length;t++)try{e[t].isVisible&&(l&&void 0!==e[t].svgml?d+="\t"+e[t].svgml(i,u)+"\n":d+="\t"+e[t].svg(i)+"\n")}catch(f){}try{e.isVisible&&(l&&void 0!==e.svgml?d+="\t"+e.svgml(i,u)+"\n":d+="\t"+e.svg(i)+"\n")}catch(f){console.log("le try tout seul",f.message,e)}}d+="\n</svg>",d=d.replace(/\\thickspace/gm," ")}else{const i=[];if(void 0!==a&&("string"==typeof a?i.push(a):a.forEach((e=>i.push(e)))),1===s){d="\\begin{tikzpicture}[baseline";for(let e=0;e<i.length;e++)d+=`,${i[e]}`;d+="]\n"}else{d=`\\begin{tikzpicture}[baseline,scale = ${s}`;for(let e=0;e<i.length;e++)d+=`,${i[e]}`;d+="]\n"}d+=`\n    \\tikzset{\n      point/.style={\n        thick,\n        draw,\n        cross out,\n        inner sep=0pt,\n        minimum width=5pt,\n        minimum height=5pt,\n      },\n    }\n    \\clip (${e},${t}) rectangle (${r},${n});\n\n\n    `;for(const e of h){if(Array.isArray(e))for(let t=0;t<e.length;t++)try{e[t].isVisible&&(l&&void 0!==e[t].tikzml?d+="\t"+e[t].tikzml(u,s)+"\n":d+="\t"+e[t].tikz(s)+"\n")}catch(f){}try{e.isVisible&&(l&&void 0!==e.tikzml?d+="\t"+e.tikzml(u,s)+"\n":d+="\t"+e.tikz(s)+"\n")}catch(f){}}d+="\n\\end{tikzpicture}"}return d}function SA(e){switch(e){case 0:default:return"north east lines";case 1:return"horizontal lines";case 2:return"vertical lines";case 3:return"dots";case 4:return"crosshatch dots";case 5:return"fivepointed stars";case 6:return"sixpointed stars";case 7:return"bricks";case 8:return"checkerboard";case 9:return"grid";case 10:return"crosshatch"}}function AA({motif:e="north east lines",id:t,distanceDesHachures:r=10,epaisseurDesHachures:n=1,couleurDesHachures:i="black",couleurDeRemplissage:s="none",opaciteDeRemplissage:o=.5}){let a="";if(ox.isHtml){switch(s.length<1&&(s="none"),e){case"north east lines":a+=`<pattern id="pattern${t}" width="${r}" height="${r}"  patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">\n            <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n            <line x1="0" y1="0" x2="0" y2="${r}" style="stroke:${i}; stroke-width:${n}" />\n            </pattern>`;break;case"horizontal lines":a+=`<pattern id="pattern${t}" width="${r}" height="${r}"  patternUnits="userSpaceOnUse">\n            <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n            <line x1="0" y1="${Nx(r/2)}" x2="${Nx(r)}" y2="${Nx(r/2)}" style="stroke:${i}; stroke-width:${n}" />\n            </pattern>`;break;case"vertical lines":a+=`<pattern id="pattern${t}" width="${r}" height="${r}"  patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n            <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n            <line x1="0" y1="0" x2="0" y2="${r}" style="stroke:${i}; stroke-width:${n}" />\n            </pattern>`;break;case"dots":a+=`<pattern id="pattern${t}" width="${r}" height="${r}"  patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n            <circle cx="3" cy="3" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            <circle cx="8" cy="3" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            <circle cx="3" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            <circle cx="8" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            </pattern>`;break;case"crosshatch dots":a+=`<pattern id="pattern${t}" width="12" height="12" x="12" y="12" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <circle cx="2" cy="2" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="8" cy="2" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="5" cy="5" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="2" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="8" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="5" cy="11" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="11" cy="5" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="11" cy="11" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          </pattern>`;break;case"fivepointed stars":a+=`<pattern id="pattern${t}" width="12" height="12" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polygon points="10,5 6.2,4.2 6.6,0.2 4.6,3.6 1,2 3.6,5 1,8 4.6,6.4 6.6,9.8 6.2,5.8 " stroke="${i}"  fill="${s}" fill-opacity="${o}" />\n          </pattern>`;break;case"sixpointed stars":a+=`<pattern id="pattern${t}"  width="12" height="12" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n        <polygon points="10,5 7.6,3.4 7.6,0.6 5,2 2.6,0.6 2.4,3.4 0,5 2.4,6.4 2.6,9.4 5,8 7.6,9.4 7.6,6.4 " stroke="${i}" fill="${s}" fill-opacity="${o}" />\n        </pattern>`;break;case"crosshatch":a+=`<pattern id="pattern${t}" width="12" height="12" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polygon points="2,2 7.6,7.6 7,8.4 9.8,8.4 9.8,5.6 9,6.2 3.4,0.6 " stroke="${i}"  fill="${s}" fill-opacity="${o}" />\n          </pattern>`;break;case"bricks":a+=`<pattern id="pattern${t}" width="18" height="16" x="18" y="16" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <line x1="4" y1="2" x2="4" y2="4" stroke="${i}" fill="${s}" fill-opacity="${o}"  />\n          <line x1="0" y1="4" x2="16" y2="4" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          <line x1="14" y1="4" x2="14" y2="12" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          <line x1="16" y1="12" x2="0" y2="12" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          <line x1="4" y1="12" x2="4" y2="16" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          </pattern>`;break;case"grid":a+=`<pattern id="pattern${t}" width="10" height="10" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polyline points="8,8 0,8 0,0 " fill="none" stroke="${i}" />\n          </pattern>`;break;case"checkerboard":a+=`<pattern id="pattern${t}" width="8" height="8" x="8" y="8" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polygon points="4,4 8,4 8,0 4,0 "  fill="${s}" fill-opacity="${o}" />\n          <polygon points="0,4 4,4 4,8 0,8 "  fill="${s}" fill-opacity="${o}" />\n        \n          </pattern>`;break;default:a+=`<pattern id="pattern${t}" width="${r}" height="${r}"  patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">\n        <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n        <line x1="0" y1="0" x2="0" y2="${r}" style="stroke:${i}; stroke-width:${n}" />\n        </pattern>`}return a}if(ox.sortieNB)switch(e){case"north east lines":case"horizontal lines":case"vertical lines":case"dots":case"crosshatch dots":case"fivepointed stars":case"sixpointed stars":case"crosshatch":case"bricks":case"grid":case"checkerboard":a=`pattern = ${e}`;break;default:a="pattern = north east lines"}else switch(e){case"north east lines":case"horizontal lines":case"vertical lines":case"dots":case"crosshatch dots":case"fivepointed stars":case"sixpointed stars":case"crosshatch":case"bricks":case"grid":case"checkerboard":a=`pattern color = ${i} , pattern = ${e}`;break;default:a=`pattern color = ${i} , pattern = north east lines`}return`${a}`}function NA({taille:e=1,format:t="texte"}){this.murs2d=[],this.chemin2d=[],this.nombres2d=[],this.chemin=[],this.niveau=3,this.nombres=[[]];const r="brown",n=[[[1,0],[2,0],[3,0],[4,0],[5,0],[5,1],[6,1]],[[1,0],[2,0],[3,0],[4,0],[4,1],[5,1],[6,1]],[[1,0],[2,0],[2,1],[3,1],[4,1],[5,1],[6,1]],[[1,0],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1]],[[1,0],[2,0],[3,0],[4,0],[5,0],[5,1],[5,2],[6,2]],[[1,0],[2,0],[3,0],[4,0],[4,1],[5,1],[5,2],[6,2]],[[1,0],[2,0],[3,0],[4,0],[4,1],[4,2],[5,2],[6,2]],[[1,0],[2,0],[3,0],[3,1],[4,1],[5,1],[5,2],[6,2]],[[1,0],[2,0],[3,0],[3,1],[3,2],[4,2],[5,2],[6,2]],[[1,0],[2,0],[2,1],[3,1],[4,1],[4,2],[5,2],[6,2]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[5,2],[6,2]],[[1,0],[1,1],[2,1],[3,1],[4,1],[4,0],[5,0],[6,0]],[[1,0],[1,1],[2,1],[3,1],[4,1],[5,1],[5,2],[6,2]],[[1,0],[1,1],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[5,2],[5,1],[6,1]],[[1,0],[2,0],[3,0],[3,1],[3,2],[4,2],[5,2],[5,1],[6,1]],[[1,0],[1,1],[1,2],[2,2],[3,2],[3,1],[4,1],[5,1],[6,1]],[[1,0],[1,1],[1,2],[2,2],[3,2],[4,2],[4,1],[5,1],[6,1]],[[1,0],[2,0],[3,0],[3,1],[3,2],[4,2],[5,2],[5,1],[5,0],[6,0]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[4,1],[4,0],[5,0],[6,0]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[5,2],[5,1],[5,0],[6,0]],[[1,0],[1,1],[1,2],[2,2],[3,2],[4,2],[4,1],[4,0],[5,0],[6,0]],[[1,0],[1,1],[1,2],[2,2],[3,2],[3,1],[3,0],[4,0],[5,0],[5,1],[5,2],[6,2]],[[1,0],[1,1],[1,2],[2,2],[3,2],[3,1],[3,0],[4,0],[5,0],[5,1],[5,2],[6,2]]];let i;for(let s=0;s<24;s++){i=[];for(let e=0;e<n[s].length;e++)i.push([n[s][e][0],2-n[s][e][1]]);n.push(i)}this.choisitChemin=function(e){const t=gx([0,24]);let r;switch(e){case 1:r=fx(0,3)+t;break;case 2:r=fx(4,13)+t;break;case 3:r=fx(14,17)+t;break;case 4:r=fx(18,21)+t;break;case 5:r=fx(22,23)+t;break;case 6:r=fx(0,23)+t}return n[r]},this.construitMurs=function(t){let r;const n=[];let i,s,o,a,l;r=0===t[0][1]?0:2;for(let e=0;e<6;e++)0===r?(i=$w(zx(3*e,1),zx(3*e,2)),i.epaisseur=2,n.push(i),e>0&&(s=$w(zx(3*e,10),zx(3*e,9)),s.epaisseur=2,n.push(s))):(i=$w(zx(3*e,10),zx(3*e,9)),i.epaisseur=2,n.push(i),e>0&&(s=$w(zx(3*e,1),zx(3*e,2)),s.epaisseur=2,n.push(s)));0===r?(i=$w(zx(0,10),zx(0,3)),i.epaisseur=3,n.push(i),i=$w(zx(-3,1),zx(0,1),"green"),i.epaisseur=3,n.push(i),i=$w(zx(-3,1),zx(-3,4),"green"),i.epaisseur=3,n.push(i),i=$w(zx(-3,4),zx(0,4),"green"),i.epaisseur=3,n.push(i),n.push(jS("Départ",zx(-1.5,2.5),"milieu","blue",e,0,!1))):(i=$w(zx(0,1),zx(0,8)),i.epaisseur=3,n.push(i),i=$w(zx(-3,10),zx(0,10),"green"),i.epaisseur=3,n.push(i),i=$w(zx(-3,7),zx(-3,10),"green"),i.epaisseur=3,n.push(i),i=$w(zx(-3,7),zx(0,7),"green"),i.epaisseur=3,n.push(i),n.push(jS("Départ",zx(-1.5,8.5),"milieu","blue",e,0,!1)));for(let e=1;e<6;e++)i=$w(zx(3*e,8),zx(3*e,6),"black"),i.epaisseur=2,s=$w(zx(3*e-.5,7),zx(3*e+.5,7),"black"),s.epaisseur=2,o=$w(zx(3*e,5),zx(3*e,3),"black"),o.epaisseur=2,a=$w(zx(3*e-.5,4),zx(3*e+.5,4),"black"),a.epaisseur=2,n.push(s,o,a,i);i=$w(zx(18,9),zx(18,10)),i.epaisseur=3,n.push(i),i=$w(zx(0,10),zx(18,10)),i.epaisseur=3,n.push(i),i=$w(zx(18,9),zx(18,10)),i.epaisseur=3,n.push(i),i=$w(zx(18,1),zx(18,2)),i.epaisseur=3,n.push(i),i=$w(zx(0,1),zx(18,1)),i.epaisseur=3,n.push(i);for(let e=0;e<2;e++)i=$w(zx(18,6-3*e),zx(20,6-3*e)),i.epaisseur=3,s=$w(zx(18,7-3*e),zx(17,7-3*e)),s.epaisseur=3,o=$w(zx(18,8-3*e),zx(20,8-3*e)),o.epaisseur=3,a=$w(zx(18,8-3*e),zx(18,6-3*e)),a.epaisseur=3,l=$w(zx(0,7-3*e),zx(1,7-3*e)),l.epaisseur=3,n.push(i,s,o,a,l);for(let u=1;u<=3;u++)n.push(jS(`Sortie ${u}`,zx(19.5,11.5-3*u),"milieu","blue",e,0,!1));return i=$w(zx(18,9),zx(20,9)),i.epaisseur=3,s=$w(zx(18,2),zx(20,2)),s.epaisseur=3,n.push(i,s),n},this.traceChemin=function(e){let t=e[0][1],n=0;const i=[];let s;for(let o=0;o<e.length;o++)s=$w(zx(3*n-1.5,3*t+2.5),zx(3*e[o][0]-1.5,3*e[o][1]+2.5),r),s.pointilles=!0,s.stylePointilles=2,s.epaisseur=5,s.opacite=.3,i.push(s),n=e[o][0],t=e[o][1];return s=$w(zx(3*n-1.5,3*t+2.5),zx(3*n+1.5,3*t+2.5),r),s.pointilles=!0,s.stylePointilles=2,s.epaisseur=5,s.opacite=.3,i.push(s),i},this.placeNombres=function(e,t){const r=[];for(let n=1;n<7;n++)for(let i=0;i<3;i++)"number"==typeof e[n-1][i]?r.push(jS(Tx(e[n-1][i]),zx(3*n-1.5,2.5+3*i),"milieu","black",t,0,!0)):"string"==typeof e[n-1][i]?r.push(HS(e[n-1][i],3*n-1.5,2.5+3*i,"milieu","black",t,0,!0)):r.push(QS({x:3*n-1.5,y:2.5+3*i,fraction:e[n-1][i]}));return r}}function kA({taille:e=1,format:t="texte"}={}){return new NA({taille:e,format:t})}function MA(){this.type=1,this.polygones=[],this.barycentres=[],this.tracesCentres=[],this.numeros=[],this.coordonnees=[],this.Nx=1,this.Ny=1,this.echelle=20,this.fenetre={},this.construit=function(e=1,t=1,r=1,n=3){let i,s,o,a,l,u,c,p,h,d,f,m,g,y,v,b,x,w,_=0,E=0,S=0,A=0;switch(i=zx(0,0),s=zx(n,0),e){case 1:o=Dw(i,s),a=j_(o,i,-90),a=H_(a,i,1.73205);for(let e=0;e<r;e++){for(let e=0;e<t;e++){c=Vw(i,s,3),p=j_(c,i,60),h=j_(c,i,-60),d=j_(c,i,-120),this.polygones.push(c,p,h,d);for(const e of c.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of p.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of h.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of d.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);i=F_(i,o),s=F_(s,o)}i=F_(i,Dw(-t*o.x,-2*o.y)),s=F_(s,Dw(-t*o.x,-2*o.y)),i=F_(i,a),s=F_(s,a)}break;case 2:o=Dw(i,s),o=H_(o,i,2),a=j_(o,i,-90);for(let e=0;e<r;e++){for(let e=0;e<t;e++){c=Vw(i,s,4),p=j_(c,i,90),h=j_(c,i,-90),d=j_(c,i,-180),this.polygones.push(c,p,h,d);for(const e of c.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of p.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of h.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of d.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);i=F_(i,o),s=F_(s,o)}i=F_(i,Dw(-t*o.x,-2*o.y)),s=F_(s,Dw(-t*o.x,-2*o.y)),i=F_(i,a),s=F_(s,a)}break;case 3:s=H_(s,i,.8),o=Dw(i,s),o=H_(o,i,2),a=j_(o,i,-90),a=H_(a,i,1.73205);for(let e=0;e<r;e++){for(let e=0;e<t;e++){l=Q_(s,i,30,1.1547),c=Vw(i,l,6),p=j_(c,i,-120),h=F_(c,o),d=F_(p,o),this.polygones.push(c,p,h,d);for(const e of c.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of p.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of h.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of d.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);i=F_(i,Dw(2*o.x,0)),s=F_(s,Dw(2*o.x,0))}i=F_(i,Dw(2*-t*o.x,a.y)),s=F_(s,Dw(2*-t*o.x,a.y))}break;case 4:o=Dw(i,s),o=H_(o,i,2.73205),a=j_(o,i,-90);for(let e=0;e<r;e++){for(let e=0;e<t;e++){l=j_(s,i,60),c=Vw(i,s,3),p=j_(c,i,150),m=j_(c,s,-150),g=j_(c,s,60),v=j_(p,l,150),b=j_(v,i,-60),x=j_(p,s,60),w=j_(m,i,-60),h=Vw(i,l,4),d=Hw(s,l,4),f=j_(d,s,-150),y=j_(h,i,150),this.polygones.push(c,p,h,d,f,m,g,y,v,b,x,w);for(const e of c.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of p.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of x.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of w.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of h.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of d.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of f.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of m.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of g.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of y.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of v.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of b.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);i=F_(i,Dw(o.x,0)),s=F_(s,Dw(o.x,0))}i=F_(i,Dw(-t*o.x,a.y)),s=F_(s,Dw(-t*o.x,a.y))}break;case 5:o=Dw(i,s),o=H_(o,i,2.4142),a=j_(o,i,-90);for(let e=0;e<r;e++){for(let e=0;e<t;e++){l=j_(i,s,-135),c=Vw(i,s,8),p=Hw(i,s,8),h=F_(c,o),d=F_(p,o),f=Hw(s,l,4),m=F_(f,o),g=F_(f,a),y=F_(m,a),this.polygones.push(c,p,h,d,f,m,g,y);for(const e of c.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of p.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of h.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of d.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of f.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of m.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of g.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of y.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);i=F_(i,Dw(2*o.x,0)),s=F_(s,Dw(2*o.x,0))}i=F_(i,Dw(2*-t*o.x,2*a.y)),s=F_(s,Dw(2*-t*o.x,2*a.y))}break;case 6:o=Dw(i,s),a=j_(o,i,60),o=Dw(o.x+a.x,o.y+a.y),a=j_(o,i,-60);for(let e=0;e<r;e++){for(let e=0;e<t;e++){l=j_(i,s,120),u=j_(s,l,60),c=jw(i,s,l,u),p=j_(c,l,-60),h=j_(c,i,60),d=F_(p,o),f=F_(c,o),m=F_(h,o),g=F_(c,a),y=F_(p,a),v=F_(h,a),this.polygones.push(c,p,h,d,f,m,g,y,v);for(const e of c.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of p.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of h.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of d.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of f.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of m.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of g.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of y.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of v.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);i=F_(i,Dw(a.x+o.x,a.y+o.y)),s=F_(s,Dw(a.x+o.x,a.y+o.y))}i=F_(i,Dw(-t*(a.x+o.x)+2*a.x-o.x,2*a.y-o.y)),s=F_(s,Dw(-t*(a.x+o.x)+2*a.x-o.x,2*a.y-o.y))}break;case 7:o=Dw(i,s),o=H_(o,i,2),a=j_(o,i,-60);for(let e=0;e<r;e++){for(let e=0;e<t;e++){l=j_(i,s,-120),u=j_(s,l,-120),c=Vw(i,s,6),p=Vw(l,s,3),h=j_(p,l,180),d=F_(h,a),f=F_(p,a),m=j_(c,s,180),this.polygones.push(c,p,h,m,f,d);for(const e of c.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of p.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of h.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of d.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of f.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);for(const e of m.listePoints)_=Math.min(_,e.x),S=Math.max(S,e.x),E=Math.min(E,e.y),A=Math.max(A,e.y);i=F_(i,o),s=F_(s,o)}i=F_(i,Dw(-t*o.x+2*a.x-o.x,2*a.y-o.y)),s=F_(s,Dw(-t*o.x+2*a.x-o.x,2*a.y-o.y))}}this.echelle=bx(80/Math.sqrt(S-_),0),this.fenetre={xmin:_-.5,ymin:E-.5,xmax:S+.5,ymax:A+.5,pixelsParCm:this.echelle,scale:bx(this.echelle/30,2)},function(e){let t,r;for(let n=0;n<e.length;n++){t=sw(e[n]);for(let i=n+1;i<e.length;)r=sw(e[i]),cx(t.x,r.x,.1)&&cx(t.y,r.y,.1)?e.splice(i,1):i++}}(this.polygones),this.nb_polygones=this.polygones.length;for(let N=0;N<this.nb_polygones;N++)this.barycentres.push(sw(this.polygones[N])),this.tracesCentres.push(Gx(this.barycentres[N])),this.tracesCentres[N].opacite=.5,this.tracesCentres[N].color="blue",this.tracesCentres[N].taille=2,this.coordonnees.push([bx(this.barycentres[N].x,2),bx(this.barycentres[N].y,2)]),this.numeros.push(HS(Tx(N+1),this.barycentres[N].x+.5,this.barycentres[N].y,"milieu","black",50/this.echelle,0,!0))}}function CA(){return new MA}function TA(e,t,r,n=1){const i=zx(e.x,e.y+n),s=zx(t.x,t.y+n),o=Tw(e,i,s),a=$w(s,t);a.styleExtremites="->";const l=Yx(i,s),u=[o,a];let c;return r&&(c=HS("$"+r+"$",l.x,n>0?l.y+.5:l.y-.8),u.push(c)),u}function OA(e,t,r,n=1){const i=zx(e.x+n,e.y),s=zx(t.x+n,t.y),o=Tw(e,i,s),a=$w(s,t);a.styleExtremites="->";const l=Yx(i,s),u=[o,a];return r&&u.push(jS(r,zx(l.x+n,l.y-.6),"milieu","black","middle",!0)),u}function IA({largeurTitre:e=7,largeur:t=3,hauteur:r=2.5,nbColonnes:n=3,origine:i=zx(0,0),ligne1:s=[],ligne2:o=[],flecheHaut:a=[],flecheBas:l=[],flecheDroite:u=!1,flecheDroiteSens:c="bas"}={}){Lx.call(this),s&&o&&(n=Math.max(s.length,o.length,n));const p=i,h=zx(p.x+e+t*(n-1),p.y),d=zx(h.x,h.y+2*r),f=zx(p.x,p.y+2*r),m=[];m.push(jw(p,h,d,f)),m.push($w(zx(p.x,p.y+r),zx(h.x,h.y+r)));let g=p.x+e;for(let y=0;y<n;y++)m.push($w(zx(g,p.y),zx(g,d.y))),s[y+1]&&m.push(XS(s[y+1],g+t/2,p.y+1.5*r)),o[y+1]&&m.push(XS(o[y+1],g+t/2,p.y+.6*r)),g+=t;s[0]&&m.push(XS(s[0],p.x+e/2,p.y+1.5*r)),o[0]&&m.push(XS(o[0],p.x+e/2,p.y+.6*r));for(const y of a){const n=zx(p.x+e+y[0]*t-.4*t,p.y+2.1*r),i=zx(p.x+e+y[1]*t-.6*t,p.y+2.1*r);y[3]?m.push(...TA(n,i,y[2],y[3])):m.push(...TA(n,i,y[2]))}for(const y of l){const n=zx(p.x+e+y[0]*t-.4*t,p.y-.1*r),i=zx(p.x+e+y[1]*t-.6*t,p.y-.1*r);let s;s=y[3]?-Math.abs(y[3]):-1,m.push(...TA(n,i,y[2],s))}if(u){const i=zx(p.x+e+(n-1)*t+.2,p.y+1.5*r),s=zx(p.x+e+(n-1)*t+.2,p.y+.5*r);"bas"===c?m.push(...OA(i,s,u)):m.push(...OA(s,i,u))}this.svg=function(e){let t="";for(const r of m)t+="\n\t"+r.svg(e);return t=`<g id="${this.id}">${t}</g>`,t},this.tikz=function(){let e="";for(const t of m)e+="\n\t"+t.tikz();return e},this.svgml=function(e,t){let r="";for(const n of m)void 0===n.svgml?r+="\n\t"+n.svg(e):r+="\n\t"+n.svgml(e,t);return r},this.tikzml=function(e){let t="";for(const r of m)void 0===r.tikzml?t+="\n\t"+r.tikz():t+="\n\t"+r.tikzml(e);return t}}function PA(...e){return new IA(...e)}function DA(e="",t=0){Lx.call(this);const r=[],n=[],i=1.5,s=5.5,o=zx(3,5);for(let v=0;v<13;v++){const e=$w(zx(o.x+2*v,o.y),zx(o.x+2*v,o.y-3-s));e.isVisible=!1,r.push(e)}const a=$w(o,zx(o.x+24,o.y));a.isVisible=!1,r.push(a);for(let v=1;v<4;v++){const e=$w(zx(o.x,o.y-(v-1)*i-s),zx(o.x+24,o.y-(v-1)*i-s));e.isVisible=!1,r.push(e)}const l=(e,t,r,n=!1,a="black")=>{let l="";return l=n?HS(e,o.x+2*(t+.5),o.y-4.95,-90,a,1,"start"):HS(e,o.x+2*(t+.5),o.y-(r-.5)*i-s,0,a),l.isVisible=!1,l},u=["Millions","Centaines de milliers","Dizaines de milliers","Milliers","Centaines","Dizaines","Unités","Dixièmes","Centièmes","Millièmes","Dix-millièmes","Cent-Millièmes"];for(let v=0;v<12;v++){const e=l(u[v],v,0,!0,6===v||v===6-t?"#f15929":"black");e.isVisible=!1,6!==v&&v!==6-t||(e.gras=!0),r.push(e)}const c=(e=e.toString()).split(".")[0],p=e.split(".")[1],h=l(c[c.length-1],6,1,!1,"#f15929"),d=l(c[c.length-1],6,2,!1,"#f15929");h.isVisible=!1,d.isVisible=!1,h.gras=!0,d.gras=!0,r.push(h),n.push(d);for(let v=1;v<c.length;v++){const e=l(c[c.length-1-v],6-v,1),t=l(c[c.length-1-v],6-v,2);e.isVisible=!1,t.isVisible=!1,r.push(e),n.push(t)}if(p){for(let i=0;i<p.length;i++){const e=l(p[i],7+i,1),t=l(p[i],7+i,2);e.isVisible=!1,t.isVisible=!1,r.push(e),n.push(t)}const e=HS(",",o.x+13.8,o.y-.3*i-s,"milieu","#f15929",3),t=HS(",",o.x+13.8,o.y-1.3*i-s,"milieu","#f15929",3);e.isVisible=!1,t.isVisible=!1,e.gras=!0,t.gras=!0,r.push(e),r.push(t)}else if(t<0){const e=HS(",",o.x+13.8,o.y-1.3*i-s,"milieu","#f15929",3);e.isVisible=!1,e.gras=!0,r.push(J_(e,6,.2))}const f=tE(n,Dw(2*-t,0),'id="op" dur="1s" begin="0s;op.end+5s" fill="freeze"');f.isVisible=!1,r.push(f);const m=p?t-p.length:t,g=-c.length-t+1,y=[];for(let v=0;v<m;v++){const e=l("0",6-v,2,!1,"#32CD32");e.isVisible=!1,e.gras=!0,y.push(e)}for(let v=0;v<g;v++){const e=l("0",6+v,2,!1,"#32CD32");e.isVisible=!1,e.gras=!0,y.push(e)}r.push(J_(y,6,.2)),this.svg=function(e){let t="";for(const n of r)t+="\n\t"+n.svg(e);return t=`<g id="${this.id}">${t}</g>`,t},this.tikz=function(){let e="";for(const t of r)e+="\n\t"+t.tikz();return e}}function RA(...e){return new DA(...e)}const LA={matrix:mf,multiply:em,norm:Cy,cross:Gm,dot:Yf};let qA=0;function $A(){this.positionLabel="above",this.isVisible=!0,this.color="black",this.style="",this.styleTikz="",this.epaisseur=1,this.opacite=1,this.pointilles=!1,this.id=qA,qA++,ox.objets2D.push(this)}class BA{constructor(e,t,r,n,i,s){const o=ox.anglePerspective*Math.PI/180,a=ox.coeffPerspective,l=LA.matrix([[1,a*Math.cos(o),0],[0,a*Math.sin(o),1]]);this.x=e,this.y=t,this.z=r,this.visible=n,this.label=i,this.typeObjet="point3d";const u=LA.matrix([this.x,this.y,this.z]),c=LA.multiply(l,u);this.c2d=zx(c._data[0],c._data[1],this.label,s)}}function zA(e,t,r=0,n=!0,i="",s="above left"){return new BA(e,t,r,n,i,s)}class FA{constructor(...e){const t=ox.anglePerspective*Math.PI/180,r=ox.coeffPerspective,n=LA.matrix([[1,r*Math.cos(t),0],[0,r*Math.sin(t),1]]);2===e.length?(this.x=e[1].x-e[0].x,this.y=e[1].y-e[0].y,this.z=e[1].z-e[0].z):"number"==typeof e[0]?(this.x=e[0],this.y=e[1],this.z=e[2]):1===e.length&&(this.x=e[0]._data[0],this.y=e[0]._data[1],this.z=e[0]._data[2]),this.matrice=LA.matrix([this.x,this.y,this.z]),this.norme=Math.sqrt(this.x**2+this.y**2+this.z**2);const i=LA.multiply(n,this.matrice);this.c2d=Dw(i._data[0],i._data[1]),this.representant=function(e){const t=wN(e,this);return Dw(e.c2d,t.c2d).representant(e.c2d)}}}function UA(...e){return new FA(...e)}class jA{constructor(e,t,r,n){this.extremite1=e,this.extremite2=t,this.color=r,e.visible&&t.visible&&n?this.visible=!0:this.visible=!1,this.c2d=$w(e.c2d,t.c2d,r),this.visible?this.c2d.pointilles=!1:this.c2d.pointilles=2}}function GA(e,t,r="black",n=!0){return new jA(e,t,r,n)}class VA{constructor(e,t){t.constructor===FA?this.directeur=t:t.constructor===BA&&(this.directeur=UA(e,t)),this.origine=e;const r=wN(this.origine,this.directeur);this.point=r,this.c2d=aw(this.origine.c2d,r.c2d),this.c2d.isVisible=!1}}function HA(e,t){return new VA(e,t)}function WA(e,t,r,n,i,s=ox.anglePerspective){let o;const a=[],l=[];o="caché"===n?1:-1;const u=HA(e,t);a.push(vN(wN(e,r),u,s)),l.push(a[0].c2d);for(let p=1;p<19;p++)a.push(vN(a[p-1],u,10*o)),l.push(a[p].c2d);const c=Tw(l,i);return"caché"===n&&(c.pointilles=2,c.opacite=.3),c}function YA(e,t,r,n=!0,i="black"){const s=[],o=[],a=HA(e,t);s.push(vN(wN(e,r),a,ox.anglePerspective)),o.push(s[0].c2d);for(let u=1;u<37;u++)s.push(vN(s[u-1],a,10)),o.push(s[u].c2d);const l=jw(o,i);return n||(l.pointilles=2),l}class XA{constructor(...e){Array.isArray(e[0])?(this.listePoints=e[0],e[1]&&(this.color=e[1])):(this.listePoints=e,this.color="black");const t=[];let r;const n=[];r=this.listePoints[0];for(let i=1;i<this.listePoints.length;i++)t.push(GA(r,this.listePoints[i],this.color)),n.push(t[i-1].c2d),r=this.listePoints[i];t.push(GA(r,this.listePoints[0],this.color)),n.push(t[this.listePoints.length-1].c2d),this.aretes=t,this.c2d=n}}function ZA(...e){return new XA(...e)}function QA(e,t,r,n,i){let s,o,a,l,u,c;$A.call(this),this.centre=e,this.rayon=UA(t,0,0),this.normal=UA(0,0,1),this.color=i,this.nbMeridiens=n,this.nbParalleles=r,this.c2d=[];const p=UA(LA.cross(this.normal.matrice,this.rayon.matrice)),h=UA(LA.cross(this.rayon.matrice,LA.multiply(p.matrice,1/LA.norm(p.matrice)))),d=t,f="caché",m="visible";for(let g,y=0;y<1;y+=1/(this.nbParalleles+1))u=zA(e.x,e.y,e.z+d*Math.sin(y*Math.PI/2)),c=zA(e.x,e.y,e.z+d*Math.sin(-y*Math.PI/2)),g=UA(d*Math.cos(y*Math.PI/2),0,0),s=WA(u,this.normal,g,f,this.color,ox.anglePerspective),o=WA(u,this.normal,g,m,this.color,ox.anglePerspective),a=WA(c,this.normal,g,f,this.color,ox.anglePerspective),l=WA(c,this.normal,g,m,this.color,ox.anglePerspective),this.c2d.push(s,o,a,l);for(let g,y,v=0;v<1;v+=1/this.nbMeridiens)g=yN(p,this.normal,90+ox.anglePerspective+90*v),y=yN(p,this.normal,90+ox.anglePerspective-90*(v+1/this.nbMeridiens)),s=WA(this.centre,g,h,m,this.color,0),o=WA(this.centre,g,h,f,this.color,0),a=WA(this.centre,y,h,m,this.color,0),l=WA(this.centre,y,h,f,this.color,0),this.c2d.push(s,o,a,l)}function KA(e,t,r,n,i="black"){return new QA(e,t,r,n,i)}function JA(e,t,r,n,i=18){let s,o,a;$A.call(this),this.sommet=t,this.centrebase=e,this.normal=r,this.rayon=UA(n,0,0),this.c2d=[];const l=UA(LA.cross(r.matrice,this.rayon.matrice));let u,c;LA.dot(l.matrice,UA(0,1,0).matrice)>0?(u="caché",o="gray",c="visible",a="black"):(c="caché",u="visible",o="black",a="gray");const p=WA(this.centrebase,this.normal,this.rayon,u,o),h=WA(this.centrebase,this.normal,this.rayon,c,a);for(let d=0;d<p.listePoints.length;d++)d%i==0&&(s=$w(this.sommet.c2d,p.listePoints[d]),"caché"===u?(s.pointilles=2,s.color="gray"):s.color="black",this.c2d.push(s));for(let d=0;d<h.listePoints.length;d++)d%i==0&&(s=$w(this.sommet.c2d,h.listePoints[d]),"caché"===c?(s.pointilles=2,s.color="gray"):s.color="black",this.c2d.push(s));this.c2d.push(p,h)}function eN(e,t,r,n,i=18){return new JA(e,t,r,n,i)}function tN(e,t,r,n,i,s){let o,a,l;$A.call(this),this.centrebase1=e,this.centrebase2=t,this.normal=r,this.rayon1=n,this.rayon2=i,this.color=s,this.c2d=[];const u=UA(LA.cross(this.normal.matrice,this.rayon1.matrice));let c,p;LA.dot(u.matrice,UA(0,1,0).matrice)>0?(c="caché",a=this.color,p="visible",l=this.color):(p="caché",c="visible",a=this.color,l=this.color);const h=WA(this.centrebase1,this.normal,this.rayon1,c,a),d=WA(this.centrebase2,this.normal,this.rayon2,c,a),f=WA(this.centrebase1,this.normal,this.rayon1,p,l),m=WA(this.centrebase2,this.normal,this.rayon2,p,l);d.pointilles=!1,d.color=this.color;for(let g=0;g<h.listePoints.length;g+=2)o=$w(d.listePoints[g],h.listePoints[g]),"caché"===c?(o.pointilles=2,o.color=this.color,o.opacite=.3):o.color=this.color,this.c2d.push(o);for(let g=0;g<f.listePoints.length;g+=2)o=$w(m.listePoints[g],f.listePoints[g]),"caché"===p?(o.pointilles=2,o.color=this.color,o.opacite=.3):o.color=this.color,this.c2d.push(o);this.c2d.push(h,f,d,m)}function rN(e,t,r,n,i,s="black"){return new tN(e,t,r,n,i,s)}class nN{constructor(e,t,r){let n;$A.call(this),this.color=r,e.color=r,this.base1=e,this.base2=wN(e,t),this.base2.color=this.base1.color,this.aretes=[],this.c2d=[];for(let i=0;i<this.base1.listePoints.length;i++)this.c2d.push(this.base1.c2d[i]);for(let i=0;i<this.base2.listePoints.length;i++)this.c2d.push(this.base2.c2d[i]);for(let i=0;i<this.base1.listePoints.length;i++)n=GA(this.base1.listePoints[i],this.base2.listePoints[i],this.color),this.c2d.push(n.c2d)}}function iN(e,t,r="black"){return new nN(e,t,r)}class sN{constructor(e,t,r,n,i="black"){$A.call(this);const s=zA(e,t,r),o=UA(n,0,0),a=UA(0,n,0),l=UA(0,0,n),u=wN(s,o),c=wN(u,l),p=wN(s,l),h=wN(s,a),d=wN(h,o),f=wN(d,l),m=wN(p,a),g=jw([s.c2d,u.c2d,c.c2d,p.c2d],i),y=jw([u.c2d,d.c2d,f.c2d,c.c2d],i),v=jw([p.c2d,c.c2d,f.c2d,m.c2d],i);g.couleurDeRemplissage="lightgray",v.couleurDeRemplissage="white",y.couleurDeRemplissage="darkgray",this.c2d=[g,y,v]}}function oN(e,t,r,n){return new sN(e,t,r,n)}class aN{constructor(e,t,r,n,i,s="black"){let o,a,l,u,c,p,h,d,f;$A.call(this),this.c2d=[];const m=UA(n,0,0),g=UA(0,n,0),y=UA(0,0,n);let v=zA(e,t,r);for(let x=0;x<i;x++)o=wN(v,m),a=wN(o,y),l=wN(v,y),u=wN(v,g),c=wN(u,m),p=wN(c,y),h=wN(l,g),d=jw([v.c2d,o.c2d,a.c2d,l.c2d],s),f=jw([l.c2d,a.c2d,p.c2d,h.c2d],s),d.couleurDeRemplissage="lightgray",f.couleurDeRemplissage="white",this.c2d.push(d,f),v=wN(v,m);const b=jw([o.c2d,c.c2d,p.c2d,a.c2d],s);b.couleurDeRemplissage="darkgray",this.c2d.push(b)}}function lN(e,t,r,n,i,s="black"){return new aN(e,t,r,n,i,s)}class uN{constructor(e,t,r,n,i,s,o="black"){let a,l,u,c,p,h,d,f,m,g;$A.call(this),this.c2d=[];const y=UA(n,0,0),v=UA(0,n,0),b=UA(0,0,n);for(let x=0;x<i;x++)for(let w=0;w<s;w++)a=zA(e+x*n,t+w*n,r),l=wN(a,y),u=wN(l,b),c=wN(a,b),p=wN(l,v),h=wN(p,b),d=wN(c,v),0===w&&(f=jw([a.c2d,l.c2d,u.c2d,c.c2d],o),f.couleurDeRemplissage="lightgray",this.c2d.push(f)),x===i-1&&(g=jw([l.c2d,p.c2d,h.c2d,u.c2d],o),g.couleurDeRemplissage="darkgray",this.c2d.push(g)),m=jw([c.c2d,u.c2d,h.c2d,d.c2d],o),m.couleurDeRemplissage="white",this.c2d.push(m)}}function cN(e,t,r,n,i,s,o="black"){return new uN(e,t,r,n,i,s,o)}class pN{constructor(e,t,r,n,i,s,o,a="black"){let l,u,c,p,h,d,f,m,g,y;$A.call(this),this.c2d=[];const v=UA(n,0,0),b=UA(0,n,0),x=UA(0,0,n);for(let w=0;w<i;w++)for(let _=0;_<s;_++)for(let s=0;s<o;s++)l=zA(e+w*n,t+_*n,r+s*n),u=wN(l,v),c=wN(u,x),p=wN(l,x),h=wN(u,b),d=wN(h,x),f=wN(p,b),0===_&&(m=jw([l.c2d,u.c2d,c.c2d,p.c2d],a),m.couleurDeRemplissage="lightgray",this.c2d.push(m)),w===i-1&&(y=jw([u.c2d,h.c2d,d.c2d,c.c2d],a),y.couleurDeRemplissage="darkgray",this.c2d.push(y)),s===o-1&&(g=jw([p.c2d,c.c2d,d.c2d,f.c2d],a),g.couleurDeRemplissage="white",this.c2d.push(g))}}function hN(e,t,r,n,i,s,o="black"){return new pN(e,t,r,n,i,s,o)}class dN{constructor(e,t,r,n,i,s,o,a){function l(e,t,r,n,i){const s=Math.cos(n*Math.PI/180),o=Math.sin(n*Math.PI/180),a=Math.cos(i*Math.PI/180),l=Math.sin(i*Math.PI/180);return zx(s*e-o*t,-o*l*e-s*l*t+a*r)}let u;$A.call(this),this.x=e,this.y=t,this.z=r,this.alpha=n,this.beta=i,this.colorD=s,this.colorG=a,this.colorT=o,this.lstPoints=[],this.lstPolygone=[],this.lstPoints.push(l(this.x,this.y,this.z,this.alpha,this.beta)),this.lstPoints.push(l(this.x+1,this.y,this.z,this.alpha,this.beta)),this.lstPoints.push(l(this.x+1,this.y,this.z+1,this.alpha,this.beta)),this.lstPoints.push(l(this.x,this.y,this.z+1,this.alpha,this.beta)),this.lstPoints.push(l(this.x+1,this.y+1,this.z+1,this.alpha,this.beta)),this.lstPoints.push(l(this.x,this.y+1,this.z+1,this.alpha,this.beta)),this.lstPoints.push(l(this.x,this.y+1,this.z,this.alpha,this.beta)),u=jw([this.lstPoints[0],this.lstPoints[1],this.lstPoints[2],this.lstPoints[3]],"black"),u.opaciteDeRemplissage=1,u.couleurDeRemplissage=this.colorD,this.lstPolygone.push(u),u=jw([this.lstPoints[2],this.lstPoints[4],this.lstPoints[5],this.lstPoints[3]],"black"),u.couleurDeRemplissage=this.colorG,u.opaciteDeRemplissage=1,this.lstPolygone.push(u),u=jw([this.lstPoints[3],this.lstPoints[5],this.lstPoints[6],this.lstPoints[0]],"black"),u.couleurDeRemplissage=this.colorT,u.opaciteDeRemplissage=1,this.lstPolygone.push(u),this.c2d=this.lstPolygone}}function fN(e=0,t=0,r=0,n=45,i=-35,{colorD:s="green",colorT:o="white",colorG:a="gray"}={}){return new dN(e,t,r,n,i,s,a,o)}class mN{constructor(e,t,r,n,i){$A.call(this);const s=UA(e,t),o=UA(e,n),a=UA(e,r),l=wN(r,s),u=wN(r,o),c=wN(l,o),p=wN(t,o);n.visible=!1,this.color=i,this.base=ZA([e,t,p,n]),this.hauteur=a,this.c2d=[],this.aretes=[GA(e,t,i),GA(e,r,i),GA(e,n,i),GA(l,t,i),GA(p,t,i),GA(l,r,i),GA(l,c,i),GA(p,c,i),GA(p,n,i),GA(u,c,i),GA(u,n,i),GA(u,r,i)];for(const h of this.aretes)this.c2d.push(h.c2d)}}function gN(e,t,r,n,i="black"){return new mN(e,t,r,n,i)}function yN(e,t,r){let n,i;const s=LA.norm(t.matrice),o=LA.multiply(t.matrice,1/s),a=o._data[0],l=o._data[1],u=o._data[2],c=Math.cos(r*Math.PI/180),p=Math.sin(r*Math.PI/180),h=1-c,d=LA.matrix([[a*a*h+c,a*l*h-u*p,a*u*h+l*p],[a*l*h+u*p,l*l*h+c,l*u*h-a*p],[a*u*h-l*p,l*u*h+a*p,u*u*h+c]]);return e.constructor===BA?(n=LA.matrix([e.x,e.y,e.z]),i=LA.multiply(d,n),zA(i._data[0],i._data[1],i._data[2])):e.constructor===FA?(n=e,i=LA.multiply(d,n.matrice),UA(i._data[0],i._data[1],i._data[2])):void 0}function vN(e,t,r,n){const i=t.directeur,s=t.origine,o=[];if(e.constructor===BA){const t=UA(s,zA(0,0,0)),n=UA(zA(0,0,0),s),o=wN(e,t);return wN(yN(o,i,r),n)}if(e.constructor===FA)return yN(e,i,r);if(e.constructor===XA){for(let n=0;n<e.listePoints.length;n++)o.push(vN(e.listePoints[n],t,r));return ZA(o,void 0!==n?n:e.color)}}function bN(e,t,r,n,i){let s,o,a;$A.call(this),this.epaisseur=n,this.color=i,this.c2d=[],s=wN(e.origine,t);for(let p=0;p<r;p+=5)o=vN(s,e,5),a=$w(s.c2d,o.c2d),a.color=this.color,a.epaisseur=this.epaisseur,this.c2d.push(a),s=o;o=vN(s,e,5),a=$w(s.c2d,o.c2d),a.color=this.color,a.epaisseur=this.epaisseur,this.c2d.push(a);const l=HA(o,e.directeur),u=vN(s,l,30),c=vN(s,l,-30);a=$w(o.c2d,u.c2d),a.color=this.color,a.epaisseur=this.epaisseur,this.c2d.push(a),a=$w(o.c2d,c.c2d),a.color=this.color,a.epaisseur=this.epaisseur,this.c2d.push(a)}function xN(e,t,r,n,i){return new bN(e,t,r,n,i)}function wN(e,t){if(e.constructor===BA){return zA(e.x+t.x,e.y+t.y,e.z+t.z)}if(e.constructor===XA){const r=[];for(let n=0;n<e.listePoints.length;n++)r.push(wN(e.listePoints[n],t));return ZA(r,e.color)}}function _N(e,t,r){Lx.call(this);const n=zx(e,t);this.point=n,r||(r={});const i=r.out||{opacity:0},s=r.over||{opacity:.5},o=r.click||{opacity:r.opacite||1};this.etat=!1,this.svg=function(e){let t;const i=Gx(n);return i.color=r.color||r.couleur||"black",i.epaisseur=r.width||r.epaisseur||1,i.taille=r.size||r.taille||3,i.isVisible=!1,i.style=r.style||"x",t=`<g id="${this.id}">\n`,t+=i.svg(e)+"\n",t+=`<circle cx="${n.xSVG(e)}" cy="${n.ySVG(e)}" r="${(r.radius||r.rayon||1)*e}" fill="none" pointer-events="visible" />\n`,t+="</g>",t};const a=this,l=()=>{document.removeEventListener("exercicesAffiches",l);const e=document.getElementById(`${this.id}`),t=e=>{this.etat=e};if(e){for(const t in i)e.style[t]=i[t];function r(){for(const e in s)this.style[e]=s[e]}function n(){for(const e in i)this.style[e]=i[e]}function l(){if(a.etat){e.addEventListener("mouseover",r),e.addEventListener("mouseout",n);for(const e in i)this.style[e]=i[e];a.etat=!1,t(!1)}else{e.removeEventListener("mouseover",r),e.removeEventListener("mouseout",n);for(const e in o)this.style[e]=o[e];a.etat=!0}}e.addEventListener("mouseover",r),e.addEventListener("mouseout",n),e.addEventListener("click",l)}};document.addEventListener("exercicesAffiches",l),this.stopCliquable=()=>{const e=document.getElementById(`${this.id}`);e.replaceWith(e.cloneNode(!0))}}function EN(...e){return new _N(...e)}var SN=__webpack_require__(90187),AN=__webpack_require__.n(SN);const NN=function(e,t,r,n){let i,s,o;e.x<t.x?(i=e,s=t):(i=t,s=e);const a=aw(e,t),l=X_(r,a);o=l.x<s.x?Xx(l,s,-2):l.x>s.x?Xx(l,s,2):Xx(l,i,2);const u=X_(o,hw(r,a)),c=Xx(u,r,6);if(l.x<i.x&&KS(l,i)>3&&(this.regleProlongerSegment(s,i),this.regleMasquer()),l.x>s.x&&KS(l,s)>3&&this.regleProlongerSegment(i,s),this.equerreMontrer(o),c.x>u.x?this.equerreRotation(a.angleAvecHorizontale-90):this.equerreRotation(a.angleAvecHorizontale+90),o.y>u.y)this.regle.visibilite?(this.regleDeplacer(o,{vitesse:this.vitesse,tempo:0}),this.regleRotation(u,{sens:this.vitesse/2,tempo:0})):(this.regleDeplacer(o,{vitesse:1e3,tempo:0}),this.regleRotation(u,{sens:1e3,tempo:0}));else{const e=Xx(u,o,-2);this.regle.visibilite?(this.regleDeplacer(e,{vitesse:this.vitesse,tempo:0}),this.regleRotation(o,{sens:this.vitesse/2,tempo:0})):(this.regleDeplacer(e,{vitesse:1e3,tempo:0}),this.regleRotation(o,{sens:1e3,tempo:0}))}this.regleMontrer(),this.equerreDeplacer(u,n),this.crayonMontrer(),this.crayonDeplacer(u,n),this.tracer(c,n)};class kN{constructor(){this.idIEP=0,this.idHTML=0,this.tempo=5,this.vitesse=10,this.couleur="blue",this.couleurCompas="forestgreen",this.couleurTexte="black",this.couleurPoint="black",this.couleurCodage="#f15929",this.couleurTraitsDeConstruction="gray",this.epaisseur=2,this.epaisseurTraitsDeConstruction=1,this.pointilles=!1,this.liste_script=[],this.translationX=0,this.translationY=10,this.xMin=0,this.yMin=0,this.xMax=0,this.yMax=0,this.regle={visibilite:!1,position:zx(0,0),angle:0,longueur:15,zoom:100},this.crayon={visibilite:!1,position:zx(0,0),angle:0,zoom:100},this.equerre={visibilite:!1,position:zx(0,0),angle:0,zoom:100},this.requerre={visibilite:!1,position:zx(0,0),angle:0,zoom:100},this.rapporteur={visibilite:!1,position:zx(0,0),angle:0,zoom:100},this.compas={visibilite:!1,position:zx(0,0),angle:0,orientation:"droite",ecartement:0,leve:!1,zoom:100},this.xml=""}x(e){const t=Nx(30*(e.x+this.translationX),0);return e.x>this.xMax&&(this.xMax=e.x),e.x<this.xMin&&(this.xMin=e.x),t}y(e){const t=Nx(30*(-e.y+this.translationY),0);return e.y<this.yMin&&(this.yMin=e.y),e.y>this.yMax&&(this.yMax=e.y),t}script(){if(this.xml.length>1)return this.xml;{let e='<?xml version="1.0" encoding="UTF-8"?>\n';return e+='<INSTRUMENPOCHE version="2">\n',e+=this.liste_script.join("\n"),e+="\n</INSTRUMENPOCHE>",e}}html(e,t){if(ox.isHtml){const r=`IEP_${e}_${t}`;window.listeScriptsIep[r]=this.script();const n=`<div id="IEPContainer${r}" ></div>`;return window.listeAnimationsIepACharger.push(r),n}}htmlBouton(t,r=""){if(ox.isHtml){const n=`IEP_${t}_${r}`;window.listeScriptsIep[n]=this.script();const i=`<br><button class="ui mini compact button" id="btnAnimation${n}" onclick="toggleVisibilityIEP('${n}')" style="margin-top:20px"><i class="large play circle outline icon"></i>Voir animation</button>\n            <div id="IEPContainer${n}" style="display: none;" ></div>`;return window.toggleVisibilityIEP||(window.toggleVisibilityIEP=function(t){const r=document.getElementById(`IEPContainer${t}`),n=document.getElementById(`btnAnimation${t}`),i=window.listeScriptsIep[t];"none"===r.style.display?(r.style.display="block",r.style.marginTop="30px",n.innerHTML='<i class="large stop circle outline icon"></i>Masquer animation',(0,e.default)(r,i,{zoom:!0,autostart:!0}).then((e=>{})).catch((e=>{console.log(e)}))):(r.style.display="none",n.innerHTML='<i class="large play circle outline icon"></i>Voir animation')}),i}return""}recadre(e,t){this.translationX=1-e,this.translationY=t+3}taille(e,t){this.liste_script.push(`<viewBox width="${e}" height="${t}" />`)}montrer(e,t,{tempo:r=this.tempo,vitesse:n=this.vitesse}={}){if(!this[e].visibilite||this[e].position!==t){let i,s="";i=void 0===t?this[e].position:t,this[e].visibilite?this.deplacer(e,i,{tempo:r,vitesse:n}):(s=`<action objet="${e}" mouvement="montrer" abscisse="${this.x(i)}" ordonnee="${this.y(i)}" tempo="${r}" />`,this[e].visibilite=!0),this[e].position=i,this.liste_script.push(s)}}regleMontrer(e,t){this.montrer("regle",e,t)}crayonMontrer(e,t){this.montrer("crayon",e,t)}equerreMontrer(e,t){this.montrer("equerre",e,t)}requerreMontrer(e,t){this.montrer("requerre",e,t)}compasMontrer(e,t){this.montrer("compas",e,t)}rapporteurMontrer(e,t){this.montrer("rapporteur",e,t)}masquer(e,{tempo:t=this.tempo}={}){if(this[e].visibilite){const r=`<action objet="${e}" mouvement="masquer" tempo="${t}" />`;this[e].visibilite=!1,this.liste_script.push(r)}}regleMasquer(e){this.masquer("regle",e)}crayonMasquer(e){this.masquer("crayon",e)}equerreMasquer(e){this.masquer("equerre",e)}requerreMasquer(e){this.masquer("requerre",e)}compasMasquer(e){this.masquer("compas",e)}rapporteurMasquer(e){this.masquer("rapporteur",e)}deplacer(e,t,{tempo:r=this.tempo,vitesse:n=this.vitesse}={}){if(this[e].position!==t){const i=`<action objet="${e}" mouvement="translation" abscisse="${this.x(t)}" ordonnee="${this.y(t)}" tempo="${r}" vitesse="${n}" />`;this[e].position=t,this.liste_script.push(i)}}regleDeplacer(e,t){this.deplacer("regle",e,t)}texteDeplacer(e,t,{tempo:r=this.tempo,vitesse:n=this.vitesse}={}){const i=`<action objet="texte" id="${e}" mouvement="translation" abscisse="${this.x(t)}" ordonnee="${this.y(t)}" tempo="${r}" vitesse="${n}" />`;this.liste_script.push(i)}crayonDeplacer(e,t){this.deplacer("crayon",e,t)}equerreDeplacer(e,t){this.deplacer("equerre",e,t)}requerreDeplacer(e,t){this.deplacer("requerre",e,t)}compasDeplacer(e,t){this.deplacer("compas",e,t)}rapporteurDeplacer(e,t){this.deplacer("rapporteur",e,t)}rotation(e,t,{tempo:r=this.tempo,sens:n=Nx(this.vitesse/2,0)}={}){let i;if("point"===t.typeObjet){i=aw(this[e].position,t).angleAvecHorizontale}else i=t;if(this[e].angle!==t){const t=`<action objet="${e}" mouvement="rotation" angle="${-1*i}" tempo="${r}" sens="${n}" />`;this[e].angle=i,"number"==typeof i&&isFinite(i)?this.liste_script.push(t):console.log("Angle de rotation non défini pour l'objet .",e)}}regleRotation(e,t){this.rotation("regle",e,t)}crayonRotation(e,t){this.rotation("crayon",e,t)}equerreRotation(e,t){this.rotation("equerre",e,t)}requerreRotation(e,t){this.rotation("requerre",e,t)}compasRotation(e,t){this.rotation("compas",e,t)}rapporteurRotation(e,t){this.rotation("rapporteur",e,t)}regleZoom(e,{tempo:t=0}={}){this.regle.zoom=e,this.liste_script.push(`<action echelle="${e}" mouvement="zoom" objet="regle" tempo="${t}" />`)}equerreZoom(e,{tempo:t=0}={}){this.equerre.zoom=e,this.liste_script.push(`<action echelle="${e}" mouvement="zoom" objet="equerre" tempo="${t}" />`)}requerreZoom(e,{tempo:t=0}={}){this.requerre.zoom=e,this.liste_script.push(`<action echelle="${e}" mouvement="zoom" objet="requerre" tempo="${t}" />`)}rapporteurZoom(e,{tempo:t=0}={}){this.rapporteur.zoom=e,this.liste_script.push(`<action echelle="${e}" mouvement="zoom" objet="rapporteur" tempo="${t}" />`)}compasZoom(e,{tempo:t=0}={}){this.compas.zoom=e,this.liste_script.push(`<action echelle="${e}" mouvement="zoom" objet="compas" />`)}pointCreer(e,{dx:t=.1,dy:r,label:n=e.nom,tempo:i=this.tempo,couleur:s=this.couleurPoint,couleurLabel:o=this.couleurTexte,id:a}={}){let l;if(void 0!==a?e.id=a:(this.idIEP++,e.id=this.idIEP),n){l=`<action abscisse="${this.x(e)}" ordonnee="${this.y(e)}" couleur="${s}" id="${e.id}" mouvement="creer" objet="point" tempo="${i}"/>`;const a=zx(e.x,e.y);void 0!==t&&(a.x+=t),void 0!==r&&(a.y+=r),this.textePoint(`$${n}$`,a,{tempo:0,couleur:o})}else l=`<action abscisse="${this.x(e)}" ordonnee="${this.y(e)}" couleur="${s}" id="${e.id}" mouvement="creer" objet="point" tempo="${i}" />`;this.liste_script.push(l)}pointsCreer(...e){if("point"===e[e.length-1].typeObjet)for(const t of e)this.pointCreer(t,{tempo:0});else{const t=e[e.length-1],r=e=>e.slice(0,-1);for(const n of r(e))this.pointCreer(n,t)}}pointMasquer(...e){const t=e=>e.slice(0,-1);if("point"===e[e.length-1].typeObjet)for(const r of e)this.liste_script.push(`<action id="${r.id}" mouvement="masquer" objet="point" tempo="0" />`);else if(void 0!==e[e.length-1].tempo){const r=e[e.length-1].tempo;for(const n of t(e))this.liste_script.push(`<action id="${n.id}" mouvement="masquer" objet="point" tempo="${r}" />`)}else for(const r of t(e))this.liste_script.push(`<action id="${r.id}" mouvement="masquer" objet="point" tempo="0" />`)}pointMontrer(e,{tempo:t=this.tempo}={}){this.liste_script.push(`<action id="${e.id}" mouvement="montrer" objet="point" tempo="${t}" />`)}pointDeplacer(e,t,r,{tempo:n=this.tempo,vitesse:i=this.vitesse}={}){const s=zx(t,r);this.liste_script.push(`<action abscisse="${this.x(s)}" ordonnee="${this.y(s)}" id="${e.id}" mouvement="translation" objet="point" tempo="${n}" vitesse="${i}" />`)}pointNommer(e,t,{dx:r,dy:n,couleur:i=this.couleurPoint,tempo:s=this.tempo}={}){const o=zx(e.x,e.y);void 0!==r&&(o.x+=r),void 0!==n&&(o.y+=n),this.textePoint(`$${t}$`,o,{tempo:s,couleur:i})}compasRetourner({tempo:e=this.tempo}={}){const t=`<action mouvement="retourner" objet="compas" tempo="${e}" />`;"droite"===this.compas.orientation?this.compas.orientation="gauche":this.compas.orientation="droite",this.liste_script.push(t)}compasEcarter(e,{tempo:t=this.tempo,vitesse:r=this.vitesse}={}){const n=`<action ecart="${Nx(30*e,1)}" mouvement="ecarter" objet="compas" tempo="${t}" vitesse="${r}" />`;this.compas.ecartement=e,this.liste_script.push(n)}compasEcarterAvecRegle(e,{tempo:t=this.tempo,vitesse:r=this.vitesse,sens:n=this.vitesse/2}={}){this.regleRotation(0,{tempo:0,sens:n}),this.regleMontrer(this.compas.position,{tempo:0}),this.regleDeplacer(this.compas.position,{tempo:0,vitesse:r}),this.compasMontrer(),this.compasRotation(0,{tempo:0,sens:n}),this.compasEcarter(e,{tempo:t,vitesse:r,sens:n})}compasEcarter2Points(e,t,{tempo:r=this.tempo,vitesse:n=this.vitesse,sens:i=Nx(this.vitesse/2)}={}){this.compasMontrer(e),this.compasDeplacer(e,{tempo:r,vitesse:n});const s=$w(e,t);s.isVisible=!1;const o=s.angleAvecHorizontale;this.compasRotation(o,{tempo:r,sens:i}),this.compasEcarter(KS(e,t),{tempo:r,vitesse:n})}compasLever({tempo:e=this.tempo}={}){if(!this.compas.leve){const t=`<action mouvement="lever" objet="compas" tempo="${e} />`;this.compas.leve=!0,this.liste_script.push(t)}}compasCoucher({tempo:e=this.tempo}={}){if(this.compas.leve){const t=`<action mouvement="coucher" objet="compas" tempo="${e}" />`;this.compas.leve=!1,this.liste_script.push(t)}}compasTracerArc2Angles(e,t,{tempo:r=this.tempo,sens:n=Nx(this.vitesse/2,0),epaisseur:i=this.epaisseur,couleur:s=this.couleurCompas,pointilles:o=this.pointilles}={}){const a=o?'pointille="tiret"':"";this.idIEP+=1,Math.abs(this.compas.angle-e)>Math.abs(this.compas.angle-t)&&([e,t]=[t,e]);let l,u=`<action sens="${n}" angle="${-e}" mouvement="rotation" objet="compas" tempo="${r}" />\n`;return u+='<action mouvement="lever" objet="compas" />\n',u+=`<action sens="${n}" angle="${-e}" mouvement="rotation" objet="compas" />\n`,l=t>e?n:-1*n,u+=`<action couleur="${s}" epaisseur="${i}" sens="${l}" debut="${-e}" fin="${-t}" mouvement="tracer" objet="compas"  ${a} id="${this.idIEP}" />\n`,u+=`<action mouvement="coucher" objet="compas" tempo="${r}"/>`,this.compas.angle=t,this.liste_script.push(u),this.idIEP}compasTracerArcCentrePoint(e,t,{delta:r=10,tempo:n=this.tempo,vitesse:i=this.vitesse,sens:s=Nx(this.vitesse/2,0),epaisseur:o=this.epaisseur,couleur:a=this.couleurCompas,pointilles:l=this.pointilles}={}){this.compasMontrer(),this.compasDeplacer(e,{tempo:n,vitesse:i});const u=$w(e,t);u.visibility=!1;const c=u.angleAvecHorizontale-r,p=u.angleAvecHorizontale+r;return Math.abs(this.compas.ecartement-KS(this.compas.position,t))>.1&&this.compasEcarter(KS(e,t),{tempo:n,vitesse:i}),this.compasTracerArc2Angles(c,p,{tempo:n,vitesse:i,epaisseur:o,sens:s,couleur:a,pointilles:l})}compasCercleCentrePoint(e,t,{tempo:r=this.tempo,couleur:n=this.couleur,vitesse:i=this.vitesse,sens:s=Nx(this.vitesse/2),epaisseur:o=this.epaisseur,pointilles:a=this.pointilles}={}){this.compasEcarter2Points(e,t,{vitesse:i,tempo:r});const l=aw(e,t).angleAvecHorizontale;this.compasTracerArc2Angles(l,l+360,{tempo:r,vitesse:i,sens:s,epaisseur:o,couleur:n,pointilles:a})}requerreGlisserEquerre(e,{tempo:t=this.tempo,vitesse:r=this.vitesse}={}){this.liste_script.push(`<action abscisse="${30*e}" mouvement="glisser" objet="requerre" tempo="${t}" vitesse="${r}" />`)}rapporteurMasquerGraduationsExterieures({tempo:e=this.tempo}={}){this.liste_script.push(`<action mouvement="masquer_nombres" objet="rapporteur" tempo="${e}"/>`)}rapporteurMontrerGraduationsExterieures({tempo:e=this.tempo}={}){this.liste_script.push(`<action mouvement="montrer_nombres" objet="rapporteur" tempo="${e}"/>`)}rapporteurMasquerGraduationsInterieures({tempo:e=this.tempo}={}){this.liste_script.push(`<action mouvement="vide" objet="rapporteur" tempo="${e}"/>`)}rapporteurMontrerGraduationsInterieures({tempo:e=this.tempo}={}){this.liste_script.push(`<action mouvement="graduations" objet="rapporteur" tempo="${e}"/>`)}rapporteurDeplacerRotation2Points(e,t,{tempo:r=this.tempo,vitesse:n=this.vitesse,sens:i=Nx(this.vitesse/2)}={}){const s=aw(e,t);s.isVisible=!1,this.rapporteurMontrer(),this.rapporteurDeplacer(e,{tempo:r,vitesse:n}),this.rapporteurRotation(s.angleAvecHorizontale,{tempo:r,vitesse:n,sens:i})}rapporteurCrayonMarqueAngle(e,{tempo:t=this.tempo,vitesse:r=this.vitesse,couleur:n=this.couleurTraitsDeConstruction,epaisseur:i=this.epaisseurTraitsDeConstruction}={}){const s=this.rapporteur.position,o=rw(s,5.2,e+this.rapporteur.angle),a=rw(s,5.5,e+this.rapporteur.angle);this.crayonMontrer(),this.crayonDeplacer(o,{tempo:t,vitesse:r}),this.tracer(a,{tempo:t,vitesse:r,couleur:n,epaisseur:i})}rapporteurTracerDemiDroiteAngle(e,t,r,{longueur:n=.9*this.regle.longueur,couleur:i=this.couleur,tempo:s=this.tempo,vitesse:o=this.vitesse,sens:a=Nx(this.vitesse/2),epaisseur:l=this.epaisseur,pointilles:u=this.pointilles}={}){if(r>0)this.rapporteurDeplacerRotation2Points(e,t,{tempo:s,vitesse:o,sens:a}),this.rapporteurCrayonMarqueAngle(r,{tempo:s,vitesse:o,sens:a});else{const n=j_(t,e,180);this.rapporteurDeplacerRotation2Points(e,n,{tempo:s,vitesse:o,sens:a}),this.rapporteurCrayonMarqueAngle(180-Math.abs(r),{tempo:s,vitesse:o,sens:a})}const c=aw(e,t);c.isVisible=!1;const p=rw(e,Nx(5.2*this.rapporteur.zoom/100,1),c.angleAvecHorizontale+r);this.rapporteurMasquer({tempo:s}),this.regleDemiDroiteOriginePoint(e,p,{longueur:n,couleur:i,tempo:s,vitesse:o,sens:a,epaisseur:l,pointilles:u})}regleMasquerGraduations({tempo:e=this.tempo}={}){this.liste_script.push(`<action mouvement="vide" objet="regle" tempo="${e}"/>`)}regleMontrerGraduations({tempo:e=this.tempo}={}){this.liste_script.push(`<action mouvement="graduations" objet="regle" tempo="${e}"/>`)}regleModifierLongueur(e=20,{tempo:t=this.tempo}={}){this.regle.longueur=e,this.liste_script.push(`<action mouvement="modifier_longueur" objet="regle" longueur="${e}" tempo="${t}"/>`)}regleDemiDroiteOriginePoint(e,t,r={}){r.longueur||(r.longueur=this.regle.longueur);const n=Xx(e,t,r.longueur);this.regleSegment(e,n,r)}regleDroite(e,t,r={}){r.longueur||(r.longueur=this.regle.longueur);const n=H_(t,e,Nx((.5*-r.longueur+.5*KS(e,t))/KS(e,t))),i=H_(e,t,Nx((.5*-r.longueur+.5*KS(e,t))/KS(e,t)));this.x(e)<=this.x(t)?(this.regleMontrer(n),this.regleRotation(i,r),this.regleSegment(n,i,r)):(this.regleMontrer(i),this.regleRotation(n,r),this.regleSegment(i,n,r))}regleProlongerSegment(e,t,r={}){if(r.longueur||(r.longueur=this.regle.longueur-3),r.longueur>0){const n=Xx(t,e,3),i=Xx(t,e,-r.longueur);this.regleSegment(n,i,r)}else{const n=Xx(e,t,3),i=Xx(e,t,r.longueur);this.regleSegment(n,i,r)}}tracer(e,{tempo:t=this.tempo,vitesse:r=this.vitesse,epaisseur:n=this.epaisseur,couleur:i=this.couleur,pointilles:s=this.pointilles,vecteur:o=!1}={}){const a=s?'pointille="tiret"':"",l=o?'style="vecteur"':"";this.idIEP+=1;const u=`<action abscisse="${this.x(e)}" ordonnee="${this.y(e)}" epaisseur="${n}" couleur="${i}" mouvement="tracer" objet="crayon" tempo="${t}" vitesse="${r}"  ${a} ${l} id="${this.idIEP}" />`;return this.crayon.position=e,this.liste_script.push(u),this.idIEP}trait(e,t,r={}){return this.crayonDeplacer(e,r),this.tracer(t,r)}traitRapide(e,t,r={}){return r.tempo=0,r.vitesse=1e4,this.crayonDeplacer(e,r),this.tracer(t,r)}traitMasquer(e,{tempo:t=0,vitesse:r=200}={}){this.liste_script.push(`<action mouvement="masquer" objet="trait" id="${e}" vitesse="${r}" />`)}regleSegment(e,t,r){let n,i,s,o;return"segment"===e.typeObjet?(n=e.extremite1,i=e.extremite2,s=t):(n=e,i=t,s=r),n.x<=i.x?(this.regleMontrer(n,s),this.regleRotation(i,s)):(this.regleMontrer(i,s),this.regleRotation(n,s)),KS(this.crayon.position,n)<KS(this.crayon.position,i)?(this.crayonMontrer(n,s),o=this.tracer(i,s)):(this.crayonMontrer(i,s),o=this.tracer(n,s)),o}polygoneTracer(...e){for(let t=0;t<e.length-1;t++)this.regleSegment(e[t],e[t+1]);this.regleSegment(e[e.length-1],e[0])}polygoneRapide(...e){for(let t=0;t<e.length-1;t++)this.traitRapide(e[t],e[t+1]);this.traitRapide(e[e.length-1],e[0])}textePoint(e,t,{tempo:r=this.tempo,police:n=!1,couleur:i=this.couleurTexte,taille:s,couleurFond:o,opaciteFond:a,couleurCadre:l,epaisseurCadre:u,marge:c,margeGauche:p,margeDroite:h,margeHaut:d,margeBas:f}={}){this.idIEP++;const m=n?`police="${n}"`:"";let g="";void 0!==o&&(g+=` couleur_fond="${o}"`),void 0!==a&&(g+=` opacite_fond="${a}"`),void 0!==l&&(g+=` couleur_cadre="${l}"`),void 0!==u&&(g+=` epaisseur_cadre="${u}"`),void 0!==c&&(g+=` marge="${c}"`),void 0!==p&&(g+=` marge_gauche="${p}"`),void 0!==h&&(g+=` marge_droite="${h}"`),void 0!==f&&(g+=` marge_bas="${f}"`),void 0!==d&&(g+=` marge_haut="${d}"`),void 0!==s&&(g+=` taille="${s}"`);let y=`<action abscisse="${this.x(t)}" ordonnee="${this.y(t)}" id="${this.idIEP}" mouvement="creer" objet="texte" />`;return y+=`\n<action ${m} couleur="${i}" texte="${e}" id="${this.idIEP}" mouvement="ecrire" objet="texte" ${g} tempo="${r}" />`,this.liste_script.push(y),this.idIEP}textePosition(e,t,r,n){const i=zx(t,r);return this.textePoint(e,i,n)}longueurSegment(e,t,r,n){const i=Nx(KS(e,t,1)),s=Dw(e,t),o=Dw(-s.y*r/JS(s),s.x*r/JS(s)),a=F_(F_(Xx(e,t,i/2-.7),o),Dw(0,1));return this.textePoint(`${i} cm`,a,n)}mesureAngle(e,t,r){const n=tA(e,t,r),i=F_(H_(j_(e,t,n/2),t,1.3/KS(t,e)),Dw(-.2,.5));return this.textePoint(Math.abs(n)+"°",i)}texteMasquer(...e){const t=e=>e.slice(0,-1);if(Number.isNaN(e[e.length-1]))if(void 0!==e[e.length-1].tempo){const r=e[e.length-1].tempo;for(const n of t(e))this.liste_script.push(`<action mouvement="masquer" objet="texte" id="${n}" tempo="${r}" />`)}else for(const r of t(e))this.liste_script.push(`<action mouvement="masquer" objet="texte" id="${r}" tempo="0" />`);else for(const r of e)this.liste_script.push(`<action mouvement="masquer" objet="texte" id="${r}" tempo="0" />`)}texteChangeCouleur(e,t,r){this.liste_script.push(`\n<action couleur="${r}" texte="${e}" id="${t}" mouvement="ecrire" objet="texte" />`)}pause(){this.liste_script.push('<action mouvement="pause" />')}segmentCodage(e,t={},r={}){let n,i={};"segment"===e.typeObjet?(n=e,i=t):(n=$w(e,t),i={...r}),void 0===i.tempo&&(i.tempo=this.tempo),void 0===i.couleur&&(i.couleur=this.couleurCodage),void 0===i.codage&&(i.codage="\\"),this.idIEP++;const s=this.idIEP,o=Yx(n.extremite1,n.extremite2),a=`<action abscisse="${this.x(o)}" ordonnee="${this.y(o)}" forme="${i.codage}"  couleur="${i.couleur}" id="${s}" tempo="${i.tempo}" mouvement="creer" objet="longueur" />`;return this.liste_script.push(a),s}segmentCodageMasquer(e,{tempo:t=this.tempo}={}){this.liste_script.push(`<action id="${e}" mouvement="masquer" objet="longueur" tempo="${t}" />`)}segmentCodageMontrer(e,{tempo:t=this.tempo}={}){this.liste_script.push(`<action id="${e}" mouvement="montrer" objet="longueur" tempo="${t}" />`)}codageAngleDroit(e,t,r,n={}){this.crayonMontrer(),void 0===n.longueur&&(n.longueur=.3),void 0===n.couleur&&(n.couleur=this.couleurCodage);const i=Xx(t,r,n.longueur),s=Xx(t,e,n.longueur),o=U_(s,t,i),a={...n};a.tempo=0;return[this.trait(i,o,a),this.trait(o,s,n)]}codageAngleDroitMasquer(e,{tempo:t=0}={}){this.traitMasquer(e[0],{tempo:t}),this.traitMasquer(e[1],{tempo:t})}angleCodage(e,t,r,{couleur:n=this.couleurCodage,codage:i="plein",rayon:s=1,tempo:o=this.tempo}={}){const a=e.id+"_"+t.id+"_"+r.id,l=aw(t,e),u=aw(t,r);l.isVisible=!1,u.isVisible=!1;const c=-l.angleAvecHorizontale,p=-u.angleAvecHorizontale,h=`<action abscisse="${this.x(t)}" ordonnee="${this.y(t)}" rayon="${30*s}" angle1="${c}" angle2="${p}" forme="${i}"  couleur="${n}" id="${a}" tempo="${o}" mouvement="creer" objet="angle" />`;return this.liste_script.push(h),a}angleCodageMasquer(e,t,r,{tempo:n=0}={}){const i=e.id+"_"+t.id+"_"+r.id;this.liste_script.push(`<action id="${i}" mouvement="masquer" objet="angle" tempo="${n}" />`)}angleCodageMontrer(e,t,r,{tempo:n=0}={}){const i=e.id+"_"+t.id+"_"+r.id;this.liste_script.push(`<action id="${i}" mouvement="montrer" objet="angle" tempo="${n}" />`)}image(e,t=zx(0,0)){let r;return this.idIEP++,r=`<action id="${this.idIEP}" url="${e}" mouvement="chargement" objet="image" />`,r+=`\n<action abscisse="${this.x(t)}" ordonnee="${this.y(t)}" id="${this.idIEP}" mouvement="translation" objet="image" vitesse="100000" />`,this.liste_script.push(r),this.idIEP}}kN.prototype.symetrieAxialePoint=function(e,t,r,{couleur:n=this.couleur,couleurCodage:i=this.couleurCodage,codage:s="//"}={}){this.epaisseur=.5,this.couleur="grey",void 0!==r&&""!==r||(r=e.nom+"'");const o=W_(e,t,r);if(0!==KS(e,o)){const t=Yx(e,o),r=j_(e,t,90),n=j_(r,t,180);this.regleMasquerGraduations(),this.perpendiculaireRegleEquerre2points3epoint(r,n,e),this.compasEcarter2Points(t,e),this.compasTracerArcCentrePoint(t,o),this.regleSegment(e,o),this.regleMasquer(),this.equerreMasquer(),this.segmentCodage(e,t,{codage:s,couleur:i}),this.segmentCodage(o,t,{codage:s,couleur:i}),this.crayonMasquer(),this.compasMasquer()}this.pointCreer(o,{couleur:n,couleurLabel:n})},kN.prototype.parallelogramme3sommetsConsecutifs=function(e,t,r,n="",i=!0,s=!0){const o=U_(r,t,e);o.nom=n;const a=Math.min(e.x,t.x,r.x,o.x),l=Math.min(e.y,t.y,r.y,o.y);this.traitRapide(e,t),this.traitRapide(t,r),this.pointCreer(e,e.nom,0),this.pointCreer(t,t.nom,0),this.pointCreer(r,r.nom,0),this.textePosition(`${e.nom+t.nom+r.nom+o.nom} est un parallélogramme donc ses côtés opposés sont de même longueur.`,a-1,l-1),this.compasEcarter2Points(t,e),this.textePosition(`${t.nom+e.nom} = ${r.nom+o.nom}`,a-1,l-2),this.compasTracerArcCentrePoint(r,o),this.compasEcarter2Points(t,r),this.textePosition(`${t.nom+r.nom} = ${e.nom+o.nom}`,a-1,l-3),this.compasTracerArcCentrePoint(e,o,10),this.pointCreer(o),this.compasMasquer(),this.regleSegment(r,o),this.regleSegment(o,e),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(e,t,{codage:"///",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(o,r,{codage:"///",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(t,r,{codage:"//",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(e,o,{codage:"//",couleur:this.couleurCodage,tempo:0})},kN.prototype.parallelogramme2sommetsConsecutifsCentre=function(e,t,r,n="",i="",s=!0){const o=U_(r,e,r);o.nom=n;const a=U_(r,t,r);a.nom=i;const l=e.nom+t.nom+o.nom+a.nom;(KS(e,o)>12||KS(t,a)>12)&&this.regleModifierLongueur(30);const u=Math.min(e.x,t.x,o.x,a.x),c=Math.min(e.y,t.y,o.y,a.y);this.traitRapide(e,t),this.pointCreer(e,{tempo:0}),this.pointCreer(t,{tempo:0}),this.pointCreer(r,{tempo:0}),s&&4===l.length&&this.textePosition(`${e.nom+t.nom+o.nom+a.nom} est un parallélogramme donc ses diagonales se coupent en leur milieu.`,u-1,c-1),this.pointilles=!0,this.epaisseur=1,this.couleur=this.couleurTraitsDeConstruction,this.regleDemiDroiteOriginePoint(e,r,{longueur:KS(e,o)+3}),this.regleMasquer(),this.crayonMasquer(),this.compasEcarter2Points(e,r),s&&4===l.length&&this.textePosition(`${e.nom+r.nom} = ${r.nom+o.nom}`,u-1,c-2),this.pointilles=!1,this.compasTracerArcCentrePoint(r,o),this.compasMasquer(),this.pointilles=!0,this.regleDemiDroiteOriginePoint(t,r,{longueur:KS(t,a)+3}),this.regleMasquer(),this.crayonMasquer(),this.pointilles=!1,this.compasEcarter2Points(t,r),s&&4===l.length&&this.textePosition(`${t.nom+r.nom} = ${r.nom+a.nom}`,u-1,c-3),this.compasTracerArcCentrePoint(r,a),this.compasMasquer(),this.couleur="blue",this.epaisseur=3,this.pointCreer(a),this.regleSegment(e,a),this.regleSegment(a,o),this.regleSegment(o,t),this.regleMasquer(),this.compasMasquer(),this.crayonMasquer(),this.segmentCodage(e,r,{codage:"//",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(r,o,{codage:"//",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(t,r,{codage:"O",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(r,a,{codage:"O",couleur:this.couleurCodage,tempo:0})},kN.prototype.parallelogrammeAngleCentre=function(e,t,r,n){const i=Xx(t,r,KS(t,r)+2),s=Xx(t,e,KS(t,e)+2),o=U_(r,t,e);this.traitRapide(t,i),this.traitRapide(t,s),this.pointCreer(n,{tempo:0}),this.pointCreer(t,{tempo:0}),this.regleDemiDroiteOriginePoint(t,n,{couleur:this.couleurTraitsDeConstruction,epaisseur:1,pointilles:!0}),this.pointilles=!1,this.regleMasquer(),this.crayonMasquer(),this.compasEcarter2Points(t,n),this.compasTracerArcCentrePoint(n,o,{couleur:this.couleurTraitsDeConstruction}),this.compasMasquer(),this.paralleleRegleEquerre2points3epoint(i,t,o,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.equerreMasquer(),this.regleDroite(o,e,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.paralleleRegleEquerre2points3epoint(t,s,o,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.equerreMasquer(),this.regleDroite(o,r,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.pointCreer(e,{tempo:0}),this.pointCreer(r,{tempo:0}),this.pointCreer(o,{tempo:0}),this.regleSegment(r,o),this.regleSegment(o,e),this.regleMasquer(),this.crayonMasquer()},kN.prototype.partageSegment=function(e,t,r,n,{distance:i=1,monAngle:s=40,nom:o="",nommerGraduations:a=!1}={}){this.traitRapide(e,t),this.regleMasquerGraduations(),this.regleMontrer(e);const l=Q_(t,e,s,(Math.max(r,n)+1)*i/KS(e,t));this.regleSegment(e,l),this.regleMasquer(),this.crayonMasquer();const u=[e];for(let h=1;h<=Math.max(r,n);h++)u.push(rw(e,i*h,s+aw(e,t).angleAvecHorizontale)),this.compasTracerArcCentrePoint(u[h-1],u[h]),a&&this.pointCreer(u[h],{label:e.nom+"_"+h,dx:-1,dy:.5});this.compasMasquer(),this.regleSegment(u[n],t),this.regleMasquer(),this.crayonMasquer();const c=this.paralleleAuCompas(u[n],t,u[r]),p=H_(t,e,r/n);return c.y>p.y&&this.regleProlongerSegment(c,p,{longueur:1}),this.regleSegment(e,p,{couleur:"red",epaisseur:3}),o&&this.pointCreer(p,{label:o}),this.regleMasquer(),this.crayonMasquer(),p},kN.prototype.paralleleRegleEquerre2points3epoint=NN,kN.prototype.paralleleRegleEquerre2points3epoint=NN,kN.prototype.perpendiculaireRegleEquerre2points3epoint=function(e,t,r,n=!1){const i=this.regle.longueur,s=this.equerre.zoom,o=aw(e,t);let a;if(o.nom=`(${e.nom}${t.nom})`,void 0===e.nom&&(e.nom="A"),void 0===t.nom&&(t.nom="B"),Qx(r,e,t)){const e=j_(r,r,0);r=h_(dw(r,o),u_(e,5.5),1),a=7.5}else{a=KS(X_(r,o),r)+2}this.equerreZoom(Nx(100*a/7.5)),this.regleModifierLongueur(Math.max(2*a,15));const l=H_(e,t,1.2),u=H_(t,e,1.2);this.traitRapide(l,u),this.pointsCreer(e,t,r),this.perpendiculaireRegleEquerreDroitePoint(o,r,n),this.equerreZoom(s),this.regleModifierLongueur(i)},kN.prototype.perpendiculaireRegleEquerreDroitePoint=function(e,t,r){if(lw(t,e)){const n=t,i=u_(t,6),s=ew(e,-1e4),o=ew(e,1e4);let a=j_(h_(e,i,1),t,90);a.y<t.y&&(a=j_(a,t,180));const l=tA(zx(1e4,n.y),n,o);r&&this.textePosition(`1. Placer un côté de l'angle droit de l'équerre sur la droite ${e.nom} avec l'angle droit au point ${t.nom}.`,0,10,{couleur:"lightblue"}),this.equerreRotation(l),this.equerreMontrer(n),r&&this.textePosition("2. Tracer le long de l'autre côté de l'angle droit de l'équerre",0,9.3,{couleur:"lightblue"}),this.crayonMontrer(a),this.tracer(n),this.equerreMasquer(),r&&this.textePosition(`3. Prolonger la perpendiculaire à ${e.nom} à la règle.`,0,8.6,{couleur:"lightblue"}),this.regleMontrer(a),this.regleRotation(l-90),this.crayonDeplacer(a),this.tracer(j_(a,n,180)),r&&this.textePosition("4. Coder l'angle droit.",0,7.9,{couleur:"lightblue"}),this.regleMasquer(),this.codageAngleDroit(s,n,a)}else{const n=X_(t,e),i=j_(t,n,90),s=j_(i,n,180),o=H_(t,n,1.2),a=tA(zx(1e4,n.y),n,s);r&&this.textePosition(`1. Placer un côté de l'angle droit de l'équerre sur la droite ${e.nom} et l'autre côté de l'angle droit passant par le point ${t.nom}.`,0,10,{couleur:"lightblue"}),this.equerreRotation(a),this.equerreMontrer(n),r&&this.textePosition(`2. Tracer le segment de droite passant par le point ${t.nom}`,0,9.3,{couleur:"lightblue"}),this.crayonMontrer(t),this.tracer(n),this.equerreMasquer(),r&&this.textePosition(`3. Prolonger la perpendiculaire à ${e.nom} à la règle.`,0,8.6,{couleur:"lightblue"}),this.regleMontrer(o),this.regleRotation(a-90),this.crayonDeplacer(o),this.tracer(j_(o,n,180)),r&&this.textePosition("4. Coder l'angle droit.",0,7.9,{couleur:"lightblue"}),this.regleMasquer(),this.codageAngleDroit(i,n,t)}},kN.prototype.perpendiculaireRegleEquerrePointSurLaDroite=function(e,t,r){const n=ew(e,t,"A"),i=ew(e,t+5),s=j_(i,n,90),o=j_(s,n,180);void 0===e.nom&&(e.nom="(d)"),this.traitRapide(ew(e,-20),ew(e,20)),this.pointCreer(n),r&&this.textePosition(`1. Placer un côté de l'angle droit de l'équerre sur la droite ${e.nom}.`,0,10,{couleur:"lightblue"}),this.equerreRotation(e.angleAvecHorizontale),this.equerreMontrer(i),r&&this.textePosition(`2. Faire glisser l'équerre sur la droite jusqu'au point ${n.nom}`,0,9.3,{couleur:"lightblue"}),this.equerreDeplacer(n),r&&this.textePosition("3. Tracer le long de l'autre côté de l'angle droit de l'équerre.",0,8.6,{couleur:"lightblue"}),this.crayonMontrer(n),this.tracer(s),this.equerreMasquer(),r&&this.textePosition(`4. Prolonger la perpendiculaire à ${e.nom} à la règle.`,0,7.9,{couleur:"lightblue"}),this.regleRotation(e.angleAvecHorizontale-90),this.regleMontrer(s),this.crayonDeplacer(s),this.tracer(o),r&&this.textePosition("4. Coder l'angle droit.",0,7.2,{couleur:"lightblue"}),this.regleMasquer(),this.codageAngleDroit(s,n,i)},kN.prototype.perpendiculaireCompasPointSurLaDroite=function(e,t,r){const n=ew(e,t,"A"),i=ew(e,t+3,"B"),s=ew(e,t-3,"C"),o=Q_(i,n,90,1.2),a=Q_(i,n,-90,1.2);void 0===e.nom&&(e.nom="(d)"),this.traitRapide(ew(e,-20),ew(e,20)),this.pointCreer(n),r&&this.textePosition("1. Avec le compas, marquer deux points B et C de part et d'autre de A, tels que AB=AC.",0,10,{couleur:"lightblue"}),this.compasEcarter2Points(n,i),this.compasTracerArcCentrePoint(n,i,{couleur:"lightgray",epaisseur:1}),this.compasTracerArcCentrePoint(n,s,{couleur:"lightgray",epaisseur:1}),this.pointsCreer(i,s,{tempo:10}),r&&this.textePosition("2. Choisir un écartement de compas supérieur à la longueur AB.",0,9.3,{couleur:"lightblue"}),this.compasEcarter2Points(i,o),r&&this.textePosition("3. Tracer un arc de cercle de centre B avec cet écartement.",0,8.6,{couleur:"lightblue"}),this.compasTracerArcCentrePoint(i,o,{couleur:"lightgray",epaisseur:1}),r&&this.textePosition("4. Tracer un arc de cercle de centre C en conservant le même écartement.",0,7.9,{couleur:"lightblue"}),this.compasTracerArcCentrePoint(s,o,{couleur:"lightgray",epaisseur:1}),this.compasMasquer(),r&&this.textePosition("4. Tracer la droite qui passe par le point d'intersection des arcs de cercle et par le point A.",0,7.2,{couleur:"lightblue"}),this.regleRotation(e.angleAvecHorizontale-90);const l=H_(o,n,1.1),u=H_(a,n,1.1);this.regleMontrer(l),this.crayonMontrer(l),this.tracer(u),r&&this.textePosition("5. Coder l'angle droit.",0,6.5,{couleur:"lightblue"}),this.regleMasquer(),this.codageAngleDroit(o,n,i)},kN.prototype.perpendiculaireCompasPoint=function(e,t,r){const n=X_(t,e),i=Q_(t,n,-90,1.2,"B"),s=H_(i,n,-.7,"C"),o=j_(t,n,180),a=H_(t,n,1.2),l=H_(t,n,-1.2);""===e.nom&&(e.nom="(d)"),""===t.nom&&(t.nom="A"),this.traitRapide(ew(e,-20),ew(e,20)),this.textePoint(e.nom,F_(ew(e,0),Dw(0,-.5))),this.pointCreer(t),r&&this.textePosition(`1. Choisir deux points B et C sur la droite ${e.nom}.`,0,11,{couleur:"lightblue",tempo:20}),this.tempo=20,this.pointCreer(i),this.pointCreer(s),r&&this.textePosition(`2. Tracer un arc de cercle de centre B passant par A et un autre de centre C passant par ${t.nom}.`,0,10.3,{couleur:"lightblue",tempo:20}),this.compasEcarter2Points(i,t),this.compasTracerArcCentrePoint(i,o,{couleur:"lightgray",epaisseur:1}),this.compasEcarter2Points(s,t),this.compasTracerArcCentrePoint(s,o,{couleur:"lightgray",epaisseur:1}),r&&this.textePosition(`3. Ces deux arcs de cercle se recoupent en un point qui est le symétrique de ${t.nom} par rapport à ${e.nom}`,0,9.6,{couleur:"lightblue",tempo:20}),this.compasMasquer(),r&&this.textePosition("4. Tracer la droite qui passe par le point d'intersection des arcs de cercle et par le point A.",0,8.9,{couleur:"lightblue",tempo:20}),this.regleRotation(e.angleAvecHorizontale-90),this.regleMontrer(a),this.crayonMontrer(a),this.tracer(l),r&&this.textePosition("5. Coder l'angle droit.",0,8.2,{couleur:"lightblue",tempo:20}),this.regleMasquer(),this.codageAngleDroit(a,n,i)},kN.prototype.paralleleRegleEquerreDroitePointAvecDescription=function(e,t,r,n,i=!0){e.nom="A",t.nom="B",r.nom="M";const s=H_(e,t,2),o=H_(t,e,2),a=aw(e,t),l=X_(r,j_(a,e,90)),u=H_(r,l,1.5),c=H_(l,r,2);this.tempo=10,this.pointsCreer(e,t,r),this.pointMasquer(s,o),this.traitRapide(s,o),this.textePosition("Parallèle à une droite passant par un point (règle et équerre)",-10,10.7,{couleur:"green",taille:4,tempo:20}),i&&this.textePosition("On veut construire la parallèle à (AB) passant par M à la règle et à l'equerre.",-10,10,{couleur:"red",taille:4,tempo:50}),i&&this.textePosition("1. Placer l'équerre un côté de l'angle droit le long de la droite (AB).",-9,9.3,{couleur:"lightblue",taille:2,tempo:10}),this.equerreMontrer(e),this.equerreRotation(a.angleAvecHorizontale+(n?-90:0),{tempo:20}),i&&this.textePosition("2. Placer ensuite la règle contre l'autre côté de l'angle droit de l'équerre.",-9,8.6,{couleur:"lightblue",taille:2,tempo:10}),this.regleRotation(a.angleAvecHorizontale-90),this.regleMontrer(s),this.regleDeplacer(H_(j_(t,e,90),e,1.5),{tempo:20}),i&&this.textePosition("Remarque : On peut tracer des pointillés pour matérialiser la position de la règle.",-9.5,7.9,{couleur:"pink",taille:2,tempo:10}),this.crayonMontrer(e),this.tracer(H_(j_(t,e,n?90:-90),e,1.5),{pointilles:!0}),i&&this.textePosition("3. Faire glisser l'équerre le long de la règle jusqu'au point M.",-9,7.2,{couleur:"lightblue",taille:2,tempo:10}),n||this.equerreRotation(a.angleAvecHorizontale-90),this.equerreDeplacer(l,{tempo:20}),i&&this.textePosition("4. Tracer le segment de droite passant par M.",-9,6.5,{couleur:"lightblue",taille:2,tempo:10}),this.crayonDeplacer(l),this.tracer(u),this.equerreMasquer(),i&&this.textePosition("5. Placer la règle sur ce segment et prolonger la parallèle à (AB).",-9,5.8,{couleur:"lightblue",taille:2,tempo:10}),this.regleDeplacer(c),this.regleRotation(a.angleAvecHorizontale),this.tracer(c),this.regleMasquer(),i&&this.textePosition("6. Pour finir, coder la figure.",-9,5.1,{couleur:"lightblue",taille:2,tempo:20}),this.codageAngleDroit(t,e,l),this.codageAngleDroit(e,l,r),this.crayonMasquer()},kN.prototype.paralleleAuCompasAvecDescription=function(e,t,r,n=!0){const i=U_(r,e,t,"D");e.nom="A",t.nom="B",r.nom="C";const s=H_(e,t,1.5),o=H_(t,e,1.5),a=H_(r,i,1.5),l=H_(i,r,1.5);this.tempo=10,this.pointsCreer(e,t,r),this.traitRapide(s,o),this.textePosition("Parallèle à une droite passant par un point (compas et règle)",-10,10.7,{couleur:"green",taille:4,tempo:20}),n&&this.textePosition("On veut construire la parallèle à (AB) passant par C à la règle et au compas.",-10,10,{couleur:"red",taille:4,tempo:30}),n&&this.textePosition("1. Prendre avec le compas l'écartement correspondant à la longueur AB.",-9,9.3,{couleur:"lightblue",taille:2,tempo:10}),this.compasEcarter2Points(e,t),n&&this.textePosition("2. Reporter cette longueur à partir du point C.",-9,8.6,{couleur:"lightblue",taille:2,tempo:10}),this.compasTracerArcCentrePoint(r,i,{couleur:"lightgray",epaisseur:1}),n&&this.textePosition("3. Prendre ensuite avec le compas l'écartement correspondant à la longueur AC.",-9,7.9,{couleur:"lightblue",taille:2,tempo:10}),this.compasEcarter2Points(e,r),n&&this.textePosition("4. Reporter cette longueur à partir du point B.",-9,7.2,{couleur:"lightblue",taille:2,tempo:10}),this.compasTracerArcCentrePoint(t,i,{couleur:"lightgray",epaisseur:1}),this.compasMasquer(),n&&this.textePosition("5. Noter D, le point d'intersection des deux arcs de cercle.",-9,6.5,{couleur:"lightblue",taille:2,tempo:10}),this.pointCreer(i),n&&this.textePosition("6. Tracer la droite passant par C et D.",-9,5.8,{couleur:"lightblue",taille:2,tempo:10}),this.regleSegment(a,l),this.regleMasquer(),this.crayonMasquer()},kN.prototype.paralleleAuCompas=function(e,t,r){const n=U_(r,e,t),i=H_(r,n,1.5),s=H_(n,r,1.5);return this.compasEcarter2Points(e,t),this.compasTracerArcCentrePoint(r,n),this.compasEcarter2Points(e,r),this.compasTracerArcCentrePoint(t,n),this.compasMasquer(),this.regleSegment(i,s),n},kN.prototype.mediatriceAuCompas=function(e,t,r={}){void 0===r.longueur1&&(r.longueur1=3),void 0===r.longueur2&&(r.longueur2=-3),void 0===r.codage&&(r.codage="X"),void 0===r.couleurCodage&&(r.couleurCodage=this.couleurCodage),void 0===r.couleurCompas&&(r.couleurCompas=this.couleurCompas),void 0===r.coderFigure&&(r.coderFigure=!0);const n=Yx(e,t),i=j_(e,n,-90),s=Xx(n,i,r.longueur1),o=Xx(n,i,r.longueur2);let a,l,u,c;if(this.compasMontrer(),this.compasDeplacer(e,r),r.longueur1===-1*r.longueur2?(this.compasEcarter(KS(e,s),{vitesse:r.vitesse,sens:r.vitesse}),a=this.compasTracerArcCentrePoint(e,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),l=this.compasTracerArcCentrePoint(e,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),c=this.compasTracerArcCentrePoint(t,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),u=this.compasTracerArcCentrePoint(t,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo})):(this.compasEcarter(KS(e,s),r),a=this.compasTracerArcCentrePoint(e,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),l=this.compasTracerArcCentrePoint(t,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),u=this.compasTracerArcCentrePoint(t,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),c=this.compasTracerArcCentrePoint(e,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo})),this.compasMasquer(),s.x<=o.x?this.regleDroite(s,o,r):this.regleDroite(o,s,r),this.regleMasquer(),r.coderFigure){return[a,l,u,c,this.segmentCodage(e,n,{codage:r.codage,couleur:r.couleurCodage,tempo:r.tempo}),this.segmentCodage(n,t,{codage:r.codage,couleur:r.couleurCodage,tempo:r.tempo}),this.codageAngleDroit(e,n,i,{couleur:r.couleurCodage,tempo:r.tempo,vitesse:r.vitesse})]}return[a,l,u,c]},kN.prototype.mediatriceRegleEquerre=function(e,t,r="X"){const n=Yx(e,t);this.regleMontrer(),this.regleDeplacer(e),this.regleRotation(t),this.crayonMontrer();const i=j_(e,n,-90),s=j_(e,n,90),o=Xx(n,i,.2),a=Xx(n,s,.2);this.y(o)>this.y(a)?this.trait(n,o):this.trait(n,a),this.regleMasquer(),this.x(e)<this.x(t)?(this.equerreDeplacer(e),this.equerreMontrer(),this.equerreRotation(t)):(this.equerreDeplacer(t),this.equerreMontrer(),this.equerreRotation(e)),this.equerreDeplacer(n),this.crayonDeplacer(n),this.trait(n,i),this.equerreMasquer(),this.regleDroite(i,s),this.regleMasquer(),this.segmentCodage(e,n,r),this.segmentCodage(n,t,r),this.codageAngleDroit(e,n,i)},kN.prototype.hauteur=function(e,t,r,n=!0){const i=aw(e,t);i.isVisible=!1;const s=X_(r,i);let o,a;this.x(e)<this.x(t)?(o=e,a=t):(o=t,a=e),this.x(s)<this.x(o)&&this.regleProlongerSegment(a,o,KS(o,s)+2,this.couleur,this.tempo,this.vitesse,this.epaisseurTraitsDeConstruction,!0),this.x(s)>this.x(a)&&this.regleProlongerSegment(o,a,KS(a,s)+2,this.couleur,this.tempo,this.vitesse,this.epaisseurTraitsDeConstruction,!0),(this.x(s)<this.x(o)||this.x(s)>this.x(a))&&this.regleMasquer(),this.x(e)<this.x(t)?(this.equerreDeplacer(e),this.equerreMontrer(),this.equerreRotation(t)):(this.equerreDeplacer(t),this.equerreMontrer(),this.equerreRotation(e)),this.equerreDeplacer(s),this.crayonMontrer(),this.crayonDeplacer(s),this.trait(s,r),this.equerreMasquer(),n&&this.codageAngleDroit(e,s,r),this.crayonMasquer()},kN.prototype.mediane=function(e,t,r,n={}){void 0===n.codage&&(n.codage="X"),void 0===n.couleurTraitsDeConstruction&&(n.couleurTraitsDeConstruction=this.couleurTraitsDeConstruction),void 0===n.epaisseurTraitsDeConstruction&&(n.epaisseurTraitsDeConstruction=this.epaisseurTraitsDeConstruction);const i=Yx(e,t);this.regleMontrer(e,n),this.regleRotation(t,n),this.crayonMontrer();const s=j_(e,i,-90),o=j_(e,i,90),a=Xx(i,s,.2),l=Xx(i,o,.2);a.y>l.y?this.trait(i,a,{vitesse:n.vitesse,tempo:n.tempo,couleur:n.couleurTraitsDeConstruction,epaisseur:n.epaisseurTraitsDeConstruction}):this.trait(i,l,{vitesse:n.vitesse,tempo:n.tempo,couleur:n.couleurTraitsDeConstruction,epaisseur:n.epaisseurTraitsDeConstruction}),this.regleSegment(i,r,n),n.codage&&(this.segmentCodage(e,i,n),this.segmentCodage(i,t,n))},kN.prototype.bissectriceAuCompas=function(e,t,r,{codage:n="/",l:i=2,couleur:s=this.couleur,tempo:o=this.tempo,vitesse:a=this.vitesse,sens:l=Nx(this.vitesse/2,0),epaisseur:u=this.epaisseur,pointilles:c=this.pointilles,couleurCodage:p=this.couleurCodage,masquerTraitsDeConstructions:h=!0}={}){const d=Xx(t,e,i),f=Xx(t,r,i),m=j_(t,d,-(180-tA(e,t,r))),g={couleur:s,tempo:o,vitesse:a,sens:l,pointilles:!1},y=this.compasTracerArcCentrePoint(t,d,g),v=this.compasTracerArcCentrePoint(t,f,g),b=this.compasTracerArcCentrePoint(d,m,g),x=this.compasTracerArcCentrePoint(f,m,g);return this.compasMasquer(),this.regleDemiDroiteOriginePoint(t,m,{longueur:KS(t,e),couleur:s,tempo:o,vitesse:a,sens:l,epaisseur:u,pointilles:c}),this.regleMasquer(),this.crayonMasquer(),n&&(this.angleCodage(e,t,m,{couleur:p,codage:n,tempo:o}),this.angleCodage(m,t,r,{couleur:p,codage:n,tempo:o})),h&&(this.traitMasquer(y),this.traitMasquer(v),this.traitMasquer(b),this.traitMasquer(x)),{arc1:y,arc2:v,arc3:b,arc4:x}},kN.prototype.cercleCirconscrit=function(e,t,r,n={}){void 0===n.couleur&&(n.couleur=this.couleur),void 0===n.couleurMediatrice&&(n.couleurMediatrice=n.couleur),void 0===n.couleurCercle&&(n.couleurCercle=n.couleur),n.codage="X",n.couleur=n.couleurMediatrice;const i=this.mediatriceAuCompas(e,t,n);this.traitMasquer(i[0]),this.traitMasquer(i[1]),this.traitMasquer(i[2]),this.traitMasquer(i[3]),n.codage="||";const s=this.mediatriceAuCompas(t,r,n);this.traitMasquer(s[0]),this.traitMasquer(s[1]),this.traitMasquer(s[2]),this.traitMasquer(s[3]),n.codage="///";const o=this.mediatriceAuCompas(e,r,n);this.traitMasquer(o[0]),this.traitMasquer(o[1]),this.traitMasquer(o[2]),this.traitMasquer(o[3]);const a=EE(e,t,r);n.couleur=n.couleurCercle,this.compasCercleCentrePoint(a,e,n)},kN.prototype.triangle3longueurs=function(e,t,r,n,i=!0){const s=zx(6,0),o=rw(s,t,fx(-20,20)),a=e_(s,o,r,n).listePoints[2];return 3!==e.length?i=!1:(s.nom=e[0],o.nom=e[1],a.nom=e[2]),i&&this.textePosition(`${s.nom+o.nom} = ${Tx(t)} cm`,0,-2),this.pointCreer(s),this.regleSegment(s,o),this.pointCreer(o),this.crayonMasquer(),i&&this.textePosition(`${s.nom+a.nom} = ${Tx(r)} cm donc ${a.nom} appartient au cercle de centre ${s.nom} et de rayon ${Tx(r)} cm.`,0,-3),this.couleur="forestgreen",this.epaisseur=2,this.compasMontrer(s),this.compasEcarterAvecRegle(r),this.compasTracerArcCentrePoint(s,a,40),i&&this.textePosition(`${o.nom+a.nom} = ${Tx(n)} cm donc ${a.nom} appartient au cercle de centre ${o.nom} et de rayon ${Tx(n)} cm.`,0,-4),this.compasDeplacer(o),this.compasEcarterAvecRegle(n),this.compasTracerArcCentrePoint(o,a),this.compasMasquer(),this.couleur="blue",this.epaisseur=3,i&&this.textePosition(`Le point ${a.nom} est à une intersection des deux cercles.`,0,-5),this.pointCreer(a),this.regleSegment(o,a),this.regleSegment(a,s),this.crayonMasquer(),this.regleMasquer(),[s,o,a]},kN.prototype.triangleRectangleCoteHypotenuse=function(e,t,r,n=!0){const i=zx(6,0),s=rw(i,t,fx(-20,20)),o=aw(i,s);o.isVisible=!1;const a=dw(s,o);a.isVisible=!1;const l=u_(i,r);l.isVisible=!1;const u=h_(a,l),c=H_(u,s,1.2);return 3!==e.length?n=!1:(i.nom=e[0],s.nom=e[1],u.nom=e[2]),KS(i,u)>8&&this.equerreZoom(150),n&&this.textePosition(`${i.nom+s.nom} = ${Tx(t)} cm`,0,-2),this.equerreRotation(o.angleAvecHorizontale),this.pointCreer(i),this.regleSegment(i,s),this.pointCreer(s),n&&this.textePosition(`${i.nom+s.nom+u.nom} est un triangle rectangle en ${s.nom} donc ${u.nom} appartient à la perpendiculaire à (${i.nom+s.nom}) passant par ${s.nom}.`,0,-3),this.equerreMontrer(i),this.equerreDeplacer(s),this.tracer(c),this.equerreMasquer(),this.codageAngleDroit(i,s,u),this.crayonMasquer(),n&&this.textePosition(`${i.nom+u.nom} = ${Tx(r)} cm donc ${u.nom} appartient au cercle de centre ${i.nom} et de rayon ${Tx(r)} cm.`,0,-4),this.compasMontrer(i),this.compasEcarterAvecRegle(r),this.couleur="forestgreen",this.epaisseur=2,this.compasTracerArcCentrePoint(i,u),this.couleur="blue",this.epaisseur=2,n&&this.textePosition(`${u.nom} est à une intersection de la perpendiculaire et du cercle.`,0,-5),this.crayonMontrer(u),this.pointCreer(u),this.compasMasquer(),this.regleSegment(i,u),this.regleMasquer(),this.crayonMasquer(),[i,s,u]},kN.prototype.triangleRectangle2Cotes=function(e,t,r,n=!0){const i=zx(6,0),s=rw(i,t,fx(-20,20)),o=aw(i,s);o.isVisible=!1;const a=dw(s,o);a.isVisible=!1;const l=u_(s,r);l.isVisible=!1;const u=h_(a,l),c=H_(u,s,1.2);return 3!==e.length?n=!1:(i.nom=e[0],s.nom=e[1],u.nom=e[2]),KS(i,u)>8&&this.equerreZoom(150),n&&this.textePosition(`${i.nom+s.nom} = ${Tx(t)} cm`,0,-2),this.equerreRotation(o.angleAvecHorizontale),this.pointCreer(i),this.regleSegment(i,s),this.pointCreer(s),n&&this.textePosition(`${i.nom+s.nom+u.nom} est un triangle rectangle en ${s.nom} donc ${u.nom} appartient à la perpendiculaire à (${i.nom+s.nom}) passant par ${s.nom}.`,0,-3),this.equerreMontrer(i),this.equerreDeplacer(s),this.tracer(c),this.equerreMasquer(),this.codageAngleDroit(i,s,u),n&&this.textePosition(`${s.nom+u.nom} = ${Tx(r)} cm donc ${u.nom} est à ${Tx(r)} cm de ${s.nom} sur la perpendiculaire à (${i.nom+s.nom}) passant par ${s.nom}.`,0,-4),this.regleMontrer(s),this.regleRotation(u),this.crayonDeplacer(u),this.pointCreer(u),this.couleur="blue",this.epaisseur=2,this.compasMasquer(),this.regleSegment(i,u),this.regleMasquer(),this.crayonMasquer(),[i,s,u]},kN.prototype.triangle1longueur2angles=function(e,t,r,n,i=!0,s=!1){const o=fx(-20,20),a=r,l=n,u=zx(6,0),c=rw(u,t,o),p=rw(u,5.2,a+o),h=Xx(u,p,10),d=Xx(p,h,.4),f=rw(c,3,180-l+o),m=Xx(c,f,10),g=Xx(f,m,-.4),y=rw(c,5.2,180-l+o),v=Xx(y,m,.4),b=j_(aw(u,c),u,a);p.isVisible=!1;const x=j_(aw(c,u),c,-l);x.isVisible=!1;const w=tw(b,x);return 3!==e.length?i=!1:(u.nom=e[0],c.nom=e[1],w.nom=e[2]),this.couleur="blue",this.epaisseur=3,this.pointCreer(u),i&&this.textePosition(`On trace le côté [${u.nom+c.nom}] de ${Tx(t)} cm.`,0,-4),this.regleSegment(u,c),this.pointCreer(c),this.couleur="grey",this.epaisseur=1,this.rapporteurMontrer(u),this.rapporteurDeplacer(u),this.rapporteurRotation(o),i&&this.textePosition(`On place un repère à ${a} degrés pour tracer la demi-droite [${u.nom+w.nom}).`,0,-5),this.epaisseur=3,this.trait(p,d,20),this.epaisseur=1,this.rapporteurMasquer(),this.regleSegment(u,h),this.regleMasquer(),this.angleCodage(c,u,w),this.rapporteurMontrer(u),this.rapporteurDeplacer(c),i&&this.textePosition(`On place un repère à ${l} degrés pour tracer la demi-droite [${c.nom+w.nom}).`,0,-6),this.epaisseur=3,this.trait(f,g,10),this.trait(y,v,20),this.epaisseur=1,this.rapporteurMasquer(),this.regleMontrer(c),this.regleSegment(c,m),this.angleCodage(w,c,u),this.pointCreer(w,"",0),this.pointNommer(w,w.nom,-.5,1),this.couleur="blue",this.epaisseur=3,this.regleSegment(c,w),this.regleSegment(w,u),this.regleMasquer(),this.crayonMasquer(),i&&s&&this.textePosition(`On peut mesurer ${u.nom+w.nom} ≈ ${Tx(KS(u,w,1))} cm et ${c.nom+w.nom} ≈ ${Tx(KS(c,w,1))} cm.`,0,-7),[u,c,w]},kN.prototype.triangle2longueurs1angle=function(e,t,r,n,i=!0,s=!1){const o=fx(-20,20),a=n,l=zx(6,0),u=rw(l,t,o),c=rw(l,5.2,a+o),p=Xx(l,c,10),h=Xx(c,p,.4),d=Xx(l,p,r);return 3!==e.length?i=!1:(l.nom=e[0],u.nom=e[1],d.nom=e[2]),this.couleur="blue",this.epaisseur=3,this.pointCreer(l),i&&this.textePosition(`On trace le côté [${l.nom+u.nom}] de ${Tx(t)} cm.`,0,-4),this.regleSegment(l,u),this.pointCreer(u),this.couleur="grey",this.epaisseur=1,this.rapporteurMontrer(l),this.rapporteurDeplacer(l),this.rapporteurRotation(o),i&&this.textePosition(`On place un repère à ${a} degrés pour tracer la demi-droite [${l.nom+d.nom}).`,0,-5),this.epaisseur=3,this.trait(c,h,20),this.epaisseur=1,this.rapporteurMasquer(),this.regleSegment(l,p),this.angleCodage(u,l,d),this.rapporteurMasquer(),i&&this.textePosition(`On place le point ${d.nom} sur la demi-droite [${l.nom+d.nom}) à ${r} cm de ${l.nom}.`,0,-6),this.epaisseur=3,this.couleur="blue",this.crayonDeplacer(d),this.pointCreer(d),this.regleSegment(l,d),this.crayonMasquer(),i&&this.textePosition(`On trace le côté [${u.nom+d.nom}].`,0,-7),this.regleMontrer(d),this.crayonMontrer(d),this.regleSegment(d,u),this.regleMasquer(),this.crayonMasquer(),[l,u,d]},kN.prototype.triangleEquilateral2Sommets=function(e,t,r=""){const n=j_(t,e,60);return n.nom=r,this.traitRapide(e,t),this.pointCreer(e,e.nom,0),this.pointCreer(t,t.nom,0),this.compasEcarter2Points(e,t),this.compasTracerArcCentrePoint(e,n),this.compasTracerArcCentrePoint(t,n),this.pointCreer(n),this.compasMasquer(),this.regleSegment(e,n),this.regleSegment(n,t),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(e,t),this.segmentCodage(e,n),this.segmentCodage(t,n),[e,t,n]},kN.prototype.triangleEquilateral=function(e,t){const r=zx(6,0),n=rw(r,t,fx(-20,20)),i=j_(n,r,60);return 3===e.length&&(r.nom=e[0],n.nom=e[1],i.nom=e[2]),this.regleSegment(r,n),this.pointCreer(r),this.pointCreer(n),this.compasEcarter2Points(r,n),this.compasTracerArcCentrePoint(r,i),this.compasTracerArcCentrePoint(n,i),this.pointCreer(i),this.compasMasquer(),this.regleSegment(r,i),this.regleSegment(i,n),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(r,n),this.segmentCodage(r,i),this.segmentCodage(n,i),[r,n,i]},kN.prototype.carre1point1longueur=function(e,t,r){const n=rw(t=zx(5,0,e[0]),r,fx(-20,20),e[1]),i=j_(t,n,-90,e[2]),s=j_(n,t,90,e[3]),o=Xx(t,s,r+2,"E"),a=Xx(s,i,r+2,"F");return this.equerreZoom(100*(r+3)/7.5),this.tempo=20,this.textePosition(`1) On veut construire un carré dont les côtés mesurent ${r} cm, donc on commence par tracer un segment, ici [${e[0]+e[1]}], de cette longueur.`,0,-2),this.pointCreer(t,{tempo:0}),this.pointNommer(t,t.nom,{dx:-.5,dy:0}),this.regleSegment(t,n),this.pointCreer(n),this.regleMasquer(),this.longueurSegment(t,n,-1),this.textePosition(`2) Un carré possède 4 angles droits, donc on trace la perpendiculaire à (${e[0]+e[1]}) passant par ${e[0]}.`,0,-3),this.equerreMontrer(),this.equerreDeplacer(t),this.equerreRotation(n),this.trait(t,o),this.equerreMasquer(),this.codageAngleDroit(n,t,s),this.textePosition(`3) Les 4 côtés d'un carré sont de la même longueur, donc on place le point ${e[3]} sur cette perpendiculaire, à ${r} cm de ${e[0]}.`,0,-4),this.regleSegment(t,s),this.pointCreer(s,{tempo:0}),this.pointNommer(s,s.nom,{dx:-.7,dy:.5}),this.regleMasquer(),this.segmentCodage(t,n),this.segmentCodage(t,s),this.textePosition(`4) De même, on trace la perpendiculaire à (${e[0]+e[3]}) passant par ${e[3]}, puis on place le point ${e[2]} sur cette perpendiculaire, à ${r} cm de ${e[3]}.`,0,-5),this.equerreMontrer(),this.equerreDeplacer(s),this.equerreRotation(t),this.trait(s,a),this.equerreMasquer(),this.codageAngleDroit(t,s,i),this.regleSegment(s,i),this.pointCreer(i,{tempo:0}),this.pointNommer(i,i.nom,{dx:0,dy:.9}),this.regleMasquer(),this.segmentCodage(s,i),this.textePosition(`5) On trace le segment [${e[1]+e[2]}].`,0,-6),this.regleSegment(i,n),this.regleMasquer(),this.segmentCodage(n,i),this.textePosition(`6) On vérifie que ${e[1]+e[2]} = ${r} cm et que les deux derniers angles tracés sont droits.`,0,-7),this.equerreMontrer(i,{tempo:0}),this.equerreRotation(s),this.equerreMasquer(),this.codageAngleDroit(s,i,n),this.equerreMontrer(n,{tempo:0}),this.equerreRotation(i),this.equerreMasquer(),this.codageAngleDroit(i,n,t),Gw(t,n,i,s)},kN.prototype.rotationPoint=function(e,t,r,n,{couleur:i=this.couleur,couleurCodage:s=this.couleurCodage,codage:o=!0}={}){this.epaisseur=.5,this.couleur="grey",void 0!==n&&""!==n||(n=e.nom+"'");const a=j_(e,t,r,n);this.regleSegment(t,e),this.rapporteurMontrer(t),this.rapporteurTracerDemiDroiteAngle(t,e,r),this.regleMasquer(),this.rapporteurMasquer(),this.compasEcarter2Points(t,e),this.compasTracerArcCentrePoint(t,a),this.compasMasquer(),this.pointCreer(a,{couleur:i,couleurLabel:i}),o&&(90===Math.abs(r)?this.codageAngleDroit(e,t,a,{couleur:s}):(this.angleCodage(e,t,a,{couleur:s}),this.textePoint(Math.abs(r)+"°",F_(H_(j_(e,t,r/2),t,1.3/KS(t,e)),Dw(-.2,.5)))))},kN.prototype.translationPoint=function(e,t,r,n,{couleur:i="black",couleurCodage:s=this.couleurCodage}={}){const o=Dw(t,r);this.epaisseur=.5,this.couleur="grey",void 0!==n&&""!==n||(n=e.nom+"'");const a=F_(e,o,n);0!==KS(t,e)&&(this.compasEcarter2Points(t,e),this.compasTracerArcCentrePoint(r,a),this.compasEcarter2Points(t,r),this.compasTracerArcCentrePoint(e,a)),this.compasMasquer(),this.pointCreer(a,{couleur:i,couleurLabel:i});const l=fx(0,4),u=fx(0,4,l),c=["/","//","///","O","\\\\"],p=c[l],h=c[u];this.couleur="green",this.traitRapide(e,a),this.traitRapide(t,r),this.segmentCodage(e,a,{codage:p,couleur:s}),this.segmentCodage(t,r,{codage:p,couleur:s}),this.couleur="red",this.traitRapide(r,a),this.traitRapide(t,e),this.segmentCodage(r,a,{codage:h,couleur:s}),this.segmentCodage(t,e,{codage:h,couleur:s})},kN.prototype.demiTourPoint=function(e,t,r,{couleur:n="black",couleurCodage:i=this.couleurCodage,codage:s="//"}={}){this.epaisseur=.5,this.couleur="grey",void 0!==r&&""!==r||(r=e.nom+"'");const o=j_(e,t,180,r);this.compasEcarter2Points(t,e),this.compasTracerArcCentrePoint(t,o),this.compasMasquer(),this.crayonDeplacer(e),this.regleSegment(e,o),this.couleur=n,this.epaisseur=2,this.pointCreer(o,{couleur:n,couleurLabel:n}),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(e,t,{codage:s,couleur:i}),this.segmentCodage(t,o,{codage:s,couleur:i})},kN.prototype.homothetiePoint=function(e,t,r,n,{couleur:i=this.couleur,positionTexte:s={x:0,y:0}}={}){this.epaisseur=1;const o=this.couleur;let a;this.couleur="grey",void 0!==n&&""!==n||(n=e.nom+"'");const l=H_(e,t,r,n);a=r>0?this.textePosition(`Comme le rapport est positif alors les points ${e.nom} et ${l.nom} sont du même côté de ${t.nom}`,s.x,s.y,{taille:15}):this.textePosition(`Comme le rapport est négatif alors ${t.nom} est entre les points ${e.nom} et ${l.nom}`,s.x,s.y,{taille:15}),this.regleSegment(e,t);const u=bx(KS(e,t),1),c=bx(Nx(u*Math.abs(r))),p=this.textePosition(`La mesure de ${t.nom}${e.nom} est ${Cx(bx(u,1))} cm et le rapport de l'homothetie est ${Cx(r)}`,s.x,s.y-1,{taille:15}),h=this.textePosition(`donc ${t.nom}${l.nom} mesure ${Cx(u)} cm × ${Cx(Math.abs(r))} = ${Cx(c)} cm`,s.x,s.y-2,{taille:15});this.regleSegment(t,l),this.pointCreer(l,{couleur:i,couleurLabel:i}),this.regleMasquer(),this.crayonMasquer(),this.pause(),this.texteMasquer(p),this.texteMasquer(h),this.texteMasquer(a),this.couleur=o},kN.prototype.rotationPolygone=function(e,t,r,n=[],{couleur:i=this.couleur,couleurCodage:s=this.couleurCodage}={}){let o;const a=j_(e,t,r);this.epaisseur=.5,this.couleur="grey";let l,u=0;for(const c of e.listePoints)o=void 0!==n[u]?n[u]:c.nom+"'",l=u<1,0!==KS(t,c)&&this.rotationPoint(c,t,r,o,{couleur:i,couleurCodage:s,codage:l}),u++;this.epaisseur=2,this.couleur=i,this.polygoneRapide(...a.listePoints)},kN.prototype.symetrieAxialePolygone=function(e,t,r=[],{couleur:n=this.couleur,couleurCodage:i=this.couleurCodage}={}){let s;const o=W_(e,t);this.epaisseur=.5,this.couleur="grey";let a=0;const l=["/","//","///","O","\\\\"];for(const u of e.listePoints)s=void 0!==r[a]?r[a]:u.nom+"'",this.symetrieAxialePoint(u,t,s,{couleur:n,couleurCodage:i,codage:l[a]}),a++;this.compasMasquer(),this.crayonMasquer(),this.epaisseur=2,this.couleur=n,this.polygoneRapide(...o.listePoints),this.polygoneRapide(o)},kN.prototype.translationPolygone=function(e,t,r,n=[],{couleur:i=this.couleur,couleurCodage:s=this.couleurCodage,codage:o="O"}={}){let a;const l=F_(e,Dw(t,r));this.epaisseur=.5,this.couleur="grey";let u=0;for(const c of e.listePoints)a=void 0!==n[u]?n[u]:c.nom+"'",this.translationPoint(c,t,r,a,{couleur:i,couleurCodage:s,codage:o});this.epaisseur=2,this.couleur=i,this.polygoneRapide(...l.listePoints),this.polygoneRapide(l),u++},kN.prototype.demiTourPolygone=function(e,t,r=[],{couleur:n=this.couleur,couleurCodage:i=this.couleurCodage}={}){const s=j_(e,t,180);let o;this.epaisseur=.5,this.couleur="grey";let a=0;const l=["/","//","///","O","\\\\"];for(const u of e.listePoints)o=void 0!==r[a]?r[a]:u.nom+"'",this.demiTourPoint(u,t,o,{couleur:n,couleurCodage:i,codage:l[a]}),a++;this.epaisseur=2,this.couleur=n,this.polygoneRapide(...s.listePoints),this.polygoneRapide(s)},kN.prototype.homothetiePolygone=function(e,t,r,n=[],{couleur:i=this.couleur}={}){let s;const o=H_(e,t,r);this.epaisseur=1,this.couleur="grey";const a=this.textePosition("Comme k est "+(r>=0?"positif":"négatif")+" alors "+(r>=0?"les figures sont du même côté de "+t.nom:t.nom+" est entre les figures"),0,0,{taille:15});let l=0;for(const u of e.listePoints)s=void 0!==n[l]?n[l]:u.nom+"'",this.homothetiePoint(u,t,r,s,{couleur:i}),l++;this.epaisseur=2,this.couleur=i,this.polygoneRapide(...o.listePoints),this.texteMasquer(a)},document.addEventListener("DOMContentLoaded",(e=>{$(".ui.dropdown").dropdown()}));const MN=document.getElementById("submit"),CN=document.getElementById("telecharger"),TN=document.getElementById("url"),ON=document.getElementById("containerIep");let IN='\n<?xml version="1.0" encoding="UTF-8"?>\n<INSTRUMENPOCHE version="2">\n</INSTRUMENPOCHE>\n';const PN=document.getElementById("editeur"),DN=r()(PN,{value:"",mode:"javascript",lineNumbers:!0,autofocus:!0,theme:"monokai",autoCloseBrackets:!0,showHint:!0,extraKeys:{"Ctrl-Space":"autocomplete"},matchBrackets:!0,lineWrapping:!0});DN.setSize(500,550),cmResize(DN),document.getElementById("xmlSrc").style.width="500px",document.getElementById("xmlSrc").style.height="500px";const RN=new URL(window.location.href);function LN(){window.localStorage.setItem("Script Mathalea 2D IEP",DN.getValue()),CN&&(CN.style.visibility="visible"),TN&&(TN.style.visibility="visible"),CN&&(CN.style.visibility="visible"),TN&&(TN.style.visibility="visible");const t=function(){ox.objets2D=[],window.randint=fx,window.texNombre=Cx,window.nombreDecimal=kx,window.calcul=Nx,window.calcule=lx,window.fraction=Fy,window.numId=0,window.texteParPointEchelle=VS,window.angleScratchTo2d=nA,window.appartientSegment=Zx,window.appartientDroite=Qx,window.appartientDemiDroite=Kx,window.scratchblock=vA,window.motifs=SA,window.nomVecteurParPosition=Lw,window.point=zx,window.tracePoint=Gx,window.tracePointSurDroite=Hx,window.milieu=Yx,window.pointSurSegment=Xx,window.pointSurCercle=Jx,window.pointSurDroite=ew,window.pointIntersectionDD=tw,window.pointAdistance=rw,window.labelPoint=iw,window.barycentre=sw,window.droite=aw,window.droiteParPointEtVecteur=pw,window.droiteParPointEtParallele=hw,window.droiteParPointEtPerpendiculaire=dw,window.droiteHorizontaleParPoint=fw,window.droiteVerticaleParPoint=mw,window.droiteParPointEtPente=gw,window.mediatrice=yw,window.codageMediatrice=bw,window.codageMilieu=ww,window.constructionMediatrice=Ew,window.bissectrice=Sw,window.codageBissectrice=Nw,window.constructionBissectrice=Mw,window.polyline=Tw,window.pave=Iw,window.vecteur=Dw,window.segment=$w,window.segmentAvecExtremites=Bw,window.demiDroite=zw,window.demiDroiteAvecExtremite=Fw,window.polygone=jw,window.polygoneAvecNom=Gw,window.polygoneRegulier=Vw,window.polygoneRegulierIndirect=Hw,window.carre=Ww,window.carreIndirect=Yw,window.codageCarre=Zw,window.polygoneRegulierParCentreEtRayon=Qw,window.triangle2points2longueurs=e_,window.triangle2points2angles=t_,window.triangle2points1angle1longueur=r_,window.triangle2points1angle1longueurOppose=n_,window.nommePolygone=s_,window.deplaceLabel=o_,window.aireTriangle=a_,window.cercle=u_,window.ellipse=p_,window.pointIntersectionLC=h_,window.pointIntersectionCC=d_,window.cercleCentrePoint=m_,window.arc=y_,window.arcPointPointAngle=b_,window.traceCompas=x_,window.courbeDeBezier=__,window.segmentMainLevee=S_,window.cercleMainLevee=N_,window.droiteMainLevee=M_,window.polygoneMainLevee=T_,window.arcMainLevee=I_,window.dansLaCibleCarree=P_,window.dansLaCibleRonde=D_,window.cibleCarree=L_,window.cibleRonde=$_,window.cibleCouronne=z_,window.translation=F_,window.translation2Points=U_,window.rotation=j_,window.sensDeRotation=V_,window.homothetie=H_,window.symetrieAxiale=W_,window.distancePointDroite=Y_,window.projectionOrtho=X_,window.affiniteOrtho=Z_,window.similitude=Q_,window.apparitionAnimee=J_,window.translationAnimee=tE,window.rotationAnimee=nE,window.homothetieAnimee=sE,window.symetrieAnimee=aE,window.affiniteOrthoAnimee=uE,window.montrerParDiv=cE,window.cacherParDiv=pE,window.afficherTempo=hE,window.afficherTempoId=dE,window.afficherUnParUn=fE,window.medianeTriangle=mE,window.centreGraviteTriangle=gE,window.hauteurTriangle=yE,window.codageHauteurTriangle=bE,window.codageMedianeTriangle=wE,window.orthoCentre=_E,window.centreCercleCirconscrit=EE,window.codageAngleDroit=AE,window.afficheLongueurSegment=kE,window.texteSurSegment=CE,window.afficheMesureAngle=OE,window.afficheCoteSegment=PE,window.codeSegment=RE,window.codeSegments=qE,window.codeAngle=BE,window.nomAngleSaillantParPosition=FE,window.nomAngleRentrantParPosition=UE,window.droiteGraduee=GE,window.droiteGraduee2=HE,window.axes=YE,window.labelX=ZE,window.labelY=KE,window.grille=eS,window.grilleHorizontale=rS,window.grilleVerticale=iS,window.seyes=oS,window.repere=cS,window.repere2=hS,window.pointDansRepere=dS,window.traceGraphiqueCartesien=mS,window.traceBarre=yS,window.traceBarreHorizontale=bS,window.lectureImage=wS,window.lectureAntecedent=ES,window.courbe=AS,window.courbe2=kS,window.courbeInterpolee=IS,window.courbeInterpolee2=CS,window.graphiqueInterpole=DS,window.imageInterpolee=RS,window.antecedentInterpole=LS,window.crochetD=$S,window.crochetG=zS,window.intervalle=FS,window.texteParPoint=jS,window.texteParPosition=HS,window.latexParPoint=WS,window.latexParCoordonnees=XS,window.fractionParPosition=QS,window.longueur=KS,window.norme=JS,window.angle=eA,window.angleOriente=tA,window.angleradian=rA,window.creerLutin=oA,window.avance=aA,window.baisseCrayon=lA,window.leveCrayon=uA,window.orienter=cA,window.tournerG=pA,window.tournerD=hA,window.allerA=dA,window.mettrexA=fA,window.mettreyA=mA,window.ajouterAx=gA,window.ajouterAy=yA,window.afficherCrayon=xA,window.codeSvg=wA,window.codeTikz=_A,window.mathalea2d=EA,window.labyrinthe=kA,window.pavage=CA,window.tableau=PA,window.glisseNombre=RA,window.boite=Jw,window.plot=Ux,window.papierPointe=lS,window.traceMilieuSegment=Wx,window.positionLabelDroite=cw,window.fixeBordures=uw,window.sensDeRotation3d=xN,window.cube=fN,window.cube3d=oN,window.barre3d=lN,window.plaque3d=cN,window.paveLPH3d=hN,window.point3d=zA,window.vecteur3d=UA,window.arete3d=GA,window.droite3d=HA,window.demicercle3d=WA,window.cercle3d=YA,window.polygone3d=ZA,window.sphere3d=KA,window.cone3d=eN,window.cylindre3d=rN,window.prisme3d=iN,window.pave3d=gN,window.rotationV3d=yN,window.rotation3d=vN,window.translation3d=wN,window.pointCliquable=EN,window.anim=new kN,window.mathalea={sortieNB:!1,anglePerspective:30,coeffPerspective:.5,pixelsParCm:20,scale:1,unitesLutinParCm:50,mainlevee:!1,amplitude:1,fenetreMathalea2d:[-1,-10,29,10],objets2D:[]},ox.lutin=window.creerLutin();const e=new(AN())({ecmaVer:10,sandBox:!0});return e.import({anim:window.anim,mathalea:window.mathalea,fenetreMathalea2d:[-1,-10,29,10],pixelsParCm:20,fraction:window.fraction,randint:window.randint,texNombre:window.texNombre,nombreDecimal:window.nombreDecimal,texteParPointEchelle:window.texteParPointEchelle,angleScratchTo2d:window.angleScratchTo2d,appartientSegment:window.appartientSegment,appartientDroite:window.appartientDroite,appartientDemiDroite:window.appartientDemiDroite,scratchblock:window.scratchblock,motifs:window.motifs,nomVecteurParPosition:window.nomVecteurParPosition,point:window.point,tracePoint:window.tracePoint,tracePointSurDroite:window.tracePointSurDroite,milieu:window.milieu,pointSurSegment:window.pointSurSegment,pointSurCercle:window.pointSurCercle,pointSurDroite:window.pointSurDroite,pointIntersectionDD:window.pointIntersectionDD,pointAdistance:window.pointAdistance,labelPoint:window.labelPoint,barycentre:window.barycentre,droite:window.droite,droiteParPointEtVecteur:window.droiteParPointEtVecteur,droiteParPointEtParallele:window.droiteParPointEtParallele,droiteParPointEtPerpendiculaire:window.droiteParPointEtPerpendiculaire,droiteHorizontaleParPoint:window.droiteHorizontaleParPoint,droiteVerticaleParPoint:window.droiteVerticaleParPoint,droiteParPointEtPente:window.droiteParPointEtPente,mediatrice:window.mediatrice,codageMediatrice:window.codageMediatrice,codageMilieu:window.codageMilieu,constructionMediatrice:window.constructionMediatrice,bissectrice:window.bissectrice,codageBissectrice:window.codageBissectrice,constructionBissectrice:window.constructionBissectrice,polyline:window.polyline,pave:window.pave,vecteur:window.vecteur,segment:window.segment,segmentAvecExtremites:window.segmentAvecExtremites,demiDroite:window.demiDroite,demiDroiteAvecExtremite:window.demiDroiteAvecExtremite,polygone:window.polygone,polygoneAvecNom:window.polygoneAvecNom,polygoneRegulier:window.polygoneRegulier,polygoneRegulierIndirect:window.polygoneRegulierIndirect,carre:window.carre,carreIndirect:window.carreIndirect,codageCarre:window.codageCarre,polygoneRegulierParCentreEtRayon:window.polygoneRegulierParCentreEtRayon,triangle2points2longueurs:window.triangle2points2longueurs,triangle2points2angles:window.triangle2points2angles,triangle2points1angle1longueur:window.triangle2points1angle1longueur,triangle2points1angle1longueurOppose:window.triangle2points1angle1longueurOppose,nommePolygone:window.nommePolygone,deplaceLabel:window.deplaceLabel,aireTriangle:window.aireTriangle,cercle:window.cercle,ellipse:window.ellipse,pointIntersectionLC:window.pointIntersectionLC,pointIntersectionCC:window.pointIntersectionCC,cercleCentrePoint:window.cercleCentrePoint,arc:window.arc,arcPointPointAngle:window.arcPointPointAngle,traceCompas:window.traceCompas,courbeDeBezier:window.courbeDeBezier,segmentMainLevee:window.segmentMainLevee,cercleMainLevee:window.cercleMainLevee,droiteMainLevee:window.droiteMainLevee,polygoneMainLevee:window.polygoneMainLevee,arcMainLevee:window.arcMainLevee,dansLaCibleCarree:window.dansLaCibleCarree,dansLaCibleRonde:window.dansLaCibleRonde,cibleCarree:window.cibleCarree,cibleRonde:window.cibleRonde,cibleCouronne:window.cibleCouronne,translation:window.translation,translation2Points:window.translation2Points,rotation:window.rotation,sensDeRotation:window.sensDeRotation,homothetie:window.homothetie,symetrieAxiale:window.symetrieAxiale,distancePointDroite:window.distancePointDroite,projectionOrtho:window.projectionOrtho,affiniteOrtho:window.affiniteOrtho,similitude:window.similitude,apparitionAnimee:window.apparitionAnimee,translationAnimee:window.translationAnimee,rotationAnimee:window.rotationAnimee,homothetieAnimee:window.homothetieAnimee,symetrieAnimee:window.symetrieAnimee,affiniteOrthoAnimee:window.affiniteOrthoAnimee,montrerParDiv:window.montrerParDiv,cacherParDiv:window.cacherParDiv,afficherTempo:window.afficherTempo,afficherTempoId:window.afficherTempoId,afficherUnParUn:window.afficherUnParUn,medianeTriangle:window.medianeTriangle,centreGraviteTriangle:window.centreGraviteTriangle,hauteurTriangle:window.hauteurTriangle,CodageHauteurTriangle:window.CodageHauteurTriangle,codageHauteurTriangle:window.codageHauteurTriangle,codageMedianeTriangle:window.codageMedianeTriangle,orthoCentre:window.orthoCentre,centreCercleCirconscrit:window.centreCercleCirconscrit,codageAngleDroit:window.codageAngleDroit,afficheLongueurSegment:window.afficheLongueurSegment,texteSurSegment:window.texteSurSegment,afficheMesureAngle:window.afficheMesureAngle,afficheCoteSegment:window.afficheCoteSegment,codeSegment:window.codeSegment,codeSegments:window.codeSegments,codeAngle:window.codeAngle,nomAngleSaillantParPosition:window.nomAngleSaillantParPosition,nomAngleRentrantParPosition:window.nomAngleRentrantParPosition,droiteGraduee:window.droiteGraduee,droiteGraduee2:window.droiteGraduee2,axes:window.axes,labelX:window.labelX,labelY:window.labelY,grille:window.grille,grilleHorizontale:window.grilleHorizontale,grilleVerticale:window.grilleVerticale,seyes:window.seyes,repere:window.repere,repere2:window.repere2,pointDansRepere:window.pointDansRepere,traceGraphiqueCartesien:window.traceGraphiqueCartesien,traceBarre:window.traceBarre,traceBarreHorizontale:window.traceBarreHorizontale,lectureImage:window.lectureImage,lectureAntecedent:window.lectureAntecedent,courbe:window.courbe,courbe2:window.courbe2,courbeInterpolee:window.courbeInterpolee,courbeInterpolee2:window.courbeInterpolee2,graphiqueInterpole:window.graphiqueInterpole,imageInterpolee:window.imageInterpolee,antecedentInterpole:window.antecedentInterpole,crochetD:window.crochetD,crochetG:window.crochetG,intervalle:window.intervalle,texteParPoint:window.texteParPoint,texteParPosition:window.texteParPosition,latexParPoint:window.latexParPoint,latexParCoordonnees:window.latexParCoordonnees,fractionParPosition:window.fractionParPosition,longueur:window.longueur,norme:window.norme,angle:window.angle,angleOriente:window.angleOriente,angleradian:window.angleradian,creerLutin:window.creerLutin,avance:window.avance,baisseCrayon:window.baisseCrayon,leveCrayon:window.leveCrayon,orienter:window.orienter,tournerG:window.tournerG,tournerD:window.tournerD,allerA:window.allerA,mettrexA:window.mettrexA,mettreyA:window.mettreyA,ajouterAx:window.ajouterAx,ajouterAy:window.ajouterAy,afficherCrayon:window.afficherCrayon,codeSvg:window.codeSvg,codeTikz:window.codeTikz,mathalea2d:window.mathalea2d,labyrinthe:window.labyrinthe,pavage:window.pavage,tableau:window.tableau,glisseNombre:window.glisseNombre,boite:window.boite,plot:window.plot,papierPointe:window.papierPointe,traceMilieuSegment:window.traceMilieuSegment,positionLabelDroite:window.positionLabelDroite,fixeBordures:window.fixeBordures,sensDeRotation3d:window.sensDeRotation3d,cube:window.cube,cube3d:window.cube3d,barre3d:window.barre3d,plaque3d:window.plaque3d,paveLPH3d:window.paveLPH3d,point3d:window.point3d,vecteur3d:window.vecteur3d,arete3d:window.arete3d,droite3d:window.droite3d,demicercle3d:window.demicercle3d,cercle3d:window.cercle3d,polygone3d:window.polygone3d,sphere3d:window.sphere3d,cone3d:window.cone3d,cylindre3d:window.cylindre3d,prisme3d:window.prisme3d,pave3d:window.pave3d,rotationV3d:window.rotationV3d,rotation3d:window.rotation3d,translation3d:window.translation3d,pointCliquable:window.pointCliquable}),e}();t.run(DN.getValue()),t.run("exports.anim = anim");const r=window.codeSvg(ox.fenetreMathalea2d,ox.pixelsParCm,ox.mainlevee,ox.objets2D);IN=window.anim.script(),document.getElementById("svg").innerHTML=r,document.getElementById("xmlSrc").value=IN,(0,e.default)(ON,IN,{autostart:!0}).then((e=>{document.querySelectorAll("svg.svgIep").forEach((e=>{}))})).catch((e=>{console.log(e)})),document.getElementById("telecharger")&&(CN.onclick=function(){!function(e,t){const r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(DN.getValue(),"mathalea2d.iep")}),document.getElementById("url")&&(TN.onclick=function(){const e=encodeURIComponent(DN.getValue());window.open(`/iep.html?script=${e}`)})}function qN(t){try{t.preventDefault(),t.stopPropagation();const r=document.getElementById("xmlSrc");(0,e.default)(ON,r.value,{autostart:!0}).then((e=>{document.querySelectorAll("svg.svgIep").forEach((e=>{}))})).catch((e=>{console.log(e)}))}catch(r){console.log("Plantage à l'affichage, xml probablement malformé"),console.error(r)}}RN.searchParams.get("url")?fetch(`/assets/iep/${RN.searchParams.get("url")}.iep`).then((function(e){return e.ok?e.text():`//Fichier /fichiers/iep/${RN.searchParams.get("url")}.iep non trouvé`})).then((e=>{DN.setValue(e),LN()})):RN.searchParams.get("script")?(DN.setValue(decodeURIComponent(RN.searchParams.get("script"))),LN()):window.localStorage.getItem("Script Mathalea 2D IEP")&&(DN.setValue(window.localStorage.getItem("Script Mathalea 2D IEP")),MN.click()),DN.on("inputRead",(function(e,t){";"!==t.text[0]&&" "!==t.text[0]&&r().commands.autocomplete(e,null,{completeSingle:!1})})),MN.addEventListener("click",LN);document.getElementById("previewBtn").addEventListener("click",qN,!1);const $N=document.getElementById("xmlSrc");$N.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),!1),$N.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault();try{const t=e.dataTransfer.files;if(t&&t[0]){const e=t[0];if(console.log("On récupère le fichier ",e.name),".xml"===e.name.substr(-4)){const t=new FileReader;t.onload=function(e){document.getElementById("xmlSrc").value=e.target.result,qN(e)},t.readAsText(e)}else console.log("On ne gère que les fichiers xml")}}catch(t){console.log("Plantage à la récupération du fichier"),console.log(t)}}),!1)})()})();
//# sourceMappingURL=mathalea2iep.e774e39ecc960ac6d941.js.map