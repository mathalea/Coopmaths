(self.webpackChunkmathalea=self.webpackChunkmathalea||[]).push([[70420],{70420:function(e,t,i){!function(e){"use strict";function t(e){const t=[];for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(13===n&&10===e.charCodeAt(i+1)&&(n=10,i++),13!==n&&12!==n||(n=10),0===n&&(n=65533),n>=55296&&n<=56319){const t=e.charCodeAt(i+1);if(t>=56320&&t<=57343){const e=n-55296,r=t-56320;n=Math.pow(2,16)+e*Math.pow(2,10)+r,i++}}t.push(n)}return t}const n=8205,r=[[n,1],[65038,2],[127995,5],[129456,4],[917536,96]];let s;const o=[127462,127487];function a(e){var t;return void 0===s&&(s={},r.forEach((e=>{for(let t=e[0];t<=e[0]+e[1]-1;t++)s[t]=!0}))),null!==(t=s[e])&&void 0!==t&&t}function l(e){return e>=o[0]&&e<=o[1]}function u(e){if(/^[\x20-\xFF]*$/.test(e))return e;const i=[],r=t(e);let s=0;for(;s<r.length;){const e=r[s++],t=r[s];if(t===n){const e=s-1;for(s+=2;r[s]===n;)s+=2;i.push(String.fromCodePoint(...r.slice(e,s-e+1)))}else if(a(t)){const e=s-1;for(;a(r[s]);)s+=r[s]===n?2:1;i.push(String.fromCodePoint(...r.slice(e,s-e)))}else l(e)?(s+=1,i.push(String.fromCodePoint(...r.slice(s-2,2)))):i.push(String.fromCodePoint(e))}return i}class c{constructor(e){this.obeyspaces=!1,this.s=u(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let t;return t="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join("")),(null==t?void 0:t[0])?(this.pos+=t[0].length,t[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/))return"<space>";if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";const e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z*]+/);if(e)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(e=this.get()," "===e)return"<space>";return"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();const e=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(e)return String.fromCodePoint(parseInt(e.slice(e.lastIndexOf("^")+1),16))}return e}if("#"===e){if(!this.end()){let e=!1;if(/[0-9?]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){const t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}}function g(e,t){var i,n,r,s;let o=[],a=e.next();if(a)if("\\relax"===a);else if("\\noexpand"===a)a=e.next(),a&&o.push(a);else if("\\obeyspaces"===a)e.obeyspaces=!0;else if("\\space"===a||"~"===a)o.push("<space>");else if("\\bgroup"===a)o.push("<{>");else if("\\egroup"===a)o.push("<}>");else if("\\string"===a)a=e.next(),a&&("\\"===a[0]?Array.from(a).forEach((e=>o.push("\\"===e?"\\backslash":e))):"<{>"===a?o.push("\\{"):"<space>"===a?o.push("~"):"<}>"===a&&o.push("\\}"));else if("\\csname"===a){for(;"<space>"===e.peek();)e.next();let r="",s=!1,l=[];do{if(0===l.length)if(/^#[0-9?]$/.test(e.peek())){const r=e.get().slice(1);l=f(null!==(n=null!==(i=null==t?void 0:t[r])&&void 0!==i?i:null==t?void 0:t["?"])&&void 0!==n?n:"\\placeholder{}",t),a=l[0]}else a=e.next(),l=a?[a]:[];s=0===l.length,s||"\\endcsname"!==a||(s=!0,l.shift()),s||(s="<$>"===a||"<$$>"===a||"<{>"===a||"<}>"===a||a.length>1&&"\\"===a[0]),s||(r+=l.shift())}while(!s);r&&o.push("\\"+r),o=o.concat(l)}else if("\\endcsname"===a);else if(a.length>1&&"#"===a[0]){const e=a.slice(1);o=o.concat(f(null!==(s=null!==(r=null==t?void 0:t[e])&&void 0!==r?r:null==t?void 0:t["?"])&&void 0!==s?s:"\\placeholder{}",t))}else o.push(a);return o}function f(e,t){const i=e.toString().split(/\r?\n/);let n="",r="";for(const a of i){n+=r,r=" ";const e=a.match(/((?:\\%)|[^%])*/);null!==e&&(n+=e[0])}const s=new c(n);let o=[];do{o=o.concat(g(s,t))}while(!s.end());return o}function p(e){let t="",i="";for(const n of e)n&&(/[a-zA-Z*]/.test(n[0])&&(i+=t),t=/\\[a-zA-Z]+\*?$/.test(n)?" ":"",i+=n);return i}function h(e){let t=[];if(Array.isArray(e))for(const i of e)Array.isArray(i)?t=[...t,...i]:t.push(i);else t=[e];return p(t.map((e=>{var t;return null!==(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])&&void 0!==t?t:e})))}const m=[{name:"NotLess",trigger:{infix:["!","<"]},associativity:"right",precedence:246},{name:"NotLess",trigger:{infix:"\\nless"},associativity:"right",precedence:246},{name:"Less",trigger:{infix:"<"},associativity:"right",precedence:245},{name:"Less",trigger:{infix:"\\lt"},associativity:"right",precedence:245},{name:"LessEqual",trigger:{infix:["<","="]},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\le"},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\leq"},associativity:"right",precedence:241},{name:"LessEqual",trigger:{infix:"\\leqslant"},associativity:"right",precedence:265},{name:"LessNotEqual",trigger:{infix:"\\lneqq"},associativity:"right",precedence:260},{name:"NotLessNotEqual",trigger:{infix:"\\nleqq"},associativity:"right",precedence:260},{name:"LessOverEqual",trigger:{infix:"\\leqq"},associativity:"right",precedence:265},{name:"GreaterOverEqual",trigger:{infix:"\\geqq"},associativity:"right",precedence:265},{name:"Equal",trigger:{infix:"="},associativity:"right",precedence:260},{name:"StarEqual",trigger:{infix:["*","="]},associativity:"right",precedence:260},{name:"StarEqual",trigger:{infix:["\\star","="]},associativity:"right",precedence:260},{name:"PlusEqual",trigger:{infix:["+","="]},associativity:"right",precedence:260},{name:"MinusEqual",trigger:{infix:["-","="]},associativity:"right",precedence:260},{name:"SlashEqual",trigger:{infix:["/","="]},associativity:"right",precedence:260},{name:"EqualEqual",trigger:{infix:["=","="]},associativity:"right",precedence:260},{name:"EqualEqualEqual",trigger:{infix:["=","=","="]},associativity:"right",precedence:265},{name:"TildeFullEqual",trigger:{infix:"\\cong"},associativity:"right",precedence:260},{name:"NotTildeFullEqual",trigger:{infix:"\\ncong"},associativity:"right",precedence:260},{name:"Assign",trigger:{infix:[":","="]},associativity:"right",precedence:260},{name:"Assign",trigger:{infix:"\\coloneq"},associativity:"right",precedence:260},{name:"Approx",trigger:{infix:"\\approx"},associativity:"right",precedence:247},{name:"NotApprox",trigger:{infix:"\\approx"},associativity:"right",precedence:247},{name:"ApproxEqual",trigger:{infix:"\\approxeq"},associativity:"right",precedence:260},{name:"NotApproxEqual",trigger:{infix:["!","\\approxeq"]},associativity:"right",precedence:250},{name:"NotEqual",trigger:{infix:"\\ne"},associativity:"right",precedence:255},{name:"Unequal",trigger:{infix:["!","="]},associativity:"right",precedence:260},{name:"GreaterEqual",trigger:{infix:"\\ge"},associativity:"right",precedence:242},{name:"GreaterEqual",trigger:{infix:"\\geq"},associativity:"right",precedence:242},{name:"GreaterEqual",trigger:{infix:[">","="]},associativity:"right",precedence:243},{name:"GreaterEqual",trigger:{infix:"\\geqslant"},associativity:"right",precedence:265},{name:"GreaterNotEqual",trigger:{infix:"\\gneqq"},associativity:"right",precedence:260},{name:"NotGreaterNotEqual",trigger:{infix:"\\ngeqq"},associativity:"right",precedence:260},{name:"Greater",trigger:{infix:">"},associativity:"right",precedence:245},{name:"Greater",trigger:{infix:"\\gt"},associativity:"right",precedence:245},{name:"NotGreater",trigger:{infix:"\\ngtr"},associativity:"right",precedence:244},{name:"NotGreater",trigger:{infix:["!",">"]},associativity:"right",precedence:244},{name:"RingEqual",trigger:{infix:"\\circeq"},associativity:"right",precedence:260},{name:"TriangleEqual",trigger:{infix:"\\triangleq"},associativity:"right",precedence:260},{name:"DotEqual",trigger:{infix:"\\doteq"},associativity:"right",precedence:265},{name:"DotEqualDot",trigger:{infix:"\\doteqdot"},associativity:"right",precedence:265},{name:"FallingDotEqual",trigger:{infix:"\\fallingdotseq"},associativity:"right",precedence:265},{name:"RisingDotEqual",trigger:{infix:"\\fallingdotseq"},associativity:"right",precedence:265},{name:"QuestionEqual",trigger:{infix:"\\questeq"},associativity:"right",precedence:260},{name:"Equivalent",trigger:{infix:"\\equiv"},associativity:"right",precedence:260},{name:"MuchLess",trigger:{infix:"\\ll"},associativity:"right",precedence:260},{name:"MuchGreater",trigger:{infix:"\\gg"},associativity:"right",precedence:260},{name:"Precedes",trigger:{infix:"\\prec"},associativity:"right",precedence:260},{name:"Succeeds",trigger:{infix:"\\succ"},associativity:"right",precedence:260},{name:"PrecedesEqual",trigger:{infix:"\\preccurlyeq"},associativity:"right",precedence:260},{name:"SucceedsEqual",trigger:{infix:"\\curlyeqprec"},associativity:"right",precedence:260},{name:"NotPrecedes",trigger:{infix:"\\nprec"},associativity:"right",precedence:260},{name:"NotSucceeds",trigger:{infix:"\\nsucc"},associativity:"right",precedence:260},{name:"ElementOf",trigger:{infix:"\\in"},associativity:"right",precedence:240},{name:"NotElementOf",trigger:{infix:"\\notin"},associativity:"right",precedence:240},{name:"Contains",trigger:{infix:"\\ni"},associativity:"right",precedence:160},{name:"Subset",trigger:{infix:"\\subset"},associativity:"right",precedence:240},{name:"SquareSubset",trigger:{infix:"\\sqsubset"},associativity:"right",precedence:265},{name:"SquareSubsetEqal",trigger:{infix:"\\sqsubseteq"},associativity:"right",precedence:265},{name:"Superset",trigger:{infix:"\\supset"},associativity:"right",precedence:240},{name:"SquareSuperset",trigger:{infix:"\\sqsupset"},associativity:"right",precedence:265},{name:"SquareSupersetEuqal",trigger:{infix:"\\sqsupseteq"},associativity:"right",precedence:265},{name:"NotSubset",trigger:{infix:"\\nsubset"},associativity:"right",precedence:240},{name:"NotSuperset",trigger:{infix:"\\nsupset"},associativity:"right",precedence:240},{name:"SubsetEqual",trigger:{infix:"\\subseteq"},associativity:"right",precedence:240},{name:"SupersetEqual",trigger:{infix:"\\supseteq"},associativity:"right",precedence:240},{name:"NotSubsetNotEqual",trigger:{infix:"\\nsubseteq"},associativity:"right",precedence:240},{name:"NotSupersetNotEqual",trigger:{infix:"\\nsupseteq"},associativity:"right",precedence:240},{name:"SubsetNotEqual",trigger:{infix:"\\subsetneq"},associativity:"right",precedence:240},{name:"SupersetNotEqual",trigger:{infix:"\\supsetneq"},associativity:"right",precedence:240},{name:"SubsetNotEqual",trigger:{infix:"\\varsupsetneqq"},associativity:"right",precedence:240},{name:"SupersetNotEqual",trigger:{infix:"\\varsupsetneq"},associativity:"right",precedence:240},{name:"Between",trigger:{infix:"\\between"},associativity:"right",precedence:265}],d="Parentheses",b="Identity",y="LatexTokens",v="List",x="Missing",S="Nothing",N="Sequence",k="Sequence2",w="Add",E="Derivative",A="Divide",F="Exp",_="InverseFunction",q="Multiply",M="Negate",O="Power",C="Prime",z="Root",L="Sqrt",D="Subtract",U="ComplexInfinity",P="Pi",T="ExponentialE",I="ImaginaryI";function R(e){return Boolean(e)&&"object"==typeof e&&"num"in e}function $(e){return Boolean(e)&&"object"==typeof e&&"sym"in e}function j(e){return Boolean(e)&&"object"==typeof e&&"str"in e}function B(e){return Boolean(e)&&"object"==typeof e&&"fn"in e}function Q(e){return"number"==typeof e?e:R(e)?parseFloat(e.num):null}function G(e){return"object"==typeof e&&"str"in e?e.str:"string"!=typeof e||e.length<2||"'"!==e[0]||"'"!==e[e.length-1]?null:e.substring(1,e.length-1)}function H(e){var t,i,n,r,s;let o=NaN,a=NaN;if("number"==typeof e)o=e,a=1;else if(R(e))o=null!==(t=Q(e))&&void 0!==t?t:NaN,a=1;else{if(W(e))return null;{const t=V(e);if(t===O){const t=Q(ee(e,2));if(1===t)o=Q(ee(e,1)),a=1;else{if(-1!==t)return null;o=1,a=Q(ee(e,1))}}else t===A?(o=null!==(i=Q(ee(e,1)))&&void 0!==i?i:NaN,a=null!==(n=Q(ee(e,2)))&&void 0!==n?n:NaN):t===q&&V(ee(e,2))===O&&-1===Q(ee(ee(e,2),2))&&(o=null!==(r=Q(ee(e,1)))&&void 0!==r?r:NaN,a=null!==(s=Q(ee(ee(e,2),1)))&&void 0!==s?s:NaN)}}return Number.isInteger(o)&&Number.isInteger(a)?(a<0&&(a=-a,o=-o),[o,a]):null}function Z(e){return Array.isArray(e)?e[0]:B(e)?e.fn[0]:null}function W(e){return null===e||!Array.isArray(e)&&("object"!=typeof e||!("fn"in e))}function V(e){const t=Z(e);return"string"==typeof t?t:""}function K(e){return"string"==typeof e?e.length>=2&&"'"===e[0]&&"'"===e[e.length-1]?null:e:$(e)?e.sym:null}function J(e){return Array.isArray(e)?e.slice(1):B(e)?e.fn.slice(1):[]}function X(e,t){return Array.isArray(e)?e.map(((e,i)=>0===i?e:t(e))):B(e)?e.fn.map(((e,i)=>0===i?e:t(e))):e}function Y(e,t){let i=null;if(Array.isArray(e)&&(i=e),B(e)&&(i=e.fn),null===i)return[];let n=1;const r=[];for(;n<i.length;)r.push(t(i[n])),n+=1;return r}function ee(e,t){return Array.isArray(e)?e[t]:B(e)?e.fn[t]:null}function te(e){return Array.isArray(e)?Math.max(0,e.length-1):B(e)?Math.max(0,e.fn.length-1):0}function ie(e){var t;const i=H(e);if(null!==i){const[e,t]=i;if(!Number.isNaN(e)&&!Number.isNaN(t))return 0===e?"NumberZero":1!==t?"RationalNumber":re.has(e)?"PrimeNumber":e>=1&&e<se?"CompositeNumber":e>0?"NaturalNumber":"Integer"}return e===U?"ComplexInfinity":V(e)===O&&V(ee(e,2))===A&&1===ee(ee(e,2),1)&&2===ee(ee(e,2),2)&&re.has(Q(ee(e,1)))?"IrrationalNumber":Number.isFinite(null!==(t=Q(e))&&void 0!==t?t:NaN)?"RealNumber":"SignedInfinity"}function ne(e){return"object"==typeof e&&"dict"in e?e.dict:null}const re=new Set([2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919]),se=7919,oe=[{name:"Overscript",trigger:{infix:"\\overset"},precedence:700},{name:"Underscript",trigger:{infix:"\\underset"},precedence:700},{name:"Increment",trigger:{postfix:["+","+"]},precedence:880},{name:"Decrement",trigger:{postfix:["-","-"]},precedence:880},{name:"PreIncrement",trigger:{prefix:["+","+"]},precedence:880},{name:"PreDecrement",trigger:{prefix:["-","-"]},precedence:880},{name:"Ring",trigger:{infix:"\\circ"},precedence:265},{name:"Transpose",trigger:{superfix:"T"}},{name:"ConjugateTranspose",trigger:{superfix:"H"}},{name:"StringJoin",trigger:{infix:["\\lt","\\gt"]},precedence:780},{name:"Starstar",trigger:{infix:["\\star","\\star"]},precedence:780},{name:"PartialDerivative",trigger:{prefix:"\\partial"},parse:(e,t,i)=>{var n;let r=!1,s=S,o=S;for(;!r;)t.skipSpace(),t.match("_")?o=t.matchRequiredLatexArgument():t.match("^")?s=t.matchRequiredLatexArgument():r=!0;V(o)===N&&(o=[v,...J(o)]);let a=null!==(n=t.matchRequiredLatexArgument())&&void 0!==n?n:S;return a!==S&&(a=[a,...t.matchArguments("group")]),[null,["PartialDerivative",a,o,s]]},serialize:(e,t)=>{let i="\\partial";const n=ee(t,1),r=ee(t,2),s=ee(t,3);return null!==r&&r!==S&&(Z(r)===v?i+="_{"+e.serialize([N,...J(r)])+"}":i+="_{"+e.serialize(r)+"}"),null!==s&&s!==S&&(i+="^{"+e.serialize(s)+"}"),null!==n&&n!==S&&(i+=e.serialize(n)),i},precedence:740},{name:"OverBar",trigger:{symbol:"\\overline"},requiredLatexArg:1},{name:"UnderBar",trigger:{symbol:"\\underline"},requiredLatexArg:1},{name:"OverVector",trigger:{symbol:"\\vec"},requiredLatexArg:1},{name:"OverTile",trigger:{symbol:"\\tilde"},requiredLatexArg:1},{name:"OverHat",trigger:{symbol:"\\hat"},requiredLatexArg:1},{name:"OverHat",trigger:{symbol:"\\hat"},requiredLatexArg:1},{name:"OverRightArrow",trigger:{symbol:"\\overrightarrow"},requiredLatexArg:1},{name:"OverLeftArrow",trigger:{symbol:"\\overleftarrow"},requiredLatexArg:1},{name:"OverRightDoubleArrow",trigger:{symbol:"\\Overrightarrow"},requiredLatexArg:1},{name:"OverLeftHarpoon",trigger:{symbol:"\\overleftharpoon"},requiredLatexArg:1},{name:"OverRightHarpoon",trigger:{symbol:"\\overrightharpoon"},requiredLatexArg:1},{name:"OverLeftRightArrow",trigger:{symbol:"\\overleftrightarrow"},requiredLatexArg:1},{name:"OverBrace",trigger:{symbol:"\\overbrace"},requiredLatexArg:1},{name:"OverLineSegment",trigger:{symbol:"\\overlinesegment"},requiredLatexArg:1},{name:"OverGroup",trigger:{symbol:"\\overgroup"},requiredLatexArg:1}];function ae(e,t){return"paren"}function le(e,t){return"paren"}function ue(e,t){return t>1?"solidus":"radical"}function ce(e,t){return t>3?"inline-solidus":"quotient"}function ge(e){return"<space>"===e||"\\qquad"===e||"\\quad"===e||"\\enskip"===e||"\\;"===e||"\\,"===e||"\\ "===e||"~"===e}function fe(e,t,i){return(n,r,s)=>{if(s>=t)return[n,null];r.skipSpace(),r.match(i);const o=[e,null!=n?n:S];let a=!1;for(;!a;){for(a=!0,r.skipSpace();r.match(i);)o.push(S),r.skipSpace();if(r.atEnd)o.push(S);else{const e=r.matchExpression(t);o.push(null!=e?e:S),a=null===e}a||(r.skipSpace(),a=!r.match(i))}return[null,o]}}function pe(e){return(t,i)=>J(i).map((e=>t.serialize(e))).join(e)}function he(e,t){return console.assert(Z(t)===y),J(t).map((t=>{const i=G(t);return null===i?e.serialize(t):"<{>"===i?"{":"<}>"===i?"}":"<$>"===i?"$":"<$$>"===i?"$$":"<space>'"===i?" ":i})).join("")}const me=[{name:y,serialize:he},{name:d,trigger:{matchfix:"("},parse:(e,t,i)=>{var n;const r=t.index;if(!t.match("("))return[e,null];let s=!1,o=!0,a=!1,l=0,u="";for(;!s&&o;){const e=t.next();t.atEnd||")"===e?s=!0:"\\mathtt"===e?(t.match("<{>"),a=!0):ge(e)||(/^[0-9a-zA-Z]$/.test(e)?(l=Math.max(l,parseInt(e,36)),u+=e):o=!1),a&&t.match("<}>")}if(t.skipSpace(),o&&t.match("_")){const i=null!==(n=Q(t.matchRequiredLatexArgument()))&&void 0!==n?n:NaN;return!isFinite(i)||i<2||i>36||l>=i?(t.onError({code:"base-out-of-range"}),[e,S]):[e,["BaseForm",parseInt(u,i),i]]}t.index=r;const c=t.matchBalancedExpression("(",")",t.onError);return c?V(c)===N?[e,[d,...J(c)]]:[e,[d,c]]:[e,[d]]},serialize:(e,t)=>e.wrapString(pe(",")(e,t),le(t,e.level)),separator:",",closeFence:")",precedence:20},{name:v,trigger:{matchfix:"\\lbrack"},separator:",",closeFence:"\\rbrack",precedence:20,parse:(e,t,i)=>{if(null===e){const i=t.matchBalancedExpression("\\lbrack","\\rbrack",t.onError);return i?V(i)===N?[e,[v,...J(i)]]:[e,[v,i]]:[null,[v]]}return[e,null]}},{name:"BaseForm",serialize:(e,t)=>{var i,n;const r=null!==(i=Q(ee(t,2)))&&void 0!==i?i:NaN;if(isFinite(r)&&r>=2&&r<=36){const e=null!==(n=Q(ee(t,1)))&&void 0!==n?n:NaN;if(isFinite(e)){let t=Number(e).toString(r),i=0;if(2===r||10===r?i=4:16===r?i=2:r>16&&(i=4),i>0){const e=t;t="";for(let n=0;n<e.length;n++)n>0&&n%i==0&&(t="\\, "+t),t=e[e.length-n-1]+t}return`(\\mathtt{${t}})_{${r}}`}}return"\\operatorname{BaseForm}("+e.serialize(ee(t,1))+", "+e.serialize(ee(t,2))+")"}},{name:"Set",trigger:{matchfix:"\\lbrace"},separator:",",closeFence:"\\rbrace",precedence:20},{name:N,trigger:{infix:","},parse:fe(N,20,","),serialize:pe(", "),precedence:20},{name:k,trigger:{infix:";"},parse:fe(k,19,";"),serialize:pe("; "),precedence:19},{name:x,trigger:"\\placeholder",serialize:"\\placeholder",requiredLatexArg:1},{name:"Subscript",trigger:{infix:"_"},precedence:720,serialize:(e,t)=>2===te(t)?e.serialize(ee(t,1))+"_{"+e.serialize(ee(t,2))+"}":"_{"+e.serialize(ee(t,1))+"}",parse:(e,t,i)=>{const n=t.matchRequiredLatexArgument();return e?[null,["Subscript",e,n]]:[null,["Subscript",n]]}},{name:"Superplus",trigger:{superfix:"+"}},{name:"Subplus",trigger:{subfix:"+"}},{name:"Superminus",trigger:{superfix:"-"}},{name:"Subminus",trigger:{subfix:"-"}},{name:"Superstar",trigger:{superfix:"*"}},{name:"Superstar",trigger:{superfix:"\\star"}},{name:"Substar",trigger:{subfix:"*"}},{name:"Substar",trigger:{subfix:"\\star"}},{name:"Superdagger",trigger:{superfix:"\\dagger"}},{name:"Superdagger",trigger:{superfix:"\\dag"}},{name:C,trigger:{superfix:"\\prime"},arguments:"group"},{trigger:{superfix:"\\doubleprime"},parse:(e,t)=>[null,[C,null!=e?e:S,2]],arguments:"group"},{name:_,serialize:(e,t)=>e.serialize(ee(t,1))+"^{-1}"},{name:E,trigger:"D",parse:(e,t)=>[e,[E,1]],serialize:(e,t)=>{var i;const n=null!==(i=Q(ee(t,1)))&&void 0!==i?i:NaN;if(!isFinite(n))return"";const r=e.serialize(ee(t,2));return 1===n?r+"^{\\prime}":2===n?r+"^{\\doubleprime}":r+"^{("+Number(n).toString()+")}"}},{name:"Piecewise",trigger:{environment:"cases"},parse:(e,t)=>[e,["Piecewise",t.matchTabular()]],serialize:(e,t)=>{if(V(ee(t,1))!==v)return"";const i=J(ee(t,1));let n="",r="";for(const s of i){n+=r;const t=ee(s,1);if(null!==t){n+=e.serialize(t);const i=ee(s,2);null!==i&&(n+="&"+e.serialize(i))}r="\\\\"}return"\\begin{cases}"+n+"\\end{cases}"}}];function de(e,t){const i=ve(e),n=ve(t);if(i<n)return-1;if(i>n)return 1;let r=Se(e);isNaN(r)&&(r=Number(1/0));let s=Se(t);if(isNaN(s)&&(s=Number(1/0)),r<s)return-1;if(r>s)return 1;const o=xe(e),a=xe(t);if(o===a)for(let l=1;l<=o;l++){const i=de(ee(e,l),ee(t,l));if(0!==i)return i}return a-o}function be(e,t){var i;if(0===e)return-1/0;const n=V(e);if(n===O){const t=null!==(i=Q(ee(e,2)))&&void 0!==i?i:NaN;return isFinite(t)?t:0}if(n===q){let i=0;return J(e).forEach((e=>{i+=be(e,t)})),i}return t.includes(K(e))?1:0}function ye(e,t){var i;const n=V(e);if(n===O){if(K(ee(e,1))===t){const t=null!==(i=Q(ee(e,2)))&&void 0!==i?i:NaN;if(isFinite(t))return t}return 0}if(n===q){let i=0;for(const n of J(e))i+=ye(n,t);return i}return K(e)===t?1:0}function ve(e){return"string"==typeof e?e:$(e)?e.sym:Z(e)?J(e).map(ve).join(" "):""}function xe(e){return Z(e)?J(e).map(xe).reduce(((e,t)=>e+t),0):"string"==typeof e||K(e)?1:0}function Se(e){var t;return Z(e)?NaN:"number"==typeof e?e:R(e)?null!==(t=Q(e))&&void 0!==t?t:NaN:0}function Ne(e,t,i){const n=be(e,i),r=be(t,i);if(n<r)return 1;if(n>r)return-1;for(const a of i){const i=ye(e,a),n=ye(t,a);if(i!==n)return n-i}const s=ve(e),o=ve(t);return s>o?-1:s<o?1:de(e,t)}function ke(e,t,i){var n;let r=J(i);if(0===r.length)return i;r=r.map((i=>ke(e,t,i)));const s=V(i);if(s===w)r.sort(((e,i)=>Ne(e,i,t)));else{const t=e.getFunctionDefinition(s);null!==(n=null==t?void 0:t.commutative)&&void 0!==n&&n&&r.sort(de)}return[Z(i),...r]}function we(e){const t=Z(e);return t?t===d&&1===te(e)?we(ee(e,1)):X(e,we):e}function Ee(e){if(null===e)return null;const t=Z(e=we(e));return t===O&&2===te(e)?[O,ee(e,1),Ae(ee(e,2))]:t===A&&2===te(e)?[q,[O,ee(e,1),-1],ee(e,2)]:[O,e,-1]}function Ae(e){if(null===e)return e;if("number"==typeof(e=we(e)))e=-e;else if(e&&R(e))e="-"===e.num[0]?{num:e.num.slice(1)}:{num:"-"+e.num};else{const t=V(e),i=te(e);if(t===M&&1===i)return ee(e,1);if(t===q){let t=ee(e,1);return t="number"==typeof t?-t:R(t)?"-"===t.num[0]?{num:t.num.slice(1)}:{num:"-"+t.num}:[M,t],[q,t,...J(e).slice(1)]}if(t===d&&1===i)return Ae(ee(ee(e,1),1));e=[M,e]}return e}function Fe(e,t){const i=Z(e);if(!i)return e;if(e=X(e,(e=>Fe(e,t))),i!==t)return e;const n=J(e);let r=[];for(let s=0;s<n.length;s++)V(n[s])===t?r=r.concat(J(n[s])):r.push(n[s]);return[i,...r]}function _e(e,t){const i=V(e),n=t.getFunctionDefinition(i);if(null==n?void 0:n.involution){const t=J(e);if(1===t.length&&V(t[0])===i)return Fe(t[0],i)}return X(e,(e=>_e(e,t)))}function qe(e,t){const i=V(e),n=t.getFunctionDefinition(i);return(null==n?void 0:n.idempotent)?Fe(e,i):X(e,(e=>qe(e,t)))}function Me(e,t){const i=V(e),n=t.getFunctionDefinition(i);return(null==n?void 0:n.associative)?Fe(e,i):X(e,(e=>Me(e,t)))}function Oe(e,t){const i=Z(e);if(!i)return e;if(i!==w)return X(e,(e=>Oe(e)));let n=J(e=Fe(we(e),w));n=n.map((e=>Oe(e))).filter((e=>0!==Q(e)));const r=n.length;return 0===r?0:1===r?n[0]:[w,...n]}function Ce(e,t){const i=Z(e);if(!i)return e;if(i!==A)return X(e,(e=>Ce(e)));if(2!==te(e))return e;const n=Ce(ee(e,1)),r=Ce(ee(e,2));return 1===Q(r)?n:1===Q(n)?Ee(r):[q,n,Ee(r)]}function ze(e,t){const i=Z(e);return i?i!==F?X(e,(e=>ze(e))):1!==te(e)?e:[O,T,ze(ee(e,1))]:e}function Le(e,t){var i;if(W(e))return e;const n=V(e);if(n!==v&&n!==N&&n!==k)return X(e,(e=>Le(e,t)));const r=n===v,s=J(e),o=[];if(r){for(let e of s){e=Le(e,t);const i=V(e);if(i===b){const t=ee(e,1);null!=t&&o.push(t)}else i!==S&&o.push(e)}return[v,...o]}const a=t.getFunctionDefinition(n),l=null!==(i=null==a?void 0:a.sequenceHold)&&void 0!==i&&i;for(let u of s){u=Le(u,t);const i=V(u);if(i===b){const e=ee(u,1);null!=e&&o.push(e)}else if(i!==n||l)o.push(u);else{const t=Z(e);for(const e of J(u))V(e)===i?o.push([t,...J(e)]):o.push(e)}}return[Z(e),...o]}function De(e){var t,i;const n=V(e);if(n===L)return 2;if(n===z)return null!==(t=Q(ee(e,2)))&&void 0!==t?t:NaN;if(n!==O)return 1;const r=ee(e,2);if(!r)return 1;if(V(r)===O&&-1===Q(ee(r,2))){const e=null!==(i=Q(ee(r,1)))&&void 0!==i?i:NaN;if(isFinite(e))return e}return 1}function Ue(e){const t=J(e),i=[],n=[];for(const r of t)2===De(r)?i.push(ee(r,1)):n.push(r);return[i,n]}function Pe(e,t){var i;const n=Z(e);if(!n)return e;if(e=X(e,(e=>Pe(e))),n!==q)return e;e=Fe(we(e),q);const[r,s]=Ue(e);let o;o=0===r.length?s:1===r.length?J(e=[q,...s,[O,r[0],[O,2,-1]]]):J(e=[q,...s,[O,[q,...r],[O,2,-1]]]);let a=!1,l=!1;if(o=o.map((e=>{var t;if(V(e)===M)return l=!0,a=!a,ee(e,1);const i=null!==(t=Q(e))&&void 0!==t?t:NaN;return i<0?(l=!0,a=!a,-i):e})),a){const e=null!==(i=Q(o[0]))&&void 0!==i?i:NaN;o=isFinite(e)?J(Fe([q,-e,...o.slice(1)],q)):J(Fe([q,-1,...o],q))}else o=J(Fe([q,...o],q));return o=o.filter((e=>1!==Q(e))),0===o.length?1:1===o.length?o[0]:[q,...o]}function Te(e,t){var i,n;const r=Z(e);if(!r)return e;if(r!==O)return X(e,(e=>Te(e)));if(2!==te(e=we(e)))return e;const s=Te(ee(e,1)),o=null!==(i=Q(s))&&void 0!==i?i:NaN,a=null!==(n=Q(Te(ee(e,2))))&&void 0!==n?n:NaN;return 0===a?1:1===a?s:-1===o&&-1===a?-1:1===o&&-1===a||1===o?1:e}function Ie(e,t){const i=Z(e);if(i===M){const t=ee(e=we(e),1);if("number"==typeof t)e=-t;else{if(!t||!R(t)){if(V(t)===q){let e=ee(t,1);if("number"==typeof e)e=-e;else{if(!R(e))return[q,-1,e,...J(t).slice(1)];e="-"===e.num[0]?{num:e.num.slice(1)}:{num:"-"+e.num}}return[q,e,...J(t).slice(1)]}return[q,-1,t]}if(0===Q(t))return 0;e="-"===t.num[0]?{num:t.num.slice(1)}:"+"===t.num[0]?{num:"-"+t.num.slice(1)}:{num:"-"+t.num}}}else if(i)return X(e,(e=>Ie(e)));return e}function Re(e,t){if(Z(e))return X(e,(e=>Re(e)));if("number"==typeof e){if(isNaN(e))return{num:"NaN"};if(!isFinite(e)&&e>0)return{num:"Infinity"};if(!isFinite(e)&&e<0)return{num:"-Infinity"}}else if(R(e)){if(isNaN(Number(e.num)))return{num:"NaN"};if(e.num.endsWith("n"))return{num:e.num.slice(0,-1)}}return e}function $e(e,t){const i=Z(e);if(!i)return e;if(i!==D)return X(e,(e=>$e(e)));if(2!==te(e))return e;const n=$e(ee(e,1)),r=Q(n),s=$e(ee(e,2)),o=Q(s);return 0===r&&0===o?0:$e([w,n,Ae(s)])}function je(e,t){const i=Z(e);if(!i)return e;if(i!==z&&i!==L)return X(e,(e=>je(e)));if(te(e)<1)return e;const n=je(ee(e,1));let r=2;return te(e)>1&&(r=Te(ee(e,2))),1===Q(r)?n:[O,n,[A,1,r]]}function Be(e){if("string"==typeof e){const t=Number(e);if("+"===e[0]&&(e=e.slice(1)),t.toString()===e)return isNaN(t)||!isFinite(t)?t.toString():t}return e}function Qe(e,t){if(null===e)return null;if(Array.isArray(e))return e.map(((e,t)=>0===t?e:Qe(e)));if("object"==typeof e)if(1===Object.keys(e).length){if(R(e)){const t=Be(e.num);return"number"==typeof t?t:{num:t}}if(B(e))return e.fn.map((e=>Qe(e)));if($(e))return e.sym}else B(e)&&(e.fn=e.fn.map((e=>Qe(e))));return e}function Ge(e,t){if("number"==typeof e||"string"==typeof e)return e;if(Array.isArray(e))return e.map((e=>Ge(e)));if("object"==typeof e){if("num"in e){const t=Be(e.num);return"number"==typeof t?t:{num:t}}if("fn"in e)return e.fn.map((e=>Ge(e)));if("dict"in e)return{dict:Object.fromEntries(Object.entries(e.dict).map((e=>[e[0],Ge(e[1])])))}}return null}function He(e,t){return"number"==typeof e?{num:e.toString()}:"string"==typeof e?{sym:e}:Array.isArray(e)&&e.length>0?{fn:e.map((e=>He(e)))}:"object"==typeof e&&"fn"in e?Object.assign(Object.assign({},e),{fn:e.fn.map((e=>He(e)))}):e}function Ze(e,t){const i=t.getVars(e);return ke(t,Array.from(i).sort(),e)}function We(e,t){return e}function Ve(e,t){return t.format(e,["canonical-number","canonical-exp","canonical-root","canonical-subtract","canonical-divide","canonical-power","canonical-multiply","canonical-negate","canonical-add","flatten","canonical-list","canonical-domain","sorted","full"])}function Ke(e,t){return Me(qe(_e(e,t),t),t)}function Je(e,t,i){let n=e;for(const r of t){const e={canonical:Ve,"canonical-add":Oe,"canonical-divide":Ce,"canonical-exp":ze,"canonical-list":Le,"canonical-multiply":Pe,"canonical-power":Te,"canonical-negate":Ie,"canonical-number":Re,"canonical-root":je,"canonical-subtract":$e,full:Qe,flatten:Ke,sorted:Ze,"stripped-metadata":Ge,"object-literal":He,"canonical-domain":We}[r];if(!e)return console.error("Unknown form "+r),null;n=e(n,i)}return n}function Xe(e){var t;if(V(e)!==q)return[null,null];const i=[],n=[],r=J(e);for(const s of r)if(V(s)===O)if(V(ee(s,2))===M)n.push([O,ee(s,1),ee(ee(s,2),1)]);else{const e=null!==(t=Q(ee(s,2)))&&void 0!==t?t:NaN;-1===e?n.push(ee(s,1)):e<0?n.push([O,ee(s,1),Ae(ee(s,2))]):i.push(s)}else i.push(s);return[i,n]}function Ye(e,t,i,n){return n=null!=n?n:2,"solidus"===t?e.wrapShort(i)+"^{1\\/"+e.serialize(n)+"}":"quotient"===t?e.wrapShort(i)+"^{\\frac{1}{"+e.serialize(n)+"}}":2===Q(n)?"\\sqrt{"+e.serialize(i)+"}":"\\sqrt["+e.serialize(n)+"]{"+e.serialize(i)+"}"}function et(e,t,i){if(!t.match("\\sqrt"))return[e,null];const n=t.matchOptionalLatexArgument(),r=t.matchRequiredLatexArgument();return null===r?null!==n?[e,[z,S,n]]:[e,[L]]:null!==n?[e,[z,r,n]]:[e,[L,r]]}function tt(e,t,i){if(276<i)return[e,null];const n=t.index;if(!t.match("-"))return[e,null];const r=t.matchExpression(null===e?400:277);return null===r?(t.index=n,[e,null]):null===e?[null,[M,r]]:[null,[D,e,r]]}function it(e,t,i){if(275<i)return[e,null];const n=t.index;if(!t.match("+"))return[e,null];const r=t.matchExpression(null===e?400:275);return null===r?(t.index=n,[e,null]):null===e?[null,r]:t.applyOperator(w,e,r)}function nt(e,t){var i,n;e.level-=1;const r=V(t);let s="",o=ee(t,1),a=!Number.isNaN(null!==(i=Q(o))&&void 0!==i?i:NaN);if(r===M)s="-"+e.wrap(o,276);else if(r===w){s=e.serialize(o);const i=te(t)+1;for(let r=2;r<i;r++){o=ee(t,r);const i=null!==(n=Q(o))&&void 0!==n?n:NaN,l=!Number.isNaN(i);let u=!1;if(null!==o&&a){const t=H(o);if(t){const[i,n]=t;isFinite(i)&&isFinite(n)&&1!==n&&(s+=e.options.invisiblePlus+e.serialize(o),u=!0)}}if(!u)if(i<0)s+=e.serialize(o);else if(V(o)===M)s+=e.wrap(o,275);else{const t=e.wrap(o,275);"-"===t[0]||"+"===t[0]?s+=t:s=s+"+"+t}a=l}}else if(r===D){const i=ee(t,2);s=null!==i?e.wrap(o,275)+"-"+e.wrap(i,275):e.wrap(o,275)}return e.level+=1,s}function rt(e,t){var i;if(null===t)return"";e.level-=1;let n="";const[r,s]=Xe(t);if(null!==r&&null!==s&&s.length>0&&(n=1===s.length&&1===s[0]?0===r.length?"1":1===r.length?e.serialize(r[0]):rt(e,[q,...r]):e.serialize([A,1===r.length?r[0]:[q,...r],1===s.length?s[0]:[q,...s]])),n)return e.level+=1,n;let o=!1,a=null;const l=te(t)+1;for(let u=1;u<l;u++)if(a=ee(t,u),null!==a){let t;"number"==typeof a||R(a)?(t=e.serialize(a),"-1"!==t||n?("-"===t[0]&&(t=t.slice(1),o=!o),n=n?p([n,e.options.multiply,t]):t):n="-"):V(a)!==O||isNaN(Q(null!==(i=ee(a,1))&&void 0!==i?i:NaN))?(V(a)===M&&(a=ee(a,1),o=!o),t=e.wrap(a,390),n=n?e.options.invisibleMultiply?p([n,e.options.invisibleMultiply,t]):p([n,t]):t):n=n?p([n,e.options.multiply,e.serialize(a)]):e.serialize(a)}return e.level+=1,o?"-"+n:n}function st(e,t,i){var n,r,s,o;if(!t.match("\\frac"))return[e,null];const a=null!==(n=t.matchRequiredLatexArgument())&&void 0!==n?n:x,l=null!==(r=t.matchRequiredLatexArgument())&&void 0!==r?r:x;if("PartialDerivative"===V(a)&&("PartialDerivative"===V(l)||V(l)===q&&"PartialDerivative"===V(ee(l,1)))){const i=null!==(s=ee(a,3))&&void 0!==s?s:S;let n=ee(a,1);null!==n&&n!==S||(n=null!==(o=t.matchExpression())&&void 0!==o?o:S);let r=[];if(V(l)===q)for(const e of J(l))"PartialDerivative"===Z(e)&&r.push(ee(e,2));else r.push(ee(l,2));return r.length>1&&(r=[v,...r]),[e,["PartialDerivative",n,r,i===S?1:i]]}return[e,[A,a,l]]}function ot(e,t){if(console.assert(V(t)===A),1===te(t))return e.serialize(ee(t,1));const i=ce(t,e.level);if("inline-solidus"===i||"nice-solidus"===i){const n=e.wrapShort(ee(t,1)),r=e.wrapShort(ee(t,2));return"nice-solidus"===i?`^{${n}}\\!\\!/\\!_{${r}}`:`${n}\\/${r}`}return"reciprocal"===i?e.wrap(ee(t,1))+e.wrap(ee(t,2))+"^{-1}":"factor"===i?"\\frac{1}{"+e.serialize(ee(t,2))+"}"+e.wrap(ee(t,1)):"\\frac{"+e.serialize(ee(t,1))+"}{"+e.serialize(ee(t,2))+"}"}function at(e,t){const i=ee(t,1),n=ee(t,2);if(null===n)return e.serialize(i);if(null===i)return"";const r=V(t);if(r===L||r===z)return Ye(e,ue(t,e.level),ee(t,1),ee(t,2));const s=Q(n);if(-1===s)return e.serialize([A,"1",i]);if(s<0)return e.serialize([A,"1",[O,i,-s]]);if(V(n)===A){if(1===Q(ee(n,1)))return Ye(e,ue(t,e.level),i,ee(n,2))}else if(V(n)===O&&-1===Q(ee(n,2)))return Ye(e,ue(t,e.level),i,ee(n,1));return e.wrapShort(i)+"^{"+e.serialize(n)+"}"}function lt(e,t,i){var n;const r=t.next();let s=!1,o=0;if(t.skipSpace(),t.match("^")){if(t.skipSpace(),t.match("<{>")){t.skipSpace(),t.match("-")&&t.match("1")&&(s=!0);do{t.match("\\doubleprime")&&(o+=2),t.match("\\prime")&&(o+=1),t.match("'")&&(o+=1)}while(!t.match("<}>")&&!t.atEnd)}let e=!1;for(;!e;)t.skipSpace(),t.match("\\doubleprime")?o+=2:t.match("\\prime")||t.match("'")?o+=1:e=!0}let a=null!==(n={"\\arcsin":"Arcsin","\\arccos":"Arccos","\\arctan":"Arctan","\\arctg":"Arctan","\\arcctg":"Arctan","\\arcsec":"Arcsec","\\arccsc":" Arccsc","\\arsinh":"Arsinh","\\arcosh":"Arcosh","\\artanh":"Artanh","\\arcsech":"Arcsech","\\arccsch":"Arcsch","\\ch":"Cosh","\\cos":"Cos","\\cosec":"Csc","\\cosh":"Csch","\\cot":"Cot","\\cotg":"Cot","\\coth":"Coth","\\csc":"Csc","\\ctg":"Cot","\\cth":"Coth","\\sec":"Sec","\\sin":"Sin","\\sinh":"Sinh","\\sh":"Sinh","\\tan":"Tan","\\tanh":"Tanh","\\tg":"Tan","\\th":"Tanh"}[r])&&void 0!==n?n:r;s&&(a=[_,a]),o>=1&&(a=[E,o,a]);const l=t.matchArguments("implicit");return null===l?[null,a]:[null,[a,...l]]}function ut(e,t,i){if(!t.match("\\int"))return[e,null];let n=S,r=S,s=!1;for(;!s;)t.skipSpace(),t.match("_")?r=t.matchRequiredLatexArgument():t.match("^")?n=t.matchRequiredLatexArgument():s=!0;const o=t.matchBalancedExpression("<{>","<}>");return[e,["Integral",null!=o?o:"",n,r]]}function ct(e,t){return""}function gt(e){return Array.isArray(e)?e.length:1}function ft(e){return h(e)}function pt(e,t){var i,n,r,s,o,a,l,u,c,g,f,p,h,m,d;const b={lookahead:1,name:new Map,prefix:[],infix:[],postfix:[],matchfix:[],superfix:[],subfix:[],symbol:[],environment:new Map};for(const y of e)void 0===y.parse&&(y.parse=y.name),"string"==typeof y.trigger&&(y.trigger={symbol:y.trigger}),"string"==typeof y.serialize&&void 0!==(null===(i=y.trigger)||void 0===i?void 0:i.symbol)&&/#[0-9]/.test(y.serialize)&&t({code:"unexpected-argument",arg:y.name}),void 0===y.serialize&&(void 0!==(null===(n=y.trigger)||void 0===n?void 0:n.postfix)?y.serialize="#1"+ft(y.trigger.postfix):void 0!==(null===(r=y.trigger)||void 0===r?void 0:r.prefix)?y.serialize=ft(y.trigger.prefix)+"#1":void 0!==(null===(s=y.trigger)||void 0===s?void 0:s.infix)?y.serialize="#1"+ft(y.trigger.infix)+"#2":void 0!==(null===(o=y.trigger)||void 0===o?void 0:o.symbol)?y.serialize=ft(y.trigger.symbol):void 0!==(null===(a=y.trigger)||void 0===a?void 0:a.superfix)?y.serialize="#1^{"+ft(null===(l=y.trigger)||void 0===l?void 0:l.superfix)+"}":void 0!==(null===(u=y.trigger)||void 0===u?void 0:u.subfix)?y.serialize="#1_{"+ft(null===(c=y.trigger)||void 0===c?void 0:c.subfix)+"}":y.serialize=""),void 0!==(null===(g=y.trigger)||void 0===g?void 0:g.infix)&&(void 0===y.precedence&&t({code:"syntax-error",arg:"Infix operators require a precedence"}),y.associativity||(y.associativity="non")),void 0!==(null===(f=y.trigger)||void 0===f?void 0:f.symbol)&&(y.arguments=null!==(p=y.arguments)&&void 0!==p?p:"",y.optionalLatexArg=null!==(h=y.optionalLatexArg)&&void 0!==h?h:0,y.requiredLatexArg=null!==(m=y.requiredLatexArg)&&void 0!==m?m:0),void 0!==(null===(d=y.trigger)||void 0===d?void 0:d.matchfix)&&("function"===y.parse||y.closeFence||t({code:"syntax-error",arg:"Matchfix operators require a close fence or a custom parse function"})),void 0!==y.trigger&&(["infix","prefix","postfix","symbol","matchfix","superfix","subfix"].forEach((e=>{const t=gt(y.trigger[e]);b.lookahead=Math.max(b.lookahead,t),void 0===b[e][t]&&(b[e][t]=new Map),b[e][t].set(ft(y.trigger[e]),y)})),void 0!==y.trigger.environment&&b.environment.set(y.trigger.environment,y)),y.name&&b.name.set(ft(y.name),y),void 0!==y.trigger||y.name||t({code:"syntax-error",arg:"Need at least a trigger or a name"});return b}const ht={algebra:[{name:"To",trigger:{infix:"\\to"},precedence:270}],arithmetic:[{trigger:{symbol:"\\infty"},parse:{num:"Infinity"}},{name:U,trigger:{symbol:["\\tilde","\\infty"]},serialize:"\\tilde\\infty"},{name:U,trigger:{symbol:["\\tilde","<{>","\\infty","<}>"]},serialize:"\\tilde\\infty"},{name:P,trigger:{symbol:"\\pi"}},{name:P,trigger:{symbol:"π"},serialize:"\\pi"},{name:T,trigger:{symbol:"e"},serialize:"e"},{name:I,trigger:{symbol:"i"},serialize:"\\imaginaryI"},{name:I,trigger:{symbol:"\\imaginaryI"}},{name:w,trigger:{prefix:"+",infix:"+"},parse:it,serialize:nt,associativity:"both",precedence:275},{name:M,trigger:{prefix:"-"},parse:tt,associativity:"left",precedence:665},{name:D,trigger:{infix:"-"},parse:tt,associativity:"both",precedence:275},{name:q,trigger:{infix:"\\times"},serialize:rt,associativity:"both",precedence:390},{name:q,trigger:{infix:"\\cdot"},serialize:rt,associativity:"both",precedence:390},{name:q,trigger:{infix:"*"},serialize:rt,associativity:"both",precedence:390},{name:A,trigger:"\\frac",parse:st,serialize:ot,requiredLatexArg:2},{name:A,trigger:{infix:"\\/"},serialize:ot,associativity:"non",precedence:660},{name:A,trigger:{infix:"/"},serialize:ot,associativity:"non",precedence:660},{name:A,trigger:{infix:"\\div"},serialize:ot,associativity:"non",precedence:660},{name:O,trigger:{infix:"^"},associativity:"non",precedence:720,serialize:at},{name:O,trigger:{infix:["*","*"]},associativity:"non",precedence:720,serialize:at},{name:L,trigger:"\\sqrt",optionalLatexArg:1,requiredLatexArg:1,parse:et,serialize:at},{name:z,trigger:"\\sqrt",optionalLatexArg:1,requiredLatexArg:1,parse:et},{name:"Norm",trigger:{matchfix:"\\lVert"},closeFence:"\\rVert"},{name:"Norm",trigger:{matchfix:"\\|"},closeFence:"\\|"},{name:"Norm",trigger:{matchfix:["|","|"]},closeFence:["|","|"]},{name:"Abs",trigger:{matchfix:"|"},closeFence:"|"},{name:"Abs",trigger:{matchfix:"\\lvert"},closeFence:"\\rvert"},{name:"Factorial",trigger:{postfix:"!"},precedence:810},{name:"Factorial2",trigger:{postfix:["!","!"]},precedence:810}],calculus:[{trigger:{symbol:"\\int"},parse:ut,serialize:ct}],core:me,inequalities:m,other:oe,physics:[{name:"mu-0",trigger:{symbol:["\\mu","_","0"]}}],symbols:[{trigger:{symbol:"\\alpha"},parse:"α"},{trigger:{symbol:"\\beta"},parse:"β"},{trigger:{symbol:"\\gamma"},parse:"γ"},{trigger:{symbol:"\\delta"},parse:"δ"},{trigger:{symbol:"\\epsilon"},parse:"ϵ"},{trigger:{symbol:"\\varepsilon"},parse:"ε"},{trigger:{symbol:"\\zeta"},parse:"ζ"},{trigger:{symbol:"\\eta"},parse:"η"},{trigger:{symbol:"\\theta"},parse:"θ"},{trigger:{symbol:"\\vartheta"},parse:"ϑ"},{trigger:{symbol:"\\iota"},parse:"ι"},{trigger:{symbol:"\\kappa"},parse:"κ"},{trigger:{symbol:"\\varkappa"},parse:"ϰ"},{trigger:{symbol:"\\lambda"},parse:"λ"},{trigger:{symbol:"\\mu"},parse:"μ"},{trigger:{symbol:"\\nu"},parse:"ν"},{trigger:{symbol:"\\xi"},parse:"ξ"},{trigger:{symbol:"\\omicron"},parse:"ο"},{trigger:{symbol:"\\varpi"},parse:"ϖ"},{trigger:{symbol:"\\rho"},parse:"ρ"},{trigger:{symbol:"\\varrho"},parse:"ϱ"},{trigger:{symbol:"\\sigma"},parse:"σ"},{trigger:{symbol:"\\varsigma"},parse:"ς"},{trigger:{symbol:"\\tau"},parse:"τ"},{trigger:{symbol:"\\phi"},parse:"ϕ"},{trigger:{symbol:"\\varphi"},parse:"φ"},{trigger:{symbol:"\\upsilon"},parse:"υ"},{trigger:{symbol:"\\chi"},parse:"χ"},{trigger:{symbol:"\\psi"},parse:"ψ"},{trigger:{symbol:"\\omega"},parse:"ω"},{trigger:{symbol:"\\Gamma"},parse:"Γ"},{trigger:{symbol:"\\Delta"},parse:"Δ"},{trigger:{symbol:"\\Theta"},parse:"Θ"},{trigger:{symbol:"\\Lambda"},parse:"Λ"},{trigger:{symbol:"\\Xi"},parse:"Ξ"},{trigger:{symbol:"\\Pi"},parse:"Π"},{trigger:{symbol:"\\Sigma"},parse:"Σ"},{trigger:{symbol:"\\Upsilon"},parse:"Υ"},{trigger:{symbol:"\\Phi"},parse:"Φ"},{trigger:{symbol:"\\Psi"},parse:"Ψ"},{trigger:{symbol:"\\Omega"},parse:"Ω"},{trigger:{symbol:"\\digamma"},parse:"ϝ"},{trigger:{symbol:"\\aleph"},parse:"ℵ"},{trigger:{symbol:"\\beth"},parse:"ℶ"},{trigger:{symbol:"\\daleth"},parse:"ℸ"},{trigger:{symbol:"\\gimel"},parse:"ℷ"},{trigger:{symbol:"\\Finv"},parse:"Ⅎ"},{trigger:{symbol:"\\Game"},parse:"⅁"},{trigger:{symbol:"\\wp"},parse:"℘"},{trigger:{symbol:"\\eth"},parse:"ð"},{trigger:{symbol:"\\mho"},parse:"℧"},{trigger:{symbol:"\\clubsuit"},parse:"♣"},{trigger:{symbol:"\\heartsuit"},parse:"♡"},{trigger:{symbol:"\\spadesuit"},parse:"♠"},{trigger:{symbol:"\\diamondsuit"},parse:"♢"},{trigger:{symbol:"\\sharp"},parse:"♯"},{trigger:{symbol:"\\flat"},parse:"♭"},{trigger:{symbol:"\\natural"},parse:"♮"}],trigonometry:[{name:"Arcsin",trigger:"\\arcsin",arguments:"implicit",parse:lt},{name:"Arccos",trigger:"\\arccos",arguments:"implicit",parse:lt},{name:"Arctan",trigger:"\\arctan",arguments:"implicit",parse:lt},{name:"Arctan",trigger:"\\arctg",arguments:"implicit",parse:lt},{name:"Arccot",trigger:"\\arcctg",arguments:"implicit",parse:lt},{name:"Arcsec",trigger:"\\arcsec",arguments:"implicit",parse:lt},{name:"Arccsc",trigger:"\\arccsc",arguments:"implicit",parse:lt},{name:"Arsinh",trigger:"\\arsinh",arguments:"implicit",parse:lt},{name:"Arcosh",trigger:"\\arcosh",arguments:"implicit",parse:lt},{name:"Artanh",trigger:"\\artanh",arguments:"implicit",parse:lt},{name:"Arsech",trigger:"\\arsech",arguments:"implicit",parse:lt},{name:"Arcsch",trigger:"\\arcsch",arguments:"implicit",parse:lt},{name:"Cosh",trigger:"\\ch",arguments:"implicit",parse:lt},{name:"Cosec",trigger:"\\cosec",arguments:"implicit",parse:lt},{name:"Cosh",trigger:"\\cosh",arguments:"implicit",parse:lt},{name:"Cot",trigger:"\\cot",arguments:"implicit",parse:lt},{name:"Cot",trigger:"\\cotg",arguments:"implicit",parse:lt},{name:"Coth",trigger:"\\coth",arguments:"implicit",parse:lt},{name:"Csc",trigger:"\\csc",arguments:"implicit",parse:lt},{name:"Cot",trigger:"\\ctg",arguments:"implicit",parse:lt},{name:"Coth",trigger:"\\cth",arguments:"implicit",parse:lt},{name:"Sec",trigger:"\\sec",arguments:"implicit",parse:lt},{name:"Sinh",trigger:"\\sinh",arguments:"implicit",parse:lt},{name:"Sinh",trigger:"\\sh",arguments:"implicit",parse:lt},{name:"Tan",trigger:"\\tan",arguments:"implicit",parse:lt},{name:"Tanh",trigger:"\\tanh",arguments:"implicit",parse:lt},{name:"Tan",trigger:"\\tg",arguments:"implicit",parse:lt},{name:"Tanh",trigger:"\\th",arguments:"implicit",parse:lt},{name:"Cos",trigger:"\\cos",arguments:"implicit",parse:lt},{name:"Sin",trigger:"\\sin",arguments:"implicit",parse:lt},{name:"Tan",trigger:"\\tan",arguments:"implicit",parse:lt}]},mt={precision:15,positiveInfinity:"\\infty",negativeInfinity:"-\\infty",notANumber:"\\operatorname{NaN}",decimalMarker:".",groupSeparator:",",exponentProduct:"\\cdot",beginExponentMarker:"10^{",endExponentMarker:"}",notation:"auto",truncationMarker:"\\ldots",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}",imaginaryNumber:"\\imaginaryI"},dt=Object.assign(Object.assign({},mt),{invisibleOperator:q,skipSpace:!0,parseArgumentsOfUnknownLatexCommands:!0,parseNumbers:!0,promoteUnknownSymbols:/^[a-zA-Z]$/,promoteUnknownFunctions:/^[fg]$/,invisiblePlusOperator:w,preserveLatex:!1}),bt=Object.assign(Object.assign({},mt),{invisibleMultiply:"",invisiblePlus:"",multiply:"\\times"});function yt(e,t){var i;console.assert("string"==typeof e),console.assert(e.length>0);let n=e;for(let r=0;r<t.length;r++){let e=null!==(i=t[r])&&void 0!==i?i:"";if(/[a-zA-Z*]/.test(e[0])){const t=n.match(new RegExp("(.*)#"+Number(r+1).toString()));t&&/\\[a-zA-Z*]+/.test(t[1])&&(e=" "+e)}n=n.replace("#"+Number(r+1).toString(),e)}return n}class vt{constructor(e,t,i,n){let r;this.index=0,this.options=Object.assign(Object.assign({},dt),t),this.tokens=e,this.onError=e=>n(Object.assign(Object.assign({},e),{before:this.latexBefore(),after:this.latexAfter()})),this.dictionary=i,this.invisibleOperatorPrecedence=0,this.options.invisibleOperator&&(r=this.dictionary.name.get(this.options.invisibleOperator),void 0===r?n({code:"unknown-operator",arg:"invisible operator "+this.options.invisibleOperator}):void 0===r.precedence?n({code:"expected-operator",arg:"invisible operator "+this.options.invisibleOperator}):this.invisibleOperatorPrecedence=r.precedence)}clone(e,t){return new vt(this.tokens.slice(e,t),this.options,this.dictionary,this.onError)}balancedClone(e,t,i=!0){if(!this.matchAll(e))return i||this.onError({code:"syntax-error",arg:"Expected "+h(e)}),null;const n=this.index;let r=n,s=1;for(;!this.atEnd&&0!==s;)this.skipSpace(),r=this.index,this.matchAll(t)?s-=1:this.matchAll(e)?s+=1:this.next();return 0!==s?(i||this.onError({code:"unbalanced-symbols",arg:h(e)+h(t)}),this.index=n,null):this.clone(n,r)}get atEnd(){return this.index>=this.tokens.length}get peek(){return this.tokens[this.index]}latex(e,t){return h(this.tokens.slice(e,t))}latexAhead(e){return h(this.tokens.slice(this.index,this.index+e))}latexBefore(){return this.latex(0,this.index)}latexAfter(){return this.latex(this.index)}lookAhead(){let e=Math.min(this.dictionary.lookahead,this.tokens.length-this.index);const t=[];for(;e>0;)t[e]=this.latexAhead(e--);return t}peekDefinition(e){let t;t="operator"===e?this.lookAhead().map(((e,t)=>{var i,n,r,s,o;return null!==(s=null!==(n=null===(i=this.dictionary.infix[t])||void 0===i?void 0:i.get(e))&&void 0!==n?n:null===(r=this.dictionary.postfix[t])||void 0===r?void 0:r.get(e))&&void 0!==s?s:null===(o=this.dictionary.prefix[t])||void 0===o?void 0:o.get(e)})):this.lookAhead().map(((t,i)=>{var n;return null===(n=this.dictionary[e][i])||void 0===n?void 0:n.get(t)}));for(let i=t.length;i>0;i--)if(void 0!==t[i])return[t[i],i];return[null,0]}next(){return this.tokens[this.index++]}skipSpace(){if("<{>"===this.peek&&!this.atEnd&&"<}>"===this.tokens[this.index+1])return this.index+=2,!0;if(!this.options.skipSpace)return!1;let e=!1;for(;this.match("<space>");)e=!0;return e}match(e){return this.tokens[this.index]===e&&(this.index++,!0)}matchAll(e){let t=!0;"string"==typeof e&&(e=[e]);let i=0;do{t=this.tokens[this.index+i]===e[i++]}while(t&&i<e.length);return t&&(this.index+=i),t}matchAny(e){return e.includes(this.tokens[this.index])?this.tokens[this.index++]:""}matchWhile(e){const t=[];for(;e.includes(this.tokens[this.index]);)t.push(this.tokens[this.index++]);return t}matchSign(){let e=!1,t=!1;for(;!t;)this.skipSpace()?t=!1:this.match("-")?(e=!e,t=!1):t=!this.match("+");return e?"-":"+"}matchDecimalDigits(){let e="",t=!1;for(;!t;)if(e+=this.matchWhile(["0","1","2","3","4","5","6","7","8","9"]).join(""),t=!0,this.options.groupSeparator){const e=this.index;this.match(this.options.groupSeparator)&&(/[0-9]/.test(this.peek)?t=!1:this.index=e)}return e}matchSignedInteger(){const e=this.index,t=this.matchSign(),i=this.matchDecimalDigits();return i?("-"===t?"-":"")+i:(this.index=e,"")}matchExponent(){const e=this.index;let t="";if(this.matchAny(["e","E","d","D"])){const e=this.matchSignedInteger();e&&(t="e"+e)}if(t)return t;if(this.match("\\times")&&(this.skipSpace(),this.match("1")&&this.match("0")&&this.match("^"))){if(/[0-9]/.test(this.peek))return"e"+this.next();if(this.match("<{>")){this.skipSpace();const e=this.matchSignedInteger();if(this.skipSpace(),this.match("<}>")&&e)return"e"+e}}return this.index=e,""}matchNumber(){var e,t,i;if(!this.options.parseNumbers)return"";const n=this.index,r=this.matchSign();let s=this.matchDecimalDigits();return s?(this.match(null!==(e=this.options.decimalMarker)&&void 0!==e?e:"")&&(s+="."+(null!==(t=this.matchDecimalDigits())&&void 0!==t?t:"")),s+=null!==(i=this.matchExponent())&&void 0!==i?i:"",s?("-"===r?"-":"")+s:(this.index=n,"")):(this.index=n,"")}matchOperator(e,t=null,i=0){const[n,r]=this.peekDefinition(e);if(null===n)return null;if("function"==typeof n.parse){let e=null;return[t,e]=n.parse(t,this,i),null===e?null:this.applyInvisibleOperator(t,e)}let s=n.precedence;if(s<i)return null;s+="left"===n.associativity?1:0,this.index+=r;const o=this.matchExpression(s);return this.applyInvisibleOperator(...this.applyOperator(n.parse,t,o))}matchArguments(e){if(!e)return null;const t=this.index;let i=null;const n=this.matchMatchfixOperator();if("group"===e&&V(n)===d)i=J(n);else if("implicit"===e)if(V(n)===d)i=J(n);else if(null!==n)i=[n];else{const e=this.matchPrimary();null!==e&&(i=[e])}else this.index=t;return i}matchMatchfixOperator(){const[e]=this.peekDefinition("matchfix");if(null===e)return null;if("function"==typeof e.parse)return this.applyInvisibleOperator(...e.parse(null,this,0));const t="object"==typeof e.trigger?e.trigger.matchfix:e.trigger,i=this.matchBalancedExpression(t,e.closeFence,this.onError);return i?[e.parse,i]:[e.parse]}matchDefinition(e){const[t,i]=this.peekDefinition(e);if("function"==typeof(null==t?void 0:t.parse)){const[,e]=t.parse(null,this,0);return[t,e]}return this.index+=i,[t,null]}matchSymbol(){var e,t,i,n;const[r,s]=this.matchDefinition("symbol");if(null!==s)return s;if(null===r){if(null===(e=this.options.promoteUnknownFunctions)||void 0===e?void 0:e.test(this.peek)){const e=this.next(),t=this.matchMatchfixOperator();return null===t?e:V(t)!==d?null:[e,...J(t)]}return(null===(t=this.options.promoteUnknownSymbols)||void 0===t?void 0:t.test(this.peek))?this.next():this.matchUnknownLatexCommand()}const o=[],a=[];let l,u=null!==(i=r.optionalLatexArg)&&void 0!==i?i:0;for(;u>0;)l=this.matchOptionalLatexArgument(),null!==l&&a.push(l),u--;for(u=null!==(n=r.requiredLatexArg)&&void 0!==n?n:0;u>0;)l=this.matchRequiredLatexArgument(),null===l&&this.onError({code:"expected-argument"}),null!==l&&o.push(l),u--;const c=this.matchArguments(r.arguments);return null===c?0===o.length&&0===a.length?r.parse:[r.parse,...o,...a]:[r.parse,...o,...c,...a]}matchOptionalLatexArgument(){return this.skipSpace(),this.matchBalancedExpression("[","]")}matchRequiredLatexArgument(){this.skipSpace();const e=this.matchBalancedExpression("<{>","<}>");return e||(/^[0-9]$/.test(this.peek)?parseFloat(this.next()):/^[^\\#]$/.test(this.peek)?this.next():this.matchExpression())}matchSupsub(e){let t=null;return this.skipSpace(),[["^","superfix"],["_","subfix"]].forEach((i=>{var n,r,s;if(null!==t)return;const[o,a]=i;if(!this.match(o))return;this.skipSpace();const l=this.index;let u,c=0;if(this.match("<{>")?(this.skipSpace(),[u,c]=this.peekDefinition(a),this.index+=c,this.skipSpace(),(null==u?void 0:u.name)&&this.match("<}>")?t="function"==typeof u.parse?u.parse(e,this,0)[1]:[null!==(n=u.parse)&&void 0!==n?n:u.name,e]:this.index=l):([u,c]=this.peekDefinition(a),(null==u?void 0:u.name)&&(this.index+=c,t="function"==typeof u.parse?u.parse(e,this,0)[1]:[null!==(r=u.parse)&&void 0!==r?r:u.name,e])),null===t&&(u=null===(s=this.dictionary.infix[1])||void 0===s?void 0:s.get(o),"function"==typeof(null==u?void 0:u.parse)?t=u.parse(e,this,0)[1]:"string"==typeof(null==u?void 0:u.parse)?([e,t]=this.applyOperator(u.parse,e,this.matchRequiredLatexArgument()),t=this.applyInvisibleOperator(e,t)):t=this.applyInvisibleOperator(e,o)),null!==t){const e=this.matchArguments(null==u?void 0:u.arguments);null!==e&&(t=[t,...e])}})),t}matchPostfix(e){if(null===e)return null;const[t,i]=this.peekDefinition("postfix");return null===t?null:"function"==typeof t.parse?([,e]=t.parse(e,this,0),null===e?null:e):(this.index+=i,[t.parse,e])}matchString(){let e="",t=this.atEnd;for(;!t;){if(this.match("<space>"))e+=" ";else{const i=this.peek;"]"===i?t=!0:/^<({|}|\$|\$\$|space)>$/.test(i)?"\\"===i[0]?(this.onError({code:"unexpected-command"}),e+=this.next()):t=!0:e+=this.next()}t=t||this.atEnd}return e}matchEnvironmentName(e,t){if(this.match(e)){const e=this.index;if(this.match("<{>")){const e=this.matchString();if(this.match("<}>")&&e===t)return!0}this.index=e}return!1}matchTabular(){const e=["list"];let t=["list"],i=null,n=!1;for(;!this.atEnd&&!n;)if(this.match("&"))t.push(i),i=null;else if(this.match("\\\\")||this.match("\\cr"))this.skipSpace(),this.matchOptionalLatexArgument(),null!==i&&t.push(i),e.push(t),t=["list"],i=null;else{const e=this.matchExpression();null===e&&(n=!0),i=null!==i?this.applyInvisibleOperator(i,e):e}return t.length>1&&e.push(t),e}matchEnvironment(){var e;if(this.match("\\begin")&&this.match("<{>")){const t=this.matchString();if(this.match("<}>")){const i=this.index;let n=this.index,r=1;for(;!this.atEnd&&0!==r;)n=this.index,this.matchEnvironmentName("\\begin",t)?r+=1:this.matchEnvironmentName("\\end",t)?r-=1:this.next();const s=this.dictionary.environment.get(t);return"function"==typeof(null==s?void 0:s.parse)?s.parse(null,this.clone(i,n),0)[1]:null!==(e=null==s?void 0:s.parse)&&void 0!==e?e:null}}return null}applyOperator(e,t,i){var n,r,s,o;const a=this.dictionary.name.get(e);if(void 0===a)return this.onError({code:"unknown-operator"}),[t,i];if(void 0!==(null===(n=a.trigger)||void 0===n?void 0:n.prefix)&&null===t&&null!==i)return[null,[a.name,i]];if(void 0!==(null===(r=a.trigger)||void 0===r?void 0:r.postfix)&&null!==t)return[null,[a.name,t]];if((void 0!==(null===(s=a.trigger)||void 0===s?void 0:s.matchfix)||void 0!==(null===(o=a.trigger)||void 0===o?void 0:o.infix))&&null!==t&&null!==i){if("non"===a.associativity)return[null,[e,t,i]];if(V(t)===e){if("both"===a.associativity){if(V(i)===e){if(Array.isArray(t))return[null,t.concat(J(i))];if(B(t))return[null,t.fn.concat(J(i))]}else Array.isArray(t)&&t.push(i),B(t)&&t.fn.push(i);return[null,t]}return"left"===a.associativity?[null,[e,t,i]]:Array.isArray(t)?[null,[e,t[1],[e,t[2],i]]]:(B(t)&&(t.fn[2]=[e,t.fn[2],i]),[null,t])}return V(i)===e?"both"===a.associativity?(Array.isArray(i)&&i.splice(1,0,t),B(i)&&i.fn.splice(1,0,t),[null,i]):"right"===a.associativity?[null,[e,t,i]]:Array.isArray(i)?[null,[e,i[1],[e,i[2],t]]]:(B(i)&&(i.fn[2]=[e,i.fn[2],t]),[null,i]):[null,[e,t,i]]}return void 0!==a.trigger.infix?(this.onError({code:"expected-operand"}),[t,null]):[t,null]}applyInvisibleOperator(e,t){if(null===e)return t;if(null===t)return e;if(this.options.invisiblePlusOperator&&("number"==typeof e||R(e))&&V(t)===A)return[e,t]=this.applyOperator(this.options.invisiblePlusOperator,e,t),null===e?t:null;if(this.options.invisibleOperator)return[e,t]=this.applyOperator(this.options.invisibleOperator,e,t),null===e?t:null;let i=[y];return V(e)===y?i=i.concat(J(e)):i.push(e),null!==t&&(V(t)===y?i=i.concat(J(t)):i.push(t)),this.options.invisibleOperator&&this.onError({code:"unexpected-sequence"}),i}matchUnknownLatexCommand(){const e=this.peek;if(!e||"\\"!==e[0])return null;this.next();const t=[],i=[];let n=!1;do{n=!0;let e=this.matchOptionalLatexArgument();null!==e&&(t.push(e),n=!1),this.skipSpace(),"<{>"===this.peek&&(e=this.matchRequiredLatexArgument(),null!==e&&(i.push(e),n=!1))}while(!n);return t.length>0||i.length>0?[e,...i,...t]:e}matchPrimary(e){let t=null;const i=this.index,n=this.matchNumber();n&&(t={num:n}),null===t&&(t=this.matchMatchfixOperator()),null===t&&(t=this.matchEnvironment()),null===t&&(t=this.matchSymbol());let r=null;do{r=this.matchSupsub(t),t=null!=r?r:t}while(null!==r);let s=null;do{s=this.matchPostfix(t),t=null!=s?s:t}while(null!==s);return this.decorate(t,i)}matchBalancedExpression(e,t,i){const n=this.balancedClone(e,t);if(!n)return null==i||i({code:"unbalanced-symbols",arg:h(e)+h(t)}),null;const r=n.matchExpression();return n.atEnd||null==i||i({code:"unbalanced-symbols",arg:h(e)+h(t)}),r}matchExpression(e=0){let t=null;const i=this.index;if(this.skipSpace(),t=this.matchPrimary(e),null===t&&(t=this.matchOperator("prefix")),null===t)return null;let n=!1;for(;!this.atEnd&&!n;){this.skipSpace();let i=this.matchOperator("infix",t,e);if(null===i){const[e]=this.peekDefinition("operator");if(null===e){const e=this.matchExpression(this.invisibleOperatorPrecedence);null===e?n=!0:i=this.applyInvisibleOperator(t,e)}}null!==i?t=i:n=!0}return this.decorate(t,i)}decorate(e,t){if(this.options.preserveLatex){const i=this.latex(t,this.index);Array.isArray(e)?e={latex:i,fn:e}:"number"==typeof e?e={latex:i,num:Number(e).toString()}:"string"==typeof e?e={latex:i,sym:e}:"object"==typeof e&&null!==e&&(e.latex=i)}return e}}function xt(e,t){const i=e.length;e=e.substr(0,t.precision-2);for(let r=0;r<e.length-16;r++){const i=e.substr(0,r);for(let n=0;n<17;n++){const s=e.substr(r,n+1),o=Math.floor((e.length-i.length)/s.length);if(o>1&&(i+s.repeat(o+1)).startsWith(e))return"0"===s?i.replace(/(\d{3})/g,"$1"+t.groupSeparator):i.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.beginRepeatingDigits+s.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.endRepeatingDigits}}const n=i!==e.length;return(e=e.replace(/(\d{3})/g,"$1"+t.groupSeparator)).endsWith(t.groupSeparator)&&(e=e.slice(0,-1)),e+(n?t.truncationMarker:"")}function St(e,t){var i;return e?t.beginExponentMarker?t.beginExponentMarker+e+(null!==(i=t.endExponentMarker)&&void 0!==i?i:""):"10^{"+e+"}":""}function Nt(e){return parseFloat(Number(e).toPrecision(15))}function kt(e,t){var i,n;let r;if("number"==typeof e)r=e;else{if(!R(e))return"";r=e.num}if(r===1/0||"Infinity"===r)return t.positiveInfinity;if(r===-1/0||"-Infinity"===r)return t.negativeInfinity;if("NaN"===r||"number"==typeof r&&Number.isNaN(r))return t.notANumber;if("number"==typeof r)return"engineering"===t.notation?wt(Nt(r),t):Et(r.toString(),t);let s="";for("-"===r[0]?(s="-",r=r.substr(1)):"+"===r[0]&&(r=r.substr(1));"0"===r[0];)r=r.substr(1);if(0===r.length)return"0";"."===r[0]&&(r="0"+r);let o="";if(r.indexOf(".")>=0){const e=r.match(/(\d*)\.(\d*)([e|E]([-+]?[0-9]*))?/);if(!e)return"";const n=e[1],a=e[2].substring(0,Math.min(t.precision-n.length,e[2].length));if(o=null!==(i=e[4])&&void 0!==i?i:"","0"===n){let e=0;for(;"0"===a[e]&&e<a.length;)e+=1;let i="";if(e<=4)i="0"+t.decimalMarker,i+=a.substr(0,e),i+=xt(r.substr(i.length),t);else if(e+1>=t.precision)i="0",s="";else{i=r[e];const n=xt(r.substr(e+1),t);n&&(i+=t.decimalMarker+n)}"0"!==i&&(!(r.length-1>t.precision)||t.endRepeatingDigits&&i.endsWith(t.endRepeatingDigits)||t.truncationMarker&&i.endsWith(t.truncationMarker)||(i+=t.truncationMarker),e>4&&(i+=t.exponentProduct+St((1-e).toString(),t))),r=i}else{r=n.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator);const e=xt(a,t);e&&(r+=t.decimalMarker+e)}}else if(r.length>t.precision){const e=r.length;let i=r[0];const n=xt(r.substr(1),t);n&&(i+=t.decimalMarker+n,t.endRepeatingDigits&&!i.endsWith(t.endRepeatingDigits)&&(i+=t.truncationMarker)),"1"!==i?i+=t.exponentProduct:i="",r=i+St((e-2).toString(),t)}else{const e=r.match(/([0-9]*)\.?([0-9]*)([e|E]([-+]?[0-9]+))?/);e&&(r=e[1],e[2]&&(r+=t.decimalMarker+e[2]),o=null!==(n=e[4])&&void 0!==n?n:""),r=r.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator)}const a=St(o,t);return s+r+(a?t.exponentProduct+a:"")}function wt(e,t){if(0===e)return"0";const i=Math.abs(e);let n=Math.round(Math.log10(i));n-=n%3,i<1e3&&(n=0);const r=i/Math.pow(10,n);let s="";const o=r.toString().match(/^(.*)\.(.*)$/);(null==o?void 0:o[1])&&o[2]&&(s=o[1]+t.decimalMarker+o[2]),t.groupSeparator&&(s=xt(r.toExponential(),t));let a="";return 0!==n&&(a=St(n.toString(),t)),(e<0?"-":"")+s+a}function Et(e,t){let i,n=e.match(/^(.*)[e|E]([-+]?[0-9]+)$/i);(null==n?void 0:n[1])&&n[2]&&(i=St(n[2],t),i&&(i=t.exponentProduct+i));let r=e,s="";return n=(i?n[1]:e).match(/^(.*)\.(.*)$/),(null==n?void 0:n[1])&&n[2]&&(r=n[1],s=n[2]),t.groupSeparator&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator),s=xt(s,t)),s&&(s=t.decimalMarker+s),r+s+(null!=i?i:"")}function At(e){console.assert(Number.isFinite(e)&&!Number.isInteger(e));const t="0123456789abcdef",i=e<0?"-":"";e=Math.abs(e);let n="",r=0,s=Math.trunc(e),o=e-s;if(0!==s)for(;s%2==0&&s>0;)s/=2,o/=2,r+=1;else{let e=o;for(;2*e<2;)e*=2,r-=1;s=Math.trunc(e),o=e-s}for(;0!==s;)n=t[s%16]+n,s=Math.trunc(s/16);if(n?n+=".":n="0.",0===o)n+="0";else for(;o>0;){const e=Math.trunc(16*o);n+=t[e],o=16*o-e}return i+"0x"+n+"p"+(r<0?"-":"")+Number(Math.abs(r)).toString()}function Ft(e,t){console.assert("string"==typeof e||$(e));const i=K(e);return null===i?"asis":i.length>1?"upright":"asis"}function _t(e,t,i){let n=[];if("string"==typeof i.trigger.matchfix?n.push(i.trigger.matchfix):Array.isArray(i.trigger.matchfix)&&(n=[...i.trigger.matchfix]),te(t)>=1){let r="";for(const s of J(t))s&&(n.push(r),n.push(e.serialize(s)),r=i.separator)}return n.push(h(i.closeFence)),p(n)}function qt(e,t,i){let n="";const r=te(t),s=V(t);if(i.trigger.superfix||i.trigger.subfix)return 1!==r&&e.onError({code:"operator-requires-one-operand",arg:e.serializeSymbol(s)}),yt(i.serialize,[e.serialize(ee(t,1))]);if(i.trigger.postfix)return 1!==r&&e.onError({code:"postfix-operator-requires-one-operand",arg:e.serializeSymbol(s)}),yt(i.serialize,[e.wrap(ee(t,1),i.precedence)]);if(i.trigger.prefix)return 1!==r&&e.onError({code:"prefix-operator-requires-one-operand",arg:e.serializeSymbol(s)}),yt(i.serialize,[e.wrap(ee(t,1),i.precedence+1)]);if(i.trigger.infix){n=e.wrap(ee(t,1),i.precedence);for(let s=2;s<r+1;s++){const r=ee(t,s);null!==r&&(n=yt(i.serialize,[n,e.wrap(r,i.precedence)]))}}return n}class Mt{constructor(e,t,i){this.level=-1,this.options=e,e.invisibleMultiply&&(/#1/.test(e.invisibleMultiply)&&/#2/.test(e.invisibleMultiply)||i({code:"expected-argument",arg:"invisibleMultiply"})),this.onError=i,this.dictionary=t}wrap(e,t){if(null===e)return"";if(void 0===t)return"("+this.serialize(e)+")";if("number"==typeof e||R(e)||"string"==typeof e||$(e))return this.serialize(e);const i=V(e);if(i&&i!==d){const n=this.dictionary.name.get(i);if(n&&void 0!==n.precedence&&n.precedence<t)return this.wrapString(this.serialize(e),ae(e,this.level))}return this.serialize(e)}wrapShort(e){const t=this.serialize(e);return V(e)===d||"number"==typeof e||R(e)||/(^(.|\\[a-zA-Z*]+))$/.test(t)?t:this.wrapString(t,le(e,this.level+1))}wrapString(e,t){return"none"===t?e:"("+e+")"}serializeSymbol(e,t){const i=Z(e);if(!i){if(console.assert("string"==typeof e||$(e)),"string"==typeof(null==t?void 0:t.serialize))return t.serialize;const i=K(e);if(null===i)return"";switch(Ft(e,this.level)){case"upright":return"\\operatorname{"+i+"}";default:return i}}const n=J(e);if(!t){if("string"==typeof i&&i.length>0&&"\\"===i[0]){let e=i;for(const t of n)e+="{"+this.serialize(t)+"}";return e}return`${this.serialize(i)}(${n.map((e=>this.serialize(e))).join(", ")})`}if(t.requiredLatexArg>0){let e="",i="",r=0;for(;r<t.requiredLatexArg;)i+="{"+this.serialize(n[r++])+"}";for(;r<Math.min(n.length,t.optionalLatexArg+t.requiredLatexArg);){const t=this.serialize(n[1+r++]);t&&(e+="["+t+"]")}return t.serialize+(e+i)}return ae(e,this.level),t.serialize+this.serialize([d,...n])}serializeDictionary(e){return`\\left[\\begin{array}{lll}${Object.keys(e).map((t=>`\\textbf{${t}} & \\rightarrow & ${this.serialize(e[t])}`)).join("\\\\")}\\end{array}\\right]`}serialize(e){if(null===e)return"";this.level+=1;const t=(()=>{const t=kt(e,this.options);if(t)return t;const i=G(e);if(null!==i)return`\\text{${i}}`;const n=K(e);if(null!==n)return this.serializeSymbol(e,this.dictionary.name.get(n));const r=ne(e);if(null!==r)return this.serializeDictionary(r);const s=V(e);if(s){if("\\"===s[0]){const t=J(e);return 0===t.length?s:s+"{"+t.map((e=>this.serialize(e))).filter((e=>Boolean(e))).join("}{")+"}"}const t=this.dictionary.name.get(s);if(t){let i;return"function"==typeof t.serialize&&(i=t.serialize(this,e)),i||void 0===t.precedence&&!t.trigger.superfix&&!t.trigger.subfix||(i=qt(this,e,t)),!i&&t.trigger.matchfix&&(i=_t(this,e,t)),!i&&t.trigger.symbol&&(i=this.serializeSymbol(e,t)),i}}if(Array.isArray(e)||B(e))return this.serializeSymbol(e);this.onError({code:"syntax-error",arg:JSON.stringify(e)})})();return this.level-=1,t}}class Ot{constructor(e){var t,i;const n=e=>{"undefined"!=typeof window&&(e.before&&e.after?console.warn(e.code+(e.arg?": "+e.arg:"")+"\n%c|  "+e.before+"%c"+e.after+"\n%c|  "+String(" ").repeat(e.before.length)+"▲","font-weight: bold","font-weight: normal; color: rgba(160, 160, 160)","font-weight: bold; color: hsl(4deg, 90%, 50%)"):console.warn(e.code+(e.arg?": "+e.arg:"")))};this.onError=null!==(t=null==e?void 0:e.onError)&&void 0!==t?t:n;const r=Object.assign({},null!=e?e:{});delete r.dictionary,delete r.onError,this.options=Object.assign(Object.assign(Object.assign(Object.assign({},mt),bt),dt),r),this.dictionary=pt(null!==(i=null==e?void 0:e.dictionary)&&void 0!==i?i:Ot.getDictionary(),this.onError)}static getDictionary(e="all"){if("all"===e){let e=[];for(const t of Object.keys(ht))e=[...e,...ht[t]];return e}return[...ht[e]]}parse(e){var t;const i=new vt(f(e,[]),this.options,this.dictionary,this.onError),n=i.matchExpression();return i.atEnd||null===(t=this.onError)||void 0===t||t.call(this,{code:"syntax-error"}),null!=n?n:""}serialize(e){return new Mt(this.options,this.dictionary,this.onError).serialize(e)}}function Ct(e,t){return new Ot(t).parse(e)}function zt(e,t){return new Ot(t).serialize(e)}const Lt={Anything:[],Expression:"Anything",Domain:["Set","Symbol"],ParametricDomain:["Domain","Function"],MaybeBoolean:"Expression",Boolean:"MaybeBoolean",Collection:"Expression",Dictionary:"Collection",List:"Collection",Sequence:"Collection",Tuple:"Collection",Set:"Collection",FiniteSet:"Set",InfiniteSet:"Set",EmptySet:"FiniteSet",String:"Expression",Symbol:"String",Function:"Expression",Predicate:"Function",LogicalFunction:"Predicate",TranscendentalFunction:"Function",AlgebraicFunction:"Function",PeriodicFunction:"Function",TrigonometricFunction:["PeriodicFunction","TranscendentalFunction"],HyperbolicFunction:"TranscendentalFunction",MonotonicFunction:"Function",StrictMonotonicFunction:"MonotonicFunction",ContinuousFunction:"Function",DifferentiableFunction:"ContinuousFunction",InfinitelyDifferentiableFunction:"DifferentiableFunction",RationalFunction:["AlgebraicFunction","ContinuousFunction"],PolynomialFunction:["AlgebraicFunction","InfinitelyDifferentiableFunction"],QuadraticFunction:"PolynomialFunction",LinearFunction:["QuadraticFunction","MonotonicFunction"],ConstantFunction:"LinearFunction",Number:"Set",ImaginaryNumber:["ComplexNumber","InfiniteSet"],ComplexNumber:"ExtendedComplexNumber",ExtendedComplexNumber:"Number",ComplexInfinity:"ExtendedComplexNumber",NumberZero:["CompositeNumber","ImaginaryNumber","FiniteSet"],NaturalNumber:"Integer",CompositeNumber:"NaturalNumber",PrimeNumber:"NaturalNumber",Integer:["RationalNumber","ExtendedInteger"],ExtendedInteger:"ExtendedRationalNumber",RationalNumber:["AlgebraicNumber","ExtendedRationalNumber"],IrrationalNumber:"RealNumber",TranscendentalNumber:["IrrationalNumber","ImaginaryNumber"],AlgebraicNumber:"IrrationalNumber",RealNumber:["ComplexNumber","ExtendedRealNumber"],ExtendedRealNumber:"ExtendedComplexNumber",ExtendedNaturalNumber:"ExtendedInteger",ExtendedRationalNumber:"ExtendedRealNumber",SignedInfinity:"ExtendedNaturalNumber",Tensor:"Expression",Scalar:"Tensor",Vector:"Matrix",Row:"Vector",Column:"Vector",Matrix:"Tensor",ComplexTensor:"Tensor",RealTensor:"ComplexTensor",IntegerTensor:"RealTensor",LogicalTensor:"IntegerTensor",SquareMatrix:"Matrix",MonomialMatrix:"SquareMatrix",TriangularMatrix:"SquareMatrix",UpperTriangularMatrix:"TriangularMatrix",LowerTriangularMatrix:"TriangularMatrix",PermutationMatrix:["MonomialMatrix","LogicalTensor","OrthogonalMatrix"],OrthogonalMatrix:["SquareMatrix","RealTensor"],DiagonalMatrix:["UpperTriangularMatrix","LowerTriangularMatrix"],IdentityMatrix:["DiagonalMatrix","SymmetricMatrix","PermutationMatrix"],ZeroMatrix:["DiagonalMatrix","SymmetricMatrix","PermutationMatrix"],SymmetricMatrix:["HermitianMatrix","SquareMatrix","RealTensor"],HermitianMatrix:"ComplexTensor",Quaternion:["SquareMatrix","ComplexTensor"]},Dt={Function:"Q11348",ComplexNumber:"Q26851286",Integer:"Q47007735",ImaginaryNumber:"Q47310259",NaturalNumber:"Q28920052"},Ut={MaybeBoolean:["Union","Boolean",["Set","Maybe"]],NaturalNumber:["Union","CompositeNumber","PrimeNumber"],Scalar:["Intersection","Row","Column"],TriangularMatrix:["Union","UpperTriangularMatrix","LowerTriangularMatrix"],Vector:["Union","Row","Column"]},Pt={Boolean:2,MaybeBoolean:3,EmptySet:0,IdentityMatrix:1,ZeroMatrix:1,NumberZero:1},Tt={String:{signatures:[{args:[],result:"Domain",evaluate:()=>"String"},{args:["NaturalNumber"],result:"ParametricDomain",evaluate:(e,t)=>(t=Math.round(t),Number.isNaN(t)||t<0||t===1/0?"EmptySet":["String",t,t])},{args:["NaturalNumber"],result:"ParametricDomain",evaluate:(e,t,i)=>(t=Math.round(t),i=Math.round(i),Number.isNaN(t)||Number.isNaN(i)||t<0||t===1/0||t>i||0===t&&i===1/0?"EmptySet":["String",t,i])}]}};function It(){var e;const t={Nothing:{countable:!0,supersets:[],domain:"Domain"}};for(const n of Object.keys(Lt)){const i=Array.isArray(Lt[n])?Lt[n]:[Lt[n]];t[n]=null!==(e=Tt[n])&&void 0!==e?e:{},t[n]=Object.assign({domain:Tt[n]?"ParametricDomain":"Domain",wikidata:Dt[n],supersets:i,value:Ut,countable:void 0!==Pt[n],size:()=>Pt[n]},t[n]);for(const e of i)if("Anything"!==e&&!Lt[e])throw new Error(`Unknown parent of domain "${n}": "${e}"`)}const i=new Set;for(const n of Object.keys(t))i.add(n);for(const n of Object.keys(t))for(const e of t[n].supersets)i.delete(e);i.delete("Nothing"),t.Nothing.supersets=[...i.values()];for(const n of Object.keys(t)){let e=!1,i=0,r=[n];for(;i<512&&!e;){const n=r.pop();e="Anything"===n,e||(r=[...n,...t[n].supersets]),i++}if(!e)throw new Error(`The "${n}" domain cannot reach "Anything"`)}return t}const Rt={Pi:{domain:"IrrationalNumber",constant:!0,wikidata:"Q167",value:Math.PI},ImaginaryI:{domain:"ImaginaryNumber",constant:!0,wikidata:"Q193796"},ExponentialE:{domain:"IrrationalNumber",wikidata:"Q82435",constant:!0,value:{num:"2.7182818284590452354"}},Abs:{domain:"Function",wikidata:"Q3317982",threadable:!0,idempotent:!0,signatures:[{args:["RealNumber"],result:"RealNumber"}]},Add:{domain:"Function",wikidata:"Q32043",associative:!0,commutative:!0,threadable:!0,idempotent:!0,signatures:[{rest:["RealNumber"],result:"RealNumber"}]},Chop:{domain:"Function",associative:!0,threadable:!0,idempotent:!0,signatures:[{args:["RealNumber"],result:"RealNumber"}]},Ceil:{domain:"Function"},Exp:{domain:["ContinuousFunction","MonotonicFunction"],wikidata:"Q168698",threadable:!0,signatures:[{args:["RealNumber"],result:"RealNumber"}]},Erf:{domain:["ContinuousFunction","MonotonicFunction"],signatures:[{args:["RealNumber"],result:"RealNumber"}]},Erfc:{domain:["ContinuousFunction","MonotonicFunction"],signatures:[{args:["RealNumber"],result:"RealNumber"}]},Factorial:{wikidata:"Q120976",domain:"MonotonicFunction",signatures:[{args:["NaturalNumber"],result:"NaturalNumber"}]},Floor:{domain:"Function",wikidata:"Q56860783"},Gamma:{domain:"Function",wikidata:"Q190573"},LogGamma:{domain:"Function"},Log:{domain:"Function",wikidata:"Q11197",signatures:[{args:["RealNumber"],result:"RealNumber"},{args:["RealNumber",["base","NaturalNumber"]],result:"RealNumber"}]},Log2:{domain:"Function",wikidata:"Q581168",signatures:[{args:["RealNumber"],result:"RealNumber"}]},Log10:{domain:"Function",wikidata:"Q966582",signatures:[{args:["RealNumber"],result:"RealNumber"}]},MachineEpsilon:{domain:"RealNumber",constant:!0,value:{num:"2.220446049250313e-16"}},Multiply:{domain:"Function",wikidata:"Q40276",associative:!0,commutative:!0,idempotent:!0,signatures:[{rest:["RealNumber"],result:"RealNumber"}]},Negate:{domain:"Function",wikidata:"Q715358",signatures:[{args:["RealNumber"],result:"RealNumber"}]},Power:{domain:"Function",wikidata:"Q33456",commutative:!1,signatures:[{args:["RealNumber","RealNumber"],result:"RealNumber"}]},Round:{domain:"Function",signatures:[{args:["RealNumber","RealNumber"],result:"RealNumber"}]},SignGamma:{domain:"Function"},Sqrt:{domain:"Function",wikidata:"Q134237",signatures:[{args:["RealNumber"],result:"RealNumber"},{args:["Number"],result:"Number"}]},Root:{domain:"Function",commutative:!1,signatures:[{args:["NaturalNumber"],result:"RealNumber"}]},Subtract:{domain:"Function",wikidata:"Q32043",commutative:!1,signatures:[{args:["RealNumber","RealNumber"],result:"RealNumber"},{args:["Number","Number"],result:"Number"}]}},$t={True:{domain:"Boolean",constant:!0},False:{domain:"Boolean",constant:!0},Maybe:{domain:"MaybeBoolean",constant:!0},And:{domain:"LogicalFunction",threadable:!0,associative:!0,commutative:!0,idempotent:!0},Or:{domain:"LogicalFunction",threadable:!0,associative:!0,commutative:!0,idempotent:!0},Not:{domain:"LogicalFunction",involution:!0},Equivalent:{domain:"LogicalFunction"},Implies:{domain:"LogicalFunction"},Exists:{domain:"LogicalFunction"},Equal:{domain:"LogicalFunction"},NotEqual:{domain:"Function",wikidata:"Q28113351",commutative:!0,signatures:[{args:["Expression","Expression"],result:"MaybeBoolean"}]}},jt={EmptySet:{domain:"EmptySet",constant:!0,wikidata:"Q226183"},CartesianProduct:{domain:"Function",wikidata:"Q173740",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"Set",evaluate:Wt}]},Intersection:{domain:"Function",wikidata:"Q185837",threadable:!0,associative:!0,commutative:!0,idempotent:!0,involution:!0,signatures:[{rest:["sets","Set"],result:"Set",evaluate:Ht}]},Complement:{domain:"Function",wikidata:"Q242767"},Union:{domain:"Function",wikidata:"Q185359",threadable:!0,associative:!0,commutative:!0,idempotent:!0,involution:!0,signatures:[{rest:["sets","Set"],result:"Set",evaluate:Gt}]},SymmetricDifference:{domain:"Function",wikidata:"Q1147242"},Subset:{domain:"Predicate",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"MaybeBoolean",evaluate:Bt}]},SubsetEqual:{domain:"Predicate",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"MaybeBoolean",evaluate:Qt}]},SetMinus:{domain:"Function",wikidata:"Q18192442",signatures:[{args:[["lhs","Set"],["rhs","Set"]],result:"Set",evaluate:Zt}]}};function Bt(e,t,i){return"False"}function Qt(e,t,i){return"False"}function Gt(e,...t){return"EmptySet"}function Ht(e,...t){return"EmptySet"}function Zt(e,t,i){return"EmptySet"}function Wt(e,t,i){return"EmptySet"}const Vt={KeyValue:{domain:"Function"},Keys:{domain:"Function"},Entries:{domain:"Function"},Dictionary:{domain:"Collection"},List:{domain:"Collection"},Tuple:{domain:"Collection"},Sequence:{domain:"Collection"}},Kt={Arcosh:{domain:"HyperbolicFunction"},Arccos:{domain:"TrigonometricFunction"},Arcsin:{domain:"TrigonometricFunction"},Arctan:{wikidata:"Q2257242",domain:"TrigonometricFunction"},Arctan2:{wikidata:"Q776598",domain:"TrigonometricFunction"},Arsinh:{domain:"HyperbolicFunction"},Artanh:{domain:"HyperbolicFunction"},Cos:{domain:"TrigonometricFunction"},Degrees:{domain:"Real",constant:!0,value:.017453292519943295},FromPolarCoordinates:{domain:"Function"},Haversine:{wikidata:"Q2528380",domain:"TrigonometricFunction"},Hypot:{domain:"Function"},InverseHaversine:{domain:"TrigonometricFunction"},Sin:{domain:"TrigonometricFunction"},Sinh:{domain:"HyperbolicFunction"},Tan:{domain:"TrigonometricFunction"},Tanh:{domain:"HyperbolicFunction"},ToPolarCoordinates:{domain:"Function"}};function Jt(e){return"object"==typeof e&&"supersets"in e}function Xt(e){return"object"==typeof e&&"constant"in e}function Yt(e){return"object"==typeof e&&"signatures"in e}function ei(e){return"object"==typeof e&&"countable"in e}function ti(e="all"){if("all"===e)return ti(["domains","core","collections","algebra","arithmetic","calculus","complex","combinatorics","dimensions","inequalities","intervals","linear-algebra","logic","numeric","other","physics","polynomials","relations","statistics","transcendentals","trigonometry","rounding","units"]);const t=[];for(const i of e)t.push(ii[i]);return t}const ii={arithmetic:Rt,algebra:{},calculus:{},combinatorics:{},complex:{},core:{Apply:{domain:"Function",signatures:[{args:[["head","Expression"],["tail","List"]],result:"Expression"}]},About:{domain:"Function",signatures:[{args:["Expression"],result:"Dictionary"}]},BaseForm:{domain:"Function",signatures:[{args:[["value","Integer"],["base",["Integer",2,16]]],result:"Integer"}]},Block:{domain:"Function"},Dictionary:{domain:"Collection"},Domain:{domain:"Function",signatures:[{args:["Expression"],result:"Domain"}]},Evaluate:{domain:"Function",signatures:[{args:["Expression"],result:"Expression"}]},Parentheses:{domain:"Function",threadable:!0,pure:!1,signatures:[{rest:"Expression",result:"Expression"}]},Head:{domain:"Function",signatures:[{args:["Expression"],result:"Expression"}]},Lambda:{domain:"Function",wikidata:"Q567612",hold:"all"},Latex:{domain:"Function",signatures:[{rest:["tokens","String"],result:"String"}]},String:{domain:"Function",threadable:!0,signatures:[{rest:["string","String"],result:"String"}]},Symbol:{domain:"Function",threadable:!0,signatures:[{args:["String"],result:"Symbol"}]},Tail:{domain:"Function",signatures:[{args:["Expression"],result:"List"}]}},collections:Object.assign(Object.assign({},jt),Vt),domains:It(),dimensions:{},logic:$t,inequalities:{},intervals:{},"linear-algebra":{},numeric:{},other:{},polynomials:{},physics:{"Mu-0":{constant:!0,wikidata:"Q1515261",domain:"RealNumber",value:125663706212e-17,unit:[q,"H",[O,"m",-1]]}},relations:{},rounding:{},statistics:{},transcendentals:{},trigonometry:Kt,units:{}};function ni(e,t){const i=new Map;for(const n of Object.keys(e)){const[r,s]=ri(e[n],t);s&&t.signal({severity:r?"warning":"error",message:["invalid-dictionary-entry",s],head:n}),r&&i.set(n,r)}return t.context={parentScope:t.context,dictionary:i},si(t,i),t.context=t.context.parentScope,i}function ri(e,t){if("number"==typeof e)return[{domain:ie(e),constant:!1,value:e}];let i=e.domain;if(Xt(e)){let t;return i||(t="no domain provided.",i="Anything"),[e=Object.assign({domain:i,constant:!1},e),t]}if(ei(e)||t.isSubsetOf(i,"Collection")){let t=Object.assign({},e);return t=Object.assign({iterable:void 0!==t.iterator,indexable:void 0!==t.at,countable:void 0!==t.size},e),[t,void 0]}if(Yt(e)||t.isSubsetOf(i,"Function")){let t,i=Object.assign({},e);if(i=Object.assign({wikidata:"",scope:null,threadable:!1,associative:!1,commutative:!1,additive:!1,multiplicative:!1,outtative:!1,idempotent:!1,involution:!1,pure:!0,hold:"none",sequenceHold:!1,signatures:[]},e),0===i.signatures.length)t="no function signature provided.";else if(1===i.signatures.length){const e=i.signatures[0];"Boolean"!==e.result&&"MaybeBoolean"!==e.result||(2===e.args.length&&("Boolean"!==e.args[0]&&"MaybeBoolean"!==e.args[0]||"Boolean"!==e.args[1]&&"MaybeBoolean"!==e.args[1]||(t='looks like a "LogicalFunction"?')),t||(t='looks like a "Predicate"?'))}return[i,t]}if(Jt(e)||t.isSubsetOf(i,"Function"))return[e];if(e){if(i&&t.isSubsetOf(i,"Number")){if(void 0===e.value)return[null,'expected "value" property in definition'];const t=ie(e.value);return[Object.assign({domain:t,constant:!1},e),t!==i?'inferred domain "${inferredDomain}"':""]}if(i&&t.isSubsetOf(i,"Function"))return[Object.assign({signatures:[{rest:"Anything",result:"Anything"}]},e),'a "Function" should have a "signatures" property in its definition'];if(i&&t.isSubsetOf(i,"Set"))return[e,'a "Set" should have a "supersets" property in its definition']}return[e,"could not be validate"]}function si(e,t){const i=new Set;for(const[n,r]of t){if(/[A-Za-z][A-Za-z0-9-]*/.test(n)||1===n.length||e.signal({severity:"error",message:"invalid-name",head:n}),r.wikidata&&(i.has(r.wikidata)&&e.signal({severity:"warning",message:["duplicate-wikidata",r.wikidata],head:n}),i.add(r.wikidata)),Xt(r)&&(e.isSubsetOf(r.domain,"Anything")||e.signal({severity:"warning",message:["unknown-domain",r.domain],head:n})),Yt(r))for(const t of r.signatures)if("function"==typeof t.result||e.isSubsetOf(t.result,"Anything")||e.signal({severity:"warning",message:["unknown-domain",t.result],head:n}),t.rest&&!e.isSubsetOf(t.rest,"Anything")&&e.signal({severity:"warning",message:["unknown-domain",r.domain],head:n}),t.args)for(const i of t.args)e.isSubsetOf(i,"Anything")||e.signal({severity:"warning",message:["unknown-domain",r.domain],head:n});if(Jt(r)){0===r.supersets.length&&"Anything"!==n&&e.signal({severity:"warning",message:"expected-supersets",head:n});for(const i of r.supersets)e.isSubsetOf(i,"Anything")||e.signal({severity:"warning",message:["expected-supersets",i],head:n}),e.isSubsetOf(i,n)&&(e.signal({severity:"warning",message:["cyclic-definition",oi(e,n)],head:n}),t.delete(n))}}}function oi(e,t,i){var n;const r=[`${t}`],s="string"==typeof t?t:V(t);if(i){if(i.includes(s))return`${s} ↩︎ `;i.push(s)}else i=[s];const o=e.getSetDefinition(s);if(!o)return`${s}?!`;if(!o.supersets.length||0===o.supersets.length)return"";for(const a of null==o?void 0:o.supersets)"string"==typeof a&&r.push(oi(e,a,[...i]));return r.length<=1?null!==(n=r[0])&&void 0!==n?n:"":"["+r.join(" ➔ ")+"]"}function ai(e,t,i){const n=de(t,i);return n<0?-1:n>0?1:0}async function li(e,t){return t.shouldContinueExecution()?"Nothing":null}function ui(e,t){return null}const ci=Math.pow(10,-10);function gi(e){return Math.abs(e)<ci?0:e}class fi{constructor(e){this.signal=Object.assign({severity:"error"},e)}toString(){let e="";if(this.signal.head&&(e+=this.signal.head+": "),"string"==typeof this.signal.message)e+=this.signal.message;else{e+=" ";for(const t of this.signal.message)e+=t.toString()+" "}return e}}function pi(e,t){var i,n;if("object"==typeof e&&"object"==typeof t&&"wikidata"in e&&"wikidata"in t&&e.wikidata!==t.wikidata)return!1;if(("number"==typeof e||R(e))&&("number"==typeof t||R(t)))return 0===gi((null!==(i=Q(e))&&void 0!==i?i:NaN)-(null!==(n=Q(t))&&void 0!==n?n:NaN));const r=K(e);if(null!==r)return r===K(t);const s=ne(e);if(null!==s){const e=ne(t);if(!e)return!1;const i=Object.keys(s);if(Object.keys(e).length!==i.length)return!1;for(const t of i)if(!pi(s[t],e[t]))return!1;return!0}const o=Z(e);if(null===o)return!1;const a=Z(t);if(null===a)return!1;if(!pi(o,a))return!1;const l=te(e);if(l!==te(t))return!1;let u=1;for(;u<=l;){if(!pi(ee(e,u),ee(t,u)))return!1;u+=1}return!0}class hi{constructor(e){var t;const i=null!==(t=null==e?void 0:e.dictionaries)&&void 0!==t?t:hi.getDictionaries();for(const n of i)this.context?this.pushScope(n):this.pushScope(n,{warn:e=>{for(const t of e)"string"==typeof t.message?console.warn(t.message):console.warn(...t.message)},timeLimit:2,memoryLimit:1,recursionLimit:1024});this.pushScope({})}static getDictionaries(e="all"){return ti(e)}pushScope(e,t){this.context=Object.assign(Object.assign({},t),{parentScope:this.context,dictionary:ni(e,this)})}popScope(){var e;const t=null===(e=this.context)||void 0===e?void 0:e.parentScope;if(this.context.warnings){const e=[...this.context.warnings];this.context.warnings=[],this.context.warn&&this.context.warn(e)}t&&this.context.warnings.length>0&&(t.warnings?t.warnings=[...t.warnings,...this.context.warnings]:t.warnings=[...this.context.warnings]),this.context=t}shouldContinueExecution(){if(this.context.timeLimit&&this.context.deadline<i.g.performance.now())throw new fi({message:"timeout"});return!0}getVars(e){const t=new Set;return mi(e,t,this),t}getFunctionDefinition(e){let t=this.context,i=null;for(;t&&!i;)i=t.dictionary.get(e),i&&!("signatures"in i)&&(i=null),i||(t=t.parentScope);return i&&(i.scope=t),i}getSymbolDefinition(e){let t=this.context,i=null;for(;t&&!i;)i=t.dictionary.get(e),i&&!("constant"in i)&&(i=null),i||(t=t.parentScope);return i&&(i.scope=t),i}getSetDefinition(e){let t=this.context,i=null;for(;t&&!i;)i=t.dictionary.get(e),Jt(i)||(i=null),i||(t=t.parentScope);return i&&(i.scope=t),i}getDefinition(e){let t=this.context,i=null;for(;t&&!i;)i=t.dictionary.get(e),i||(t=t.parentScope);return i&&(i.scope=t),i}signal(e){}isSubsetOf(e,t){var i,n,r;if(!e||!t)return!1;if("string"==typeof e&&e===t)return!0;if("Anything"===t)return!0;if("Nothing"===t)return!1;const s=V(e);if("Union"===s)return J(e).some((e=>this.isSubsetOf(e,t)));if("Intersection"===s)return J(e).every((e=>this.isSubsetOf(e,t)));if("SetMinus"===s)return this.isSubsetOf(ee(e,1),t)&&!this.isSubsetOf(ee(e,2),t);const o=V(t);if("Union"===o)return J(t).some((t=>this.isSubsetOf(e,t)));if("Intersection"===o)return J(t).every((t=>this.isSubsetOf(e,t)));if("SetMinus"===o)return this.isSubsetOf(e,ee(t,1))&&!this.isSubsetOf(e,ee(t,2));const a=null!==(i=K(t))&&void 0!==i?i:o;if(!a){const e=null!==(n=Q(t))&&void 0!==n?n:NaN;if(Number.isNaN(e))return!1;t=0===t?"NumberZero":["Set",t]}const l=this.getSetDefinition(a);if(!l)return!1;if("function"==typeof l.isSubsetOf)return l.isSubsetOf(this,e,t);const u=null!==(r=K(e))&&void 0!==r?r:s;if(!u)return!1;const c=this.getSetDefinition(u);if(!c)return!1;for(const g of c.supersets)if(this.isSubsetOf(g,t))return!0;return!1}format(e,t){return Je(e,Array.isArray(t)?t:[null!=t?t:"canonical"],this)}canonical(e){return this.format(e)}evaluate(e){return li(e,this)}domain(e){return ui()}isInfinity(e){}isZero(e){return this.equal(e,0)}isOne(e){return this.equal(e,1)}isMinusOne(e){return this.equal(e,-1)}isNonNegative(e){const t=this.isZero(e);if(void 0!==t)return!0===t||this.isPositive(e)}isPositive(e){}isNegative(e){const t=this.isNonNegative(e);if(void 0!==t)return!t}isNonPositive(e){const t=this.isPositive(e);if(void 0!==t)return!t}isInteger(e){}isRational(e){}isReal(e){}isExtendedReal(e){}isAlgebraic(e){}isComplex(e){}isElement(e,t){}match(e,t){return null}same(e,t){return pi(e,t)}compare(e,t){return ai(this,e,t)}equal(e,t){const i=ai(this,e,t);return void 0===i?void 0:0===i}less(e,t){const i=ai(this,e,t);return void 0===i?void 0:i<0}lessEqual(e,t){const i=ai(this,e,t);return void 0===i?void 0:i<=0}greater(e,t){const i=ai(this,e,t);return void 0===i?void 0:i>0}greaterEqual(e,t){const i=ai(this,e,t);return void 0===i?void 0:i>=0}}function mi(e,t,i){const n=J(e);if(n.length>0)n.forEach((e=>mi(e,t,i)));else{const n=K(e);if(n&&!t.has(n)){const e=i.getSymbolDefinition(n);e&&!1!==e.constant||t.add(n)}}}function di(e,t,i){return Je(e,Array.isArray(t)?t:[t],new hi(i))}function bi(e,t){return li(e,new hi(t))}const yi=/\r\n|[\n\r\u2028\u2029]/,vi={joinLines:e=>`<div>${e.join("</div><div>")}</div>`,grey:e=>`<span style="opacity:.5">${e}</span>`,red:e=>`<span style="color:#F33">${e}</span>`,highlightBackground:e=>`<span style="background:rgba(255, 100, 100, .1);display:block;border-radius: 4px">${e}</span>`};class xi{constructor(e,t){this.source=e,this.url=t}get lines(){return this._lines||(this._lines=this.source.split(yi)),this._lines}get lineOffsets(){if(null==this._lineOffsets){const e=[],t=this.source;let i=!0,n=0;for(;n<t.length;){i&&(e.push(n),i=!1);const r=t.charCodeAt(n);i=13===r||10===r||8232===r||8233===r,13===r&&n+1<t.length&&10===t.charCodeAt(n+1)&&n++,n++}i&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}getLinecol(e){e=Math.max(Math.min(e,this.source.length),0);const t=this.lineOffsets;let i=0,n=t.length;if(0===n)return[1,e+1];for(;i<n;){const r=Math.floor((i+n)/2);t[r]>e?n=r:i=r+1}return[i,e-t[i-1]+1]}signalOrigin(e){const[t,i]=this.getLinecol(e);return{url:this.url,source:this.source,offset:e,line:t,column:i,around:this.sourceAround(t,i)}}chalkGutter(e){return vi.grey(e)}chalkMarker(e){return vi.red(e)}chalkMessage(e){return vi.red(e)}sourceAround(e,t,i){const n=2,r=3,s=Math.max(e-1-(n+1),0),o=Math.min(this.lines.length,e+r)-1,a="number"==typeof t,l=String(o).length,u=[];for(let c=s;c<=o;c++){const n=` ${` ${c+1}`.slice(-l)} ┆ `;let r="";if(c===e-1){if(a){const e=this.lines[c].slice(0,Math.max(t-1,0)).replace(/[^\t]/g," ");r=vi.joinLines(["",[" ",this.chalkGutter(n.replace(/\d/g," ")),e,this.chalkMarker("^")].join("")]),i&&(r+=" "+this.chalkMessage(i))}else i&&(r=vi.joinLines(["",this.chalkGutter(n.replace(/\d/g," "))+i]));u.push(vi.highlightBackground([this.chalkMarker(">"),this.chalkGutter(n),this.lines[c],r].join("")))}else u.push(` ${this.chalkGutter(n)}${this.lines[c]}`)}return vi.joinLines(u)}}const Si=[10,13,8232,8233],Ni=[9,10,11,12,13,32,133,8206,8207,8232,8233],ki=Li([[33,47],[58,64],[91,94],96,[123,126],[161,167],169,[171,172],174,[176,177],182,187,191,215,247,[8208,8254],[8257,8275],[8592,8730],[8731,10101],[10132,11903],[12289,12291],[12296,12320],12336,[64830,64831],[65093,65094]]),wi=Li([[0,32],[127,159],92,96,[65534,65535]]),Ei=[...wi,33,34,35,36,37,38,39,40,41,46,58,60,63,64,91,93,94,123,125,126],Ai=[...Ni,0,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288],Fi=[2042,65101,65102,65103,8208,8209,8210,8211,65112,8259,727,65374,65306,1417,1795,1796,65072,8282,1475,760,42889,8758,42237,894,65281,451,660,2429,8228,1748,1793,1794,1632,1776,12539,65381,903,65793,8231,65282,8220,8221],_i=Li([...Ai,...Fi,[0,31],[127,159],173,1564,6158,8203,8204,8205,8206,8207,8288,8289,8290,8291,8292,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,[64976,65007],65279,65534,65535]),qi=new Map([[0,"\\0"],[8,"\\b"],[9,"\\t"],[10,"\\n"],[12,"\\f"],[13,"\\r"],[32," "],[92,"\\\\"],[39,"\\'"],[34,'\\"']]),Mi=new Map([[48,0],[92,92],[39,39],[34,34],[98,8],[102,12],[110,10],[114,13],[115,32],[116,9]]),Oi=new Map([[48,0],[49,1],[50,2],[51,3],[52,4],[53,5],[54,6],[55,7],[56,8],[57,9],[97,10],[65,10],[98,11],[66,11],[99,12],[67,12],[100,13],[68,13],[101,14],[69,14],[102,15],[70,15],[65296,0],[65297,1],[65298,2],[65299,3],[65300,4],[65301,5],[65302,6],[65303,7],[65304,8],[65305,9],[65313,10],[65314,11],[65315,12],[65316,13],[65317,14],[65318,15],[65345,10],[65346,11],[65347,12],[65348,13],[65349,14],[65350,15]]),Ci=new Map([[48,0],[49,1],[50,2],[51,3],[52,4],[53,5],[54,6],[55,7],[56,8],[57,9],[65296,0],[65297,1],[65298,2],[65299,3],[65300,4],[65301,5],[65302,6],[65303,7],[65304,8],[65305,9]]);function zi(e){const t=new Map;for(const[i,n]of Object.entries(e))if(t.has(n)){const e=t.get(n);e.push(parseInt(i)),t.set(n,e)}else t.set(n,[parseInt(i)]);return t}function Li(e){const t=[];for(const i of e)if("number"==typeof i)t.push(i);else for(let e=i[0];e<=i[1];e++)t.push(e);return t}function Di(e){return Si.includes(e)}function Ui(e){return 9===e||32===e}function Pi(e){return Ai.includes(e)}function Ti(e){return Ai.includes(e)||ki.includes(e)}function Ii(e){return wi.includes(e)}function Ri(e){return Ei.includes(e)}function $i(e){return _i.includes(e)}function ji(e){return console.assert(String.fromCodePoint(e).length===(e>65535?2:1)),e>65535?2:1}zi(new Map([[172,"!"],[177,"+-"],[8723,"-+"],[215,"*"],[247,"/"],[8725,"/"],[8228,"."],[8229,".."],[8230,"..."],[8231,"."],[8242,"'"],[8243,"''"],[8244,"'''"],[8258,"***"],[8260,"/"],[8263,"??"],[8264,"?!"],[8265,"!?"],[8270,"*"],[8273,"**"],[8278,"..."],[8281,"....."],[8282,":"],[8283,".:."],[8290,"*"],[8292,"+"],[960,"Pi"],[8252,"!!"],[8520,"ImaginaryI"],[8519,"ExponentialE"],[8450,"ComplexNumber"],[8477,"RealNumber"],[8469,"NaturalNumber"],[8484,"Integer"],[8474,"RationalNumber"],[8592,"<-"],[8594,"->"],[8596,"<->"],[8614,"|->"],[8656,"=>"],[8660,"<=>"],[8709,"EmptySet"],[8734,"Infinity"],[10717,"ComplexInfinity"],[8722,"-"],[8728,"."],[8896,"&&"],[8897,"||"],[8743,"&&"],[8744,"||"],[8759,"::"],[8800,"!="],[8801,"=="],[8802,"!=="],[8803,"==="],[10877,"<="],[10878,">="],[8804,"<="],[8805,">="],[8806,"<="],[8807,">="],[8810,"<<"],[8811,">>"],[9655,"|>"],[9665,"<|"],[10704,"||>"],[10703,"<||"],[8669,"~>"],[8668,"<~"],[8712,"in"],[8713,"!in"],[10869,"=="],[10870,"==="],[9216,"\\0"],[9224,"\\b"],[9225,"\\t"],[9226,"\\n"],[9252,"\\n"],[9229,"\\r"]]));class Bi extends Error{constructor(e){super(),this.message=e}}class Qi{constructor(e,t,i){this._offset=0,this.length=0,this.rules=e,this.source=t,this.url=i,this.length=t.length,this._trace=[]}get(e){return this.source.codePointAt(e)}atEnd(){return this.offset>=this.source.length}atLinebreak(){return Di(this.source.codePointAt(this.offset))}atString(e){let t=0,i=!0;const n=this.offset;for(;i&&t<e.length&&t<this.source.length;)i=this.get(n+t)===e.codePointAt(t),t+=1;return i}slice(e,t){return this.source.slice(e,t)}get offset(){return this._offset}trace(e){return[...this._trace,"string"==typeof e?e:"function"==typeof e?"???":e[0]]}skipTo(e){return this._offset=e,this}fatalError(e){throw new Bi(e)}hasRule(e){return this.rules.has(e)}parse(e,t){let i;return this._trace.push("string"==typeof e?e:"function"==typeof e?"???":e[0]),void 0!==t&&this.skipTo(t),i="string"==typeof e?this.rules.parse(e,this):"function"==typeof e?e(this):e[1](this),this._trace.pop(),i}parseWhitespace(){return this.hasRule("whitespace")?this.parse("whitespace"):this.ignore()}ignore(){return new Gi(this).ignore()}failure(){return new Gi(this).failure()}}class Gi{constructor(e){this._parser=e,this._range=[e.offset,e.offset]}copyDiagnostics(e){e.isError&&(void 0===this._diagnostics&&(this._diagnostics=[]),this._diagnostics=[...this._diagnostics,...e._diagnostics])}get parser(){return this._parser}get diagnostics(){return this._diagnostics}get isFailure(){return void 0===this._diagnostics&&void 0===this._value}get isEmpty(){return void 0===this._diagnostics&&null===this._value}get isSuccess(){return void 0===this._diagnostics&&void 0!==this._value&&null!==this._value}get isError(){return void 0!==this._diagnostics}get start(){return this._range[0]}get end(){return this._range[1]}set end(e){this._range[1]=e}set range(e){this._range=e}get value(){return this._value}set value(e){this._value=e}success(e){return this._value=e,this._range[1]=this._parser.offset-1,this}failure(){return this._parser.skipTo(this._range[0]),this}ignore(){return this._value=null,this}ignoreUntil(e){return this._parser.skipTo(e),this._range[1]=this._parser.offset,this._value=null,this}error(e,t,i){return this._value=e,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"error",range:[this._range[0],this._range[1]],message:"function"==typeof t?t(this):t,fixits:i}),this}errorAt(e,t,i,n){return this._value=e,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"error",range:[this._range[0],this._range[1],i],message:"function"==typeof t?t(this):t,fixits:n}),this}errorFrom(e,t){return this._value=t,this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics=[...this._diagnostics,...e._diagnostics],this}warning(e,t){return this._range[1]=this._parser.offset-1,this._diagnostics||(this._diagnostics=[]),this._diagnostics.push({severity:"warning",range:[this._range[0],this._range[1]],message:e,fixits:t}),this}}function Hi(e,t){let i=e.offset;const n=[...t].map((e=>e.codePointAt(0)));for(;i<t.length-n.length;){let t=e.get(i);if(t===n[0]){let r=!0,s=1;for(;r&&s<n.length;)t=e.get(i),r=t===n[s],r&&(s+=1,i+=ji(t));if(r)return i}i+=ji(t)}return-1}function Zi(e){return"string"==typeof e?e:e[0]}function Wi(e,t){const i=new Gi(e),n=e.offset;return e.get(n)!==t&&i.failure(),e.skipTo(n+ji(t)),i.success(String.fromCodePoint(t))}function Vi(e){return[`U+${("0000"+e.toString(16)).slice(-4)} (${String.fromCodePoint(e)})`,t=>Wi(t,e)]}function Ki(e,t,i,n,r){const s=new Gi(e);let o=0,a=1/0;for(const l of i)s.copyDiagnostics(l),(l.isSuccess||l.isError)&&(o=Math.max(o,l.end),a=Math.min(a,l.end));if(s.range=[a,o],s.value=i.length>0?t(...i):null,r&&s.error(s.value,r),n)for(const l of n)s.copyDiagnostics(l);return s}function Ji(e,t){const i=new Gi(e);let n=0,r=!0;const s=e.offset;for(;n<t.length&&r&&n<e.length;)r=e.get(s+n)===t.codePointAt(n),n++;return r&&n===t.length&&(e.skipTo(e.offset+n),i.success(t)),i}function Xi(e){return console.assert(e.length>0),1===e.length?Vi(e.codePointAt(0)):[`**\`${e}\`**`,t=>Ji(t,e)]}function Yi(e,t){return[e.map((e=>Zi(e))).join(" "),i=>{const n=[],r=[];let s=!0;r.push(i.parseWhitespace());for(const o of e){const e=i.offset,a=i.parse(o);if(n.push(a),a.isFailure&&s)return a;if(a.isFailure)return Ki(i,t,n,r,["unexpected-symbol",String.fromCodePoint(i.get(e)),i.trace(o)]);s=!1,r.push(i.parseWhitespace())}return Ki(i,t,n,r)}]}function en(e,t){return[e.map((e=>Zi(e))).join(" | "),i=>{const n=i.offset;let r;for(const s of e){i.skipTo(n);const e=i.parse(s);if(t&&(e.isSuccess||e.isError)&&(e.value=t(e)),e.isSuccess)return e;!r&&e.isError&&(r=e)}return r?(i.skipTo(r.end+1),r):(i.skipTo(n),i.failure())}]}function tn(e,t){return[`(${Zi(e)})*`,i=>{const n=[i.parseWhitespace()];let r=i.parse(e);const s=[r];for(;!i.atEnd()&&(r.isSuccess||r.isEmpty);)n.push(i.parseWhitespace()),r=i.parse(e),s.push(r);return Ki(i,t,s,n)}]}function nn(e){return[`\\[${Zi(e)}\\]`,t=>{const i=t.offset,n=t.parse(e);return n.isSuccess||n.isEmpty?n:n.isFailure?(t.skipTo(i),t.ignore()):n}]}function rn(e,t){return[`(${Zi(e)})!`,i=>{const n=i.parse(e);if(n.isSuccess||n.isEmpty||n.isError)return n;let r=5;const s=i.offset;let o=t;for(o||(o=i.atEnd()?["expression-expected"]:["unexpected-symbol",String.fromCodePoint(i.get(s)),i.trace(e)]);r>0&&!i.atEnd();){i.skipTo(i.offset+1);const t=i.parse(e);if(t.isSuccess||t.isEmpty)return n.errorAt(t.value,o,s),n.copyDiagnostics(t),n;r-=1}return n.errorAt(n.value,o,s)}]}function sn(){return["_eof_",e=>{const t=new Gi(e);return e.atEnd()?t.success(!0):t.failure()}]}function on(e,t,i){return[`**\`${e}\`** (${Zi(t)})* **\`${i}\`**`,n=>{const r=new Gi(n);if(!n.atString(e))return r.failure();const s=n.offset;n.skipTo(s+e.length);const o=n.parse(t);return o.isError?(r.copyDiagnostics(o),r.range=[r.start,Hi(n,i)],r):n.atString(i)?(n.skipTo(n.offset+i.length),r.value=o.value,r):r.error(o.value,["closing-bracket-expected",i])}]}function an(e,t,i,n,r){return[`**\`${e}\`** (${Zi(t)}+#**\`${i}\`** **\`${n}\`**`,s=>{const o=new Gi(s);if(!s.parse(Xi(e)).isSuccess)return o.failure();const a=[];let l=!1;for(;!l&&!s.atEnd();){const e=s.parse(t);o.copyDiagnostics(e),l=!e.isSuccess,l||(a.push(e),l=!s.parse(Xi(i)).isSuccess)}return 0===a.length?o.error(r([]),"expression-expected"):s.parse(Xi(n)).isSuccess?o.success(r(a)):o.error(r(a),["closing-bracket-expected",n])}]}function ln(e,t,i){const n=Zi(t);return[e.map((e=>{var t;const[i,r,s]=e,o=null!==(t=e[3])&&void 0!==t?t:"right";return"prefix"===o?`**\`${r}\`**<sub>${s}</sub> ${n}`:"suffix"===o?`${n} **\`${r}\`**<sub>${s}</sub>`:"left"===o?`_···_ **\`${r}\`**<sub>${s}L</sub> ${n}`:`${n} **\`${r}\`**<sub>${s}R</sub> _···_`})).join(" | "),i=>un(i,e,t)]}function un(e,t,i,n){return e.parse(i)}function cn(e,t){const i=new Gi(e);let n=e.offset;if(n>=e.length)return i.failure();if("p"===t){if(112!==e.get(n)&&80!==e.get(n))return i.failure()}else if(101!==e.get(n)&&69!==e.get(n))return i.failure();n+=1;let r=1;if(45===e.get(n)?(n++,r=-1):43===e.get(n)&&n++,e.offset!==n&&!Ci.has(e.get(n)))return e.skipTo(n),i.error(0,"exponent-expected");let s=0;for(;Ci.has(e.get(n));)s=10*s+Ci.get(e.get(n++));return e.skipTo(n),i.success(r*s)}function gn(e,t,i){const n=new Gi(e);let r=cn(e,"e");return r.isSuccess?i=Number.parseFloat(i.toString()+"e"+r.value.toString()):r.isFailure&&(r=cn(e,"p"),r.isSuccess&&(i*=Math.pow(2,r.value))),r.isSuccess||r.isFailure?n.success(i):n.error(i,"exponent-expected")}function fn(e){const t=new Gi(e),i=e.offset;let n=i;if(48!==e.get(n++)||98!==e.get(n++))return t.failure();let r=0,s=!1;for(;!s&&n<e.length;){const t=Oi.get(e.get(n++));0===t?r<<=1:1===t?r=1+(r<<1):95===e.get(n-1)||(s=!0,n-=1)}if(46===e.get(n)){n+=1;let t=.5,i=0;for(s=!1;!s&&n<e.length;){const r=Oi.get(e.get(n++));0===r?t/=2:1===r?(i+=t,t/=2):95===e.get(n-1)||(s=!0,n-=1)}r+=i}return e.skipTo(n),gn(e,i,r)}function pn(e){const t=new Gi(e),i=e.offset;let n=i;if(48!==e.get(n++)||120!==e.get(n++))return t.failure();let r=0,s=!1;for(;!s&&n<e.length;){const t=e.get(n++);Oi.has(t)?r=16*r+Oi.get(t):95!==t&&(s=!0,n-=1)}if(46===e.get(n++)){let i=.0625;s=!1;let o=0;for(;!s&&n<e.length;){const a=e.get(n++);if(Oi.has(a))o+=i*Oi.get(a),i/=16;else{if(95===a)return e.skipTo(n),t.error(r+o,"hexadecimal-number-expected");s=!0,n-=1}}r+=o}return e.skipTo(n),gn(e,i,r)}function hn(e){const t=new Gi(e),i=e.offset;if(!Ci.has(e.get(i)))return t.failure();let n=i,r=0,s=!1;for(;!s&&n<e.length;){const t=e.get(n++);Ci.has(t)?r=10*r+Ci.get(t):95!==t&&(s=!0,n-=1)}if(46===e.get(n)){n+=1;let i=.1;s=!1;let o=0;for(;!s&&n<e.length;){const a=e.get(n++);if(Ci.has(a))o+=i*Ci.get(a),i/=10;else{if(95===a)return e.skipTo(n),t.error(r+o,"decimal-number-expected");s=!0,n-=1}}r+=o}return e.skipTo(n),gn(e,i,r)}function mn(e){let t=fn(e);return t.isFailure&&(t=pn(e)),t.isFailure&&(t=hn(e)),t}function dn(e){const t=new Gi(e);let i=e.offset,n=1;45===e.get(i)?(i++,n=-1):43===e.get(i)&&i++,e.skipTo(i);const r=mn(e);return r.isSuccess?t.success(n*r.value):r.isError?t.errorFrom(r,n*r.value):t.failure()}function bn(e){let t,i=e.offset;do{t=e.get(i++)}while(32===t||9===t);e.skipTo(i-1)}function yn(e){let t=!1,i=e.offset;for(;!t&&i<e.length;){const n=e.get(i++);13!==n&&8232!==n&&8233!==n||(t=!0),10===n&&(13===e.get(i)&&(i+=1),t=!0)}e.skipTo(i)}function vn(e){const t=e.get(e.offset);13!==t&&8232!==t&&8233!==t?10===t&&(13===e.get(e.offset+1)?e.skipTo(e.offset+2):e.skipTo(e.offset+1)):e.skipTo(e.offset+1)}function xn(e){let t=!1;const i=new Gi(e);let n=e.offset;for(;!t&&n<e.length;){const r=e.offset;for(;!t;){const i=e.get(n);t=!Pi(i),t||(n+=ji(i))}if(i.copyDiagnostics(Sn(e.skipTo(n))),i.copyDiagnostics(Nn(e)),i.isError)return i;t=r===e.offset,n=e.offset}return e.skipTo(n),i.ignore()}function Sn(e){const t=new Gi(e);return 47===e.get(e.offset)&&47===e.get(e.offset+1)&&yn(e),t.ignore()}function Nn(e){const t=new Gi(e);let i=e.offset;if(47!==e.get(i)||42!==e.get(i+1))return t.failure();i+=2;let n=1;for(;n>0&&i<e.length;){const t=e.get(i);47===t&&42===e.get(i+1)?(n+=1,i+=2):42===t&&47===e.get(i+1)?(n-=1,i+=2):i+=ji(t)}return n>0?(e.skipTo(e.offset+i),t.errorAt(null,"end-of-comment-expected",t.start)):t.ignoreUntil(i)}function kn(e){const t=new Gi(e);return 0!==e.offset||35!==e.get(0)||33!==e.get(1)?t.failure():(yn(e),t.success(!0))}function wn(e){const t=new Gi(e);if(92!==e.get(e.offset))return t.failure();const i=e.offset,n=Mi.get(e.get(i+1));if(void 0!==n)return e.skipTo(i+2),t.success(String.fromCodePoint(n));let r=i+1;const s=e.get(r++);if(117!==s)return e.skipTo(r),t.errorAt(String.fromCodePoint(s),["invalid-escape-sequence","\\"+String.fromCodePoint(s)],i);let o=0,a=!1,l=!1,u="";if(123===e.get(r)){for(r+=1;!l&&r<i+11;){const t=e.get(r++);u+=String.fromCodePoint(t),a=a||!Oi.has(t),a||(o=16*o+Oi.get(t)),l=125===e.get(r)}l&&(r+=1)}else{for(;!a&&r<=e.offset+5;){const t=e.get(r++);u+=String.fromCodePoint(t),a=!Oi.has(t),a||(o=16*o+Oi.get(t))}l=r<=e.length}return e.skipTo(r),a||!l?t.errorAt("�",["invalid-unicode-codepoint-string",u],i):o>1114111?t.errorAt("�",["invalid-unicode-codepoint-value","U+"+("00000"+o.toString(16)).slice(-8).toUpperCase()],i):o>=55296&&o<=57343?t.errorAt("�",["invalid-unicode-codepoint-value","U+"+("0000"+o.toString(16)).slice(-4).toUpperCase()],i):t.success(String.fromCodePoint(o))}function En(e){const t=e.offset,i=new Gi(e);if(35!==e.get(t))return i.failure();let n=0,r=t;for(;35===e.get(r++);)n+=1;if(r-=1,34!==e.get(r++))return i.failure();let s="",o=!1,a=!1;do{const t=e.get(r++);if(o=r>=e.length||Di(t),34===t){let t=n;for(;t>0&&35===e.get(r+t-1);)t-=1;a=0===t,a&&(r+=n)}o||a||(s+=String.fromCodePoint(t))}while(!o&&!a);return e.skipTo(r),a?i.success(s):i.error(s,["string-literal-closing-delimiter-expected","#".repeat(n)+'"'])}function An(e,t){const i=new Gi(e);if(void 0===t||92!==e.get(e.offset)||40!==e.get(e.offset+1))return i.failure();const n=e.offset+2,r=e.parse(t,n);return i.copyDiagnostics(r),41!==e.get(e.offset)?i.error(r.value,["closing-bracket-expected",")"]):(e.skipTo(e.offset+1),i.value=r.value,i)}function Fn(e,t){const i=new Gi(e),n=e.offset;if(34!==e.get(n))return i.failure();if(34===e.get(n+1)&&34!==e.get(n+2))return e.skipTo(e.offset+2),i.success([""]);if(34===e.get(n+1)&&34===e.get(n+2))return i.failure();let r=!1,s=!1;e.skipTo(n+1);const o=[];let a="";for(;!r&&!s&&!e.atEnd();){const n=e.get(e.offset);if(s=34===n,r=Di(n),92===n){const n=An(e,t);if(n.isFailure){const t=wn(e);i.copyDiagnostics(t),t.isSuccess?a+=t.value:t.isError&&(a+="\\"+t.value)}else o.push(a),a="",i.copyDiagnostics(n),o.push(n.value)}else r||s||(a+=String.fromCodePoint(n)),e.skipTo(e.offset+1)}return a&&(o.push(a),a=""),s?(i.success(o),i):0===o.length&&(e.atEnd()||e.atLinebreak())?i.error([""],["string-literal-opening-delimiter-expected",'"']):i.error(o,["string-literal-closing-delimiter-expected",'"'])}function _n(e,t){const i=new Gi(e),n=e.offset;if(34!==e.get(n)||34!==e.get(n+1)||34!==e.get(n+2))return i.failure();if(bn(e.skipTo(n+3)),!e.atLinebreak())return i.error([""],"multiline-string-expected");vn(e);let r=!1,s=e.offset;const o=[];let a=[],l="";for(;!r&&s<e.length;){const n=e.get(s);if(Di(n))l&&a.push(l),l="",o.push(a),a=[],vn(e.skipTo(s)),s=e.offset;else if(r=34===n&&34===e.get(s+1)&&34===e.get(s+2),92===n)if(Di(e.get(s+1)))l+="\\\n",s+=2;else{e.skipTo(s);const r=An(e,t);if(r.isFailure){const t=wn(e);s=e.offset,t.isSuccess?l+=t.value:t.isError&&(l+=String.fromCodePoint(n),i.copyDiagnostics(t))}else s=e.offset,a.push(l),l="",i.copyDiagnostics(r),a.push(r.value)}else r||(l+=String.fromCodePoint(n)),s+=1}e.skipTo(s+2);const u=l;let c=!0;if(u.length>0){for(const e of u)Ui(e.codePointAt(0))||(c=!1);if(c)for(const e of o)"string"==typeof e[0]&&e[0].startsWith(u)&&(e[0]=e[0].slice(u.length))}let g=[];for(let f=0;f<=o.length-1;f++){const e=o[f],t=e[e.length-1];"string"==typeof t&&"\\"===t[t.length-1]?(e[e.length-1]=t.slice(-1),g=[...g,...e]):g=f===o.length-1?[...g,...e]:[...g,...e,"\n"]}return c?(i.value=g,i):i.error(g,"multiline-whitespace-expected")}function qn(e){const t=Mn(e);if(!t.isFailure)return t;const i=e.offset;let n=e.get(i);if(Ri(n)||Ti(n))return t.failure();let r=!1,s=i,o="";for(;!r&&s<e.length;)if(n=e.get(s),r=Ti(n)||Ii(n),!r){const e=String.fromCodePoint(n);o+=e,s+=e.length}return 0===o.length?t.failure():(e.skipTo(s),t.success(o))}function Mn(e){const t=new Gi(e);if(96!==e.get(e.offset))return t.failure();let i=!1,n=!1,r=e.offset+1,s="",o=!1;for(;!i&&!o&&r<e.length;){const t=e.get(r);if(o=Di(t),i=96===t,!i)if(92===t){e.skipTo(r);const t=wn(e);t.isSuccess&&(s+=t.value),r=e.offset}else{n=n||Ii(t);const e=String.fromCodePoint(t);s+=e,r+=e.length}}return i?(e.skipTo(r+1),0===s.length?t.errorAt("Missing","empty-verbatim-symbol",t.start):n||Ri(s.charCodeAt(0))?t.errorAt("Missing",["invalid-symbol-name",s],t.start):t.success(s)):(e.skipTo(r),t.errorAt("Missing",["unbalanced-verbatim-symbol",s],t.start))}class On{constructor(){this.rules={},this.ruleDescription={},this.rule("quoted-text-item","U+0000-U+0009 U+000B-U+000C U+000E-U+0021 U+0023-U+2027 U+202A-U+D7FF | U+E000-U+10FFFF"),this.rule("linebreak","(U+000A \\[U+000D\\]) | U+000D | U+2028 | U+2029"),this.rule("unicode-char","_quoted-text-item_ | _linebreak_ | U+0022"),this.rule("pattern-syntax","U+0021-U+002F | U+003A-U+0040 | U+005b-U+005E | U+0060 | U+007b-U+007e | U+00A1-U+00A7 | U+00A9 | U+00AB-U+00AC | U+00AE | U+00B0-U+00B1 | U+00B6 | U+00BB | U+00BF | U+00D7 | U+00F7 | U+2010-U+203E | U+2041-U+2053 | U+2190-U+2775 | U+2794-U+27EF | U+3001-U+3003 | U+3008-U+3020 | U+3030 | U+FD3E | U+FD3F | U+FE45 | U+FE46"),this.rule("inline-space","U+0009 | U+0020"),this.rule("pattern-whitespace","_inline-space_ | U+000A | U+000B | U+000C | U+000D | U+0085 | U+200E | U+200F | U+2028 | U+2029"),this.rule("whitespace","_pattern-whitespace_ | U+0000 | U+00A0 | U+1680 | U+180E | U+2000-U+200A | U+202f | U+205f | U+3000"),this.rule("line-comment","**`//`** (_unicode-char_)* _linebreak_)"),this.rule("block-comment","**`/*`** (((_unicode-char_)\\* _linebreak_)) | _block-comment_) **`*/`**"),this.rule("digit","U+0030-U+0039 | U+FF10-U+FF19"),this.rule("hex-digit","_digit_ | U+0041-U+0046 | U+0061-U+0066 | U+FF21-FF26 | U+FF41-U+FF46"),this.rule("binary-digit","U+0030 | U+0031 | U+FF10 | U+FF11"),this.rule("numerical-constant","**`NaN`** | **`Infinity`** | **`+Infinity`** | **`-Infinity`**"),this.rule("base-10-exponent","(**`e`** | **`E`**) \\[_sign_\\](_digit_)+"),this.rule("base-2-exponent","(**`p`** | **`P`**) \\[_sign_\\](_digit_)+"),this.rule("binary-number","**`0b`** (_binary-digit_)+ \\[**`.`** (_binary-digit_)+ \\]\\[_exponent_\\]"),this.rule("hexadecimal-number","**`0x`** (_hex-digit_)+ \\[**`.`** (_hex-digit_)+ \\]\\[_exponent_\\]"),this.rule("decimal-number","(_digit_)+ \\[**`.`** (_digit_)+ \\]\\[_exponent_\\]"),this.rule("sign","**`+`** | **`-`**"),this.rule("symbol","_verbatim-symbol_ | _inline-symbol_"),this.rule("verbatim-symbol","**``` ` ```** (_escape-sequence_ | _symbol_start_) (_escape-sequence_ | _symbol_continue_)* **``` ` ```**"),this.rule("inline-symbol","_symbol-start_ (_symbol_continue_)*"),this.rule("escape-expression","**`\\(`** _expression_ **`)`**"),this.rule("single-line-string",'**`"`** (_escape-sequence_ | _escape-expression_ | _quoted-text-item_)* **`"`**'),this.rule("multiline-string",'**`"""`** _multiline-string-line_ **`"""`**'),this.rule("extended-string","..."),this.rule("shebang","**`#!`** (unicode-char)* (_linebreak | _eof_)"),this.rule("shebang",kn)}rule(e,t){"string"==typeof t?this.ruleDescription[e]=t:"function"==typeof t?(this.ruleDescription[e]||(this.ruleDescription[e]=`_${e}_`),this.rules[e]=t):(this.ruleDescription[e]=t[0],this.rules[e]=t[1])}toString(){return Object.keys(this.ruleDescription).map((e=>`_${e}_ → ${this.ruleDescription[e]}`)).join("\n\n")}parse(e,t,i){if("string"==typeof t&&(t=new Qi(this,t,i)),!this.has(e))throw new Error("Unexpected rule "+e);return this.rules[e](t)}has(e){return"function"==typeof this.rules[e]}get(e){return this.rules[e]}}const Cn=new On;function zn(e){const t=G(e);if(null!==t)return t;const i=Q(e);return null!==i?Number(i).toString():e.toString()}const Ln={0:"\\u0000",1:"\\u0001",2:"\\u0002",3:"\\u0003",4:"\\u0004",5:"\\u0005",6:"\\u0006",7:"\\u0007",8:"\\b",9:"\\t",10:"\\n",11:"\\u000b",12:"\\f",13:"\\r",14:"\\u000e",15:"\\u000f",16:"\\u0010",17:"\\u0011",18:"\\u0012",19:"\\u0013",20:"\\u0014",21:"\\u0015",22:"\\u0016",23:"\\u0017",24:"\\u0018",25:"\\u0019",26:"\\u001a",27:"\\u001b",28:"\\u001c",29:"\\u001d",30:"\\u001e",31:"\\u001f",34:'\\"',47:"\\/",92:"\\\\"};function Dn(e){var t;let i="";for(const n of e)i+=null!==(t=Ln[n.codePointAt(0)])&&void 0!==t?t:n;return i}function Un(e,t){return Array.isArray(t)||(t=t.range),Array.isArray(e)?{fn:e,sourceOffsets:t}:"object"==typeof e?Object.assign(Object.assign({},e),{sourceOffsets:t}):"number"==typeof e?{num:e.toString(),sourceOffsets:t}:"string"==typeof e&&"'"===e[0]&&"'"===e[e.length-1]?{str:e.slice(1,-1),sourceOffsets:t}:{sym:e,sourceOffsets:t}}function Pn(e){return[...e]}function Tn(e,t){const i=Cn.parse("cortex",e,t);if(i.isSuccess)return[i.value,[]];const n=new xi(e);return i.isError?[i.value,Pn(i.diagnostics).map((e=>{var t;return Object.assign(Object.assign({},e),{origin:n.signalOrigin(null!==(t=e.range[2])&&void 0!==t?t:e.range[1])})}))]:i.isEmpty||i.isFailure?["Nothing",[]]:void 0}function In(e){const t=[];for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(n>=55296&&n<=56319){const t=e.charCodeAt(i+1);t>=56320&&t<=57343&&(n=65536+1024*(n-55296)+(t-56320),i++)}t.push(n)}return t}Cn.rule("whitespace",(e=>xn(e))),Cn.rule("pragma",en(["pragma-symbol","pragma-function"])),Cn.rule("pragma-symbol",en([Xi("#line"),Xi("#column"),Xi("#filename"),Xi("#url"),Xi("#date"),Xi("#time")],(e=>{var t;if("#date"===e.value){const e=new Date;return e.getFullYear()+"-"+("00"+(1+e.getMonth())).slice(-2)+"-"+("00"+(1+e.getDay())).slice(-2)}if("#time"===e.value){const e=new Date;return("00"+e.getHours().toString()).slice(-2)+":"+("00"+e.getMinutes().toString()).slice(-2)+":"+("00"+e.getSeconds().toString()).slice(-2)}return"#url"===e.value?null!==(t=e.parser.url)&&void 0!==t?t:"Nothing":"#filename"===e.value?e.parser.url?e.parser.url.substring(e.parser.url.lastIndexOf("/")+1):"Nothing":"#line"===e.value?new xi(e.parser.source,e.parser.url).getLinecol(e.parser.offset)[0]:"#column"===e.value?new xi(e.parser.source,e.parser.url).getLinecol(e.parser.offset)[1]:"Nothing"}))),Cn.rule("pragma-function",Yi([en([Xi("#warning"),Xi("#error"),Xi("#env"),Xi("#navigator")]),"function-call-argument-clause"],((e,t)=>{if("#warning"===e.value){const e=Y(t.value,(e=>zn(e))).join(" ");return console.log(e),{str:e}}if("#error"===e.value){const e=Y(t.value,(e=>zn(e))).join(" ");throw console.error(e),new Bi(e)}if("#env"===e.value){if("process"in globalThis&&process.env)return{str:process.env[zn(ee(t.value,1))]}}else if("#navigator"===e.value&&"navigator"in globalThis)return{str:navigator[zn(ee(t.value,1))]};return"Nothing"}))),Cn.rule("function-call-argument-clause",an("(","expression",",",")",(e=>["List",...e.map((e=>e.value))]))),Cn.rule("signed-number","_numerical-constant_ | (\\[_sign_\\] (_binary-number_ | _hexadecimal-number_ | _decimal-number_)"),Cn.rule("signed-number",(e=>{const t=new Gi(e);let i=Ji(e,"NaN");if(i.isFailure&&(i=Ji(e,"Infinity")),i.isFailure&&(i=Ji(e,"+Infinity")),i.isFailure&&(i=Ji(e,"-Infinity")),i.isSuccess)return t.success(Un({num:i.value},i));const n=dn(e);return n.isSuccess?t.success(Un(n.value,n)):n})),Cn.rule("symbol","_verbatim-symbol_ | _inline-symbol_"),Cn.rule("symbol",(e=>{const t=new Gi(e),i=qn(e);return t.copyDiagnostics(i),t.end=i.end,(i.isSuccess||i.isError)&&t.success(Un(i.value,i)),t})),Cn.rule("string","_single-line-string_ | _multiline-string_ | _extended-string_"),Cn.rule("string",(e=>{let t=Fn(e,"expression");if(t.isFailure&&(t=_n(e,"expression")),t.isFailure&&(t=En(e),t.isSuccess))return t.success(Un({str:t.value},t));if(t.isFailure||t.isEmpty)return t;const i=[];let n,r;for(const s of t.value)"string"==typeof s?n=(null!=n?n:"")+s:j(s)?n=(null!=n?n:"")+s.str:("string"==typeof n&&(i.push(n),n=void 0),i.push(s));return"string"==typeof n&&i.push(n),r=1===i.length&&"string"==typeof i[0]?Un({str:Dn(i[0])},t):Un(["String",...i.map((e=>"string"==typeof e?{str:e}:e))],t),t.value=r,t})),Cn.rule("primary",en(["pragma","signed-number","symbol","string","parenthesized-expression"])),Cn.rule("expression",ln([["NotMemberOf","!in",160],["MemberOf","in",240],["LessEqual","<=",241],["GreaterEqual",">=",242],["Less","<",245],["Greater",">",245],["NotEqual","!=",255],["Assign","=",258],["Equal","==",260],["Same","===",260],["KeyValue","->",265],["Add","+",275],["Subtract","-",275],["Multiply","*",390],["Divide","/",660],["Negate","-",665,"prefix"],["Power","^",720,"left"],["Pipe","|>",790],["BackPipe","~>",790],["Or","||",800],["And","&&",810],["Not","!",820,"prefix"]],"primary")),Cn.rule("parenthesized-expression",on("(","expression",")")),Cn.rule("cortex",rn(Yi([nn("shebang"),tn("expression",((...e)=>{var t;console.assert(e&&e.length>0);const i=e.filter((e=>!e.isEmpty&&!e.isFailure));return 0===i.length?Un("Nothing",e[0]):1===i.length?Un(null!==(t=i[0].value)&&void 0!==t?t:"Nothing",i[0]):Un(["Do",...i.map((e=>e.value))],[i[0].start,i[i.length-1].end])})),rn(sn())],((e,t,i)=>{var n;return Un(null!==(n=t.value)&&void 0!==n?n:"Nothing",t)}))));const Rn=8205,$n=[127462,127487];function jn(e){return e===Rn||65038===e||65039===e||e>=127995&&e<=128e3||e>=129456&&e<=129460||e>=917536&&e<=917632}function Bn(e){return e>=$n[0]&&e<=$n[1]}function Qn(e){if(/^[\u0020-\u00FF]*$/.test(e))return e;const t=[],i=In(e);let n=0;for(;n<i.length;){const e=i[n++],r=i[n];if(r===Rn){const e=n-1;for(n+=2;i[n]===Rn;)n+=2;t.push(String.fromCodePoint(...i.slice(e,n-e+1)))}else if(jn(r)){const e=n-1;for(;jn(i[n]);)n+=i[n]===Rn?2:1;t.push(String.fromCodePoint(...i.slice(e,n-e)))}else Bn(e)?(n+=1,t.push(String.fromCodePoint(...i.slice(n-2,2)))):t.push(String.fromCodePoint(e))}return t}class Gn{constructor(e){this.fmt=e}}class Hn extends Gn{constructor(e){super(e)}debug(){return"EmptyBlock"}serialize(e){return""}nextCol(e){return e}cost(e){return 0}}class Zn extends Gn{constructor(e,t){super(e),this.s=t}debug(){return" "===this.s?'" "':'"'+this.s+'"'}serialize(e){return this.s}nextCol(e){return e+this.s.length}cost(e){const t=this.nextCol(e);return t>=this.fmt.margin?(t-this.fmt.margin)*this.fmt.cost.margin+(this.fmt.margin-this.fmt.softMargin)*this.fmt.cost.softMargin:t>=this.fmt.softMargin?(t-this.fmt.softMargin)*this.fmt.cost.softMargin:0}}class Wn extends Gn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Line("+this.blocks.map((e=>e.debug())).join(", ")+")"}serialize(e){const t=[];for(const i of this.blocks)t.push(i.serialize(e)),e=i.nextCol(e);return t.join("")}nextCol(e){return this.blocks.reduce(((e,t)=>t.nextCol(e)),e)}cost(e){let t=0;for(const i of this.blocks)t+=i.cost(e),e=i.nextCol(e);return t}}class Vn extends Gn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Stack("+this.blocks.map((e=>e.debug())).join(", ")+")"}serialize(e){let t="",i="";for(const n of this.blocks)t+=i+n.serialize(e),i||(i=this.fmt.linebreak()+this.fmt.indentChars(e));return t}nextCol(e){return e}cost(e){return this.blocks.reduce(((t,i)=>this.fmt.cost.linebreak+t+i.cost(e)),0)}}class Kn extends Gn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Wrap("+this.blocks.map((e=>e.debug())).join(", ")+")"}solution(e){const t=[];let i=[];for(const n of this.blocks)0===i.length||new Wn(this.fmt,...i,n).nextCol(e)<=this.fmt.margin?i.push(n):(t.push(i),i=[n]);return 0!==i.length&&t.push(i),new Vn(this.fmt,...t.map((e=>new Wn(this.fmt,...e))))}serialize(e){return this.solution(e).serialize(e)}nextCol(e){return this.solution(e).nextCol(e)}cost(e){return this.solution(e).cost(e)}}class Jn extends Gn{constructor(e,...t){super(e),this.blocks=t}debug(){return"Choice(\n  "+this.blocks.map((e=>e.debug())).join("\n  ")+"\n)"}choice(e){let t,i=1/0;return this.blocks.forEach((n=>{const r=n.cost(e);r<i&&(i=r,t=n)})),t}serialize(e){return this.choice(e).serialize(e)}nextCol(e){return this.choice(e).nextCol(e)}cost(e){return Math.min(...this.blocks.map((t=>t.cost(e))))}}class Xn{constructor(e){var t;"space"===(null==e?void 0:e.indentChar)?e.indentChar=" ":"tab"===(null==e?void 0:e.indentChar)&&(e.indentChar="\t"),this.options=Object.assign({cost:Object.assign({softMargin:.05,margin:100,linebreak:2,commentLinebreak:.5,flowLinebreak:.3,callLinebreak:.5,argLinebreak:5},null!==(t=null==e?void 0:e.cost)&&void 0!==t?t:{}),indentChar:" ",indentCharWidth:1,indentWidth:2,margin:80,softMargin:50,aroundInfixOperator:" ",aroundRelationalOperator:" ",afterSeparator:" "},null!=e?e:{})}get cost(){return this.options.cost}get margin(){return this.options.margin}get softMargin(){return this.options.softMargin}indentChars(e=1){return("tab"===this.options.indentChar?"\t":" ").repeat(e*this.options.indentWidth)}indentLength(e=1){return e*this.options.indentWidth*this.options.indentCharWidth}linebreak(e,t){return e||t?t?e+"\n"+t:e+"\n":"\n"}countLinebreaks(e){return e.split(/\r\n|\r|\n/).length}normalizedBlocks(e){return e.map((e=>"string"==typeof e?new Zn(this,e):e)).filter((e=>!(e instanceof Hn)))}infixOperator(e){return new Zn(this,this.options.aroundInfixOperator+e+this.options.aroundInfixOperator)}relationalOperator(e){return new Zn(this,this.options.aroundRelationalOperator+e+this.options.aroundRelationalOperator)}separator(e){return new Zn(this,e+this.options.afterSeparator)}fence(e){return new Zn(this,e)}text(e){return e&&0!==e.length?new Zn(this,e):new Hn(this)}line(...e){const t=this.normalizedBlocks(e),i=[];let n="";for(const r of t)r instanceof Zn?n?(i.pop(),n+=r.s,i.push(new Zn(this,n))):(i.push(r),n=r.s):(n="",i.push(r));return 1===i.length?i[0]:new Wn(this,...i)}stack(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Vn(this,...t)}wrap(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Kn(this,...t)}indent(e,t=1){return new Wn(this,new Zn(this,this.indentChars(t)),e)}choice(...e){const t=this.normalizedBlocks(e);return 1===t.length?t[0]:new Jn(this,...t)}fencedBlock(e,t,i){return t?this.fencedList(e,"",i,[t]):this.line(this.fence(e),this.fence(i))}fencedList(e,t,i,n){const r=this.fence(e),s=this.fence(i);if(0===n.length)return this.line(r,s);if(1===n.length)return this.line(r,n[0],s);const o=n.map((e=>this.line(e,t))),a=[...o];return a.pop(),a.push(n[n.length-1]),e||i?this.choice(this.line(r,...a,s),this.stack(r,this.indent(this.stack(...o)),s)):this.choice(this.line(...a),this.wrap(...o))}list(e,t){return this.fencedList(void 0,e,void 0,t)}}const Yn=new Set(["abstract","at","and","as","assert","await","begin","break","case","catch","class","const","continue","debugger","default","delete","dynamic","do","each","else","end","export","extern","finally","for","from","function","get","global","goto","if","in","inline","interface","internal","import","label","lazy","local","loop","match","module","namespace","native","new","not","of","on","optional","or","package","private","protected","protocol","public","repeat","return","self","set","static","super","switch","this","throw","to","try","until","using","var","warn","when","where","while","with","xor","yield"]),er={precision:15,decimalMarker:".",groupSeparator:"_",exponentProduct:"",beginExponentMarker:"e",endExponentMarker:"",notation:"auto",imaginaryNumber:"i",truncationMarker:"",beginRepeatingDigits:"",endRepeatingDigits:"",positiveInfinity:"Infinity",negativeInfinity:"-Infinity",notANumber:"NaN"};function tr(e,t){const i=new Xn(Object.assign(Object.assign({},(null==t?void 0:t.fancySymbols)?{aroundInfixOperator:" ",aroundRelationalOperator:" ",afterSeparator:" "}:{}),t));function n(e){var t,o;const a=G(e);if(null!==a)return r(a);const g=s(e);let f;if(null!==Z(e)&&(f=null!==(o=null!==(t=l(e))&&void 0!==t?t:c(e))&&void 0!==o?o:u(e)),!f){const t=K(e);null!==t&&(f=i.text(rr(t)))}if(f||("number"==typeof e||R(e))&&(f=i.text(kt(e,er))),!f){const t=ne(e);if(null!==t){const e=Object.keys(t).map((e=>i.line(nr(e),i.relationalOperator("->"),n(t[e]))));if(0===e.length)return i.line(i.fence("{"),i.relationalOperator("->"),i.fence("}"));f=i.fencedList("{",i.separator(","),"}",e)}}return f?g instanceof Hn?f:i.choice(i.line(g,f),i.stack(g,f)):i.text()}function r(e){return i.text(`"${nr(e)}"`)}function s(e){return"object"!=typeof e?i.text():"comment"in e&&e.comment.length>0?i.text(`/* ${e.comment} */`):i.text()}const o={NotElementOf:{symbol:"!in",fancySymbol:"∉",relational:!0,precedence:160},ElementOf:{symbol:"in",fancySymbol:"∈",relational:!0,precedence:240},LessEqual:{symbol:"<=",relational:!0,fancySymbol:"⩽",precedence:241},GreaterEqual:{symbol:">=",fancySymbol:"⩾",relational:!0,precedence:242},Less:{symbol:"<",relational:!0,precedence:245},Greater:{symbol:">",relational:!0,precedence:245},NotEqual:{symbol:"!=",fancySymbol:"≠",relational:!0,precedence:255},Assign:{symbol:"=",relational:!0,precedence:258},Equal:{symbol:"==",relational:!0,precedence:260},Same:{symbol:"===",fancySymbol:"≣",relational:!0,precedence:260},KeyValue:{symbol:"->",fancySymbol:"→",precedence:265},Add:{symbol:"+",precedence:275},Subtract:{symbol:"-",fancySymbol:"−",precedence:275},Multiply:{symbol:"*",fancySymbol:"×",precedence:390},Divide:{symbol:"/",fancySymbol:"÷",precedence:660},Negate:{symbol:"-",unary:!0,fancySymbol:"−",precedence:665},Power:{symbol:"^",precedence:720},Or:{symbol:"||",fancySymbol:"⋁",precedence:800},And:{symbol:"&&",fancySymbol:"⋀",precedence:810},Not:{symbol:"!",unary:!0,fancySymbol:"¬",precedence:820}},a={BaseForm:e=>{var t;const n=null!==(t=Q(ee(e,2)))&&void 0!==t?t:16,r=ee(e,1),s=Q(r);return null===s||Number.isNaN(s)||!Number.isFinite(s)||2!==n&&10!==n&&16!==n?u(e):2===n?i.text("0b"+Number(s).toString(2)):10===n?i.text(kt(r,er)):16===n?Number.isFinite(s)?Number.isInteger(s)?i.text("0x"+Number(s).toString(16)):i.text(At(s)):i.text(kt(r,er)):u(e)},String:e=>i.wrap('"',...Y(e,(e=>{const t=G(e);return null!==t?i.text(nr(t)):i.fencedBlock("\\(",n(e),")")})),'"'),List:e=>i.fencedList("{",i.separator(","),"}",Y(e,n)),Set:e=>0===te(e)?i.text("EmptySet"):i.fencedList("[",i.separator(","),"]",Y(e,n))};function l(e){var t,i;return null!==(i=null===(t=a[V(e)])||void 0===t?void 0:t.call(a,e))&&void 0!==i?i:null}function u(e){const t=Z(e);return"string"==typeof t?i.line(rr(t),i.fencedList("(",i.separator(","),")",Y(e,n))):i.line("Apply(",n(t),i.separator(","),i.fencedList("[",i.separator(","),"]",Y(e,n)),")")}function c(e){var r;const s=V(e);if(!s)return null;const a=o[s];if(!a)return null;const l=(null==t?void 0:t.fancySymbols)&&null!==(r=a.fancySymbol)&&void 0!==r?r:a.symbol;if(a.unary){if(1!==te(e))return null;const t=ee(e,1),r=V(t),s=o[r];return s&&s.precedence<a.precedence?i.line(l,"(",n(t),")"):i.line(l,n(t))}const u=Y(e,(e=>{const t=V(e),r=o[t];return r&&r.precedence<a.precedence?i.line("(",n(e),")"):n(e)}));return u?i.list(a.relational?i.relationalOperator(l):i.infixOperator(l),u):null}return n(e).serialize(0)}function ir(e){return qi.has(e)?qi.get(e):$i(e)?e<65536?`\\u${("0000"+e.toString(16)).slice(-4)}`:`\\u{${("000000000"+e.toString(16)).slice(-8)}}`:String.fromCodePoint(e)}function nr(e){let t="";const i=Qn(e);if("string"==typeof i)for(const n of i)t+=ir(n.codePointAt(0));else for(const n of i)1===n.length?t+=ir(n.codePointAt(0)):t+=n;return t}function rr(e){if(Yn.has(e))return`\`${e}\``;if(/^[a-zA-Z][a-zA-Z\d_]*$/.test(e))return e;const t=e.codePointAt(0);if(Ci.has(t))return`\`${nr(e)}\``;let i=!1;const n=Qn(e);let r=0;for(;!i&&r<n.length;){const e=n[r].codePointAt(0);i=qi.has(e)||$i(e)||Ti(e),r+=1}return i?`\`${nr(e)}\``:e}e.ComputeEngine=hi,e.LatexSyntax=Ot,e.evaluate=bi,e.format=di,e.parse=Ct,e.parseCortex=Tn,e.serialize=zt,e.serializeCortex=tr,Object.defineProperty(e,"__esModule",{value:!0})}(t)}}]);
//# sourceMappingURL=70420.2bd6eba803975ac04b0d.js.map