/*! For license information please see mathalea2iep.a5a8e177344abf09f594.js.LICENSE.txt */
(()=>{var __webpack_modules__={69012:(t,e,r)=>{"use strict";r.r(e),r.d(e,{Node:()=>rt,Parser:()=>U,Position:()=>R,SourceLocation:()=>L,TokContext:()=>st,Token:()=>Nt,TokenType:()=>g,defaultOptions:()=>q,getLineInfo:()=>D,isIdentifierChar:()=>m,isIdentifierStart:()=>d,isNewLine:()=>A,keywordTypes:()=>x,lineBreak:()=>E,lineBreakG:()=>S,nonASCIIwhitespace:()=>N,parse:()=>Ot,parseExpressionAt:()=>It,tokContexts:()=>ot,tokTypes:()=>w,tokenizer:()=>Pt,version:()=>Tt});var n={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},i="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:i,"5module":i+" export import",6:i+" const class extends export import super"},o=/^in(stanceof)?$/,a="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞿꟂ-Ᶎꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭧꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",u="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",l=new RegExp("["+a+"]"),c=new RegExp("["+a+u+"]");a=u=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,155,22,13,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,0,33,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,0,161,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,754,9486,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],h=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,232,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,792487,239];function f(t,e){for(var r=65536,n=0;n<e.length;n+=2){if((r+=e[n])>t)return!1;if((r+=e[n+1])>=t)return!0}}function d(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&l.test(String.fromCharCode(t)):!1!==e&&f(t,p)))}function m(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&c.test(String.fromCharCode(t)):!1!==e&&(f(t,p)||f(t,h)))))}var g=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function y(t,e){return new g(t,{beforeExpr:!0,binop:e})}var v={beforeExpr:!0},b={startsExpr:!0},x={};function _(t,e){return void 0===e&&(e={}),e.keyword=t,x[t]=new g(t,e)}var w={num:new g("num",b),regexp:new g("regexp",b),string:new g("string",b),name:new g("name",b),eof:new g("eof"),bracketL:new g("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new g("]"),braceL:new g("{",{beforeExpr:!0,startsExpr:!0}),braceR:new g("}"),parenL:new g("(",{beforeExpr:!0,startsExpr:!0}),parenR:new g(")"),comma:new g(",",v),semi:new g(";",v),colon:new g(":",v),dot:new g("."),question:new g("?",v),arrow:new g("=>",v),template:new g("template"),invalidTemplate:new g("invalidTemplate"),ellipsis:new g("...",v),backQuote:new g("`",b),dollarBraceL:new g("${",{beforeExpr:!0,startsExpr:!0}),eq:new g("=",{beforeExpr:!0,isAssign:!0}),assign:new g("_=",{beforeExpr:!0,isAssign:!0}),incDec:new g("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:y("||",1),logicalAND:y("&&",2),bitwiseOR:y("|",3),bitwiseXOR:y("^",4),bitwiseAND:y("&",5),equality:y("==/!=/===/!==",6),relational:y("</>/<=/>=",7),bitShift:y("<</>>/>>>",8),plusMin:new g("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:y("%",10),star:y("*",10),slash:y("/",10),starstar:new g("**",{beforeExpr:!0}),_break:_("break"),_case:_("case",v),_catch:_("catch"),_continue:_("continue"),_debugger:_("debugger"),_default:_("default",v),_do:_("do",{isLoop:!0,beforeExpr:!0}),_else:_("else",v),_finally:_("finally"),_for:_("for",{isLoop:!0}),_function:_("function",b),_if:_("if"),_return:_("return",v),_switch:_("switch"),_throw:_("throw",v),_try:_("try"),_var:_("var"),_const:_("const"),_while:_("while",{isLoop:!0}),_with:_("with"),_new:_("new",{beforeExpr:!0,startsExpr:!0}),_this:_("this",b),_super:_("super",b),_class:_("class",b),_extends:_("extends",v),_export:_("export"),_import:_("import",b),_null:_("null",b),_true:_("true",b),_false:_("false",b),_in:_("in",{beforeExpr:!0,binop:7}),_instanceof:_("instanceof",{beforeExpr:!0,binop:7}),_typeof:_("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:_("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:_("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},E=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(E.source,"g");function A(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var N=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,M=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,k=Object.prototype,C=k.hasOwnProperty,T=k.toString;function O(t,e){return C.call(t,e)}var I=Array.isArray||function(t){return"[object Array]"===T.call(t)};function P(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var R=function(t,e){this.line=t,this.column=e};R.prototype.offset=function(t){return new R(this.line,this.column+t)};var L=function(t,e,r){this.start=e,this.end=r,null!==t.sourceFile&&(this.source=t.sourceFile)};function D(t,e){for(var r=1,n=0;;){S.lastIndex=n;var i=S.exec(t);if(!(i&&i.index<e))return new R(r,e-n);++r,n=i.index+i[0].length}}var q={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function B(t,e){return 2|(t?4:0)|(e?8:0)}var U=function(t,e,r){this.options=t=function(t){var e={};for(var r in q)e[r]=t&&O(t,r)?t[r]:q[r];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),I(e.onToken)){var n=e.onToken;e.onToken=function(t){return n.push(t)}}return I(e.onComment)&&(e.onComment=function(t,e){return function(r,n,i,s,o,a){var u={type:r?"Block":"Line",value:n,start:i,end:s};t.locations&&(u.loc=new L(this,o,a)),t.ranges&&(u.range=[i,s]),e.push(u)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=P(s[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";if(!0!==t.allowReserved){for(var o=t.ecmaVersion;!(i=n[o]);o--);"module"===t.sourceType&&(i+=" await")}this.reservedWords=P(i);var a=(i?i+" ":"")+n.strict;this.reservedWordsStrict=P(a),this.reservedWordsStrictBind=P(a+" "+n.strictBind),this.input=String(e),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(E).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},$={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};U.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},$.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},$.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},$.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},$.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},$.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},$.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},U.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},U.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var r=this,n=0;n<t.length;n++)r=t[n](r);return r},U.parse=function(t,e){return new this(e,t).parse()},U.parseExpressionAt=function(t,e,r){var n=new this(r,t,e);return n.nextToken(),n.parseExpression()},U.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(U.prototype,$);var z=U.prototype,F=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function G(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}z.strictDirective=function(t){for(;;){M.lastIndex=t,t+=M.exec(this.input)[0].length;var e=F.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;t+=e[0].length,M.lastIndex=t,t+=M.exec(this.input)[0].length,";"===this.input[t]&&t++}},z.eat=function(t){return this.type===t&&(this.next(),!0)},z.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},z.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},z.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},z.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||E.test(this.input.slice(this.lastTokEnd,this.start))},z.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},z.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},z.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},z.expect=function(t){this.eat(t)||this.unexpected()},z.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},z.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var r=e?t.parenthesizedAssign:t.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},z.checkExpressionErrors=function(t,e){if(!t)return!1;var r=t.shorthandAssign,n=t.doubleProto;if(!e)return r>=0||n>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},z.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},z.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var V=U.prototype;V.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var r=this.parseStatement(null,!0,e);t.body.push(r)}if(this.inModule)for(var n=0,i=Object.keys(this.undefinedExports);n<i.length;n+=1){var s=i[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var j={kind:"loop"},H={kind:"switch"};V.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;M.lastIndex=this.pos;var e=M.exec(this.input),r=this.pos+e[0].length,n=this.input.charCodeAt(r);if(91===n)return!0;if(t)return!1;if(123===n)return!0;if(d(n,!0)){for(var i=r+1;m(this.input.charCodeAt(i),!0);)++i;var s=this.input.slice(r,i);if(!o.test(s))return!0}return!1},V.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;M.lastIndex=this.pos;var t=M.exec(this.input),e=this.pos+t[0].length;return!(E.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&m(this.input.charAt(e+8)))},V.parseStatement=function(t,e,r){var n,i=this.type,s=this.startNode();switch(this.isLet(t)&&(i=w._var,n="let"),i){case w._break:case w._continue:return this.parseBreakContinueStatement(s,i.keyword);case w._debugger:return this.parseDebuggerStatement(s);case w._do:return this.parseDoStatement(s);case w._for:return this.parseForStatement(s);case w._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case w._class:return t&&this.unexpected(),this.parseClass(s,!0);case w._if:return this.parseIfStatement(s);case w._return:return this.parseReturnStatement(s);case w._switch:return this.parseSwitchStatement(s);case w._throw:return this.parseThrowStatement(s);case w._try:return this.parseTryStatement(s);case w._const:case w._var:return n=n||this.value,t&&"var"!==n&&this.unexpected(),this.parseVarStatement(s,n);case w._while:return this.parseWhileStatement(s);case w._with:return this.parseWithStatement(s);case w.braceL:return this.parseBlock(!0,s);case w.semi:return this.parseEmptyStatement(s);case w._export:case w._import:if(this.options.ecmaVersion>10&&i===w._import){M.lastIndex=this.pos;var o=M.exec(this.input),a=this.pos+o[0].length;if(40===this.input.charCodeAt(a))return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===w._import?this.parseImport(s):this.parseExport(s,r);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var u=this.value,l=this.parseExpression();return i===w.name&&"Identifier"===l.type&&this.eat(w.colon)?this.parseLabeledStatement(s,u,l,t):this.parseExpressionStatement(s,l)}},V.parseBreakContinueStatement=function(t,e){var r="break"===e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var i=this.labels[n];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(r||"loop"===i.kind))break;if(t.label&&r)break}}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")},V.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},V.parseDoStatement=function(t){return this.next(),this.labels.push(j),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},V.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(j),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var r=this.isLet();if(this.type===w._var||this.type===w._const||r){var n=this.startNode(),i=r?"let":this.value;return this.next(),this.parseVar(n,!0,i),this.finishNode(n,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===n.declarations.length?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,n)):(e>-1&&this.unexpected(e),this.parseFor(t,n))}var s=new G,o=this.parseExpression(!0,s);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,s),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},V.parseFunctionStatement=function(t,e,r){return this.next(),this.parseFunction(t,Y|(r?0:X),!1,e)},V.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},V.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},V.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push(H),this.enterScope(0);for(var r=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var n=this.type===w._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},V.parseThrowStatement=function(t){return this.next(),E.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var W=[];V.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();if(this.next(),this.eat(w.parenL)){e.param=this.parseBindingAtom();var r="Identifier"===e.param.type;this.enterScope(r?32:0),this.checkLVal(e.param,r?4:2),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},V.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},V.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(j),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},V.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},V.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},V.parseLabeledStatement=function(t,e,r,n){for(var i=0,s=this.labels;i<s.length;i+=1)s[i].name===e&&this.raise(r.start,"Label '"+e+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===w._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var u=this.labels[a];if(u.statementStart!==t.start)break;u.statementStart=this.start,u.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")},V.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},V.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(w.braceL),t&&this.enterScope(0);!this.eat(w.braceR);){var r=this.parseStatement(null);e.body.push(r)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},V.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},V.parseForIn=function(t,e){var r=this.type===w._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!r||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(r?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=r?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,r?"ForInStatement":"ForOfStatement")},V.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var n=this.startNode();if(this.parseVarId(n,r),this.eat(w.eq)?n.init=this.parseMaybeAssign(e):"const"!==r||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===n.id.type||e&&(this.type===w._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(w.comma))break}return t},V.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var Y=1,X=2;V.parseFunction=function(t,e,r,n){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===w.star&&e&X&&this.unexpected(),t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&Y&&(t.id=4&e&&this.type!==w.name?null:this.parseIdent(),!t.id||e&X||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(B(t.async,t.generator)),e&Y||(t.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,r,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(t,e&Y?"FunctionDeclaration":"FunctionExpression")},V.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},V.parseClass=function(t,e){this.next();var r=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var n=this.startNode(),i=!1;for(n.body=[],this.expect(w.braceL);!this.eat(w.braceR);){var s=this.parseClassElement(null!==t.superClass);s&&(n.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(i&&this.raise(s.start,"Duplicate constructor in the same class"),i=!0))}return t.body=this.finishNode(n,"ClassBody"),this.strict=r,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},V.parseClassElement=function(t){var e=this;if(this.eat(w.semi))return null;var r=this.startNode(),n=function(t,n){void 0===n&&(n=!1);var i=e.start,s=e.startLoc;return!(!e.eatContextual(t)||(e.type===w.parenL||n&&e.canInsertSemicolon())&&(r.key&&e.unexpected(),r.computed=!1,r.key=e.startNodeAt(i,s),r.key.name=t,e.finishNode(r.key,"Identifier"),1))};r.kind="method",r.static=n("static");var i=this.eat(w.star),s=!1;i||(this.options.ecmaVersion>=8&&n("async",!0)?(s=!0,i=this.options.ecmaVersion>=9&&this.eat(w.star)):n("get")?r.kind="get":n("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var o=r.key,a=!1;return r.computed||r.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?r.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),i&&this.raise(o.start,"Constructor can't be a generator"),s&&this.raise(o.start,"Constructor can't be an async method"),r.kind="constructor",a=t),this.parseClassMethod(r,i,s,a),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},V.parseClassMethod=function(t,e,r,n){return t.value=this.parseMethod(e,r,n),this.finishNode(t,"MethodDefinition")},V.parseClassId=function(t,e){this.type===w.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},V.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},V.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.expectContextual("from"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(w._default)){var r;if(this.checkExport(e,"default",this.lastTokStart),this.type===w._function||(r=this.isAsyncFunction())){var n=this.startNode();this.next(),r&&this.next(),t.declaration=this.parseFunction(n,4|Y,!1,r)}else if(this.type===w._class){var i=this.startNode();t.declaration=this.parseClass(i,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,o=t.specifiers;s<o.length;s+=1){var a=o[s];this.checkUnreserved(a.local),this.checkLocalExport(a.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},V.checkExport=function(t,e,r){t&&(O(t,e)&&this.raiseRecoverable(r,"Duplicate export '"+e+"'"),t[e]=!0)},V.checkPatternExport=function(t,e){var r=e.type;if("Identifier"===r)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===r)for(var n=0,i=e.properties;n<i.length;n+=1){var s=i[n];this.checkPatternExport(t,s)}else if("ArrayPattern"===r)for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(t,u)}else"Property"===r?this.checkPatternExport(t,e.value):"AssignmentPattern"===r?this.checkPatternExport(t,e.left):"RestElement"===r?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(t,e.expression)},V.checkVariableExport=function(t,e){if(t)for(var r=0,n=e;r<n.length;r+=1){var i=n[r];this.checkPatternExport(t,i.id)}},V.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},V.parseExportSpecifiers=function(t){var e=[],r=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(r)r=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,this.checkExport(t,n.exported.name,n.exported.start),e.push(this.finishNode(n,"ExportSpecifier"))}return e},V.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=W,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},V.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportSpecifier"))}return t},V.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},V.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Z=U.prototype;Z.toAssignable=function(t,e,r){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var n=0,i=t.properties;n<i.length;n+=1){var s=i[n];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,r);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return t},Z.toAssignableList=function(t,e){for(var r=t.length,n=0;n<r;n++){var i=t[n];i&&this.toAssignable(i,e)}if(r){var s=t[r-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},Z.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Z.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Z.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},Z.parseBindingList=function(t,e,r){for(var n=[],i=!0;!this.eat(t);)if(i?i=!1:this.expect(w.comma),e&&this.type===w.comma)n.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),n.push(o)}return n},Z.parseBindingListItem=function(t){return t},Z.parseMaybeDefault=function(t,e,r){if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return r;var n=this.startNodeAt(t,e);return n.left=r,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},Z.checkLVal=function(t,e,r){switch(void 0===e&&(e=0),t.type){case"Identifier":2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),r&&(O(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var n=0,i=t.properties;n<i.length;n+=1){var s=i[n];this.checkLVal(s,e,r)}break;case"Property":this.checkLVal(t.value,e,r);break;case"ArrayPattern":for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLVal(u,e,r)}break;case"AssignmentPattern":this.checkLVal(t.left,e,r);break;case"RestElement":this.checkLVal(t.argument,e,r);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,r);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var K=U.prototype;K.checkPropClash=function(t,e,r){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n,i=t.key;switch(i.type){case"Identifier":n=i.name;break;case"Literal":n=String(i.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===s&&(e.proto&&(r&&r.doubleProto<0?r.doubleProto=i.start:this.raiseRecoverable(i.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[n="$"+n];o?("init"===s?this.strict&&o.init||o.get||o.set:o.init||o[s])&&this.raiseRecoverable(i.start,"Redefinition of property"):o=e[n]={init:!1,get:!1,set:!1},o[s]=!0}}},K.parseExpression=function(t,e){var r=this.start,n=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===w.comma){var s=this.startNodeAt(r,n);for(s.expressions=[i];this.eat(w.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return i},K.parseMaybeAssign=function(t,e,r){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,i=-1,s=-1,o=-1;e?(i=e.parenthesizedAssign,s=e.trailingComma,o=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new G,n=!0);var a=this.start,u=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(t,e);if(r&&(l=r.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,c.left=this.type===w.eq?this.toAssignable(l,!1,e):l,n||G.call(e),e.shorthandAssign=-1,this.checkLVal(l),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return n&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),s>-1&&(e.trailingComma=s),o>-1&&(e.shorthandAssign=o),l},K.parseMaybeConditional=function(t,e){var r=this.start,n=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(w.question)){var s=this.startNodeAt(r,n);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(w.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return i},K.parseExprOps=function(t,e){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||i.start===r&&"ArrowFunctionExpression"===i.type?i:this.parseExprOp(i,r,n,-1,t)},K.parseExprOp=function(t,e,r,n,i){var s=this.type.binop;if(null!=s&&(!i||this.type!==w._in)&&s>n){var o=this.type===w.logicalOR||this.type===w.logicalAND,a=this.value;this.next();var u=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),u,l,s,i),p=this.buildBinary(e,r,t,c,a,o);return this.parseExprOp(p,e,r,n,i)}return t},K.buildBinary=function(t,e,r,n,i,s){var o=this.startNodeAt(t,e);return o.left=r,o.operator=i,o.right=n,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")},K.parseMaybeUnary=function(t,e){var r,n=this.start,i=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),e=!0;else if(this.type.prefix){var s=this.startNode(),o=this.type===w.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,r=this.finishNode(s,o?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var a=this.startNodeAt(n,i);a.operator=this.value,a.prefix=!1,a.argument=r,this.checkLVal(r),this.next(),r=this.finishNode(a,"UpdateExpression")}}return!e&&this.eat(w.starstar)?this.buildBinary(n,i,r,this.parseMaybeUnary(null,!1),"**",!1):r},K.parseExprSubscripts=function(t){var e=this.start,r=this.startLoc,n=this.parseExprAtom(t),i="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||i)return n;var s=this.parseSubscripts(n,e,r);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1)),s},K.parseSubscripts=function(t,e,r,n){for(var i=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var s=this.parseSubscript(t,e,r,n,i);if(s===t||"ArrowFunctionExpression"===s.type)return s;t=s}},K.parseSubscript=function(t,e,r,n,i){var s=this.eat(w.bracketL);if(s||this.eat(w.dot)){var o=this.startNodeAt(e,r);o.object=t,o.property=s?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),o.computed=!!s,s&&this.expect(w.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!n&&this.eat(w.parenL)){var a=new G,u=this.yieldPos,l=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&"Import"!==t.type,!1,a);if(i&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,r),p,!0);this.checkExpressionErrors(a,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var h=this.startNodeAt(e,r);if(h.callee=t,h.arguments=p,"Import"===h.callee.type){1!==h.arguments.length&&this.raise(h.start,"import() requires exactly one argument");var f=h.arguments[0];f&&"SpreadElement"===f.type&&this.raise(f.start,"... is not allowed in import()")}t=this.finishNode(h,"CallExpression")}else if(this.type===w.backQuote){var d=this.startNodeAt(e,r);d.tag=t,d.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(d,"TaggedTemplateExpression")}return t},K.parseExprAtom=function(t){this.type===w.slash&&this.readRegexp();var e,r=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==w.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,"Super");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case w.name:var n=this.start,i=this.startLoc,s=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(n,i),0,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(n,i),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===w.name&&!s)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,i),[o],!0)}return o;case w.regexp:var a=this.value;return(e=this.parseLiteral(a.value)).regex={pattern:a.pattern,flags:a.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case w.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(r);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),l;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>10?this.parseDynamicImport():this.unexpected();default:this.unexpected()}},K.parseDynamicImport=function(){var t=this.startNode();return this.next(),this.type!==w.parenL&&this.unexpected(),this.finishNode(t,"Import")},K.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1)),this.next(),this.finishNode(e,"Literal")},K.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},K.parseParenAndDistinguishExpression=function(t){var e,r=this.start,n=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,o=this.start,a=this.startLoc,u=[],l=!0,c=!1,p=new G,h=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(l?l=!1:this.expect(w.comma),i&&this.afterTrailingComma(w.parenR,!0)){c=!0;break}if(this.type===w.ellipsis){s=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var d=this.start,m=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=f,this.parseParenArrowList(r,n,u);u.length&&!c||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?((e=this.startNodeAt(o,a)).expressions=u,this.finishNodeAt(e,"SequenceExpression",d,m)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(r,n);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},K.parseParenItem=function(t){return t},K.parseParenArrowList=function(t,e,r){return this.parseArrowExpression(this.startNodeAt(t,e),r)};var J=[];K.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var r=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||r)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var n=this.start,i=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),n,i,!0),this.options.ecmaVersion>10&&"Import"===t.callee.type&&this.raise(t.callee.start,"Cannot use new with import(...)"),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8&&"Import"!==t.callee.type,!1):t.arguments=J,this.finishNode(t,"NewExpression")},K.parseTemplateElement=function(t){var e=t.isTagged,r=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),r.value={raw:this.value,cooked:null}):r.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),r.tail=this.type===w.backQuote,this.finishNode(r,"TemplateElement")},K.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var r=this.startNode();this.next(),r.expressions=[];var n=this.parseTemplateElement({isTagged:e});for(r.quasis=[n];!n.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),r.expressions.push(this.parseExpression()),this.expect(w.braceR),r.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(r,"TemplateLiteral")},K.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!E.test(this.input.slice(this.lastTokEnd,this.start))},K.parseObj=function(t,e){var r=this.startNode(),n=!0,i={};for(r.properties=[],this.next();!this.eat(w.braceR);){if(n)n=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,i,e),r.properties.push(s)}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")},K.parseProperty=function(t,e){var r,n,i,s,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(i=this.start,s=this.startLoc),t||(r=this.eat(w.star)));var a=this.containsEsc;return this.parsePropertyName(o),!t&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(o)?(n=!0,r=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(o,e)):n=!1,this.parsePropertyValue(o,t,r,n,i,s,e,a),this.finishNode(o,"Property")},K.parsePropertyValue=function(t,e,r,n,i,s,o,a){if((r||n)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r,n);else if(e||a||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===w.comma||this.type===w.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((r||n)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,s,t.key):this.type===w.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,s,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(r||n)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var u="get"===t.kind?0:1;if(t.value.params.length!==u){var l=t.value.start;"get"===t.kind?this.raiseRecoverable(l,"getter should have no params"):this.raiseRecoverable(l,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},K.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},K.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},K.parseMethod=function(t,e,r){var n=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|B(e,n.generator)|(r?128:0)),this.expect(w.parenL),n.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(n,"FunctionExpression")},K.parseArrowExpression=function(t,e,r){var n=this.yieldPos,i=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|B(r,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=n,this.awaitPos=i,this.awaitIdentPos=s,this.finishNode(t,"ArrowFunctionExpression")},K.parseFunctionBody=function(t,e,r){var n=e&&this.type!==w.braceL,i=this.strict,s=!1;if(n)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);i&&!o||(s=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(t,!i&&!s&&!e&&!r&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=a}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=i},K.isSimpleParamList=function(t){for(var e=0,r=t;e<r.length;e+=1)if("Identifier"!==r[e].type)return!1;return!0},K.checkParams=function(t,e){for(var r={},n=0,i=t.params;n<i.length;n+=1){var s=i[n];this.checkLVal(s,1,e?null:r)}},K.parseExprList=function(t,e,r,n){for(var i=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var o=void 0;r&&this.type===w.comma?o=null:this.type===w.ellipsis?(o=this.parseSpread(n),n&&this.type===w.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):o=this.parseMaybeAssign(!1,n),i.push(o)}return i},K.checkUnreserved=function(t){var e=t.start,r=t.end,n=t.name;this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,r).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))},K.parseIdent=function(t,e){var r=this.startNode();return this.type===w.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(r,"Identifier"),t||(this.checkUnreserved(r),"await"!==r.name||this.awaitIdentPos||(this.awaitIdentPos=r.start)),r},K.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(w.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},K.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var Q=U.prototype;Q.raise=function(t,e){var r=D(this.input,t);e+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=r,n.raisedAt=this.pos,n},Q.raiseRecoverable=Q.raise,Q.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var tt=U.prototype,et=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};tt.enterScope=function(t){this.scopeStack.push(new et(t))},tt.exitScope=function(){this.scopeStack.pop()},tt.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},tt.declareName=function(t,e,r){var n=!1;if(2===e){var i=this.currentScope();n=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&1&i.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var s=this.currentScope();n=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var a=this.scopeStack[o];if(a.lexical.indexOf(t)>-1&&!(32&a.flags&&a.lexical[0]===t)||!this.treatFunctionsAsVarInScope(a)&&a.functions.indexOf(t)>-1){n=!0;break}if(a.var.push(t),this.inModule&&1&a.flags&&delete this.undefinedExports[t],3&a.flags)break}n&&this.raiseRecoverable(r,"Identifier '"+t+"' has already been declared")},tt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},tt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},tt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},tt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var rt=function(t,e,r){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new L(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},nt=U.prototype;function it(t,e,r,n){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=r),t}nt.startNode=function(){return new rt(this,this.start,this.startLoc)},nt.startNodeAt=function(t,e){return new rt(this,t,e)},nt.finishNode=function(t,e){return it.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},nt.finishNodeAt=function(t,e,r,n){return it.call(this,t,e,r,n)};var st=function(t,e,r,n,i){this.token=t,this.isExpr=!!e,this.preserveSpace=!!r,this.override=n,this.generator=!!i},ot={b_stat:new st("{",!1),b_expr:new st("{",!0),b_tmpl:new st("${",!1),p_stat:new st("(",!1),p_expr:new st("(",!0),q_tmpl:new st("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new st("function",!1),f_expr:new st("function",!0),f_expr_gen:new st("function",!0,!1,null,!0),f_gen:new st("function",!1,!1,null,!0)},at=U.prototype;at.initialContext=function(){return[ot.b_stat]},at.braceIsBlock=function(t){var e=this.curContext();return e===ot.f_expr||e===ot.f_stat||(t!==w.colon||e!==ot.b_stat&&e!==ot.b_expr?t===w._return||t===w.name&&this.exprAllowed?E.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t===w.arrow||(t===w.braceL?e===ot.b_stat:t!==w._var&&t!==w._const&&t!==w.name&&!this.exprAllowed):!e.isExpr)},at.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},at.updateContext=function(t){var e,r=this.type;r.keyword&&t===w.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===ot.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ot.b_stat:ot.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(ot.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?ot.p_stat:ot.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){!t.beforeExpr||t===w.semi||t===w._else||t===w._return&&E.test(this.input.slice(this.lastTokEnd,this.start))||(t===w.colon||t===w.braceL)&&this.curContext()===ot.b_stat?this.context.push(ot.f_stat):this.context.push(ot.f_expr),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===ot.q_tmpl?this.context.pop():this.context.push(ot.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t===w._function){var e=this.context.length-1;this.context[e]===ot.f_expr?this.context[e]=ot.f_expr_gen:this.context[e]=ot.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==w.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var ut="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",lt={9:ut,10:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic",11:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic"},ct="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",pt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ht={9:pt,10:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",11:"Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},ft={};function dt(t){var e=ft[t]={binary:P(lt[t]+" "+ct),nonBinary:{General_Category:P(ct),Script:P(ht[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}dt(9),dt(10),dt(11);var mt=U.prototype,gt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=ft[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function yt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function vt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function bt(t){return t>=65&&t<=90||t>=97&&t<=122}function xt(t){return bt(t)||95===t}function _t(t){return xt(t)||wt(t)}function wt(t){return t>=48&&t<=57}function Et(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function St(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function At(t){return t>=48&&t<=55}gt.prototype.reset=function(t,e,r){var n=-1!==r.indexOf("u");this.start=0|t,this.source=e+"",this.flags=r,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},gt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},gt.prototype.at=function(t){var e=this.source,r=e.length;if(t>=r)return-1;var n=e.charCodeAt(t);if(!this.switchU||n<=55295||n>=57344||t+1>=r)return n;var i=e.charCodeAt(t+1);return i>=56320&&i<=57343?(n<<10)+i-56613888:n},gt.prototype.nextIndex=function(t){var e=this.source,r=e.length;if(t>=r)return r;var n,i=e.charCodeAt(t);return!this.switchU||i<=55295||i>=57344||t+1>=r||(n=e.charCodeAt(t+1))<56320||n>57343?t+1:t+2},gt.prototype.current=function(){return this.at(this.pos)},gt.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},gt.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},gt.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},mt.validateRegExpFlags=function(t){for(var e=t.validFlags,r=t.flags,n=0;n<r.length;n++){var i=r.charAt(n);-1===e.indexOf(i)&&this.raise(t.start,"Invalid regular expression flag"),r.indexOf(i,n+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},mt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},mt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,r=t.backReferenceNames;e<r.length;e+=1){var n=r[e];-1===t.groupNames.indexOf(n)&&t.raise("Invalid named capture referenced")}},mt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},mt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},mt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},mt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var r=!1;if(this.options.ecmaVersion>=9&&(r=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!r,!0}return t.pos=e,!1},mt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},mt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},mt.regexp_eatBracedQuantifier=function(t,e){var r=t.pos;if(t.eat(123)){var n=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return-1!==i&&i<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=r}return!1},mt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},mt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},mt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},mt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},mt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},mt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},mt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!vt(e)&&(t.lastIntValue=e,t.advance(),!0)},mt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,r=0;-1!==(r=t.current())&&!vt(r);)t.advance();return t.pos!==e},mt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},mt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},mt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},mt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=yt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=yt(t.lastIntValue);return!0}return!1},mt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,r=t.current();return t.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(r=t.lastIntValue),function(t){return d(t,!0)||36===t||95===t}(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},mt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,r=t.current();return t.advance(),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(r=t.lastIntValue),function(t){return m(t,!0)||36===t||95===t||8204===t||8205===t}(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},mt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},mt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var r=t.lastIntValue;if(t.switchU)return r>t.maxBackReference&&(t.maxBackReference=r),!0;if(r<=t.numCapturingParens)return!0;t.pos=e}return!1},mt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},mt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},mt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},mt.regexp_eatZero=function(t){return 48===t.current()&&!wt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},mt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},mt.regexp_eatControlLetter=function(t){var e=t.current();return!!bt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},mt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,r=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(t.switchU&&n>=55296&&n<=56319){var i=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(s>=56320&&s<=57343)return t.lastIntValue=1024*(n-55296)+(s-56320)+65536,!0}t.pos=i,t.lastIntValue=n}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(e=t.lastIntValue)>=0&&e<=1114111)return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=r}return!1},mt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},mt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},mt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},mt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var r=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,r,n),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i),!0}return!1},mt.regexp_validateUnicodePropertyNameAndValue=function(t,e,r){O(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(r)||t.raise("Invalid property value")},mt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},mt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";xt(e=t.current());)t.lastStringValue+=yt(e),t.advance();return""!==t.lastStringValue},mt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";_t(e=t.current());)t.lastStringValue+=yt(e),t.advance();return""!==t.lastStringValue},mt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},mt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},mt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var r=t.lastIntValue;!t.switchU||-1!==e&&-1!==r||t.raise("Invalid character class"),-1!==e&&-1!==r&&e>r&&t.raise("Range out of order in character class")}}},mt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var r=t.current();(99===r||At(r))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return 93!==n&&(t.lastIntValue=n,t.advance(),!0)},mt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},mt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!wt(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},mt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},mt.regexp_eatDecimalDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;wt(r=t.current());)t.lastIntValue=10*t.lastIntValue+(r-48),t.advance();return t.pos!==e},mt.regexp_eatHexDigits=function(t){var e=t.pos,r=0;for(t.lastIntValue=0;Et(r=t.current());)t.lastIntValue=16*t.lastIntValue+St(r),t.advance();return t.pos!==e},mt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var r=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*r+t.lastIntValue:t.lastIntValue=8*e+r}else t.lastIntValue=e;return!0}return!1},mt.regexp_eatOctalDigit=function(t){var e=t.current();return At(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},mt.regexp_eatFixedHexDigits=function(t,e){var r=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var i=t.current();if(!Et(i))return t.pos=r,!1;t.lastIntValue=16*t.lastIntValue+St(i),t.advance()}return!0};var Nt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new L(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Mt=U.prototype;function kt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Mt.next=function(){this.options.onToken&&this.options.onToken(new Nt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Mt.getToken=function(){return this.next(),new Nt(this)},"undefined"!=typeof Symbol&&(Mt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),Mt.curContext=function(){return this.context[this.context.length-1]},Mt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Mt.readToken=function(t){return d(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Mt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Mt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),r=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(S.lastIndex=r;(t=S.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,n),r,this.pos,e,this.curPosition())},Mt.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!A(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())},Mt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&N.test(String.fromCharCode(t))))break t;++this.pos}}},Mt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)},Mt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},Mt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},Mt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1,n=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++r,n=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,r+1):this.finishOp(n,r)},Mt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?w.logicalOR:w.logicalAND,2):61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},Mt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},Mt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!E.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},Mt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(w.assign,r+1):this.finishOp(w.bitShift,r)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(r=2),this.finishOp(w.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Mt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},Mt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 63:return++this.pos,this.finishToken(w.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+kt(t)+"'")},Mt.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)},Mt.readRegexp=function(){for(var t,e,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(E.test(n)&&this.raise(r,"Unterminated regular expression"),t)t=!1;else{if("["===n)e=!0;else if("]"===n&&e)e=!1;else if("/"===n&&!e)break;t="\\"===n}++this.pos}var i=this.input.slice(r,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new gt(this));a.reset(r,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch(t){}return this.finishToken(w.regexp,{pattern:i,flags:o,value:u})},Mt.readInt=function(t,e){for(var r=this.pos,n=0,i=0,s=null==e?1/0:e;i<s;++i){var o,a=this.input.charCodeAt(this.pos);if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++this.pos,n=n*t+o}return this.pos===r||null!=e&&this.pos-r!==e?null:n},Mt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var r=this.readInt(t);return null==r&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(r="undefined"!=typeof BigInt?BigInt(this.input.slice(e,this.pos)):null,++this.pos):d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,r)},Mt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var r=this.pos-e>=2&&48===this.input.charCodeAt(e);r&&this.strict&&this.raise(e,"Invalid number"),r&&/[89]/.test(this.input.slice(e,this.pos))&&(r=!1);var n=this.input.charCodeAt(this.pos);if(!r&&!t&&this.options.ecmaVersion>=11&&110===n){var i=this.input.slice(e,this.pos),s="undefined"!=typeof BigInt?BigInt(i):null;return++this.pos,d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,s)}46!==n||r||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||r||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),d(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=this.input.slice(e,this.pos),a=r?parseInt(o,8):parseFloat(o);return this.finishToken(w.num,a)},Mt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Mt.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):(A(n,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(w.string,e)};var Ct={};Mt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==Ct)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Mt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Ct;this.raise(t,e)},Mt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===r?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===r)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(A(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Mt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Mt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return kt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(r,8);return n>255&&(r=r.slice(0,-1),n=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return A(e)?"":String.fromCharCode(e)}},Mt.readHexChar=function(t){var e=this.pos,r=this.readInt(16,t);return null===r&&this.invalidStringToken(e,"Bad character escape sequence"),r},Mt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,r=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(m(i,n))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(r,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?d:m)(o,n)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=kt(o),r=this.pos}e=!1}return t+this.input.slice(r,this.pos)},Mt.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=x[t]),this.finishToken(e,t)};var Tt="6.4.2";function Ot(t,e){return U.parse(t,e)}function It(t,e,r){return U.parseExpressionAt(t,e,r)}function Pt(t,e){return U.tokenizer(t,e)}U.acorn={Parser:U,version:Tt,defaultOptions:q,Position:R,SourceLocation:L,getLineInfo:D,Node:rt,TokenType:g,tokTypes:w,keywordTypes:x,TokContext:st,tokContexts:ot,isIdentifierChar:m,isIdentifierStart:d,Token:Nt,isNewLine:A,lineBreak:E,lineBreakG:S,nonASCIIwhitespace:N}},13786:function(__unused_webpack_module,exports,__webpack_require__){(function(){var $,ABS,ADD,ADJ,AND,APPROXRATIO,ARCCOS,ARCCOSH,ARCSIN,ARCSINH,ARCTAN,ARCTANH,ARG,ASSUME_REAL_VARIABLES,ATOMIZE,AUTOEXPAND,BAKE,BESSELJ,BESSELY,BINDING,BINOMIAL,BINOM_check_args,BUF,C1,C2,C3,C4,C5,C6,CEILING,CHECK,CHOOSE,CIRCEXP,CLEAR,CLEARALL,CLEARPATTERNS,CLOCK,COEFF,COFACTOR,CONDENSE,CONJ,CONS,CONTRACT,COS,COSH,Condense,DEBUG,DEBUG_ABS,DEBUG_ARG,DEBUG_CLOCKFORM,DEBUG_IMAG,DEBUG_IS,DEBUG_MULTIPLY,DEBUG_POWER,DEBUG_RATIONALIZE,DEBUG_RECT,DEBUG_SIMPLIFY,DECOMP,DEFINT,DEGREE,DENOMINATOR,DERIVATIVE,DET,DET_check_arg,DIM,DIRAC,DIVISORS,DO,DOT,DOUBLE,DRAW,DRAWX,DSOLVE,E,EIGEN,EIGENVAL,EIGENVEC,EIG_N,EIG_check_arg,EIG_yydd,EIG_yyqq,ERF,ERFC,EVAL,EXP,EXPAND,EXPCOS,EXPSIN,Eval,Eval_Eval,Eval_abs,Eval_add,Eval_adj,Eval_and,Eval_approxratio,Eval_arccos,Eval_arccosh,Eval_arcsin,Eval_arcsinh,Eval_arctan,Eval_arctanh,Eval_arg,Eval_besselj,Eval_bessely,Eval_binding,Eval_binomial,Eval_ceiling,Eval_check,Eval_choose,Eval_circexp,Eval_clear,Eval_clearall,Eval_clearpatterns,Eval_clock,Eval_coeff,Eval_cofactor,Eval_condense,Eval_conj,Eval_cons,Eval_contract,Eval_cos,Eval_cosh,Eval_decomp,Eval_defint,Eval_degree,Eval_denominator,Eval_derivative,Eval_det,Eval_dim,Eval_dirac,Eval_divisors,Eval_do,Eval_dsolve,Eval_eigen,Eval_eigenval,Eval_eigenvec,Eval_erf,Eval_erfc,Eval_exp,Eval_expand,Eval_expcos,Eval_expsin,Eval_factor,Eval_factorial,Eval_factorpoly,Eval_filter,Eval_float,Eval_floor,Eval_for,Eval_function_reference,Eval_gamma,Eval_gcd,Eval_hermite,Eval_hilbert,Eval_imag,Eval_index,Eval_inner,Eval_integral,Eval_inv,Eval_invg,Eval_isinteger,Eval_isprime,Eval_laguerre,Eval_lcm,Eval_leading,Eval_legendre,Eval_log,Eval_lookup,Eval_mod,Eval_multiply,Eval_noexpand,Eval_not,Eval_nroots,Eval_number,Eval_numerator,Eval_operator,Eval_or,Eval_outer,Eval_pattern,Eval_patternsinfo,Eval_polar,Eval_power,Eval_predicate,Eval_prime,Eval_print,Eval_print2dascii,Eval_printcomputer,Eval_printhuman,Eval_printlatex,Eval_printlist,Eval_product,Eval_quote,Eval_quotient,Eval_rank,Eval_rationalize,Eval_real,Eval_rect,Eval_roots,Eval_round,Eval_setq,Eval_sgn,Eval_shape,Eval_silentpattern,Eval_simfac,Eval_simplify,Eval_sin,Eval_sinh,Eval_sqrt,Eval_stop,Eval_subst,Eval_sum,Eval_sym,Eval_symbolsinfo,Eval_tan,Eval_tanh,Eval_taylor,Eval_tensor,Eval_test,Eval_testeq,Eval_testge,Eval_testgt,Eval_testle,Eval_testlt,Eval_transpose,Eval_unit,Eval_user_function,Eval_zero,Evalpoly,FACTOR,FACTORIAL,FACTORPOLY,FILTER,FLOATF,FLOOR,FOR,FORCE_FIXED_PRINTOUT,FUNCTION,Find,GAMMA,GCD,HERMITE,HILBERT,IMAG,INDEX,INNER,INTEGRAL,INV,INVG,INV_check_arg,INV_decomp,ISINTEGER,ISPRIME,LAGUERRE,LAST,LAST_2DASCII_PRINT,LAST_FULL_PRINT,LAST_LATEX_PRINT,LAST_LIST_PRINT,LAST_PLAIN_PRINT,LAST_PRINT,LCM,LEADING,LEGENDRE,LOG,LOOKUP,M,MAXDIM,MAXPRIMETAB,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE,MAX_FIXED_PRINTOUT_DIGITS,MAX_PROGRAM_SIZE,MEQUAL,METAA,METAB,METAX,MLENGTH,MOD,MSIGN,MULTIPLY,MZERO,N,NIL,NOT,NROOTS,NROOTS_ABS,NROOTS_DELTA,NROOTS_EPSILON,NROOTS_RANDOM,NROOTS_YMAX,NROOTS_divpoly,NSYM,NUM,NUMBER,NUMERATOR,OPERATOR,OR,OUTER,PATTERN,PATTERNSINFO,PI,POLAR,POWER,PRIME,PRINT,PRINT2DASCII,PRINTFULL,PRINTLATEX,PRINTLIST,PRINTMODE_2DASCII,PRINTMODE_COMPUTER,PRINTMODE_HUMAN,PRINTMODE_LATEX,PRINTMODE_LIST,PRINTOUTRESULT,PRINTPLAIN,PRINT_LEAVE_E_ALONE,PRINT_LEAVE_X_ALONE,PRODUCT,QUOTE,QUOTIENT,RANK,RATIONALIZE,REAL,ROOTS,ROUND,SECRETX,SELFTEST,SETQ,SGN,SHAPE,SILENTPATTERN,SIMPLIFY,SIN,SINH,SPACE_BETWEEN_COLUMNS,SPACE_BETWEEN_ROWS,SQRT,STOP,STR,SUBST,SUM,SYM,SYMBOLSINFO,SYMBOL_A,SYMBOL_A_UNDERSCORE,SYMBOL_B,SYMBOL_B_UNDERSCORE,SYMBOL_C,SYMBOL_D,SYMBOL_I,SYMBOL_IDENTITY_MATRIX,SYMBOL_J,SYMBOL_N,SYMBOL_R,SYMBOL_S,SYMBOL_T,SYMBOL_X,SYMBOL_X_UNDERSCORE,SYMBOL_Y,SYMBOL_Z,TAN,TANH,TAYLOR,TENSOR,TEST,TESTEQ,TESTGE,TESTGT,TESTLE,TESTLT,TIMING_DEBUGS,TOS,TRACE,TRANSPOSE,T_DOUBLE,T_EQ,T_FUNCTION,T_GTEQ,T_INTEGER,T_LTEQ,T_NEQ,T_NEWLINE,T_QUOTASSIGN,T_STRING,T_SYMBOL,U,UNIT,USR_SYMBOLS,VERSION,YMAX,YYE,YYRECT,ZERO,__emit_char,__emit_str,__factor_add,__factorial,__is_negative,__is_radical_number,__lcm,__legendre,__legendre2,__legendre3,__normalize_radical_factors,__rationalize_tensor,_print,abs,absValFloat,absval,absval_tensor,add,addSymbolLeftOfAssignment,addSymbolRightOfAssignment,add_all,add_factor_to_accumulator,add_numbers,add_terms,addf,adj,alloc_tensor,allocatedId,any_denominators,approxAll,approxLogs,approxLogsOfRationals,approxOneRatioOnly,approxRadicals,approxRadicalsOfRationals,approxRationalsOfLogs,approxRationalsOfPowersOfE,approxRationalsOfPowersOfPI,approxRationalsOfRadicals,approxSineOfRationalMultiplesOfPI,approxSineOfRationals,approxTrigonometric,approx_just_an_integer,approx_logarithmsOfRationals,approx_nothingUseful,approx_radicalOfRatio,approx_ratioOfRadical,approx_rationalOfE,approx_rationalOfPi,approx_rationalsOfLogarithms,approx_sine_of_pi_times_rational,approx_sine_of_rational,approxratioRecursive,arccos,arccosh,arcsin,arcsinh,arctan,arctanh,areunivarpolysfactoredorexpandedform,arg,arglist,assignmentFound,avoidCalculatingPowersIntoArctans,bake,bake_poly,bake_poly_term,besselj,bessely,bigInt,bignum_factorial,bignum_float,bignum_power_number,bignum_scan_float,bignum_scan_integer,bignum_truncate,binding,binomial,buffer,build_tensor,caaddr,caadr,caar,cadaddr,cadadr,cadar,caddaddr,caddadr,caddar,caddddr,cadddr,caddr,cadr,called_from_Algebra_block,car,cdaddr,cdadr,cdar,cddaddr,cddar,cdddaddr,cddddr,cdddr,cddr,cdr,ceiling,chainOfUserSymbolsNotFunctionsBeingEvaluated,charTabIndex,chartab,checkFloatHasWorkedOutCompletely,check_esc_flag,check_stack,check_tensor_dimensions,choose,choose_check_args,circexp,clearAlgebraEnvironment,clearRenamedVariablesToAvoidBindingToExternalScope,clear_symbols,clear_term,clearall,clockform,cmpGlyphs,cmp_args,cmp_expr,cmp_terms,cmp_terms_count,codeGen,coeff,cofactor,collectLatexStringFromReturnValue,collectUserSymbols,combine_factors,combine_gammas,combine_terms,compareState,compare_numbers,compare_rationals,compare_tensors,compatible,computeDependenciesFromAlgebra,computeResultsAndJavaScriptFromAlgebra,compute_fa,conjugate,cons,consCount,contract,convert_bignum_to_double,convert_rational_to_double,copy_tensor,cosine,cosine_of_angle,cosine_of_angle_sum,count,countOccurrencesOfSymbol,count_denominators,counter,countsize,d_scalar_scalar,d_scalar_scalar_1,d_scalar_tensor,d_tensor_scalar,d_tensor_tensor,dabs,darccos,darccosh,darcsin,darcsinh,darctan,darctanh,dbesselj0,dbesseljn,dbessely0,dbesselyn,dcos,dcosh,dd,decomp,decomp_product,decomp_sum,defineSomeHandyConstants,define_user_function,defn,defn_str,degree,denominator,derf,derfc,derivative,derivative_of_integral,det,determinant,detg,dfunction,dhermite,dirac,display,display_flag,displaychar,divide,divide_numbers,divisors,divisors_onstack,divpoly,dlog,do_clearPatterns,do_clearall,do_simplify_nested_radicals,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication,dotprod_unicode,doubleToReasonableString,dpow,dpower,dproduct,draw_flag,draw_stop_return,dsgn,dsin,dsinh,dsum,dtan,dtanh,dupl,eigen,elelmIndex,elem,emit_denominator,emit_denominators,emit_expr,emit_factor,emit_factorial_function,emit_flat_tensor,emit_fraction,emit_function,emit_index_function,emit_multiply,emit_number,emit_numerators,emit_numerical_fraction,emit_power,emit_string,emit_subexpr,emit_symbol,emit_tensor,emit_tensor_inner,emit_term,emit_top_expr,emit_unsigned_expr,emit_x,equal,equaln,equalq,erfc,errorMessage,esc_flag,evaluatingAsFloats,evaluatingPolar,exec,expand,expand_get_A,expand_get_AF,expand_get_B,expand_get_C,expand_get_CF,expand_tensor,expanding,expcos,exponential,expr_level,expsin,f1,f10,f2,f3,f4,f5,f9,f_equals_a,factor,factor_a,factor_again,factor_b,factor_number,factor_small_number,factor_term,factorial,factorpoly,factors,fill_buf,filter,filter_main,filter_sum,filter_tensor,findDependenciesInScript,findPossibleClockForm,findPossibleExponentialForm,findroot,fixup_fraction,fixup_power,flag,floatToRatioRoutine,fmt_index,fmt_level,fmt_x,frame,freeze,functionInvokationsScanningStack,gamma,gamma_of_sum,gammaf,gcd,gcd_main,gcd_numbers,gcd_polys,gcd_powers_with_same_base,gcd_product_product,gcd_product_sum,gcd_sum,gcd_sum_product,gcd_sum_sum,gen,getSimpleRoots,getStateHash,get_binding,get_factor_from_complex_root,get_factor_from_real_root,get_innerprod_factors,get_next_token,get_printname,get_size,get_token,getdisplaystr,glyph,gp,guess,hasImaginaryCoeff,hasNegativeRationalExponent,hash_addition,hash_function,hash_multiplication,hash_power,hashcode_values,hashed_itab,hermite,hilbert,i1,imag,imaginaryunit,index_function,init,initNRoots,inited,inner,inner_f,input_str,integral,integral_of_form,integral_of_product,integral_of_sum,inv,inverse,invert_number,invg,isNumberOneOverSomething,isNumericAtom,isNumericAtomOrTensor,isSimpleRoot,isSmall,isSymbolLeftOfAssignment,isSymbolReclaimable,isZeroAtom,isZeroAtomOrTensor,isZeroLikeOrNonZeroLikeOrUndetermined,isZeroTensor,is_denominator,is_factor,is_small_integer,is_square_matrix,is_usr_symbol,isadd,isalnumorunderscore,isalpha,isalphaOrUnderscore,iscomplexnumber,iscomplexnumberdouble,iscons,isdenominator,isdigit,isdouble,iseveninteger,isfactor,isfactorial,isfloating,isfraction,isidentitymatrix,isimaginarynumber,isimaginarynumberdouble,isimaginaryunit,isinnerordot,isinteger,isintegerfactor,isintegerorintegerfloat,isinv,iskeyword,isminusone,isminusoneoversqrttwo,isminusoneovertwo,isminussqrtthreeovertwo,ismultiply,isnegative,isnegativenumber,isnegativeterm,isnonnegativeinteger,isnpi,isone,isoneover,isoneoversqrttwo,isoneovertwo,isplusone,isplustwo,ispolyexpandedform,ispolyexpandedform_expr,ispolyexpandedform_factor,ispolyexpandedform_term,ispolyfactoredorexpandedform,ispolyfactoredorexpandedform_factor,ispolyfactoredorexpandedform_power,isposint,ispositivenumber,ispower,isquarterturn,isrational,isspace,issqrtthree,issqrtthreeovertwo,isstr,issymbol,issymbolic,istensor,istranspose,isunderscore,isunivarpolyfactoredorexpandedform,itab,italu_hashcode,j1,laguerre,laguerre2,lastFoundSymbol,latexErrorSign,lcm,leading,legendre,length,lessp,level,list,listLength,logarithm,logbuf,lookupsTotal,lu_decomp,madd,makePositive,makeSignSameAs,make_hashed_itab,mask,mcmp,mcmpint,mdiv,mdivrem,meta_mode,mgcd,mini_solve,mint,mmod,mmul,mod,monic,move,moveTos,mp_clr_bit,mp_denominator,mp_numerator,mp_set_bit,mpow,mprime,mroot,mshiftright,msub,mtotal,multinomial_sum,multiply,multiply_all,multiply_all_noexpand,multiply_consecutive_constants,multiply_denominators,multiply_denominators_factor,multiply_denominators_term,multiply_noexpand,multiply_numbers,n_factor_number,negate,negate_expand,negate_noexpand,negate_number,new_integer,new_string,newline_flag,nil_symbols,normaliseDots,normalisedCoeff,normalize_angle,nroots_a,nroots_b,nroots_c,nroots_df,nroots_dx,nroots_fa,nroots_fb,nroots_x,nroots_y,nterms,nthCadr,numerator,numericRootOfPolynomial,o,one,oneElement,one_as_double,out_buf,out_count,out_of_memory,outer,p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,parse,parse_internal,parse_p1,parse_p2,parse_time_simplifications,partition,patternHasBeenFound,patternsinfo,performing_roots,polar,polarRectAMinusOneBase,polyform,pop,pop_double,pop_frame,pop_integer,power,power_str,power_sum,power_tensor,predefinedSymbolsInGlobalScope_doNotTrackInDependencies,prime,primetab,print2dascii,printMode,print_ABS_latex,print_ARCCOS_codegen,print_ARCSIN_codegen,print_ARCTAN_codegen,print_BINOMIAL_latex,print_COS_codegen,print_DEFINT_latex,print_DOT_codegen,print_DOT_latex,print_DO_codegen,print_FOR_codegen,print_INV_codegen,print_INV_latex,print_PRODUCT_codegen,print_PRODUCT_latex,print_SETQ_codegen,print_SIN_codegen,print_SQRT_latex,print_SUM_codegen,print_SUM_latex,print_TAN_codegen,print_TESTEQ_latex,print_TESTGE_latex,print_TESTGT_latex,print_TESTLE_latex,print_TESTLT_latex,print_TEST_codegen,print_TEST_latex,print_TRANSPOSE_codegen,print_TRANSPOSE_latex,print_UNIT_codegen,print_a_over_b,print_base,print_base_of_denom,print_char,print_denom,print_double,print_expo_of_denom,print_exponent,print_expr,print_factor,print_factorial_function,print_glyphs,print_index_function,print_list,print_multiply_sign,print_number,print_power,print_str,print_subexpr,print_tensor,print_tensor_inner,print_tensor_inner_latex,print_tensor_latex,print_term,printchar,printchar_nowrap,printline,program_buf,promote_tensor,push,pushTryNotToDuplicate,push_cars,push_double,push_factor,push_frame,push_identity_matrix,push_integer,push_rational,push_symbol,push_term_factors,push_terms,push_zero_matrix,qadd,qdiv,qmul,qpow,qpowf,quickfactor,quickpower,rational,rationalize,rationalize_coefficients,real,reciprocate,rect,recursionLevelNestedRadicalsRemoval,recursiveDependencies,ref,ref1,rememberPrint,remove_negative_exponents,reset_after_error,restore,restoreMetaBindings,rewrite_args,rewrite_args_tensor,roots,roots2,roots3,run,runUserDefinedSimplifications,save,saveMetaBindings,scalar_times_tensor,scan,scan_error,scan_expression,scan_factor,scan_function_call_with_function_name,scan_function_call_without_function_name,scan_index,scan_meta,scan_power,scan_relation,scan_stmt,scan_str,scan_string,scan_subexpr,scan_symbol,scan_tensor,scan_term,scanned,scanningParameters,setM,setSignTo,set_binding,set_component,setq_indexed,sfac_product,sfac_product_f,sgn,shape,show_power_debug,sign,sign_of_term,simfac,simfac_term,simpleComplexityMeasure,simplify,simplifyForCodeGeneration,simplify_1_in_products,simplify_main,simplify_nested_radicals,simplify_polar,simplify_polarRect,simplify_rational_expressions,simplify_rectToClock,simplify_tensor,simplify_trig,simplifyfactorials,sine,sine_of_angle,sine_of_angle_sum,skipRootVariableToBeSolved,sort_stack,square,ssqrt,stack,stackAddsCount,std_symbol,step,step2,stop,strcmp,stringsEmittedByUserPrintouts,subf,subst,subtract,subtract_numbers,swap,symbol,symbolsDependencies,symbolsHavingReassignments,symbolsInExpressionsWithoutAssignments,symbolsLeftOfAssignment,symbolsRightOfAssignment,symbolsinfo,symnum,symtab,take_care_of_nested_radicals,tangent,taylor,tensor,tensor_plus_tensor,tensor_times_scalar,testApprox,test_flag,text_metric,theRandom,token,token_buf,token_str,top,top_level_eval,tos,transform,transpose,transpose_unicode,trigmode,trivial_divide,try_kth_prime,turnErrorMessageToLatex,ucmp,unfreeze,unique,unique_f,update_token_buf,userSimplificationsInListForm,userSimplificationsInStringForm,usr_symbol,verbosing,version,will_be_displayed_as_fraction,ybinomial,ycosh,ydirac,yerf,yerfc,yfloor,yindex,yround,ysinh,yyarg,yybesselj,yybessely,yyceiling,yycondense,yycontract,yycosh,yydegree,yydetg,yydivpoly,yyerf,yyerfc,yyexpand,yyfactorpoly,yyfloat,yyfloor,yyhermite,yyhermite2,yyinvg,yylcm,yylog,yymultiply,yyouter,yypower,yyrationalize,yyround,yysgn,yysimfac,yysinh,yytangent,zero,zzfloat,hasProp={}.hasOwnProperty;for(bigInt=__webpack_require__(9787),version="1.4.0",SELFTEST=1,NSYM=1e3,DEBUG=!1,PRINTOUTRESULT=!1,PRINTMODE_LATEX="PRINTMODE_LATEX",PRINTMODE_2DASCII="PRINTMODE_2DASCII",PRINTMODE_COMPUTER="PRINTMODE_COMPUTER",PRINTMODE_HUMAN="PRINTMODE_HUMAN",PRINTMODE_LIST="PRINTMODE_LIST",printMode=PRINTMODE_COMPUTER,dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication=!0,recursionLevelNestedRadicalsRemoval=0,do_simplify_nested_radicals=!0,avoidCalculatingPowersIntoArctans=!0,rational=function(){class t{}return t.prototype.a=null,t.prototype.b=null,t}.call(this),U=function(){class t{toString(){return print_expr(this)}toLatexString(){return collectLatexStringFromReturnValue(this)}constructor(){this.cons={},this.cons.car=null,this.cons.cdr=null,this.q=new rational}}return t.prototype.cons=null,t.prototype.printname="",t.prototype.str="",t.prototype.tensor=null,t.prototype.q=null,t.prototype.d=0,t.prototype.k=0,t.prototype.tag=0,t}.call(this),errorMessage="",CONS=0,NUM=1,DOUBLE=2,STR=3,TENSOR=4,SYM=5,counter=0,ABS=counter++,ADD=counter++,ADJ=counter++,AND=counter++,APPROXRATIO=counter++,ARCCOS=counter++,ARCCOSH=counter++,ARCSIN=counter++,ARCSINH=counter++,ARCTAN=counter++,ARCTANH=counter++,ARG=counter++,ATOMIZE=counter++,BESSELJ=counter++,BESSELY=counter++,BINDING=counter++,BINOMIAL=counter++,CEILING=counter++,CHECK=counter++,CHOOSE=counter++,CIRCEXP=counter++,CLEAR=counter++,CLEARALL=counter++,CLEARPATTERNS=counter++,CLOCK=counter++,COEFF=counter++,COFACTOR=counter++,CONDENSE=counter++,CONJ=counter++,CONTRACT=counter++,COS=counter++,COSH=counter++,DECOMP=counter++,DEFINT=counter++,DEGREE=counter++,DENOMINATOR=counter++,DERIVATIVE=counter++,DET=counter++,DIM=counter++,DIRAC=counter++,DIVISORS=counter++,DO=counter++,DOT=counter++,DRAW=counter++,DSOLVE=counter++,EIGEN=counter++,EIGENVAL=counter++,EIGENVEC=counter++,ERF=counter++,ERFC=counter++,EVAL=counter++,EXP=counter++,EXPAND=counter++,EXPCOS=counter++,EXPSIN=counter++,FACTOR=counter++,FACTORIAL=counter++,FACTORPOLY=counter++,FILTER=counter++,FLOATF=counter++,FLOOR=counter++,FOR=counter++,FUNCTION=counter++,GAMMA=counter++,GCD=counter++,HERMITE=counter++,HILBERT=counter++,IMAG=counter++,INDEX=counter++,INNER=counter++,INTEGRAL=counter++,INV=counter++,INVG=counter++,ISINTEGER=counter++,ISPRIME=counter++,LAGUERRE=counter++,LCM=counter++,LEADING=counter++,LEGENDRE=counter++,LOG=counter++,LOOKUP=counter++,MOD=counter++,MULTIPLY=counter++,NOT=counter++,NROOTS=counter++,NUMBER=counter++,NUMERATOR=counter++,OPERATOR=counter++,OR=counter++,OUTER=counter++,PATTERN=counter++,PATTERNSINFO=counter++,POLAR=counter++,POWER=counter++,PRIME=counter++,PRINT_LEAVE_E_ALONE=counter++,PRINT_LEAVE_X_ALONE=counter++,PRINT=counter++,PRINT2DASCII=counter++,PRINTFULL=counter++,PRINTLATEX=counter++,PRINTLIST=counter++,PRINTPLAIN=counter++,PRODUCT=counter++,QUOTE=counter++,QUOTIENT=counter++,RANK=counter++,RATIONALIZE=counter++,REAL=counter++,ROUND=counter++,YYRECT=counter++,ROOTS=counter++,SETQ=counter++,SGN=counter++,SILENTPATTERN=counter++,SIMPLIFY=counter++,SIN=counter++,SINH=counter++,SHAPE=counter++,SQRT=counter++,STOP=counter++,SUBST=counter++,SUM=counter++,SYMBOLSINFO=counter++,TAN=counter++,TANH=counter++,TAYLOR=counter++,TEST=counter++,TESTEQ=counter++,TESTGE=counter++,TESTGT=counter++,TESTLE=counter++,TESTLT=counter++,TRANSPOSE=counter++,UNIT=counter++,ZERO=counter++,NIL=counter++,LAST=counter++,LAST_PRINT=counter++,LAST_2DASCII_PRINT=counter++,LAST_FULL_PRINT=counter++,LAST_LATEX_PRINT=counter++,LAST_LIST_PRINT=counter++,LAST_PLAIN_PRINT=counter++,AUTOEXPAND=counter++,BAKE=counter++,ASSUME_REAL_VARIABLES=counter++,TRACE=counter++,FORCE_FIXED_PRINTOUT=counter++,MAX_FIXED_PRINTOUT_DIGITS=counter++,YYE=counter++,DRAWX=counter++,METAA=counter++,METAB=counter++,METAX=counter++,SECRETX=counter++,VERSION=counter++,PI=counter++,SYMBOL_A=counter++,SYMBOL_B=counter++,SYMBOL_C=counter++,SYMBOL_D=counter++,SYMBOL_I=counter++,SYMBOL_J=counter++,SYMBOL_N=counter++,SYMBOL_R=counter++,SYMBOL_S=counter++,SYMBOL_T=counter++,SYMBOL_X=counter++,SYMBOL_Y=counter++,SYMBOL_Z=counter++,SYMBOL_IDENTITY_MATRIX=counter++,SYMBOL_A_UNDERSCORE=counter++,SYMBOL_B_UNDERSCORE=counter++,SYMBOL_X_UNDERSCORE=counter++,C1=counter++,C2=counter++,C3=counter++,C4=counter++,C5=counter++,C6=counter++,USR_SYMBOLS=counter++,E=YYE,TOS=1e5,BUF=1e4,MAX_PROGRAM_SIZE=100001,MAXPRIMETAB=1e4,MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES=5,MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE=10,MAXDIM=24,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,predefinedSymbolsInGlobalScope_doNotTrackInDependencies=["rationalize","abs","e","i","pi","sin","ceiling","cos","roots","integral","derivative","defint","sqrt","eig","cov","deig","dcov","float","floor","product","root","round","sum","test","unit"],parse_time_simplifications=!0,chainOfUserSymbolsNotFunctionsBeingEvaluated=[],stringsEmittedByUserPrintouts="",called_from_Algebra_block=!1,tensor=function(){class t{constructor(){this.dim=function(){var t,e,r;for(r=[],t=0,e=MAXDIM;0<=e?t<=e:t>=e;0<=e?t++:t--)r.push(0);return r}(),this.elem=[]}}return t.prototype.ndim=0,t.prototype.dim=null,t.prototype.nelem=0,t.prototype.elem=null,t}.call(this),display=function(){class t{}return t.prototype.h=0,t.prototype.w=0,t.prototype.n=0,t.prototype.a=[],t}.call(this),text_metric=function(){class t{}return t.prototype.ascent=0,t.prototype.descent=0,t.prototype.width=0,t}.call(this),tos=0,expanding=0,evaluatingAsFloats=0,evaluatingPolar=0,fmt_x=0,fmt_index=0,fmt_level=0,verbosing=0,primetab=function(){var t,e,r,n;for(n=[2],e=3;n.length<MAXPRIMETAB;){for(r=0,t=Math.sqrt(e);r<n.length&&n[r]<=t;){if(e%n[r]==0){r=-1;break}r++}-1!==r&&n.push(e),e+=2}return n[MAXPRIMETAB]=0,n}(),esc_flag=0,draw_flag=0,mtotal=0,trigmode=0,logbuf="",program_buf="",symtab=[],binding=[],isSymbolReclaimable=[],arglist=[],stack=[],frame=0,p0=null,p1=null,p2=null,p3=null,p4=null,p5=null,p6=null,p7=null,p8=null,p9=null,zero=null,one=null,one_as_double=null,imaginaryunit=null,out_buf="",out_count=0,test_flag=0,codeGen=!1,draw_stop_return=null,userSimplificationsInListForm=[],userSimplificationsInStringForm=[],transpose_unicode=7488,dotprod_unicode=183,symbol=function(t){return symtab[t]},iscons=function(t){return t.k===CONS},isrational=function(t){return t.k===NUM},isdouble=function(t){return t.k===DOUBLE},isNumericAtom=function(t){return isrational(t)||isdouble(t)},isstr=function(t){return t.k===STR},istensor=function(t){if(null!=t)return t.k===TENSOR},isNumericAtomOrTensor=function(t){var e,r,n,i,s;if(isNumericAtom(t)||t===symbol(SYMBOL_IDENTITY_MATRIX))return 1;if(!istensor(t)&&!isNumericAtom(t))return 0;for(n=t.tensor.nelem,e=t.tensor.elem,r=i=0,s=n;0<=s?i<s:i>s;r=0<=s?++i:--i)if(!isNumericAtomOrTensor(e[r]))return 0;return 1},issymbol=function(t){return t.k===SYM},iskeyword=function(t){return issymbol(t)&&symnum(t)<NIL},car=function(t){return iscons(t)?t.cons.car:symbol(NIL)},cdr=function(t){return iscons(t)?t.cons.cdr:symbol(NIL)},caar=function(t){return car(car(t))},cadr=function(t){return car(cdr(t))},cdar=function(t){return cdr(car(t))},cddr=function(t){return cdr(cdr(t))},caadr=function(t){return car(car(cdr(t)))},caddr=function(t){return car(cdr(cdr(t)))},cadar=function(t){return car(cdr(car(t)))},cdadr=function(t){return cdr(car(cdr(t)))},cddar=function(t){return cdr(cdr(car(t)))},cdddr=function(t){return cdr(cdr(cdr(t)))},caaddr=function(t){return car(car(cdr(cdr(t))))},cadadr=function(t){return car(cdr(car(cdr(t))))},caddar=function(t){return car(cdr(cdr(car(t))))},cdaddr=function(t){return cdr(car(cdr(cdr(t))))},cadddr=function(t){return car(cdr(cdr(cdr(t))))},cddddr=function(t){return cdr(cdr(cdr(cdr(t))))},caddddr=function(t){return car(cdr(cdr(cdr(cdr(t)))))},cadaddr=function(t){return car(cdr(car(cdr(cdr(t)))))},cddaddr=function(t){return cdr(cdr(car(cdr(cdr(t)))))},caddadr=function(t){return car(cdr(cdr(car(cdr(t)))))},cdddaddr=function(t){return cdr(cdr(cdr(car(cdr(cdr(t))))))},caddaddr=function(t){return car(cdr(cdr(car(cdr(cdr(t))))))},listLength=function(t){var e;for(e=-1;iscons(t);)t=cdr(t),e++;return e},nthCadr=function(t,e){var r;for(r=0;r<=e;)t=cdr(t),r++;return car(t)},isadd=function(t){return car(t)===symbol(ADD)},ismultiply=function(t){return car(t)===symbol(MULTIPLY)},ispower=function(t){return car(t)===symbol(POWER)},isfactorial=function(t){return car(t)===symbol(FACTORIAL)},isinnerordot=function(t){return car(t)===symbol(INNER)||car(t)===symbol(DOT)},istranspose=function(t){return car(t)===symbol(TRANSPOSE)},isinv=function(t){return car(t)===symbol(INV)},isidentitymatrix=function(t){return t===symbol(SYMBOL_IDENTITY_MATRIX)},MSIGN=function(t){return t.isPositive()?1:t.isZero()?0:-1},MLENGTH=function(t){return t.toString().length},MZERO=function(t){return t.isZero()},MEQUAL=function(t,e){return t.equals(e)},reset_after_error=function(){return moveTos(0),esc_flag=0,draw_flag=0,frame=TOS,evaluatingAsFloats=0,evaluatingPolar=0},$=null!==exports?exports:this,$.version=version,$.isadd=isadd,$.ismultiply=ismultiply,$.ispower=ispower,$.isfactorial=isfactorial,$.car=car,$.cdr=cdr,$.caar=caar,$.cadr=cadr,$.cdar=cdar,$.cddr=cddr,$.caadr=caadr,$.caddr=caddr,$.cadar=cadar,$.cdadr=cdadr,$.cddar=cddar,$.cdddr=cdddr,$.caaddr=caaddr,$.cadadr=cadadr,$.caddar=caddar,$.cdaddr=cdaddr,$.cadddr=cadddr,$.cddddr=cddddr,$.caddddr=caddddr,$.cadaddr=cadaddr,$.cddaddr=cddaddr,$.caddadr=caddadr,$.cdddaddr=cdddaddr,$.caddaddr=caddaddr,$.symbol=symbol,$.iscons=iscons,$.isrational=isrational,$.isdouble=isdouble,$.isNumericAtom=isNumericAtom,$.isstr=isstr,$.istensor=istensor,$.issymbol=issymbol,$.iskeyword=iskeyword,$.CONS=CONS,$.NUM=NUM,$.DOUBLE=DOUBLE,$.STR=STR,$.TENSOR=TENSOR,$.SYM=SYM,DEBUG_ABS=!1,Eval_abs=function(){return push(cadr(p1)),Eval(),abs()},absValFloat=function(){return Eval(),absval(),Eval(),zzfloat()},abs=function(){var t;if(t=top(),DEBUG_ABS&&console.trace(">>>>  ABS of "+t),numerator(),DEBUG_ABS&&console.log("ABS numerator "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL numerator: "+stack[tos-1]),push(t),denominator(),DEBUG_ABS&&console.log("ABS denominator: "+stack[tos-1]),absval(),DEBUG_ABS&&console.log("ABSVAL denominator: "+stack[tos-1]),divide(),DEBUG_ABS&&console.log("ABSVAL divided: "+stack[tos-1]),DEBUG_ABS)return console.log("<<<<<<<  ABS")},absval=function(){var t,e;if(save(),e=p1=pop(),DEBUG_ABS&&console.log("ABS of "+p1),isZeroAtomOrTensor(p1))return DEBUG_ABS&&console.log(" abs: "+p1+" just zero"),push(zero),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore();if(isnegativenumber(p1))return DEBUG_ABS&&console.log(" abs: "+p1+" just a negative"),push(p1),negate(),void restore();if(ispositivenumber(p1))return DEBUG_ABS&&console.log(" abs: "+p1+" just a positive"),push(p1),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore();if(p1===symbol(PI))return DEBUG_ABS&&console.log(" abs: "+p1+" of PI"),push(p1),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(ADD)&&(findPossibleClockForm(p1)||findPossibleExponentialForm(p1)||Find(p1,imaginaryunit)))return DEBUG_ABS&&console.log(" abs: "+p1+" is a sum"),DEBUG_ABS&&console.log("abs of a sum"),push(p1),rect(),p1=pop(),push(p1),real(),push_integer(2),power(),push(p1),imag(),push_integer(2),power(),add(),push_rational(1,2),power(),simplify_trig(),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))return DEBUG_ABS&&console.log(" abs: "+p1+" is -1 to any power"),evaluatingAsFloats?(DEBUG_ABS&&console.log(" abs: numeric, so result is 1.0"),push_double(1)):(DEBUG_ABS&&console.log(" abs: symbolic, so result is 1"),push_integer(1)),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(POWER)&&ispositivenumber(caddr(p1)))return DEBUG_ABS&&console.log(" abs: "+p1+" is something to the power of a positive number"),push(cadr(p1)),abs(),push(caddr(p1)),power(),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))return DEBUG_ABS&&console.log(" abs: "+p1+" is an exponential"),push(caddr(p1)),real(),exponential(),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore();if(car(p1)===symbol(MULTIPLY)){for(DEBUG_ABS&&console.log(" abs: "+p1+" is a product"),t=!1,p1=cdr(p1);iscons(p1);)push(car(p1)),absval(),t&&multiply(),t=!0,p1=cdr(p1);return DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore()}return car(p1)===symbol(ABS)?(DEBUG_ABS&&console.log(" abs: "+p1+" is abs of a abs"),push_symbol(ABS),push(cadr(p1)),list(2),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),void restore()):istensor(p1)?(absval_tensor(),void restore()):((isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),DEBUG_ABS&&console.log(" abs: "+p1+" is nothing decomposable"),push_symbol(ABS),push(p1),list(2),DEBUG_ABS&&console.log(" --\x3e ABS of "+e+" : "+stack[tos-1]),restore())},absval_tensor=function(){return 1!==p1.tensor.ndim&&stop("abs(tensor) with tensor rank > 1"),push(p1),push(p1),conjugate(),inner(),push_rational(1,2),power(),simplify(),Eval()},flag=0,Eval_add=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p2=pop(),push_terms(p2),p1=cdr(p1);return add_terms(tos-t)},stackAddsCount=0,add_terms=function(t){var e,r,n,i,s,o,a,u,l;if(stackAddsCount++,r=0,e=tos-t,DEBUG&&console.log("stack before adding terms #"+stackAddsCount),DEBUG)for(r=s=0,o=tos;0<=o?s<o:s>o;r=0<=o?++s:--s)console.log(print_list(stack[r]));for(r=n=0;n<10&&!(t<2)&&(flag=0,(l=stack.slice(e,e+t)).sort(cmp_terms),stack=stack.slice(0,e).concat(l).concat(stack.slice(e+t)),0!==flag);r=++n)t=combine_terms(e,t);switch(moveTos(e+t),t){case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:break;default:list(t),p1=pop(),push_symbol(ADD),push(p1),cons()}if(DEBUG&&console.log("stack after adding terms #"+stackAddsCount),DEBUG){for(u=[],r=i=0,a=tos;0<=a?i<a:i>a;r=0<=a?++i:--i)u.push(console.log(print_list(stack[r])));return u}},cmp_terms_count=0,cmp_terms=function(t,e){var r,n,i,s;if(cmp_terms_count++,r=0,isNumericAtom(t)&&isNumericAtom(e))return flag=1,0;if(istensor(t)&&istensor(e)){if(t.tensor.ndim<e.tensor.ndim)return-1;if(t.tensor.ndim>e.tensor.ndim)return 1;for(r=n=0,i=t.tensor.ndim;0<=i?n<i:n>i;r=0<=i?++n:--n){if(t.tensor.dim[r]<e.tensor.dim[r])return-1;if(t.tensor.dim[r]>e.tensor.dim[r])return 1}return flag=1,0}return car(t)===symbol(MULTIPLY)&&(t=cdr(t),isNumericAtom(car(t))&&(t=cdr(t),cdr(t)===symbol(NIL)&&(t=car(t)))),car(e)===symbol(MULTIPLY)&&(e=cdr(e),isNumericAtom(car(e))&&(e=cdr(e),cdr(e)===symbol(NIL)&&(e=car(e)))),0===(s=cmp_expr(t,e))&&(flag=1),s},combine_terms=function(t,e){var r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b;for(r=0;r<e-1;)if(check_esc_flag(),p3=stack[t+r],p4=stack[t+r+1],istensor(p3)&&istensor(p4)){if(push(p3),push(p4),tensor_plus_tensor(),(p1=pop())!==symbol(NIL)){for(stack[t+r]=p1,i=u=l=r+1,c=e-1;l<=c?u<c:u>c;i=l<=c?++u:--u)stack[t+i]=stack[t+i+1];e--,r--}r++}else if(istensor(p3)||istensor(p4))r++;else if(isNumericAtom(p3)&&isNumericAtom(p4)){if(push(p3),push(p4),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(i=n=p=r,h=e-2;p<=h?n<h:n>h;i=p<=h?++n:--n)stack[t+i]=stack[t+i+2];e-=2}else{for(stack[t+r]=p1,i=s=f=r+1,d=e-1;f<=d?s<d:s>d;i=f<=d?++s:--s)stack[t+i]=stack[t+i+1];e--}r--,r++}else if(isNumericAtom(p3)||isNumericAtom(p4))r++;else if(evaluatingAsFloats?(p1=one_as_double,p2=one_as_double):(p1=one,p2=one),b=0,car(p3)===symbol(MULTIPLY)&&(p3=cdr(p3),b=1,isNumericAtom(car(p3))&&(p1=car(p3),p3=cdr(p3),cdr(p3)===symbol(NIL)&&(p3=car(p3),b=0))),car(p4)===symbol(MULTIPLY)&&(p4=cdr(p4),isNumericAtom(car(p4))&&(p2=car(p4),p4=cdr(p4),cdr(p4)===symbol(NIL)&&(p4=car(p4)))),equal(p3,p4))if(push(p1),push(p2),add_numbers(),p1=pop(),isZeroAtomOrTensor(p1)){for(i=o=m=r,g=e-2;m<=g?o<g:o>g;i=m<=g?++o:--o)stack[t+i]=stack[t+i+2];e-=2,r--,r++}else{for(push(p1),b?(push(symbol(MULTIPLY)),push(p3),cons()):push(p3),multiply(),stack[t+r]=pop(),i=a=y=r+1,v=e-1;y<=v?a<v:a>v;i=y<=v?++a:--a)stack[t+i]=stack[t+i+1];e--,r--,r++}else r++;return e},push_terms=function(t){var e;if(car(t)===symbol(ADD)){for(t=cdr(t),e=[];iscons(t);)push(car(t)),e.push(t=cdr(t));return e}if(!isZeroAtom(t))return push(t)},add=function(){var t;return save(),p2=pop(),p1=pop(),t=tos,push_terms(p1),push_terms(p2),add_terms(tos-t),restore()},add_all=function(t){var e,r,n,i,s;for(r=0,save(),s=tos-t,e=tos,r=n=0,i=t;0<=i?n<i:n>i;r=0<=i?++n:--n)push_terms(stack[s+r]);return add_terms(tos-e),p1=pop(),moveTos(tos-t),push(p1),restore()},subtract=function(){return negate(),add()},Eval_adj=function(){return push(cadr(p1)),Eval(),adj()},adj=function(){var t,e,r,n,i,s,o;for(t=0,r=0,save(),p1=pop(),istensor(p1)&&2===p1.tensor.ndim&&p1.tensor.dim[0]===p1.tensor.dim[1]||stop("adj: square matrix expected"),n=p1.tensor.dim[0],(p2=alloc_tensor(n*n)).tensor.ndim=2,p2.tensor.dim[0]=n,p2.tensor.dim[1]=n,t=i=0,s=n;0<=s?i<s:i>s;t=0<=s?++i:--i)for(r=e=0,o=n;0<=o?e<o:e>o;r=0<=o?++e:--e)cofactor(p1,n,t,r),p2.tensor.elem[n*r+t]=pop();return push(p2),restore()},Eval_approxratio=function(){var t;return t=cadr(p1),push(t),approxratioRecursive()},approxratioRecursive=function(){var t,e,r,n,i;if(t=0,save(),p1=pop(),istensor(p1)){for((p4=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,t=r=0,n=p1.tensor.ndim;0<=n?r<n:r>n;t=0<=n?++r:--r)p4.tensor.dim[t]=p1.tensor.dim[t];for(t=e=0,i=p1.tensor.nelem;0<=i?e<i:e>i;t=0<=i?++e:--e)push(p1.tensor.elem[t]),approxratioRecursive(),p4.tensor.elem[t]=pop(),check_tensor_dimensions(p4);push(p4)}else p1.k===DOUBLE?(push(p1),approxOneRatioOnly()):iscons(p1)?(push(car(p1)),approxratioRecursive(),push(cdr(p1)),approxratioRecursive(),cons()):push(p1);return restore()},approxOneRatioOnly=function(){var t,e,r,n,i,s;if(zzfloat(),(n=pop()).k!==DOUBLE)return push_symbol(APPROXRATIO),push(theArgument),list(2);2===(r=(i=n.d).toString().split(".")).length?(t=r[1].length,e=1/Math.pow(10,t),s=floatToRatioRoutine(i,e),push_rational(s[0],s[1])):push_integer(i)},floatToRatioRoutine=function(t,e){var r,n,i,s,o,a,u;if(i=void 0,n=void 0,void 0,a=void 0,s=void 0,o=void 0,u=[0,0],isNaN(t))return u;if(Infinity===t)return u[0]=1,u[1]=0,u;if(-Infinity===t)return u[0]=-1,u[1]=0,u;if(r=t<0?-1:1,t=Math.abs(t),Math.abs(t-Math.floor(t))<e)return i=t*r,n=1,u[0]=i,u[1]=n,u;if(t<1e-19)return i=r,n=1e19,u[0]=i,u[1]=n,u;if(t>1e19)return i=1e19*r,n=1,u[0]=i,u[1]=n,u;for(a=t,s=0,n=1;a=1/(a-Math.floor(a)),o=n,n=n*Math.floor(a)+s,s=o,i=Math.floor(t*n+.5),Math.abs(t-i/n)>e&&a!==Math.floor(a););return i*=r,u[0]=i,u[1]=n,u},approx_just_an_integer=0,approx_sine_of_rational=1,approx_sine_of_pi_times_rational=2,approx_rationalOfPi=3,approx_radicalOfRatio=4,approx_nothingUseful=5,approx_ratioOfRadical=6,approx_rationalOfE=7,approx_logarithmsOfRationals=8,approx_rationalsOfLogarithms=9,approxRationalsOfRadicals=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g;if(2!==(g=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(p=g[1].length,f=1/Math.pow(10,p),console.log("precision: "+f),e=null,c=Number.MAX_VALUE,h=0,u=(m=[2,3,5,6,7,8,10]).length;h<u;h++)for(s=m[h],a=o=1;o<=10;a=++o)i=Math.sqrt(s)/a,Math.abs(i)>1e-10?(d=t/i,l=Math.round(d),n=Math.abs(1-d/l)):(d=1,l=1,n=Math.abs(t-i)),n<2*f&&(r=simpleComplexityMeasure(l,s,a))<c&&(c=r,e=[l+" * sqrt( "+s+" ) / "+a,approx_ratioOfRadical,l,s,a]);return e},approxRadicalsOfRationals=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v;if(2!==(v=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(h=v[1].length,d=1/Math.pow(10,h),console.log("precision: "+d),e=null,p=Number.MAX_VALUE,f=0,u=(g=[1,2,3,5,6,7,8,10]).length;f<u;f++)for(s=g[f],o=0,l=(y=[1,2,3,5,6,7,8,10]).length;o<l;o++)a=y[o],i=Math.sqrt(s/a),Math.abs(i)>1e-10?(m=t/i,c=Math.round(m),n=Math.abs(1-m/c)):(m=1,c=1,n=Math.abs(t-i)),n<2*d&&(r=simpleComplexityMeasure(c,s,a))<p&&(p=r,e=[c+" * (sqrt( "+s+" / "+a+" )",approx_radicalOfRatio,c,s,a]);return e},approxRadicals=function(t){var e,r,n,i,s;return 2!==(s=t.toString().split(".")).length?[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2]:(n=s[1].length,i=1/Math.pow(10,n),console.log("precision: "+i),null!=(r=approxRationalsOfRadicals(t))?r:null!=(e=approxRadicalsOfRationals(t))?e:null)},approxLogs=function(t){var e,r,n,i,s;return 2!==(s=t.toString().split(".")).length?[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2]:(n=s[1].length,i=1/Math.pow(10,n),console.log("precision: "+i),null!=(r=approxRationalsOfLogs(t))?r:null!=(e=approxLogsOfRationals(t))?e:null)},approxRationalsOfLogs=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d;if(2!==(d=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(c=d[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),e=null,l=Number.MAX_VALUE,s=p=2;p<=5;s=++p)for(a=o=1;o<=5;a=++o)i=Math.log(s)/a,Math.abs(i)>1e-10?(f=t/i,u=Math.round(f),n=Math.abs(1-f/u)):(f=1,u=1,n=Math.abs(t-i)),1!==u&&Math.abs(Math.floor(u/a))===Math.abs(u/a)||n<2.2*h&&(r=simpleComplexityMeasure(u,s,a))<l&&(l=r,e=[u+" * log( "+s+" ) / "+a,approx_rationalsOfLogarithms,u,s,a]);return e},approxLogsOfRationals=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d;if(2!==(d=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(c=d[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),e=null,l=Number.MAX_VALUE,s=p=1;p<=5;s=++p)for(a=o=1;o<=5;a=++o)i=Math.log(s/a),Math.abs(i)>1e-10?(f=t/i,u=Math.round(f),n=Math.abs(1-f/u)):(f=1,u=1,n=Math.abs(t-i)),n<1.96*h&&(r=simpleComplexityMeasure(u,s,a))<l&&(l=r,e=[u+" * log( "+s+" / "+a+" )",approx_logarithmsOfRationals,u,s,a]);return e},approxRationalsOfPowersOfE=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d;if(2!==(d=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(c=d[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),e=null,l=Number.MAX_VALUE,s=p=1;p<=2;s=++p)for(a=o=1;o<=12;a=++o)i=Math.pow(Math.E,s)/a,Math.abs(i)>1e-10?(f=t/i,u=Math.round(f),n=Math.abs(1-f/u)):(f=1,u=1,n=Math.abs(t-i)),n<2*h&&(r=simpleComplexityMeasure(u,s,a))<l&&(l=r,e=[u+" * (e ^ "+s+" ) / "+a,approx_rationalOfE,u,s,a]);return e},approxRationalsOfPowersOfPI=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d;if(2!==(d=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(c=d[1].length,h=1/Math.pow(10,c),console.log("precision: "+h),e=null,l=Number.MAX_VALUE,s=p=1;p<=5;s=++p)for(a=o=1;o<=12;a=++o)i=Math.pow(Math.PI,s)/a,Math.abs(i)>1e-10?(f=t/i,u=Math.round(f),n=Math.abs(1-f/u)):(f=1,u=1,n=Math.abs(t-i)),n<2*h&&(r=simpleComplexityMeasure(u,s,a))<l&&(l=r,e=[u+" * (pi ^ "+s+" ) / "+a+" )",approx_rationalOfPi,u,s,a]);return e},approxTrigonometric=function(t){var e,r,n,i,s;return 2!==(s=t.toString().split(".")).length?[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2]:(n=s[1].length,i=1/Math.pow(10,n),console.log("precision: "+i),null!=(r=approxSineOfRationals(t))?r:null!=(e=approxSineOfRationalMultiplesOfPI(t))?e:null)},approxSineOfRationals=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m;if(2!==(m=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(p=m[1].length,f=1/Math.pow(10,p),console.log("precision: "+f),e=null,c=Number.MAX_VALUE,o=h=1;h<=4;o=++h)for(u=a=1;a<=4;u=++a)i=o/u,s=Math.sin(i),Math.abs(s)>1e-10?(d=t/s,l=Math.round(d),n=Math.abs(1-d/l)):(d=1,l=1,n=Math.abs(t-s)),n<2*f&&(r=simpleComplexityMeasure(l,o,u))<c&&(c=r,e=[l+" * sin( "+o+"/"+u+" )",approx_sine_of_rational,l,o,u]);return e},approxSineOfRationalMultiplesOfPI=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m;if(2!==(m=t.toString().split(".")).length)return[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2];for(p=m[1].length,f=1/Math.pow(10,p),console.log("precision: "+f),e=null,c=Number.MAX_VALUE,o=h=1;h<=13;o=++h)for(u=a=1;a<=13;u=++a)i=o/u,s=Math.sin(Math.PI*i),Math.abs(s)>1e-10?(d=t/s,l=Math.round(d),n=Math.abs(1-d/l)):(d=1,l=1,n=Math.abs(t-s)),n<23*f&&(r=simpleComplexityMeasure(l,o,u))<c&&(c=r,e=[l+" * sin( "+o+"/"+u+" * pi )",approx_sine_of_pi_times_rational,l,o,u]);return e},approxAll=function(t){var e,r,n,i,s,o,a,u,l,c,p;return 2!==(p=t.toString().split(".")).length?[""+Math.floor(t),approx_just_an_integer,Math.floor(t),1,2]:(l=p[1].length,c=1/Math.pow(10,l),console.log("precision: "+c),u=Number.MAX_VALUE,a=0,o=null,null!=(r=approxRadicals(t))&&((a=simpleComplexityMeasure(r))<u?(console.log("better explanation by approxRadicals: "+r+" complexity: "+a),u=a,o=r):console.log("subpar explanation by approxRadicals: "+r+" complexity: "+a)),null!=(e=approxLogs(t))&&((a=simpleComplexityMeasure(e))<u?(console.log("better explanation by approxLogs: "+e+" complexity: "+a),u=a,o=e):console.log("subpar explanation by approxLogs: "+e+" complexity: "+a)),null!=(n=approxRationalsOfPowersOfE(t))&&((a=simpleComplexityMeasure(n))<u?(console.log("better explanation by approxRationalsOfPowersOfE: "+n+" complexity: "+a),u=a,o=n):console.log("subpar explanation by approxRationalsOfPowersOfE: "+n+" complexity: "+a)),null!=(i=approxRationalsOfPowersOfPI(t))&&((a=simpleComplexityMeasure(i))<u?(console.log("better explanation by approxRationalsOfPowersOfPI: "+i+" complexity: "+a),u=a,o=i):console.log("subpar explanation by approxRationalsOfPowersOfPI: "+i+" complexity: "+a)),null!=(s=approxTrigonometric(t))&&((a=simpleComplexityMeasure(s))<u?(console.log("better explanation by approxTrigonometric: "+s+" complexity: "+a),u=a,o=s):console.log("subpar explanation by approxTrigonometric: "+s+" complexity: "+a)),o)},simpleComplexityMeasure=function(t,e,r){var n;if(n=null,t instanceof Array){switch(t[1]){case approx_sine_of_pi_times_rational:n=4;break;case approx_rationalOfPi:n=Math.pow(4,Math.abs(t[3]))*Math.abs(t[2]);break;case approx_rationalOfE:n=Math.pow(3,Math.abs(t[3]))*Math.abs(t[2]);break;default:n=0}n+=Math.abs(t[2])*(Math.abs(t[3])+Math.abs(t[4]))}else n+=Math.abs(t)*(Math.abs(e)+Math.abs(r));return 1===t[2]?n-=1:n+=1,1===t[3]?n-=1:n+=1,1===t[4]?n-=1:n+=1,n<0&&(n=0),n},testApprox=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A,N,M,k,C,T,O,I,P,R,L,D,q,B,U,$,z,F,G,V,j,H,W,Y,X,Z,K,J,Q,tt,et,rt,nt,it;for(M=0,d=(L=[2,3,5,6,7,8,10]).length;M<d;M++)for(r=L[M],n=0,m=(D=[2,3,5,6,7,8,10]).length;n<m;n++)r!==(o=D[n])&&(console.log("testapproxRadicals testing: 1 * sqrt( "+r+" ) / "+o),e=r/o,tt=Math.sqrt(r)/o,j=(G=approxRadicals(tt))[2]*Math.sqrt(G[3])/G[4],Math.abs(tt-j)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+r+" ) / "+o+" . obtained: "+G));for(a=0,g=(q=[2,3,5,6,7,8,10]).length;a<g;a++)for(r=q[a],p=0,y=(B=[2,3,5,6,7,8,10]).length;p<y;p++)r!==(o=B[p])&&(console.log("testapproxRadicals testing with 4 digits: 1 * sqrt( "+r+" ) / "+o),e=r/o,tt=(T=Math.sqrt(r)/o).toFixed(4),j=(G=approxRadicals(tt))[2]*Math.sqrt(G[3])/G[4],Math.abs(T-j)>1e-15&&console.log("fail testapproxRadicals with 4 digits: 1 * sqrt( "+r+" ) / "+o+" . obtained: "+G));for(w=0,v=(U=[2,3,5,6,7,8,10]).length;w<v;w++)for(r=U[w],A=0,b=($=[2,3,5,6,7,8,10]).length;A<b;A++)r!==(o=$[A])&&(console.log("testapproxRadicals testing: 1 * sqrt( "+r+" / "+o+" )"),e=r/o,tt=Math.sqrt(r/o),null!=(G=approxRadicals(tt))&&(j=G[2]*Math.sqrt(G[3]/G[4]),G[1]===approx_radicalOfRatio&&Math.abs(tt-j)>1e-15&&console.log("fail testapproxRadicals: 1 * sqrt( "+r+" / "+o+" ) . obtained: "+G)));for(k=0,x=(z=[1,2,3,5,6,7,8,10]).length;k<x;k++)for(r=z[k],O=0,_=(F=[1,2,3,5,6,7,8,10]).length;O<_;O++)o=F[O],1===r&&1===o||(console.log("testapproxRadicals testing with 4 digits:: 1 * sqrt( "+r+" / "+o+" )"),e=r/o,tt=(T=Math.sqrt(r/o)).toFixed(4),j=(G=approxRadicals(tt))[2]*Math.sqrt(G[3]/G[4]),G[1]===approx_radicalOfRatio&&Math.abs(T-j)>1e-15&&console.log("fail testapproxRadicals with 4 digits:: 1 * sqrt( "+r+" / "+o+" ) . obtained: "+G));for(r=P=1;P<=5;r=++P)for(o=H=1;H<=5;o=++H)console.log("testApproxAll testing: 1 * log("+r+" ) / "+o),e=r/o,tt=Math.log(r)/o,j=(G=approxAll(tt))[2]*Math.log(G[3])/G[4],Math.abs(tt-j)>1e-15&&console.log("fail testApproxAll: 1 * log("+r+" ) / "+o+" . obtained: "+G);for(r=Y=1;Y<=5;r=++Y)for(o=Z=1;Z<=5;o=++Z)console.log("testApproxAll testing with 4 digits: 1 * log("+r+" ) / "+o),e=r/o,tt=(T=Math.log(r)/o).toFixed(4),j=(G=approxAll(tt))[2]*Math.log(G[3])/G[4],Math.abs(T-j)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+r+" ) / "+o+" . obtained: "+G);for(r=J=1;J<=5;r=++J)for(o=et=1;et<=5;o=++et)console.log("testApproxAll testing: 1 * log("+r+" / "+o+" )"),e=r/o,tt=Math.log(r/o),j=(G=approxAll(tt))[2]*Math.log(G[3]/G[4]),Math.abs(tt-j)>1e-15&&console.log("fail testApproxAll: 1 * log("+r+" / "+o+" ) . obtained: "+G);for(r=nt=1;nt<=5;r=++nt)for(o=i=1;i<=5;o=++i)console.log("testApproxAll testing with 4 digits: 1 * log("+r+" / "+o+" )"),e=r/o,tt=(T=Math.log(r/o)).toFixed(4),j=(G=approxAll(tt))[2]*Math.log(G[3]/G[4]),Math.abs(T-j)>1e-15&&console.log("fail testApproxAll with 4 digits: 1 * log("+r+" / "+o+" ) . obtained: "+G);for(r=u=1;u<=2;r=++u)for(o=h=1;h<=12;o=++h)console.log("testApproxAll testing: 1 * (e ^ "+r+" ) / "+o),e=r/o,tt=Math.pow(Math.E,r)/o,j=(G=approxAll(tt))[2]*Math.pow(Math.E,G[3])/G[4],Math.abs(tt-j)>1e-15&&console.log("fail testApproxAll: 1 * (e ^ "+r+" ) / "+o+" . obtained: "+G);for(r=E=1;E<=2;r=++E)for(o=N=1;N<=12;o=++N)console.log("approxRationalsOfPowersOfE testing with 4 digits: 1 * (e ^ "+r+" ) / "+o),e=r/o,tt=(T=Math.pow(Math.E,r)/o).toFixed(4),j=(G=approxRationalsOfPowersOfE(tt))[2]*Math.pow(Math.E,G[3])/G[4],Math.abs(T-j)>1e-15&&console.log("fail approxRationalsOfPowersOfE with 4 digits: 1 * (e ^ "+r+" ) / "+o+" . obtained: "+G);for(r=C=1;C<=2;r=++C)for(o=I=1;I<=12;o=++I)console.log("testApproxAll testing: 1 * pi ^ "+r+" / "+o),e=r/o,tt=Math.pow(Math.PI,r)/o,j=(G=approxAll(tt))[2]*Math.pow(Math.PI,G[3])/G[4],Math.abs(tt-j)>1e-15&&console.log("fail testApproxAll: 1 * pi ^ "+r+" / "+o+" ) . obtained: "+G);for(r=R=1;R<=2;r=++R)for(o=W=1;W<=12;o=++W)console.log("approxRationalsOfPowersOfPI testing with 4 digits: 1 * pi ^ "+r+" / "+o),e=r/o,tt=(T=Math.pow(Math.PI,r)/o).toFixed(4),j=(G=approxRationalsOfPowersOfPI(tt))[2]*Math.pow(Math.PI,G[3])/G[4],Math.abs(T-j)>1e-15&&console.log("fail approxRationalsOfPowersOfPI with 4 digits: 1 * pi ^ "+r+" / "+o+" ) . obtained: "+G);for(r=X=1;X<=4;r=++X)for(o=K=1;K<=4;o=++K)console.log("testApproxAll testing: 1 * sin( "+r+"/"+o+" )"),e=r/o,tt=Math.sin(e),V=(G=approxAll(tt))[3]/G[4],j=G[2]*Math.sin(V),Math.abs(tt-j)>1e-15&&console.log("fail testApproxAll: 1 * sin( "+r+"/"+o+" ) . obtained: "+G);for(r=Q=1;Q<=4;r=++Q)for(o=rt=1;rt<=4;o=++rt)console.log("testApproxAll testing with 5 digits: 1 * sin( "+r+"/"+o+" )"),e=r/o,tt=(T=Math.sin(e)).toFixed(5),null==(G=approxAll(tt))&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+r+"/"+o+" ) . obtained:  undefined "),V=G[3]/G[4],j=G[2]*Math.sin(V),(t=Math.abs(T-j))>1e-14&&console.log("fail testApproxAll with 5 digits: 1 * sin( "+r+"/"+o+" ) . obtained: "+G+" error: "+t);for(r=it=1;it<=4;r=++it)for(o=s=1;s<=4;o=++s)console.log("testApproxAll testing with 4 digits: 1 * sin( "+r+"/"+o+" )"),e=r/o,tt=(T=Math.sin(e)).toFixed(4),null==(G=approxAll(tt))&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+r+"/"+o+" ) . obtained:  undefined "),V=G[3]/G[4],j=G[2]*Math.sin(V),(t=Math.abs(T-j))>1e-14&&console.log("fail testApproxAll with 4 digits: 1 * sin( "+r+"/"+o+" ) . obtained: "+G+" error: "+t);for("0"!==approxAll(tt=0)[0]&&console.log("fail testApproxAll: 0"),"0"!==approxAll(tt=0)[0]&&console.log("fail testApproxAll: 0.0"),"0"!==approxAll(tt=0)[0]&&console.log("fail testApproxAll: 0.00"),"0"!==approxAll(tt=0)[0]&&console.log("fail testApproxAll: 0.000"),"0"!==approxAll(tt=0)[0]&&console.log("fail testApproxAll: 0.0000"),"1"!==approxAll(tt=1)[0]&&console.log("fail testApproxAll: 1"),"1"!==approxAll(tt=1)[0]&&console.log("fail testApproxAll: 1.0"),"1"!==approxAll(tt=1)[0]&&console.log("fail testApproxAll: 1.00"),"1"!==approxAll(tt=1)[0]&&console.log("fail testApproxAll: 1.000"),"1"!==approxAll(tt=1)[0]&&console.log("fail testApproxAll: 1.0000"),"1"!==approxAll(tt=1)[0]&&console.log("fail testApproxAll: 1.00000"),tt=Math.sqrt(2),"1 * sqrt( 2 ) / 1"!==approxAll(tt)[0]&&console.log("fail testApproxAll: Math.sqrt(2)"),"1 * sqrt( 2 ) / 1"!==approxAll(tt=1.41)[0]&&console.log("fail testApproxAll: 1.41"),"1 * sqrt( 2 ) / 1"!==approxRadicals(tt=1.4)[0]&&console.log("fail approxRadicals: 1.4"),"1 * log( 2 ) / 1"!==approxLogs(tt=.6)[0]&&console.log("fail approxLogs: 0.6"),"1 * log( 2 ) / 1"!==approxLogs(tt=.69)[0]&&console.log("fail approxLogs: 0.69"),"1 * log( 2 ) / 1"!==approxLogs(tt=.7)[0]&&console.log("fail approxLogs: 0.7"),"1 * log( 3 ) / 1"!==approxLogs(tt=1.09)[0]&&console.log("fail approxLogs: 1.09"),"1 * log( 3 ) / 1"!==approxAll(tt=1.09)[0]&&console.log("fail approxAll: 1.09"),"1 * log( 3 ) / 1"!==approxAll(tt=1.098)[0]&&console.log("fail approxAll: 1.098"),"1 * log( 3 ) / 1"!==approxAll(tt=1.1)[0]&&console.log("fail approxAll: 1.1"),"1 * log( 3 ) / 1"!==approxAll(tt=1.11)[0]&&console.log("fail approxAll: 1.11"),tt=Math.sqrt(3),"1 * sqrt( 3 ) / 1"!==approxAll(tt)[0]&&console.log("fail testApproxAll: Math.sqrt(3)"),"1"!==approxAll(tt=1)[0]&&console.log("fail testApproxAll: 1.0000"),"1 * (pi ^ 1 ) / 1 )"!==approxAll(tt=3.141592)[0]&&console.log("fail testApproxAll: 3.141592"),"10 * (pi ^ 1 ) / 1 )"!==approxAll(tt=31.41592)[0]&&console.log("fail testApproxAll: 31.41592"),"100 * (pi ^ 1 ) / 1 )"!==approxAll(tt=314.1592)[0]&&console.log("fail testApproxAll: 314.1592"),"10000000 * (pi ^ 1 ) / 1 )"!==approxAll(tt=31415926.53589793)[0]&&console.log("fail testApproxAll: 31415926.53589793"),tt=Math.sqrt(2),"2 * sin( 1/4 * pi )"!==approxTrigonometric(tt)[0]&&console.log("fail approxTrigonometric: Math.sqrt(2)"),tt=Math.sqrt(3),"2 * sin( 1/3 * pi )"!==approxTrigonometric(tt)[0]&&console.log("fail approxTrigonometric: Math.sqrt(3)"),tt=(Math.sqrt(6)-Math.sqrt(2))/4,"1 * sin( 1/12 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: (Math.sqrt(6) - Math.sqrt(2))/4"),tt=Math.sqrt(2-Math.sqrt(2))/2,"1 * sin( 1/8 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: Math.sqrt(2 - Math.sqrt(2))/2"),tt=(Math.sqrt(6)+Math.sqrt(2))/4,"1 * sin( 5/12 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: (Math.sqrt(6) + Math.sqrt(2))/4"),tt=Math.sqrt(2+Math.sqrt(3))/2,"1 * sin( 5/12 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: Math.sqrt(2 + Math.sqrt(3))/2"),tt=(Math.sqrt(5)-1)/4,"1 * sin( 1/10 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: (Math.sqrt(5) - 1)/4"),tt=Math.sqrt(10-2*Math.sqrt(5))/4,"1 * sin( 1/5 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: Math.sqrt(10 - 2*Math.sqrt(5))/4"),tt=Math.sin(Math.PI/7),"1 * sin( 1/7 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: Math.sin(Math.PI/7)"),tt=Math.sin(Math.PI/9),"1 * sin( 1/9 * pi )"!==approxAll(tt)[0]&&console.log("fail testApproxAll: Math.sin(Math.PI/9)"),"6 * (pi ^ 5 ) / 1 )"!==approxRationalsOfPowersOfPI(tt=1836.15267)[0]&&console.log("fail approxRationalsOfPowersOfPI: 1836.15267"),r=l=1;l<=13;r=++l)for(o=c=1;c<=13;o=++c)console.log("approxTrigonometric testing: 1 * sin( "+r+"/"+o+" * pi )"),e=r/o,tt=Math.sin(Math.PI*e),V=(G=approxTrigonometric(tt))[3]/G[4],j=G[2]*Math.sin(Math.PI*V),Math.abs(tt-j)>1e-15&&console.log("fail approxTrigonometric: 1 * sin( "+r+"/"+o+" * pi ) . obtained: "+G);for(r=f=1;f<=13;r=++f)for(o=S=1;S<=13;o=++S)5===r&&11===o||6===r&&11===o||(console.log("approxTrigonometric testing with 4 digits: 1 * sin( "+r+"/"+o+" * pi )"),e=r/o,tt=(T=Math.sin(Math.PI*e)).toFixed(4),V=(G=approxTrigonometric(tt))[3]/G[4],j=G[2]*Math.sin(Math.PI*V),(t=Math.abs(T-j))>1e-14&&console.log("fail approxTrigonometric with 4 digits: 1 * sin( "+r+"/"+o+" * pi ) . obtained: "+G+" error: "+t));return console.log("testApprox done")},$.approxRadicals=approxRadicals,$.approxRationalsOfLogs=approxRationalsOfLogs,$.approxAll=approxAll,$.testApprox=testApprox,Eval_arccos=function(){return push(cadr(p1)),Eval(),arccos()},arccos=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(COS))return push(cadr(p1)),void restore();if(isdouble(p1))return t=Math.acos(p1.d),push_double(t),void restore();if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return evaluatingAsFloats?push_double(Math.PI/4):(push_rational(1,4),push_symbol(PI),multiply()),void restore();if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return evaluatingAsFloats?push_double(3*Math.PI/4):(push_rational(3,4),push_symbol(PI),multiply()),void restore();if(issqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply()),void restore();if(isminussqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(5*Math.PI/6):(push_rational(5,6),push_symbol(PI),multiply()),void restore();if(!isrational(p1))return push_symbol(ARCCOS),push(p1),list(2),void restore();switch(push(p1),push_integer(2),multiply(),pop_integer()){case-2:evaluatingAsFloats?push_double(Math.PI):push_symbol(PI);break;case-1:evaluatingAsFloats?push_double(2*Math.PI/3):(push_rational(2,3),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;case 1:evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(0):push(zero);break;default:push_symbol(ARCCOS),push(p1),list(2)}return restore()},Eval_arccosh=function(){return push(cadr(p1)),Eval(),arccosh()},arccosh=function(){var t;return t=0,save(),p1=pop(),car(p1)===symbol(COSH)?(push(cadr(p1)),void restore()):isdouble(p1)?((t=p1.d)<1&&stop("arccosh function argument is less than 1.0"),t=Math.log(t+Math.sqrt(t*t-1)),push_double(t),void restore()):isplusone(p1)?(push(zero),void restore()):(push_symbol(ARCCOSH),push(p1),list(2),restore())},Eval_arcsin=function(){return push(cadr(p1)),Eval(),arcsin()},arcsin=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(SIN))return push(cadr(p1)),void restore();if(isdouble(p1))return t=Math.asin(p1.d),push_double(t),void restore();if(isoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return push_rational(1,4),push_symbol(PI),multiply(),void restore();if(isminusoneoversqrttwo(p1)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),-1,2)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),2)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2))return evaluatingAsFloats?push_double(-Math.PI/4):(push_rational(-1,4),push_symbol(PI),multiply()),void restore();if(issqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(Math.PI/3):(push_rational(1,3),push_symbol(PI),multiply()),void restore();if(isminussqrtthreeovertwo(p1))return evaluatingAsFloats?push_double(-Math.PI/3):(push_rational(-1,3),push_symbol(PI),multiply()),void restore();if(!isrational(p1))return push_symbol(ARCSIN),push(p1),list(2),void restore();switch(push(p1),push_integer(2),multiply(),pop_integer()){case-2:evaluatingAsFloats?push_double(-Math.PI/2):(push_rational(-1,2),push_symbol(PI),multiply());break;case-1:evaluatingAsFloats?push_double(-Math.PI/6):(push_rational(-1,6),push_symbol(PI),multiply());break;case 0:evaluatingAsFloats?push_double(0):push(zero);break;case 1:evaluatingAsFloats?push_double(Math.PI/6):(push_rational(1,6),push_symbol(PI),multiply());break;case 2:evaluatingAsFloats?push_double(Math.PI/2):(push_rational(1,2),push_symbol(PI),multiply());break;default:push_symbol(ARCSIN),push(p1),list(2)}return restore()},Eval_arcsinh=function(){return push(cadr(p1)),Eval(),arcsinh()},arcsinh=function(){var t;return t=0,save(),p1=pop(),car(p1)===symbol(SINH)?(push(cadr(p1)),void restore()):isdouble(p1)?(t=p1.d,t=Math.log(t+Math.sqrt(t*t+1)),push_double(t),void restore()):isZeroAtomOrTensor(p1)?(push(zero),void restore()):(push_symbol(ARCSINH),push(p1),list(2),restore())},Eval_arctan=function(){return push(cadr(p1)),Eval(),arctan()},arctan=function(){var t;return t=0,save(),p1=pop(),car(p1)===symbol(TAN)?(push(cadr(p1)),void restore()):isdouble(p1)?(t=Math.atan(p1.d),push_double(t),void restore()):isZeroAtomOrTensor(p1)?(push(zero),void restore()):isnegative(p1)?(push(p1),negate(),arctan(),negate(),void restore()):Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&(push(p1),numerator(),p2=pop(),push(p1),denominator(),p3=pop(),car(p2)===symbol(SIN)&&car(p3)===symbol(COS)&&equal(cadr(p2),cadr(p3)))?(push(cadr(p2)),void restore()):car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),-1,2)||car(p1)===symbol(MULTIPLY)&&equalq(car(cdr(p1)),1,3)&&car(car(cdr(cdr(p1))))===symbol(POWER)&&equaln(car(cdr(car(cdr(cdr(p1))))),3)&&equalq(car(cdr(cdr(car(cdr(cdr(p1)))))),1,2)?(push_rational(1,6),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),void restore()):equaln(p1,1)?(push_rational(1,4),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),void restore()):car(p1)===symbol(POWER)&&equaln(cadr(p1),3)&&equalq(caddr(p1),1,2)?(push_rational(1,3),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),multiply(),void restore()):(push_symbol(ARCTAN),push(p1),list(2),restore())},Eval_arctanh=function(){return push(cadr(p1)),Eval(),arctanh()},arctanh=function(){var t;return t=0,save(),p1=pop(),car(p1)===symbol(TANH)?(push(cadr(p1)),void restore()):isdouble(p1)?(((t=p1.d)<-1||t>1)&&stop("arctanh function argument is not in the interval [-1,1]"),t=Math.log((1+t)/(1-t))/2,push_double(t),void restore()):isZeroAtomOrTensor(p1)?(push(zero),void restore()):(push_symbol(ARCTANH),push(p1),list(2),restore())},DEBUG_ARG=!1,Eval_arg=function(){return push(cadr(p1)),Eval(),arg()},arg=function(){return save(),p1=pop(),push(p1),numerator(),yyarg(),push(p1),denominator(),yyarg(),subtract(),restore()},yyarg=function(){if(save(),p1=pop(),ispositivenumber(p1)||p1===symbol(PI))isdouble(p1)||evaluatingAsFloats?push_double(0):push_integer(0);else if(isnegativenumber(p1))isdouble(p1)||evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),negate();else if(issymbol(p1))push_symbol(ARG),push(p1),list(2);else if(car(p1)===symbol(POWER)&&equaln(cadr(p1),-1))evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),push(caddr(p1)),multiply();else if(car(p1)===symbol(POWER)&&cadr(p1)===symbol(E))push(caddr(p1)),imag();else if(car(p1)===symbol(POWER)&&isoneovertwo(caddr(p1)))DEBUG_ARG&&console.log("arg of a sqrt: "+p1),push(cadr(p1)),arg(),DEBUG_ARG&&console.log(" = 1/2 * "+stack[tos-1]),push(caddr(p1)),multiply();else if(car(p1)===symbol(MULTIPLY))for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),arg(),add(),p1=cdr(p1);else car(p1)===symbol(ADD)?(push(p1),rect(),p1=pop(),push(p1),real(),p2=pop(),push(p1),imag(),p3=pop(),isZeroAtomOrTensor(p2)?(evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),isnegative(p3)&&negate()):(push(p3),push(p2),divide(),arctan(),isnegative(p2)&&(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),isnegative(p3)?subtract():add()))):isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(ARG),push(p1),list(2)):push_integer(0);return restore()},bake=function(){var t,e,r,n,i,s;if(t=0,expanding++,save(),p1=pop(),e=ispolyexpandedform(p1,symbol(SYMBOL_S)),r=ispolyexpandedform(p1,symbol(SYMBOL_T)),n=ispolyexpandedform(p1,symbol(SYMBOL_X)),i=ispolyexpandedform(p1,symbol(SYMBOL_Y)),s=ispolyexpandedform(p1,symbol(SYMBOL_Z)),1===e&&0===r&&0===n&&0===i&&0===s)p2=symbol(SYMBOL_S),bake_poly();else if(0===e&&1===r&&0===n&&0===i&&0===s)p2=symbol(SYMBOL_T),bake_poly();else if(0===e&&0===r&&1===n&&0===i&&0===s)p2=symbol(SYMBOL_X),bake_poly();else if(0===e&&0===r&&0===n&&1===i&&0===s)p2=symbol(SYMBOL_Y),bake_poly();else if(0===e&&0===r&&0===n&&0===i&&1===s)p2=symbol(SYMBOL_Z),bake_poly();else if(iscons(p1)&&car(p1)!==symbol(FOR)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),bake(),p1=cdr(p1);list(tos-t)}else push(p1);return restore(),expanding--},polyform=function(){var t;if(t=0,save(),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2))bake_poly();else if(iscons(p1)){for(t=tos,push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),polyform(),p1=cdr(p1);list(tos-t)}else push(p1);return restore()},bake_poly=function(){var t,e,r,n,i,s;for(r=0,t=tos,n=coeff(p2,p1),e=tos,r=s=n-1;s>=0;r=s+=-1)p1=stack[t+r],bake_poly_term(r);return(i=tos-e)>1&&(list(i),push(symbol(ADD)),swap(),cons()),p1=pop(),moveTos(tos-n),push(p1)},bake_poly_term=function(t){var e,r;if(!isZeroAtomOrTensor(p1)){if(0!==t){if(e=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else equaln(p1,1)||push(p1);return 1===t?push(p2):(push(symbol(POWER)),push(p2),push_integer(t),list(3)),(r=tos-e)>1?(list(r),push(symbol(MULTIPLY)),swap(),cons()):void 0}if(car(p1)===symbol(ADD))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1)}},Eval_besselj=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),besselj()},besselj=function(){return save(),yybesselj(),restore()},yybesselj=function(){var t,e;if(t=0,p2=pop(),p1=pop(),push(p2),e=pop_integer(),isdouble(p1)&&!isNaN(e))return t=jn(e,p1.d),void push_double(t);if(isZeroAtomOrTensor(p1)&&isZeroAtomOrTensor(p2))push_integer(1);else{if(!isZeroAtomOrTensor(p1)||isNaN(e))return p2.k===NUM&&MEQUAL(p2.q.b,2)?MEQUAL(p2.q.a,1)?(evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),sine(),void multiply()):MEQUAL(p2.q.a,-1)?(evaluatingAsFloats?push_double(2/Math.PI):(push_integer(2),push_symbol(PI),divide()),push(p1),divide(),push_rational(1,2),power(),push(p1),cosine(),void multiply()):(push_integer(MSIGN(p2.q.a)),p3=pop(),push_integer(2),push(p1),divide(),push(p2),push(p3),subtract(),multiply(),push(p1),push(p2),push(p3),subtract(),besselj(),multiply(),push(p1),push(p2),push_integer(2),push(p3),multiply(),subtract(),besselj(),void subtract()):isnegativeterm(p1)?(push(p1),negate(),push(p2),power(),push(p1),push(p2),negate(),power(),multiply(),push_symbol(BESSELJ),push(p1),negate(),push(p2),list(3),void multiply()):isnegativeterm(p2)?(push_integer(-1),push(p2),power(),push_symbol(BESSELJ),push(p1),push(p2),negate(),list(3),void multiply()):(push(symbol(BESSELJ)),push(p1),push(p2),list(3));push_integer(0)}},Eval_bessely=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),bessely()},bessely=function(){return save(),yybessely(),restore()},yybessely=function(){var t,e;return t=0,p2=pop(),p1=pop(),push(p2),e=pop_integer(),isdouble(p1)&&!isNaN(e)?(t=yn(e,p1.d),void push_double(t)):isnegativeterm(p2)?(push_integer(-1),push(p2),power(),push_symbol(BESSELY),push(p1),push(p2),negate(),list(3),void multiply()):(push_symbol(BESSELY),push(p1),push(p2),void list(3))},mint=function(t){return bigInt(t)},isSmall=function(t){return t.geq(Number.MIN_SAFE_INTEGER)&&t.leq(Number.MAX_SAFE_INTEGER)},setSignTo=function(t,e){if(t.isPositive()){if(e<0)return t.multiply(bigInt(-1))}else if(e>0)return t.multiply(bigInt(-1));return t},makeSignSameAs=function(t,e){if(t.isPositive()){if(e.isNegative())return t.multiply(bigInt(-1))}else if(e.isPositive())return t.multiply(bigInt(-1));return t},makePositive=function(t){return t.isNegative()?t.multiply(bigInt(-1)):t},add_numbers=function(){var t,e;if(t=1,e=1,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),t=isdouble(p1)?p1.d:convert_rational_to_double(p1),e=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(t+e),restore();qadd()},subtract_numbers=function(){var t,e;if(t=0,e=0,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),t=isdouble(p1)?p1.d:convert_rational_to_double(p1),e=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(t-e),restore();qsub()},multiply_numbers=function(){var t,e;if(t=0,e=0,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),t=isdouble(p1)?p1.d:convert_rational_to_double(p1),e=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(t*e),restore();qmul()},divide_numbers=function(){var t,e;if(t=0,e=0,!isrational(stack[tos-1])||!isrational(stack[tos-2]))return save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("divide by zero"),t=isdouble(p1)?p1.d:convert_rational_to_double(p1),e=isdouble(p2)?p2.d:convert_rational_to_double(p2),push_double(t/e),restore();qdiv()},invert_number=function(){var t,e;return save(),p1=pop(),isZeroAtomOrTensor(p1)&&stop("divide by zero"),isdouble(p1)?(push_double(1/p1.d),void restore()):(t=bigInt(p1.q.a),e=bigInt(p1.q.b),e=makeSignSameAs(e,t),t=setSignTo(t,1),(p1=new U).k=NUM,p1.q.a=e,p1.q.b=t,push(p1),restore())},compare_rationals=function(t,e){var r,n;return r=mmul(t.q.a,e.q.b),n=mmul(t.q.b,e.q.a),mcmp(r,n)},compare_numbers=function(t,e){var r,n;return r=0,n=0,isrational(t)&&isrational(e)?compare_rationals(t,e):(r=isdouble(t)?t.d:convert_rational_to_double(t))<(n=isdouble(e)?e.d:convert_rational_to_double(e))?-1:r>n?1:0},negate_number=function(){if(save(),p1=pop(),isZeroAtomOrTensor(p1))return push(p1),void restore();switch(p1.k){case NUM:(p2=new U).k=NUM,p2.q.a=bigInt(p1.q.a.multiply(bigInt.minusOne)),p2.q.b=bigInt(p1.q.b),push(p2);break;case DOUBLE:push_double(-p1.d);break;default:stop("bug caught in mp_negate_number")}return restore()},bignum_truncate=function(){var t;return save(),p1=pop(),t=mdiv(p1.q.a,p1.q.b),(p1=new U).k=NUM,p1.q.a=t,p1.q.b=bigInt(1),push(p1),restore()},mp_numerator=function(){return save(),(p1=pop()).k!==NUM?(push(one),void restore()):((p2=new U).k=NUM,p2.q.a=bigInt(p1.q.a),p2.q.b=bigInt(1),push(p2),restore())},mp_denominator=function(){return save(),(p1=pop()).k!==NUM?(push(one),void restore()):((p2=new U).k=NUM,p2.q.a=bigInt(p1.q.b),p2.q.b=bigInt(1),push(p2),restore())},bignum_power_number=function(t){var e,r,n;return save(),p1=pop(),e=mpow(p1.q.a,Math.abs(t)),r=mpow(p1.q.b,Math.abs(t)),t<0&&(n=e,e=makeSignSameAs(e=r,r=n),r=setSignTo(r,1)),(p1=new U).k=NUM,p1.q.a=e,p1.q.b=r,push(p1),restore()},convert_bignum_to_double=function(t){return t.toJSNumber()},convert_rational_to_double=function(t){var e;return t.q,(e=t.q.a.divmod(t.q.b)).quotient+e.remainder/t.q.b.toJSNumber()},new_integer=function(t){var e;return(e=new U).k=NUM,e.q.a=bigInt(t),e.q.b=bigInt(1),e},push_integer=function(t){return DEBUG&&console.log("pushing integer "+t),push(new_integer(t))},push_double=function(t){return save(),(p1=new U).k=DOUBLE,p1.d=t,push(p1),restore()},push_rational=function(t,e){var r;return(r=new U).k=NUM,r.q.a=bigInt(t),r.q.b=bigInt(e),push(r)},pop_integer=function(){var t;switch(t=NaN,save(),(p1=pop()).k){case NUM:isinteger(p1)&&isSmall(p1.q.a)&&(t=p1.q.a.toJSNumber());break;case DOUBLE:DEBUG&&console.log("popping integer but double is found"),Math.floor(p1.d)===p1.d&&(DEBUG&&console.log("...altough it's an integer"),t=p1.d)}return restore(),t},print_double=function(t,e){var r,n;return r="",n=doubleToReasonableString(t.d),r+print_str(1===e&&"-"===n?n+1:n)},bignum_scan_integer=function(t){var e,r,n;return save(),"+"!==(n=t[r=0])&&"-"!==n||r++,e=bigInt(t.substring(r)),(p1=new U).k=NUM,p1.q.a=e,p1.q.b=bigInt(1),push(p1),"-"===n&&negate(),restore()},bignum_scan_float=function(t){return push_double(parseFloat(t))},print_number=function(t,e){var r,n,i;switch(n="",i="",t.k){case NUM:r=t.q.a.toString(),e||"-"===r[0]&&(r=r.substring(1)),printMode===PRINTMODE_LATEX&&isfraction(t)&&(r="\\frac{"+r+"}{"),n+=r,isfraction(t)&&(printMode!==PRINTMODE_LATEX&&(n+="/"),i=t.q.b.toString(),printMode===PRINTMODE_LATEX&&(i+="}"),n+=i);break;case DOUBLE:r=doubleToReasonableString(t.d),e||"-"===r[0]&&(r=r.substring(1)),n+=r}return n},gcd_numbers=function(){return save(),p2=pop(),p1=pop(),(p3=new U).k=NUM,p3.q.a=mgcd(p1.q.a,p2.q.a),p3.q.b=mgcd(p1.q.b,p2.q.b),p3.q.a=setSignTo(p3.q.a,1),push(p3),restore()},pop_double=function(){var t;switch(t=0,save(),(p1=pop()).k){case NUM:t=convert_rational_to_double(p1);break;case DOUBLE:t=p1.d;break;default:t=0}return restore(),t},bignum_float=function(){var t;return t=convert_rational_to_double(pop()),push_double(t)},bignum_factorial=function(t){return save(),(p1=new U).k=NUM,p1.q.a=__factorial(t),p1.q.b=bigInt(1),push(p1),restore()},__factorial=function(t){var e,r,n,i,s;if(n=0,0===t||1===t)return bigInt(1);if(e=bigInt(2),r=bigInt(0),3<=t)for(n=i=3,s=t;3<=s?i<=s:i>=s;n=3<=s?++i:--i)r=bigInt(n),e=mmul(e,r);return e},mask=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648],mp_set_bit=function(t,e){return console.log("not implemented yet"),t[e/32]|=mask[e%32]},mp_clr_bit=function(t,e){return console.log("not implemented yet"),t[e/32]&=~mask[e%32]},mshiftright=function(t){return t.shiftRight()},Eval_binomial=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),binomial()},binomial=function(){return save(),ybinomial(),restore()},ybinomial=function(){if(p2=pop(),p1=pop(),0!==BINOM_check_args())return push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide();push(zero)},BINOM_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_ceiling=function(){return push(cadr(p1)),Eval(),ceiling()},ceiling=function(){return save(),yyceiling(),restore()},yyceiling=function(){var t;return t=0,p1=pop(),isNumericAtom(p1)?isdouble(p1)?(t=Math.ceil(p1.d),void push_double(t)):isinteger(p1)?void push(p1):((p3=new U).k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?1:(push_integer(1),add())):(push_symbol(CEILING),push(p1),void list(2))},Eval_choose=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),choose()},choose=function(){return save(),p2=pop(),p1=pop(),0===choose_check_args()?(push_integer(0),void restore()):(push(p1),factorial(),push(p2),factorial(),divide(),push(p1),push(p2),subtract(),factorial(),divide(),restore())},choose_check_args=function(){return isNumericAtom(p1)&&lessp(p1,zero)||isNumericAtom(p2)&&lessp(p2,zero)||isNumericAtom(p1)&&isNumericAtom(p2)&&lessp(p1,p2)?0:1},Eval_circexp=function(){return push(cadr(p1)),Eval(),circexp(),Eval()},circexp=function(){var t,e,r,n;if(e=0,t=0,save(),p1=pop(),car(p1)===symbol(COS))return push(cadr(p1)),expcos(),void restore();if(car(p1)===symbol(SIN))return push(cadr(p1)),expsin(),void restore();if(car(p1)===symbol(TAN))return p1=cadr(p1),push(imaginaryunit),push(p1),multiply(),exponential(),p2=pop(),push(imaginaryunit),push(p1),multiply(),negate(),exponential(),p3=pop(),push(p3),push(p2),subtract(),push(imaginaryunit),multiply(),push(p2),push(p3),add(),divide(),void restore();if(car(p1)===symbol(COSH))return p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),add(),push_rational(1,2),multiply(),void restore();if(car(p1)===symbol(SINH))return p1=cadr(p1),push(p1),exponential(),push(p1),negate(),exponential(),subtract(),push_rational(1,2),multiply(),void restore();if(car(p1)===symbol(TANH))return p1=cadr(p1),push(p1),push_integer(2),multiply(),exponential(),p1=pop(),push(p1),push_integer(1),subtract(),push(p1),push_integer(1),add(),divide(),void restore();if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),circexp(),p1=cdr(p1);return list(tos-t),void restore()}if(p1.k===TENSOR){for(push(p1),copy_tensor(),e=r=0,n=(p1=pop()).tensor.nelem;0<=n?r<n:r>n;e=0<=n?++r:--r)push(p1.tensor.elem[e]),circexp(),p1.tensor.elem[e]=pop();return push(p1),void restore()}return push(p1),restore()},Eval_clearall=function(){return do_clearall(),push(symbol(NIL))},do_clearall=function(){return 0===test_flag&&clear_term(),do_clearPatterns(),clear_symbols(),defn(),codeGen=!1},clearall=function(){return run("clearall")},clearRenamedVariablesToAvoidBindingToExternalScope=function(){var t,e,r,n;for(n=[],t=e=0,r=symtab.length;0<=r?e<r:e>r;t=0<=r?++e:--e)-1!==symtab[t].printname.indexOf("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE")?(symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],n.push(isSymbolReclaimable[t]=!0)):n.push(void 0);return n},Eval_clear=function(){var t,e;for(p2=cdr(p1);iscons(p2);)(e=car(p2)).k!==SYM&&stop("symbol error"),t=symtab.indexOf(e),symtab[t].k=SYM,symtab[t].printname="",binding[t]=symtab[t],isSymbolReclaimable[t]=!0,p2=cdr(p2);return push(symbol(NIL))},DEBUG_CLOCKFORM=!1,Eval_clock=function(){return push(cadr(p1)),Eval(),clockform()},clockform=function(){return save(),p1=pop(),push(p1),abs(),DEBUG_CLOCKFORM&&console.log("clockform: abs of "+p1+" : "+stack[tos-1]),push_symbol(POWER),push_integer(-1),push(p1),arg(),DEBUG_CLOCKFORM&&console.log("clockform: arg of "+p1+" : "+stack[tos-1]),evaluatingAsFloats?push_double(Math.PI):push(symbol(PI)),divide(),DEBUG_CLOCKFORM&&console.log("clockform: divide : "+stack[tos-1]),list(3),DEBUG_CLOCKFORM&&console.log("clockform: power : "+stack[tos-1]),multiply(),DEBUG_CLOCKFORM&&console.log("clockform: multiply : "+stack[tos-1]),restore()},Eval_coeff=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),p3=pop(),p2=pop(),p1=pop(),p3===symbol(NIL)&&(p3=p2,p2=symbol(SYMBOL_X)),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter()},coeff=function(t,e){var r,n,i,s;for(DEBUG&&console.log("coeff: "+t+" "+e),r=0;;){if(push(e),push(t),push(zero),subst(),Eval(),n=pop(),push(n),r++,push(e),push(n),subtract(),i=pop(),equal(i,zero))return DEBUG&&console.log("coeff: result: "+r),r;push(i),push(t),s=expanding,expanding=1,divide(),expanding=s,e=pop()}},Eval_cofactor=function(){var t,e,r;return push(cadr(p1)),Eval(),p2=pop(),istensor(p2)&&2===p2.tensor.ndim&&p2.tensor.dim[0]===p2.tensor.dim[1]||stop("cofactor: 1st arg: square matrix expected"),r=p2.tensor.dim[0],push(caddr(p1)),Eval(),((t=pop_integer())<1||t>r)&&stop("cofactor: 2nd arg: row index expected"),push(cadddr(p1)),Eval(),((e=pop_integer())<1||e>r)&&stop("cofactor: 3rd arg: column index expected"),cofactor(p2,r,t-1,e-1)},cofactor=function(t,e,r,n){var i,s,o,a,u,l;for(i=0,o=0,i=a=0,u=e;0<=u?a<u:a>u;i=0<=u?++a:--a)for(o=s=0,l=e;0<=l?s<l:s>l;o=0<=l?++s:--s)i!==r&&o!==n&&push(t.tensor.elem[e*i+o]);if(determinant(e-1),(r+n)%2)return negate()},Eval_condense=function(){return push(cadr(p1)),Eval(),Condense()},Condense=function(){var t;return t=expanding,expanding=0,save(),yycondense(),restore(),expanding=t},yycondense=function(){if(p1=pop(),car(p1)===symbol(ADD)){for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),DEBUG&&console.log("calculating gcd between: "+stack[tos-1]+" and "+stack[tos-2]),gcd(),DEBUG&&console.log("partial gcd: "+stack[tos-1]),p3=cdr(p3);for(DEBUG&&console.log("condense: this is the gcd of all the terms: "+stack[tos-1]),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply_noexpand(),add(),p3=cdr(p3);return yyexpand(),push(p2),divide()}push(p1)},Eval_conj=function(){return push(cadr(p1)),Eval(),p1=pop(),push(p1),Find(p1,imaginaryunit)?conjugate():(polar(),conjugate(),clockform())},conjugate=function(){return push(imaginaryunit),push(imaginaryunit),negate(),subst(),Eval()},consCount=0,cons=function(){var t;return consCount++,DEBUG&&console.log("cons tos: "+tos+" # "+consCount),(t=new U).k=CONS,t.cons.cdr=pop(),t===t.cons.cdr&&console.log("something wrong p == its cdr"),t.cons.car=pop(),push(t)},Eval_contract=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),contract()},contract=function(){return save(),yycontract(),restore()},yycontract=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A,N;if(i=0,s=0,a=0,l=0,c=0,h=0,y=0,e=[],r=[],p3=pop(),p2=pop(),p1=pop(),!istensor(p1))return isZeroAtomOrTensor(p1)||stop("contract: tensor expected, 1st arg is not a tensor"),void push(zero);for(push(p2),c=pop_integer(),push(p3),h=pop_integer(),g=p1.tensor.ndim,(c<1||c>g||h<1||h>g||c===h||p1.tensor.dim[c-1]!==p1.tensor.dim[h-1])&&stop("contract: index out of range"),c--,h--,d=p1.tensor.dim[c],y=1,s=v=0,x=g;0<=x?v<x:v>x;s=0<=x?++v:--v)s!==c&&s!==h&&(y*=p1.tensor.dim[s]);for((p2=alloc_tensor(y)).tensor.ndim=g-2,a=0,s=o=0,_=g;0<=_?o<_:o>_;s=0<=_?++o:--o)s!==c&&s!==h&&(p2.tensor.dim[a++]=p1.tensor.dim[s]);for(t=p1.tensor.elem,n=p2.tensor.elem,s=u=0,w=g;0<=w?u<w:u>w;s=0<=w?++u:--u)e[s]=0,r[s]=p1.tensor.dim[s];for(s=p=0,E=y;0<=E?p<E:p>E;s=0<=E?++p:--p){for(push(zero),a=f=0,S=d;0<=S?f<S:f>S;a=0<=S?++f:--f){for(e[c]=a,e[h]=a,i=0,l=m=0,A=g;0<=A?m<A:m>A;l=0<=A?++m:--m)i=i*r[l]+e[l];push(t[i]),add()}for(n[s]=pop(),a=b=N=g-1;N<=0?b<=0:b>=0;a=N<=0?++b:--b)if(a!==c&&a!==h){if(++e[a]<r[a])break;e[a]=0}}return push(1===y?n[0]:p2)},Eval_cos=function(){return push(cadr(p1)),Eval(),cosine()},cosine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?cosine_of_angle_sum():cosine_of_angle(),restore()},cosine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4))return push(p1),push(p4),subtract(),p3=pop(),push(p3),cosine(),push(p4),cosine(),multiply(),push(p3),sine(),push(p4),sine(),multiply(),void subtract();p2=cdr(p2)}return cosine_of_angle()},cosine_of_angle=function(){var t,e;if(car(p1)!==symbol(ARCCOS)){if(isdouble(p1))return t=Math.cos(p1.d),Math.abs(t)<1e-10&&(t=0),void push_double(t);if(isnegative(p1)&&(push(p1),negate(),p1=pop()),car(p1)===symbol(ARCTAN))return push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),void power();if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),(e=pop_integer())<0||isNaN(e))return push(symbol(COS)),push(p1),void list(2);switch(e%360){case 90:case 270:return push_integer(0);case 60:case 300:return push_rational(1,2);case 120:case 240:return push_rational(-1,2);case 45:case 315:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 135:case 225:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 30:case 330:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 210:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 0:return push_integer(1);case 180:return push_integer(-1);default:return push(symbol(COS)),push(p1),list(2)}}else push(cadr(p1))},Eval_cosh=function(){return push(cadr(p1)),Eval(),ycosh()},ycosh=function(){return save(),yycosh(),restore()},yycosh=function(){var t;if(t=0,p1=pop(),car(p1)!==symbol(ARCCOSH)){if(isdouble(p1))return t=Math.cosh(p1.d),Math.abs(t)<1e-10&&(t=0),void push_double(t);if(!isZeroAtomOrTensor(p1))return push_symbol(COSH),push(p1),list(2);push(one)}else push(cadr(p1))},Eval_decomp=function(){var t;return save(),console.log("Eval_decomp is being called!!!!!!!!!!!!!!!!!!!!"),t=tos,push(symbol(NIL)),push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p1=pop())===symbol(NIL)?guess():push(p1),decomp(!1),list(tos-t),restore()},pushTryNotToDuplicate=function(t){if(!(tos>0&&(DEBUG&&console.log("comparing "+t+" to: "+stack[tos-1]),equal(t,stack[tos-1]))))return push(t);DEBUG&&console.log("skipping "+t+" because it's already on stack ")},decomp=function(t){if(save(),p2=pop(),p1=pop(),DEBUG&&console.log("DECOMPOSING "+p1),t){if(!iscons(p1))return DEBUG&&console.log(" ground thing: "+p1),pushTryNotToDuplicate(p1),void restore()}else if(0===Find(p1,p2))return DEBUG&&console.log(" entire expression is constant"),pushTryNotToDuplicate(p1),void restore();if(isadd(p1))return decomp_sum(t),void restore();if(ismultiply(p1))return decomp_product(t),void restore();for(DEBUG&&console.log(" naive decomp"),p3=cdr(p1),DEBUG&&console.log("startig p3: "+p3);iscons(p3);)t&&push(car(p3)),DEBUG&&console.log("recursive decomposition"),push(car(p3)),DEBUG&&console.log("car(p3): "+car(p3)),push(p2),DEBUG&&console.log("p2: "+p2),decomp(t),p3=cdr(p3);return restore()},decomp_sum=function(t){var e;for(DEBUG&&console.log(" decomposing the sum "),p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(e=tos,p3=cdr(p1);iscons(p3);)0===Find(car(p3),p2)&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-e)return add_all(tos-e),p3=pop(),pushTryNotToDuplicate(p3),push(p3),negate()},decomp_product=function(t){var e;for(DEBUG&&console.log(" decomposing the product "),p3=cdr(p1);iscons(p3);)(Find(car(p3),p2)||t)&&(push(car(p3)),push(p2),decomp(t)),p3=cdr(p3);for(e=tos,p3=cdr(p1);iscons(p3);)0===Find(car(p3),p2)&&pushTryNotToDuplicate(car(p3)),p3=cdr(p3);if(tos-e)return multiply_all(tos-e)},define_user_function=function(){return p3=caadr(p1),p4=cdadr(p1),p5=caddr(p1),issymbol(p3)||stop("function name?"),car(p5)===symbol(EVAL)&&(push(cadr(p5)),Eval(),p5=pop()),push_symbol(FUNCTION),push(p5),push(p4),list(3),p5=pop(),set_binding(p3,p5),push_symbol(NIL)},Eval_function_reference=function(){return push(p1)},Eval_defint=function(){for(push(cadr(p1)),Eval(),p2=pop(),p1=cddr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1),Eval(),p3=pop(),push(car(p1)),p1=cdr(p1),Eval(),p4=pop(),push(car(p1)),p1=cdr(p1),Eval(),p5=pop(),push(p2),push(p3),integral(),p2=pop(),push(p2),push(p3),push(p5),subst(),Eval(),push(p2),push(p3),push(p4),subst(),Eval(),subtract(),p2=pop();return push(p2)},Eval_degree=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p1=pop())===symbol(NIL)?guess():push(p1),degree()},degree=function(){return save(),p2=pop(),p1=pop(),p3=zero,yydegree(p1),push(p3),restore()},yydegree=function(t){var e;if(equal(t,p2)){if(isZeroAtomOrTensor(p3))return p3=one}else if(car(t)===symbol(POWER)){if(equal(cadr(t),p2)&&isNumericAtom(caddr(t))&&lessp(p3,caddr(t)))return p3=caddr(t)}else if(iscons(t)){for(t=cdr(t),e=[];iscons(t);)yydegree(car(t)),e.push(t=cdr(t));return e}},Eval_denominator=function(){return push(cadr(p1)),Eval(),denominator()},denominator=function(){var t,e;if(0,e=pop(),car(e)===symbol(ADD)&&(push(e),rationalize(),e=pop()),car(e)!==symbol(MULTIPLY)||isplusone(car(cdr(e))))return isrational(e)?(push(e),mp_denominator()):car(e)===symbol(POWER)&&isnegativeterm(caddr(e))?(push(e),reciprocate()):push(one);for(t=tos,e=cdr(e);iscons(e);)push(car(e)),denominator(),e=cdr(e);return multiply_all(tos-t)},Eval_derivative=function(){var t,e,r,n,i;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),e=pop_integer(),isNaN(e)&&stop("nth derivative: check n")):e=1,push(p3),e>=0)for(r=0,n=e;0<=n?r<n:r>n;0<=n?++r:--r)push(p4),derivative();else for(t=0,i=e=-e;0<=i?t<i:t>i;0<=i?++t:--t)push(p4),integral();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),(p5=pop())===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},derivative=function(){return save(),p2=pop(),p1=pop(),isNumericAtom(p2)&&stop("undefined function"),istensor(p1)?istensor(p2)?d_tensor_tensor():d_tensor_scalar():istensor(p2)?d_scalar_tensor():d_scalar_scalar(),restore()},d_scalar_scalar=function(){return issymbol(p2)?d_scalar_scalar_1():(push(p1),push(p2),push(symbol(SECRETX)),subst(),push(symbol(SECRETX)),derivative(),push(symbol(SECRETX)),push(p2),subst())},d_scalar_scalar_1=function(){if(equal(p1,p2))push(one);else if(iscons(p1))if(isadd(p1))dsum();else if(car(p1)!==symbol(MULTIPLY))if(car(p1)!==symbol(POWER))if(car(p1)!==symbol(DERIVATIVE))if(car(p1)!==symbol(LOG))if(car(p1)!==symbol(SIN))if(car(p1)!==symbol(COS))if(car(p1)!==symbol(TAN))if(car(p1)!==symbol(ARCSIN))if(car(p1)!==symbol(ARCCOS))if(car(p1)!==symbol(ARCTAN))if(car(p1)!==symbol(SINH))if(car(p1)!==symbol(COSH))if(car(p1)!==symbol(TANH))if(car(p1)!==symbol(ARCSINH))if(car(p1)!==symbol(ARCCOSH))if(car(p1)!==symbol(ARCTANH))if(car(p1)!==symbol(ABS))if(car(p1)!==symbol(SGN))if(car(p1)!==symbol(HERMITE))if(car(p1)!==symbol(ERF))if(car(p1)!==symbol(ERFC))if(car(p1)!==symbol(BESSELJ))if(car(p1)!==symbol(BESSELY)){if(car(p1)!==symbol(INTEGRAL)||caddr(p1)!==p2)return dfunction();derivative_of_integral()}else isZeroAtomOrTensor(caddr(p1))?dbessely0():dbesselyn();else isZeroAtomOrTensor(caddr(p1))?dbesselj0():dbesseljn();else derfc();else derf();else dhermite();else dsgn();else dabs();else darctanh();else darccosh();else darcsinh();else dtanh();else dcosh();else dsinh();else darctan();else darccos();else darcsin();else dtan();else dcos();else dsin();else dlog();else dd();else dpower();else dproduct();else push(zero)},dsum=function(){var t;for(t=tos,p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),derivative(),p1=cdr(p1);return add_all(tos-t)},dproduct=function(){var t,e,r,n,i,s,o;for(t=0,r=0,t=i=0,s=n=length(p1)-1;0<=s?i<s:i>s;t=0<=s?++i:--i){for(p3=cdr(p1),r=e=0,o=n;0<=o?e<o:e>o;r=0<=o?++e:--e)push(car(p3)),t===r&&(push(p2),derivative()),p3=cdr(p3);multiply_all(n)}return add_all(n)},dpower=function(){return push(caddr(p1)),push(cadr(p1)),divide(),push(cadr(p1)),push(p2),derivative(),multiply(),push(cadr(p1)),logarithm(),push(caddr(p1)),push(p2),derivative(),multiply(),add(),push(p1),multiply()},dlog=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),divide()},dd=function(){return push(cadr(p1)),push(p2),derivative(),p3=pop(),car(p3)===symbol(DERIVATIVE)?(push_symbol(DERIVATIVE),push_symbol(DERIVATIVE),push(cadr(p3)),lessp(caddr(p3),caddr(p1))?(push(caddr(p3)),list(3),push(caddr(p1))):(push(caddr(p1)),list(3),push(caddr(p3))),list(3)):(push(p3),push(caddr(p1)),derivative())},dfunction=function(){return(p3=cdr(p1))===symbol(NIL)||Find(p3,p2)?(push_symbol(DERIVATIVE),push(p1),push(p2),list(3)):push(zero)},dsin=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),multiply()},dcos=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sine(),multiply(),negate()},dtan=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),cosine(),push_integer(-2),power(),multiply()},darcsin=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply()},darccos=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),push_rational(-1,2),power(),multiply(),negate()},darctan=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),inverse(),multiply(),simplify()},dsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),multiply()},dcosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ysinh(),multiply()},dtanh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),ycosh(),push_integer(-2),power(),multiply()},darcsinh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(1),add(),push_rational(-1,2),power(),multiply()},darccosh=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(2),power(),push_integer(-1),add(),push_rational(-1,2),power(),multiply()},darctanh=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(1),push(cadr(p1)),push_integer(2),power(),subtract(),inverse(),multiply()},dabs=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),sgn(),multiply()},dsgn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),dirac(),multiply(),push_integer(2),multiply()},dhermite=function(){return push(cadr(p1)),push(p2),derivative(),push_integer(2),push(caddr(p1)),multiply(),multiply(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),hermite(),multiply()},derf=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},derfc=function(){return push(cadr(p1)),push_integer(2),power(),push_integer(-1),multiply(),exponential(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(-1,2),power(),multiply(),push_integer(-2),multiply(),push(cadr(p1)),push(p2),derivative(),multiply()},dbesselj0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesseljn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),besselj(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),besselj(),multiply(),add(),multiply()},dbessely0=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push_integer(1),besselj(),multiply(),push_integer(-1),multiply()},dbesselyn=function(){return push(cadr(p1)),push(p2),derivative(),push(cadr(p1)),push(caddr(p1)),push_integer(-1),add(),bessely(),push(caddr(p1)),push_integer(-1),multiply(),push(cadr(p1)),divide(),push(cadr(p1)),push(caddr(p1)),bessely(),multiply(),add(),multiply()},derivative_of_integral=function(){return push(cadr(p1))},DET_check_arg=function(){return istensor(p1)?2!==p1.tensor.ndim||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},det=function(){var t,e,r,n,i,s,o;if(e=0,save(),p1=pop(),0===DET_check_arg())return push_symbol(DET),push(p1),list(2),void restore();for(n=p1.tensor.nelem,t=p1.tensor.elem,e=i=0,s=n;(0<=s?i<s:i>s)&&isNumericAtom(t[e]);e=0<=s?++i:--i);if(e===n)yydetg();else{for(e=r=0,o=p1.tensor.nelem;0<=o?r<o:r>o;e=0<=o?++r:--r)push(p1.tensor.elem[e]);determinant(p1.tensor.dim[0])}return restore()},determinant=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d;for(i=0,o=0,a=0,l=0,h=0,f=0,d=0,e=[],n=tos-t*t,i=u=0,c=t;0<=c?u<c:u>c;i=0<=c?++u:--u)e[i]=i,e[i+t]=0,e[i+t+t]=1;for(f=1,push(zero);;){for(push_integer(1===f?1:-1),i=s=0,p=t;0<=p?s<p:s>p;i=0<=p?++s:--s)a=t*e[i]+i,push(stack[n+a]),multiply();for(add(),o=t-1,h=0,r=!1;;)if((l=e[t+o]+e[t+t+o])<0)e[t+t+o]=-e[t+t+o],o--;else{if(l!==o+1)break;if(0===o){r=!0;break}h++,e[t+t+o]=-e[t+t+o],o--}if(r)break;d=e[o-e[t+o]+h],e[o-e[t+o]+h]=e[o-l+h],e[o-l+h]=d,e[t+o]=l,f=-f}return stack[n]=stack[tos-1],moveTos(n+1)},detg=function(){return save(),p1=pop(),0===DET_check_arg()?(push_symbol(DET),push(p1),list(2),void restore()):(yydetg(),restore())},yydetg=function(){var t,e,r,n;for(t=0,t=r=0,n=(e=p1.tensor.dim[0])*e;0<=n?r<n:r>n;t=0<=n?++r:--r)push(p1.tensor.elem[t]);return lu_decomp(e),moveTos(tos-e*e),push(p1)},M=function(t,e,r,n){return stack[t+e*r+n]},setM=function(t,e,r,n,i){return stack[t+e*r+n]=i},lu_decomp=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v;for(e=0,n=0,s=0,r=tos-t*t,p1=one,e=l=0,c=t-1;0<=c?l<c:l>c;e=0<=c?++l:--l){if(equal(M(r,t,e,e),zero)){for(n=i=p=e+1,h=t;(p<=h?i<h:i>h)&&equal(M(r,t,n,e),zero);n=p<=h?++i:--i);if(n===t){p1=zero;break}for(s=o=f=e,d=t;f<=d?o<d:o>d;s=f<=d?++o:--o)p2=M(r,t,e,s),setM(r,t,e,s,M(r,t,n,s)),setM(r,t,n,s,p2);push(p1),negate(),p1=pop()}for(push(p1),push(M(r,t,e,e)),multiply(),p1=pop(),n=a=m=e+1,g=t;m<=g?a<g:a>g;n=m<=g?++a:--a)for(push(M(r,t,n,e)),push(M(r,t,e,e)),divide(),negate(),p2=pop(),setM(r,t,n,e,zero),s=u=y=e+1,v=t;y<=v?u<v:u>v;s=y<=v?++u:--u)push(M(r,t,e,s)),push(p2),multiply(),push(M(r,t,n,s)),add(),setM(r,t,n,s,pop())}return push(p1),push(M(r,t,t-1,t-1)),multiply(),p1=pop()},Eval_dirac=function(){return push(cadr(p1)),Eval(),dirac()},dirac=function(){return save(),ydirac(),restore()},ydirac=function(){return p1=pop(),isdouble(p1)?0===p1.d?void push_integer(1):void push_integer(0):isrational(p1)?MZERO(mmul(p1.q.a,p1.q.b))?void push_integer(1):void push_integer(0):car(p1)===symbol(POWER)?(push_symbol(DIRAC),push(cadr(p1)),void list(2)):isnegativeterm(p1)?(push_symbol(DIRAC),push(p1),negate(),void list(2)):((isnegativeterm(p1)||car(p1)===symbol(ADD)&&isnegativeterm(cadr(p1)))&&(push(p1),negate(),p1=pop()),push_symbol(DIRAC),push(p1),list(2))},divisors=function(){var t,e,r,n,i,s;for(e=0,save(),t=tos-1,divisors_onstack(),r=tos-t,(s=stack.slice(t,t+r)).sort(cmp_expr),stack=stack.slice(0,t).concat(s).concat(stack.slice(t+r)),(p1=alloc_tensor(r)).tensor.ndim=1,p1.tensor.dim[0]=r,e=n=0,i=r;0<=i?n<i:n>i;e=0<=i?++n:--n)p1.tensor.elem[e]=stack[t+e];return moveTos(t),push(p1),restore()},divisors_onstack=function(){var t,e,r,n,i,s;if(e=0,save(),p1=pop(),t=tos,isNumericAtom(p1))push(p1),factor_small_number();else if(car(p1)===symbol(ADD))push(p1),__factor_add();else if(car(p1)===symbol(MULTIPLY))for(p1=cdr(p1),isNumericAtom(car(p1))&&(push(car(p1)),factor_small_number(),p1=cdr(p1));iscons(p1);)p2=car(p1),car(p2)===symbol(POWER)?(push(cadr(p2)),push(caddr(p2))):(push(p2),push(one)),p1=cdr(p1);else car(p1)===symbol(POWER)?(push(cadr(p1)),push(caddr(p1))):(push(p1),push(one));for(r=tos,push(one),gen(t,r),e=i=0,s=n=tos-r;0<=s?i<s:i>s;e=0<=s?++i:--i)stack[t+e]=stack[r+e];return moveTos(t+n),restore()},gen=function(t,e){var r,n,i,s;if(n=0,save(),p1=pop(),t===e)return push(p1),void restore();if(p2=stack[t+0],p3=stack[t+1],push(p3),r=pop_integer(),!isNaN(r))for(n=i=0,s=Math.abs(r);0<=s?i<=s:i>=s;n=0<=s?++i:--i)push(p1),push(p2),push_integer(sign(r)*n),power(),multiply(),gen(t+2,e);return restore()},__factor_add=function(){for(save(),p1=pop(),p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);if(p2=pop(),isplusone(p2))return push(p1),push(one),void restore();if(isNumericAtom(p2))push(p2),factor_small_number();else if(car(p2)===symbol(MULTIPLY))for(p3=cdr(p2),isNumericAtom(car(p3))?(push(car(p3)),factor_small_number()):(push(car(p3)),push(one)),p3=cdr(p3);iscons(p3);)push(car(p3)),push(one),p3=cdr(p3);else push(p2),push(one);for(push(p2),inverse(),p2=pop(),push(zero),p3=cdr(p1);iscons(p3);)push(p2),push(car(p3)),multiply(),add(),p3=cdr(p3);return push(one),restore()},dpow=function(){var t,e,r,n,i,s;return t=0,e=0,i=0,n=pop_double(),0===(r=pop_double())&&n<0&&stop("divide by zero"),r>=0||n%1==0?(i=Math.pow(r,n),void push_double(i)):(i=Math.pow(Math.abs(r),n),s=Math.PI*n,n%.5==0?(t=0,e=Math.sin(s)):(t=Math.cos(s),e=Math.sin(s)),push_double(t*i),push_double(e*i),push(imaginaryunit),multiply(),add())},EIG_N=0,EIG_yydd=[],EIG_yyqq=[],Eval_eigen=function(){return 0===EIG_check_arg()&&stop("eigen: argument is not a square matrix"),eigen(EIGEN),p1=usr_symbol("D"),set_binding(p1,p2),p1=usr_symbol("Q"),set_binding(p1,p3),push(symbol(NIL))},Eval_eigenval=function(){return 0===EIG_check_arg()?(push_symbol(EIGENVAL),push(p1),void list(2)):(eigen(EIGENVAL),push(p2))},Eval_eigenvec=function(){return 0===EIG_check_arg()?(push_symbol(EIGENVEC),push(p1),void list(2)):(eigen(EIGENVEC),push(p3))},EIG_check_arg=function(){var t,e,r,n,i,s,o,a,u,l,c;if(t=0,r=0,push(cadr(p1)),Eval(),yyfloat(),Eval(),p1=pop(),!istensor(p1))return 0;for(2===p1.tensor.ndim&&p1.tensor.dim[0]===p1.tensor.dim[1]||stop("eigen: argument is not a square matrix"),t=s=0,o=EIG_N=p1.tensor.dim[0];0<=o?s<o:s>o;t=0<=o?++s:--s)for(r=e=0,a=EIG_N;0<=a?e<a:e>a;r=0<=a?++e:--e)isdouble(p1.tensor.elem[EIG_N*t+r])||stop("eigen: matrix is not numerical");for(t=n=0,u=EIG_N-1;0<=u?n<u:n>u;t=0<=u?++n:--n)for(r=i=l=t+1,c=EIG_N;l<=c?i<c:i>c;r=l<=c?++i:--i)Math.abs(p1.tensor.elem[EIG_N*t+r].d-p1.tensor.elem[EIG_N*r+t].d)>1e-10&&stop("eigen: matrix is not symmetrical");return 1},eigen=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S;for(e=0,n=0,e=u=0,h=EIG_N*EIG_N;0<=h?u<h:u>h;e=0<=h?++u:--u)EIG_yydd[e]=0;for(e=r=0,f=EIG_N*EIG_N;0<=f?r<f:r>f;e=0<=f?++r:--r)EIG_yyqq[e]=0;for(e=i=0,m=EIG_N;0<=m?i<m:i>m;e=0<=m?++i:--i)for(EIG_yydd[EIG_N*e+e]=p1.tensor.elem[EIG_N*e+e].d,n=s=g=e+1,y=EIG_N;g<=y?s<y:s>y;n=g<=y?++s:--s)EIG_yydd[EIG_N*e+n]=p1.tensor.elem[EIG_N*e+n].d,EIG_yydd[EIG_N*n+e]=p1.tensor.elem[EIG_N*e+n].d;for(e=o=0,v=EIG_N;0<=v?o<v:o>v;e=0<=v?++o:--o)for(EIG_yyqq[EIG_N*e+e]=1,n=a=b=e+1,x=EIG_N;b<=x?a<x:a>x;n=b<=x?++a:--a)EIG_yyqq[EIG_N*e+n]=0,EIG_yyqq[EIG_N*n+e]=0;for(e=l=0;l<100&&0!==step();e=++l);if(100===e&&printstr("\nnote: eigen did not converge\n"),t===EIGEN||t===EIGENVAL)for(push(p1),copy_tensor(),p2=pop(),e=c=0,_=EIG_N;0<=_?c<_:c>_;e=0<=_?++c:--c)for(n=p=0,w=EIG_N;0<=w?p<w:p>w;n=0<=w?++p:--p)push_double(EIG_yydd[EIG_N*e+n]),p2.tensor.elem[EIG_N*e+n]=pop();if(t===EIGEN||t===EIGENVEC){for(push(p1),copy_tensor(),p3=pop(),E=[],e=S=0,d=EIG_N;0<=d?S<d:S>d;e=0<=d?++S:--S)E.push(function(){var t,r,i;for(r=[],n=i=0,t=EIG_N;0<=t?i<t:i>t;n=0<=t?++i:--i)push_double(EIG_yyqq[EIG_N*e+n]),r.push(p3.tensor.elem[EIG_N*e+n]=pop());return r}());return E}},step=function(){var t,e,r,n,i,s,o,a;for(e=0,n=0,t=0,e=i=0,s=EIG_N-1;0<=s?i<s:i>s;e=0<=s?++i:--i)for(n=r=o=e+1,a=EIG_N;o<=a?r<a:r>a;n=o<=a?++r:--r)0!==EIG_yydd[EIG_N*e+n]&&(step2(e,n),t++);return t},step2=function(t,e){var r,n,i,s,o,a,u,l,c,p,h,f,d;for(o=0,f=0,n=0,h=0,d=.5*(EIG_yydd[EIG_N*t+t]-EIG_yydd[EIG_N*e+e])/EIG_yydd[EIG_N*t+e],f=1/(Math.abs(d)+Math.sqrt(d*d+1)),d<0&&(f=-f),p=f*(r=1/Math.sqrt(f*f+1)),o=a=0,u=EIG_N;0<=u?a<u:a>u;o=0<=u?++a:--a)n=EIG_yydd[EIG_N*t+o],h=EIG_yydd[EIG_N*e+o],EIG_yydd[EIG_N*t+o]=r*n+p*h,EIG_yydd[EIG_N*e+o]=r*h-p*n;for(o=i=0,l=EIG_N;0<=l?i<l:i>l;o=0<=l?++i:--i)n=EIG_yydd[EIG_N*o+t],h=EIG_yydd[EIG_N*o+e],EIG_yydd[EIG_N*o+t]=r*n+p*h,EIG_yydd[EIG_N*o+e]=r*h-p*n;for(o=s=0,c=EIG_N;0<=c?s<c:s>c;o=0<=c?++s:--s)n=EIG_yyqq[EIG_N*t+o],h=EIG_yyqq[EIG_N*e+o],EIG_yyqq[EIG_N*t+o]=r*n+p*h,EIG_yyqq[EIG_N*e+o]=r*h-p*n;return EIG_yydd[EIG_N*t+e]=0,EIG_yydd[EIG_N*e+t]=0},Eval_erf=function(){return push(cadr(p1)),Eval(),yerf()},yerf=function(){return save(),yyerf(),restore()},yyerf=function(){var t;if(t=0,p1=pop(),isdouble(p1))return t=1-erfc(p1.d),void push_double(t);if(isZeroAtomOrTensor(p1))push(zero);else{if(isnegativeterm(p1))return push_symbol(ERF),push(p1),negate(),list(2),void negate();push_symbol(ERF),push(p1),list(2)}},Eval_erfc=function(){return push(cadr(p1)),Eval(),yerfc()},yerfc=function(){return save(),yyerfc(),restore()},yyerfc=function(){var t;if(t=0,p1=pop(),isdouble(p1))return t=erfc(p1.d),void push_double(t);isZeroAtomOrTensor(p1)?push(one):(push_symbol(ERFC),push(p1),list(2))},erfc=function(t){var e,r,n;return 0===t?1:(e=(r=1/(1+.5*(n=Math.abs(t))))*Math.exp(-n*n-1.26551223+r*(1.00002368+r*(.37409196+r*(.09678418+r*(r*(.27886807+r*(r*(1.48851587+r*(.17087277*r-.82215223))-1.13520398))-.18628806))))),t>=0?e:2-e)},Eval=function(){var t;switch(check_esc_flag(),save(),p1=pop(),!evaluatingAsFloats&&isfloating(p1)&&(t=!0,evaluatingAsFloats++),p1.k){case CONS:Eval_cons();break;case NUM:evaluatingAsFloats?push_double(convert_rational_to_double(p1)):push(p1);break;case DOUBLE:case STR:push(p1);break;case TENSOR:Eval_tensor();break;case SYM:Eval_sym();break;default:stop("atom?")}return t&&evaluatingAsFloats--,restore()},Eval_sym=function(){var t,e,r,n,i,s;if(iskeyword(p1))return push(p1),push(symbol(LAST)),list(2),void Eval();if(p1===symbol(PI)&&evaluatingAsFloats)push_double(Math.PI);else if(p2=get_binding(p1),DEBUG&&console.log("looked up: "+p1+" which contains: "+p2),push(p2),p1!==p2){if(-1!==(n=chainOfUserSymbolsNotFunctionsBeingEvaluated.indexOf(p1))){for(t="",e=r=i=n,s=chainOfUserSymbolsNotFunctionsBeingEvaluated.length;i<=s?r<s:r>s;e=i<=s?++r:--r)t+=chainOfUserSymbolsNotFunctionsBeingEvaluated[e].printname+" -> ";return t+=p1.printname,void stop("recursive evaluation of symbols: "+t)}return chainOfUserSymbolsNotFunctionsBeingEvaluated.push(p1),Eval(),chainOfUserSymbolsNotFunctionsBeingEvaluated.pop()}},Eval_cons=function(){var t;if(t=car(p1),car(t)!==symbol(EVAL))switch(issymbol(t)||stop("cons?"),symnum(t)){case ABS:return Eval_abs();case ADD:return Eval_add();case ADJ:return Eval_adj();case AND:return Eval_and();case ARCCOS:return Eval_arccos();case ARCCOSH:return Eval_arccosh();case ARCSIN:return Eval_arcsin();case ARCSINH:return Eval_arcsinh();case ARCTAN:return Eval_arctan();case ARCTANH:return Eval_arctanh();case ARG:return Eval_arg();case ATOMIZE:return Eval_atomize();case BESSELJ:return Eval_besselj();case BESSELY:return Eval_bessely();case BINDING:return Eval_binding();case BINOMIAL:return Eval_binomial();case CEILING:return Eval_ceiling();case CHECK:return Eval_check();case CHOOSE:return Eval_choose();case CIRCEXP:return Eval_circexp();case CLEAR:return Eval_clear();case CLEARALL:return Eval_clearall();case CLEARPATTERNS:return Eval_clearpatterns();case CLOCK:return Eval_clock();case COEFF:return Eval_coeff();case COFACTOR:return Eval_cofactor();case CONDENSE:return Eval_condense();case CONJ:return Eval_conj();case CONTRACT:return Eval_contract();case COS:return Eval_cos();case COSH:return Eval_cosh();case DECOMP:return Eval_decomp();case DEGREE:return Eval_degree();case DEFINT:return Eval_defint();case DENOMINATOR:return Eval_denominator();case DERIVATIVE:return Eval_derivative();case DET:return Eval_det();case DIM:return Eval_dim();case DIRAC:return Eval_dirac();case DIVISORS:return Eval_divisors();case DO:return Eval_do();case DOT:return Eval_inner();case DRAW:return Eval_draw();case DSOLVE:return Eval_dsolve();case EIGEN:return Eval_eigen();case EIGENVAL:return Eval_eigenval();case EIGENVEC:return Eval_eigenvec();case ERF:return Eval_erf();case ERFC:return Eval_erfc();case EVAL:return Eval_Eval();case EXP:return Eval_exp();case EXPAND:return Eval_expand();case EXPCOS:return Eval_expcos();case EXPSIN:return Eval_expsin();case FACTOR:return Eval_factor();case FACTORIAL:return Eval_factorial();case FACTORPOLY:return Eval_factorpoly();case FILTER:return Eval_filter();case FLOATF:return Eval_float();case APPROXRATIO:return Eval_approxratio();case FLOOR:return Eval_floor();case FOR:return Eval_for();case FUNCTION:return Eval_function_reference();case GAMMA:return Eval_gamma();case GCD:return Eval_gcd();case HERMITE:return Eval_hermite();case HILBERT:return Eval_hilbert();case IMAG:return Eval_imag();case INDEX:return Eval_index();case INNER:return Eval_inner();case INTEGRAL:return Eval_integral();case INV:return Eval_inv();case INVG:return Eval_invg();case ISINTEGER:return Eval_isinteger();case ISPRIME:return Eval_isprime();case LAGUERRE:return Eval_laguerre();case LCM:return Eval_lcm();case LEADING:return Eval_leading();case LEGENDRE:return Eval_legendre();case LOG:return Eval_log();case LOOKUP:return Eval_lookup();case MOD:return Eval_mod();case MULTIPLY:return Eval_multiply();case NOT:return Eval_not();case NROOTS:return Eval_nroots();case NUMBER:return Eval_number();case NUMERATOR:return Eval_numerator();case OPERATOR:return Eval_operator();case OR:return Eval_or();case OUTER:return Eval_outer();case PATTERN:return Eval_pattern();case PATTERNSINFO:return Eval_patternsinfo();case POLAR:return Eval_polar();case POWER:return Eval_power();case PRIME:return Eval_prime();case PRINT:return Eval_print();case PRINT2DASCII:return Eval_print2dascii();case PRINTFULL:return Eval_printcomputer();case PRINTLATEX:return Eval_printlatex();case PRINTLIST:return Eval_printlist();case PRINTPLAIN:return Eval_printhuman();case PRODUCT:return Eval_product();case QUOTE:return Eval_quote();case QUOTIENT:return Eval_quotient();case RANK:return Eval_rank();case RATIONALIZE:return Eval_rationalize();case REAL:return Eval_real();case ROUND:return Eval_round();case YYRECT:return Eval_rect();case ROOTS:return Eval_roots();case SETQ:return Eval_setq();case SGN:return Eval_sgn();case SILENTPATTERN:return Eval_silentpattern();case SIMPLIFY:return Eval_simplify();case SIN:return Eval_sin();case SINH:return Eval_sinh();case SHAPE:return Eval_shape();case SQRT:return Eval_sqrt();case STOP:return Eval_stop();case SUBST:return Eval_subst();case SUM:return Eval_sum();case SYMBOLSINFO:return Eval_symbolsinfo();case TAN:return Eval_tan();case TANH:return Eval_tanh();case TAYLOR:return Eval_taylor();case TEST:return Eval_test();case TESTEQ:return Eval_testeq();case TESTGE:return Eval_testge();case TESTGT:return Eval_testgt();case TESTLE:return Eval_testle();case TESTLT:return Eval_testlt();case TRANSPOSE:return Eval_transpose();case UNIT:return Eval_unit();case ZERO:return Eval_zero();default:return Eval_user_function()}else Eval_user_function()},Eval_binding=function(){return push(get_binding(cadr(p1)))},Eval_check=function(){var t;return null==(t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)))?push(p1):push_integer(t)},Eval_det=function(){return push(cadr(p1)),Eval(),det()},Eval_dim=function(){var t;return push(cadr(p1)),Eval(),p2=pop(),iscons(cddr(p1))?(push(caddr(p1)),Eval(),t=pop_integer()):t=1,istensor(p2)?t<1||t>p2.tensor.ndim?push(p1):push_integer(p2.tensor.dim[t-1]):push_integer(1)},Eval_divisors=function(){return push(cadr(p1)),Eval(),divisors()},Eval_do=function(){var t;for(push(car(p1)),p1=cdr(p1),t=[];iscons(p1);)pop(),push(car(p1)),Eval(),t.push(p1=cdr(p1));return t},Eval_dsolve=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),dsolve()},Eval_Eval=function(){for(push(cadr(p1)),Eval(),p1=cddr(p1);iscons(p1);)push(car(p1)),Eval(),push(cadr(p1)),Eval(),subst(),p1=cddr(p1);return Eval()},Eval_exp=function(){return push(cadr(p1)),Eval(),exponential()},Eval_factorial=function(){return push(cadr(p1)),Eval(),factorial()},Eval_factorpoly=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),factorpoly(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factorpoly(),t.push(p1=cdr(p1));return t},Eval_hermite=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),hermite()},Eval_hilbert=function(){return push(cadr(p1)),Eval(),hilbert()},Eval_index=function(){var t,e,r;if(t=tos,e=p1,p1=cdr(p1),push(car(p1)),Eval(),r=stack[tos-1],isNumericAtom(r)&&stop("trying to access a scalar as a tensor"),!istensor(r))return moveTos(t),void push(e);for(p1=cdr(p1);iscons(p1);){if(push(car(p1)),Eval(),!isintegerorintegerfloat(stack[tos-1]))return moveTos(t),void push(e);p1=cdr(p1)}return index_function(tos-t)},Eval_inv=function(){return push(cadr(p1)),Eval(),inv()},Eval_invg=function(){return push(cadr(p1)),Eval(),invg()},Eval_isinteger=function(){if(push(cadr(p1)),Eval(),p1=pop(),isrational(p1))isinteger(p1)?push(one):push(zero);else{if(!isdouble(p1))return push_symbol(ISINTEGER),push(p1),list(2);Math.floor(p1.d)===p1.d?push(one):push(zero)}},Eval_number=function(){return push(cadr(p1)),Eval(),(p1=pop()).k===NUM||p1.k===DOUBLE?push_integer(1):push_integer(0)},Eval_operator=function(){var t;for(t=tos,push_symbol(OPERATOR),p1=cdr(p1);iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);return list(tos-t)},Eval_quote=function(){return push(cadr(p1))},Eval_rank=function(){return push(cadr(p1)),Eval(),p1=pop(),istensor(p1)?push_integer(p1.tensor.ndim):push(zero)},Eval_setq=function(){if(caadr(p1)!==symbol(INDEX)){if(!iscons(cadr(p1)))return issymbol(cadr(p1))||stop("symbol assignment: error in symbol"),push(caddr(p1)),Eval(),p2=pop(),set_binding(cadr(p1),p2),push(symbol(NIL));define_user_function()}else setq_indexed()},setq_indexed=function(){var t;for(p4=cadadr(p1),issymbol(p4)||stop("indexed assignment: expected a symbol name"),t=tos,push(caddr(p1)),Eval(),p2=cdadr(p1);iscons(p2);)push(car(p2)),Eval(),p2=cdr(p2);return set_component(tos-t),p3=pop(),set_binding(p4,p3),push(symbol(NIL))},Eval_sqrt=function(){return push(cadr(p1)),Eval(),push_rational(1,2),power()},Eval_stop=function(){return stop("user stop")},Eval_subst=function(){return push(cadddr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadr(p1)),Eval(),subst(),Eval()},Eval_unit=function(){var t,e,r,n;if(t=0,push(cadr(p1)),Eval(),e=pop_integer(),isNaN(e))push(p1);else{if(!(e<1)){for((p1=alloc_tensor(e*e)).tensor.ndim=2,p1.tensor.dim[0]=e,p1.tensor.dim[1]=e,t=r=0,n=e;0<=n?r<n:r>n;t=0<=n?++r:--r)p1.tensor.elem[e*t+t]=one;return check_tensor_dimensions(p1),push(p1)}push(p1)}},Eval_noexpand=function(){var t;return t=expanding,expanding=0,Eval(),expanding=t},Eval_predicate=function(){return save(),p1=top(),car(p1)===symbol(SETQ)&&(pop(),push_symbol(TESTEQ),push(cadr(p1)),push(caddr(p1)),list(3)),Eval(),restore()},Eval_expand=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),expand()},expand=function(){var t;if(save(),p9=pop(),p5=pop(),istensor(p5))return expand_tensor(),void restore();if(car(p5)!==symbol(ADD))return push(p5),numerator(),p3=pop(),push(p5),denominator(),p2=pop(),remove_negative_exponents(),push(p3),push(p2),push(p9),!isone(p3)&&!isone(p2)||ispolyexpandedform(p2,p9)&&!isone(p2)?(divpoly(),p7=pop(),push(p3),push(p2),push(p7),multiply(),subtract(),p3=pop(),isZeroAtomOrTensor(p3)?(push(p7),void restore()):(push(p2),push(p9),factorpoly(),p2=pop(),expand_get_C(),expand_get_B(),expand_get_A(),istensor(p4)?(push(p4),t=expanding,expanding=1,inv(),expanding=t,push(p3),inner(),push(p2),inner()):(push(p3),push(p4),t=expanding,expanding=1,divide(),expanding=t,push(p2),multiply()),push(p7),add(),restore())):(pop(),pop(),pop(),push(p5),void restore());for(push_integer(0),p1=cdr(p5);iscons(p1);)push(car(p1)),push(p9),expand(),add(),p1=cdr(p1);restore()},expand_tensor=function(){var t,e,r;for(t=0,push(p5),copy_tensor(),t=e=0,r=(p5=pop()).tensor.nelem;0<=r?e<r:e>r;t=0<=r?++e:--e)push(p5.tensor.elem[t]),push(p9),expand(),p5.tensor.elem[t]=pop();return push(p5)},remove_negative_exponents=function(){var t,e,r,n,i,s;for(e=0,r=0,n=0,t=tos,factors(p2),factors(p3),r=0,e=i=0,s=tos-t;0<=s?i<s:i>s;e=0<=s?++i:--i)p1=stack[t+e],car(p1)===symbol(POWER)&&cadr(p1)===p9&&(push(caddr(p1)),n=pop_integer(),isNaN(n)||n<r&&(r=n));if(moveTos(t),0!==r)return push(p2),push(p9),push_integer(-r),power(),multiply(),p2=pop(),push(p3),push(p9),push_integer(-r),power(),multiply(),p3=pop()},expand_get_C=function(){var t,e,r,n,i,s,o,a,u,l;if(r=0,i=0,e=tos,car(p2)===symbol(MULTIPLY))for(p1=cdr(p2);iscons(p1);)p5=car(p1),expand_get_CF(),p1=cdr(p1);else p5=p2,expand_get_CF();if(1!=(s=tos-e)){for((p4=alloc_tensor(s*s)).tensor.ndim=2,p4.tensor.dim[0]=s,p4.tensor.dim[1]=s,t=e,r=o=0,u=s;0<=u?o<u:o>u;r=0<=u?++o:--o)for(i=n=0,l=s;0<=l?n<l:n>l;i=0<=l?++n:--n)push(stack[t+i]),push(p9),push_integer(r),power(),a=expanding,expanding=1,divide(),expanding=a,push(p9),filter(),p4.tensor.elem[s*r+i]=pop();return moveTos(tos-s)}p4=pop()},expand_get_CF=function(){var t,e,r,n,i,s,o,a;if(e=0,r=0,n=0,Find(p5,p9)){for(s=expanding,expanding=1,trivial_divide(),expanding=s,car(p5)===symbol(POWER)?(push(caddr(p5)),n=pop_integer(),p6=cadr(p5)):(n=1,p6=p5),push(p6),push(p9),degree(),t=pop_integer(),a=[],e=i=0,o=n;0<=o?i<o:i>o;e=0<=o?++i:--i)a.push(function(){var n,i,o;for(o=[],r=n=0,i=t;0<=i?n<i:n>i;r=0<=i?++n:--n)push(p8),push(p6),push_integer(e),power(),s=expanding,expanding=1,multiply(),expanding=s,push(p9),push_integer(r),power(),s=expanding,expanding=1,multiply(),o.push(expanding=s);return o}());return a}},trivial_divide=function(){var t;if(t=0,car(p2)===symbol(MULTIPLY)){for(t=tos,p0=cdr(p2);iscons(p0);)equal(car(p0),p5)||(push(car(p0)),Eval()),p0=cdr(p0);multiply_all(tos-t)}else push_integer(1);return p8=pop()},expand_get_B=function(){var t,e,r,n,i;if(t=0,istensor(p4)){for(e=p4.tensor.dim[0],(p8=alloc_tensor(e)).tensor.ndim=1,p8.tensor.dim[0]=e,t=r=0,i=e;0<=i?r<i:r>i;t=0<=i?++r:--r)push(p3),push(p9),push_integer(t),power(),n=expanding,expanding=1,divide(),expanding=n,push(p9),filter(),p8.tensor.elem[t]=pop();return p3=p8}},expand_get_A=function(){var t,e,r,n,i;if(e=0,!istensor(p4))return push(p2),reciprocate(),void(p2=pop());if(t=tos,car(p2)===symbol(MULTIPLY))for(p8=cdr(p2);iscons(p8);)p5=car(p8),expand_get_AF(),p8=cdr(p8);else p5=p2,expand_get_AF();for((p8=alloc_tensor(r=tos-t)).tensor.ndim=1,p8.tensor.dim[0]=r,e=n=0,i=r;0<=i?n<i:n>i;e=0<=i?++n:--n)p8.tensor.elem[e]=stack[t+e];return moveTos(t),p2=p8},expand_get_AF=function(){var t,e,r,n,i,s,o;if(e=0,r=0,n=1,Find(p5,p9)){for(car(p5)===symbol(POWER)&&(push(caddr(p5)),n=pop_integer(),p5=cadr(p5)),push(p5),push(p9),degree(),t=pop_integer(),o=[],e=i=s=n;s<=0?i<0:i>0;e=s<=0?++i:--i)o.push(function(){var n,i,s;for(s=[],r=n=0,i=t;0<=i?n<i:n>i;r=0<=i?++n:--n)push(p5),push_integer(e),power(),reciprocate(),push(p9),push_integer(r),power(),s.push(multiply());return s}());return o}},Eval_expcos=function(){return push(cadr(p1)),Eval(),expcos()},expcos=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push_rational(1,2),multiply(),add(),restore()},Eval_expsin=function(){return push(cadr(p1)),Eval(),expsin()},expsin=function(){return save(),p1=pop(),push(imaginaryunit),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),push(imaginaryunit),negate(),push(p1),multiply(),exponential(),push(imaginaryunit),divide(),push_rational(1,2),multiply(),subtract(),restore()},Eval_factor=function(){var t;for(push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),factor(),p1=cdddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),factor_again(),t.push(p1=cdr(p1));return t},factor_again=function(){var t,e;if(save(),p2=pop(),p1=pop(),t=tos,car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),factor_term(),p1=cdr(p1);else push(p1),push(p2),factor_term();return(e=tos-t)>1&&multiply_all_noexpand(e),restore()},factor_term=function(){if(save(),factorpoly(),p1=pop(),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),p1=cdr(p1);else push(p1);return restore()},factor=function(){return save(),p2=pop(),p1=pop(),isinteger(p1)?(push(p1),factor_number()):(push(p1),push(p2),factorpoly()),restore()},factor_small_number=function(){var t,e,r,n,i,s;for(r=0,save(),n=pop_integer(),isNaN(n)&&stop("number too big to factor"),n<0&&(n=-n),r=i=0,s=MAXPRIMETAB;(0<=s?i<s:i>s)&&!((t=primetab[r])>n/t);r=0<=s?++i:--i){for(e=0;n%t==0;)n/=t,e++;e&&(push_integer(t),push_integer(e))}return n>1&&(push_integer(n),push_integer(1)),restore()},factorial=function(){var t;return save(),p1=pop(),push(p1),(t=pop_integer())<0||isNaN(t)?(push_symbol(FACTORIAL),push(p1),list(2),void restore()):(bignum_factorial(t),restore())},simplifyfactorials=function(){var t;if(save(),t=expanding,expanding=0,p1=pop(),car(p1)===symbol(ADD)){for(push(zero),p1=cdr(p1);iscons(p1);)push(car(p1)),simplifyfactorials(),add(),p1=cdr(p1);return expanding=t,void restore()}return car(p1)===symbol(MULTIPLY)?(sfac_product(),expanding=t,void restore()):(push(p1),expanding=t,restore())},sfac_product=function(){var t,e,r,n,i,s,o,a,u,l,c;for(t=0,r=0,i=0,c=tos,p1=cdr(p1),i=0;iscons(p1);)push(car(p1)),p1=cdr(p1),i++;for(t=s=0,o=i-1;0<=o?s<o:s>o;t=0<=o?++s:--s)if(stack[c+t]!==symbol(NIL))for(r=e=a=t+1,u=i;a<=u?e<u:e>u;r=a<=u?++e:--e)stack[c+r]!==symbol(NIL)&&sfac_product_f(c,t,r);for(push(one),t=n=0,l=i;0<=l?n<l:n>l;t=0<=l?++n:--n)stack[c+t]!==symbol(NIL)&&(push(stack[c+t]),multiply());return p1=pop(),moveTos(tos-i),push(p1)},sfac_product_f=function(t,e,r){var n,i,s,o;if(n=0,i=0,p1=stack[t+e],p2=stack[t+r],ispower(p1)?(p3=caddr(p1),p1=cadr(p1)):p3=one,ispower(p2)?(p4=caddr(p2),p2=cadr(p2)):p4=one,isfactorial(p1)&&isfactorial(p2)){if(push(p3),push(p4),add(),yyexpand(),0!==(i=pop_integer()))return;if(push(cadr(p1)),push(cadr(p2)),subtract(),yyexpand(),0===(i=pop_integer())||isNaN(i))return;for(i<0&&(i=-i,p5=p1,p1=p2,p2=p5,p5=p3,p3=p4,p4=p5),push(one),n=s=1,o=i;1<=o?s<=o:s>=o;n=1<=o?++s:--s)push(cadr(p2)),push_integer(n),add(),push(p3),power(),multiply();return stack[t+e]=pop(),stack[t+r]=symbol(NIL)}},factorpoly=function(){var t,e;return DEBUG&&console.log("factorpoly: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),e=pop(),t=pop(),Find(t,e)&&ispolyexpandedform(t,e)&&issymbol(e)?yyfactorpoly(e,t):push(t),restore()},yyfactorpoly=function(t,e){var r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A,N,M,k;for(DEBUG&&(u=t,M=e,console.log("yyfactorpoly: "+u+" "+M)),save(),p=tos,isfloating(e)&&stop("floating point numbers in polynomial"),v=tos,a=coeff(t,e)-1,DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" factpoly_expo before rationalize_coefficients: "+a),y=rationalize_coefficients(p),DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" factpoly_expo  after rationalize_coefficients: "+a),k="real",A=null;a>0;)if(DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" factpoly_expo inside while loop: "+a),isZeroAtomOrTensor(stack[v+0])?(DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" isZeroAtomOrTensor"),r=one,i=zero):"real"===k?[c,r,i]=get_factor_from_real_root(t,a,v):"complex"===k&&([l,r]=get_factor_from_complex_root(A,a,v)),"real"===k){if(0===c){k="complex";continue}for(push(r),push(t),multiply(),push(i),add(),n=pop(),DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" success\nFACTOR="+n),push(y),push(n),multiply_noexpand(),y=pop(),yydivpoly(a,v,r,i);a&&isZeroAtomOrTensor(stack[v+a]);)a--;for(push(zero),h=g=0,_=a;0<=_?g<=_:g>=_;h=0<=_?++g:--g)push(stack[v+h]),push(t),push_integer(h),power(),multiply(),add();A=pop()}else if("complex"===k){if(0===l)break;if(push(r),push(t),subtract(),push(r),conjugate(),push(t),subtract(),multiply(),N=pop(),DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" success\nFACTOR="+N),push(y),x=pop(),push(y),push(N),multiply_noexpand(),y=pop(),null==A){for(push(zero),h=f=0,w=a;0<=w?f<=w:f>=w;h=0<=w?++f:--f)push(stack[v+h]),push(t),push_integer(h),power(),multiply(),add();A=pop()}if(push(o=A),push(N),push(t),divpoly(),A=pop(),push(A),push(N),multiply(),s=pop(),!equal(s,o))return DEBUG&&console.log("we found a polynomial based on complex root and its conj but it doesn't divide the poly, quitting"),DEBUG&&console.log("so just returning previousFactorisation times dividend: "+x+" * "+o),push(x),push(o),b=expanding,expanding=0,yycondense(),expanding=b,multiply_noexpand(),y=pop(),stack[p]=y,moveTos(p+1),void restore();for(h=d=0,E=a;0<=E?d<=E:d>=E;h=0<=E?++d:--d)pop();coeff(t,A),a-=2}for(DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" building the remaining unfactored part of the polynomial"),push(zero),h=m=0,S=a;0<=S?m<=S:m>=S;h=0<=S?++m:--m)push(stack[v+h]),push(t),push_integer(h),power(),multiply(),add();return e=pop(),DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" remaining unfactored part of the polynomial: "+e.toString()),push(e),b=expanding,expanding=0,yycondense(),expanding=b,e=pop(),DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" new poly with extracted common factor: "+e.toString()),a>0&&isnegativeterm(stack[v+a])&&(push(e),negate(),e=pop(),push(y),negate_noexpand(),y=pop()),push(y),push(e),multiply_noexpand(),y=pop(),DEBUG&&console.log("yyfactorpoly: "+u+" "+M+" result: "+y),stack[p]=y,moveTos(p+1),restore()},rationalize_coefficients=function(t){var e,r,n,i,s,o,a,u,l;for(i=one,e=n=o=t,a=tos;o<=a?n<a:n>a;e=o<=a?++n:--n)push(stack[e]),denominator(),push(i),lcm(),i=pop();for(e=r=u=t,l=tos;u<=l?r<l:r>l;e=u<=l?++r:--r)push(i),push(stack[e]),multiply(),stack[e]=pop();return push(i),reciprocate(),s=pop(),DEBUG&&console.log("rationalize_coefficients result: "+s.toString()),s},get_factor_from_real_root=function(t,e,r){var n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A;if(DEBUG&&console.log("get_factor_from_real_root"),a=0,DEBUG){for(push(zero),a=d=0,g=e;0<=g?d<=g:d>=g;a=0<=g?++d:--d)push(stack[r+a]),push(t),push_integer(a),power(),multiply(),add();m=pop(),console.log("POLY="+m)}if(o=tos,i=tos,push(stack[r+e]),divisors_onstack(),f=tos-i,n=tos,push(stack[r+0]),divisors_onstack(),h=tos-n,DEBUG){for(console.log("divisors of base term"),a=u=0,y=h;0<=y?u<y:u>y;a=0<=y?++u:--u)console.log(", "+stack[n+a]);for(console.log("divisors of leading term"),a=l=0,v=f;0<=v?l<v:l>v;a=0<=v?++l:--l)console.log(", "+stack[i+a])}for(_=c=0,b=f;0<=b?c<b:c>b;_=0<=b?++c:--c)for(w=p=0,x=h;0<=x?p<x:p>x;w=0<=x?++p:--p){if(S=stack[i+_],E=stack[n+w],push(E),push(S),divide(),negate(),A=pop(),s=Evalpoly(e,r,A),DEBUG&&(console.log("try A="+S),console.log(", B="+E),console.log(", root "+t),console.log("=-B/A="+A),console.log(", POLY("+A),console.log(")="+s)),isZeroAtomOrTensor(s))return moveTos(o),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,S,E];if(push(E),negate(),E=pop(),push(A),negate(),A=pop(),s=Evalpoly(e,r,A),DEBUG&&(console.log("try A="+S),console.log(", B="+E),console.log(", root "+t),console.log("=-B/A="+A),console.log(", POLY("+A),console.log(")="+s)),isZeroAtomOrTensor(s))return moveTos(o),DEBUG&&console.log("get_factor_from_real_root returning 1"),[1,S,E]}return moveTos(o),DEBUG&&console.log("get_factor_from_real_root returning"),[0,null,null]},get_factor_from_complex_root=function(t,e,r){var n,i,s,o,a,u,l;if(e<=2)return DEBUG&&console.log("no more factoring via complex roots to be found in polynomial of degree <= 2"),[0,null];if(DEBUG&&console.log("complex root finding for POLY="+t),i=tos,push_integer(-1),push_rational(2,3),power(),rect(),l=pop(),DEBUG&&console.log("complex root finding: trying with "+l),push(l),n=Evalpoly(e,r,l),DEBUG&&console.log("complex root finding result: "+n),isZeroAtomOrTensor(n))return moveTos(i),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,l];if(push_integer(1),push_rational(2,3),power(),rect(),l=pop(),DEBUG&&console.log("complex root finding: trying with "+l),push(l),n=Evalpoly(e,r,l),DEBUG&&console.log("complex root finding result: "+n),isZeroAtomOrTensor(n))return moveTos(i),DEBUG&&console.log("get_factor_from_complex_root returning 1"),[1,l];for(a=o=-10;o<=10;a=++o)for(u=s=1;s<=5;u=++s)if(push_integer(a),push_integer(u),push(imaginaryunit),multiply(),add(),rect(),l=pop(),DEBUG&&console.log("complex root finding: trying simple complex combination "+l),push(l),n=Evalpoly(e,r,l),isZeroAtomOrTensor(n))return moveTos(i),DEBUG&&console.log("found complex root: "+n),[1,l];return moveTos(i),DEBUG&&console.log("get_factor_from_complex_root returning 0"),[0,null]},yydivpoly=function(t,e,r,n){var i,s,o,a;for(i=zero,s=o=a=t;a<=0?o<0:o>0;s=a<=0?++o:--o)push(stack[e+s]),stack[e+s]=i,push(r),divide(),i=pop(),push(stack[e+s-1]),push(i),push(n),multiply(),subtract(),stack[e+s-1]=pop();if(stack[e+0]=i,DEBUG)return console.log("yydivpoly Q: "+i.toString())},Evalpoly=function(t,e,r){var n,i,s;for(push(zero),n=i=s=t;s<=0?i<=0:i>=0;n=s<=0?++i:--i)push(r),multiply(),push(stack[e+n]),add();return pop()},factors=function(t){var e;if(e=tos,car(t)===symbol(ADD))for(t=cdr(t);iscons(t);)push_term_factors(car(t)),t=cdr(t);else push_term_factors(t);return tos-e},push_term_factors=function(t){var e;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),e=[];iscons(t);)push(car(t)),e.push(t=cdr(t));return e}return push(t)},Eval_filter=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),filter(),t.push(p1=cdr(p1));return t},filter=function(){return save(),p2=pop(),p1=pop(),filter_main(),restore()},filter_main=function(){return car(p1)===symbol(ADD)?filter_sum():istensor(p1)?filter_tensor():Find(p1,p2)?push_integer(0):push(p1)},filter_sum=function(){var t;for(push_integer(0),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),filter(),add(),t.push(p1=cdr(p1));return t},filter_tensor=function(){var t,e,r,n,i,s;for(t=0,r=p1.tensor.nelem,(p3=alloc_tensor(r)).tensor.ndim=p1.tensor.ndim,t=n=0,i=p1.tensor.ndim;0<=i?n<i:n>i;t=0<=i?++n:--n)p3.tensor.dim[t]=p1.tensor.dim[t];for(t=e=0,s=r;0<=s?e<s:e>s;t=0<=s?++e:--e)push(p1.tensor.elem[t]),push(p2),filter(),p3.tensor.elem[t]=pop();return push(p3)},Eval_float=function(){return evaluatingAsFloats++,push(cadr(p1)),Eval(),yyfloat(),Eval(),evaluatingAsFloats--},checkFloatHasWorkedOutCompletely=function(t){var e,r,n,i,s;if(i=countOccurrencesOfSymbol(symbol(POWER),t),n=countOccurrencesOfSymbol(symbol(PI),t),e=countOccurrencesOfSymbol(symbol(E),t),r=countOccurrencesOfSymbol(symbol(MULTIPLY),t),s=countOccurrencesOfSymbol(symbol(ADD),t),DEBUG&&(console.log("     ... numberOfPowers: "+i),console.log("     ... numberOfPIs: "+n),console.log("     ... numberOfEs: "+e),console.log("     ... numberOfMults: "+r),console.log("     ... numberOfSums: "+s)),i>1||n>0||e>0||r>1||s>1)return stop("float: some unevalued parts in "+t)},zzfloat=function(){return save(),evaluatingAsFloats++,Eval(),yyfloat(),Eval(),evaluatingAsFloats--,restore()},yyfloat=function(){var t,e,r,n;if(e=0,t=0,evaluatingAsFloats++,save(),p1=pop(),iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),yyfloat(),p1=cdr(p1);list(tos-t)}else if(p1.k===TENSOR){for(push(p1),copy_tensor(),e=r=0,n=(p1=pop()).tensor.nelem;0<=n?r<n:r>n;e=0<=n?++r:--r)push(p1.tensor.elem[e]),yyfloat(),p1.tensor.elem[e]=pop();push(p1)}else p1.k===NUM?(push(p1),bignum_float()):p1===symbol(PI)?push_double(Math.PI):p1===symbol(E)?push_double(Math.E):push(p1);return restore(),evaluatingAsFloats--},Eval_floor=function(){return push(cadr(p1)),Eval(),yfloor()},yfloor=function(){return save(),yyfloor(),restore()},yyfloor=function(){var t;return t=0,p1=pop(),isNumericAtom(p1)?isdouble(p1)?(t=Math.floor(p1.d),void push_double(t)):isinteger(p1)?void push(p1):((p3=new U).k=NUM,p3.q.a=mdiv(p1.q.a,p1.q.b),p3.q.b=mint(1),push(p3),isnegativenumber(p1)?(push_integer(-1),add()):void 0):(push_symbol(FLOOR),push(p1),void list(2))},Eval_for=function(){var t,e,r,n,i,s,o;if(t=0,n=caddr(p1),issymbol(n)||stop("for: 2nd arg should be the variable to loop over"),push(cadddr(p1)),Eval(),e=pop_integer(),isNaN(e))push(p1);else{if(push(caddddr(p1)),Eval(),r=pop_integer(),!isNaN(r)){for(p4=get_binding(n),t=i=s=e,o=r;s<=o?i<=o:i>=o;t=s<=o?++i:--i)push_integer(t),p5=pop(),set_binding(n,p5),push(cadr(p1)),Eval(),pop();return set_binding(n,p4),push_symbol(NIL)}push(p1)}},Eval_gamma=function(){return push(cadr(p1)),Eval(),gamma()},gamma=function(){return save(),gammaf(),restore()},gammaf=function(){return p1=pop(),isrational(p1)&&MEQUAL(p1.q.a,1)&&MEQUAL(p1.q.b,2)?(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),void power()):isrational(p1)&&MEQUAL(p1.q.a,3)&&MEQUAL(p1.q.b,2)?(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_rational(1,2),power(),push_rational(1,2),void multiply()):isnegativeterm(p1)?(evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push_integer(-1),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),push(p1),multiply(),sine(),push(p1),multiply(),push(p1),negate(),gamma(),multiply(),void divide()):void(car(p1)!==symbol(ADD)?(push_symbol(GAMMA),push(p1),list(2)):gamma_of_sum())},gamma_of_sum=function(){return p3=cdr(p1),isrational(car(p3))&&MEQUAL(car(p3).q.a,1)&&MEQUAL(car(p3).q.b,1)?(push(cadr(p3)),push(cadr(p3)),gamma(),multiply()):isrational(car(p3))&&MEQUAL(car(p3).q.a,-1)&&MEQUAL(car(p3).q.b,1)?(push(cadr(p3)),gamma(),push(cadr(p3)),push_integer(-1),add(),divide()):(push_symbol(GAMMA),push(p1),void list(2))},Eval_gcd=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),gcd(),t.push(p1=cdr(p1));return t},gcd=function(){var t;return t=expanding,save(),gcd_main(),restore(),expanding=t},gcd_main=function(){var t;if(expanding=1,p2=pop(),p1=pop(),DEBUG&&console.log("gcd_main: p1: "+p1+" p2: "+p2),equal(p1,p2))push(p1);else{if(isrational(p1)&&isrational(p2))return push(p1),push(p2),void gcd_numbers();if(t=areunivarpolysfactoredorexpandedform(p1,p2))gcd_polys(t);else if(car(p1)!==symbol(ADD)||car(p2)!==symbol(ADD))if(car(p1)===symbol(ADD)&&(gcd_sum(p1),p1=pop()),car(p2)===symbol(ADD)&&(gcd_sum(p2),p2=pop()),car(p1)!==symbol(MULTIPLY))if(car(p2)!==symbol(MULTIPLY)){if(car(p1)!==symbol(MULTIPLY)||car(p2)!==symbol(MULTIPLY))return gcd_powers_with_same_base();gcd_product_product()}else gcd_product_sum();else gcd_sum_product();else gcd_sum_sum()}},areunivarpolysfactoredorexpandedform=function(t,e){var r;return DEBUG&&console.log("areunivarpolysfactoredorexpandedform: p1: "+t+" p2: "+e),!(!(r=isunivarpolyfactoredorexpandedform(t))||!isunivarpolyfactoredorexpandedform(e,r))&&r},gcd_polys=function(t){if(DEBUG&&console.log("gcd_polys: p1: "+p1+" polyVar: "+t),push(p1),push(t),factorpoly(),p1=pop(),push(p2),push(t),factorpoly(),p2=pop(),DEBUG&&console.log("GCD: factored polys:"),DEBUG&&console.log("  p1:"+p1.toString()),DEBUG&&console.log("  p2:"+p2.toString()),car(p1)!==symbol(MULTIPLY)&&car(p2)!==symbol(MULTIPLY)||(car(p1)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p1),push(one),list(3),p1=pop()),car(p2)!==symbol(MULTIPLY)&&(push_symbol(MULTIPLY),push(p2),push(one),list(3),p2=pop())),car(p1)!==symbol(MULTIPLY)||car(p2)!==symbol(MULTIPLY))return gcd_powers_with_same_base(),!0;gcd_product_product()},gcd_product_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);){for(p4=cdr(p2);iscons(p4);)push(car(p3)),push(car(p4)),gcd(),multiply(),p4=cdr(p4);t.push(p3=cdr(p3))}return t},gcd_powers_with_same_base=function(){if(car(p1)===symbol(POWER)?(p3=caddr(p1),p1=cadr(p1)):p3=one,car(p2)===symbol(POWER)?(p4=caddr(p2),p2=cadr(p2)):p4=one,equal(p1,p2)){if(isNumericAtom(p3)&&isNumericAtom(p4))return push(p1),lessp(p3,p4)?push(p3):push(p4),void power();if(push(p3),push(p4),divide(),p5=pop(),isNumericAtom(p5))return push(p1),p5=car(p3)===symbol(MULTIPLY)&&isNumericAtom(cadr(p3))?cadr(p3):one,p6=car(p4)===symbol(MULTIPLY)&&isNumericAtom(cadr(p4))?cadr(p4):one,lessp(p5,p6)?push(p3):push(p4),void power();if(push(p3),push(p4),subtract(),p5=pop(),isNumericAtom(p5))return push(p1),isnegativenumber(p5)?push(p3):push(p4),power();push(one)}else push(one)},gcd_sum_sum=function(){if(length(p1)===length(p2)){for(p3=cdr(p1),push(car(p3)),p3=cdr(p3);iscons(p3);)push(car(p3)),gcd(),p3=cdr(p3);for(p3=pop(),p4=cdr(p2),push(car(p4)),p4=cdr(p4);iscons(p4);)push(car(p4)),gcd(),p4=cdr(p4);return p4=pop(),push(p1),push(p3),divide(),p5=pop(),push(p2),push(p4),divide(),p6=pop(),equal(p5,p6)?(push(p5),push(p3),push(p4),gcd(),multiply()):push(one)}push(one)},gcd_sum=function(t){var e;for(t=cdr(t),push(car(t)),t=cdr(t),e=[];iscons(t);)push(car(t)),gcd(),e.push(t=cdr(t));return e},gcd_sum_product=function(){var t;for(push(one),p3=cdr(p1),t=[];iscons(p3);)push(car(p3)),push(p2),gcd(),multiply(),t.push(p3=cdr(p3));return t},gcd_product_sum=function(){var t;for(push(one),p4=cdr(p2),t=[];iscons(p4);)push(p1),push(car(p4)),gcd(),multiply(),t.push(p4=cdr(p4));return t},guess=function(){var t;return t=pop(),push(t),Find(t,symbol(SYMBOL_X))?push_symbol(SYMBOL_X):Find(t,symbol(SYMBOL_Y))?push_symbol(SYMBOL_Y):Find(t,symbol(SYMBOL_Z))?push_symbol(SYMBOL_Z):Find(t,symbol(SYMBOL_T))?push_symbol(SYMBOL_T):Find(t,symbol(SYMBOL_S))?push_symbol(SYMBOL_S):push_symbol(SYMBOL_X)},hermite=function(){return save(),yyhermite(),restore()},yyhermite=function(){var t;return p2=pop(),p1=pop(),push(p2),(t=pop_integer())<0||isNaN(t)?(push_symbol(HERMITE),push(p1),push(p2),void list(3)):issymbol(p1)?yyhermite2(t):(p3=p1,p1=symbol(SECRETX),yyhermite2(t),p1=p3,push(symbol(SECRETX)),push(p1),subst(),Eval())},yyhermite2=function(t){var e,r,n,i;for(e=0,push_integer(1),push_integer(0),p4=pop(),i=[],e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)p5=p4,p4=pop(),push(p1),push(p4),multiply(),push_integer(e),push(p5),multiply(),subtract(),push_integer(2),i.push(multiply());return i},hilbert=function(){var t,e,r,n,i,s,o;if(t=0,r=0,save(),p2=pop(),push(p2),(n=pop_integer())<2)return push_symbol(HILBERT),push(p2),list(2),void restore();for(push_zero_matrix(n,n),p1=pop(),t=i=0,s=n;0<=s?i<s:i>s;t=0<=s?++i:--i)for(r=e=0,o=n;0<=o?e<o:e>o;r=0<=o?++e:--e)push_integer(t+r+1),inverse(),p1.tensor.elem[t*n+r]=pop();return push(p1),restore()},DEBUG_IMAG=!1,Eval_imag=function(){return push(cadr(p1)),Eval(),imag()},imag=function(){return save(),rect(),p1=pop(),DEBUG_IMAG&&console.log("IMAGE of "+p1),push(p1),push(p1),conjugate(),DEBUG_IMAG&&console.log(" image: conjugate result: "+stack[tos-1]),subtract(),push_integer(2),divide(),DEBUG_IMAG&&console.log(" image: 1st divide result: "+stack[tos-1]),push(imaginaryunit),divide(),DEBUG_IMAG&&console.log(" image: 2nd divide result: "+stack[tos-1]),restore()},index_function=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x;for(e=0,i=0,l=0,x=0,save(),(o=t-1)>(u=(p1=stack[b=tos-t]).tensor.ndim)&&stop("too many indices for tensor"),i=0,e=c=0,p=o;0<=p?c<p:c>p;e=0<=p?++c:--c)push(stack[b+e+1]),((x=pop_integer())<1||x>p1.tensor.dim[e])&&stop("index out of range"),i=i*p1.tensor.dim[e]+x-1;if(u===o)return moveTos(tos-t),push(p1.tensor.elem[i]),void restore();for(e=r=h=o,f=u;h<=f?r<f:r>f;e=h<=f?++r:--r)i=i*p1.tensor.dim[e]+0;for(l=1,e=n=d=o,m=u;d<=m?n<m:n>m;e=d<=m?++n:--n)l*=p1.tensor.dim[e];for((p2=alloc_tensor(l)).tensor.ndim=u-o,e=s=g=o,y=u;g<=y?s<y:s>y;e=g<=y?++s:--s)p2.tensor.dim[e-o]=p1.tensor.dim[e];for(e=a=0,v=l;0<=v?a<v:a>v;e=0<=v?++a:--a)p2.tensor.elem[e]=p1.tensor.elem[i+e];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},set_component=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b;for(e=0,i=0,b=0,save(),t<3&&stop("error in indexed assign"),p2=stack[v=tos-t],p1=stack[v+1],istensor(p1)||stop("error in indexed assign: assigning to something that is not a tensor"),(o=t-2)>(l=p1.tensor.ndim)&&stop("error in indexed assign"),i=0,e=c=0,p=o;0<=p?c<p:c>p;e=0<=p?++c:--c)push(stack[v+e+2]),((b=pop_integer())<1||b>p1.tensor.dim[e])&&stop("error in indexed assign\n"),i=i*p1.tensor.dim[e]+b-1;for(e=r=h=o,f=l;h<=f?r<f:r>f;e=h<=f?++r:--r)i=i*p1.tensor.dim[e]+0;for((p3=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,e=n=0,d=p1.tensor.ndim;0<=d?n<d:n>d;e=0<=d?++n:--n)p3.tensor.dim[e]=p1.tensor.dim[e];for(e=s=0,m=p1.tensor.nelem;0<=m?s<m:s>m;e=0<=m?++s:--s)p3.tensor.elem[e]=p1.tensor.elem[e];if(check_tensor_dimensions(p1),check_tensor_dimensions(p3),p1=p3,l===o)return istensor(p2)&&stop("error in indexed assign"),p1.tensor.elem[i]=p2,check_tensor_dimensions(p1),moveTos(tos-t),push(p1),void restore();for(istensor(p2)||stop("error in indexed assign"),l-o!==p2.tensor.ndim&&stop("error in indexed assign"),e=a=0,g=p2.tensor.ndim;0<=g?a<g:a>g;e=0<=g?++a:--a)p1.tensor.dim[o+e]!==p2.tensor.dim[e]&&stop("error in indexed assign");for(e=u=0,y=p2.tensor.nelem;0<=y?u<y:u>y;e=0<=y?++u:--u)p1.tensor.elem[i+e]=p2.tensor.elem[e];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),moveTos(tos-t),push(p1),restore()},Eval_inner=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h,f,d,m;for((m=[]).push(car(cdr(p1))),car(cdr(cdr(p1)))===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),s=cdr(cdr(p1));s!==symbol(NIL);)m.push(car(s)),s=cdr(s);if(m.length>2){for(push_symbol(INNER),push(m[m.length-2]),push(m[m.length-1]),list(3),e=o=2,u=m.length;2<=u?o<u:o>u;e=2<=u?++o:--o)push_symbol(INNER),swap(),push(m[m.length-e-1]),swap(),list(3);return p1=pop(),void Eval_inner()}for(get_innerprod_factors(p1,a=[]),h=[],e=r=0,l=a.length;0<=l?r<l:r>l;e=0<=l?++r:--r)a[e]!==symbol(SYMBOL_IDENTITY_MATRIX)&&h.push(a[e]);if(a=h,h=[],a.length>1){for(d=0,e=n=0,c=a.length;(0<=c?n<c:n>c)&&e+d+1<=a.length-1&&(isNumericAtomOrTensor(a[e+d])||isNumericAtomOrTensor(a[e+d+1])?h.push(a[e+d]):(push(a[e+d]),Eval(),inv(),push(a[e+d+1]),Eval(),subtract(),t=pop(),isZeroAtomOrTensor(t)?d+=1:h.push(a[e+d])),e+d===a.length-2&&h.push(a[a.length-1]),!(e+d>=a.length-1));e=0<=c?++n:--n);a=h}if(push(symbol(INNER)),!(a.length>0))return pop(),void push(symbol(SYMBOL_IDENTITY_MATRIX));for(e=i=0,p=a.length;0<=p?i<p:i>p;e=0<=p?++i:--i)push(a[e]);for(list(a.length+1),p1=pop(),p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),f=[];iscons(p1);)push(car(p1)),Eval(),inner(),f.push(p1=cdr(p1));return f},inner=function(){var t,e,r,n;if(save(),p2=pop(),p1=pop(),isnegativeterm(p2)&&isnegativeterm(p1)&&(push(p2),negate(),p2=pop(),push(p1),negate(),p1=pop()),isinnerordot(p1)&&(t=car(cdr(p1)),e=car(cdr(cdr(p1))),r=p2,p1=t,push(e),push(r),inner(),p2=pop()),p1===symbol(SYMBOL_IDENTITY_MATRIX))return push(p2),void restore();if(p2===symbol(SYMBOL_IDENTITY_MATRIX))return push(p1),void restore();if(istensor(p1)&&istensor(p2))inner_f();else{if(!isNumericAtomOrTensor(p1)&&!isNumericAtomOrTensor(p2)&&(push(p1),push(p2),inv(),subtract(),n=pop(),isZeroAtomOrTensor(n)))return push_symbol(SYMBOL_IDENTITY_MATRIX),void restore();if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),inner(),add(),p1=cdr(p1);return void restore()}if(expanding&&isadd(p2)){for(p2=cdr(p2),push(zero);iscons(p2);)push(p1),push(car(p2)),inner(),add(),p2=cdr(p2);return void restore()}if(push(p1),push(p2),istensor(p1)&&isNumericAtom(p2))tensor_times_scalar();else if(isNumericAtom(p1)&&istensor(p2))scalar_times_tensor();else{if(!isNumericAtom(p1)&&!isNumericAtom(p2))return pop(),pop(),push_symbol(INNER),push(p1),push(p2),list(3),void restore();multiply()}}return restore()},inner_f=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E;for(s=0,(h=p1.tensor.dim[p1.tensor.ndim-1])!==p2.tensor.dim[0]&&stop("inner: tensor dimension check"),(d=p1.tensor.ndim+p2.tensor.ndim-2)>MAXDIM&&stop("inner: rank of result exceeds maximum"),t=p1.tensor.elem,r=p2.tensor.elem,e=1,s=m=0,y=p1.tensor.ndim-1;0<=y?m<y:m>y;s=0<=y?++m:--m)e*=p1.tensor.dim[s];for(n=1,s=o=1,v=p2.tensor.ndim;1<=v?o<v:o>v;s=1<=v?++o:--o)n*=p2.tensor.dim[s];for(i=(p3=alloc_tensor(e*n)).tensor.elem,s=u=0,b=e;0<=b?u<b:u>b;s=0<=b?++u:--u)for(a=c=0,x=h;0<=x?c<x:c>x;a=0<=x?++c:--c)if(!isZeroAtomOrTensor(t[s*h+a]))for(l=p=0,_=n;0<=_?p<_:p>_;l=0<=_?++p:--p)push(t[s*h+a]),push(r[a*n+l]),multiply(),push(i[s*n+l]),add(),i[s*n+l]=pop();if(0===d)return push(p3.tensor.elem[0]);for(p3.tensor.ndim=d,a=0,s=f=0,w=p1.tensor.ndim-1;0<=w?f<w:f>w;s=0<=w?++f:--f)p3.tensor.dim[s]=p1.tensor.dim[s];for(a=p1.tensor.ndim-1,s=g=0,E=p2.tensor.ndim-1;0<=E?g<E:g>E;s=0<=E?++g:--g)p3.tensor.dim[a+s]=p2.tensor.dim[s+1];return push(p3)},get_innerprod_factors=function(t,e){if(iscons(t)){if(cdr(t)!==symbol(NIL))return isinnerordot(t)?(get_innerprod_factors(car(cdr(t)),e),void get_innerprod_factors(cdr(cdr(t)),e)):add_factor_to_accumulator(t,e);t=get_innerprod_factors(car(t),e)}else add_factor_to_accumulator(t,e)},add_factor_to_accumulator=function(t,e){if(t!==symbol(NIL))return e.push(t)},itab=["f(a,a*x)","f(1/x,log(x))","f(x^a,x^(a+1)/(a+1))","f(x^(-2),-x^(-1))","f(x^(-1/2),2*x^(1/2))","f(x^(1/2),2/3*x^(3/2))","f(x,x^2/2)","f(x^2,x^3/3)","f(exp(a*x),1/a*exp(a*x))","f(exp(a*x+b),1/a*exp(a*x+b))","f(x*exp(a*x^2),exp(a*x^2)/(2*a))","f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))","f(log(a*x),x*log(a*x)-x)","f(a^x,a^x/log(a),or(not(number(a)),a>0))","f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/(a+b*x),1/b*log(a+b*x))","f(1/(a+b*x)^2,-1/(b*(a+b*x)))","f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)","f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)","f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))","f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))","f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))","f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))","f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))","f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))","f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))","f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))","f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))","f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))","f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))","f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))","f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))","f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))","f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))","f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))","f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))","f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))","f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))","f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))","f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)","f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)","f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))","f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)","f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)","f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)","f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))","f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))","f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))","f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))","f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))","f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))","f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))","f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))","f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))","f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))","f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))","f(x/sqrt(a-x^2),-sqrt(a-x^2))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))","f(sin(a*x),-cos(a*x)/a)","f(cos(a*x),sin(a*x)/a)","f(tan(a*x),-log(cos(a*x))/a)","f(1/tan(a*x),log(sin(a*x))/a)","f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)","f(1/sin(a*x),log(tan(a*x/2))/a)","f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))","f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))","f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))","f(1/sin(a*x)^2,-1/(a*tan(a*x)))","f(1/cos(a*x)^2,tan(a*x)/a)","f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))","f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)","f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))","f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)","f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))","f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)","f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)","f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)","f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))","f(sin(a+b*x),-cos(a+b*x)/b)","f(cos(a+b*x),sin(a+b*x)/b)","f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)","f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)","f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)","f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)","f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)","f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)","f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)","f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)","f(x*log(a*x),x^2*log(a*x)/2-x^2/4)","f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)","f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)","f(1/x*1/(a+log(x)),log(a+log(x)))","f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)","f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)","f(sinh(x),cosh(x))","f(cosh(x),sinh(x))","f(tanh(x),log(cosh(x)))","f(x*sinh(x),x*cosh(x)-sinh(x))","f(x*cosh(x),x*sinh(x)-cosh(x))","f(sinh(x)^2,sinh(2*x)/4-x/2)","f(tanh(x)^2,x-tanh(x))","f(cosh(x)^2,sinh(2*x)/4+x/2)","f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)","f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)","f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)","f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))","f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)","f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)","f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))","f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))","f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))","f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))","f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))",0],Eval_integral=function(){var t,e,r,n,i;for(e=0,p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?(guess(),push(symbol(NIL))):isNumericAtom(p2)?(guess(),push(p2)):(push(p2),p1=cdr(p1),push(car(p1)),Eval()),p5=pop(),p4=pop(),p3=pop();;){if(isNumericAtom(p5)?(push(p5),e=pop_integer(),isNaN(e)&&stop("nth integral: check n")):e=1,push(p3),e>=0)for(r=0,n=e;0<=n?r<n:r>n;0<=n?++r:--r)push(p4),integral();else for(t=0,i=e=-e;0<=i?t<i:t>i;0<=i?++t:--t)push(p4),derivative();if(p3=pop(),p5===symbol(NIL))break;if(isNumericAtom(p5)){if(p1=cdr(p1),push(car(p1)),Eval(),(p5=pop())===symbol(NIL))break;isNumericAtom(p5)||(p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop())}else p4=p5,p1=cdr(p1),push(car(p1)),Eval(),p5=pop()}return push(p3)},integral=function(){return save(),p2=pop(),p1=pop(),car(p1)===symbol(ADD)?integral_of_sum():car(p1)===symbol(MULTIPLY)?integral_of_product():integral_of_form(),p1=pop(),Find(p1,symbol(INTEGRAL))&&stop("integral: sorry, could not find a solution"),push(p1),simplify(),Eval(),restore()},integral_of_sum=function(){var t;for(p1=cdr(p1),push(car(p1)),push(p2),integral(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),push(p2),integral(),add(),t.push(p1=cdr(p1));return t},integral_of_product=function(){return push(p1),push(p2),partition(),p1=pop(),integral_of_form(),multiply()},integral_of_form=function(){var t,e;return t=italu_hashcode(p1,p2).toFixed(6),(e=hashed_itab[t])?(push(p1),push(p2),transform(e,!1),(p3=pop())===symbol(NIL)?(push_symbol(INTEGRAL),push(p1),push(p2),list(3)):push(p3)):(push_symbol(INTEGRAL),push(p1),push(p2),void list(3))},hashcode_values={x:.95532,constexp:1.43762,constant:1.1441659362941434,constbase:1.2036412230421882,sin:1.7330548251830322,arcsin:1.6483368529465805,cos:1.0586721236863401,arccos:1.8405225918106694,tan:1.1224943776292506,arctan:1.1297397925394963,sinh:1.8176164926060079,cosh:1.9404934661708022,tanh:1.6421307715103122,log:1.477443701354924,erf:1.0825269225702916},italu_hashcode=function(t,e){var r;if(issymbol(t))return equal(t,e)?hashcode_values.x:hashcode_values.constant;if(iscons(t))switch(symnum(car(t))){case ADD:return hash_addition(cdr(t),e);case MULTIPLY:return hash_multiplication(cdr(t),e);case POWER:return hash_power(cadr(t),caddr(t),e);case EXP:return hash_power(symbol(E),cadr(t),e);case SQRT:return push_double(.5),r=pop(),hash_power(cadr(t),r,e);default:return hash_function(t,e)}return hashcode_values.constant},hash_function=function(t,e){var r,n,i;if(!Find(cadr(t),e))return hashcode_values.constant;if(i=car(t),r=italu_hashcode(cadr(t),e),!(n=hashcode_values[i.printname]))throw new Error("Unsupported function "+i.printname);return Math.pow(n,r)},hash_addition=function(t,e){var r,n,i,s;for(s={};iscons(t);)i=car(t),t=cdr(t),s[(Find(i,e)?italu_hashcode(i,e):hashcode_values.constant).toFixed(6)]=!0;for(r in n=0,s)hasProp.call(s,r)&&(s[r],n+=parseFloat(r,10));return n},hash_multiplication=function(t,e){var r,n;for(r=1;iscons(t);)n=car(t),t=cdr(t),Find(n,e)&&(r*=italu_hashcode(n,e));return r},hash_power=function(t,e,r){var n,i;if(n=hashcode_values.constant,i=hashcode_values.constexp,Find(t,r)&&(n=italu_hashcode(t,r)),Find(e,r))i=italu_hashcode(e,r);else{if(n===hashcode_values.constant)return hashcode_values.constant;isminusone(e)?i=-1:isoneovertwo(e)?i=.5:isminusoneovertwo(e)?i=-.5:equalq(e,2,1)?i=2:equalq(e,-2,1)&&(i=-2)}return Math.pow(n,i)},make_hashed_itab=function(){var t,e,r,n,i,s,o;for(s={},n=0,r=itab.length;n<r&&(i=itab[n]);n++)scan_meta(i),t=pop(),o=cadr(t),s[e=italu_hashcode(o,symbol(METAX)).toFixed(6)]||(s[e]=[]),s[e].push(i);return console.log("hashed_itab = "+JSON.stringify(s,null,2)),s},$.make_hashed_itab=make_hashed_itab,hashed_itab={1.144166:["f(a,a*x)"],"1.046770":["f(1/x,log(x))"],"0.936400":["f(x^a,x^(a+1)/(a+1))"],1.095727:["f(x^(-2),-x^(-1))"],1.023118:["f(x^(-1/2),2*x^(1/2))"],.977405:["f(x^(1/2),2/3*x^(3/2))"],"0.955320":["f(x,x^2/2)"],.912636:["f(x^2,x^3/3)"],1.137302:["f(exp(a*x),1/a*exp(a*x))","f(a^x,a^x/log(a),or(not(number(a)),a>0))"],1.326774:["f(exp(a*x+b),1/a*exp(a*x+b))"],1.080259:["f(x*exp(a*x^2),exp(a*x^2)/(2*a))"],1.260228:["f(x*exp(a*x^2+b),exp(a*x^2+b)/(2*a))"],1.451902:["f(log(a*x),x*log(a*x)-x)"],.486192:["f(1/(a+x^2),1/sqrt(a)*arctan(x/sqrt(a)),or(not(number(a)),a>0))","f(1/(a-x^2),1/sqrt(a)*arctanh(x/sqrt(a)))","f(1/(a+b*x^2),1/sqrt(a*b)*arctan(x*sqrt(a*b)/a),or(not(number(a*b)),a*b>0))","f(1/(a+b*x^2),1/(2*sqrt(-a*b))*log((a+x*sqrt(-a*b))/(a-x*sqrt(-a*b))),or(not(number(a*b)),a*b<0))"],.697274:["f(1/sqrt(a-x^2),arcsin(x/(sqrt(a))))","f(1/sqrt(a+x^2),log(x+sqrt(a+x^2)))","f(1/sqrt(x^2+a),log(x+sqrt(x^2+a)))"],.476307:["f(1/(a+b*x),1/b*log(a+b*x))"],.226868:["f(1/(a+b*x)^2,-1/(b*(a+b*x)))"],2.904531:["f(1/(a+b*x)^3,-1/(2*b)*1/(a+b*x)^2)"],.455026:["f(x/(a+b*x),x/b-a*log(a+b*x)/b/b)"],.216732:["f(x/(a+b*x)^2,1/b^2*(log(a+b*x)+a/(a+b*x)))"],.434695:["f(x^2/(a+b*x),1/b^2*(1/2*(a+b*x)^2-2*a*(a+b*x)+a^2*log(a+b*x)))"],.207048:["f(x^2/(a+b*x)^2,1/b^3*(a+b*x-2*a*log(a+b*x)-a^2/(a+b*x)))"],2.650781:["f(x^2/(a+b*x)^3,1/b^3*(log(a+b*x)+2*a/(a+b*x)-1/2*a^2/(a+b*x)^2))"],.498584:["f(1/x*1/(a+b*x),-1/a*log((a+b*x)/x))"],.237479:["f(1/x*1/(a+b*x)^2,1/a*1/(a+b*x)-1/a^2*log((a+b*x)/x))"],3.040375:["f(1/x*1/(a+b*x)^3,1/a^3*(1/2*((2*a+b*x)/(a+b*x))^2+log(x/(a+b*x))))"],.521902:["f(1/x^2*1/(a+b*x),-1/(a*x)+b/a^2*log((a+b*x)/x))"],.446014:["f(1/x^3*1/(a+b*x),(2*b*x-a)/(2*a^2*x^2)+b^2/a^3*log(x/(a+b*x)))"],.248586:["f(1/x^2*1/(a+b*x)^2,-(a+2*b*x)/(a^2*x*(a+b*x))+2*b/a^3*log((a+b*x)/x))"],.464469:["f(x/(a+b*x^2),1/2*1/b*log(a+b*x^2))"],.443716:["f(x^2/(a+b*x^2),x/b-a/b*integral(1/(a+b*x^2),x))"],.236382:["f(1/(a+b*x^2)^2,x/(2*a*(a+b*x^2))+1/2*1/a*integral(1/(a+b*x^2),x))"],.508931:["f(1/x*1/(a+b*x^2),1/2*1/a*log(x^2/(a+b*x^2)))"],.532733:["f(1/x^2*1/(a+b*x^2),-1/(a*x)-b/a*integral(1/(a+b*x^2),x))"],.480638:["f(1/(a+b*x^3),1/3*1/a*(a/b)^(1/3)*(1/2*log(((a/b)^(1/3)+x)^3/(a+b*x^3))+sqrt(3)*arctan((2*x-(a/b)^(1/3))*(a/b)^(-1/3)/sqrt(3))))"],.438648:["f(x^2/(a+b*x^3),1/3*1/b*log(a+b*x^3))"],.459164:["f(x/(a+b*x^4),1/2*sqrt(b/a)/b*arctan(x^2*sqrt(b/a)),or(not(number(a*b)),a*b>0))","f(x/(a+b*x^4),1/4*sqrt(-b/a)/b*log((x^2-sqrt(-a/b))/(x^2+sqrt(-a/b))),or(not(number(a*b)),a*b<0))"],"0.450070":["f(x^3/(a+b*x^4),1/4*1/b*log(a+b*x^4))"],"1.448960":["f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))"],1.384221:["f(x*sqrt(a+b*x),-2*(2*a-3*b*x)*sqrt((a+b*x)^3)/15/b^2)"],1.322374:["f(x^2*sqrt(a+b*x),2*(8*a^2-12*a*b*x+15*b^2*x^2)*sqrt((a+b*x)^3)/105/b^3)"],1.516728:["f(sqrt(a+b*x)/x,2*sqrt(a+b*x)+a*integral(1/x*1/sqrt(a+b*x),x))"],1.587665:["f(sqrt(a+b*x)/x^2,-sqrt(a+b*x)/x+b/2*integral(1/x*1/sqrt(a+b*x),x))"],"0.690150":["f(1/sqrt(a+b*x),2*sqrt(a+b*x)/b)"],.659314:["f(x/sqrt(a+b*x),-2/3*(2*a-b*x)*sqrt(a+b*x)/b^2)"],.629856:["f(x^2/sqrt(a+b*x),2/15*(8*a^2-4*a*b*x+3*b^2*x^2)*sqrt(a+b*x)/b^3)"],.722428:["f(1/x*1/sqrt(a+b*x),1/sqrt(a)*log((sqrt(a+b*x)-sqrt(a))/(sqrt(a+b*x)+sqrt(a))),or(not(number(a)),a>0))","f(1/x*1/sqrt(a+b*x),2/sqrt(-a)*arctan(sqrt(-(a+b*x)/a)),or(not(number(a)),a<0))"],.756216:["f(1/x^2*1/sqrt(a+b*x),-sqrt(a+b*x)/a/x-1/2*b/a*integral(1/x*1/sqrt(a+b*x),x))"],1.434156:["f(sqrt(x^2+a),1/2*(x*sqrt(x^2+a)+a*log(x+sqrt(x^2+a))))","f(sqrt(a-x^2),1/2*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(abs(a)))))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*log(x*sqrt(a)+sqrt(a*x^2+b))/2/sqrt(a),and(number(a),a>0))","f(sqrt(a*x^2+b),x*sqrt(a*x^2+b)/2+b*arcsin(x*sqrt(-a/b))/2/sqrt(-a),and(number(a),a<0))"],.729886:["f(1/x*1/sqrt(x^2+a),arcsec(x/sqrt(-a))/sqrt(-a),or(not(number(a)),a<0))","f(1/x*1/sqrt(x^2+a),-1/sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(1/x*1/sqrt(a-x^2),-1/sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"1.501230":["f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(a)*log((sqrt(a)+sqrt(x^2+a))/x),or(not(number(a)),a>0))","f(sqrt(x^2+a)/x,sqrt(x^2+a)-sqrt(-a)*arcsec(x/sqrt(-a)),or(not(number(a)),a<0))","f(sqrt(a-x^2)/x,sqrt(a-x^2)-sqrt(a)*log((sqrt(a)+sqrt(a-x^2))/x),or(not(number(a)),a>0))"],"0.666120":["f(x/sqrt(x^2+a),sqrt(x^2+a))","f(x/sqrt(a-x^2),-sqrt(a-x^2))"],1.370077:["f(x*sqrt(x^2+a),1/3*sqrt((x^2+a)^3))","f(x*sqrt(a-x^2),-1/3*sqrt((a-x^2)^3))"],1.730087:["f(sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2+a^(1/3))^3)+3/2*a^(1/3)*x*sqrt(x^2+a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2+a^(1/3)))))","f(sqrt(-a+x^6-3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/4*(x*sqrt((x^2-a^(1/3))^3)-3/2*a^(1/3)*x*sqrt(x^2-a^(1/3))+3/2*a^(2/3)*log(x+sqrt(x^2-a^(1/3)))))"],.578006:["f(1/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),x/a^(1/3)/sqrt(x^2+a^(1/3)))"],"0.552180":["f(x/sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),-1/sqrt(x^2+a^(1/3)))"],1.652787:["f(x*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/5*sqrt((x^2+a^(1/3))^5))"],1.308862:["f(x^2*sqrt(x^2+a),1/4*x*sqrt((x^2+a)^3)-1/8*a*x*sqrt(x^2+a)-1/8*a^2*log(x+sqrt(x^2+a)))","f(x^2*sqrt(a-x^2),-x/4*sqrt((a-x^2)^3)+1/8*a*(x*sqrt(a-x^2)+a*arcsin(x/sqrt(a))),or(not(number(a)),a>0))"],1.342944:["f(x^3*sqrt(x^2+a),(1/5*x^2-2/15*a)*sqrt((x^2+a)^3),and(number(a),a>0))","f(x^3*sqrt(x^2+a),sqrt((x^2+a)^5)/5-a*sqrt((x^2+a)^3)/3,and(number(a),a<0))","f(x^3*sqrt(a-x^2),(-1/5*x^2-2/15*a)*sqrt((a-x^2)^3),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^3,-1/2*sqrt(a-x^2)/x^2+1/2*log((sqrt(a)+sqrt(a-x^2))/x)/sqrt(a),or(not(number(a)),a>0))","f(sqrt(a-x^2)/x^4,-1/3*sqrt((a-x^2)^3)/a/x^3,or(not(number(a)),a>0))"],.636358:["f(x^2/sqrt(x^2+a),1/2*x*sqrt(x^2+a)-1/2*a*log(x+sqrt(x^2+a)))","f(x^2/sqrt(a-x^2),-x/2*sqrt(a-x^2)+a/2*arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],.652928:["f(x^3/sqrt(x^2+a),1/3*sqrt((x^2+a)^3)-a*sqrt(x^2+a))","f(1/x^3*1/sqrt(x^2+a),-1/2*sqrt(x^2+a)/a/x^2+1/2*log((sqrt(a)+sqrt(x^2+a))/x)/a^(3/2),or(not(number(a)),a>0))","f(1/x^3*1/sqrt(x^2-a),1/2*sqrt(x^2-a)/a/x^2+1/2*1/(a^(3/2))*arcsec(x/(a^(1/2))),or(not(number(a)),a>0))"],.764022:["f(1/x^2*1/sqrt(x^2+a),-sqrt(x^2+a)/a/x)","f(1/x^2*1/sqrt(a-x^2),-sqrt(a-x^2)/a/x,or(not(number(a)),a>0))"],"1.578940":["f(x^2*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/6*x*sqrt((x^2+a^(1/3))^5)-1/24*a^(1/3)*x*sqrt((x^2+a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2+a^(1/3))-1/16*a*log(x+sqrt(x^2+a^(1/3))),or(not(number(a)),a>0))","f(x^2*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/6*x*sqrt((x^2-a^(1/3))^5)+1/24*a^(1/3)*x*sqrt((x^2-a^(1/3))^3)-1/16*a^(2/3)*x*sqrt(x^2-a^(1/3))+1/16*a*log(x+sqrt(x^2-a^(1/3))),or(not(number(a)),a>0))"],1.620055:["f(x^3*sqrt(a+x^6+3*a^(1/3)*x^4+3*a^(2/3)*x^2),1/7*sqrt((x^2+a^(1/3))^7)-1/5*a^(1/3)*sqrt((x^2+a^(1/3))^5),or(not(number(a)),a>0))","f(x^3*sqrt(-a-3*a^(1/3)*x^4+3*a^(2/3)*x^2+x^6),1/7*sqrt((x^2-a^(1/3))^7)+1/5*a^(1/3)*sqrt((x^2-a^(1/3))^5),or(not(number(a)),a>0))"],.332117:["f(1/(x-a)/sqrt(x^2-a^2),-sqrt(x^2-a^2)/a/(x-a))","f(1/(x+a)/sqrt(x^2-a^2),sqrt(x^2-a^2)/a/(x+a))"],1.571443:["f(sqrt(a-x^2)/x^2,-sqrt(a-x^2)/x-arcsin(x/sqrt(a)),or(not(number(a)),a>0))"],1.690994:["f(sin(a*x),-cos(a*x)/a)"],1.055979:["f(cos(a*x),sin(a*x)/a)"],1.116714:["f(tan(a*x),-log(cos(a*x))/a)"],.895484:["f(1/tan(a*x),log(sin(a*x))/a)"],.946989:["f(1/cos(a*x),log(tan(pi/4+a*x/2))/a)"],.591368:["f(1/sin(a*x),log(tan(a*x/2))/a)"],2.859462:["f(sin(a*x)^2,x/2-sin(2*a*x)/(4*a))"],"2.128050":["f(sin(a*x)^3,-cos(a*x)*(sin(a*x)^2+2)/(3*a))","f(sin(a*x)^4,3/8*x-sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],1.115091:["f(cos(a*x)^2,x/2+sin(2*a*x)/(4*a))"],1.081452:["f(cos(a*x)^3,sin(a*x)*(cos(a*x)^2+2)/(3*a))","f(cos(a*x)^4,3/8*x+sin(2*a*x)/(4*a)+sin(4*a*x)/(32*a))"],.349716:["f(1/sin(a*x)^2,-1/(a*tan(a*x)))"],.896788:["f(1/cos(a*x)^2,tan(a*x)/a)"],1.785654:["f(sin(a*x)*cos(a*x),sin(a*x)^2/(2*a))"],"3.188560":["f(sin(a*x)^2*cos(a*x)^2,-sin(4*a*x)/(32*a)+x/8)"],1.516463:["f(sin(a*x)/cos(a*x)^2,1/(a*cos(a*x)))"],2.707879:["f(sin(a*x)^2/cos(a*x),(log(tan(pi/4+a*x/2))-sin(a*x))/a)"],.369293:["f(cos(a*x)/sin(a*x)^2,-1/(a*sin(a*x)))"],.560019:["f(1/(sin(a*x)*cos(a*x)),log(tan(a*x))/a)"],.530332:["f(1/(sin(a*x)*cos(a*x)^2),(1/cos(a*x)+log(tan(a*x/2)))/a)"],.331177:["f(1/(sin(a*x)^2*cos(a*x)),(log(tan(pi/4+a*x/2))-1/sin(a*x))/a)"],.313621:["f(1/(sin(a*x)^2*cos(a*x)^2),-2/(a*tan(2*a*x)))"],3.172365:["f(sin(a+b*x),-cos(a+b*x)/b)"],1.127162:["f(cos(a+b*x),sin(a+b*x)/b)"],.352714:["f(1/(b+b*sin(a*x)),-tan(pi/4-a*x/2)/a/b)","f(1/(b-b*sin(a*x)),tan(pi/4+a*x/2)/a/b)","f(1/(a+b*sin(x)),1/sqrt(b^2-a^2)*log((a*tan(x/2)+b-sqrt(b^2-a^2))/(a*tan(x/2)+b+sqrt(b^2-a^2))),b^2-a^2)"],.454515:["f(1/(b+b*cos(a*x)),tan(a*x/2)/a/b)","f(1/(b-b*cos(a*x)),-1/tan(a*x/2)/a/b)","f(1/(a+b*cos(x)),1/sqrt(b^2-a^2)*log((sqrt(b^2-a^2)*tan(x/2)+a+b)/(sqrt(b^2-a^2)*tan(x/2)-a-b)),b^2-a^2)"],1.615441:["f(x*sin(a*x),sin(a*x)/a^2-x*cos(a*x)/a)"],1.543263:["f(x^2*sin(a*x),2*x*sin(a*x)/a^2-(a^2*x^2-2)*cos(a*x)/a^3)"],1.008798:["f(x*cos(a*x),cos(a*x)/a^2+x*sin(a*x)/a)"],.963724:["f(x^2*cos(a*x),2*x*cos(a*x)/a^2+(a^2*x^2-2)*sin(a*x)/a^3)"],1.611938:["f(arcsin(a*x),x*arcsin(a*x)+sqrt(1-a^2*x^2)/a)"],1.791033:["f(arccos(a*x),x*arccos(a*x)-sqrt(1-a^2*x^2)/a)"],1.123599:["f(arctan(a*x),x*arctan(a*x)-1/2*log(1+a^2*x^2)/a)"],1.387031:["f(x*log(a*x),x^2*log(a*x)/2-x^2/4)"],1.325058:["f(x^2*log(a*x),x^3*log(a*x)/3-1/9*x^3)"],2.108018:["f(log(x)^2,x*log(x)^2-2*x*log(x)+2*x)"],.403214:["f(1/x*1/(a+log(x)),log(a+log(x)))"],2.269268:["f(log(a*x+b),(a*x+b)*log(a*x+b)/a-x)"],2.486498:["f(log(a*x+b)/x^2,a/b*log(x)-(a*x+b)*log(a*x+b)/b/x)"],1.769733:["f(sinh(x),cosh(x))"],1.883858:["f(cosh(x),sinh(x))"],"1.606140":["f(tanh(x),log(cosh(x)))"],1.690661:["f(x*sinh(x),x*cosh(x)-sinh(x))"],1.799688:["f(x*cosh(x),x*sinh(x)-cosh(x))"],3.131954:["f(sinh(x)^2,sinh(2*x)/4-x/2)"],2.579685:["f(tanh(x)^2,x-tanh(x))"],3.548923:["f(cosh(x)^2,sinh(2*x)/4+x/2)"],1.058866:["f(x^3*exp(a*x^2),exp(a*x^2)*(x^2/a-1/(a^2))/2)"],"1.235270":["f(x^3*exp(a*x^2+b),exp(a*x^2)*exp(b)*(x^2/a-1/(a^2))/2)"],1.130783:["f(exp(a*x^2),-i*sqrt(pi)*erf(i*sqrt(a)*x)/sqrt(a)/2)"],1.078698:["f(erf(a*x),x*erf(a*x)+exp(-a^2*x^2)/a/sqrt(pi))"],"2.573650":["f(x^2*(1-x^2)^(3/2),(x*sqrt(1-x^2)*(-8*x^4+14*x^2-3)+3*arcsin(x))/48)","f(x^2*(1-x^2)^(5/2),(x*sqrt(1-x^2)*(48*x^6-136*x^4+118*x^2-15)+15*arcsin(x))/384)"],2.640666:["f(x^4*(1-x^2)^(3/2),(-x*sqrt(1-x^2)*(16*x^6-24*x^4+2*x^2+3)+3*arcsin(x))/128)"],1.086487:["f(x*exp(a*x),exp(a*x)*(a*x-1)/(a^2))"],1.267493:["f(x*exp(a*x+b),exp(a*x+b)*(a*x-1)/(a^2))"],1.037943:["f(x^2*exp(a*x),exp(a*x)*(a^2*x^2-2*a*x+2)/(a^3))"],1.210862:["f(x^2*exp(a*x+b),exp(a*x+b)*(a^2*x^2-2*a*x+2)/(a^3))"],"1.064970":["f(x^3*exp(a*x),exp(a*x)*x^3/a-3/a*integral(x^2*exp(a*x),x))"],1.242392:["f(x^3*exp(a*x+b),exp(a*x+b)*x^3/a-3/a*integral(x^2*exp(a*x+b),x))"]},INV_check_arg=function(){return istensor(p1)?2!==p1.tensor.ndim||p1.tensor.dim[0]!==p1.tensor.dim[1]?0:1:0},inv=function(){var t,e,r,n;if(save(),p1=pop(),isinv(p1))return push(car(cdr(p1))),void restore();if(isidentitymatrix(p1))return push(p1),void restore();if(!expanding||!isinnerordot(p1))return 0===INV_check_arg()?(push_symbol(INV),push(p1),list(2),void restore()):(isNumericAtomOrTensor(p1)?yyinvg():(push(p1),adj(),push(p1),det(),p2=pop(),isZeroAtomOrTensor(p2)&&stop("inverse of singular matrix"),push(p2),divide()),restore());for(p1=cdr(p1),t=[];iscons(p1);)t.push(car(p1)),p1=cdr(p1);for(e=r=n=t.length-1;n<=0?r<=0:r>=0;e=n<=0?++r:--r)push(t[e]),inv(),e!==t.length-1&&inner();restore()},invg=function(){return save(),p1=pop(),0===INV_check_arg()?(push_symbol(INVG),push(p1),list(2),void restore()):(yyinvg(),restore())},yyinvg=function(){var t,e,r,n,i,s,o,a,u,l,c,p;for(e=0,n=0,o=p1.tensor.dim[0],t=tos,e=a=0,u=o;0<=u?a<u:a>u;e=0<=u?++a:--a)for(n=r=0,l=o;0<=l?r<l:r>l;n=0<=l?++r:--r)push(e===n?one:zero);for(e=i=0,c=o*o;0<=c?i<c:i>c;e=0<=c?++i:--i)push(p1.tensor.elem[e]);for(INV_decomp(o),(p1=alloc_tensor(o*o)).tensor.ndim=2,p1.tensor.dim[0]=o,p1.tensor.dim[1]=o,e=s=0,p=o*o;0<=p?s<p:s>p;e=0<=p?++s:--s)p1.tensor.elem[e]=stack[t+e];return moveTos(tos-2*o*o),push(p1)},INV_decomp=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m;for(r=0,n=0,s=0,m=(e=tos-t*t)-t*t,d=[],r=u=0,l=t;0<=l?u<l:u>l;r=0<=l?++u:--u){if(equal(stack[e+t*r+r],zero)){for(n=i=c=r+1,p=t;(c<=p?i<p:i>p)&&equal(stack[e+t*n+r],zero);n=c<=p?++i:--i);for(n===t&&stop("inverse of singular matrix"),s=o=0,h=t;0<=h?o<h:o>h;s=0<=h?++o:--o)p2=stack[e+t*r+s],stack[e+t*r+s]=stack[e+t*n+s],stack[e+t*n+s]=p2,p2=stack[m+t*r+s],stack[m+t*r+s]=stack[m+t*n+s],stack[m+t*n+s]=p2}for(p2=stack[e+t*r+r],s=a=0,f=t;0<=f?a<f:a>f;s=0<=f?++a:--a)s>r&&(push(stack[e+t*r+s]),push(p2),divide(),stack[e+t*r+s]=pop()),push(stack[m+t*r+s]),push(p2),divide(),stack[m+t*r+s]=pop();d.push(function(){var i,o,a;for(a=[],n=i=0,o=t;0<=o?i<o:i>o;n=0<=o?++i:--i)n!==r&&(p2=stack[e+t*n+r],a.push(function(){var i,o,a;for(a=[],s=i=0,o=t;0<=o?i<o:i>o;s=0<=o?++i:--i)s>r&&(push(stack[e+t*n+s]),push(stack[e+t*r+s]),push(p2),multiply(),subtract(),stack[e+t*n+s]=pop()),push(stack[m+t*n+s]),push(stack[m+t*r+s]),push(p2),multiply(),subtract(),a.push(stack[m+t*n+s]=pop());return a}()));return a}())}return d},DEBUG_IS=!1,isZeroAtom=function(t){switch(t.k){case NUM:return MZERO(t.q.a);case DOUBLE:return 0===t.d;default:return!1}},isZeroTensor=function(t){var e,r,n;if(t.k!==TENSOR)return 0;for(e=r=0,n=t.tensor.nelem;0<=n?r<n:r>n;e=0<=n?++r:--r)if(!isZeroAtomOrTensor(t.tensor.elem[e]))return 0;return 1},isZeroAtomOrTensor=function(t){return isZeroAtom(t)||isZeroTensor(t)},isZeroLikeOrNonZeroLikeOrUndetermined=function(t){var e;if(push(t),Eval_predicate(),e=pop(),isZeroAtomOrTensor(e))return 0;if(isNumericAtomOrTensor(e))return 1;if(push(e),zzfloat(),e=pop(),isZeroAtomOrTensor(e))return 0;if(isNumericAtomOrTensor(e))return 1;if(Find(e,imaginaryunit)){if(push(e),absValFloat(),Eval_predicate(),e=pop(),isZeroAtomOrTensor(e))return 0;if(isNumericAtomOrTensor(e))return 1}return null},isnegativenumber=function(t){switch(t.k){case NUM:if(-1===MSIGN(t.q.a))return 1;break;case DOUBLE:if(t.d<0)return 1}return 0},ispositivenumber=function(t){switch(t.k){case NUM:if(1===MSIGN(t.q.a))return 1;break;case DOUBLE:if(t.d>0)return 1}return 0},isplustwo=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,2)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(2===t.d)return 1}return 0},isplusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(1===t.d)return 1}return 0},isminusone=function(t){switch(t.k){case NUM:if(MEQUAL(t.q.a,-1)&&MEQUAL(t.q.b,1))return 1;break;case DOUBLE:if(-1===t.d)return 1}return 0},isone=function(t){return isplusone(t)||isminusone(t)},isinteger=function(t){return t.k===NUM&&MEQUAL(t.q.b,1)?1:0},isintegerorintegerfloat=function(t){return t.k===DOUBLE?t.d===Math.round(t.d)?1:0:isinteger(t)},isnonnegativeinteger=function(t){return isrational(t)&&MEQUAL(t.q.b,1)&&1===MSIGN(t.q.a)?1:0},isposint=function(t){return isinteger(t)&&1===MSIGN(t.q.a)?1:0},isunivarpolyfactoredorexpandedform=function(t,e){return DEBUG&&console.log("isunivarpolyfactoredorexpandedform: p: "+t+" x: "+e),null==e&&(push(t),guess(),e=pop(),pop()),ispolyfactoredorexpandedform(t,e)&&Find(t,symbol(SYMBOL_X))+Find(t,symbol(SYMBOL_Y))+Find(t,symbol(SYMBOL_Z))===1?e:0},ispolyfactoredorexpandedform=function(t,e){return ispolyfactoredorexpandedform_factor(t,e)},ispolyfactoredorexpandedform_factor=function(t,e){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(DEBUG&&console.log("ispolyfactoredorexpandedform_factor testing "+car(t)),!ispolyfactoredorexpandedform_power(car(t),e))return DEBUG&&console.log("... tested negative:"+car(t)),0;t=cdr(t)}return 1}return ispolyfactoredorexpandedform_power(t,e)},ispolyfactoredorexpandedform_power=function(t,e){return car(t)===symbol(POWER)?(DEBUG&&console.log("ispolyfactoredorexpandedform_power (isposint(caddr(p)) "+(isposint(caddr(t)),DEBUG?console.log("ispolyfactoredorexpandedform_power ispolyexpandedform_expr(cadr(p), x)) "+ispolyexpandedform_expr(cadr(t),e)):void 0)),isposint(caddr(t))&&ispolyexpandedform_expr(cadr(t),e)):(DEBUG&&console.log("ispolyfactoredorexpandedform_power not a power, testing if this is exp form: "+t),ispolyexpandedform_expr(t,e))},ispolyexpandedform=function(t,e){return Find(t,e)?ispolyexpandedform_expr(t,e):0},ispolyexpandedform_expr=function(t,e){if(car(t)===symbol(ADD)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_term(car(t),e))return 0;t=cdr(t)}return 1}return ispolyexpandedform_term(t,e)},ispolyexpandedform_term=function(t,e){if(car(t)===symbol(MULTIPLY)){for(t=cdr(t);iscons(t);){if(!ispolyexpandedform_factor(car(t),e))return 0;t=cdr(t)}return 1}return ispolyexpandedform_factor(t,e)},ispolyexpandedform_factor=function(t,e){return equal(t,e)?1:car(t)===symbol(POWER)&&equal(cadr(t),e)?isposint(caddr(t))?1:0:Find(t,e)?0:1},isnegativeterm=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},hasNegativeRationalExponent=function(t){return car(t)===symbol(POWER)&&isrational(car(cdr(cdr(t))))&&isnegativenumber(car(cdr(t)))?(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has imaginary component"),1):(DEBUG_IS&&console.log("hasNegativeRationalExponent: "+t.toString()+" has NO imaginary component"),0)},isimaginarynumberdouble=function(t){return car(t)===symbol(MULTIPLY)&&3===length(t)&&isdouble(cadr(t))&&hasNegativeRationalExponent(caddr(t))||equal(t,imaginaryunit)?1:0},isimaginarynumber=function(t){return car(t)===symbol(MULTIPLY)&&3===length(t)&&isNumericAtom(cadr(t))&&equal(caddr(t),imaginaryunit)||equal(t,imaginaryunit)||hasNegativeRationalExponent(caddr(t))?(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" is imaginary number"),1):(DEBUG_IS&&console.log("isimaginarynumber: "+t.toString()+" isn't an imaginary number"),0)},iscomplexnumberdouble=function(t){return car(t)===symbol(ADD)&&3===length(t)&&isdouble(cadr(t))&&isimaginarynumberdouble(caddr(t))||isimaginarynumberdouble(t)?1:0},iscomplexnumber=function(t){return car(t)===symbol(ADD)&&3===length(t)&&isNumericAtom(cadr(t))&&isimaginarynumber(caddr(t))||isimaginarynumber(t)?(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),1):(DEBUG&&console.log("iscomplexnumber: "+t.toString()+" is imaginary number"),0)},iseveninteger=function(t){return isinteger(t)&&t.q.a.isEven()?1:0},isnegative=function(t){return car(t)===symbol(ADD)&&isnegativeterm(cadr(t))||isnegativeterm(t)?1:0},issymbolic=function(t){if(issymbol(t))return 1;for(;iscons(t);){if(issymbolic(car(t)))return 1;t=cdr(t)}return 0},isintegerfactor=function(t){return isinteger(t)||car(t)===symbol(POWER)&&isinteger(cadr(t))&&isinteger(caddr(t))},isNumberOneOverSomething=function(t){return isfraction(t)&&MEQUAL(t.q.a.abs(),1)},isoneover=function(t){return car(t)===symbol(POWER)&&isminusone(caddr(t))},isfraction=function(t){return t.k===NUM&&!MEQUAL(t.q.b,1)},equaln=function(t,e){switch(t.k){case NUM:return MEQUAL(t.q.a,e)&&MEQUAL(t.q.b,1);case DOUBLE:return t.d===e;default:return!1}},equalq=function(t,e,r){switch(t.k){case NUM:return MEQUAL(t.q.a,e)&&MEQUAL(t.q.b,r);case DOUBLE:return t.d===e/r;default:return!1}},isoneovertwo=function(t){return equalq(t,1,2)},isminusoneovertwo=function(t){return equalq(t,-1,2)},isoneoversqrttwo=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),2)&&equalq(caddr(t),-1,2)},isminusoneoversqrttwo=function(t){return car(t)===symbol(MULTIPLY)&&equaln(cadr(t),-1)&&isoneoversqrttwo(caddr(t))&&3===length(t)},issqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&3===length(t)},isminussqrtthreeovertwo=function(t){return car(t)===symbol(MULTIPLY)&&isminusoneovertwo(cadr(t))&&issqrtthree(caddr(t))&&3===length(t)},issqrtthree=function(t){return car(t)===symbol(POWER)&&equaln(cadr(t),3)&&isoneovertwo(caddr(t))},isfloating=function(t){if(t.k===DOUBLE||t===symbol(FLOATF))return 1;for(;iscons(t);){if(isfloating(car(t)))return 1;t=cdr(t)}return 0},isimaginaryunit=function(t){return equal(t,imaginaryunit)?1:0},isquarterturn=function(t){var e,r;if(r=0,e=0,car(t)!==symbol(MULTIPLY))return 0;if(equal(cadr(t),imaginaryunit))return caddr(t)!==symbol(PI)||3!==length(t)?0:2;if(!isNumericAtom(cadr(t)))return 0;if(!equal(caddr(t),imaginaryunit))return 0;if(cadddr(t)!==symbol(PI))return 0;if(4!==length(t))return 0;if(push(cadr(t)),push_integer(2),multiply(),r=pop_integer(),isNaN(r))return 0;switch(r<1&&(e=1,r=-r),r%4){case 0:r=1;break;case 1:r=e?4:3;break;case 2:r=2;break;case 3:r=e?3:4}return r},isnpi=function(t){var e;return e=0,t===symbol(PI)?2:car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&caddr(t)===symbol(PI)&&3===length(t)?(push(cadr(t)),push_integer(2),multiply(),e=pop_integer(),isNaN(e)?0:e=e<0?4- -e%4:1+(e-1)%4):0},$.isZeroAtomOrTensor=isZeroAtomOrTensor,$.isnegativenumber=isnegativenumber,$.isplusone=isplusone,$.isminusone=isminusone,$.isinteger=isinteger,$.isnonnegativeinteger=isnonnegativeinteger,$.isposint=isposint,$.isnegativeterm=isnegativeterm,$.isimaginarynumber=isimaginarynumber,$.iscomplexnumber=iscomplexnumber,$.iseveninteger=iseveninteger,$.isnegative=isnegative,$.issymbolic=issymbolic,$.isintegerfactor=isintegerfactor,$.isoneover=isoneover,$.isfraction=isfraction,$.isoneoversqrttwo=isoneoversqrttwo,$.isminusoneoversqrttwo=isminusoneoversqrttwo,$.isfloating=isfloating,$.isimaginaryunit=isimaginaryunit,$.isquarterturn=isquarterturn,$.isnpi=isnpi,Eval_isprime=function(){return push(cadr(p1)),Eval(),p1=pop(),isnonnegativeinteger(p1)&&mprime(p1.q.a)?push_integer(1):push_integer(0)},Eval_laguerre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(0):push(p2),laguerre()},laguerre=function(){var t;return save(),p3=pop(),p2=pop(),p1=pop(),push(p2),(t=pop_integer())<0||isNaN(t)?(push_symbol(LAGUERRE),push(p1),push(p2),push(p3),list(4),void restore()):(issymbol(p1)?laguerre2(t):(p4=p1,p1=symbol(SECRETX),laguerre2(t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),restore())},laguerre2=function(t){var e,r,n,i;for(e=0,push_integer(1),push_integer(0),p6=pop(),i=[],e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)p5=p6,p6=pop(),push_integer(2*e+1),push(p1),subtract(),push(p3),add(),push(p6),multiply(),push_integer(e),push(p3),add(),push(p5),multiply(),subtract(),push_integer(e+1),i.push(divide());return i},Eval_lcm=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),lcm(),t.push(p1=cdr(p1));return t},lcm=function(){var t;return t=expanding,save(),yylcm(),restore(),expanding=t},yylcm=function(){return expanding=1,p2=pop(),p1=pop(),push(p1),push(p2),gcd(),push(p1),divide(),push(p2),divide(),inverse()},Eval_leading=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p1=pop())===symbol(NIL)?guess():push(p1),leading()},leading=function(){return save(),p2=pop(),p1=pop(),push(p1),push(p2),degree(),p3=pop(),push(p1),push(p2),push(p3),power(),divide(),push(p2),filter(),restore()},Eval_legendre=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(0):push(p2),legendre()},legendre=function(){return save(),__legendre(),restore()},__legendre=function(){var t,e;return p3=pop(),p2=pop(),p1=pop(),push(p2),e=pop_integer(),push(p3),t=pop_integer(),e<0||isNaN(e)||t<0||isNaN(t)?(push_symbol(LEGENDRE),push(p1),push(p2),push(p3),void list(4)):(issymbol(p1)?__legendre2(e,t):(p4=p1,p1=symbol(SECRETX),__legendre2(e,t),p1=p4,push(symbol(SECRETX)),push(p1),subst(),Eval()),__legendre3(t))},__legendre2=function(t,e){var r,n,i,s,o,a;for(r=0,push_integer(1),push_integer(0),p6=pop(),r=i=0,s=t;0<=s?i<s:i>s;r=0<=s?++i:--i)p5=p6,p6=pop(),push_integer(2*r+1),push(p1),multiply(),push(p6),multiply(),push_integer(r),push(p5),multiply(),subtract(),push_integer(r+1),divide();for(a=[],r=n=0,o=e;0<=o?n<o:n>o;r=0<=o?++n:--n)push(p1),a.push(derivative());return a},__legendre3=function(t){if(0!==t)return car(p1)===symbol(COS)?(push(cadr(p1)),sine(),square()):car(p1)===symbol(SIN)?(push(cadr(p1)),cosine(),square()):(push_integer(1),push(p1),square(),subtract()),push_integer(t),push_rational(1,2),multiply(),power(),multiply(),t%2?negate():void 0},list=function(t){var e,r,n;for(push(symbol(NIL)),n=[],e=0,r=t;0<=r?e<r:e>r;0<=r?++e:--e)n.push(cons());return n},Eval_log=function(){return push(cadr(p1)),Eval(),logarithm()},logarithm=function(){return save(),yylog(),restore()},yylog=function(){var t;if(t=0,(p1=pop())!==symbol(E))if(equaln(p1,1))push_integer(0);else{if(isnegativenumber(p1))return push(p1),negate(),logarithm(),push(imaginaryunit),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),multiply(),void add();if(isdouble(p1))return t=Math.log(p1.d),void push_double(t);if(isfraction(p1))return push(p1),numerator(),logarithm(),push(p1),denominator(),logarithm(),void subtract();if(car(p1)===symbol(POWER))return push(caddr(p1)),push(cadr(p1)),logarithm(),void multiply();if(car(p1)!==symbol(MULTIPLY))return push_symbol(LOG),push(p1),list(2);for(push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),logarithm(),add(),p1=cdr(p1)}else push_integer(1)},Eval_lookup=function(){return p1=cadr(p1),iscons(p1)||cadr(p1).k!==SYM||(p1=get_binding(p1)),push(p1)},madd=function(t,e){return t.add(e)},msub=function(t,e){return t.subtract(e)},addf=function(t,e){return t.add(e)},subf=function(t,e){return t.subtract(e)},ucmp=function(t,e){return t.compareAbs(e)},mgcd=function(t,e){return bigInt.gcd(t,e)},new_string=function(t){var e;return(e=new U).k=STR,e.str=t,e},out_of_memory=function(){return stop("out of memory")},push_zero_matrix=function(t,e){return push(alloc_tensor(t*e)),stack[tos-1].tensor.ndim=2,stack[tos-1].tensor.dim[0]=t,stack[tos-1].tensor.dim[1]=e},push_identity_matrix=function(t){var e,r,n;for(push_zero_matrix(t,t),e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)stack[tos-1].tensor.elem[e*t+e]=one;return check_tensor_dimensions(stack[tos-1])},push_cars=function(t){var e;for(e=[];iscons(t);)push(car(t)),e.push(t=cdr(t));return e},equal=function(t,e){return 0===cmp_expr(t,e)?1:0},lessp=function(t,e){return cmp_expr(t,e)<0?1:0},sign=function(t){return t<0?-1:t>0?1:0},cmp_expr=function(t,e){var r;if(r=0,t===e)return 0;if(t===symbol(NIL))return-1;if(e===symbol(NIL))return 1;if(isNumericAtom(t)&&isNumericAtom(e))return sign(compare_numbers(t,e));if(isNumericAtom(t))return-1;if(isNumericAtom(e))return 1;if(isstr(t)&&isstr(e))return sign(strcmp(t.str,e.str));if(isstr(t))return-1;if(isstr(e))return 1;if(issymbol(t)&&issymbol(e))return sign(strcmp(get_printname(t),get_printname(e)));if(issymbol(t))return-1;if(issymbol(e))return 1;if(istensor(t)&&istensor(e))return compare_tensors(t,e);if(istensor(t))return-1;if(istensor(e))return 1;for(;iscons(t)&&iscons(e);){if(0!==(r=cmp_expr(car(t),car(e))))return r;t=cdr(t),e=cdr(e)}return iscons(e)?-1:iscons(t)?1:0},length=function(t){var e;for(e=0;iscons(t);)t=cdr(t),e++;return e},unique=function(t){return save(),p1=symbol(NIL),p2=symbol(NIL),unique_f(t),p2!==symbol(NIL)&&(p1=symbol(NIL)),t=p1,restore(),t},unique_f=function(t){if(isstr(t))p1===symbol(NIL)?p1=t:t!==p1&&(p2=t);else for(;iscons(t);){if(unique_f(car(t)),p2!==symbol(NIL))return;t=cdr(t)}},ssqrt=function(){return push_rational(1,2),power()},yyexpand=function(){var t;return t=expanding,expanding=1,Eval(),expanding=t},exponential=function(){return push_symbol(E),swap(),power()},square=function(){return push_integer(2),power()},sort_stack=function(t){var e,r;return e=tos-t,(r=stack.slice(e,e+t)).sort(cmp_expr),stack=stack.slice(0,e).concat(r).concat(stack.slice(e+t))},$.equal=equal,$.length=length,mmul=function(t,e){return t.multiply(e)},mdiv=function(t,e){return t.divide(e)},mmod=function(t,e){return t.mod(e)},mdivrem=function(t,e){var r;return[(r=t.divmod(e)).quotient,r.remainder]},Eval_mod=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),mod()},mod=function(){var t;return t=0,save(),p2=pop(),p1=pop(),isZeroAtomOrTensor(p2)&&stop("mod function: divide by zero"),isNumericAtom(p1)&&isNumericAtom(p2)?(isdouble(p1)&&(push(p1),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p1=pop()),isdouble(p2)&&(push(p2),t=pop_integer(),isNaN(t)&&stop("mod function: cannot convert float value to integer"),push_integer(t),p2=pop()),isinteger(p1)&&isinteger(p2)||stop("mod function: integer arguments expected"),(p3=new U).k=NUM,p3.q.a=mmod(p1.q.a,p2.q.a),p3.q.b=mint(1),push(p3),restore()):(push_symbol(MOD),push(p1),push(p2),list(3),void restore())},mpow=function(t,e){return t.pow(e)},mprime=function(t){return t.isProbablePrime()},mroot=function(t,e){var r,n,i,s,o,a,u;for(t=t.abs(),r=0,i=0,0===e&&stop("root index is zero"),i=0;t.shiftRight(i)>0;)i++;if(0===i)return mint(0);for(i=Math.floor((i-1)/e),n=Math.floor(i/32+1),a=bigInt(n),r=s=0,o=n;0<=o?s<o:s>o;r=0<=o?++s:--s)a=a.and(bigInt(1).shiftLeft(r).not());for(;i>=0;){switch(a=a.or(bigInt(1).shiftLeft(i)),u=mpow(a,e),mcmp(u,t)){case 0:return a;case 1:a=a.and(bigInt(1).shiftLeft(i).not())}i--}return 0},DEBUG_MULTIPLY=!1,Eval_multiply=function(){var t;for(push(cadr(p1)),Eval(),p1=cddr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),multiply(),t.push(p1=cdr(p1));return t},multiply=function(){return esc_flag&&stop("escape key stop"),isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?multiply_numbers():(save(),yymultiply(),restore())},yymultiply=function(){var t,e,r,n,i,s;if(e=0,p2=pop(),p1=pop(),t=tos,isZeroAtom(p1)||isZeroAtom(p2))evaluatingAsFloats?push_double(0):push(zero);else if(expanding&&isadd(p1))for(p1=cdr(p1),evaluatingAsFloats?push_double(0):push(zero);iscons(p1);)push(car(p1)),push(p2),multiply(),add(),p1=cdr(p1);else if(expanding&&isadd(p2))for(p2=cdr(p2),evaluatingAsFloats?push_double(0):push(zero);iscons(p2);)push(p1),push(car(p2)),multiply(),add(),p2=cdr(p2);else{if(!istensor(p1)&&istensor(p2))return push(p1),push(p2),void scalar_times_tensor();if(istensor(p1)&&!istensor(p2))return push(p1),push(p2),void tensor_times_scalar();for(car(p1)===symbol(MULTIPLY)?p1=cdr(p1):(push(p1),list(1),p1=pop()),car(p2)===symbol(MULTIPLY)?p2=cdr(p2):(push(p2),list(1),p2=pop()),isNumericAtom(car(p1))&&isNumericAtom(car(p2))?(push(car(p1)),push(car(p2)),multiply_numbers(),p1=cdr(p1),p2=cdr(p2)):isNumericAtom(car(p1))?(push(car(p1)),p1=cdr(p1)):isNumericAtom(car(p2))?(push(car(p2)),p2=cdr(p2)):evaluatingAsFloats?push_double(1):push(one),parse_p1(),parse_p2();iscons(p1)&&iscons(p2);)if(caar(p1)!==symbol(OPERATOR)||caar(p2)!==symbol(OPERATOR))switch(cmp_expr(p3,p4)){case-1:push(car(p1)),p1=cdr(p1),parse_p1();break;case 1:push(car(p2)),p2=cdr(p2),parse_p2();break;case 0:combine_factors(t),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();break;default:stop("internal error 2")}else push_symbol(OPERATOR),push(cdar(p1)),push(cdar(p2)),append(),cons(),p1=cdr(p1),p2=cdr(p2),parse_p1(),parse_p2();for(;iscons(p1);)push(car(p1)),p1=cdr(p1);for(;iscons(p2);)push(car(p2)),p2=cdr(p2);if(__normalize_radical_factors(t),expanding)for(e=n=i=t,s=tos;i<=s?n<s:n>s;e=i<=s?++n:--n)if(isadd(stack[e]))return void multiply_all(tos-t);if(1!=(r=tos-t)){if(!isrational(stack[t])||!equaln(stack[t],1))return list(r),p7=pop(),push_symbol(MULTIPLY),push(p7),cons();2===r?(p7=pop(),pop(),push(p7)):(stack[t]=symbol(MULTIPLY),list(r))}}},parse_p1=function(){if(p3=car(p1),p5=evaluatingAsFloats?one_as_double:one,car(p3)===symbol(POWER))return p5=caddr(p3),p3=cadr(p3)},parse_p2=function(){if(p4=car(p2),p6=evaluatingAsFloats?one_as_double:one,car(p4)===symbol(POWER))return p6=caddr(p4),p4=cadr(p4)},combine_factors=function(t){return push(p4),push(p5),push(p6),add(),power(),p7=pop(),isNumericAtom(p7)?(push(stack[t]),push(p7),multiply_numbers(),stack[t]=pop()):car(p7)===symbol(MULTIPLY)&&isNumericAtom(cadr(p7))&&cdddr(p7)===symbol(NIL)?(push(stack[t]),push(cadr(p7)),multiply_numbers(),stack[t]=pop(),push(caddr(p7))):push(p7)},gp=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,-6,-7,-8,-3,-4,-5,13,14,15,-16,9,10,11,-12],[0,0,6,-1,-11,10,-2,-15,14,12,-5,4,-9,16,-8,7,-13],[0,0,7,11,-1,-9,15,-2,-13,5,12,-3,-10,8,16,-6,-14],[0,0,8,-10,9,-1,-14,13,-2,-4,3,12,-11,-7,6,16,-15],[0,0,3,2,15,-14,1,11,-10,16,-8,7,13,12,-5,4,9],[0,0,4,-15,2,13,-11,1,9,8,16,-6,14,5,12,-3,10],[0,0,5,14,-13,2,10,-9,1,-7,6,16,15,-4,3,12,11],[0,0,13,12,-5,4,16,-8,7,-1,-11,10,-3,-2,-15,14,-6],[0,0,14,5,12,-3,8,16,-6,11,-1,-9,-4,15,-2,-13,-7],[0,0,15,-4,3,12,-7,6,16,-10,9,-1,-5,-14,13,-2,-8],[0,0,16,-9,-10,-11,-13,-14,-15,-3,-4,-5,1,-6,-7,-8,2],[0,0,9,-16,8,-7,-12,5,-4,-2,-15,14,6,-1,-11,10,3],[0,0,10,-8,-16,6,-5,-12,3,15,-2,-13,7,11,-1,-9,4],[0,0,11,7,-6,-16,4,-3,-12,-14,13,-2,8,-10,9,-1,5],[0,0,12,13,14,15,9,10,11,-6,-7,-8,-2,-3,-4,-5,-1]],combine_gammas=function(t){var e;if((e=gp[Math.floor(p1.gamma)][Math.floor(p2.gamma)])<0&&(e=-e,push(stack[t]),negate(),stack[t]=pop()),e>1)return push(_gamma[e])},multiply_noexpand=function(){var t;return t=expanding,expanding=0,multiply(),expanding=t},multiply_all=function(t){var e,r,n,i;if(r=0,1!==t){if(0!==t){for(push(stack[e=tos-t]),r=n=1,i=t;1<=i?n<i:n>i;r=1<=i?++n:--n)push(stack[e+r]),multiply();return stack[e]=pop(),moveTos(e+1)}push(evaluatingAsFloats?one_as_double:one)}},multiply_all_noexpand=function(t){var e;return e=expanding,expanding=0,multiply_all(t),expanding=e},divide=function(){return isNumericAtom(stack[tos-2])&&isNumericAtom(stack[tos-1])?divide_numbers():(inverse(),multiply())},inverse=function(){return isNumericAtom(stack[tos-1])?invert_number():(push_integer(-1),power())},reciprocate=function(){return inverse()},negate=function(){return isNumericAtom(stack[tos-1])?negate_number():(evaluatingAsFloats?push_double(-1):push_integer(-1),multiply())},negate_expand=function(){var t;return t=expanding,expanding=1,negate(),expanding=t},negate_noexpand=function(){var t;return t=expanding,expanding=0,negate(),expanding=t},__normalize_radical_factors=function(t){var e,r,n,i,s,o,a,u,l,c;if(e=0,!(isplusone(stack[t])||isminusone(stack[t])||isdouble(stack[t]))){for(e=i=s=t+1,o=tos;(s<=o?i<o:i>o)&&!__is_radical_number(stack[e]);e=s<=o?++i:--i);if(e!==tos){for(save(),push(stack[t]),mp_numerator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors numerator: "+stack[tos-1]),p1=pop(),e=r=a=t+1,u=tos;(a<=u?r<u:r>u)&&!isplusone(p1)&&!isminusone(p1);e=a<=u?++r:--r)__is_radical_number(stack[e])&&(p3=cadr(stack[e]),p4=caddr(stack[e]),isnegativenumber(p4)&&(push(p1),push(p3),divide(),p5=pop(),isinteger(p5)&&(p1=p5,push_symbol(POWER),push(p3),push(evaluatingAsFloats?one_as_double:one),push(p4),add(),list(3),stack[e]=pop())));for(push(stack[t]),mp_denominator(),DEBUG_MULTIPLY&&console.log("__normalize_radical_factors denominator: "+stack[tos-1]),p2=pop(),e=n=l=t+1,c=tos;(l<=c?n<c:n>c)&&!isplusone(p2);e=l<=c?++n:--n)if(__is_radical_number(stack[e])&&(p3=cadr(stack[e]),p4=caddr(stack[e]),!isnegativenumber(p4)&&(push(p2),push(p3),divide(),p5=pop(),isinteger(p5)))){if(DEBUG_MULTIPLY&&console.log("__new radical p5: "+p5.toString()),DEBUG_MULTIPLY&&console.log("__new radical top stack: "+stack[tos-1]),p2=p5,push_symbol(POWER),push(p3),push(p4),DEBUG_MULTIPLY&&console.log("__new radical p3: "+p3.toString()),DEBUG_MULTIPLY&&console.log("__new radical p4: "+p4.toString()),push(one),subtract(),dontCreateNewRadicalsInDenominatorWhenEvalingMultiplication&&isinteger(p3)&&!isinteger(stack[tos-1])&&isnegativenumber(stack[tos-1])){pop(),pop(),pop(),push(p1),push(p3),divide(),p1=pop();break}DEBUG_MULTIPLY&&console.log("__new radical exponent: "+stack[tos-1]),list(3),stack[e]=pop()}return push(p1),push(p2),divide(),stack[t]=pop(),restore()}}},__is_radical_number=function(t){return car(t)===symbol(POWER)&&isNumericAtom(cadr(t))&&isfraction(caddr(t))&&!isminusone(cadr(t))},NROOTS_YMAX=101,NROOTS_DELTA=1e-6,NROOTS_EPSILON=1e-9,NROOTS_ABS=function(t){return Math.sqrt(t.r*t.r+t.i*t.i)},theRandom=0,NROOTS_RANDOM=function(){return 4*Math.random()-2},numericRootOfPolynomial=function(){class t{}return t.prototype.r=0,t.prototype.i=0,t}.call(this),nroots_a=new numericRootOfPolynomial,nroots_b=new numericRootOfPolynomial,nroots_x=new numericRootOfPolynomial,nroots_y=new numericRootOfPolynomial,nroots_fa=new numericRootOfPolynomial,nroots_fb=new numericRootOfPolynomial,nroots_dx=new numericRootOfPolynomial,nroots_df=new numericRootOfPolynomial,nroots_c=[],initNRoots=o=0,ref=NROOTS_YMAX;0<=ref?o<ref:o>ref;initNRoots=0<=ref?++o:--o)nroots_c[initNRoots]=new numericRootOfPolynomial;for(Eval_nroots=function(){var t,e,r,n,i,s,o,a,u;for(e=0,i=0,o=0,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("nroots: polynomial?"),t=tos,(o=coeff(p2,p1))>NROOTS_YMAX&&stop("nroots: degree?"),e=r=0,a=o;0<=a?r<a:r>a;e=0<=a?++r:--r)push(stack[t+e]),real(),yyfloat(),Eval(),p1=pop(),push(stack[t+e]),imag(),yyfloat(),Eval(),p2=pop(),isdouble(p1)&&isdouble(p2)||stop("nroots: coefficients?"),nroots_c[e].r=p1.d,nroots_c[e].i=p2.d;for(moveTos(t),monic(o),i=n=o;n>1;i=n+=-1)findroot(i),Math.abs(nroots_a.r)<NROOTS_DELTA&&(nroots_a.r=0),Math.abs(nroots_a.i)<NROOTS_DELTA&&(nroots_a.i=0),push_double(nroots_a.r),push_double(nroots_a.i),push(imaginaryunit),multiply(),add(),NROOTS_divpoly(i);if((o=tos-t)>1){for(sort_stack(o),(p1=alloc_tensor(o)).tensor.ndim=1,p1.tensor.dim[0]=o,e=s=0,u=o;0<=u?s<u:s>u;e=0<=u?++s:--s)p1.tensor.elem[e]=stack[t+e];return moveTos(t),push(p1)}},monic=function(t){var e,r,n,i;for(r=0,nroots_y.r=nroots_c[t-1].r,nroots_y.i=nroots_c[t-1].i,i=nroots_y.r*nroots_y.r+nroots_y.i*nroots_y.i,r=e=0,n=t-1;0<=n?e<n:e>n;r=0<=n?++e:--e)nroots_c[r].r=(nroots_c[r].r*nroots_y.r+nroots_c[r].i*nroots_y.i)/i,nroots_c[r].i=(nroots_c[r].i*nroots_y.r-nroots_c[r].r*nroots_y.i)/i;return nroots_c[t-1].r=1,nroots_c[t-1].i=0},findroot=function(t){var e,r,n,i;if(i=0,NROOTS_ABS(nroots_c[0])<NROOTS_DELTA)return nroots_a.r=0,void(nroots_a.i=0);for(e=0;e<100;++e)for(nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),compute_fa(t),nroots_b.r=nroots_a.r,nroots_b.i=nroots_a.i,nroots_fb.r=nroots_fa.r,nroots_fb.i=nroots_fa.i,nroots_a.r=NROOTS_RANDOM(),nroots_a.i=NROOTS_RANDOM(),r=0;r<1e3;++r){if(compute_fa(t),n=NROOTS_ABS(nroots_fa),DEBUG&&console.log("nrabs: "+n),n<NROOTS_EPSILON)return;if(NROOTS_ABS(nroots_fa)<NROOTS_ABS(nroots_fb)&&(nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_a.r=nroots_b.r,nroots_a.i=nroots_b.i,nroots_b.r=nroots_x.r,nroots_b.i=nroots_x.i,nroots_x.r=nroots_fa.r,nroots_x.i=nroots_fa.i,nroots_fa.r=nroots_fb.r,nroots_fa.i=nroots_fb.i,nroots_fb.r=nroots_x.r,nroots_fb.i=nroots_x.i),nroots_dx.r=nroots_b.r-nroots_a.r,nroots_dx.i=nroots_b.i-nroots_a.i,nroots_df.r=nroots_fb.r-nroots_fa.r,nroots_df.i=nroots_fb.i-nroots_fa.i,0==(i=nroots_df.r*nroots_df.r+nroots_df.i*nroots_df.i))break;nroots_y.r=(nroots_dx.r*nroots_df.r+nroots_dx.i*nroots_df.i)/i,nroots_y.i=(nroots_dx.i*nroots_df.r-nroots_dx.r*nroots_df.i)/i,nroots_a.r=nroots_b.r-(nroots_y.r*nroots_fb.r-nroots_y.i*nroots_fb.i),nroots_a.i=nroots_b.i-(nroots_y.r*nroots_fb.i+nroots_y.i*nroots_fb.r)}return stop("nroots: convergence error")},compute_fa=function(t){var e,r,n,i,s;for(r=0,s=0,nroots_x.r=nroots_a.r,nroots_x.i=nroots_a.i,nroots_fa.r=nroots_c[0].r+nroots_c[1].r*nroots_x.r-nroots_c[1].i*nroots_x.i,nroots_fa.i=nroots_c[0].i+nroots_c[1].r*nroots_x.i+nroots_c[1].i*nroots_x.r,i=[],r=e=2,n=t;2<=n?e<n:e>n;r=2<=n?++e:--e)s=nroots_a.r*nroots_x.r-nroots_a.i*nroots_x.i,nroots_x.i=nroots_a.r*nroots_x.i+nroots_a.i*nroots_x.r,nroots_x.r=s,nroots_fa.r+=nroots_c[r].r*nroots_x.r-nroots_c[r].i*nroots_x.i,i.push(nroots_fa.i+=nroots_c[r].r*nroots_x.i+nroots_c[r].i*nroots_x.r);return i},NROOTS_divpoly=function(t){var e,r,n,i,s,o;for(n=0,n=e=i=t-1;i<=0?e<0:e>0;n=i<=0?++e:--e)nroots_c[n-1].r+=nroots_c[n].r*nroots_a.r-nroots_c[n].i*nroots_a.i,nroots_c[n-1].i+=nroots_c[n].i*nroots_a.r+nroots_c[n].r*nroots_a.i;for(NROOTS_ABS(nroots_c[0])>NROOTS_DELTA&&stop("nroots: residual error"),o=[],n=r=0,s=t-1;0<=s?r<s:r>s;n=0<=s?++r:--r)nroots_c[n].r=nroots_c[n+1].r,o.push(nroots_c[n].i=nroots_c[n+1].i);return o},Eval_numerator=function(){return push(cadr(p1)),Eval(),numerator()},numerator=function(){var t,e;if(0,e=pop(),car(e)===symbol(ADD)&&(push(e),rationalize(),e=pop()),car(e)!==symbol(MULTIPLY)||isplusone(car(cdr(e))))return isrational(e)?(push(e),mp_numerator()):car(e)===symbol(POWER)&&isnegativeterm(caddr(e))?push(one):push(e);for(t=tos,e=cdr(e);iscons(e);)push(car(e)),numerator(),e=cdr(e);return multiply_all(tos-t)},Eval_outer=function(){var t;for(p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),t=[];iscons(p1);)push(car(p1)),Eval(),outer(),t.push(p1=cdr(p1));return t},outer=function(){return save(),p2=pop(),p1=pop(),istensor(p1)&&istensor(p2)?yyouter():(push(p1),push(p2),istensor(p1)?tensor_times_scalar():istensor(p2)?scalar_times_tensor():multiply()),restore()},yyouter=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h;for(t=0,r=0,i=0,(a=p1.tensor.ndim+p2.tensor.ndim)>MAXDIM&&stop("outer: rank of result exceeds maximum"),u=p1.tensor.nelem*p2.tensor.nelem,(p3=alloc_tensor(u)).tensor.ndim=a,t=e=0,l=p1.tensor.ndim;0<=l?e<l:e>l;t=0<=l?++e:--e)p3.tensor.dim[t]=p1.tensor.dim[t];for(r=t,t=n=0,c=p2.tensor.ndim;0<=c?n<c:n>c;t=0<=c?++n:--n)p3.tensor.dim[r+t]=p2.tensor.dim[t];for(i=0,t=s=0,p=p1.tensor.nelem;0<=p?s<p:s>p;t=0<=p?++s:--s)for(r=o=0,h=p2.tensor.nelem;0<=h?o<h:o>h;r=0<=h?++o:--o)push(p1.tensor.elem[t]),push(p2.tensor.elem[r]),multiply(),p3.tensor.elem[i++]=pop();return push(p3)},partition=function(){for(save(),p2=pop(),p1=pop(),push_integer(1),p3=pop(),p4=p3,p1=cdr(p1);iscons(p1);)Find(car(p1),p2)?(push(p4),push(car(p1)),multiply(),p4=pop()):(push(p3),push(car(p1)),multiply(),p3=pop()),p1=cdr(p1);return push(p3),push(p4),restore()},Eval_silentpattern=function(){return Eval_pattern(),pop(),push_symbol(NIL)},Eval_pattern=function(){var t,e,r,n,i;return iscons(cdr(p1))||stop("pattern needs at least a template and a transformed version"),t=car(cdr(p1)),(r=car(cdr(cdr(p1))))===symbol(NIL)&&stop("pattern needs at least a template and a transformed version"),i=iscons(cdr(cdr(p1)))?car(cdr(cdr(cdr(p1)))):symbol(NIL),equal(t,r)&&stop("recursive pattern"),n="template: "+print_list(t),n+=" tests: "+print_list(i),DEBUG&&console.log("pattern stringkey: "+n),-1===(e=userSimplificationsInStringForm.indexOf(n))?(userSimplificationsInStringForm.push(n),userSimplificationsInListForm.push(cdr(p1))):(DEBUG&&console.log("pattern already exists, replacing. "+cdr(p1)),userSimplificationsInStringForm[e]=n,userSimplificationsInListForm[e]=cdr(p1)),push_symbol(PATTERN),push(cdr(p1)),list(2)},do_clearPatterns=function(){return userSimplificationsInListForm=[],userSimplificationsInStringForm=[]},Eval_clearpatterns=function(){return do_clearPatterns(),push_symbol(NIL)},Eval_patternsinfo=function(){var t;return""!==(t=patternsinfo())?push(new_string(t)):push_symbol(NIL)},patternsinfo=function(){var t,e,r;for(r="",t=0,e=userSimplificationsInListForm.length;t<e;t++)userSimplificationsInListForm[t],r+=userSimplificationsInListForm+"\n";return r},Eval_polar=function(){return push(cadr(p1)),Eval(),polar()},polar=function(){return evaluatingPolar++,save(),p1=pop(),push(p1),abs(),push(imaginaryunit),push(p1),arg(),multiply(),exponential(),multiply(),evaluatingPolar--,restore()},n_factor_number=0,factor_number=function(){var t;return save(),p1=pop(),equaln(p1,0)||equaln(p1,1)||equaln(p1,-1)?(push(p1),void restore()):(n_factor_number=p1.q.a,t=tos,factor_a(),tos-t>1&&(list(tos-t),push_symbol(MULTIPLY),swap(),cons()),restore())},factor_a=function(){var t,e;for(e=0,n_factor_number.isNegative()&&(n_factor_number=setSignTo(n_factor_number,1),push_integer(-1)),e=t=0;t<1e4;e=++t)if(try_kth_prime(e),0===n_factor_number.compare(1))return;return factor_b()},try_kth_prime=function(t){var e,r,n,i;for(e=0,r=mint(primetab[t]),e=0;;){if(0===n_factor_number.compare(1))return void(e&&push_factor(r,e));if([n,i]=mdivrem(n_factor_number,r),!i.isZero())break;e++,n_factor_number=n}if(e&&push_factor(r,e),-1===mcmp(n,r))return push_factor(n_factor_number,1),n_factor_number=mint(1)},factor_b=function(){var t,e,r,n,i,s,o;for(r=0,n=0,t=mint(1),s=mint(5),o=mint(2),r=1,n=1;;){if(mprime(n_factor_number))return push_factor(n_factor_number,1),0;for(;;){if(esc_flag&&stop("esc"),i=msub(o,s),i=setSignTo(i,1),e=mgcd(i,n_factor_number),!MEQUAL(e,1)){if(push_factor(e,1),0===mcmp(e,n_factor_number))return-1;i=mdiv(n_factor_number,e),s=i=mmod(s,n_factor_number=i),o=i=mmod(o,n_factor_number);break}0==--r&&(o=s,r=n*=2),i=mmul(s,s),s=madd(i,t),s=i=mmod(s,n_factor_number)}}},push_factor=function(t,e){if((p1=new U).k=NUM,p1.q.a=t,p1.q.b=mint(1),push(p1),e>1)return push_symbol(POWER),swap(),(p1=new U).k=NUM,p1.q.a=mint(e),p1.q.b=mint(1),push(p1),list(3)},DEBUG_POWER=!1,Eval_power=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),power()},power=function(){return save(),yypower(),restore()},yypower=function(){var t,e,r,n,i,s,o;if(o=0,p2=pop(),p1=pop(),n=p2,r=p1,DEBUG_POWER&&console.log("POWER: "+p1+" ^ "+p2),equal(p1,one)||isZeroAtomOrTensor(p2))return evaluatingAsFloats?push_double(1):push(one),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(equal(p2,one))return push(p1),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&isminusone(p2))return evaluatingAsFloats?push_double(1):push(one),negate(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&isoneovertwo(p2))return push(imaginaryunit),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&isminusoneovertwo(p2))return push(imaginaryunit),negate(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isminusone(p1)&&!isdouble(p1)&&isrational(p2)&&!isinteger(p2)&&ispositivenumber(p2)&&!evaluatingAsFloats)return DEBUG_POWER&&console.log("   power: -1 ^ rational"),DEBUG_POWER&&console.log(" trick: p2.q.a , p2.q.b "+p2.q.a+" , "+p2.q.b),p2.q.a<p2.q.b?(push_symbol(POWER),push(p1),push(p2),list(3)):(push_symbol(MULTIPLY),push(p1),push_symbol(POWER),push(p1),push_rational(p2.q.a.mod(p2.q.b),p2.q.b),list(3),list(3),DEBUG_POWER&&console.log(" trick applied : "+stack[tos-1])),rect(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isrational(p1)&&isrational(p2))return DEBUG_POWER&&console.log("   power: isrational(p1) && isrational(p2)"),push(p1),push(p2),qpow(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isNumericAtom(p1)&&isNumericAtom(p2))return DEBUG_POWER&&console.log("   power: both base and exponent are either rational or double "),DEBUG_POWER&&console.log("POWER - isNumericAtom(p1) && isNumericAtom(p2)"),push(p1),push(p2),dpow(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(istensor(p1))return DEBUG_POWER&&console.log("   power: istensor(p1) "),power_tensor(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(car(p1)===symbol(ABS)&&iseveninteger(p2)&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))return DEBUG_POWER&&console.log("   power: even power of absolute of real value "),push(cadr(p1)),push(p2),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(p1===symbol(E)&&car(p2)===symbol(LOG))return push(cadr(p2)),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(p1===symbol(E)&&isdouble(p2))return DEBUG_POWER&&console.log("   power: p1 == symbol(E) && isdouble(p2) "),push_double(Math.exp(p2.d)),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(p1===symbol(E)&&0!==Find(p2,imaginaryunit)&&0!==Find(p2,symbol(PI))&&!evaluatingPolar&&(push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER&&console.log("   power: turning complex exponential to rect: "+stack[tos-1]),rect(),e=pop(),0===Find(e,symbol(PI))))return DEBUG_POWER&&console.log("   power: turned complex exponential to rect: "+e),void push(e);if(car(p1)===symbol(MULTIPLY)&&isinteger(p2)){for(DEBUG_POWER&&console.log("   power: (a * b) ^ c  ->  (a ^ c) * (b ^ c) "),p1=cdr(p1),push(car(p1)),push(p2),power(),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),power(),multiply(),p1=cdr(p1);DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1])}else{if(s=!1,isNumericAtom(cadr(p1))&&(s=sign(compare_numbers(cadr(p1),zero))),car(p1)===symbol(POWER)&&(isinteger(p2)||s))return push(cadr(p1)),push(caddr(p1)),push(p2),multiply(),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(t=!1,iseveninteger(caddr(p1))&&(push(caddr(p1)),push(p2),multiply(),i=pop(),isone(i)&&(t=!0)),car(p1)===symbol(POWER)&&t)return DEBUG_POWER&&console.log("   power: car(p1) == symbol(POWER) && b_isEven_and_c_isItsInverse "),push(cadr(p1)),abs(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(expanding&&isadd(p1)&&isNumericAtom(p2)&&(push(p2),(o=pop_integer())>1&&!isNaN(o)))return DEBUG_POWER&&console.log("   power: expanding && isadd(p1) && isNumericAtom(p2) "),power_sum(o),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(1===trigmode&&car(p1)===symbol(SIN)&&iseveninteger(p2))return DEBUG_POWER&&console.log("   power: trigmode == 1 && car(p1) == symbol(SIN) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),cosine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(2===trigmode&&car(p1)===symbol(COS)&&iseveninteger(p2))return DEBUG_POWER&&console.log("   power: trigmode == 2 && car(p1) == symbol(COS) && iseveninteger(p2) "),push_integer(1),push(cadr(p1)),sine(),push_integer(2),power(),subtract(),push(p2),push_rational(1,2),multiply(),power(),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(iscomplexnumber(p1)){if(DEBUG_POWER&&console.log(" power - handling the case (a + ib) ^ n"),isinteger(p2))return push(p1),conjugate(),p3=pop(),push(p3),push(p3),push(p1),multiply(),divide(),isone(p2)||(push(p2),negate(),power()),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]));if(isNumericAtom(p2))return push(p1),abs(),push(p2),power(),push_integer(-1),push(p1),arg(),push(p2),multiply(),evaluatingAsFloats||iscomplexnumberdouble(p1)&&isdouble(p2)?push_double(Math.PI):push(symbol(PI)),divide(),power(),multiply(),avoidCalculatingPowersIntoArctans&&Find(stack[tos-1],symbol(ARCTAN))&&(pop(),push_symbol(POWER),push(p1),push(p2),list(3)),void(DEBUG_POWER&&console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]))}if(!simplify_polar())return DEBUG_POWER&&console.log("   power: nothing can be done "),push_symbol(POWER),push(p1),push(p2),list(3),DEBUG_POWER?console.log("   power of "+r+" ^ "+n+": "+stack[tos-1]):void 0;DEBUG_POWER&&console.log("   power: using simplify_polar")}},power_sum=function(t){var e,r,n,i,s,o,a,u,l,c;for(e=[],r=0,i=0,o=length(p1)-1,push_frame(o*(t+1)),p1=cdr(p1),r=n=0,u=o;0<=u?n<u:n>u;r=0<=u?++n:--n){for(i=s=0,l=t;0<=l?s<=l:s>=l;i=0<=l?++s:--s)push(car(p1)),push_integer(i),power(),stack[frame+r*(t+1)+i]=pop();p1=cdr(p1)}for(push_integer(t),factorial(),p1=pop(),r=a=0,c=o;0<=c?a<c:a>c;r=0<=c?++a:--a)e[r]=0;return push(zero),multinomial_sum(o,t,e,0,t),pop_frame(o*(t+1))},multinomial_sum=function(t,e,r,n,i){var s,o,a,u,l,c,p;if(o=0,!(n<t-1)){for(r[n]=i,push(p1),o=a=0,c=t;0<=c?a<c:a>c;o=0<=c?++a:--a)push_integer(r[o]),factorial(),divide();for(o=u=0,p=t;0<=p?u<p:u>p;o=0<=p?++u:--u)push(stack[frame+o*(e+1)+r[o]]),multiply();return add()}for(o=s=0,l=i;0<=l?s<=l:s>=l;o=0<=l?++s:--s)r[n]=o,multinomial_sum(t,e,r,n+1,i-o)},simplify_polar=function(){var t;switch(t=0,t=isquarterturn(p2)){case 0:break;case 1:return push_integer(1),1;case 2:return push_integer(-1),1;case 3:return push(imaginaryunit),1;case 4:return push(imaginaryunit),negate(),1}if(car(p2)===symbol(ADD)){for(p3=cdr(p2);iscons(p3)&&!(t=isquarterturn(car(p3)));)p3=cdr(p3);switch(t){case 0:return 0;case 1:push_integer(1);break;case 2:push_integer(-1);break;case 3:push(imaginaryunit);break;case 4:push(imaginaryunit),negate()}return push(p2),push(car(p3)),subtract(),exponential(),multiply(),1}return 0},Eval_prime=function(){return push(cadr(p1)),Eval(),prime()},prime=function(){var t;return t=0,((t=pop_integer())<1||t>MAXPRIMETAB)&&stop("prime: Argument out of range."),t=primetab[t-1],push_integer(t)},power_str="^",codeGen=!1,Eval_print=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),printMode),push(symbol(NIL))},Eval_print2dascii=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_2DASCII),push(symbol(NIL))},Eval_printcomputer=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_COMPUTER),push(symbol(NIL))},Eval_printlatex=function(){return stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_LATEX),push(symbol(NIL))},Eval_printhuman=function(){var t;return t=test_flag,test_flag=0,stringsEmittedByUserPrintouts+=_print(cdr(p1),PRINTMODE_HUMAN),test_flag=t,push(symbol(NIL))},Eval_printlist=function(){var t;return t=_print(cdr(p1),PRINTMODE_LIST),stringsEmittedByUserPrintouts+=t,push(symbol(NIL))},_print=function(t,e){var r,n;for(r="";iscons(t);)push(car(t)),Eval(),p2=pop(),n=printMode,e===PRINTMODE_COMPUTER?(printMode=PRINTMODE_COMPUTER,r=printline(p2),rememberPrint(r,LAST_FULL_PRINT)):e===PRINTMODE_HUMAN?(printMode=PRINTMODE_HUMAN,r=printline(p2),rememberPrint(r,LAST_PLAIN_PRINT)):e===PRINTMODE_2DASCII?(printMode=PRINTMODE_2DASCII,r=print2dascii(p2),rememberPrint(r,LAST_2DASCII_PRINT)):e===PRINTMODE_LATEX?(printMode=PRINTMODE_LATEX,r=printline(p2),rememberPrint(r,LAST_LATEX_PRINT)):e===PRINTMODE_LIST&&(printMode=PRINTMODE_LIST,r=print_list(p2),rememberPrint(r,LAST_LIST_PRINT)),printMode=n,t=cdr(t);return DEBUG&&console.log("emttedString from display: "+stringsEmittedByUserPrintouts),r},rememberPrint=function(t,e){var r;return scan('"'+t+'"'),r=pop(),set_binding(symbol(e),r)},print_str=function(t){return DEBUG&&console.log("emttedString from print_str: "+stringsEmittedByUserPrintouts),t},print_char=function(t){return t},collectLatexStringFromReturnValue=function(t){var e,r,n;return e=printMode,printMode=PRINTMODE_LATEX,r=codeGen,codeGen=!1,n=(n=print_expr(t)).replace(/_/g,"\\_"),printMode=e,codeGen=r,DEBUG&&console.log("emttedString from collectLatexStringFromReturnValue: "+stringsEmittedByUserPrintouts),n},printline=function(t){return""+print_expr(t)},print_base_of_denom=function(t){var e;return e="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||lessp(t,zero)?(e+=print_char("("),e+=print_expr(t),e+=print_char(")")):e+=print_expr(t),e},print_expo_of_denom=function(t){var e;return e="",isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(e+=print_char("("),e+=print_expr(t),e+=print_char(")")):e+=print_expr(t),e},print_denom=function(t,e){var r;return r="",save(),p1=cadr(t),p2=caddr(t),isminusone(p2)?(r+=print_base_of_denom(p1),restore(),r):(1===e&&(r+=print_char("(")),push(p2),negate(),p2=pop(),r+=print_power(p1,p2),1===e&&(r+=print_char(")")),restore(),r)},print_a_over_b=function(t){var e,r,n;for(e="",flag=0,n=0,r=0,save(),n=0,r=0,p1=cdr(t),p2=car(p1),isrational(p2)?(push(p2),mp_numerator(),absval(),p3=pop(),push(p2),mp_denominator(),p4=pop(),isplusone(p3)||n++,isplusone(p4)||r++,p1=cdr(p1)):(p3=one,p4=one);iscons(p1);)p2=car(p1),is_denominator(p2)?r++:n++,p1=cdr(p1);if(printMode===PRINTMODE_LATEX&&(e+=print_str("\\frac{")),0===n)e+=print_char("1");else for(flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p3)||(e+=print_factor(p3),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)||(flag&&(e+=print_multiply_sign()),e+=print_factor(p2),flag=1),p1=cdr(p1);for(e+=print_str(printMode===PRINTMODE_LATEX?"}{":printMode!==PRINTMODE_HUMAN||test_flag?"/":" / "),r>1&&printMode!==PRINTMODE_LATEX&&(e+=print_char("(")),flag=0,p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1)),isplusone(p4)||(e+=print_factor(p4),flag=1);iscons(p1);)p2=car(p1),is_denominator(p2)&&(flag&&(e+=print_multiply_sign()),e+=print_denom(p2,r),flag=1),p1=cdr(p1);return r>1&&printMode!==PRINTMODE_LATEX&&(e+=print_char(")")),printMode===PRINTMODE_LATEX&&(e+=print_str("}")),restore(),e},print_expr=function(t){var e;if(e="",isadd(t))for(t=cdr(t),"-"===sign_of_term(car(t))&&(e+=print_str("-")),e+=print_term(car(t)),t=cdr(t);iscons(t);)"+"===sign_of_term(car(t))?e+=print_str(printMode!==PRINTMODE_HUMAN||test_flag?"+":" + "):e+=print_str(printMode!==PRINTMODE_HUMAN||test_flag?"-":" - "),e+=print_term(car(t)),t=cdr(t);else"-"===sign_of_term(t)&&(e+=print_str("-")),e+=print_term(t);return e},sign_of_term=function(t){var e;return e="",car(t)===symbol(MULTIPLY)&&isNumericAtom(cadr(t))&&lessp(cadr(t),zero)||isNumericAtom(t)&&lessp(t,zero)?e+="-":e+="+",e},print_term=function(t){var e,r,n,i,s;if(e="",car(t)===symbol(MULTIPLY)&&any_denominators(t))return e+print_a_over_b(t);if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),isminusone(car(t))&&(t=cdr(t)),s=!1,isNumericAtom(car(t))&&(s=!0),n=!1,printMode===PRINTMODE_LATEX&&iscons(cdr(t))&&isNumberOneOverSomething(car(t))&&(n=!0,r=car(t).q.b.toString()),n?(i=e,e=""):e+=print_factor(car(t)),t=cdr(t);iscons(t);)printMode===PRINTMODE_LATEX&&s&&caar(t)===symbol(POWER)&&isNumericAtom(car(cdr(car(t))))&&(isfraction(car(cdr(cdr(car(t)))))||(e+=" \\cdot ")),e+=print_multiply_sign(),e+=print_factor(car(t),!1,!0),s=!1,isNumericAtom(car(t))&&(s=!0),t=cdr(t);n&&(e=i+"\\frac{"+e+"}{"+r+"}")}else e+=print_factor(t);return e},print_subexpr=function(t){var e;return e="",e+=print_char("("),(e+=print_expr(t))+print_char(")")},print_factorial_function=function(t){var e;return e="",t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?e+=print_subexpr(t):e+=print_expr(t),e+print_char("!")},print_ABS_latex=function(t){var e;return e="",e+=print_str("\\left |"),(e+=print_expr(cadr(t)))+print_str(" \\right |")},print_BINOMIAL_latex=function(t){var e;return e="",e+=print_str("\\binom{"),e+=print_expr(cadr(t)),e+=print_str("}{"),(e+=print_expr(caddr(t)))+print_str("} ")},print_DOT_latex=function(t){var e;return e="",e+=print_expr(cadr(t)),(e+=print_str(" \\cdot "))+print_expr(caddr(t))},print_DOT_codegen=function(t){var e;return e="dot(",e+=print_expr(cadr(t)),e+=", ",(e+=print_expr(caddr(t)))+")"},print_SIN_codegen=function(t){var e;return e="Math.sin(",(e+=print_expr(cadr(t)))+")"},print_COS_codegen=function(t){var e;return e="Math.cos(",(e+=print_expr(cadr(t)))+")"},print_TAN_codegen=function(t){var e;return e="Math.tan(",(e+=print_expr(cadr(t)))+")"},print_ARCSIN_codegen=function(t){var e;return e="Math.asin(",(e+=print_expr(cadr(t)))+")"},print_ARCCOS_codegen=function(t){var e;return e="Math.acos(",(e+=print_expr(cadr(t)))+")"},print_ARCTAN_codegen=function(t){var e;return e="Math.atan(",(e+=print_expr(cadr(t)))+")"},print_SQRT_latex=function(t){var e;return e="",e+=print_str("\\sqrt{"),(e+=print_expr(cadr(t)))+print_str("} ")},print_TRANSPOSE_latex=function(t){var e;return e="",e+=print_str("{"),iscons(cadr(t))&&(e+=print_str("(")),e+=print_expr(cadr(t)),iscons(cadr(t))&&(e+=print_str(")")),(e+=print_str("}"))+print_str("^T")},print_TRANSPOSE_codegen=function(t){var e;return e="",e+=print_str("transpose("),(e+=print_expr(cadr(t)))+print_str(")")},print_UNIT_codegen=function(t){var e;return e="",e+=print_str("identity("),(e+=print_expr(cadr(t)))+print_str(")")},print_INV_latex=function(t){var e;return e="",e+=print_str("{"),iscons(cadr(t))&&(e+=print_str("(")),e+=print_expr(cadr(t)),iscons(cadr(t))&&(e+=print_str(")")),(e+=print_str("}"))+print_str("^{-1}")},print_INV_codegen=function(t){var e;return e="",e+=print_str("inv("),(e+=print_expr(cadr(t)))+print_str(")")},print_DEFINT_latex=function(t){var e,r,n,i,s,o,a,u,l;for(e="",r=car(cdr(t)),o=t=cdr(t),s=0;iscons(cdr(cdr(t)));)s++,u=cdr(cdr(t)),e+=print_str("\\int^{"),e+=print_expr(car(cdr(u))),e+=print_str("}_{"),e+=print_expr(car(u)),e+=print_str("} \\! "),t=cdr(u);for(e+=print_expr(r),e+=print_str(" \\,"),t=o,n=i=1,a=s;1<=a?i<=a:i>=a;n=1<=a?++i:--i)l=cdr(t),e+=print_str(" \\mathrm{d} "),e+=print_expr(car(l)),n<s&&(e+=print_str(" \\, ")),t=cdr(cdr(l));return e},print_tensor=function(t){return""+print_tensor_inner(t,0,0)[1]},print_tensor_inner=function(t,e,r){var n,i,s,o,a,u,l;if(n="",n+=print_str("["),e<t.tensor.ndim-1)for(i=s=0,a=t.tensor.dim[e];0<=a?s<a:s>a;i=0<=a?++s:--s)[r,l]=print_tensor_inner(t,e+1,r),n+=l,i!==t.tensor.dim[e]-1&&(n+=print_str(","));else for(i=o=0,u=t.tensor.dim[e];0<=u?o<u:o>u;i=0<=u?++o:--o)n+=print_expr(t.tensor.elem[r]),i!==t.tensor.dim[e]-1&&(n+=print_str(",")),r++;return[r,n+=print_str("]")]},print_tensor_latex=function(t){var e;return e="",t.tensor.ndim<=2&&(e+=print_tensor_inner_latex(!0,t,0,0)[1]),e},print_tensor_inner_latex=function(t,e,r,n){var i,s,o,a,u,l,c;if(i="",t&&(i+="\\begin{bmatrix} "),r<e.tensor.ndim-1)for(s=o=0,u=e.tensor.dim[r];0<=u?o<u:o>u;s=0<=u?++o:--o)[n,c]=print_tensor_inner_latex(0,e,r+1,n),i+=c,s!==e.tensor.dim[r]-1&&(i+=print_str(" \\\\ "));else for(s=a=0,l=e.tensor.dim[r];0<=l?a<l:a>l;s=0<=l?++a:--a)i+=print_expr(e.tensor.elem[n]),s!==e.tensor.dim[r]-1&&(i+=print_str(" & ")),n++;return t&&(i+=" \\end{bmatrix}"),[n,i]},print_SUM_latex=function(t){var e;return e="\\sum_{",e+=print_expr(caddr(t)),e+="=",e+=print_expr(cadddr(t)),e+="}^{",e+=print_expr(caddddr(t)),e+="}{",(e+=print_expr(cadr(t)))+"}"},print_SUM_codegen=function(t){var e,r,n,i;return e=cadr(t),i=caddr(t),r=cadddr(t),n=caddddr(t),"(function(){ var "+i+";  var holderSum = 0;  var lowerlimit = "+print_expr(r)+";  var upperlimit = "+print_expr(n)+";  for ("+i+" = lowerlimit; "+i+" < upperlimit; "+i+"++) {    holderSum += "+print_expr(e)+"; }  return holderSum;})()"},print_TEST_latex=function(t){var e;for(e="\\left\\{ \\begin{array}{ll}",t=cdr(t);iscons(t);){if(cdr(t)===symbol(NIL)){e+="{",e+=print_expr(car(t)),e+="} & otherwise ",e+=" \\\\\\\\";break}e+="{",e+=print_expr(cadr(t)),e+="} & if & ",e+=print_expr(car(t)),e+=" \\\\\\\\",t=cddr(t)}return(e=e.substring(0,e.length-4))+"\\end{array} \\right."},print_TEST_codegen=function(t){var e,r;for(e="(function(){",t=cdr(t),r=0;iscons(t);){if(cdr(t)===symbol(NIL)){e+="else {",e+="return ("+print_expr(car(t))+");",e+="}";break}r&&(e+=" else "),e+="if ("+print_expr(car(t))+"){",e+="return ("+print_expr(cadr(t))+");",e+="}",r++,t=cddr(t)}return e+"})()"},print_TESTLT_latex=function(t){var e;return e="{",e+=print_expr(cadr(t)),e+="}",e+=" < ",e+="{",(e+=print_expr(caddr(t)))+"}"},print_TESTLE_latex=function(t){var e;return e="{",e+=print_expr(cadr(t)),e+="}",e+=" \\leq ",e+="{",(e+=print_expr(caddr(t)))+"}"},print_TESTGT_latex=function(t){var e;return e="{",e+=print_expr(cadr(t)),e+="}",e+=" > ",e+="{",(e+=print_expr(caddr(t)))+"}"},print_TESTGE_latex=function(t){var e;return e="{",e+=print_expr(cadr(t)),e+="}",e+=" \\geq ",e+="{",(e+=print_expr(caddr(t)))+"}"},print_TESTEQ_latex=function(t){var e;return e="{",e+=print_expr(cadr(t)),e+="}",e+=" = ",e+="{",(e+=print_expr(caddr(t)))+"}"},print_FOR_codegen=function(t){var e,r,n,i;return e=cadr(t),i=caddr(t),r=cadddr(t),n=caddddr(t),"(function(){ var "+i+";  var lowerlimit = "+print_expr(r)+";  var upperlimit = "+print_expr(n)+";  for ("+i+" = lowerlimit; "+i+" < upperlimit; "+i+"++) {    "+print_expr(e)+" } })()"},print_DO_codegen=function(t){var e;for(e="",t=cdr(t);iscons(t);)e+=print_expr(car(t)),t=cdr(t);return e},print_SETQ_codegen=function(t){var e;return e="",e+=print_expr(cadr(t)),e+=" = ",(e+=print_expr(caddr(t)))+"; "},print_PRODUCT_latex=function(t){var e;return e="\\prod_{",e+=print_expr(caddr(t)),e+="=",e+=print_expr(cadddr(t)),e+="}^{",e+=print_expr(caddddr(t)),e+="}{",(e+=print_expr(cadr(t)))+"}"},print_PRODUCT_codegen=function(t){var e,r,n,i;return e=cadr(t),i=caddr(t),r=cadddr(t),n=caddddr(t),"(function(){ var "+i+";  var holderProduct = 1;  var lowerlimit = "+print_expr(r)+";  var upperlimit = "+print_expr(n)+";  for ("+i+" = lowerlimit; "+i+" < upperlimit; "+i+"++) {    holderProduct *= "+print_expr(e)+"; }  return holderProduct;})()"},print_base=function(t){var e;return e="",isadd(cadr(t))||caadr(t)===symbol(MULTIPLY)||caadr(t)===symbol(POWER)||isnegativenumber(cadr(t))?(e+=print_str("("),e+=print_expr(cadr(t)),e+=print_str(")")):isNumericAtom(cadr(t))&&(lessp(cadr(t),zero)||isfraction(cadr(t)))?(e+=print_str("("),e+=print_factor(cadr(t)),e+=print_str(")")):e+=print_factor(cadr(t)),e},print_exponent=function(t){var e;return e="",iscons(caddr(t))||isfraction(caddr(t))||isNumericAtom(caddr(t))&&lessp(caddr(t),zero)?(e+=print_str("("),e+=print_expr(caddr(t)),e+=print_str(")")):e+=print_factor(caddr(t)),e},print_power=function(t,e){var r,n,i,s;if(r="",DEBUG&&console.log("power base: "+t+"  exponent: "+e),isoneovertwo(e))if(equaln(t,2)){if(codeGen)return r+print_str("Math.SQRT2")}else{if(printMode===PRINTMODE_LATEX)return r+=print_str("\\sqrt{"),(r+=print_expr(t))+print_str("}");if(codeGen)return r+=print_str("Math.sqrt("),(r+=print_expr(t))+print_str(")")}if(equaln(get_binding(symbol(PRINT_LEAVE_E_ALONE)),1)&&t===symbol(E))return codeGen?(r+=print_str("Math.exp("),r+=print_expo_of_denom(e),r+=print_str(")")):(printMode===PRINTMODE_LATEX?(r+=print_str("e^{"),r+=print_expr(e),r+=print_str("}")):(r+=print_str("exp("),r+=print_expr(e),r+=print_str(")")),r);if(codeGen)return r+=print_str("Math.pow("),r+=print_base_of_denom(t),r+=print_str(", "),(r+=print_expo_of_denom(e))+print_str(")");if(equaln(get_binding(symbol(PRINT_LEAVE_X_ALONE)),0)||"x"!==t.printname){if(t!==symbol(E)){if(isminusone(e))return r+=print_str(printMode===PRINTMODE_LATEX?"\\frac{1}{":printMode!==PRINTMODE_HUMAN||test_flag?"1/":"1 / "),iscons(t)&&printMode!==PRINTMODE_LATEX?(r+=print_str("("),r+=print_expr(t),r+=print_str(")")):r+=print_expr(t),printMode===PRINTMODE_LATEX&&(r+=print_str("}")),r;if(isnegativeterm(e))return r+=print_str(printMode===PRINTMODE_LATEX?"\\frac{1}{":printMode!==PRINTMODE_HUMAN||test_flag?"1/":"1 / "),push(e),push_integer(-1),multiply(),i=pop(),iscons(t)&&printMode!==PRINTMODE_LATEX?(r+=print_str("("),r+=print_power(t,i),r+=print_str(")")):r+=print_power(t,i),printMode===PRINTMODE_LATEX&&(r+=print_str("}")),r}if(isfraction(e)&&printMode===PRINTMODE_LATEX)return r+=print_str("\\sqrt"),push(e),denominator(),n=pop(),isplustwo(n)||(r+=print_str("["),r+=print_expr(n),r+=print_str("]")),r+=print_str("{"),push(e),numerator(),s=pop(),(r+=print_power(t,e=s))+print_str("}")}return printMode===PRINTMODE_LATEX&&isplusone(e)?r+=print_expr(t):(isadd(t)||isnegativenumber(t)?(r+=print_str("("),r+=print_expr(t),r+=print_str(")")):car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)?(printMode!==PRINTMODE_LATEX&&(r+=print_str("(")),r+=print_factor(t,!0),printMode!==PRINTMODE_LATEX&&(r+=print_str(")"))):isNumericAtom(t)&&(lessp(t,zero)||isfraction(t))?(r+=print_str("("),r+=print_factor(t),r+=print_str(")")):r+=print_factor(t),r+=print_str(printMode!==PRINTMODE_HUMAN||test_flag?"^":power_str),printMode===PRINTMODE_LATEX?print_expr(e).length>1?(r+=print_str("{"),r+=print_expr(e),r+=print_str("}")):r+=print_expr(e):iscons(e)||isfraction(e)||isNumericAtom(e)&&lessp(e,zero)?(r+=print_str("("),r+=print_expr(e),r+=print_str(")")):r+=print_factor(e)),r},print_index_function=function(t){var e;if(e="",t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?e+=print_subexpr(car(t)):e+=print_expr(car(t)),e+=print_str("["),t=cdr(t),iscons(t))for(e+=print_expr(car(t)),t=cdr(t);iscons(t);)e+=print_str(","),e+=print_expr(car(t)),t=cdr(t);return e+print_str("]")},print_factor=function(t,e,r){var n,i,s,o,a;if(n="",isNumericAtom(t))return r&&lessp(t,zero)&&(n+="("),n+=print_number(t,r),r&&lessp(t,zero)&&(n+=")"),n;if(isstr(t))return n+=print_str('"'),(n+=print_str(t.str))+print_str('"');if(istensor(t))return n+(printMode===PRINTMODE_LATEX?print_tensor_latex(t):print_tensor(t));if(car(t)===symbol(MULTIPLY))return e||"-"!==sign_of_term(t)&&printMode===PRINTMODE_LATEX||(n+=print_str(printMode===PRINTMODE_LATEX?" \\left (":"(")),n+=print_expr(t),e||"-"!==sign_of_term(t)&&printMode===PRINTMODE_LATEX||(n+=print_str(printMode===PRINTMODE_LATEX?" \\right ) ":")")),n;if(isadd(t))return e||(n+=print_str("(")),n+=print_expr(t),e||(n+=print_str(")")),n;if(car(t)===symbol(POWER))return i=cadr(t),s=caddr(t),n+print_power(i,s);if(car(t)===symbol(FUNCTION))return o=cadr(t),codeGen||(a=caddr(t),n+=print_str("function "),DEBUG&&console.log("emittedString from print_factor "+stringsEmittedByUserPrintouts),n+=print_list(a),n+=print_str(" -> ")),n+print_expr(o);if(car(t)===symbol(PATTERN))return n+=print_expr(caadr(t)),(n+=print_str(printMode===PRINTMODE_LATEX?" \\rightarrow ":printMode!==PRINTMODE_HUMAN||test_flag?"->":" -> "))+print_expr(car(cdr(cadr(t))));if(car(t)===symbol(INDEX)&&issymbol(cadr(t)))return n+print_index_function(t);if(car(t)===symbol(FACTORIAL))return n+print_factorial_function(t);if(car(t)===symbol(ABS)&&printMode===PRINTMODE_LATEX)return n+print_ABS_latex(t);if(car(t)===symbol(SQRT)&&printMode===PRINTMODE_LATEX)return n+print_SQRT_latex(t);if(car(t)===symbol(TRANSPOSE)){if(printMode===PRINTMODE_LATEX)return n+print_TRANSPOSE_latex(t);if(codeGen)return n+print_TRANSPOSE_codegen(t)}else if(car(t)===symbol(UNIT)){if(codeGen)return n+print_UNIT_codegen(t)}else if(car(t)===symbol(INV)){if(printMode===PRINTMODE_LATEX)return n+print_INV_latex(t);if(codeGen)return n+print_INV_codegen(t)}else{if(car(t)===symbol(BINOMIAL)&&printMode===PRINTMODE_LATEX)return n+print_BINOMIAL_latex(t);if(car(t)===symbol(DEFINT)&&printMode===PRINTMODE_LATEX)return n+print_DEFINT_latex(t);if(isinnerordot(t)){if(printMode===PRINTMODE_LATEX)return n+print_DOT_latex(t);if(codeGen)return n+print_DOT_codegen(t)}else if(car(t)===symbol(SIN)){if(codeGen)return n+print_SIN_codegen(t)}else if(car(t)===symbol(COS)){if(codeGen)return n+print_COS_codegen(t)}else if(car(t)===symbol(TAN)){if(codeGen)return n+print_TAN_codegen(t)}else if(car(t)===symbol(ARCSIN)){if(codeGen)return n+print_ARCSIN_codegen(t)}else if(car(t)===symbol(ARCCOS)){if(codeGen)return n+print_ARCCOS_codegen(t)}else if(car(t)===symbol(ARCTAN)){if(codeGen)return n+print_ARCTAN_codegen(t)}else if(car(t)===symbol(SUM)){if(printMode===PRINTMODE_LATEX)return n+print_SUM_latex(t);if(codeGen)return n+print_SUM_codegen(t)}else if(car(t)===symbol(PRODUCT)){if(printMode===PRINTMODE_LATEX)return n+print_PRODUCT_latex(t);if(codeGen)return n+print_PRODUCT_codegen(t)}else if(car(t)===symbol(FOR)){if(codeGen)return n+print_FOR_codegen(t)}else if(car(t)===symbol(DO)){if(codeGen)return n+print_DO_codegen(t)}else if(car(t)===symbol(TEST)){if(codeGen)return n+print_TEST_codegen(t);if(printMode===PRINTMODE_LATEX)return n+print_TEST_latex(t)}else if(car(t)===symbol(TESTLT)){if(codeGen)return n+"(("+print_expr(cadr(t))+") < ("+print_expr(caddr(t))+"))";if(printMode===PRINTMODE_LATEX)return n+print_TESTLT_latex(t)}else if(car(t)===symbol(TESTLE)){if(codeGen)return n+"(("+print_expr(cadr(t))+") <= ("+print_expr(caddr(t))+"))";if(printMode===PRINTMODE_LATEX)return n+print_TESTLE_latex(t)}else if(car(t)===symbol(TESTGT)){if(codeGen)return n+"(("+print_expr(cadr(t))+") > ("+print_expr(caddr(t))+"))";if(printMode===PRINTMODE_LATEX)return n+print_TESTGT_latex(t)}else if(car(t)===symbol(TESTGE)){if(codeGen)return n+"(("+print_expr(cadr(t))+") >= ("+print_expr(caddr(t))+"))";if(printMode===PRINTMODE_LATEX)return n+print_TESTGE_latex(t)}else if(car(t)===symbol(TESTEQ)){if(codeGen)return n+"(("+print_expr(cadr(t))+") === ("+print_expr(caddr(t))+"))";if(printMode===PRINTMODE_LATEX)return n+print_TESTEQ_latex(t)}else if(car(t)===symbol(FLOOR)){if(codeGen)return n+"Math.floor("+print_expr(cadr(t))+")";if(printMode===PRINTMODE_LATEX)return n+" \\lfloor {"+print_expr(cadr(t))+"} \\rfloor "}else if(car(t)===symbol(CEILING)){if(codeGen)return n+"Math.ceiling("+print_expr(cadr(t))+")";if(printMode===PRINTMODE_LATEX)return n+" \\lceil {"+print_expr(cadr(t))+"} \\rceil "}else if(car(t)===symbol(ROUND)){if(codeGen)return n+"Math.round("+print_expr(cadr(t))+")"}else if(car(t)===symbol(SETQ))return codeGen?n+=print_SETQ_codegen(t):(n+=print_expr(cadr(t)),n+=print_str("="),n+=print_expr(caddr(t)))}if(iscons(t)){if(n+=print_factor(car(t)),t=cdr(t),e||(n+=print_str("(")),iscons(t))for(n+=print_expr(car(t)),t=cdr(t);iscons(t);)n+=print_str(","),n+=print_expr(car(t)),t=cdr(t);return e||(n+=print_str(")")),n}return t===symbol(DERIVATIVE)?n+=print_char("d"):t===symbol(E)?n+=print_str(codeGen?"Math.E":"e"):t===symbol(PI)?n+=print_str(printMode===PRINTMODE_LATEX?"\\pi":"pi"):n+=print_str(get_printname(t)),n},print_list=function(t){var e;switch(e="",t.k){case CONS:for(e+="(",e+=print_list(car(t)),t===cdr(t)&&t!==symbol(NIL)&&console.log("oh no recursive!"),t=cdr(t);iscons(t);)e+=" ",e+=print_list(car(t)),(t=cdr(t))===cdr(t)&&t!==symbol(NIL)&&console.log("oh no recursive!");t!==symbol(NIL)&&(e+=" . ",e+=print_list(t)),e+=")";break;case STR:e+=t.str;break;case NUM:case DOUBLE:e+=print_number(t,!0);break;case SYM:e+=get_printname(t);break;default:e+="<tensor>"}return e},print_multiply_sign=function(){var t;if(t="",printMode===PRINTMODE_LATEX){if(printMode!==PRINTMODE_HUMAN||test_flag)return t;t+=print_str(" ")}return t+print_str(printMode!==PRINTMODE_HUMAN||test_flag||codeGen?"*":" ")},is_denominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&isnegativeterm(caddr(t))?1:0},any_denominators=function(t){var e;for(t=cdr(t);iscons(t);){if(e=car(t),is_denominator(e))return 1;t=cdr(t)}return 0},YMAX=1e4,glyph=function(){class t{}return t.prototype.c=0,t.prototype.x=0,t.prototype.y=0,t}.call(this),chartab=[],charTabIndex=i1=0,ref1=YMAX;0<=ref1?i1<ref1:i1>ref1;charTabIndex=0<=ref1?++i1:--i1)chartab[charTabIndex]=new glyph;for(yindex=0,level=0,emit_x=0,expr_level=0,display_flag=0,printchar_nowrap=function(t){return""+t},printchar=function(t){return printchar_nowrap(t)},print2dascii=function(t){var e,r,n,i;return r=0,n=0,i=0,save(),yindex=0,level=0,emit_x=0,emit_top_expr(t),[r,n,i]=get_size(0,yindex),n>100?(printline(t),void restore()):(e=print_glyphs(),restore(),e)},emit_top_expr=function(t){return car(t)===symbol(SETQ)?(emit_expr(cadr(t)),__emit_str(" = "),void emit_expr(caddr(t))):istensor(t)?emit_tensor(t):emit_expr(t)},will_be_displayed_as_fraction=function(t){if(level>0)return 0;if(isfraction(t))return 1;if(car(t)!==symbol(MULTIPLY))return 0;if(isfraction(cadr(t)))return 1;for(;iscons(t);){if(isdenominator(car(t)))return 1;t=cdr(t)}return 0},emit_expr=function(t){if(expr_level++,car(t)===symbol(ADD))for(t=cdr(t),__is_negative(car(t))&&(__emit_char("-"),will_be_displayed_as_fraction(car(t))&&__emit_char(" ")),emit_term(car(t)),t=cdr(t);iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),t=cdr(t);else __is_negative(t)&&(__emit_char("-"),will_be_displayed_as_fraction(t)&&__emit_char(" ")),emit_term(t);return expr_level--},emit_unsigned_expr=function(t){var e;if(car(t)===symbol(ADD)){for(t=cdr(t),emit_term(car(t)),t=cdr(t),e=[];iscons(t);)__is_negative(car(t))?(__emit_char(" "),__emit_char("-"),__emit_char(" ")):(__emit_char(" "),__emit_char("+"),__emit_char(" ")),emit_term(car(t)),e.push(t=cdr(t));return e}return emit_term(t)},__is_negative=function(t){return isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?1:0},emit_term=function(t){var e;return car(t)===symbol(MULTIPLY)?(e=count_denominators(t))&&0===level?emit_fraction(t,e):emit_multiply(t,e):emit_factor(t)},isdenominator=function(t){return car(t)===symbol(POWER)&&cadr(t)!==symbol(E)&&__is_negative(caddr(t))?1:0},count_denominators=function(t){var e,r;for(e=0,t=cdr(t);iscons(t);)r=car(t),isdenominator(r)&&e++,t=cdr(t);return e},emit_multiply=function(t,e){var r;if(0===e){for(t=cdr(t),(isplusone(car(t))||isminusone(car(t)))&&(t=cdr(t)),emit_factor(car(t)),t=cdr(t),r=[];iscons(t);)__emit_char(" "),emit_factor(car(t)),r.push(t=cdr(t));return r}return emit_numerators(t),__emit_char("/"),e>1||isfraction(cadr(t))?(__emit_char("("),emit_denominators(t),__emit_char(")")):emit_denominators(t)},emit_fraction=function(t,e){var r,n,i,s,o;for(r=0,s=0,save(),p3=one,p4=one,isrational(cadr(t))&&(push(cadr(t)),mp_numerator(),absval(),p3=pop(),push(cadr(t)),mp_denominator(),p4=pop()),isdouble(cadr(t))&&(push(cadr(t)),absval(),p3=pop()),s=isplusone(p3)?0:1,p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||s++,p1=cdr(p1);for(o=emit_x,n=yindex,r=0,isplusone(p3)||(emit_number(p3,0),r++),p1=cdr(t),isNumericAtom(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)||(r>0&&__emit_char(" "),1===s?emit_expr(p2):emit_factor(p2),r++),p1=cdr(p1);for(0===r&&__emit_char("1"),i=yindex,r=0,isplusone(p4)||(emit_number(p4,0),r++,e++),p1=cdr(t),isrational(car(p1))&&(p1=cdr(p1));iscons(p1);)p2=car(p1),isdenominator(p2)&&(r>0&&__emit_char(" "),emit_denominator(p2,e),r++),p1=cdr(p1);return fixup_fraction(o,n,i),restore()},emit_numerators=function(t){var e;for(save(),e=0,p1=one,t=cdr(t),isrational(car(t))?(push(car(t)),mp_numerator(),absval(),p1=pop(),t=cdr(t)):isdouble(car(t))&&(push(car(t)),absval(),p1=pop(),t=cdr(t)),e=0,isplusone(p1)||(emit_number(p1,0),e++);iscons(t);)isdenominator(car(t))||(e>0&&__emit_char(" "),emit_factor(car(t)),e++),t=cdr(t);return 0===e&&__emit_char("1"),restore()},emit_denominators=function(t){var e;for(save(),e=0,t=cdr(t),isfraction(car(t))&&(push(car(t)),mp_denominator(),p1=pop(),emit_number(p1,0),e++,t=cdr(t));iscons(t);)isdenominator(car(t))&&(e>0&&__emit_char(" "),emit_denominator(car(t),0),e++),t=cdr(t);return restore()},emit_factor=function(t){istensor(t)?emit_flat_tensor(t):isdouble(t)?emit_number(t,0):car(t)!==symbol(ADD)&&car(t)!==symbol(MULTIPLY)?car(t)!==symbol(POWER)?iscons(t)?emit_function(t):isNumericAtom(t)?0===level?emit_numerical_fraction(t):emit_number(t,0):issymbol(t)?emit_symbol(t):isstr(t)&&emit_string(t):emit_power(t):emit_subexpr(t)},emit_numerical_fraction=function(t){var e,r,n;return save(),push(t),mp_numerator(),absval(),p3=pop(),push(t),mp_denominator(),p4=pop(),isplusone(p4)?(emit_number(p3,0),void restore()):(n=emit_x,e=yindex,emit_number(p3,0),r=yindex,emit_number(p4,0),fixup_fraction(n,e,r),restore())},isfactor=function(t){return iscons(t)&&car(t)!==symbol(ADD)&&car(t)!==symbol(MULTIPLY)&&car(t)!==symbol(POWER)||issymbol(t)?1:isfraction(t)||isnegativenumber(t)?0:isNumericAtom(t)?1:0},emit_power=function(t){var e,r,n;return e=0,r=0,n=0,cadr(t)===symbol(E)?(__emit_str("exp("),emit_expr(caddr(t)),void __emit_char(")")):level>0?void(isminusone(caddr(t))?(__emit_char("1"),__emit_char("/"),isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t))):(isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),__emit_char("^"),isfactor(caddr(t))?emit_factor(caddr(t)):emit_subexpr(caddr(t)))):__is_negative(caddr(t))?(n=emit_x,e=yindex,__emit_char("1"),r=yindex,emit_denominator(t,1),void fixup_fraction(n,e,r)):(e=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),r=yindex,level++,emit_expr(caddr(t)),level--,fixup_power(e,r))},emit_denominator=function(t,e){var r,n;if(!isminusone(caddr(t)))return r=yindex,isfactor(cadr(t))?emit_factor(cadr(t)):emit_subexpr(cadr(t)),n=yindex,level++,emit_unsigned_expr(caddr(t)),level--,fixup_power(r,n);1===e?emit_expr(cadr(t)):emit_factor(cadr(t))},emit_function=function(t){if(car(t)===symbol(INDEX)&&issymbol(cadr(t)))emit_index_function(t);else{if(car(t)!==symbol(FACTORIAL)){if(car(t)===symbol(DERIVATIVE)?__emit_char("d"):emit_symbol(car(t)),__emit_char("("),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char(")")}emit_factorial_function(t)}},emit_index_function=function(t){if(t=cdr(t),caar(t)===symbol(ADD)||caar(t)===symbol(MULTIPLY)||caar(t)===symbol(POWER)||caar(t)===symbol(FACTORIAL)?emit_subexpr(car(t)):emit_expr(car(t)),__emit_char("["),t=cdr(t),iscons(t))for(emit_expr(car(t)),t=cdr(t);iscons(t);)__emit_char(","),emit_expr(car(t)),t=cdr(t);return __emit_char("]")},emit_factorial_function=function(t){return t=cadr(t),isfraction(t)||car(t)===symbol(ADD)||car(t)===symbol(MULTIPLY)||car(t)===symbol(POWER)||car(t)===symbol(FACTORIAL)?emit_subexpr(t):emit_expr(t),__emit_char("!")},emit_subexpr=function(t){return __emit_char("("),emit_expr(t),__emit_char(")")},emit_symbol=function(t){var e,r,n,i,s;if(e=0,t!==symbol(E)){for(s=[],e=r=0,i=(n=get_printname(t)).length;0<=i?r<i:r>i;e=0<=i?++r:--r)s.push(__emit_char(n[e]));return s}__emit_str("exp(1)")},emit_string=function(t){var e,r,n,i;for(e=0,n=t.str,__emit_char('"'),e=r=0,i=n.length;0<=i?r<i:r>i;e=0<=i?++r:--r)__emit_char(n[e]);return __emit_char('"')},fixup_fraction=function(t,e,r){var n,i,s,o,a,u,l,c,p,h,f;for(n=0,l=0,i=0,c=0,h=0,s=0,p=0,f=0,[i,c,h]=get_size(e,r),[s,p,f]=get_size(r,yindex),n=p>c?(p-c)/2:0,n++,move(e,r,n,-(h+i-1)-1),n=p>c?-c:(c-p)/2-c,n++,move(r,yindex,n,1-f),l=p>c?p:c,emit_x=t,u=[],o=0,a=l+=2;0<=a?o<a:o>a;0<=a?++o:--o)u.push(__emit_char("-"));return u},fixup_power=function(t,e){var r,n,i,s,o,a,u;return r=0,n=0,s=0,a=0,i=0,o=0,u=0,[n,s,a]=get_size(t,e),[i,o,u]=get_size(e,yindex),r=-u-i+1,move(e,yindex,0,r+=a-1)},move=function(t,e,r,n){var i,s,o,a,u;for(i=0,u=[],i=s=o=t,a=e;o<=a?s<a:s>a;i=o<=a?++s:--s)chartab[i].x+=r,u.push(chartab[i].y+=n);return u},get_size=function(t,e){var r,n,i,s,o,a,u,l;for(r=0,o=chartab[t].x,i=chartab[t].x,a=chartab[t].y,s=chartab[t].y,r=n=u=t+1,l=e;u<=l?n<l:n>l;r=u<=l?++n:--n)chartab[r].x<o&&(o=chartab[r].x),chartab[r].x>i&&(i=chartab[r].x),chartab[r].y<a&&(a=chartab[r].y),chartab[r].y>s&&(s=chartab[r].y);return[s-a+1,i-o+1,a]},displaychar=function(t){return __emit_char(t)},__emit_char=function(t){if(yindex!==YMAX)return chartab[yindex],chartab[yindex].c=t,chartab[yindex].x=emit_x,chartab[yindex].y=0,yindex++,emit_x++},__emit_str=function(t){var e,r,n,i;for(e=0,i=[],e=r=0,n=t.length;0<=n?r<n:r>n;e=0<=n?++r:--r)i.push(__emit_char(t[e]));return i},emit_number=function(t,e){var r,n,i,s,o,a,u,l,c,p;switch(p="",r=0,t.k){case NUM:for("-"===(p=t.q.a.toString())[0]&&0===e&&(p=p.substring(1)),r=n=0,o=p.length;0<=o?n<o:n>o;r=0<=o?++n:--n)__emit_char(p[r]);if("1"===(p=t.q.b.toString()))break;for(__emit_char("/"),l=[],r=i=0,a=p.length;0<=a?i<a:i>a;r=0<=a?++i:--i)l.push(__emit_char(p[r]));return l;case DOUBLE:for("-"===(p=doubleToReasonableString(t.d))[0]&&0===e&&(p=p.substring(1)),c=[],r=s=0,u=p.length;0<=u?s<u:s>u;r=0<=u?++s:--s)c.push(__emit_char(p[r]));return c}},cmpGlyphs=function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0},print_glyphs=function(){var t,e,r,n,i,s,o;for(e=0,t="",(i=chartab.slice(0,yindex)).sort(cmpGlyphs),s=0,o=(chartab=[].concat(i).concat(chartab.slice(yindex)))[0].y,e=r=0,n=yindex;0<=n?r<n:r>n;e=0<=n?++r:--r){for(;chartab[e].y>o;)t+=printchar("\n"),s=0,o++;for(;chartab[e].x>s;)t+=printchar_nowrap(" "),s++;t+=printchar_nowrap(chartab[e].c),s++}return t},buffer="",getdisplaystr=function(){return yindex=0,level=0,emit_x=0,emit_expr(pop()),fill_buf(),buffer},fill_buf=function(){var t,e,r,n,i,s,o,a;for(s=buffer,n=0,t=0,(i=chartab.slice(0,yindex)).sort(cmpGlyphs),o=0,a=(chartab=[].concat(i).concat(chartab.slice(yindex)))[0].y,t=e=0,r=yindex;0<=r?e<r:e>r;t=0<=r?++e:--e){for(;chartab[t].y>a;)s[n++]="\n",o=0,a++;for(;chartab[t].x>o;)s[n++]=" ",o++;s[n++]=chartab[t].c,o++}return s[n++]="\n"},N=100,oneElement=function(){class t{}return t.prototype.x=0,t.prototype.y=0,t.prototype.h=0,t.prototype.w=0,t.prototype.index=0,t.prototype.count=0,t}.call(this),elem=[],elelmIndex=j1=0;j1<1e4;elelmIndex=++j1)elem[elelmIndex]=new oneElement;SPACE_BETWEEN_COLUMNS=3,SPACE_BETWEEN_ROWS=1,emit_tensor=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_;if(o=0,p=0,r=0,n=0,i=0,s=0,v=0,e=0,t.tensor.ndim>2)emit_flat_tensor(t);else{if(!((l=(h=t.tensor.dim[0])*(p=2===t.tensor.ndim?t.tensor.dim[1]:1))>N)){for(x=emit_x,o=a=0,d=l;0<=d?a<d:a>d;o=0<=d?++a:--a)elem[o].index=yindex,elem[o].x=emit_x,emit_expr(t.tensor.elem[o]),elem[o].count=yindex-elem[o].index,[elem[o].h,elem[o].w,elem[o].y]=get_size(elem[o].index,yindex);for(i=0,s=0,o=u=0,m=l;0<=m?u<m:u>m;o=0<=m?++u:--u)elem[o].h>i&&(i=elem[o].h),elem[o].w>s&&(s=elem[o].w);for(b=p*s+(p-1)*SPACE_BETWEEN_COLUMNS,_=-(h*i+(h-1)*SPACE_BETWEEN_ROWS)/2,v=c=0,g=h;0<=g?c<g:c>g;v=0<=g?++c:--c)for(e=f=0,y=p;0<=y?f<y:f>y;e=0<=y?++f:--f)r=x-elem[o=v*p+e].x,n=_-elem[o].y,move(elem[o].index,elem[o].index+elem[o].count,r,n),r=0,e>0&&(r=e*(s+SPACE_BETWEEN_COLUMNS)),n=0,v>0&&(n=v*(i+SPACE_BETWEEN_ROWS)),r+=(s-elem[o].w)/2,n+=(i-elem[o].h)/2,move(elem[o].index,elem[o].index+elem[o].count,r,n);return emit_x=x+b}emit_flat_tensor(t)}},emit_flat_tensor=function(t){return emit_tensor_inner(t,0,0)},emit_tensor_inner=function(t,e,r){var n,i,s;for(n=0,__emit_char("("),n=i=0,s=t.tensor.dim[e];0<=s?i<s:i>s;n=0<=s?++i:--i)e+1===t.tensor.ndim?(emit_expr(t.tensor.elem[r]),r+=1):r=emit_tensor_inner(t,e+1,r),n+1<t.tensor.dim[e]&&__emit_char(",");return __emit_char(")"),r},Eval_product=function(){var t,e,r,n,i,s,o,a,u;if(e=0,t=cadr(p1),r=caddr(p1),issymbol(r)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n))push(p1);else{if(push(caddddr(p1)),Eval(),i=pop_integer(),!isNaN(i)){for(o=get_binding(r),push_integer(1),e=s=a=n,u=i;a<=u?s<=u:s>=u;e=a<=u?++s:--s)push_integer(e),p5=pop(),set_binding(r,p5),push(t),Eval(),DEBUG&&(console.log("product - factor 1: "+stack[tos-1].toString()),console.log("product - factor 2: "+stack[tos-2].toString())),multiply(),DEBUG&&console.log("product - result: "+stack[tos-1].toString());return set_binding(r,o)}push(p1)}},qadd=function(){var t,e,r,n,i,s,o,a;if(s=pop(),i=pop(),e=mmul(i.q.a,s.q.b),r=mmul(i.q.b,s.q.a),o=madd(e,r),!MZERO(o))return n=mmul(i.q.b,s.q.b),t=mgcd(o,n),t=makeSignSameAs(t,n),(a=new U).k=NUM,a.q.a=mdiv(o,t),a.q.b=mdiv(n,t),push(a);push(zero)},qdiv=function(){var t,e,r;return save(),p2=pop(),p1=pop(),MZERO(p2.q.a)&&stop("divide by zero"),MZERO(p1.q.a)?(push(zero),void restore()):(t=mmul(p1.q.a,p2.q.b),e=mmul(p1.q.b,p2.q.a),r=mgcd(t,e),r=makeSignSameAs(r,e),(p1=new U).k=NUM,p1.q.a=mdiv(t,r),p1.q.b=mdiv(e,r),push(p1),restore())},qmul=function(){var t,e,r;return save(),p2=pop(),p1=pop(),MZERO(p1.q.a)||MZERO(p2.q.a)?(push(zero),void restore()):(t=mmul(p1.q.a,p2.q.a),e=mmul(p1.q.b,p2.q.b),r=mgcd(t,e),r=makeSignSameAs(r,e),(p1=new U).k=NUM,p1.q.a=mdiv(t,r),p1.q.b=mdiv(e,r),push(p1),restore())},qpow=function(){return save(),qpowf(),restore()},qpowf=function(){var t,e,r,n,i,s;if(r=0,p2=pop(),p1=pop(),isplusone(p1)||isZeroAtomOrTensor(p2))push_integer(1);else if(isminusone(p1)&&isoneovertwo(p2))push(imaginaryunit);else{if(isZeroAtomOrTensor(p1))return isnegativenumber(p2)&&stop("divide by zero"),void push(zero);if(!isplusone(p2))return isinteger(p2)?(push(p2),r=pop_integer(),isNaN(r)?(push_symbol(POWER),push(p1),push(p2),void list(3)):(i=mpow(p1.q.a,Math.abs(r)),s=mpow(p1.q.b,Math.abs(r)),r<0&&(n=i,i=makeSignSameAs(i=s,s=n),s=makePositive(s)),(p3=new U).k=NUM,p3.q.a=i,p3.q.b=s,void push(p3))):isminusone(p1)?(push(p2),void normalize_angle()):isnegativenumber(p1)?(push(p1),negate(),push(p2),qpow(),push_integer(-1),push(p2),qpow(),void multiply()):isinteger(p1)?is_small_integer(p1)?(push(p1),push(p2),void quickfactor()):isSmall(p2.q.a)&&isSmall(p2.q.b)?(t=p2.q.a,e=p2.q.b,0===(i=mroot(p1.q.a,e))?(push_symbol(POWER),push(p1),push(p2),void list(3)):(s=mpow(i,t),(p3=new U).k=NUM,p2.q.a.isNegative()?(p3.q.a=bigInt(1),p3.q.b=s):(p3.q.a=s,p3.q.b=bigInt(1)),push(p3))):(push_symbol(POWER),push(p1),push(p2),void list(3)):(push(p1),mp_numerator(),push(p2),qpow(),push(p1),mp_denominator(),push(p2),negate(),qpow(),void multiply());push(p1)}},normalize_angle=function(){return save(),p1=pop(),isinteger(p1)?(p1.q.a.isOdd()?push_integer(-1):push_integer(1),void restore()):(push(p1),bignum_truncate(),p2=pop(),isnegativenumber(p1)&&(push(p2),push_integer(-1),add(),p2=pop()),push(p1),push(p2),subtract(),p3=pop(),push_symbol(POWER),push_integer(-1),push(p3),list(3),p2.q.a.isOdd()&&negate(),restore())},is_small_integer=function(t){return isSmall(t.q.a)},quickfactor=function(){var t,e,r,n,i,s;for(e=0,save(),p2=pop(),p1=pop(),t=tos,push(p1),factor_small_number(),s=t,e=r=0,i=n=tos-t;r<i;e=r+=2)push(stack[s+e]),push(stack[s+e+1]),push(p2),multiply(),quickpower();return multiply_all(tos-t-n),p1=pop(),moveTos(t),push(p1),restore()},quickpower=function(){var t;return save(),p2=pop(),p1=pop(),push(p2),bignum_truncate(),p3=pop(),push(p2),push(p3),subtract(),p4=pop(),isZeroAtomOrTensor(p4)||(push_symbol(POWER),push(p1),push(p4),list(3)),push(p3),t=pop_integer(),isNaN(t)?(push_symbol(POWER),push(p1),push(p3),list(3),void restore()):0!==t?(push(p1),bignum_power_number(t),restore()):void restore()},Eval_quotient=function(){return push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),push(cadddr(p1)),Eval(),(p1=pop())===symbol(NIL)&&(p1=symbol(SYMBOL_X)),push(p1),divpoly()},divpoly=function(){var t,e,r,n,i,s,o,a,u;for(n=0,s=0,u=0,save(),p3=pop(),p2=pop(),p1=pop(),r=tos,t=tos,s=coeff(p3,p1)-1,e=tos,u=s-(o=coeff(p3,p2)-1),push_integer(0),p5=pop();u>=0;){for(push(stack[t+s]),push(stack[e+o]),divide(),p4=pop(),n=i=0,a=o;0<=a?i<=a:i>=a;n=0<=a?++i:--i)push(stack[t+u+n]),push(stack[e+n]),push(p4),multiply(),subtract(),stack[t+u+n]=pop();push(p5),push(p4),push(p3),push_integer(u),power(),multiply(),add(),p5=pop(),s--,u--}return moveTos(r),push(p5),restore()},DEBUG_RATIONALIZE=!1,Eval_rationalize=function(){return push(cadr(p1)),Eval(),rationalize()},rationalize=function(){var t;return t=expanding,yyrationalize(),expanding=t},yyrationalize=function(){var t,e,r;if(r=pop(),istensor(r))__rationalize_tensor(r);else{if(expanding=0,car(r)===symbol(ADD)){for(DEBUG_RATIONALIZE&&console.log("rationalize: this is the input expr: "+r),push(one),multiply_denominators(r),t=pop(),DEBUG_RATIONALIZE&&console.log("rationalize: this is the new denominator: "+t),push(zero),e=cdr(r);iscons(e);)DEBUG_RATIONALIZE&&console.log("term: "+car(e)),push(t),push(car(e)),multiply(),add(),e=cdr(e);return DEBUG_RATIONALIZE&&console.log("rationalize: original terms times new denominator: "+stack[tos-1]),Condense(),DEBUG_RATIONALIZE&&console.log("rationalize: after factoring: "+stack[tos-1]),push(t),divide(),DEBUG_RATIONALIZE?console.log("rationalize: after dividing by new denom. (and we're done): "+stack[tos-1]):void 0}push(r)}},multiply_denominators=function(t){var e;if(car(t)===symbol(ADD)){for(t=cdr(t),e=[];iscons(t);)multiply_denominators_term(car(t)),e.push(t=cdr(t));return e}return multiply_denominators_term(t)},multiply_denominators_term=function(t){var e;if(car(t)===symbol(MULTIPLY)){for(t=cdr(t),e=[];iscons(t);)multiply_denominators_factor(car(t)),e.push(t=cdr(t));return e}return multiply_denominators_factor(t)},multiply_denominators_factor=function(t){if(car(t)===symbol(POWER))return push(t),t=caddr(t),isnegativenumber(t)||car(t)===symbol(MULTIPLY)&&isnegativenumber(cadr(t))?(inverse(),void __lcm()):pop()},__rationalize_tensor=function(t){var e,r,n;if(e=0,push(t),Eval(),t=pop(),istensor(t)){for(e=r=0,n=t.tensor.nelem;0<=n?r<n:r>n;e=0<=n?++r:--r)push(t.tensor.elem[e]),rationalize(),t.tensor.elem[e]=pop();return check_tensor_dimensions(t),push(t)}push(t)},__lcm=function(){return save(),p1=pop(),p2=pop(),push(p1),push(p2),multiply(),push(p1),push(p2),gcd(),divide(),restore()},Eval_real=function(){return push(cadr(p1)),Eval(),real()},real=function(){return save(),rect(),p1=pop(),push(p1),push(p1),conjugate(),add(),push_integer(2),divide(),restore()},DEBUG_RECT=!1,Eval_rect=function(){return push(cadr(p1)),Eval(),rect()},rect=function(){var t;if(save(),t=p1=pop(),DEBUG_RECT&&console.log("RECT of "+t),DEBUG_RECT&&console.log("any clock forms in : "+t+" ? "+findPossibleClockForm(t)),issymbol(p1))DEBUG_RECT&&console.log(" rect: simple symbol: "+t),isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))?(push_symbol(YYRECT),push(p1),list(2)):push(p1);else if(isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES)))||findPossibleExponentialForm(p1)||findPossibleClockForm(p1)||Find(p1,symbol(SIN))&&Find(p1,symbol(COS))&&Find(p1,imaginaryunit))if(car(p1)===symbol(MULTIPLY)&&isimaginaryunit(cadr(p1))&&!isZeroAtomOrTensor(get_binding(symbol(ASSUME_REAL_VARIABLES))))push(p1);else if(car(p1)===symbol(ADD))for(DEBUG_RECT&&console.log(" rect - "+t+" is a sum "),push_integer(0),p1=cdr(p1);iscons(p1);)push(car(p1)),rect(),add(),p1=cdr(p1);else DEBUG_RECT&&console.log(" rect - "+t+" is NOT a sum "),push(p1),abs(),DEBUG_RECT&&console.log(" rect - "+t+" abs: "+stack[tos-1].toString()),push(p1),arg(),DEBUG_RECT&&console.log(" rect - "+t+" arg of "+p1+" : "+stack[tos-1].toString()),p1=pop(),push(p1),cosine(),DEBUG_RECT&&console.log(" rect - "+t+" cosine: "+stack[tos-1].toString()),push(imaginaryunit),push(p1),sine(),DEBUG_RECT&&console.log(" rect - "+t+" sine: "+stack[tos-1].toString()),multiply(),DEBUG_RECT&&console.log(" rect - "+t+" i * sine: "+stack[tos-1].toString()),add(),DEBUG_RECT&&console.log(" rect - "+t+" cos + i * sine: "+stack[tos-1].toString()),multiply();else DEBUG_RECT&&console.log(" rect: simple symbol: "+t),push(p1);if(restore(),DEBUG_RECT)return console.log("rect of "+t+" : "+stack[tos-1])},show_power_debug=!1,performing_roots=!1,Eval_roots=function(){return p2=cadr(p1),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):(push(p2),Eval(),p2=pop(),car(p2)===symbol(SETQ)||car(p2)===symbol(TESTEQ)?(push(cadr(p2)),Eval(),push(caddr(p2)),Eval(),subtract()):push(p2)),push(caddr(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),p2=pop(),p1=pop(),ispolyexpandedform(p1,p2)||stop("roots: 1st argument is not a polynomial in the variable "+p2),push(p1),push(p2),roots()},hasImaginaryCoeff=function(t){var e,r,n;for(r=!1,e=n=t;n>0;e=n+=-1)if(iscomplexnumber(stack[tos-e])){r=!0;break}return r},isSimpleRoot=function(t){var e,r,n;if(t>2){for(r=!0,isZeroAtomOrTensor(stack[tos-t])&&(r=!1),e=n=t-1;n>1;e=n+=-1)if(!isZeroAtomOrTensor(stack[tos-e])){r=!1;break}}else r=!1;return r},normalisedCoeff=function(t,e){var r,n,i,s,o,a,u,l;for(i=coeff(t,e),r=stack[tos-1],a=[],n=s=1,u=i;1<=u?s<=u:s>=u;n=1<=u?++s:--s)a.push(pop());for(n=o=l=i-1;l<=0?o<=0:o>=0;n=l<=0?++o:--o)push(a[n]),push(r),divide();return i},roots=function(){var t,e,r,n,i,s,o,a;if(e=0,DEBUG&&console.log("roots: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),save(),recursionLevelNestedRadicalsRemoval>1)return pop(),pop(),push(symbol(NIL)),void restore();if(performing_roots=!0,t=tos-2,DEBUG&&console.log("roots checking if "+stack[tos-1].toString()+" is a case of simple roots"),p2=pop(),p1=pop(),push(p1),push(p2),r=normalisedCoeff(p2,p1),isSimpleRoot(r)?(DEBUG&&console.log("yes, "+stack[tos-1].toString()+" is a case of simple roots"),i=stack[tos-r],s=stack[tos-1],moveTos(tos-r),pop(),pop(),getSimpleRoots(r,s,i)):(moveTos(tos-r),roots2()),0==(o=tos-t)&&stop("roots: the polynomial is not factorable, try nroots"),1===o)return performing_roots=!1,void restore();for(sort_stack(o),(p1=alloc_tensor(o)).tensor.ndim=1,p1.tensor.dim[0]=o,e=n=0,a=o;0<=a?n<a:n>a;e=0<=a?++n:--n)p1.tensor.elem[e]=stack[t+e];return moveTos(t),push(p1),restore(),performing_roots=!1},getSimpleRoots=function(t,e,r){var n,i,s,o,a,u,l;if(DEBUG&&console.log("getSimpleRoots"),save(),t-=1,push(r),push_rational(1,t),power(),push(e),push_rational(1,t),power(),divide(),i=pop(),t%2==0)for(l=s=1,a=t;s<=a;l=s+=2)push(i),push_integer(-1),push_rational(l,t),power(),multiply(),n=pop(),push(n),push(n),negate();else for(l=o=1,u=t;1<=u?o<=u:o>=u;l=1<=u?++o:--o)push(i),push_integer(-1),push_rational(l,t),power(),multiply(),l%2==0&&negate();return restore()},roots2=function(){var t;if(save(),DEBUG&&console.log("roots2: "+stack[tos-1].toString()+" "+stack[tos-2].toString()),p2=pop(),p1=pop(),push(p1),push(p2),t=normalisedCoeff(p2,p1),hasImaginaryCoeff(t)?(moveTos(tos-t),pop(),pop()):(moveTos(tos-t),factorpoly(),p1=pop()),car(p1)===symbol(MULTIPLY))for(p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),roots3(),p1=cdr(p1);else push(p1),push(p2),roots3();return restore()},roots3=function(){var t;return save(),p2=pop(),p1=pop(),car(p1)===symbol(POWER)&&ispolyexpandedform(cadr(p1),p2)&&isposint(caddr(p1))?(t=normalisedCoeff(p2,cadr(p1)),mini_solve(t)):ispolyexpandedform(p1,p2)&&(t=normalisedCoeff(p2,p1),mini_solve(t)),restore()},mini_solve=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A,N,M,k,C,T,O,I,P,R,L,D,q,B,U,$,z,F,G,V,j,H,W,Y,X,Z,K,J,Q,tt,et,rt,nt,it,st,ot,at,ut,lt,ct,pt,ht;if(save(),2===t)return p3=pop(),p4=pop(),push(p4),push(p3),divide(),negate(),void restore();if(3===t)return p3=pop(),p4=pop(),p5=pop(),push(p4),push_integer(2),power(),push_integer(4),push(p3),multiply(),push(p5),multiply(),subtract(),push_rational(1,2),power(),p6=pop(),push(p6),push(p4),subtract(),push(p3),push_integer(2),multiply(),divide(),push(p6),push(p4),add(),negate(),push(p3),divide(),push_rational(1,2),multiply(),void restore();if(4===t||5===t){if(p3=pop(),p4=pop(),p5=pop(),p6=pop(),push(p5),push(p5),multiply(),k=pop(),push(k),push(p5),multiply(),C=pop(),push(p4),push(p4),multiply(),S=pop(),push(S),push(p4),multiply(),N=pop(),push(N),push(p6),multiply(),M=pop(),push(M),push_integer(-4),multiply(),q=pop(),push(N),push_integer(2),multiply(),i=pop(),push(p3),push(p3),multiply(),y=pop(),push(y),push(p3),multiply(),x=pop(),push_integer(3),push(p3),multiply(),s=pop(),push(y),push(p6),multiply(),v=pop(),push(v),push(p6),multiply(),b=pop(),push(v),push_integer(27),multiply(),n=pop(),push(b),push_integer(-27),multiply(),L=pop(),push(s),push_integer(2),multiply(),pop(),push(p3),push(p5),multiply(),E=pop(),push(E),push(p4),multiply(),_=pop(),push(_),push(p6),multiply(),w=pop(),push(E),push_integer(3),multiply(),a=pop(),push_integer(-4),push(p3),push(C),multiply(),multiply(),D=pop(),push(_),push_integer(9),multiply(),negate(),B=pop(),push(w),push_integer(18),multiply(),r=pop(),push(S),push(a),subtract(),f=pop(),push(S),push(k),multiply(),A=pop(),push(p4),negate(),push(s),divide(),U=pop(),4===t){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using cubic formula <<<<<<<<<<<<<<< "),DEBUG&&console.log("cubic: D0: "+f.toString()),push(f),push_integer(3),power(),push_integer(4),multiply(),u=pop(),push(f),simplify(),absValFloat(),d=pop(),DEBUG&&console.log("cubic: D0 as float: "+d.toString()),push(r),push(q),push(A),push(D),push(L),add(),add(),add(),add(),simplify(),absValFloat(),O=pop(),DEBUG&&console.log("cubic: DETERMINANT: "+O.toString()),push(i),push(B),push(n),add(),add(),m=pop(),DEBUG&&console.log("cubic: D1: "+m.toString()),push(m),push_integer(2),power(),push(u),subtract(),push_rational(1,2),power(),simplify(),g=pop(),isZeroAtomOrTensor(O))return isZeroAtomOrTensor(d)?(DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is zero"),push(U),void restore()):(DEBUG&&console.log(" cubic: DETERMINANT IS ZERO and delta0 is not zero"),push(p3),push(p6),push_integer(9),multiply(),multiply(),push(p4),push(p5),multiply(),subtract(),push(f),push_integer(2),multiply(),divide(),ct=pop(),push(ct),push(ct),push(_),push_integer(4),multiply(),push(p3),push(p3),push(p6),push_integer(9),multiply(),multiply(),multiply(),negate(),push(N),negate(),add(),add(),push(p3),push(f),multiply(),divide(),void restore());for(e=!1,Z=!1;!e;)push(g),Z&&negate(),push(m),add(),push_rational(1,2),multiply(),push_rational(1,3),power(),simplify(),c=pop(),DEBUG&&console.log("cubic: C: "+c.toString()),push(c),simplify(),absValFloat(),h=pop(),DEBUG&&console.log("cubic: C as absval and float: "+h.toString()),isZeroAtomOrTensor(h)?(DEBUG&&console.log(" cubic: C IS ZERO flipping the sign"),Z=!0):e=!0;return push(c),push(s),multiply(),o=pop(),push(o),push_integer(2),multiply(),l=pop(),push(imaginaryunit),push_integer(3),push_rational(1,2),power(),multiply(),K=pop(),push_integer(1),push(K),add(),st=pop(),push_integer(1),push(K),subtract(),it=pop(),push(c),push(s),divide(),p=pop(),push(U),push(p),negate(),push(f),push(o),divide(),negate(),add(),add(),simplify(),push(U),push(p),push(st),multiply(),push_integer(2),divide(),push(it),push(f),multiply(),push(l),divide(),add(),add(),simplify(),push(U),push(p),push(it),multiply(),push_integer(2),divide(),push(st),push(f),multiply(),push(l),divide(),add(),add(),simplify(),void restore()}if(5===t){if(DEBUG&&console.log(">>>>>>>>>>>>>>>> actually using quartic formula <<<<<<<<<<<<<<< "),p7=pop(),isZeroAtomOrTensor(p4)&&isZeroAtomOrTensor(p6)&&!isZeroAtomOrTensor(p5)&&!isZeroAtomOrTensor(p7)){for(DEBUG&&console.log("biquadratic case"),push(p3),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(p5),push(symbol(SECRETX)),multiply(),push(p7),add(),add(),push(symbol(SECRETX)),roots(),J=0,Q=(ot=pop().tensor.elem).length;J<Q;J++)X=ot[J],push(X),push_rational(1,2),power(),simplify(),push(X),push_rational(1,2),power(),negate(),simplify();return void restore()}if(push(p6),push(p6),multiply(),T=pop(),push(p7),push(p7),multiply(),I=pop(),push(I),push(p7),multiply(),P=pop(),push_integer(256),push(x),push(P),multiply(),multiply(),push_integer(-192),push(v),push(I),push(p4),multiply(),multiply(),multiply(),push_integer(-128),push(y),push(k),push(I),multiply(),multiply(),multiply(),push_integer(144),push(b),push(p5),push(p7),multiply(),multiply(),multiply(),push(L),push(T),multiply(),push_integer(144),push(_),push(p4),push(I),multiply(),multiply(),multiply(),push_integer(-6),push(p3),push(S),push(T),push(p7),multiply(),multiply(),multiply(),multiply(),push_integer(-80),push(w),push(p5),push(p7),multiply(),multiply(),multiply(),push_integer(18),push(w),push(T),multiply(),multiply(),push_integer(16),push(E),push(C),push(p7),multiply(),multiply(),multiply(),push_integer(-4),push(E),push(k),push(T),multiply(),multiply(),multiply(),push_integer(-27),push(N),push(p4),push(I),multiply(),multiply(),multiply(),push_integer(18),push(M),push(p5),push(p7),multiply(),multiply(),multiply(),push(q),push(T),multiply(),push_integer(-4),push(A),push(p5),push(p7),multiply(),multiply(),multiply(),push(A),push(T),multiply(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),add(),O=pop(),DEBUG&&console.log("R_determinant: "+O.toString()),push(k),push_integer(-3),push(p4),push(p6),multiply(),multiply(),push_integer(12),push(p3),push(p7),multiply(),multiply(),add(),add(),f=pop(),DEBUG&&console.log("R_DELTA0: "+f.toString()),push_integer(2),push(C),multiply(),push_integer(-9),push(p4),push(p5),push(p6),multiply(),multiply(),multiply(),push_integer(27),push(S),push(p7),multiply(),multiply(),push_integer(27),push(p3),push(T),multiply(),multiply(),push_integer(-72),push(E),push(p7),multiply(),multiply(),add(),add(),add(),add(),m=pop(),DEBUG&&console.log("R_DELTA1: "+m.toString()),push_integer(8),push(E),multiply(),push_integer(-3),push(S),multiply(),add(),push_integer(8),push(y),multiply(),divide(),$=pop(),DEBUG&&console.log("p: "+$.toString()),push(N),push_integer(-4),push(_),multiply(),push_integer(8),push(v),multiply(),add(),add(),push_integer(8),push(x),multiply(),divide(),z=pop(),DEBUG&&console.log("q: "+z.toString()),DEBUG&&console.log("tos 1 "+tos),isZeroAtomOrTensor(p4)){for($=p5,z=p6,F=p7,push_rational(5,2),push($),multiply(),j=pop(),push_integer(2),push($),push_integer(2),power(),multiply(),push(F),subtract(),H=pop(),push($),push_integer(3),power(),push_integer(2),divide(),push_rational(-1,2),push($),push(F),multiply(),multiply(),push_rational(-1,8),push(z),push_integer(2),power(),multiply(),add(),add(),W=pop(),push(symbol(SECRETX)),push_integer(3),power(),push(j),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push(H),push(symbol(SECRETX)),multiply(),push(W),add(),add(),add(),DEBUG&&console.log("resolventCubic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),lt=pop(),DEBUG&&console.log("resolventCubicSolutions: "+lt),R=null,nt=0,et=(ut=lt.tensor.elem).length;nt<et;nt++)if(X=ut[nt],DEBUG&&console.log("examining solution: "+X),push(X),push_integer(2),multiply(),push($),add(),absValFloat(),ht=pop(),DEBUG&&console.log("abs value is: "+X),!isZeroAtomOrTensor(ht)){R=X;break}return DEBUG&&console.log("chosen solution: "+R),push(R),push_integer(2),multiply(),push($),add(),push_rational(1,2),power(),simplify(),pt=pop(),push(z),push_integer(2),multiply(),push(pt),divide(),simplify(),V=pop(),push($),push_integer(3),multiply(),push(R),push_integer(2),multiply(),add(),G=pop(),push(pt),push(G),push(V),add(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(pt),push(G),push(V),add(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),push(pt),negate(),push(G),push(V),subtract(),negate(),push_rational(1,2),power(),simplify(),add(),push_integer(2),divide(),push(pt),negate(),push(G),push(V),subtract(),negate(),push_rational(1,2),power(),simplify(),subtract(),push_integer(2),divide(),void restore()}for(DEBUG&&console.log("tos 2 "+tos),push_integer(8),push(p5),push(p3),multiply(),multiply(),push_integer(-3),push(p4),push_integer(2),power(),multiply(),add(),push_integer(8),push(p3),push_integer(2),power(),multiply(),divide(),$=pop(),DEBUG&&console.log("p for depressed quartic: "+$.toString()),push(p4),push_integer(3),power(),push_integer(-4),push(p3),push(p4),push(p5),multiply(),multiply(),multiply(),push_integer(8),push(p6),push(p3),push_integer(2),power(),multiply(),multiply(),add(),add(),push_integer(8),push(p3),push_integer(3),power(),multiply(),divide(),z=pop(),DEBUG&&console.log("q for depressed quartic: "+z.toString()),push(p4),push_integer(4),power(),push_integer(-3),multiply(),push_integer(256),push(x),push(p7),multiply(),multiply(),push_integer(-64),push(v),push(p4),multiply(),multiply(),push_integer(16),push(S),push(p3),push(p5),multiply(),multiply(),multiply(),add(),add(),add(),push_integer(256),push(p3),push_integer(4),power(),multiply(),divide(),F=pop(),DEBUG&&console.log("r for depressed quartic: "+F.toString()),DEBUG&&console.log("tos 4 "+tos),push(symbol(SECRETX)),push_integer(4),power(),DEBUG&&console.log("4 * x^4: "+stack[tos-1].toString()),push($),push(symbol(SECRETX)),push_integer(2),power(),multiply(),DEBUG&&console.log("R_p * x^2: "+stack[tos-1].toString()),push(z),push(symbol(SECRETX)),multiply(),DEBUG&&console.log("R_q * x: "+stack[tos-1].toString()),push(F),DEBUG&&console.log("R_r: "+stack[tos-1].toString()),add(),add(),add(),simplify(),DEBUG&&console.log("solving depressed quartic: "+stack[tos-1].toString()),push(symbol(SECRETX)),roots(),Y=pop(),DEBUG&&console.log("depressedSolutions: "+Y),rt=0,tt=(at=Y.tensor.elem).length;rt<tt;rt++)X=at[rt],push(X),push(p4),push_integer(4),push(p3),multiply(),divide(),subtract(),simplify(),DEBUG&&console.log("solution from depressed: "+stack[tos-1].toString());return void restore()}}return moveTos(tos-t),restore()},Eval_round=function(){return push(cadr(p1)),Eval(),yround()},yround=function(){return save(),yyround(),restore()},yyround=function(){var t;return t=0,p1=pop(),isNumericAtom(p1)?isdouble(p1)?(t=Math.round(p1.d),void push_double(t)):isinteger(p1)?void push(p1):(push(p1),yyfloat(),p1=pop(),push_integer(Math.round(p1.d))):(push_symbol(ROUND),push(p1),void list(2))},T_INTEGER=1001,T_DOUBLE=1002,T_SYMBOL=1003,T_FUNCTION=1004,T_NEWLINE=1006,T_STRING=1007,T_GTEQ=1008,T_LTEQ=1009,T_EQ=1010,T_NEQ=1011,T_QUOTASSIGN=1012,token="",newline_flag=0,meta_mode=0,input_str=0,scan_str=0,token_str=0,token_buf=0,lastFoundSymbol=null,symbolsRightOfAssignment=null,symbolsLeftOfAssignment=null,isSymbolLeftOfAssignment=null,scanningParameters=null,functionInvokationsScanningStack=null,skipRootVariableToBeSolved=!1,assignmentFound=null,scanned="",scan=function(t){return DEBUG&&console.log("#### scanning "+t),lastFoundSymbol=null,symbolsRightOfAssignment=[],symbolsLeftOfAssignment=[],isSymbolLeftOfAssignment=!0,scanningParameters=[],functionInvokationsScanningStack=[""],assignmentFound=!1,scanned=t,meta_mode=0,expanding++,input_str=0,scan_str=0,get_next_token(),""===token?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,assignmentFound||(symbolsInExpressionsWithoutAssignments=symbolsInExpressionsWithoutAssignments.concat(symbolsLeftOfAssignment)),token_str-input_str)},scan_meta=function(t){return scanned=t,meta_mode=1,expanding++,input_str=0,scan_str=0,get_next_token(),""===token?(push(symbol(NIL)),expanding--,0):(scan_stmt(),expanding--,token_str-input_str)},scan_stmt=function(){var t,e,r,n,i,s,o,a,u;if(scan_relation(),t=!1,token===T_QUOTASSIGN&&(t=!0),(token===T_QUOTASSIGN||"="===token)&&(u=lastFoundSymbol,DEBUG&&console.log("assignment!"),assignmentFound=!0,isSymbolLeftOfAssignment=!1,get_next_token(),push_symbol(SETQ),swap(),t&&push_symbol(QUOTE),scan_relation(),t&&list(2),list(3),isSymbolLeftOfAssignment=!0,codeGen)){if(-1!==(n=symbolsRightOfAssignment.indexOf(u))&&(symbolsRightOfAssignment.splice(n,1),symbolsHavingReassignments.push(u)),DEBUG)for(console.log("locally, "+u+" depends on: "),i=0,s=symbolsRightOfAssignment.length;i<s;i++)r=symbolsRightOfAssignment[i],console.log("  "+r);for(null==symbolsDependencies[u]&&(symbolsDependencies[u]=[]),e=symbolsDependencies[u],a=0,o=symbolsRightOfAssignment.length;a<o;a++)r=symbolsRightOfAssignment[a],-1===e.indexOf(r)&&e.push(r);return symbolsRightOfAssignment=[]}},scan_relation=function(){switch(scan_expression(),token){case T_EQ:return push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3);case T_NEQ:return push_symbol(NOT),swap(),push_symbol(TESTEQ),swap(),get_next_token(),scan_expression(),list(3),list(2);case T_LTEQ:return push_symbol(TESTLE),swap(),get_next_token(),scan_expression(),list(3);case T_GTEQ:return push_symbol(TESTGE),swap(),get_next_token(),scan_expression(),list(3);case"<":return push_symbol(TESTLT),swap(),get_next_token(),scan_expression(),list(3);case">":return push_symbol(TESTGT),swap(),get_next_token(),scan_expression(),list(3)}},scan_expression=function(){var t;switch(t=tos,token){case"+":get_next_token(),scan_term();break;case"-":get_next_token(),scan_term(),negate();break;default:scan_term()}for(;0===newline_flag&&("+"===token||"-"===token);)"+"===token?(get_next_token(),scan_term()):(get_next_token(),scan_term(),negate());if(tos-t>1)return list(tos-t),push_symbol(ADD),swap(),cons()},is_factor=function(){if(("function"==typeof token.charCodeAt?token.charCodeAt(0):void 0)===dotprod_unicode)return 1;switch(token){case"*":case"/":return 1;case"(":case T_SYMBOL:case T_FUNCTION:case T_INTEGER:case T_DOUBLE:case T_STRING:return newline_flag?(scan_str=token_str,0):1}return 0},simplify_1_in_products=function(t,e){if(t>e&&isrational(stack[t-1])&&equaln(stack[t-1],1))return pop()},multiply_consecutive_constants=function(t,e){if(t>e+1&&isNumericAtom(stack[t-2])&&isNumericAtom(stack[t-1]))return multiply()},scan_term=function(){var t;for(t=tos,scan_factor(),parse_time_simplifications&&simplify_1_in_products(tos,t);is_factor();)"*"===token?(get_next_token(),scan_factor()):"/"===token?(simplify_1_in_products(tos,t),get_next_token(),scan_factor(),inverse()):("function"==typeof token.charCodeAt?token.charCodeAt(0):void 0)===dotprod_unicode?(get_next_token(),push_symbol(INNER),swap(),scan_factor(),list(3)):scan_factor(),parse_time_simplifications&&(multiply_consecutive_constants(tos,t),simplify_1_in_products(tos,t));return t===tos?push_integer(1):tos-t>1?(list(tos-t),push_symbol(MULTIPLY),swap(),cons()):void 0},scan_power=function(){if("^"===token)return get_next_token(),push_symbol(POWER),swap(),scan_factor(),list(3)},scan_index=function(t){for(get_next_token(),push_symbol(INDEX),swap(),scan_expression();","===token;)get_next_token(),scan_expression();return"]"!==token&&scan_error("] expected"),get_next_token(),list(tos-t)},scan_factor=function(){var t,e;for(e=tos,t=!1,"("===token?scan_subexpr():token===T_SYMBOL?scan_symbol():token===T_FUNCTION?scan_function_call_with_function_name():"["===token?scan_tensor():token===T_INTEGER?(t=!0,bignum_scan_integer(token_buf),get_next_token()):token===T_DOUBLE?(t=!0,bignum_scan_float(token_buf),get_next_token()):token===T_STRING?scan_string():scan_error("syntax error");"["===token||"("===token&&0===newline_flag&&!t;)"["===token?scan_index(e):"("===token&&scan_function_call_without_function_name();for(;"!"===token;)get_next_token(),push_symbol(FACTORIAL),swap(),list(2);for(;("function"==typeof token.charCodeAt?token.charCodeAt(0):void 0)===transpose_unicode;)get_next_token(),push_symbol(TRANSPOSE),swap(),list(2);return scan_power()},addSymbolRightOfAssignment=function(t){var e,r,n,i;if(-1===predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)&&-1===symbolsRightOfAssignment.indexOf(t)&&-1===symbolsRightOfAssignment.indexOf("'"+t)&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols right of assignment"),n="",e=r=1,i=functionInvokationsScanningStack.length;1<=i?r<i:r>i;e=1<=i?++r:--r)""!==functionInvokationsScanningStack[e]&&(n+=functionInvokationsScanningStack[e]+"_"+e+"_");return t=n+t,symbolsRightOfAssignment.push(t)}},addSymbolLeftOfAssignment=function(t){var e,r,n,i;if(-1===predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t)&&-1===symbolsLeftOfAssignment.indexOf(t)&&-1===symbolsLeftOfAssignment.indexOf("'"+t)&&!skipRootVariableToBeSolved){for(DEBUG&&console.log("... adding symbol: "+t+" to the set of the symbols left of assignment"),n="",e=r=1,i=functionInvokationsScanningStack.length;1<=i?r<i:r>i;e=1<=i?++r:--r)""!==functionInvokationsScanningStack[e]&&(n+=functionInvokationsScanningStack[e]+"_"+e+"_");return t=n+t,symbolsLeftOfAssignment.push(t)}},scan_symbol=function(){if(token!==T_SYMBOL&&scan_error("symbol expected"),meta_mode&&1===token_buf.length)switch(token_buf[0]){case"a":push(symbol(METAA));break;case"b":push(symbol(METAB));break;case"x":push(symbol(METAX));break;default:push(usr_symbol(token_buf))}else push(usr_symbol(token_buf));return 0===scanningParameters.length?(DEBUG&&console.log("out of scanning parameters, processing "+token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment&&addSymbolLeftOfAssignment(token_buf)):(DEBUG&&console.log("still scanning parameters, skipping "+token_buf),isSymbolLeftOfAssignment&&addSymbolRightOfAssignment("'"+token_buf)),DEBUG&&console.log("found symbol: "+token_buf+" left of assignment: "+isSymbolLeftOfAssignment),isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token()},scan_string=function(){return push(new_string(token_buf)),get_next_token()},scan_function_call_with_function_name=function(){var t,e,r,n,i,s;if(DEBUG&&console.log("-- scan_function_call_with_function_name start"),n=1,new U,i=usr_symbol(token_buf),push(i),"roots"!==(t=token_buf)&&"defint"!==t&&"sum"!==t&&"product"!==t&&"for"!==t||functionInvokationsScanningStack.push(token_buf),lastFoundSymbol=token_buf,isSymbolLeftOfAssignment||addSymbolRightOfAssignment(token_buf),get_next_token(),get_next_token(),scanningParameters.push(!0),")"!==token){for(scan_stmt(),n++;","===token;)get_next_token(),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(t){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(t)})),skipRootVariableToBeSolved=!0),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("sum")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(t){return!new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(t)})),skipRootVariableToBeSolved=!0),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("product")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(t){return!new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(t)})),skipRootVariableToBeSolved=!0),2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("for")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(t){return!new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(t)})),skipRootVariableToBeSolved=!0),-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("defint")&&(2===n||n>2&&(n-2)%3==0)&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(t){return!new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"+token_buf).test(t)})),skipRootVariableToBeSolved=!0),scan_stmt(),skipRootVariableToBeSolved=!1,n++;2===n&&-1!==functionInvokationsScanningStack[functionInvokationsScanningStack.length-1].indexOf("roots")&&(symbolsRightOfAssignment=symbolsRightOfAssignment.filter((function(t){return!new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_x").test(t)})))}for(scanningParameters.pop(),e=r=0,s=symbolsRightOfAssignment.length;0<=s?r<=s:r>=s;e=0<=s?++r:--r)null!=symbolsRightOfAssignment[e]&&("roots"===t&&(symbolsRightOfAssignment[e]=symbolsRightOfAssignment[e].replace(new RegExp("roots_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"defint"===t&&(symbolsRightOfAssignment[e]=symbolsRightOfAssignment[e].replace(new RegExp("defint_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"sum"===t&&(symbolsRightOfAssignment[e]=symbolsRightOfAssignment[e].replace(new RegExp("sum_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"product"===t&&(symbolsRightOfAssignment[e]=symbolsRightOfAssignment[e].replace(new RegExp("product_"+(functionInvokationsScanningStack.length-1)+"_"),"")),"for"===t&&(symbolsRightOfAssignment[e]=symbolsRightOfAssignment[e].replace(new RegExp("for_"+(functionInvokationsScanningStack.length-1)+"_"),"")));if(")"!==token&&scan_error(") expected"),get_next_token(),list(n),"roots"!==t&&"defint"!==t&&"sum"!==t&&"product"!==t&&"for"!==t||functionInvokationsScanningStack.pop(),t===symbol(PATTERN).printname&&(patternHasBeenFound=!0),DEBUG)return console.log("-- scan_function_call_with_function_name end")},scan_function_call_without_function_name=function(){var t;if(DEBUG&&console.log("-- scan_function_call_without_function_name start"),push_symbol(EVAL),swap(),list(2),t=1,get_next_token(),scanningParameters.push(!0),")"!==token)for(scan_stmt(),t++;","===token;)get_next_token(),scan_stmt(),t++;if(scanningParameters.pop(),")"!==token&&scan_error(") expected"),get_next_token(),list(t),DEBUG)return console.log("-- scan_function_call_without_function_name end: "+stack[tos-1])},scan_subexpr=function(){return"("!==token&&scan_error("( expected"),get_next_token(),scan_stmt(),")"!==token&&scan_error(") expected"),get_next_token()},scan_tensor=function(){var t;for(t=0,"["!==token&&scan_error("[ expected"),get_next_token(),scan_stmt(),t=1;","===token;)get_next_token(),scan_stmt(),t++;return build_tensor(t),"]"!==token&&scan_error("] expected"),get_next_token()},scan_error=function(t){for(errorMessage="";input_str!==scan_str&&("\n"!==scanned[input_str]&&"\r"!==scanned[input_str]||input_str+1!==scan_str);)errorMessage+=scanned[input_str++];for(errorMessage+=" ? ";scanned[input_str]&&"\n"!==scanned[input_str]&&"\r"!==scanned[input_str];)errorMessage+=scanned[input_str++];return errorMessage+="\n",stop(t)},build_tensor=function(t){var e,r,n;for(e=0,save(),(p2=alloc_tensor(t)).tensor.ndim=1,p2.tensor.dim[0]=t,e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)p2.tensor.elem[e]=stack[tos-t+e];return check_tensor_dimensions(p2),moveTos(tos-t),push(p2),restore()},get_next_token=function(){for(newline_flag=0;get_token(),token===T_NEWLINE;)newline_flag=1;if(DEBUG)return console.log("get_next_token token: "+token)},get_token=function(){for(;isspace(scanned[scan_str]);){if("\n"===scanned[scan_str]||"\r"===scanned[scan_str])return token=T_NEWLINE,void scan_str++;scan_str++}if(token_str=scan_str,scan_str!==scanned.length){if(!isdigit(scanned[scan_str])&&"."!==scanned[scan_str]){if(isalpha(scanned[scan_str])){for(;isalnumorunderscore(scanned[scan_str]);)scan_str++;return token="("===scanned[scan_str]?T_FUNCTION:T_SYMBOL,void update_token_buf(token_str,scan_str)}if('"'===scanned[scan_str]){for(scan_str++;'"'!==scanned[scan_str];)scan_str===scanned.length-1&&(scan_str++,scan_error("runaway string"),scan_str--),scan_str++;return scan_str++,token=T_STRING,void update_token_buf(token_str+1,scan_str-1)}if("#"===scanned[scan_str]||"-"===scanned[scan_str]&&"-"===scanned[scan_str+1]){for(;scanned[scan_str]&&"\n"!==scanned[scan_str]&&"\r"!==scanned[scan_str];)scan_str++;return scanned[scan_str]&&scan_str++,void(token=T_NEWLINE)}return":"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_QUOTASSIGN)):"="===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_EQ)):"!"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_NEQ)):"<"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_LTEQ)):">"===scanned[scan_str]&&"="===scanned[scan_str+1]?(scan_str+=2,void(token=T_GTEQ)):token=scanned[scan_str++]}for(;isdigit(scanned[scan_str]);)scan_str++;if("."===scanned[scan_str]){for(scan_str++;isdigit(scanned[scan_str]);)scan_str++;if("e"===scanned[scan_str]&&("+"===scanned[scan_str+1]||"-"===scanned[scan_str+1]||isdigit(scanned[scan_str+1])))for(scan_str+=2;isdigit(scanned[scan_str]);)scan_str++;token=T_DOUBLE}else token=T_INTEGER;update_token_buf(token_str,scan_str)}else token=""},update_token_buf=function(t,e){return token_buf=scanned.substring(t,e)},$.scan=scan,Eval_sgn=function(){return push(cadr(p1)),Eval(),sgn()},sgn=function(){return save(),yysgn(),restore()},yysgn=function(){return p1=pop(),isdouble(p1)?p1.d>0||0===p1.d?void push_integer(1):void push_integer(-1):isrational(p1)?-1===MSIGN(mmul(p1.q.a,p1.q.b))?void push_integer(-1):MZERO(mmul(p1.q.a,p1.q.b))?void push_integer(0):void push_integer(1):iscomplexnumber(p1)?(push_integer(-1),push(p1),absval(),power(),push(p1),void multiply()):isnegativeterm(p1)?(push_symbol(SGN),push(p1),negate(),list(2),push_integer(-1),void multiply()):(push_symbol(SGN),push(p1),list(2))},Eval_shape=function(){return push(cadr(p1)),Eval(),shape()},shape=function(){var t,e,r,n,i,s,o,a;for(r=0,t=[],e=[],r=n=0,o=MAXDIM;0<=o?n<o:n>o;r=0<=o?++n:--n)t[r]=0,e[r]=0;if(save(),p1=pop(),!istensor(p1))return isZeroAtomOrTensor(p1)||stop("transpose: tensor expected, 1st arg is not a tensor"),push(zero),void restore();for(s=p1.tensor.ndim,(p2=alloc_tensor(s)).tensor.ndim=1,p2.tensor.dim[0]=s,r=i=0,a=s;0<=a?i<a:i>a;r=0<=a?++i:--i)push_integer(p1.tensor.dim[r]),p2.tensor.elem[r]=pop();return push(p2),restore()},Eval_simfac=function(){return push(cadr(p1)),Eval(),simfac()},simfac=function(){var t;if(t=0,save(),p1=pop(),car(p1)===symbol(ADD)){for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),simfac_term(),p1=cdr(p1);add_all(tos-t)}else push(p1),simfac_term();return restore()},simfac_term=function(){var t;if(save(),p1=pop(),car(p1)!==symbol(MULTIPLY))return push(p1),void restore();for(t=tos,p1=cdr(p1);p1!==symbol(NIL);)push(car(p1)),p1=cdr(p1);for(;yysimfac(t););return multiply_all_noexpand(tos-t),restore()},yysimfac=function(t){var e,r,n,i,s,o,a,u;for(e=0,r=0,e=n=s=t,o=tos;s<=o?n<o:n>o;e=s<=o?++n:--n)for(p1=stack[e],r=i=a=t,u=tos;a<=u?i<u:i>u;r=a<=u?++i:--i)if(e!==r){if(p2=stack[r],car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&equal(cadr(p1),cadr(p2)))return push(cadr(p1)),push(one),subtract(),factorial(),stack[e]=pop(),stack[r]=one,1;if(car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&equal(p1,cadadr(p2)))return push(p1),push_integer(-1),add(),factorial(),reciprocate(),stack[e]=pop(),stack[r]=one,1;if(car(p2)===symbol(FACTORIAL)&&(push(p1),push(cadr(p2)),subtract(),p3=pop(),isplusone(p3)))return push(p1),factorial(),stack[e]=pop(),stack[r]=one,1;if(car(p1)===symbol(POWER)&&isminusone(caddr(p1))&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)&&(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3)))return push(cadr(p1)),factorial(),reciprocate(),stack[e]=pop(),stack[r]=one,1;if(car(p1)===symbol(FACTORIAL)&&car(p2)===symbol(POWER)&&isminusone(caddr(p2))&&caadr(p2)===symbol(FACTORIAL)){if(push(cadr(p1)),push(cadr(cadr(p2))),subtract(),p3=pop(),isplusone(p3))return stack[e]=cadr(p1),stack[r]=one,1;if(isminusone(p3))return push(cadr(cadr(p2))),reciprocate(),stack[e]=pop(),stack[r]=one,1;if(equaln(p3,2))return stack[e]=cadr(p1),push(cadr(p1)),push_integer(-1),add(),stack[r]=pop(),1;if(equaln(p3,-2))return push(cadr(cadr(p2))),reciprocate(),stack[e]=pop(),push(cadr(cadr(p2))),push_integer(-1),add(),reciprocate(),stack[r]=pop(),1}}return 0},DEBUG_SIMPLIFY=!1,Eval_simplify=function(){return push(cadr(p1)),runUserDefinedSimplifications(),Eval(),simplify()},runUserDefinedSimplifications=function(){var t,e,r,n,i,s,o,a,u,l;if(0!==userSimplificationsInListForm.length&&!Find(cadr(p1),symbol(INTEGRAL))){for(u=expanding,expanding=!1,DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications passed: "+stack[tos-1].toString()),Eval(),DEBUG_SIMPLIFY&&console.log("runUserDefinedSimplifications after eval no expanding: "+stack[tos-1].toString()),expanding=u,p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("patterns to be checked: "),n=0,i=userSimplificationsInListForm.length;n<i;n++)r=userSimplificationsInListForm[n],DEBUG_SIMPLIFY&&console.log("..."+r);for(t=!0,a=0;t&&a<MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES;)for(t=!1,a++,o=0,s=userSimplificationsInListForm.length;o<s;o++){for(r=userSimplificationsInListForm[o],l=!0,e=0;l&&e<MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE;)e++,DEBUG_SIMPLIFY&&console.log("simplify - tos: "+tos+" checking pattern: "+r+" on: "+p1),push_symbol(NIL),(l=transform(r,!0))&&(t=!0),p1=stack[tos-1],DEBUG_SIMPLIFY&&console.log("p1 at this stage of simplification: "+p1);e===MAX_CONSECUTIVE_APPLICATIONS_OF_SINGLE_RULE&&stop("maximum application of single transformation rule exceeded: "+r)}if(a===MAX_CONSECUTIVE_APPLICATIONS_OF_ALL_RULES&&stop("maximum application of all transformation rules exceeded "),DEBUG_SIMPLIFY&&console.log("METAX = "+get_binding(symbol(METAX))),DEBUG_SIMPLIFY&&console.log("METAA = "+get_binding(symbol(METAA))),DEBUG_SIMPLIFY)return console.log("METAB = "+get_binding(symbol(METAB)))}},simplifyForCodeGeneration=function(){return save(),runUserDefinedSimplifications(),codeGen=!0,simplify_main(),codeGen=!1,restore()},simplify=function(){return save(),simplify_main(),restore()},simplify_main=function(){var args,fbody;if(p1=pop(),codeGen&&car(p1)===symbol(FUNCTION)&&(fbody=cadr(p1),push(fbody),eval(),simplify(),p3=pop(),args=caddr(p1),push_symbol(FUNCTION),push(p3),push(args),list(3),p1=pop()),!istensor(p1))return Find(p1,symbol(FACTORIAL))&&(push(p1),simfac(),p2=pop(),push(p1),rationalize(),simfac(),p3=pop(),p1=count(p2)<count(p3)?p2:p3),f10(),DEBUG_SIMPLIFY&&console.log("f10: "+p1.toString()),f1(),DEBUG_SIMPLIFY&&console.log("f1: "+p1.toString()),f2(),DEBUG_SIMPLIFY&&console.log("f2: "+p1.toString()),f3(),DEBUG_SIMPLIFY&&console.log("f3: "+p1.toString()),f4(),DEBUG_SIMPLIFY&&console.log("f4: "+p1.toString()),f5(),DEBUG_SIMPLIFY&&console.log("f5: "+p1.toString()),f9(),DEBUG_SIMPLIFY&&console.log("f9: "+p1.toString()),simplify_polarRect(),do_simplify_nested_radicals&&simplify_nested_radicals()?(DEBUG_SIMPLIFY&&console.log("de-nesting successful into: "+p1.toString()),push(p1),void simplify()):(simplify_rectToClock(),simplify_rational_expressions(),push(p1));simplify_tensor()},simplify_tensor=function(){var t,e,r,n,i;for(t=0,(p2=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,t=e=0,n=p1.tensor.ndim;0<=n?e<n:e>n;t=0<=n?++e:--e)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=r=0,i=p1.tensor.nelem;0<=i?r<i:r>i;t=0<=i?++r:--r)push(p1.tensor.elem[t]),simplify(),p2.tensor.elem[t]=pop();return check_tensor_dimensions(p2),isZeroAtomOrTensor(p2)&&(p2=zero),push(p2)},f1=function(){if(car(p1)===symbol(ADD))return push(p1),rationalize(),p2=pop(),count(p2)<count(p1)?p1=p2:void 0},f2=function(){if(car(p1)===symbol(ADD))return push(p1),Condense(),p2=pop(),count(p2)<=count(p1)?p1=p2:void 0},f3=function(){if(push(p1),rationalize(),negate(),rationalize(),negate(),rationalize(),p2=pop(),count(p2)<count(p1))return p1=p2},f10=function(){var t,e,r,n;if(r=car(p1),cdr(p1),(r===symbol(MULTIPLY)||isinnerordot(p1))&&car(car(cdr(p1)))===symbol(TRANSPOSE)&&car(car(cdr(cdr(p1))))===symbol(TRANSPOSE)&&(DEBUG_SIMPLIFY&&console.log("maybe collecting a transpose "+p1),t=cadr(car(cdr(p1))),e=cadr(car(cdr(cdr(p1)))),r===symbol(MULTIPLY)?(push(t),push(e),multiply()):isinnerordot(p1)&&(push(e),push(t),inner()),push_integer(1),push_integer(2),n=expanding,expanding=!1,transpose(),expanding=n,p2=pop(),count(p2)<count(p1)&&(p1=p2),DEBUG_SIMPLIFY))return console.log("collecting a transpose "+p2)},f4=function(){if(!isZeroAtomOrTensor(p1))return push(p1),rationalize(),inverse(),rationalize(),inverse(),rationalize(),p2=pop(),count(p2)<count(p1)?p1=p2:void 0},simplify_trig=function(){return save(),p1=pop(),f5(),push(p1),restore()},f5=function(){if(0!==Find(p1,symbol(SIN))||0!==Find(p1,symbol(COS)))return trigmode=1,push(p2=p1),Eval(),p3=pop(),trigmode=2,push(p2),Eval(),p4=pop(),trigmode=0,(count(p4)<count(p3)||nterms(p4)<nterms(p3))&&(p3=p4),count(p3)<count(p1)||nterms(p3)<nterms(p1)?p1=p3:void 0},f9=function(){var t,e;if(car(p1)===symbol(ADD)){for(push_integer(0),p2=cdr(p1);iscons(p2);)push(car(p2)),simplify(),add(),t=p1,e=p2,p1=pop(),simplify_rational_expressions(),push(p1),p1=t,p2=cdr(p2=e);return p2=pop(),count(p2)<count(p1)?p1=p2:void 0}},simplify_rational_expressions=function(){var t,e,r,n;if(push(p1),denominator(),t=pop(),!isone(t)&&(push(p1),numerator(),e=pop(),!isone(e)&&(r=areunivarpolysfactoredorexpandedform(e,t))&&(push(e),push(t),gcd(),push(r),factor(),n=pop(),!isone(n))))return push(e),push(r),factor(),push(n),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),push(t),push(r),factor(),push(n),inverse(),multiply_noexpand(),simplify(),stack[tos-1].toString(),divide(),Condense(),stack[tos-1].toString(),p2=pop(),count(p2)<count(p1)?p1=p2:void 0},simplify_rectToClock=function(){if(0!==Find(p1,symbol(SIN))||0!==Find(p1,symbol(COS)))return push(p1),Eval(),clockform(),p2=pop(),DEBUG_SIMPLIFY&&console.log("before simplification clockform: "+p1+" after: "+p2),count(p2)<count(p1)?p1=p2:void 0},simplify_polarRect=function(){if(push(p1),polarRectAMinusOneBase(),Eval(),p2=pop(),count(p2)<count(p1))return p1=p2},polarRectAMinusOneBase=function(){var t;if(save(),p1=pop(),isimaginaryunit(p1))return push(p1),void restore();if(equal(car(p1),symbol(POWER))&&isminusone(cadr(p1)))push(one),negate(),push(caddr(p1)),polarRectAMinusOneBase(),power(),polar(),rect();else if(iscons(p1)){for(t=tos;iscons(p1);)push(car(p1)),polarRectAMinusOneBase(),p1=cdr(p1);list(tos-t)}else push(p1);restore()},nterms=function(t){return car(t)!==symbol(ADD)?1:length(t)-1},simplify_nested_radicals=function(){var t,e,r,n;return recursionLevelNestedRadicalsRemoval>0?(DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1):(push(p1),n=take_care_of_nested_radicals(),r=stack[tos-1],t=expanding,expanding=0,yycondense(),expanding=t,e=pop(),countOccurrencesOfSymbol(symbol(POWER),r)<countOccurrencesOfSymbol(symbol(POWER),e)?push(r):push(e),p1=pop(),n)},take_care_of_nested_radicals=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A,N,M,k,C,T,O,I,P,R,L,D,q;if(recursionLevelNestedRadicalsRemoval>0)return DEBUG_SIMPLIFY&&console.log("denesting bailing out because of too much recursion"),!1;if(save(),p1=pop(),equal(car(p1),symbol(POWER))){if(s=cadr(p1),p=caddr(p1),!isminusone(p)&&equal(car(s),symbol(ADD))&&isfraction(p)&&(equalq(p,1,3)||equalq(p,1,2))){for(h=cadr(s),push(h),take_care_of_nested_radicals(),pop(),L=caddr(s),push(L),take_care_of_nested_radicals(),pop(),N=0,l=s;cdr(l)!==symbol(NIL);)N++,l=cdr(l);if(N>2)return push(p1),restore(),!1;if(u=null,a=[],q=[],car(L)===symbol(MULTIPLY)){if(D=cdr(L),iscons(D))for(;iscons(D);)I=car(D),car(I)===symbol(POWER)?(m=cadr(I),g=caddr(I),equalq(g,1,2)&&(null==u?(u=g,a.push(m)):equal(g,u)&&a.push(m))):q.push(I),D=cdr(D)}else car(L)===symbol(POWER)&&(m=cadr(L),g=caddr(L),null==u&&equalq(g,1,2)&&(u=g,a.push(m)));if(0===a.length)return push(p1),restore(),!1;for(t=h,push_integer(1),y=0,v=a.length;y<v;y++)d=a[y],push(d),multiply();for(r=pop(),push_integer(1),S=0,b=q.length;S<b;S++)d=q[S],push(d),multiply();if(e=pop(),equalq(p,1,3)){if(push(t),negate(),push(r),multiply(),push(e),divide(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(o),push_integer(3),push(r),multiply(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;if(push(o),push(symbol(SECRETX)),multiply(),push_integer(-3),push(t),multiply(),push(e),divide(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),pop(),push(p1),restore(),!1;push(o),push(symbol(SECRETX)),push_integer(2),power(),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(3),power(),multiply(),add(),add(),add()}else if(equalq(p,1,2)){if(push(r),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return push(p1),restore(),!1;if(push(o),push_integer(-2),push(t),multiply(),push(e),divide(),o=pop(),push(o),real(),yyfloat(),Math.abs(pop().d)>Math.pow(2,32))return pop(),push(p1),restore(),!1;push(o),push(symbol(SECRETX)),multiply(),push_integer(1),push(symbol(SECRETX)),push_integer(2),power(),multiply(),add(),add()}if(push(symbol(SECRETX)),recursionLevelNestedRadicalsRemoval++,roots(),recursionLevelNestedRadicalsRemoval--,equal(stack[tos-1],symbol(NIL)))return DEBUG_SIMPLIFY&&console.log("roots bailed out because of too much recursion"),pop(),push(p1),restore(),!1;for(O=[],A=0,x=(R=stack[tos-1].tensor.elem).length;A<x;A++)c=R[A],Find(c,symbol(POWER))||O.push(c);if(pop(),0===O.length)return push(p1),restore(),!1;for(T=[],P=[],M=0,_=O.length;M<_;M++)d=O[M],push(d),real(),yyfloat(),T.push(d),P.push(pop().d);return n=T[P.indexOf(Math.max.apply(Math,P))],equalq(p,1,3)?(push(t),push(n),push_integer(3),power(),push_integer(3),push(r),multiply(),push(n),multiply(),add(),divide(),push_rational(1,3),power()):equalq(p,1,2)&&(push(t),push(n),push_integer(2),power(),push(r),add(),divide(),push_rational(1,2),power()),null==(E=pop())?(push(p1),restore(),!1):(push(E),push(n),multiply(),equalq(p,1,3)?(w=pop(),push(E),push(r),push_rational(1,2),power(),multiply(),push(w),add(),simplify()):equalq(p,1,2)&&(w=pop(),push(E),push(r),push_rational(1,2),power(),multiply(),push(w),add(),simplify(),k=pop(),push(k),real(),yyfloat(),C=pop(),isnegativenumber(C)?(push(E),negate(),E=pop(),push(w),negate(),w=pop(),push(E),push(r),push_rational(1,2),power(),multiply(),push(w),add(),simplify()):push(k)),p1=pop(),push(p1),restore(),!0)}return push(p1),restore(),!1}if(iscons(p1)){for(f=tos,i=!1;iscons(p1);)push(car(p1)),i=i||take_care_of_nested_radicals(),p1=cdr(p1);return list(tos-f),restore(),i}return push(p1),restore(),!1},Eval_sin=function(){return push(cadr(p1)),Eval(),sine()},sine=function(){return save(),p1=pop(),car(p1)===symbol(ADD)?sine_of_angle_sum():sine_of_angle(),restore()},sine_of_angle_sum=function(){for(p2=cdr(p1);iscons(p2);){if(p4=car(p2),isnpi(p4))return push(p1),push(p4),subtract(),p3=pop(),push(p3),sine(),push(p4),cosine(),multiply(),push(p3),cosine(),push(p4),sine(),multiply(),void add();p2=cdr(p2)}return sine_of_angle()},sine_of_angle=function(){var t,e;if(car(p1)!==symbol(ARCSIN)){if(isdouble(p1))return t=Math.sin(p1.d),Math.abs(t)<1e-10&&(t=0),void push_double(t);if(isnegative(p1))return push(p1),negate(),sine(),void negate();if(car(p1)===symbol(ARCTAN))return push(cadr(p1)),push_integer(1),push(cadr(p1)),push_integer(2),power(),add(),push_rational(-1,2),power(),void multiply();if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),(e=pop_integer())<0||isNaN(e))return push(symbol(SIN)),push(p1),void list(2);switch(e%360){case 0:case 180:return push_integer(0);case 30:case 150:return push_rational(1,2);case 210:case 330:return push_rational(-1,2);case 45:case 135:return push_rational(1,2),push_integer(2),push_rational(1,2),power(),multiply();case 225:case 315:return push_rational(-1,2),push_integer(2),push_rational(1,2),power(),multiply();case 60:case 120:return push_rational(1,2),push_integer(3),push_rational(1,2),power(),multiply();case 240:case 300:return push_rational(-1,2),push_integer(3),push_rational(1,2),power(),multiply();case 90:return push_integer(1);case 270:return push_integer(-1);default:return push(symbol(SIN)),push(p1),list(2)}}else push(cadr(p1))},Eval_sinh=function(){return push(cadr(p1)),Eval(),ysinh()},ysinh=function(){return save(),yysinh(),restore()},yysinh=function(){var t;if(t=0,p1=pop(),car(p1)!==symbol(ARCSINH)){if(isdouble(p1))return t=Math.sinh(p1.d),Math.abs(t)<1e-10&&(t=0),void push_double(t);if(!isZeroAtomOrTensor(p1))return push_symbol(SINH),push(p1),list(2);push(zero)}else push(cadr(p1))},subst=function(){var t,e,r,n,i,s,o,a,u;if(save(),i=pop(),(o=pop())!==symbol(NIL)&&i!==symbol(NIL)){if(t=pop(),istensor(t)){for((s=alloc_tensor(t.tensor.nelem)).tensor.ndim=t.tensor.ndim,e=r=0,a=t.tensor.ndim;0<=a?r<a:r>a;e=0<=a?++r:--r)s.tensor.dim[e]=t.tensor.dim[e];for(e=n=0,u=t.tensor.nelem;0<=u?n<u:n>u;e=0<=u?++n:--n)push(t.tensor.elem[e]),push(o),push(i),subst(),s.tensor.elem[e]=pop(),check_tensor_dimensions(s);push(s)}else equal(t,o)?push(i):iscons(t)?(push(car(t)),push(o),push(i),subst(),push(cdr(t)),push(o),push(i),subst(),cons()):push(t);return restore()}restore()},Eval_sum=function(){var t,e,r,n,i,s,o,a;if(e=0,t=cadr(p1),r=caddr(p1),issymbol(r)||stop("sum: 2nd arg?"),push(cadddr(p1)),Eval(),n=pop_integer(),isNaN(n))push(p1);else{if(push(caddddr(p1)),Eval(),i=pop_integer(),!isNaN(i)){for(p4=get_binding(r),push_integer(0),e=s=o=n,a=i;o<=a?s<=a:s>=a;e=o<=a?++s:--s)push_integer(e),p5=pop(),set_binding(r,p5),push(t),Eval(),add();return set_binding(r,p4)}push(p1)}},Eval_tan=function(){return push(cadr(p1)),Eval(),tangent()},tangent=function(){return save(),yytangent(),restore()},yytangent=function(){var t,e;if(t=0,p1=pop(),car(p1)!==symbol(ARCTAN)){if(isdouble(p1))return t=Math.tan(p1.d),Math.abs(t)<1e-10&&(t=0),void push_double(t);if(isnegative(p1))return push(p1),negate(),tangent(),void negate();if(push(p1),push_integer(180),multiply(),evaluatingAsFloats?push_double(Math.PI):push_symbol(PI),divide(),(e=pop_integer())<0||isNaN(e))return push(symbol(TAN)),push(p1),void list(2);switch(e%360){case 0:case 180:return push_integer(0);case 30:case 210:return push_rational(1,3),push_integer(3),push_rational(1,2),power(),multiply();case 150:case 330:return push_rational(-1,3),push_integer(3),push_rational(1,2),power(),multiply();case 45:case 225:return push_integer(1);case 135:case 315:return push_integer(-1);case 60:case 240:return push_integer(3),push_rational(1,2),power();case 120:case 300:return push_integer(3),push_rational(1,2),power(),negate();default:return push(symbol(TAN)),push(p1),list(2)}}else push(cadr(p1))},Eval_tanh=function(){var t;if(t=0,push(cadr(p1)),Eval(),p1=pop(),car(p1)!==symbol(ARCTANH)){if(isdouble(p1))return t=Math.tanh(p1.d),Math.abs(t)<1e-10&&(t=0),void push_double(t);if(!isZeroAtomOrTensor(p1))return push_symbol(TANH),push(p1),list(2);push(zero)}else push(cadr(p1))},Eval_taylor=function(){return p1=cdr(p1),push(car(p1)),Eval(),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?guess():push(p2),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(24):push(p2),p1=cdr(p1),push(car(p1)),Eval(),(p2=pop())===symbol(NIL)?push_integer(0):push(p2),taylor()},taylor=function(){var t,e,r,n;if(t=0,save(),p4=pop(),p3=pop(),p2=pop(),p1=pop(),push(p3),e=pop_integer(),isNaN(e))return push_symbol(TAYLOR),push(p1),push(p2),push(p3),push(p4),list(5),void restore();for(push(p1),push(p2),push(p4),subst(),Eval(),push_integer(1),p5=pop(),t=r=1,n=e;(1<=n?r<=n:r>=n)&&(push(p1),push(p2),derivative(),p1=pop(),!isZeroAtomOrTensor(p1));t=1<=n?++r:--r)push(p5),push(p2),push(p4),subtract(),multiply(),p5=pop(),push(p1),push(p2),push(p4),subst(),Eval(),push(p5),multiply(),push_integer(t),factorial(),divide(),add();return restore()},Eval_tensor=function(){var t,e,r,n,i,s,o,a,u;for(r=0,check_tensor_dimensions(p1),o=p1.tensor.nelem,s=p1.tensor.ndim,(p2=alloc_tensor(o)).tensor.ndim=s,r=n=0,a=s;0<=a?n<a:n>a;r=0<=a?++n:--n)p2.tensor.dim[r]=p1.tensor.dim[r];for(t=p1.tensor.elem,e=p2.tensor.elem,check_tensor_dimensions(p2),r=i=0,u=o;0<=u?i<u:i>u;r=0<=u?++i:--i)push(t[r]),Eval(),e[r]=pop();return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),promote_tensor()},tensor_plus_tensor=function(){var t,e,r,n,i,s,o,a,u,l,c,p;if(n=0,save(),p2=pop(),(a=(p1=pop()).tensor.ndim)!==p2.tensor.ndim)return push(symbol(NIL)),void restore();for(n=i=0,l=a;0<=l?i<l:i>l;n=0<=l?++i:--i)if(p1.tensor.dim[n]!==p2.tensor.dim[n])return push(symbol(NIL)),void restore();for(u=p1.tensor.nelem,(p3=alloc_tensor(u)).tensor.ndim=a,n=s=0,c=a;0<=c?s<c:s>c;n=0<=c?++s:--s)p3.tensor.dim[n]=p1.tensor.dim[n];for(t=p1.tensor.elem,e=p2.tensor.elem,r=p3.tensor.elem,n=o=0,p=u;0<=p?o<p:o>p;n=0<=p?++o:--o)push(t[n]),push(e[n]),add(),r[n]=pop();return push(p3),restore()},tensor_times_scalar=function(){var t,e,r,n,i,s,o,a,u;for(r=0,save(),p2=pop(),s=(p1=pop()).tensor.ndim,o=p1.tensor.nelem,(p3=alloc_tensor(o)).tensor.ndim=s,r=n=0,a=s;0<=a?n<a:n>a;r=0<=a?++n:--n)p3.tensor.dim[r]=p1.tensor.dim[r];for(t=p1.tensor.elem,e=p3.tensor.elem,r=i=0,u=o;0<=u?i<u:i>u;r=0<=u?++i:--i)push(t[r]),push(p2),multiply(),e[r]=pop();return push(p3),restore()},scalar_times_tensor=function(){var t,e,r,n,i,s,o,a,u;for(r=0,save(),p2=pop(),p1=pop(),s=p2.tensor.ndim,o=p2.tensor.nelem,(p3=alloc_tensor(o)).tensor.ndim=s,r=n=0,a=s;0<=a?n<a:n>a;r=0<=a?++n:--n)p3.tensor.dim[r]=p2.tensor.dim[r];for(t=p2.tensor.elem,e=p3.tensor.elem,r=i=0,u=o;0<=u?i<u:i>u;r=0<=u?++i:--i)push(p1),push(t[r]),multiply(),e[r]=pop();return push(p3),restore()},check_tensor_dimensions=function(t){t.tensor.nelem!==t.tensor.elem.length&&console.log("something wrong in tensor dimensions")},is_square_matrix=function(t){return istensor(t)&&2===t.tensor.ndim&&t.tensor.dim[0]===t.tensor.dim[1]?1:0},d_tensor_tensor=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h;if(n=0,i=0,u=p1.tensor.ndim,l=p1.tensor.nelem,u+1>=MAXDIM)return push_symbol(DERIVATIVE),push(p1),push(p2),void list(3);for((p3=alloc_tensor(l*p2.tensor.nelem)).tensor.ndim=u+1,n=s=0,c=u;0<=c?s<c:s>c;n=0<=c?++s:--s)p3.tensor.dim[n]=p1.tensor.dim[n];for(p3.tensor.dim[u]=p2.tensor.dim[0],t=p1.tensor.elem,e=p2.tensor.elem,r=p3.tensor.elem,n=o=0,p=l;0<=p?o<p:o>p;n=0<=p?++o:--o)for(i=a=0,h=p2.tensor.nelem;0<=h?a<h:a>h;i=0<=h?++a:--a)push(t[n]),push(e[i]),derivative(),r[n*p2.tensor.nelem+i]=pop();return push(p3)},d_scalar_tensor=function(){var t,e,r,n,i;for((p3=alloc_tensor(p2.tensor.nelem)).tensor.ndim=1,p3.tensor.dim[0]=p2.tensor.dim[0],t=p2.tensor.elem,e=p3.tensor.elem,r=n=0,i=p2.tensor.nelem;0<=i?n<i:n>i;r=0<=i?++n:--n)push(p1),push(t[r]),derivative(),e[r]=pop();return push(p3)},d_tensor_scalar=function(){var t,e,r,n,i,s,o;for(r=0,(p3=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,r=n=0,s=p1.tensor.ndim;0<=s?n<s:n>s;r=0<=s?++n:--n)p3.tensor.dim[r]=p1.tensor.dim[r];for(t=p1.tensor.elem,e=p3.tensor.elem,r=i=0,o=p1.tensor.nelem;0<=o?i<o:i>o;r=0<=o?++i:--i)push(t[r]),push(p2),derivative(),e[r]=pop();return push(p3)},compare_tensors=function(t,e){var r,n,i,s,o;if(r=0,t.tensor.ndim<e.tensor.ndim)return-1;if(t.tensor.ndim>e.tensor.ndim)return 1;for(r=n=0,s=t.tensor.ndim;0<=s?n<s:n>s;r=0<=s?++n:--n){if(t.tensor.dim[r]<e.tensor.dim[r])return-1;if(t.tensor.dim[r]>e.tensor.dim[r])return 1}for(r=i=0,o=t.tensor.nelem;0<=o?i<o:i>o;r=0<=o?++i:--i)if(!equal(t.tensor.elem[r],e.tensor.elem[r]))return lessp(t.tensor.elem[r],e.tensor.elem[r])?-1:1;return 0},power_tensor=function(){var t,e,r,n,i,s,o,a;if(t=0,i=0,e=p1.tensor.ndim-1,p1.tensor.dim[0]!==p1.tensor.dim[e])return push_symbol(POWER),push(p1),push(p2),void list(3);if(push(p2),i=pop_integer(),isNaN(i))return push_symbol(POWER),push(p1),push(p2),void list(3);if(0===i){for(2!==p1.tensor.ndim&&stop("power(tensor,0) with tensor rank not equal to 2"),i=p1.tensor.dim[0],(p1=alloc_tensor(i*i)).tensor.ndim=2,p1.tensor.dim[0]=i,p1.tensor.dim[1]=i,t=r=0,s=i;0<=s?r<s:r>s;t=0<=s?++r:--r)p1.tensor.elem[i*t+t]=one;return check_tensor_dimensions(p1),void push(p1)}for(i<0&&(i=-i,push(p1),inv(),p1=pop()),push(p1),a=[],t=n=1,o=i;(1<=o?n<o:n>o)&&(push(p1),inner(),!isZeroAtomOrTensor(stack[tos-1]));t=1<=o?++n:--n)a.push(void 0);return a},copy_tensor=function(){var t,e,r,n,i;for(t=0,save(),p1=pop(),(p2=alloc_tensor(p1.tensor.nelem)).tensor.ndim=p1.tensor.ndim,t=e=0,n=p1.tensor.ndim;0<=n?e<n:e>n;t=0<=n?++e:--e)p2.tensor.dim[t]=p1.tensor.dim[t];for(t=r=0,i=p1.tensor.nelem;0<=i?r<i:r>i;t=0<=i?++r:--r)p2.tensor.elem[t]=p1.tensor.elem[t];return check_tensor_dimensions(p1),check_tensor_dimensions(p2),push(p2),restore()},promote_tensor=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h,f,d;if(t=0,e=0,r=0,save(),p1=pop(),!istensor(p1))return push(p1),void restore();for(p2=p1.tensor.elem[0],t=n=1,c=p1.tensor.nelem;1<=c?n<c:n>c;t=1<=c?++n:--n)compatible(p2,p1.tensor.elem[t])||stop("Cannot promote tensor due to inconsistent tensor components.");if(!istensor(p2))return push(p1),void restore();for((o=p1.tensor.ndim+p2.tensor.ndim)>MAXDIM&&stop("tensor rank > "+MAXDIM),a=p1.tensor.nelem*p2.tensor.nelem,(p3=alloc_tensor(a)).tensor.ndim=o,t=i=0,p=p1.tensor.ndim;0<=p?i<p:i>p;t=0<=p?++i:--i)p3.tensor.dim[t]=p1.tensor.dim[t];for(e=s=0,h=p2.tensor.ndim;0<=h?s<h:s>h;e=0<=h?++s:--s)p3.tensor.dim[t+e]=p2.tensor.dim[e];for(r=0,t=u=0,f=p1.tensor.nelem;0<=f?u<f:u>f;t=0<=f?++u:--u)for(e=l=0,d=(p2=p1.tensor.elem[t]).tensor.nelem;0<=d?l<d:l>d;e=0<=d?++l:--l)p3.tensor.elem[r++]=p2.tensor.elem[e];return check_tensor_dimensions(p2),check_tensor_dimensions(p3),push(p3),restore()},compatible=function(t,e){var r,n,i;if(!istensor(t)&&!istensor(e))return 1;if(!istensor(t)||!istensor(e))return 0;if(t.tensor.ndim!==e.tensor.ndim)return 0;for(r=n=0,i=t.tensor.ndim;0<=i?n<i:n>i;r=0<=i?++n:--n)if(t.tensor.dim[r]!==e.tensor.dim[r])return 0;return 1},Eval_test=function(){var t,e;for(e=p1,p1=cdr(p1);iscons(p1);){if(cdr(p1)===symbol(NIL))return push(car(p1)),void Eval();if(null==(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(p1))))return void push(e);if(t)return push(cadr(p1)),void Eval();p1=cddr(p1)}return push_integer(0)},Eval_testeq=function(){var t,e,r;if(e=p1,push(cadr(p1)),Eval(),push(caddr(p1)),Eval(),subtract(),r=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(r))push_integer(0);else if(null==t||t)if(push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),r=pop(),t=isZeroLikeOrNonZeroLikeOrUndetermined(r))push_integer(0);else{if(null==t||t)return push(e);push_integer(1)}else push_integer(1)},Eval_testge=function(){var t,e;if(e=p1,null!=(t=cmp_args()))return push_integer(t>=0?1:0);push(e)},Eval_testgt=function(){var t,e;if(e=p1,null!=(t=cmp_args()))return push_integer(t>0?1:0);push(e)},Eval_testle=function(){var t,e;if(e=p1,null!=(t=cmp_args()))return push_integer(t<=0?1:0);push(e)},Eval_testlt=function(){var t,e;if(e=p1,null!=(t=cmp_args()))return push_integer(t<0?1:0);push(e)},Eval_not=function(){var t,e;return e=p1,null==(t=isZeroLikeOrNonZeroLikeOrUndetermined(cadr(p1)))?push(e):push_integer(t?0:1)},Eval_and=function(){var t,e,r,n;for(t=cdr(n=p1),r=!1;iscons(t);)if(null==(e=isZeroLikeOrNonZeroLikeOrUndetermined(car(t))))r=!0,t=cdr(t);else if(e)t=cdr(t);else if(!e)return void push_integer(0);return r?push(n):push_integer(1)},Eval_or=function(){var t,e,r,n;for(e=cdr(n=p1),r=!1;iscons(e);)if(null==(t=isZeroLikeOrNonZeroLikeOrUndetermined(car(e))))r=!0,e=cdr(e);else{if(t)return void push_integer(1);t||(e=cdr(e))}return r?push(n):push_integer(0)},cmp_args=function(){var t;if(t=0,push(cadr(p1)),Eval(),simplify(),push(caddr(p1)),Eval(),simplify(),subtract(),(p1=pop()).k!==NUM&&p1.k!==DOUBLE&&(push(p1),yyfloat(),Eval(),p1=pop()),isZeroAtomOrTensor(p1))return 0;switch(p1.k){case NUM:t=-1===MSIGN(p1.q.a)?-1:1;break;case DOUBLE:t=p1.d<0?-1:1;break;default:t=null}return t},transform=function(t,e){var r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v;if(save(),p1=null,p4=pop(),p3=pop(),DEBUG&&console.log("         !!!!!!!!!   transform on: "+p3),saveMetaBindings(),set_binding(symbol(METAX),p4),g=tos,push_integer(1),push(p3),push(p4),polyform(),push(p4),r=tos-2,decomp(e),c=tos-r,DEBUG)for(console.log("  "+c+" decomposed elements ====== "),i=s=0,p=c;0<=p?s<p:s>p;i=0<=p?++s:--s)console.log("  decomposition element "+i+": "+stack[tos-1-i]);if(y=!1,e){if(!isNumericAtom(p3))if(m=t,DEBUG&&console.log("applying transform: "+m),DEBUG&&console.log("scanning table entry "+m),push(m),push(symbol(SYMBOL_A_UNDERSCORE)),push(symbol(METAA)),subst(),push(symbol(SYMBOL_B_UNDERSCORE)),push(symbol(METAB)),subst(),push(symbol(SYMBOL_X_UNDERSCORE)),push(symbol(METAX)),subst(),p1=pop(),p5=car(p1),DEBUG&&console.log("template expression: "+p5),p6=cadr(p1),p7=cddr(p1),f_equals_a(g,e))y=!0;else{for(DEBUG&&console.log("p3 at this point: "+p3),v=[],DEBUG&&console.log("car(p3): "+car(p3)),iscons(h=p3)&&(v.push(car(p3)),h=cdr(p3));iscons(h);)f=car(h),h=cdr(h),DEBUG&&console.log("tos before recursive transform: "+tos),push(f),push_symbol(NIL),DEBUG&&console.log("testing: "+f),DEBUG&&console.log("about to try to simplify other term: "+f),d=transform(t,e),y=y||d,v.push(pop()),DEBUG&&console.log("tried to simplify other term: "+f+" ...successful?: "+d+" ...transformed: "+v[v.length-1]);if(0!==v.length){for(u=0,o=v.length;u<o;u++)i=v[u],push(i);list(v.length),p6=pop()}}}else for(l=0,a=t.length;l<a;l++)if(n=t[l],DEBUG&&(console.log("scanning table entry "+n),(n+"").indexOf("f(sqrt(a+b*x),2/3*1/b*sqrt((a+b*x)^3))")),n&&(scan_meta(n),p1=pop(),p5=cadr(p1),p6=caddr(p1),p7=cdddr(p1),f_equals_a(g,e))){y=!0;break}return moveTos(g),y?(push(p6),Eval(),p1=pop(),y=!0):p1=e?p3:symbol(NIL),restoreMetaBindings(),push(p1),restore(),y},saveMetaBindings=function(){return push(get_binding(symbol(METAA))),push(get_binding(symbol(METAB))),push(get_binding(symbol(METAX)))},restoreMetaBindings=function(){return set_binding(symbol(METAX),pop()),set_binding(symbol(METAB),pop()),set_binding(symbol(METAA),pop())},f_equals_a=function(t,e){var r,n,i,s,o,a,u,l,c;for(r=0,n=0,r=i=a=t,u=tos;a<=u?i<u:i>u;r=a<=u?++i:--i)for(set_binding(symbol(METAA),stack[r]),DEBUG&&console.log("  binding METAA to "+get_binding(symbol(METAA))),n=s=l=t,c=tos;l<=c?s<c:s>c;n=l<=c?++s:--s){for(set_binding(symbol(METAB),stack[n]),DEBUG&&console.log("  binding METAB to "+get_binding(symbol(METAB))),p1=p7;iscons(p1)&&(push(car(p1)),Eval(),p2=pop(),!isZeroAtomOrTensor(p2));)p1=cdr(p1);if(!iscons(p1)&&(push(p3),DEBUG&&console.log("about to evaluate template expression: "+p5+" binding METAA to "+get_binding(symbol(METAA))+" and binding METAB to "+get_binding(symbol(METAB))+" and binding METAX to "+get_binding(symbol(METAX))),push(p5),e&&(o=expanding,expanding=!1),Eval(),e&&(expanding=o),DEBUG&&console.log("  comparing "+stack[tos-1]+" to: "+stack[tos-2]),subtract(),p1=pop(),isZeroAtomOrTensor(p1)))return DEBUG&&(console.log("binding METAA to "+get_binding(symbol(METAA))),console.log("binding METAB to "+get_binding(symbol(METAB))),console.log("binding METAX to "+get_binding(symbol(METAX))),console.log("comparing "+p3+" to: "+p5)),1}return 0},Eval_transpose=function(){return push(cadr(p1)),Eval(),cddr(p1)===symbol(NIL)?(push_integer(1),push_integer(2)):(push(caddr(p1)),Eval(),push(cadddr(p1)),Eval()),transpose()},transpose=function(){var t,e,r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A,N,M,k,C;for(o=0,l=0,c=0,p=0,f=0,C=0,r=[],n=[],o=h=0,_=MAXDIM;0<=_?h<_:h>_;o=0<=_?++h:--h)r[o]=0,n[o]=0;if(save(),p3=pop(),p2=pop(),p1=pop(),isNumericAtom(p1))return push(p1),void restore();if((isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2))&&isidentitymatrix(p1))return push(p1),void restore();if(istranspose(p1)&&(a=car(cdr(cdr(p1))),u=car(cdr(cdr(cdr(p1)))),equal(a,p3)&&equal(u,p2)||equal(u,p3)&&equal(a,p2)||equal(a,symbol(NIL))&&equal(u,symbol(NIL))&&(isplusone(p3)&&isplustwo(p2)||isplusone(p2)&&isplustwo(p3))))return push(car(cdr(p1))),void restore();if(expanding&&isadd(p1)){for(p1=cdr(p1),push(zero);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),add(),p1=cdr(p1);restore()}else if(expanding&&ismultiply(p1)){for(p1=cdr(p1),push(one);iscons(p1);)push(car(p1)),push(p2),push(p3),transpose(),multiply(),p1=cdr(p1);restore()}else{if(!expanding||!isinnerordot(p1)){if(!istensor(p1))return isZeroAtomOrTensor(p1)?(push(zero),void restore()):(push_symbol(TRANSPOSE),push(p1),isplusone(p2)&&isplustwo(p3)||isplusone(p3)&&isplustwo(p2)?list(2):(push(p2),push(p3),list(4)),void restore());if(g=p1.tensor.ndim,y=p1.tensor.nelem,1===g)return push(p1),void restore();for(push(p2),p=pop_integer(),push(p3),f=pop_integer(),(p<1||p>g||f<1||f>g)&&stop("transpose: index out of range"),p--,f--,(p2=alloc_tensor(y)).tensor.ndim=g,o=m=0,E=g;0<=E?m<E:m>E;o=0<=E?++m:--m)p2.tensor.dim[o]=p1.tensor.dim[o];for(p2.tensor.dim[p]=p1.tensor.dim[f],p2.tensor.dim[f]=p1.tensor.dim[p],t=p1.tensor.elem,i=p2.tensor.elem,o=v=0,S=g;0<=S?v<S:v>S;o=0<=S?++v:--v)r[o]=0,n[o]=p1.tensor.dim[o];for(o=b=0,A=y;0<=A?b<A:b>A;o=0<=A?++b:--b){for(C=r[p],r[p]=r[f],r[f]=C,C=n[p],n[p]=n[f],n[f]=C,c=0,l=x=0,N=g;0<=N?x<N:x>N;l=0<=N?++x:--x)c=c*n[l]+r[l];for(C=r[p],r[p]=r[f],r[f]=C,C=n[p],n[p]=n[f],n[f]=C,i[c]=t[o],l=k=M=g-1;(M<=0?k<=0:k>=0)&&!(++r[l]<n[l]);l=M<=0?++k:--k)r[l]=0}return push(p2),restore()}for(p1=cdr(p1),e=[];iscons(p1);)e.push([car(p1),p2,p3]),p1=cdr(p1);for(s=d=w=e.length-1;w<=0?d<=0:d>=0;s=w<=0?++d:--d)push(e[s][0]),push(e[s][1]),push(e[s][2]),transpose(),s!==e.length-1&&inner();restore()}},Eval_user_function=function(){var t,e;if(DEBUG&&console.log("Eval_user_function evaluating: "+car(p1)),car(p1)!==symbol(SYMBOL_D)||get_binding(symbol(SYMBOL_D))!==symbol(SYMBOL_D)){if(push(car(p1)),Eval(),t=pop(),isNumericAtom(t)?stop("expected function invocation, found multiplication instead. Use '*' symbol explicitly for multiplication."):istensor(t)?stop("expected function invocation, found tensor product instead. Use 'dot/inner' explicitly."):isstr(t)&&stop("expected function, found string instead."),p3=car(cdr(t)),p4=car(cdr(cdr(t))),p5=cdr(p1),car(t)===symbol(FUNCTION)&&t!==car(p1)){for(p1=p4,p2=p5,e=tos;iscons(p1)&&iscons(p2);)push(car(p1)),push(car(p2)),p1=cdr(p1),p2=cdr(p2);return list(tos-e),p6=pop(),push(p3),iscons(p6)&&(push(p6),rewrite_args()),Eval()}for(e=tos,push(t),p1=p5;iscons(p1);)push(car(p1)),Eval(),p1=cdr(p1);list(tos-e)}else Eval_derivative()},rewrite_args=function(){var t,e;if(e=0,save(),p2=pop(),p1=pop(),istensor(p1))return e=rewrite_args_tensor(),restore(),e;if(iscons(p1)){for(t=tos,car(p1)===car(p2)?(push_symbol(EVAL),push(car(cdr(p2))),list(2)):push(car(p1)),p1=cdr(p1);iscons(p1);)push(car(p1)),push(p2),e+=rewrite_args(),p1=cdr(p1);return list(tos-t),restore(),e}if(!issymbol(p1))return push(p1),restore(),0;for(p3=p2;iscons(p3);){if(p1===car(p3))return push(cadr(p3)),restore(),1;p3=cddr(p3)}return p3=get_binding(p1),push(p3),p1!==p3&&(push(p2),0===(e=rewrite_args())&&(pop(),push(p1))),restore(),e},rewrite_args_tensor=function(){var t,e,r,n;for(r=0,t=0,push(p1),copy_tensor(),t=e=0,n=(p1=pop()).tensor.nelem;0<=n?e<n:e>n;t=0<=n?++e:--e)push(p1.tensor.elem[t]),push(p2),r+=rewrite_args(),p1.tensor.elem[t]=pop();return check_tensor_dimensions(p1),push(p1),r},Eval_zero=function(){var t,e,r,n,i,s,o,a;for(t=0,e=[],n=0,s=0,t=r=0,o=MAXDIM;0<=o?r<o:r>o;t=0<=o?++r:--r)e[t]=0;for(n=1,s=0,p2=cdr(p1);iscons(p2);){if(push(car(p2)),Eval(),(t=pop_integer())<1||isNaN(t))return void push(zero);n*=t,e[s++]=t,p2=cdr(p2)}if(0!==s){for((p1=alloc_tensor(n)).tensor.ndim=s,t=i=0,a=s;0<=a?i<a:i>a;t=0<=a?++i:--i)p1.tensor.dim[t]=e[t];return push(p1)}push(zero)},allocatedId=0,alloc_tensor=function(t){var e,r,n,i;for(e=0,(n=new U).k=TENSOR,n.tensor=new tensor,n.tensor.nelem=t,e=r=0,i=t;0<=i?r<i:r>i;e=0<=i?++r:--r)n.tensor.elem[e]=zero;return n.tensor.allocatedId=allocatedId,allocatedId++,check_tensor_dimensions(n),n},Find=function(t,e){var r,n,i;if(r=0,equal(t,e))return 1;if(istensor(t)){for(r=n=0,i=t.tensor.nelem;0<=i?n<i:n>i;r=0<=i?++n:--n)if(Find(t.tensor.elem[r],e))return 1;return 0}for(;iscons(t);){if(Find(car(t),e))return 1;t=cdr(t)}return 0},findPossibleClockForm=function(t){var e,r,n;if(e=0,isimaginaryunit(t))return 0;if(car(t)===symbol(POWER)&&!isinteger(caddr(p1))&&Find(cadr(t),imaginaryunit))return 1;if(car(t)===symbol(POWER)&&equaln(cadr(t),-1)&&!isinteger(caddr(p1)))return 1;if(istensor(t)){for(e=r=0,n=t.tensor.nelem;0<=n?r<n:r>n;e=0<=n?++r:--r)if(findPossibleClockForm(t.tensor.elem[e]))return 1;return 0}for(;iscons(t);){if(findPossibleClockForm(car(t)))return 1;t=cdr(t)}return 0},findPossibleExponentialForm=function(t){var e,r,n;if(e=0,car(t)===symbol(POWER)&&cadr(t)===symbol(E))return Find(caddr(t),imaginaryunit);if(istensor(t)){for(e=r=0,n=t.tensor.nelem;0<=n?r<n:r>n;e=0<=n?++r:--r)if(findPossibleExponentialForm(t.tensor.elem[e]))return 1;return 0}for(;iscons(t);){if(findPossibleExponentialForm(car(t)))return 1;t=cdr(t)}return 0},$.Find=Find,init=function(){var t,e,r;if(t=0,flag=0,reset_after_error(),chainOfUserSymbolsNotFunctionsBeingEvaluated=[],!flag){for(flag=1,t=e=0,r=NSYM;0<=r?e<r:e>r;t=0<=r?++e:--e)symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],isSymbolReclaimable[t]=!1;return defn()}},defn_str=['version="'+version+'"',"e=exp(1)","i=sqrt(-1)","autoexpand=1","assumeRealVariables=1","trange=[-pi,pi]","xrange=[-10,10]","yrange=[-10,10]","last=0","trace=0","forceFixedPrintout=1","maxFixedPrintoutDigits=6","printLeaveEAlone=1","printLeaveXAlone=0","cross(u,v)=[u[2]*v[3]-u[3]*v[2],u[3]*v[1]-u[1]*v[3],u[1]*v[2]-u[2]*v[1]]","curl(v)=[d(v[3],y)-d(v[2],z),d(v[1],z)-d(v[3],x),d(v[2],x)-d(v[1],y)]","div(v)=d(v[1],x)+d(v[2],y)+d(v[3],z)","ln(x)=log(x)"],defn=function(){var t,e,r,n,i;for(p0=symbol(NIL),p1=symbol(NIL),p2=symbol(NIL),p3=symbol(NIL),p4=symbol(NIL),p5=symbol(NIL),p6=symbol(NIL),p7=symbol(NIL),p8=symbol(NIL),p9=symbol(NIL),std_symbol("abs",ABS),std_symbol("add",ADD),std_symbol("adj",ADJ),std_symbol("and",AND),std_symbol("approxratio",APPROXRATIO),std_symbol("arccos",ARCCOS),std_symbol("arccosh",ARCCOSH),std_symbol("arcsin",ARCSIN),std_symbol("arcsinh",ARCSINH),std_symbol("arctan",ARCTAN),std_symbol("arctanh",ARCTANH),std_symbol("arg",ARG),std_symbol("atomize",ATOMIZE),std_symbol("besselj",BESSELJ),std_symbol("bessely",BESSELY),std_symbol("binding",BINDING),std_symbol("binomial",BINOMIAL),std_symbol("ceiling",CEILING),std_symbol("check",CHECK),std_symbol("choose",CHOOSE),std_symbol("circexp",CIRCEXP),std_symbol("clear",CLEAR),std_symbol("clearall",CLEARALL),std_symbol("clearpatterns",CLEARPATTERNS),std_symbol("clock",CLOCK),std_symbol("coeff",COEFF),std_symbol("cofactor",COFACTOR),std_symbol("condense",CONDENSE),std_symbol("conj",CONJ),std_symbol("contract",CONTRACT),std_symbol("cos",COS),std_symbol("cosh",COSH),std_symbol("decomp",DECOMP),std_symbol("defint",DEFINT),std_symbol("deg",DEGREE),std_symbol("denominator",DENOMINATOR),std_symbol("det",DET),std_symbol("derivative",DERIVATIVE),std_symbol("dim",DIM),std_symbol("dirac",DIRAC),std_symbol("divisors",DIVISORS),std_symbol("do",DO),std_symbol("dot",DOT),std_symbol("draw",DRAW),std_symbol("dsolve",DSOLVE),std_symbol("erf",ERF),std_symbol("erfc",ERFC),std_symbol("eigen",EIGEN),std_symbol("eigenval",EIGENVAL),std_symbol("eigenvec",EIGENVEC),std_symbol("eval",EVAL),std_symbol("exp",EXP),std_symbol("expand",EXPAND),std_symbol("expcos",EXPCOS),std_symbol("expsin",EXPSIN),std_symbol("factor",FACTOR),std_symbol("factorial",FACTORIAL),std_symbol("factorpoly",FACTORPOLY),std_symbol("filter",FILTER),std_symbol("float",FLOATF),std_symbol("floor",FLOOR),std_symbol("for",FOR),std_symbol("function",FUNCTION),std_symbol("Gamma",GAMMA),std_symbol("gcd",GCD),std_symbol("hermite",HERMITE),std_symbol("hilbert",HILBERT),std_symbol("imag",IMAG),std_symbol("component",INDEX),std_symbol("inner",INNER),std_symbol("integral",INTEGRAL),std_symbol("inv",INV),std_symbol("invg",INVG),std_symbol("isinteger",ISINTEGER),std_symbol("isprime",ISPRIME),std_symbol("laguerre",LAGUERRE),std_symbol("lcm",LCM),std_symbol("leading",LEADING),std_symbol("legendre",LEGENDRE),std_symbol("log",LOG),std_symbol("lookup",LOOKUP),std_symbol("mod",MOD),std_symbol("multiply",MULTIPLY),std_symbol("not",NOT),std_symbol("nroots",NROOTS),std_symbol("number",NUMBER),std_symbol("numerator",NUMERATOR),std_symbol("operator",OPERATOR),std_symbol("or",OR),std_symbol("outer",OUTER),std_symbol("pattern",PATTERN),std_symbol("patternsinfo",PATTERNSINFO),std_symbol("polar",POLAR),std_symbol("power",POWER),std_symbol("prime",PRIME),std_symbol("print",PRINT),std_symbol("print2dascii",PRINT2DASCII),std_symbol("printcomputer",PRINTFULL),std_symbol("printlatex",PRINTLATEX),std_symbol("printlist",PRINTLIST),std_symbol("printhuman",PRINTPLAIN),std_symbol("printLeaveEAlone",PRINT_LEAVE_E_ALONE),std_symbol("printLeaveXAlone",PRINT_LEAVE_X_ALONE),std_symbol("product",PRODUCT),std_symbol("quote",QUOTE),std_symbol("quotient",QUOTIENT),std_symbol("rank",RANK),std_symbol("rationalize",RATIONALIZE),std_symbol("real",REAL),std_symbol("rect",YYRECT),std_symbol("roots",ROOTS),std_symbol("round",ROUND),std_symbol("equals",SETQ),std_symbol("sgn",SGN),std_symbol("silentpattern",SILENTPATTERN),std_symbol("simplify",SIMPLIFY),std_symbol("sin",SIN),std_symbol("sinh",SINH),std_symbol("shape",SHAPE),std_symbol("sqrt",SQRT),std_symbol("stop",STOP),std_symbol("subst",SUBST),std_symbol("sum",SUM),std_symbol("symbolsinfo",SYMBOLSINFO),std_symbol("tan",TAN),std_symbol("tanh",TANH),std_symbol("taylor",TAYLOR),std_symbol("test",TEST),std_symbol("testeq",TESTEQ),std_symbol("testge",TESTGE),std_symbol("testgt",TESTGT),std_symbol("testle",TESTLE),std_symbol("testlt",TESTLT),std_symbol("transpose",TRANSPOSE),std_symbol("unit",UNIT),std_symbol("zero",ZERO),std_symbol("nil",NIL),std_symbol("autoexpand",AUTOEXPAND),std_symbol("bake",BAKE),std_symbol("assumeRealVariables",ASSUME_REAL_VARIABLES),std_symbol("last",LAST),std_symbol("lastprint",LAST_PRINT),std_symbol("last2dasciiprint",LAST_2DASCII_PRINT),std_symbol("lastfullprint",LAST_FULL_PRINT),std_symbol("lastlatexprint",LAST_LATEX_PRINT),std_symbol("lastlistprint",LAST_LIST_PRINT),std_symbol("lastplainprint",LAST_PLAIN_PRINT),std_symbol("trace",TRACE),std_symbol("forceFixedPrintout",FORCE_FIXED_PRINTOUT),std_symbol("maxFixedPrintoutDigits",MAX_FIXED_PRINTOUT_DIGITS),std_symbol("~",YYE),std_symbol("$DRAWX",DRAWX),std_symbol("$METAA",METAA),std_symbol("$METAB",METAB),std_symbol("$METAX",METAX),std_symbol("$SECRETX",SECRETX),std_symbol("version",VERSION),std_symbol("pi",PI),std_symbol("a",SYMBOL_A),std_symbol("b",SYMBOL_B),std_symbol("c",SYMBOL_C),std_symbol("d",SYMBOL_D),std_symbol("i",SYMBOL_I),std_symbol("j",SYMBOL_J),std_symbol("n",SYMBOL_N),std_symbol("r",SYMBOL_R),std_symbol("s",SYMBOL_S),std_symbol("t",SYMBOL_T),std_symbol("x",SYMBOL_X),std_symbol("y",SYMBOL_Y),std_symbol("z",SYMBOL_Z),std_symbol("I",SYMBOL_IDENTITY_MATRIX),std_symbol("a_",SYMBOL_A_UNDERSCORE),std_symbol("b_",SYMBOL_B_UNDERSCORE),std_symbol("x_",SYMBOL_X_UNDERSCORE),std_symbol("$C1",C1),std_symbol("$C2",C2),std_symbol("$C3",C3),std_symbol("$C4",C4),std_symbol("$C5",C5),std_symbol("$C6",C6),defineSomeHandyConstants(),n=codeGen,codeGen=!1,e=r=0,i=defn_str.length;0<=i?r<i:r>i;e=0<=i?++r:--r)t=defn_str[e],scan(t),DEBUG&&(console.log("... evaling "+t),console.log("top of stack:"),console.log(print_list(stack[tos-1]))),Eval(),pop();return codeGen=n},defineSomeHandyConstants=function(){return zero=new_integer(0),one=new_integer(1),push_double(1),one_as_double=pop(),push_symbol(POWER),DEBUG&&console.log(print_list(stack[tos-1])),push_integer(-1),DEBUG&&console.log(print_list(stack[tos-1])),push_rational(1,2),DEBUG&&console.log(print_list(stack[tos-1])),list(3),DEBUG&&console.log(print_list(stack[tos-1])),imaginaryunit=pop()},mcmp=function(t,e){return t.compare(e)},mcmpint=function(t,e){var r;return r=bigInt(e),mcmp(t,r)},strcmp=function(t,e){return t===e?0:t>e?1:-1},doubleToReasonableString=function(t){var e,r;return codeGen?""+t:(isZeroAtomOrTensor(get_binding(symbol(FORCE_FIXED_PRINTOUT)))?(r=""+t,r=printMode===PRINTMODE_LATEX?/\d*\.\d*e.*/gm.test(r)?r.replace(/e(.*)/gm,"\\mathrm{e}{$1}"):r.replace(/(\d+)e(.*)/gm,"$1.0\\mathrm{e}{$2}"):/\d*\.\d*e.*/gm.test(r)?r.replace(/e(.*)/gm,"*10^($1)"):r.replace(/(\d+)e(.*)/gm,"$1.0*10^($2)")):(push(get_binding(symbol(MAX_FIXED_PRINTOUT_DIGITS))),e=pop_integer(),-1===(r=(r=(r=""+t.toFixed(e)).replace(/(\.\d*?[1-9])0+$/gm,"$1")).replace(/\.0+$/gm,"")).indexOf(".")&&(r+=".0"),parseFloat(r)!==t&&(r=t.toFixed(e)+"...")),r)},clear_term=function(){},isspace=function(t){return null!=t&&(" "===t||"\t"===t||"\n"===t||"\v"===t||"\f"===t||"\r"===t)},isdigit=function(t){return null!=t&&/^\d+$/.test(t)},isalpha=function(t){return null!=t&&-1===t.search(/[^A-Za-z]/)},isalphaOrUnderscore=function(t){return null!=t&&-1===t.search(/[^A-Za-z_]/)},isunderscore=function(t){return null!=t&&-1===t.search(/_/)},isalnumorunderscore=function(t){return null!=t&&(isalphaOrUnderscore(t)||isdigit(t))},count=function(t){var e;if(iscons(t))for(e=0;iscons(t);)e+=count(car(t))+1,t=cdr(t);else e=1;return e},countOccurrencesOfSymbol=function(t,e){var r;if(r=0,iscons(e))for(;iscons(e);)r+=countOccurrencesOfSymbol(t,car(e)),e=cdr(e);else equal(t,e)&&(r=1);return r},countsize=function(t){var e,r,n,i;if(n=0,istensor(t))for(e=r=0,i=t.tensor.nelem;0<=i?r<i:r>i;e=0<=i?++r:--r)n+=t.tensor.elem[e];else if(iscons(t))for(;iscons(t);)n+=count(car(t))+1,t=cdr(t);else n=1;return n},stop=function(t){var e;throw errorMessage+="Stop: ",e=errorMessage+=t,errorMessage="",moveTos(0),new Error(e)},findDependenciesInScript=function(t,e){var r,n,i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w,E,S,A,N,M,k,C,T,O,I,P,R,L,D,q,B,U,$,z,F,G,V,j,H,W,Y;for(DEBUG&&console.log("stringToBeParsed: "+t),G=(new Date).getTime(),codeGen=!0,symbolsDependencies={},symbolsHavingReassignments=[],symbolsInExpressionsWithoutAssignments=[],patternHasBeenFound=!1,h=0,S=0,s={affectsVariables:[],affectedBy:[]},$=t;;){try{errorMessage="",check_stack(),DEBUG&&console.log("findDependenciesInScript: scanning"),S=scan(t.substring(h)),DEBUG&&console.log("scanned"),pop(),check_stack()}catch(t){a=t,PRINTOUTRESULT&&console.log(a),errorMessage=a+"",reset_after_error();break}if(0===S)break;h+=S}for(f in F="",DEBUG&&console.log("all local dependencies ----------------"),F+="All local dependencies: ",symbolsDependencies){for(W=symbolsDependencies[f],DEBUG&&console.log("variable "+f+" depends on: "),s.affectsVariables.push(f),F+=" variable "+f+" depends on: ",d=0,m=W.length;d<m;d++)c=W[d],DEBUG&&console.log("    "+c),"'"!==c[0]&&s.affectedBy.push(c),F+=c+", ";F+="; "}for(F+=". ",DEBUG&&console.log("Symbols with reassignments ----------------"),F+="Symbols with reassignments: ",E=0,g=symbolsHavingReassignments.length;E<g;E++)f=symbolsHavingReassignments[E],-1===s.affectedBy.indexOf(f)&&(s.affectedBy.push(f),F+=f+", ");for(F+=". ",DEBUG&&console.log("Symbols in expressions without assignments ----------------"),F+="Symbols in expressions without assignments: ",A=0,y=symbolsInExpressionsWithoutAssignments.length;A<y;A++)f=symbolsInExpressionsWithoutAssignments[A],-1===s.affectedBy.indexOf(f)&&(s.affectedBy.push(f),F+=f+", ");if(F+=". ",s.affectedBy.push("PATTERN_DEPENDENCY"),patternHasBeenFound&&(s.affectsVariables.push("PATTERN_DEPENDENCY"),F+=" - PATTERN_DEPENDENCY inserted - "),DEBUG&&console.log("All dependencies recursively ----------------"),F+="All dependencies recursively: ",U=["",""],l="",P="",""===errorMessage&&!e){try{U=run(t,!0)}catch(t){a=t,PRINTOUTRESULT&&console.log(a),errorMessage=a+"",init()}if(""===errorMessage)for(f in symbolsDependencies){for(codeGen=!0,DEBUG&&console.log("  variable "+f+" is: "+get_binding(usr_symbol(f)).toString()),codeGen=!1,DEBUG&&console.log("  variable "+f+" depends on: "),F+=" variable "+f+" depends on: ",recursiveDependencies(f,R=[],[],Y=[],[],n=[]),M=0,v=Y.length;M<v;M++)c=Y[M],DEBUG&&console.log("    --\x3e cycle through "+c);for(O=0,b=R.length;O<b;O++)c=R[O],DEBUG&&console.log("    "+c),F+=c+", ";for(F+="; ",I=0,x=n.length;I<x;I++)F+=" "+(c=n[I])+", ";for(DEBUG&&console.log("  code generation:"+f+" is: "+get_binding(usr_symbol(f)).toString()),push(get_binding(usr_symbol(f))),D=[],q=[],B=0,_=R.length;B<_;B++)"'"===(o=R[B])[0]&&(i=o.substring(1),C=usr_symbol(i),N=usr_symbol("AVOID_BINDING_TO_EXTERNAL_SCOPE_VALUE"+i),D.push(C),q.push(N),push(C),push(N),subst(),DEBUG&&console.log("after substitution: "+stack[tos-1]));try{simplifyForCodeGeneration()}catch(t){a=t,PRINTOUTRESULT&&console.log(a),errorMessage=a+"",init()}for(p=z=0,L=D.length;0<=L?z<L:z>L;p=0<=L?++z:--z)push(q[p]),push(D[p]),subst();if(clearRenamedVariablesToAvoidBindingToExternalScope(),""===errorMessage){if(V=pop(),collectUserSymbols(V,H=[]),codeGen=!0,u=V.toString(),codeGen=!1,k=printMode,printMode=PRINTMODE_LATEX,r=V.toString(),printMode=k,-1!==Y.indexOf(f))l+="// "+f+" is part of a cyclic dependency, no code generated.",P+="#"+f+" is part of a cyclic dependency, no code generated.";else if(0!==(H=(H=H.filter((function(t){return-1===predefinedSymbolsInGlobalScope_doNotTrackInDependencies.indexOf(t+"")}))).filter((function(t){return-1!==R.indexOf(t+"")||-1!==R.indexOf("'"+t)}))).length){for(T="(",j=0,w=H.length;j<w;j++)(c=H[j]).printname!==f&&(T+=c.printname+", ");T=T.replace(/, $/gm,""),l+=f+" = function "+(T+=")")+" { return ( "+u+" ); }",P+=f+T+" = "+r}else l+=f+" = "+u+";",P+=f+" = "+r;l+="\n",P+="\n",DEBUG&&console.log("    "+l)}}}return l=l.replace(/\n$/gm,""),P=P.replace(/\n$/gm,""),symbolsDependencies={},symbolsHavingReassignments=[],patternHasBeenFound=!1,symbolsInExpressionsWithoutAssignments=[],DEBUG&&console.log("testable string: "+F),TIMING_DEBUGS&&console.log("findDependenciesInScript time for: "+$+" : "+((new Date).getTime()-G)+"ms"),[F,U[0],l,P,U[1],errorMessage,s]},recursiveDependencies=function(t,e,r,n,i,s){var o,a,u,l,c,p,h,f;if(r.push(t),null!=symbolsDependencies[i[i.length-1]]&&-1!==symbolsDependencies[i[i.length-1]].indexOf("'"+t))return DEBUG&&console.log("can't keep following the chain of "+t+" because it's actually a variable bound to a parameter"),-1===e.indexOf("'"+t)&&-1===e.indexOf(t)&&e.push(t),e;if(i.push(t),null==symbolsDependencies[t])return-1===e.indexOf(t)&&e.push(t),e;for(l=0,c=(f=symbolsDependencies[t]).length;l<c;l++)if(a=f[l],-1!==i.indexOf(a)){for(DEBUG&&console.log("  found cycle:"),o="",h=0,p=i.length;h<p;h++)u=i[h],-1===n.indexOf(u)&&n.push(u),DEBUG&&console.log(u+" --\x3e "),o+=u+" --\x3e ";DEBUG&&console.log(" ... then "+a+" again"),o+=" ... then "+a+" again",s.push(o),-1===n.indexOf(a)&&n.push(a)}else recursiveDependencies(a,e,r,n,i,s),i.pop();return e},inited=!1,latexErrorSign="\\rlap{\\large\\color{red}\\bigtriangleup}{\\ \\ \\tiny\\color{red}!}",turnErrorMessageToLatex=function(t){return"$$\\text{"+(t=(t=(t=(t=(t=(t=(t=t.replace(/\n/g,"")).replace(/_/g,"} \\_ \\text{")).replace(new RegExp(String.fromCharCode(transpose_unicode),"g"),"}{}^{T}\\text{")).replace(new RegExp(String.fromCharCode(dotprod_unicode),"g"),"}\\cdot \\text{")).replace("Stop:","}  \\quad \\text{Stop:")).replace("->","}  \\rightarrow \\text{")).replace("?","}\\enspace "+latexErrorSign+" \\enspace  \\text{")).replace(/\n/g,"")+"}$$"},normaliseDots=function(t){return(t=(t=(t=(t=t.replace(new RegExp(String.fromCharCode(8901),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(8226),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(12539),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(55296),"g"),String.fromCharCode(dotprod_unicode))).replace(new RegExp(String.fromCharCode(65381),"g"),String.fromCharCode(dotprod_unicode))},TIMING_DEBUGS=!1,run=function(t,e=!1){var r,n,i,s,o,a,u,l,c,p;if(c=(new Date).getTime(),"selftest"!==(t=normaliseDots(t))){for(inited||(inited=!0,init()),u=0,a=0,n="",r="";;){try{errorMessage="",check_stack(),u=scan(t.substring(a)),p1=pop(),check_stack()}catch(t){o=t,PRINTOUTRESULT&&console.log(o),n+=o.message,e&&(r+=turnErrorMessageToLatex(o.message)),reset_after_error();break}if(0===u)break;a+=u,push(p1);try{stringsEmittedByUserPrintouts="",top_level_eval(),p2=pop(),check_stack(),isstr(p2)&&(DEBUG&&console.log(p2.str),DEBUG&&console.log("\n")),p2===symbol(NIL)?(s=stringsEmittedByUserPrintouts,e&&(i="$$"+stringsEmittedByUserPrintouts+"$$")):(s=print_expr(p2),s+="\n",e&&(i="$$"+collectLatexStringFromReturnValue(p2)+"$$",DEBUG&&console.log("collectedLatexResult: "+i))),n+=s,e&&(r+=i),PRINTOUTRESULT&&(DEBUG&&console.log("printline"),DEBUG&&console.log(s)),PRINTOUTRESULT&&(DEBUG&&console.log("display:"),print2dascii(p2)),e&&(r+="\n")}catch(t){s=(o=t).message,e&&(i=turnErrorMessageToLatex(o.message)),PRINTOUTRESULT&&console.log(s),n+=s,""!==s&&(n+="\n"),e&&(r+=i,r+="\n"),init()}}return"\n"===n[n.length-1]&&(n=n.substring(0,n.length-1)),e&&"\n"===r[r.length-1]&&(r=r.substring(0,r.length-1)),e?(DEBUG&&console.log("allReturnedLatexStrings: "+r),l=[n,r]):l=n,TIMING_DEBUGS&&(p="run time on: "+t+" : "+((new Date).getTime()-c)+"ms",console.log(p)),n="",r="",l}selftest()},check_stack=function(){if(0!==tos&&stop("stack error"),frame!==TOS&&stop("frame error"),0!==chainOfUserSymbolsNotFunctionsBeingEvaluated.length&&stop("symbols evaluation still ongoing?"),0!==evaluatingAsFloats&&stop("numeric evaluation still ongoing?"),0!==evaluatingPolar)return stop("evaluation of polar still ongoing?")},top_level_eval=function(){var t,e,r;if(DEBUG&&console.log("#### top level eval"),trigmode=0,r=symbol(AUTOEXPAND),expanding=isZeroAtomOrTensor(get_binding(r))?0:1,e=top(),Eval(),(t=top())!==symbol(NIL)&&(set_binding(symbol(LAST),t),isZeroAtomOrTensor(get_binding(symbol(BAKE)))||(bake(),t=top()),e!==symbol(SYMBOL_I)&&e!==symbol(SYMBOL_J)||!isimaginaryunit(t))){if(isimaginaryunit(get_binding(symbol(SYMBOL_J))))return push(imaginaryunit),push_symbol(SYMBOL_J),subst();if(isimaginaryunit(get_binding(symbol(SYMBOL_I))))return push(imaginaryunit),push_symbol(SYMBOL_I),subst()}},check_esc_flag=function(){if(esc_flag)return stop("esc key")},clearAlgebraEnvironment=function(){return do_clearall()},computeDependenciesFromAlgebra=function(t){var e,r,n;if(DEBUG&&console.log("computeDependenciesFromAlgebra!!!"),called_from_Algebra_block=!0,t=normaliseDots(t),DEBUG){for(console.log("computeDependenciesFromAlgebra: patterns in the list --------------- "),n=0,r=userSimplificationsInListForm.length;n<r;n++)e=userSimplificationsInListForm[n],console.log(car(e)+","+cdr(e)+")");console.log("...end of list --------------- ")}return called_from_Algebra_block=!1,findDependenciesInScript(t,!0)[6]},computeResultsAndJavaScriptFromAlgebra=function(t){var e,r,n,i,s,o,a,u,l,c,p;if(called_from_Algebra_block=!0,p=(new Date).getTime(),TIMING_DEBUGS&&console.log(" --------- computeResultsAndJavaScriptFromAlgebra input: "+t+" at: "+new Date),l=t=normaliseDots(t),DEBUG){for(console.log("computeResultsAndJavaScriptFromAlgebra: patterns in the list --------------- "),i=0,o=userSimplificationsInListForm.length;i<o;i++)n=userSimplificationsInListForm[i],console.log(car(n)+","+cdr(n)+")");console.log("...end of list --------------- ")}return[c,u,e,a,s,errorMessage,r]=findDependenciesInScript(t),called_from_Algebra_block=!1,""===a&&""===errorMessage||(u+="\n"+a,""!==errorMessage&&(u+="\n"+errorMessage),u=u.replace(/\n/g,"\n\n"),s+="\n$$"+a+"$$",""!==errorMessage&&(s+=turnErrorMessageToLatex(errorMessage)),s=s.replace(/\n/g,"\n\n")),s=(s=s.replace(/\n*/,"")).replace(/\$\$\$\$\n*/g,""),e=(e=e.replace(/Math\./g,"")).replace(/\n/g,"\n\n"),TIMING_DEBUGS&&console.log("computeResultsAndJavaScriptFromAlgebra time (total time from notebook and back) for: "+l+" : "+((new Date).getTime()-p)+"ms"),{code:e,result:s,latexResult:s,dependencyInfo:r}},(null!==exports?exports:this).run=run,(null!==exports?exports:this).findDependenciesInScript=findDependenciesInScript,(null!==exports?exports:this).computeDependenciesFromAlgebra=computeDependenciesFromAlgebra,(null!==exports?exports:this).computeResultsAndJavaScriptFromAlgebra=computeResultsAndJavaScriptFromAlgebra,(null!==exports?exports:this).clearAlgebraEnvironment=clearAlgebraEnvironment,tos=0,nil_symbols=0,push=function(t){return t.isZero,t===symbol(NIL)&&(nil_symbols++,DEBUG&&console.log("pushing symbol(NIL) #"+nil_symbols)),tos>=frame&&stop("stack overflow"),stack[tos++]=t},moveTos=function(t){if(tos<=t)tos=t;else for(;tos>t;)stack[tos]=null,tos--},top=function(){return stack[tos-1]},pop=function(){var t;return 0===tos&&stop("stack underflow"),stack[tos-1],t=stack[--tos],stack[tos]=null,t},push_frame=function(t){var e,r,n,i;for(e=0,(frame-=t)<tos&&stop("frame overflow, circular reference?"),i=[],e=r=0,n=t;0<=n?r<n:r>n;e=0<=n?++r:--r)i.push(stack[frame+e]=symbol(NIL));return i},pop_frame=function(t){if((frame+=t)>TOS)return stop("frame underflow")},save=function(){return(frame-=10)<tos&&stop("frame overflow, circular reference?"),stack[frame+0]=p0,stack[frame+1]=p1,stack[frame+2]=p2,stack[frame+3]=p3,stack[frame+4]=p4,stack[frame+5]=p5,stack[frame+6]=p6,stack[frame+7]=p7,stack[frame+8]=p8,stack[frame+9]=p9},restore=function(){return frame>TOS-10&&stop("frame underflow"),p0=stack[frame+0],p1=stack[frame+1],p2=stack[frame+2],p3=stack[frame+3],p4=stack[frame+4],p5=stack[frame+5],p6=stack[frame+6],p7=stack[frame+7],p8=stack[frame+8],p9=stack[frame+9],frame+=10},swap=function(){var t,e;return t=pop(),e=pop(),push(t),push(e)},dupl=function(){var t;return t=pop(),push(t),push(t)},$.dupl=dupl,$.swap=swap,$.restore=restore,$.save=save,$.push=push,$.pop=pop,Eval_symbolsinfo=function(){var t;return""!==(t=symbolsinfo())?push(new_string(t)):push_symbol(NIL)},symbolsinfo=function(){var t,e,r,n,i,s,o;for(s="",e=r=n=NIL+1,i=symtab.length;n<=i?r<i:r>i;e=n<=i?++r:--r)if(""!==symtab[e].printname)o=symtab[e]+"",t=(binding[e]+"").substring(0,4),s+="symbol: "+o+" size: "+countsize(binding[e])+" value: "+t+"...\n";else if(!1===isSymbolReclaimable[e])break;return s},std_symbol=function(t,e,r){var n;return(n=symtab[e]).printname=t,n.latexPrint=null!=r?r:t},usr_symbol=function(t){var e,r,n;for(e=0,e=r=0,n=NSYM;0<=n?r<n:r>n;e=0<=n?++r:--r){if(t===symtab[e].printname)return symtab[e];if(""===symtab[e].printname)break}return e===NSYM&&stop("symbol table overflow"),symtab[e]=new U,symtab[e].k=SYM,symtab[e].printname=t,binding[e]=symtab[e],isSymbolReclaimable[e]=!1,symtab[e]},get_printname=function(t){return t.k!==SYM&&stop("symbol error"),t.printname},set_binding=function(t,e){var r;return t.k!==SYM&&stop("symbol error"),r=symtab.indexOf(t),-1!==symtab.indexOf(t,r+1)&&console.log("ops, more than one element!"),DEBUG&&console.log("lookup >> set_binding lookup "+r),isSymbolReclaimable[r]=!1,binding[r]=e},get_binding=function(t){var e;return t.k!==SYM&&stop("symbol error"),e=symtab.indexOf(t),-1!==symtab.indexOf(t,e+1)&&console.log("ops, more than one element!"),DEBUG&&console.log("lookup >> get_binding lookup "+e),binding[e]},is_usr_symbol=function(t){var e;return t.k===SYM&&(e=symnum(t))>PI&&e!==SYMBOL_I&&e!==SYMBOL_IDENTITY_MATRIX},lookupsTotal=0,symnum=function(t){var e;return lookupsTotal++,t.k!==SYM&&stop("symbol error"),e=symtab.indexOf(t),-1!==symtab.indexOf(t,e+1)&&console.log("ops, more than one element!"),DEBUG&&console.log("lookup >> symnum lookup "+e+" lookup # "+lookupsTotal),e},push_symbol=function(t){return push(symtab[t])},clear_symbols=function(){var t,e,r,n,i;for(i=[],t=e=r=NIL+1,n=NSYM;r<=n?e<n:e>n;t=r<=n?++e:--e)if(""!==symtab[t].printname)symtab[t]=new U,symtab[t].k=SYM,binding[t]=symtab[t],i.push(isSymbolReclaimable[t]=!1);else if(!1===isSymbolReclaimable[t])break;return i},collectUserSymbols=function(t,e=[]){var r,n,i;if(is_usr_symbol(t)&&-1===e.indexOf(t))e.push(t);else if(istensor(t))for(r=n=0,i=t.tensor.nelem;0<=i?n<i:n>i;r=0<=i?++n:--n)collectUserSymbols(t.tensor.elem[r],e);else for(;iscons(t);)collectUserSymbols(car(t),e),t=cdr(t)},$.get_binding=get_binding,$.set_binding=set_binding,$.usr_symbol=usr_symbol,$.symbolsinfo=symbolsinfo,$.collectUserSymbols=collectUserSymbols,inited||(inited=!0,init()),$.init=init,parse_internal=function(t){return"string"==typeof t?scan(t):"number"==typeof t?t%1==0?push_integer(t):push_double(t):t instanceof U?push(t):(console.warn("unknown argument type",t),push(symbol(NIL)))},parse=function(t){var e,r;try{parse_internal(t),e=pop(),check_stack()}catch(t){throw r=t,reset_after_error(),r}return e},exec=function(t,...e){var r,n,i,s,o,a;for(i=get_binding(usr_symbol(t)),check_stack(),push(i),s=0,o=e.length;s<o;s++)r=e[s],parse_internal(r);list(1+e.length),p1=pop(),push(p1);try{top_level_eval(),a=pop(),check_stack()}catch(t){throw n=t,reset_after_error(),n}return a},$.exec=exec,$.parse=parse,function(){var t,e,r,n,i;for(i=[],r=0,n=(t=["abs","add","adj","and","approxratio","arccos","arccosh","arcsin","arcsinh","arctan","arctanh","arg","atomize","besselj","bessely","binding","binomial","ceiling","check","choose","circexp","clear","clearall","clearpatterns","clock","coeff","cofactor","condense","conj","contract","cos","cosh","decomp","defint","deg","denominator","det","derivative","dim","dirac","divisors","do","dot","draw","dsolve","eigen","eigenval","eigenvec","erf","erfc","eval","exp","expand","expcos","expsin","factor","factorial","factorpoly","filter","float","floor","for","Gamma","gcd","hermite","hilbert","imag","component","inner","integral","inv","invg","isinteger","isprime","laguerre","lcm","leading","legendre","log","mod","multiply","not","nroots","number","numerator","operator","or","outer","pattern","patternsinfo","polar","power","prime","print","print2dascii","printcomputer","printlatex","printlist","printhuman","product","quote","quotient","rank","rationalize","real","rect","roots","round","equals","shape","sgn","silentpattern","simplify","sin","sinh","sqrt","stop","subst","sum","symbolsinfo","tan","tanh","taylor","test","testeq","testge","testgt","testle","testlt","transpose","unit","zero"]).length;r<n;r++)e=t[r],i.push($[e]=exec.bind(this,e))}(),freeze=function(){var t,e,r,n,i;for(e=[],t=[],r=n=0,i=symtab.length;0<=i?n<i:n>i;r=0<=i?++n:--n)!1===isSymbolReclaimable[r]&&(e.push(symtab[r]),t.push(binding[r]));return[e,t,userSimplificationsInListForm.slice(0),zero,one,imaginaryunit,getStateHash()]},unfreeze=function(t){var e,r,n,i,s,o;for([n,e,r,zero,one,imaginaryunit]=t,i=s=0,o=n.length;0<=o?s<o:s>o;i=0<=o?++s:--s)symtab[i]=n[i],binding[i]=e[i];return userSimplificationsInListForm=r.slice(0)},compareState=function(t){return getStateHash()===t},getStateHash=function(){var t,e,r,n,i,s,o;for(t="",e=r=s=NIL+1,o=symtab.length;s<=o?r<o:r>o;e=s<=o?++r:--r)if(""!==symtab[e].printname)t+=" //"+print_list(symtab[e])+" : "+print_list(binding[e]);else if(!1===isSymbolReclaimable[e])break;for(i=0,n=userSimplificationsInListForm.length;i<n;i++)t+=" pattern: "+(e=userSimplificationsInListForm[i]);return DEBUG&&console.log("frozenHash: "+t),t}}).call(this)},9787:(t,e,r)=>{var n;t=r.nmd(t);var i=function(t){"use strict";var e=1e7,r=9007199254740992,n=h(r),s="0123456789abcdefghijklmnopqrstuvwxyz",o="function"==typeof BigInt;function a(t,e,r,n){return void 0===t?a[0]:void 0===e||10==+e&&!r?X(t):V(t,e,r,n)}function u(t,e){this.value=t,this.sign=e,this.isSmall=!1}function l(t){this.value=t,this.sign=t<0,this.isSmall=!0}function c(t){this.value=t}function p(t){return-r<t&&t<r}function h(t){return t<1e7?[t]:t<1e14?[t%1e7,Math.floor(t/1e7)]:[t%1e7,Math.floor(t/1e7)%1e7,Math.floor(t/1e14)]}function f(t){d(t);var r=t.length;if(r<4&&T(t,n)<0)switch(r){case 0:return 0;case 1:return t[0];case 2:return t[0]+t[1]*e;default:return t[0]+(t[1]+t[2]*e)*e}return t}function d(t){for(var e=t.length;0===t[--e];);t.length=e+1}function m(t){for(var e=new Array(t),r=-1;++r<t;)e[r]=0;return e}function g(t){return t>0?Math.floor(t):Math.ceil(t)}function y(t,r){var n,i,s=t.length,o=r.length,a=new Array(s),u=0,l=e;for(i=0;i<o;i++)u=(n=t[i]+r[i]+u)>=l?1:0,a[i]=n-u*l;for(;i<s;)u=(n=t[i]+u)===l?1:0,a[i++]=n-u*l;return u>0&&a.push(u),a}function v(t,e){return t.length>=e.length?y(t,e):y(e,t)}function b(t,r){var n,i,s=t.length,o=new Array(s),a=e;for(i=0;i<s;i++)n=t[i]-a+r,r=Math.floor(n/a),o[i]=n-r*a,r+=1;for(;r>0;)o[i++]=r%a,r=Math.floor(r/a);return o}function x(t,r){var n,i,s=t.length,o=r.length,a=new Array(s),u=0,l=e;for(n=0;n<o;n++)(i=t[n]-u-r[n])<0?(i+=l,u=1):u=0,a[n]=i;for(n=o;n<s;n++){if(!((i=t[n]-u)<0)){a[n++]=i;break}i+=l,a[n]=i}for(;n<s;n++)a[n]=t[n];return d(a),a}function _(t,r,n){var i,s,o=t.length,a=new Array(o),c=-r,p=e;for(i=0;i<o;i++)s=t[i]+c,c=Math.floor(s/p),s%=p,a[i]=s<0?s+p:s;return"number"==typeof(a=f(a))?(n&&(a=-a),new l(a)):new u(a,n)}function w(t,r){var n,i,s,o,a=t.length,u=r.length,l=m(a+u),c=e;for(s=0;s<a;++s){o=t[s];for(var p=0;p<u;++p)n=o*r[p]+l[s+p],i=Math.floor(n/c),l[s+p]=n-i*c,l[s+p+1]+=i}return d(l),l}function E(t,r){var n,i,s=t.length,o=new Array(s),a=e,u=0;for(i=0;i<s;i++)n=t[i]*r+u,u=Math.floor(n/a),o[i]=n-u*a;for(;u>0;)o[i++]=u%a,u=Math.floor(u/a);return o}function S(t,e){for(var r=[];e-- >0;)r.push(0);return r.concat(t)}function A(t,e){var r=Math.max(t.length,e.length);if(r<=30)return w(t,e);r=Math.ceil(r/2);var n=t.slice(r),i=t.slice(0,r),s=e.slice(r),o=e.slice(0,r),a=A(i,o),u=A(n,s),l=A(v(i,n),v(o,s)),c=v(v(a,S(x(x(l,a),u),r)),S(u,2*r));return d(c),c}function N(t,r,n){return new u(t<e?E(r,t):w(r,h(t)),n)}function M(t){var r,n,i,s,o=t.length,a=m(o+o),u=e;for(i=0;i<o;i++){n=0-(s=t[i])*s;for(var l=i;l<o;l++)r=s*t[l]*2+a[i+l]+n,n=Math.floor(r/u),a[i+l]=r-n*u;a[i+o]=n}return d(a),a}function k(t,e){var r,n,i,s,o=t.length,a=m(o);for(i=0,r=o-1;r>=0;--r)i=(s=1e7*i+t[r])-(n=g(s/e))*e,a[r]=0|n;return[a,0|i]}function C(t,r){var n,i=X(r);if(o)return[new c(t.value/i.value),new c(t.value%i.value)];var s,p=t.value,y=i.value;if(0===y)throw new Error("Cannot divide by zero");if(t.isSmall)return i.isSmall?[new l(g(p/y)),new l(p%y)]:[a[0],t];if(i.isSmall){if(1===y)return[t,a[0]];if(-1==y)return[t.negate(),a[0]];var v=Math.abs(y);if(v<e){s=f((n=k(p,v))[0]);var b=n[1];return t.sign&&(b=-b),"number"==typeof s?(t.sign!==i.sign&&(s=-s),[new l(s),new l(b)]):[new u(s,t.sign!==i.sign),new l(b)]}y=h(v)}var _=T(p,y);if(-1===_)return[a[0],t];if(0===_)return[a[t.sign===i.sign?1:-1],a[0]];s=(n=p.length+y.length<=200?function(t,r){var n,i,s,o,a,u,l,c=t.length,p=r.length,h=e,d=m(r.length),g=r[p-1],y=Math.ceil(h/(2*g)),v=E(t,y),b=E(r,y);for(v.length<=c&&v.push(0),b.push(0),g=b[p-1],i=c-p;i>=0;i--){for(n=h-1,v[i+p]!==g&&(n=Math.floor((v[i+p]*h+v[i+p-1])/g)),s=0,o=0,u=b.length,a=0;a<u;a++)s+=n*b[a],l=Math.floor(s/h),o+=v[i+a]-(s-l*h),s=l,o<0?(v[i+a]=o+h,o=-1):(v[i+a]=o,o=0);for(;0!==o;){for(n-=1,s=0,a=0;a<u;a++)(s+=v[i+a]-h+b[a])<0?(v[i+a]=s+h,s=0):(v[i+a]=s,s=1);o+=s}d[i]=n}return v=k(v,y)[0],[f(d),f(v)]}(p,y):function(t,r){for(var n,i,s,o,a,u=t.length,l=r.length,c=[],p=[],h=e;u;)if(p.unshift(t[--u]),d(p),T(p,r)<0)c.push(0);else{s=p[(i=p.length)-1]*h+p[i-2],o=r[l-1]*h+r[l-2],i>l&&(s=(s+1)*h),n=Math.ceil(s/o);do{if(T(a=E(r,n),p)<=0)break;n--}while(n);c.push(n),p=x(p,a)}return c.reverse(),[f(c),f(p)]}(p,y))[0];var w=t.sign!==i.sign,S=n[1],A=t.sign;return"number"==typeof s?(w&&(s=-s),s=new l(s)):s=new u(s,w),"number"==typeof S?(A&&(S=-S),S=new l(S)):S=new u(S,A),[s,S]}function T(t,e){if(t.length!==e.length)return t.length>e.length?1:-1;for(var r=t.length-1;r>=0;r--)if(t[r]!==e[r])return t[r]>e[r]?1:-1;return 0}function O(t){var e=t.abs();return!e.isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function I(t,e){for(var r,n,s,o=t.prev(),a=o,u=0;a.isEven();)a=a.divide(2),u++;t:for(n=0;n<e.length;n++)if(!t.lesser(e[n])&&!(s=i(e[n]).modPow(a,t)).isUnit()&&!s.equals(o)){for(r=u-1;0!=r;r--){if((s=s.square().mod(t)).isUnit())return!1;if(s.equals(o))continue t}return!1}return!0}u.prototype=Object.create(a.prototype),l.prototype=Object.create(a.prototype),c.prototype=Object.create(a.prototype),u.prototype.add=function(t){var e=X(t);if(this.sign!==e.sign)return this.subtract(e.negate());var r=this.value,n=e.value;return e.isSmall?new u(b(r,Math.abs(n)),this.sign):new u(v(r,n),this.sign)},u.prototype.plus=u.prototype.add,l.prototype.add=function(t){var e=X(t),r=this.value;if(r<0!==e.sign)return this.subtract(e.negate());var n=e.value;if(e.isSmall){if(p(r+n))return new l(r+n);n=h(Math.abs(n))}return new u(b(n,Math.abs(r)),r<0)},l.prototype.plus=l.prototype.add,c.prototype.add=function(t){return new c(this.value+X(t).value)},c.prototype.plus=c.prototype.add,u.prototype.subtract=function(t){var e=X(t);if(this.sign!==e.sign)return this.add(e.negate());var r=this.value,n=e.value;return e.isSmall?_(r,Math.abs(n),this.sign):function(t,e,r){var n;return T(t,e)>=0?n=x(t,e):(n=x(e,t),r=!r),"number"==typeof(n=f(n))?(r&&(n=-n),new l(n)):new u(n,r)}(r,n,this.sign)},u.prototype.minus=u.prototype.subtract,l.prototype.subtract=function(t){var e=X(t),r=this.value;if(r<0!==e.sign)return this.add(e.negate());var n=e.value;return e.isSmall?new l(r-n):_(n,Math.abs(r),r>=0)},l.prototype.minus=l.prototype.subtract,c.prototype.subtract=function(t){return new c(this.value-X(t).value)},c.prototype.minus=c.prototype.subtract,u.prototype.negate=function(){return new u(this.value,!this.sign)},l.prototype.negate=function(){var t=this.sign,e=new l(-this.value);return e.sign=!t,e},c.prototype.negate=function(){return new c(-this.value)},u.prototype.abs=function(){return new u(this.value,!1)},l.prototype.abs=function(){return new l(Math.abs(this.value))},c.prototype.abs=function(){return new c(this.value>=0?this.value:-this.value)},u.prototype.multiply=function(t){var r,n,i,s=X(t),o=this.value,l=s.value,c=this.sign!==s.sign;if(s.isSmall){if(0===l)return a[0];if(1===l)return this;if(-1===l)return this.negate();if((r=Math.abs(l))<e)return new u(E(o,r),c);l=h(r)}return new u(-.012*(n=o.length)-.012*(i=l.length)+15e-6*n*i>0?A(o,l):w(o,l),c)},u.prototype.times=u.prototype.multiply,l.prototype._multiplyBySmall=function(t){return p(t.value*this.value)?new l(t.value*this.value):N(Math.abs(t.value),h(Math.abs(this.value)),this.sign!==t.sign)},u.prototype._multiplyBySmall=function(t){return 0===t.value?a[0]:1===t.value?this:-1===t.value?this.negate():N(Math.abs(t.value),this.value,this.sign!==t.sign)},l.prototype.multiply=function(t){return X(t)._multiplyBySmall(this)},l.prototype.times=l.prototype.multiply,c.prototype.multiply=function(t){return new c(this.value*X(t).value)},c.prototype.times=c.prototype.multiply,u.prototype.square=function(){return new u(M(this.value),!1)},l.prototype.square=function(){var t=this.value*this.value;return p(t)?new l(t):new u(M(h(Math.abs(this.value))),!1)},c.prototype.square=function(t){return new c(this.value*this.value)},u.prototype.divmod=function(t){var e=C(this,t);return{quotient:e[0],remainder:e[1]}},c.prototype.divmod=l.prototype.divmod=u.prototype.divmod,u.prototype.divide=function(t){return C(this,t)[0]},c.prototype.over=c.prototype.divide=function(t){return new c(this.value/X(t).value)},l.prototype.over=l.prototype.divide=u.prototype.over=u.prototype.divide,u.prototype.mod=function(t){return C(this,t)[1]},c.prototype.mod=c.prototype.remainder=function(t){return new c(this.value%X(t).value)},l.prototype.remainder=l.prototype.mod=u.prototype.remainder=u.prototype.mod,u.prototype.pow=function(t){var e,r,n,i=X(t),s=this.value,o=i.value;if(0===o)return a[1];if(0===s)return a[0];if(1===s)return a[1];if(-1===s)return i.isEven()?a[1]:a[-1];if(i.sign)return a[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&p(e=Math.pow(s,o)))return new l(g(e));for(r=this,n=a[1];!0&o&&(n=n.times(r),--o),0!==o;)o/=2,r=r.square();return n},l.prototype.pow=u.prototype.pow,c.prototype.pow=function(t){var e=X(t),r=this.value,n=e.value,i=BigInt(0),s=BigInt(1),o=BigInt(2);if(n===i)return a[1];if(r===i)return a[0];if(r===s)return a[1];if(r===BigInt(-1))return e.isEven()?a[1]:a[-1];if(e.isNegative())return new c(i);for(var u=this,l=a[1];(n&s)===s&&(l=l.times(u),--n),n!==i;)n/=o,u=u.square();return l},u.prototype.modPow=function(t,e){if(t=X(t),(e=X(e)).isZero())throw new Error("Cannot take modPow with modulus 0");var r=a[1],n=this.mod(e);for(t.isNegative()&&(t=t.multiply(a[-1]),n=n.modInv(e));t.isPositive();){if(n.isZero())return a[0];t.isOdd()&&(r=r.multiply(n).mod(e)),t=t.divide(2),n=n.square().mod(e)}return r},c.prototype.modPow=l.prototype.modPow=u.prototype.modPow,u.prototype.compareAbs=function(t){var e=X(t),r=this.value,n=e.value;return e.isSmall?1:T(r,n)},l.prototype.compareAbs=function(t){var e=X(t),r=Math.abs(this.value),n=e.value;return e.isSmall?r===(n=Math.abs(n))?0:r>n?1:-1:-1},c.prototype.compareAbs=function(t){var e=this.value,r=X(t).value;return(e=e>=0?e:-e)===(r=r>=0?r:-r)?0:e>r?1:-1},u.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=X(t),r=this.value,n=e.value;return this.sign!==e.sign?e.sign?1:-1:e.isSmall?this.sign?-1:1:T(r,n)*(this.sign?-1:1)},u.prototype.compareTo=u.prototype.compare,l.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=X(t),r=this.value,n=e.value;return e.isSmall?r==n?0:r>n?1:-1:r<0!==e.sign?r<0?-1:1:r<0?1:-1},l.prototype.compareTo=l.prototype.compare,c.prototype.compare=function(t){if(t===1/0)return-1;if(t===-1/0)return 1;var e=this.value,r=X(t).value;return e===r?0:e>r?1:-1},c.prototype.compareTo=c.prototype.compare,u.prototype.equals=function(t){return 0===this.compare(t)},c.prototype.eq=c.prototype.equals=l.prototype.eq=l.prototype.equals=u.prototype.eq=u.prototype.equals,u.prototype.notEquals=function(t){return 0!==this.compare(t)},c.prototype.neq=c.prototype.notEquals=l.prototype.neq=l.prototype.notEquals=u.prototype.neq=u.prototype.notEquals,u.prototype.greater=function(t){return this.compare(t)>0},c.prototype.gt=c.prototype.greater=l.prototype.gt=l.prototype.greater=u.prototype.gt=u.prototype.greater,u.prototype.lesser=function(t){return this.compare(t)<0},c.prototype.lt=c.prototype.lesser=l.prototype.lt=l.prototype.lesser=u.prototype.lt=u.prototype.lesser,u.prototype.greaterOrEquals=function(t){return this.compare(t)>=0},c.prototype.geq=c.prototype.greaterOrEquals=l.prototype.geq=l.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals,u.prototype.lesserOrEquals=function(t){return this.compare(t)<=0},c.prototype.leq=c.prototype.lesserOrEquals=l.prototype.leq=l.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals,u.prototype.isEven=function(){return 0==(1&this.value[0])},l.prototype.isEven=function(){return 0==(1&this.value)},c.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},u.prototype.isOdd=function(){return 1==(1&this.value[0])},l.prototype.isOdd=function(){return 1==(1&this.value)},c.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},u.prototype.isPositive=function(){return!this.sign},l.prototype.isPositive=function(){return this.value>0},c.prototype.isPositive=l.prototype.isPositive,u.prototype.isNegative=function(){return this.sign},l.prototype.isNegative=function(){return this.value<0},c.prototype.isNegative=l.prototype.isNegative,u.prototype.isUnit=function(){return!1},l.prototype.isUnit=function(){return 1===Math.abs(this.value)},c.prototype.isUnit=function(){return this.abs().value===BigInt(1)},u.prototype.isZero=function(){return!1},l.prototype.isZero=function(){return 0===this.value},c.prototype.isZero=function(){return this.value===BigInt(0)},u.prototype.isDivisibleBy=function(t){var e=X(t);return!e.isZero()&&(!!e.isUnit()||(0===e.compareAbs(2)?this.isEven():this.mod(e).isZero()))},c.prototype.isDivisibleBy=l.prototype.isDivisibleBy=u.prototype.isDivisibleBy,u.prototype.isPrime=function(e){var r=O(this);if(r!==t)return r;var n=this.abs(),s=n.bitLength();if(s<=64)return I(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var o=Math.log(2)*s.toJSNumber(),a=Math.ceil(!0===e?2*Math.pow(o,2):o),u=[],l=0;l<a;l++)u.push(i(l+2));return I(n,u)},c.prototype.isPrime=l.prototype.isPrime=u.prototype.isPrime,u.prototype.isProbablePrime=function(e,r){var n=O(this);if(n!==t)return n;for(var s=this.abs(),o=e===t?5:e,a=[],u=0;u<o;u++)a.push(i.randBetween(2,s.minus(2),r));return I(s,a)},c.prototype.isProbablePrime=l.prototype.isProbablePrime=u.prototype.isProbablePrime,u.prototype.modInv=function(t){for(var e,r,n,s=i.zero,o=i.one,a=X(t),u=this.abs();!u.isZero();)e=a.divide(u),r=s,n=a,s=o,a=u,o=r.subtract(e.multiply(o)),u=n.subtract(e.multiply(u));if(!a.isUnit())throw new Error(this.toString()+" and "+t.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(t)),this.isNegative()?s.negate():s},c.prototype.modInv=l.prototype.modInv=u.prototype.modInv,u.prototype.next=function(){var t=this.value;return this.sign?_(t,1,this.sign):new u(b(t,1),this.sign)},l.prototype.next=function(){var t=this.value;return t+1<r?new l(t+1):new u(n,!1)},c.prototype.next=function(){return new c(this.value+BigInt(1))},u.prototype.prev=function(){var t=this.value;return this.sign?new u(b(t,1),!0):_(t,1,this.sign)},l.prototype.prev=function(){var t=this.value;return t-1>-r?new l(t-1):new u(n,!0)},c.prototype.prev=function(){return new c(this.value-BigInt(1))};for(var P=[1];2*P[P.length-1]<=e;)P.push(2*P[P.length-1]);var R=P.length,L=P[R-1];function D(t){return Math.abs(t)<=e}function q(t,e,r){e=X(e);for(var n=t.isNegative(),s=e.isNegative(),o=n?t.not():t,a=s?e.not():e,u=0,l=0,c=null,p=null,h=[];!o.isZero()||!a.isZero();)u=(c=C(o,L))[1].toJSNumber(),n&&(u=L-1-u),l=(p=C(a,L))[1].toJSNumber(),s&&(l=L-1-l),o=c[0],a=p[0],h.push(r(u,l));for(var f=0!==r(n?1:0,s?1:0)?i(-1):i(0),d=h.length-1;d>=0;d-=1)f=f.multiply(L).add(i(h[d]));return f}u.prototype.shiftLeft=function(t){var e=X(t).toJSNumber();if(!D(e))throw new Error(String(e)+" is too large for shifting.");if(e<0)return this.shiftRight(-e);var r=this;if(r.isZero())return r;for(;e>=R;)r=r.multiply(L),e-=R-1;return r.multiply(P[e])},c.prototype.shiftLeft=l.prototype.shiftLeft=u.prototype.shiftLeft,u.prototype.shiftRight=function(t){var e,r=X(t).toJSNumber();if(!D(r))throw new Error(String(r)+" is too large for shifting.");if(r<0)return this.shiftLeft(-r);for(var n=this;r>=R;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(e=C(n,L))[1].isNegative()?e[0].prev():e[0],r-=R-1}return(e=C(n,P[r]))[1].isNegative()?e[0].prev():e[0]},c.prototype.shiftRight=l.prototype.shiftRight=u.prototype.shiftRight,u.prototype.not=function(){return this.negate().prev()},c.prototype.not=l.prototype.not=u.prototype.not,u.prototype.and=function(t){return q(this,t,(function(t,e){return t&e}))},c.prototype.and=l.prototype.and=u.prototype.and,u.prototype.or=function(t){return q(this,t,(function(t,e){return t|e}))},c.prototype.or=l.prototype.or=u.prototype.or,u.prototype.xor=function(t){return q(this,t,(function(t,e){return t^e}))},c.prototype.xor=l.prototype.xor=u.prototype.xor;var B=1<<30;function U(t){var r=t.value,n="number"==typeof r?r|B:"bigint"==typeof r?r|BigInt(B):r[0]+r[1]*e|1073758208;return n&-n}function $(t,e){if(e.compareTo(t)<=0){var r=$(t,e.square(e)),n=r.p,s=r.e,o=n.multiply(e);return o.compareTo(t)<=0?{p:o,e:2*s+1}:{p:n,e:2*s}}return{p:i(1),e:0}}function z(t,e){return t=X(t),e=X(e),t.greater(e)?t:e}function F(t,e){return t=X(t),e=X(e),t.lesser(e)?t:e}function G(t,e){if(t=X(t).abs(),e=X(e).abs(),t.equals(e))return t;if(t.isZero())return e;if(e.isZero())return t;for(var r,n,i=a[1];t.isEven()&&e.isEven();)r=F(U(t),U(e)),t=t.divide(r),e=e.divide(r),i=i.multiply(r);for(;t.isEven();)t=t.divide(U(t));do{for(;e.isEven();)e=e.divide(U(e));t.greater(e)&&(n=e,e=t,t=n),e=e.subtract(t)}while(!e.isZero());return i.isUnit()?t:t.multiply(i)}u.prototype.bitLength=function(){var t=this;return t.compareTo(i(0))<0&&(t=t.negate().subtract(i(1))),0===t.compareTo(i(0))?i(0):i($(t,i(2)).e).add(i(1))},c.prototype.bitLength=l.prototype.bitLength=u.prototype.bitLength;var V=function(t,e,r,n){r=r||s,t=String(t),n||(t=t.toLowerCase(),r=r.toLowerCase());var i,o=t.length,a=Math.abs(e),u={};for(i=0;i<r.length;i++)u[r[i]]=i;for(i=0;i<o;i++)if("-"!==(p=t[i])&&p in u&&u[p]>=a){if("1"===p&&1===a)continue;throw new Error(p+" is not a valid digit in base "+e+".")}e=X(e);var l=[],c="-"===t[0];for(i=c?1:0;i<t.length;i++){var p;if((p=t[i])in u)l.push(X(u[p]));else{if("<"!==p)throw new Error(p+" is not a valid character");var h=i;do{i++}while(">"!==t[i]&&i<t.length);l.push(X(t.slice(h+1,i)))}}return j(l,e,c)};function j(t,e,r){var n,i=a[0],s=a[1];for(n=t.length-1;n>=0;n--)i=i.add(t[n].times(s)),s=s.times(e);return r?i.negate():i}function H(t,e){if((e=i(e)).isZero()){if(t.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(e.equals(-1)){if(t.isZero())return{value:[0],isNegative:!1};if(t.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-t.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(t.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(t.isNegative()&&e.isPositive()&&(n=!0,t=t.abs()),e.isUnit())return t.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(t.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:n};for(var s,o=[],a=t;a.isNegative()||a.compareAbs(e)>=0;){s=a.divmod(e),a=s.quotient;var u=s.remainder;u.isNegative()&&(u=e.minus(u).abs(),a=a.next()),o.push(u.toJSNumber())}return o.push(a.toJSNumber()),{value:o.reverse(),isNegative:n}}function W(t,e,r){var n=H(t,e);return(n.isNegative?"-":"")+n.value.map((function(t){return function(t,e){return t<(e=e||s).length?e[t]:"<"+t+">"}(t,r)})).join("")}function Y(t){if(p(+t)){var e=+t;if(e===g(e))return o?new c(BigInt(e)):new l(e);throw new Error("Invalid integer: "+t)}var r="-"===t[0];r&&(t=t.slice(1));var n=t.split(/e/i);if(n.length>2)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==g(i)||!p(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var s=n[0],a=s.indexOf(".");if(a>=0&&(i-=s.length-a-1,s=s.slice(0,a)+s.slice(a+1)),i<0)throw new Error("Cannot include negative exponent part for integers");t=s+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(t))throw new Error("Invalid integer: "+t);if(o)return new c(BigInt(r?"-"+t:t));for(var h=[],f=t.length,m=f-7;f>0;)h.push(+t.slice(m,f)),(m-=7)<0&&(m=0),f-=7;return d(h),new u(h,r)}function X(t){return"number"==typeof t?function(t){if(o)return new c(BigInt(t));if(p(t)){if(t!==g(t))throw new Error(t+" is not an integer.");return new l(t)}return Y(t.toString())}(t):"string"==typeof t?Y(t):"bigint"==typeof t?new c(t):t}u.prototype.toArray=function(t){return H(this,t)},l.prototype.toArray=function(t){return H(this,t)},c.prototype.toArray=function(t){return H(this,t)},u.prototype.toString=function(e,r){if(e===t&&(e=10),10!==e)return W(this,e,r);for(var n,i=this.value,s=i.length,o=String(i[--s]);--s>=0;)n=String(i[s]),o+="0000000".slice(n.length)+n;return(this.sign?"-":"")+o},l.prototype.toString=function(e,r){return e===t&&(e=10),10!=e?W(this,e,r):String(this.value)},c.prototype.toString=l.prototype.toString,c.prototype.toJSON=u.prototype.toJSON=l.prototype.toJSON=function(){return this.toString()},u.prototype.valueOf=function(){return parseInt(this.toString(),10)},u.prototype.toJSNumber=u.prototype.valueOf,l.prototype.valueOf=function(){return this.value},l.prototype.toJSNumber=l.prototype.valueOf,c.prototype.valueOf=c.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var Z=0;Z<1e3;Z++)a[Z]=X(Z),Z>0&&(a[-Z]=X(-Z));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=z,a.min=F,a.gcd=G,a.lcm=function(t,e){return t=X(t).abs(),e=X(e).abs(),t.divide(G(t,e)).multiply(e)},a.isInstance=function(t){return t instanceof u||t instanceof l||t instanceof c},a.randBetween=function(t,r,n){t=X(t),r=X(r);var i=n||Math.random,s=F(t,r),o=z(t,r).subtract(s).add(1);if(o.isSmall)return s.add(Math.floor(i()*o));for(var u=H(o,e).value,l=[],c=!0,p=0;p<u.length;p++){var h=c?u[p]:e,f=g(i()*h);l.push(f),f<h&&(c=!1)}return s.add(a.fromArray(l,e,!1))},a.fromArray=function(t,e,r){return j(t.map(X),X(e||10),r)},a}();t.hasOwnProperty("exports")&&(t.exports=i),void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n)},53582:(t,e,r)=>{!function(t){var e={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},r=t.Pos;function n(t,r){return"pairs"==r&&"string"==typeof t?t:"object"==typeof t&&null!=t[r]?t[r]:e[r]}t.defineOption("autoCloseBrackets",!1,(function(e,r,o){o&&o!=t.Init&&(e.removeKeyMap(i),e.state.closeBrackets=null),r&&(s(n(r,"pairs")),e.state.closeBrackets=r,e.addKeyMap(i))}));var i={Backspace:function(e){var i=a(e);if(!i||e.getOption("disableInput"))return t.Pass;for(var s=n(i,"pairs"),o=e.listSelections(),u=0;u<o.length;u++){if(!o[u].empty())return t.Pass;var l=c(e,o[u].head);if(!l||s.indexOf(l)%2!=0)return t.Pass}for(u=o.length-1;u>=0;u--){var p=o[u].head;e.replaceRange("",r(p.line,p.ch-1),r(p.line,p.ch+1),"+delete")}},Enter:function(e){var r=a(e),i=r&&n(r,"explode");if(!i||e.getOption("disableInput"))return t.Pass;for(var s=e.listSelections(),o=0;o<s.length;o++){if(!s[o].empty())return t.Pass;var l=c(e,s[o].head);if(!l||i.indexOf(l)%2!=0)return t.Pass}e.operation((function(){var t=e.lineSeparator()||"\n";e.replaceSelection(t+t,null),u(e,-1),s=e.listSelections();for(var r=0;r<s.length;r++){var n=s[r].head.line;e.indentLine(n,null,!0),e.indentLine(n+1,null,!0)}}))}};function s(t){for(var e=0;e<t.length;e++){var r=t.charAt(e),n="'"+r+"'";i[n]||(i[n]=o(r))}}function o(e){return function(i){return function(e,i){var s=a(e);if(!s||e.getOption("disableInput"))return t.Pass;var o=n(s,"pairs"),c=o.indexOf(i);if(-1==c)return t.Pass;for(var h,f=n(s,"closeBefore"),d=n(s,"triples"),m=o.charAt(c+1)==i,g=e.listSelections(),y=c%2==0,v=0;v<g.length;v++){var b,x=g[v],_=x.head,w=e.getRange(_,r(_.line,_.ch+1));if(y&&!x.empty())b="surround";else if(!m&&y||w!=i)if(m&&_.ch>1&&d.indexOf(i)>=0&&e.getRange(r(_.line,_.ch-2),_)==i+i){if(_.ch>2&&/\bstring/.test(e.getTokenTypeAt(r(_.line,_.ch-2))))return t.Pass;b="addFour"}else if(m){var E=0==_.ch?" ":e.getRange(r(_.line,_.ch-1),_);if(t.isWordChar(w)||E==i||t.isWordChar(E))return t.Pass;b="both"}else{if(!y||!(0===w.length||/\s/.test(w)||f.indexOf(w)>-1))return t.Pass;b="both"}else b=m&&p(e,_)?"both":d.indexOf(i)>=0&&e.getRange(_,r(_.line,_.ch+3))==i+i+i?"skipThree":"skip";if(h){if(h!=b)return t.Pass}else h=b}var S=c%2?o.charAt(c-1):i,A=c%2?i:o.charAt(c+1);e.operation((function(){if("skip"==h)u(e,1);else if("skipThree"==h)u(e,3);else if("surround"==h){for(var t=e.getSelections(),r=0;r<t.length;r++)t[r]=S+t[r]+A;for(e.replaceSelections(t,"around"),t=e.listSelections().slice(),r=0;r<t.length;r++)t[r]=l(t[r]);e.setSelections(t)}else"both"==h?(e.replaceSelection(S+A,null),e.triggerElectric(S+A),u(e,-1)):"addFour"==h&&(e.replaceSelection(S+S+S+S,"before"),u(e,1))}))}(i,e)}}function a(t){var e=t.state.closeBrackets;return!e||e.override?e:t.getModeAt(t.getCursor()).closeBrackets||e}function u(t,e){for(var r=[],n=t.listSelections(),i=0,s=0;s<n.length;s++){var o=n[s];o.head==t.getCursor()&&(i=s);var a=o.head.ch||e>0?{line:o.head.line,ch:o.head.ch+e}:{line:o.head.line-1};r.push({anchor:a,head:a})}t.setSelections(r,i)}function l(e){var n=t.cmpPos(e.anchor,e.head)>0;return{anchor:new r(e.anchor.line,e.anchor.ch+(n?-1:1)),head:new r(e.head.line,e.head.ch+(n?1:-1))}}function c(t,e){var n=t.getRange(r(e.line,e.ch-1),r(e.line,e.ch+1));return 2==n.length?n:null}function p(t,e){var n=t.getTokenAt(r(e.line,e.ch+1));return/\bstring/.test(n.type)&&n.start==e.ch&&(0==e.ch||!/\bstring/.test(t.getTokenTypeAt(e)))}s(e.pairs+"`")}(r(53791))},92052:(t,e,r)=>{!function(t){var e=t.Pos;function r(t,e){for(var r=0,n=t.length;r<n;++r)e(t[r])}function n(r,n,i,s){var o=r.getCursor(),a=i(r,o);if(!/\b(?:string|comment)\b/.test(a.type)){var u=t.innerMode(r.getMode(),a.state);if("json"!==u.mode.helperType){a.state=u.state,/^[\w$_]*$/.test(a.string)?a.end>o.ch&&(a.end=o.ch,a.string=a.string.slice(0,o.ch-a.start)):a={start:o.ch,end:o.ch,string:"",state:a.state,type:"."==a.string?"property":null};for(var l=a;"property"==l.type;){if("."!=(l=i(r,e(o.line,l.start))).string)return;if(l=i(r,e(o.line,l.start)),!p)var p=[];p.push(l)}return{list:c(a,p,n,s),from:e(o.line,a.start),to:e(o.line,a.end)}}}}function i(t,e){var r=t.getTokenAt(e);return e.ch==r.start+1&&"."==r.string.charAt(0)?(r.end=r.start,r.string=".",r.type="property"):/^\.[\w$_]*$/.test(r.string)&&(r.type="property",r.start++,r.string=r.string.replace(/\./,"")),r}t.registerHelper("hint","javascript",(function(t,e){return n(t,u,(function(t,e){return t.getTokenAt(e)}),e)})),t.registerHelper("hint","coffeescript",(function(t,e){return n(t,l,i,e)}));var s="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),o="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),a="prototype apply call bind".split(" "),u="break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield".split(" "),l="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ");function c(t,e,n,i){var u=[],l=t.string,c=i&&i.globalScope||window;function p(t){0!=t.lastIndexOf(l,0)||function(t,e){if(!Array.prototype.indexOf){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}return-1!=t.indexOf(e)}(u,t)||u.push(t)}function h(t){"string"==typeof t?r(s,p):t instanceof Array?r(o,p):t instanceof Function&&r(a,p),function(t,e){if(Object.getOwnPropertyNames&&Object.getPrototypeOf)for(var r=t;r;r=Object.getPrototypeOf(r))Object.getOwnPropertyNames(r).forEach(e);else for(var n in t)e(n)}(t,p)}if(e&&e.length){var f,d=e.pop();for(d.type&&0===d.type.indexOf("variable")?(i&&i.additionalContext&&(f=i.additionalContext[d.string]),i&&!1===i.useGlobalScope||(f=f||c[d.string])):"string"==d.type?f="":"atom"==d.type?f=1:"function"==d.type&&(null==c.jQuery||"$"!=d.string&&"jQuery"!=d.string||"function"!=typeof c.jQuery?null!=c._&&"_"==d.string&&"function"==typeof c._&&(f=c._()):f=c.jQuery());null!=f&&e.length;)f=f[e.pop().string];null!=f&&h(f)}else{for(var m=t.state.localVars;m;m=m.next)p(m.name);for(var g=t.state.context;g;g=g.prev)for(m=g.vars;m;m=m.next)p(m.name);for(m=t.state.globalVars;m;m=m.next)p(m.name);if(i&&null!=i.additionalContext)for(var y in i.additionalContext)p(y);i&&!1===i.useGlobalScope||h(c),r(n,p)}return u}}(r(53791))},32407:(t,e,r)=>{!function(t){"use strict";function e(t,e){if(this.cm=t,this.options=e,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var r=this;t.on("cursorActivity",this.activityFunc=function(){r.cursorActivity()})}}t.showHint=function(t,e,r){if(!e)return t.showHint(r);r&&r.async&&(e.async=!0);var n={hint:e};if(r)for(var i in r)n[i]=r[i];return t.showHint(n)},t.defineExtension("showHint",(function(r){r=function(t,e,r){var n=t.options.hintOptions,i={};for(var s in u)i[s]=u[s];if(n)for(var s in n)void 0!==n[s]&&(i[s]=n[s]);if(r)for(var s in r)void 0!==r[s]&&(i[s]=r[s]);return i.hint.resolve&&(i.hint=i.hint.resolve(t,e)),i}(this,this.getCursor("start"),r);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!r.hint.supportsSelection)return;for(var i=0;i<n.length;i++)if(n[i].head.line!=n[i].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var s=this.state.completionActive=new e(this,r);s.options.hint&&(t.signal(this,"startCompletion",this),s.update(!0))}})),t.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var r=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},n=window.cancelAnimationFrame||clearTimeout;function i(t){return"string"==typeof t?t:t.text}function s(t,e){for(;e&&e!=t;){if("LI"===e.nodeName.toUpperCase()&&e.parentNode==t)return e;e=e.parentNode}}function o(e,r){this.completion=e,this.data=r,this.picked=!1;var n=this,o=e.cm,a=o.getInputField().ownerDocument,u=a.defaultView||a.parentWindow,l=this.hints=a.createElement("ul"),c=e.cm.options.theme;l.className="CodeMirror-hints "+c,this.selectedHint=r.selectedHint||0;for(var p=r.list,h=0;h<p.length;++h){var f=l.appendChild(a.createElement("li")),d=p[h],m="CodeMirror-hint"+(h!=this.selectedHint?"":" CodeMirror-hint-active");null!=d.className&&(m=d.className+" "+m),f.className=m,d.render?d.render(f,r,d):f.appendChild(a.createTextNode(d.displayText||i(d))),f.hintId=h}var g=e.options.container||a.body,y=o.cursorCoords(e.options.alignWithWord?r.from:null),v=y.left,b=y.bottom,x=!0,_=0,w=0;if(g!==a.body){var E=-1!==["absolute","relative","fixed"].indexOf(u.getComputedStyle(g).position)?g:g.offsetParent,S=E.getBoundingClientRect(),A=a.body.getBoundingClientRect();_=S.left-A.left-E.scrollLeft,w=S.top-A.top-E.scrollTop}l.style.left=v-_+"px",l.style.top=b-w+"px";var N=u.innerWidth||Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),M=u.innerHeight||Math.max(a.body.offsetHeight,a.documentElement.offsetHeight);g.appendChild(l);var k,C=e.options.moveOnOverlap?l.getBoundingClientRect():new DOMRect,T=!!e.options.paddingForScrollbar&&l.scrollHeight>l.clientHeight+1;if(setTimeout((function(){k=o.getScrollInfo()})),C.bottom-M>0){var O=C.bottom-C.top;if(y.top-(y.bottom-C.top)-O>0)l.style.top=(b=y.top-O-w)+"px",x=!1;else if(O>M){l.style.height=M-5+"px",l.style.top=(b=y.bottom-C.top-w)+"px";var I=o.getCursor();r.from.ch!=I.ch&&(y=o.cursorCoords(I),l.style.left=(v=y.left-_)+"px",C=l.getBoundingClientRect())}}var P,R=C.right-N;if(T&&(R+=o.display.nativeBarWidth),R>0&&(C.right-C.left>N&&(l.style.width=N-5+"px",R-=C.right-C.left-N),l.style.left=(v=y.left-R-_)+"px"),T)for(var L=l.firstChild;L;L=L.nextSibling)L.style.paddingRight=o.display.nativeBarWidth+"px";o.addKeyMap(this.keyMap=function(t,e){var r={Up:function(){e.moveFocus(-1)},Down:function(){e.moveFocus(1)},PageUp:function(){e.moveFocus(1-e.menuSize(),!0)},PageDown:function(){e.moveFocus(e.menuSize()-1,!0)},Home:function(){e.setFocus(0)},End:function(){e.setFocus(e.length-1)},Enter:e.pick,Tab:e.pick,Esc:e.close};/Mac/.test(navigator.platform)&&(r["Ctrl-P"]=function(){e.moveFocus(-1)},r["Ctrl-N"]=function(){e.moveFocus(1)});var n=t.options.customKeys,i=n?{}:r;function s(t,n){var s;s="string"!=typeof n?function(t){return n(t,e)}:r.hasOwnProperty(n)?r[n]:n,i[t]=s}if(n)for(var o in n)n.hasOwnProperty(o)&&s(o,n[o]);var a=t.options.extraKeys;if(a)for(var o in a)a.hasOwnProperty(o)&&s(o,a[o]);return i}(e,{moveFocus:function(t,e){n.changeActive(n.selectedHint+t,e)},setFocus:function(t){n.changeActive(t)},menuSize:function(){return n.screenAmount()},length:p.length,close:function(){e.close()},pick:function(){n.pick()},data:r})),e.options.closeOnUnfocus&&(o.on("blur",this.onBlur=function(){P=setTimeout((function(){e.close()}),100)}),o.on("focus",this.onFocus=function(){clearTimeout(P)})),o.on("scroll",this.onScroll=function(){var t=o.getScrollInfo(),r=o.getWrapperElement().getBoundingClientRect();k||(k=o.getScrollInfo());var n=b+k.top-t.top,i=n-(u.pageYOffset||(a.documentElement||a.body).scrollTop);if(x||(i+=l.offsetHeight),i<=r.top||i>=r.bottom)return e.close();l.style.top=n+"px",l.style.left=v+k.left-t.left+"px"}),t.on(l,"dblclick",(function(t){var e=s(l,t.target||t.srcElement);e&&null!=e.hintId&&(n.changeActive(e.hintId),n.pick())})),t.on(l,"click",(function(t){var r=s(l,t.target||t.srcElement);r&&null!=r.hintId&&(n.changeActive(r.hintId),e.options.completeOnSingleClick&&n.pick())})),t.on(l,"mousedown",(function(){setTimeout((function(){o.focus()}),20)}));var D=this.getSelectedHintRange();return 0===D.from&&0===D.to||this.scrollToActive(),t.signal(r,"select",p[this.selectedHint],l.childNodes[this.selectedHint]),!0}function a(t,e,r,n){if(t.async)t(e,n,r);else{var i=t(e,r);i&&i.then?i.then(n):n(i)}}e.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&t.signal(this.data,"close"),this.widget&&this.widget.close(),t.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(e,r){var n=e.list[r],s=this;this.cm.operation((function(){n.hint?n.hint(s.cm,e,n):s.cm.replaceRange(i(n),n.from||e.from,n.to||e.to,"complete"),t.signal(e,"pick",n),s.cm.scrollIntoView()})),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(n(this.debounce),this.debounce=0);var t=this.startPos;this.data&&(t=this.data.from);var e=this.cm.getCursor(),i=this.cm.getLine(e.line);if(e.line!=this.startPos.line||i.length-e.ch!=this.startLen-this.startPos.ch||e.ch<t.ch||this.cm.somethingSelected()||!e.ch||this.options.closeCharacters.test(i.charAt(e.ch-1)))this.close();else{var s=this;this.debounce=r((function(){s.update()})),this.widget&&this.widget.disable()}},update:function(t){if(null!=this.tick){var e=this,r=++this.tick;a(this.options.hint,this.cm,this.options,(function(n){e.tick==r&&e.finishUpdate(n,t)}))}},finishUpdate:function(e,r){this.data&&t.signal(this.data,"update");var n=this.widget&&this.widget.picked||r&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(n&&1==e.list.length?this.pick(e,0):(this.widget=new o(this,e),t.signal(e,"shown")))}},o.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var t=this.completion.cm;this.completion.options.closeOnUnfocus&&(t.off("blur",this.onBlur),t.off("focus",this.onFocus)),t.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var t=this;this.keyMap={Enter:function(){t.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(e,r){if(e>=this.data.list.length?e=r?this.data.list.length-1:0:e<0&&(e=r?0:this.data.list.length-1),this.selectedHint!=e){var n=this.hints.childNodes[this.selectedHint];n&&(n.className=n.className.replace(" CodeMirror-hint-active","")),(n=this.hints.childNodes[this.selectedHint=e]).className+=" CodeMirror-hint-active",this.scrollToActive(),t.signal(this.data,"select",this.data.list[this.selectedHint],n)}},scrollToActive:function(){var t=this.getSelectedHintRange(),e=this.hints.childNodes[t.from],r=this.hints.childNodes[t.to],n=this.hints.firstChild;e.offsetTop<this.hints.scrollTop?this.hints.scrollTop=e.offsetTop-n.offsetTop:r.offsetTop+r.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=r.offsetTop+r.offsetHeight-this.hints.clientHeight+n.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var t=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-t),to:Math.min(this.data.list.length-1,this.selectedHint+t)}}},t.registerHelper("hint","auto",{resolve:function(e,r){var n,i=e.getHelpers(r,"hint");if(i.length){var s=function(t,e,r){var n=function(t,e){if(!t.somethingSelected())return e;for(var r=[],n=0;n<e.length;n++)e[n].supportsSelection&&r.push(e[n]);return r}(t,i);!function i(s){if(s==n.length)return e(null);a(n[s],t,r,(function(t){t&&t.list.length>0?e(t):i(s+1)}))}(0)};return s.async=!0,s.supportsSelection=!0,s}return(n=e.getHelper(e.getCursor(),"hintWords"))?function(e){return t.hint.fromList(e,{words:n})}:t.hint.anyword?function(e,r){return t.hint.anyword(e,r)}:function(){}}}),t.registerHelper("hint","fromList",(function(e,r){var n,i=e.getCursor(),s=e.getTokenAt(i),o=t.Pos(i.line,s.start),a=i;s.start<i.ch&&/\w/.test(s.string.charAt(i.ch-s.start-1))?n=s.string.substr(0,i.ch-s.start):(n="",o=i);for(var u=[],l=0;l<r.words.length;l++){var c=r.words[l];c.slice(0,n.length)==n&&u.push(c)}if(u.length)return{list:u,from:o,to:a}})),t.commands.autocomplete=t.showHint;var u={hint:t.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};t.defineOption("hintOptions",null)}(r(53791))},53791:function(t){t.exports=function(){"use strict";var t=navigator.userAgent,e=navigator.platform,r=/gecko\/\d/i.test(t),n=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),s=/Edge\/(\d+)/.exec(t),o=n||i||s,a=o&&(n?document.documentMode||6:+(s||i)[1]),u=!s&&/WebKit\//.test(t),l=u&&/Qt\/\d+\.\d+/.test(t),c=!s&&/Chrome\//.test(t),p=/Opera\//.test(t),h=/Apple Computer/.test(navigator.vendor),f=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),d=/PhantomJS/.test(t),m=h&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),g=/Android/.test(t),y=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),v=m||/Mac/.test(e),b=/\bCrOS\b/.test(t),x=/win/i.test(e),_=p&&t.match(/Version\/(\d*\.\d*)/);_&&(_=Number(_[1])),_&&_>=15&&(p=!1,u=!0);var w=v&&(l||p&&(null==_||_<12.11)),E=r||o&&a>=9;function S(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var A,N=function(t,e){var r=t.className,n=S(e).exec(r);if(n){var i=r.slice(n.index+n[0].length);t.className=r.slice(0,n.index)+(i?n[1]+i:"")}};function M(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function k(t,e){return M(t).appendChild(e)}function C(t,e,r,n){var i=document.createElement(t);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var s=0;s<e.length;++s)i.appendChild(e[s]);return i}function T(t,e,r,n){var i=C(t,e,r,n);return i.setAttribute("role","presentation"),i}function O(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function I(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function P(t,e){var r=t.className;S(e).test(r)||(t.className+=(r?" ":"")+e)}function R(t,e){for(var r=t.split(" "),n=0;n<r.length;n++)r[n]&&!S(r[n]).test(e)&&(e+=" "+r[n]);return e}A=document.createRange?function(t,e,r,n){var i=document.createRange();return i.setEnd(n||t,r),i.setStart(t,e),i}:function(t,e,r){var n=document.body.createTextRange();try{n.moveToElementText(t.parentNode)}catch(t){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",e),n};var L=function(t){t.select()};function D(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function q(t,e,r){for(var n in e||(e={}),t)!t.hasOwnProperty(n)||!1===r&&e.hasOwnProperty(n)||(e[n]=t[n]);return e}function B(t,e,r,n,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var s=n||0,o=i||0;;){var a=t.indexOf("\t",s);if(a<0||a>=e)return o+(e-s);o+=a-s,o+=r-o%r,s=a+1}}m?L=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:o&&(L=function(t){try{t.select()}catch(t){}});var U=function(){this.id=null,this.f=null,this.time=0,this.handler=D(this.onTimeout,this)};function $(t,e){for(var r=0;r<t.length;++r)if(t[r]==e)return r;return-1}U.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},U.prototype.set=function(t,e){this.f=e;var r=+new Date+t;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=r)};var z={toString:function(){return"CodeMirror.Pass"}},F={scroll:!1},G={origin:"*mouse"},V={origin:"+move"};function j(t,e,r){for(var n=0,i=0;;){var s=t.indexOf("\t",n);-1==s&&(s=t.length);var o=s-n;if(s==t.length||i+o>=e)return n+Math.min(o,e-i);if(i+=s-n,n=s+1,(i+=r-i%r)>=e)return n}}var H=[""];function W(t){for(;H.length<=t;)H.push(Y(H)+" ");return H[t]}function Y(t){return t[t.length-1]}function X(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=e(t[n],n);return r}function Z(){}function K(t,e){var r;return Object.create?r=Object.create(t):(Z.prototype=t,r=new Z),e&&q(e,r),r}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Q(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||J.test(t))}function tt(t,e){return e?!!(e.source.indexOf("\\w")>-1&&Q(t))||e.test(t):Q(t)}function et(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var rt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function nt(t){return t.charCodeAt(0)>=768&&rt.test(t)}function it(t,e,r){for(;(r<0?e>0:e<t.length)&&nt(t.charAt(e));)e+=r;return e}function st(t,e,r){for(var n=e>r?-1:1;;){if(e==r)return e;var i=(e+r)/2,s=n<0?Math.ceil(i):Math.floor(i);if(s==e)return t(s)?e:r;t(s)?r=s:e=s+n}}var ot=null;function at(t,e,r){var n;ot=null;for(var i=0;i<t.length;++i){var s=t[i];if(s.from<e&&s.to>e)return i;s.to==e&&(s.from!=s.to&&"before"==r?n=i:ot=i),s.from==e&&(s.from!=s.to&&"before"!=r?n=i:ot=i)}return null!=n?n:ot}var ut=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,r=/[LRr]/,n=/[Lb1n]/,i=/[1n]/;function s(t,e,r){this.level=t,this.from=e,this.to=r}return function(o,a){var u,l="ltr"==a?"L":"R";if(0==o.length||"ltr"==a&&!t.test(o))return!1;for(var c=o.length,p=[],h=0;h<c;++h)p.push((u=o.charCodeAt(h))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var f=0,d=l;f<c;++f){var m=p[f];"m"==m?p[f]=d:d=m}for(var g=0,y=l;g<c;++g){var v=p[g];"1"==v&&"r"==y?p[g]="n":r.test(v)&&(y=v,"r"==v&&(p[g]="R"))}for(var b=1,x=p[0];b<c-1;++b){var _=p[b];"+"==_&&"1"==x&&"1"==p[b+1]?p[b]="1":","!=_||x!=p[b+1]||"1"!=x&&"n"!=x||(p[b]=x),x=_}for(var w=0;w<c;++w){var E=p[w];if(","==E)p[w]="N";else if("%"==E){var S=void 0;for(S=w+1;S<c&&"%"==p[S];++S);for(var A=w&&"!"==p[w-1]||S<c&&"1"==p[S]?"1":"N",N=w;N<S;++N)p[N]=A;w=S-1}}for(var M=0,k=l;M<c;++M){var C=p[M];"L"==k&&"1"==C?p[M]="L":r.test(C)&&(k=C)}for(var T=0;T<c;++T)if(e.test(p[T])){var O=void 0;for(O=T+1;O<c&&e.test(p[O]);++O);for(var I="L"==(T?p[T-1]:l),P=I==("L"==(O<c?p[O]:l))?I?"L":"R":l,R=T;R<O;++R)p[R]=P;T=O-1}for(var L,D=[],q=0;q<c;)if(n.test(p[q])){var B=q;for(++q;q<c&&n.test(p[q]);++q);D.push(new s(0,B,q))}else{var U=q,$=D.length,z="rtl"==a?1:0;for(++q;q<c&&"L"!=p[q];++q);for(var F=U;F<q;)if(i.test(p[F])){U<F&&(D.splice($,0,new s(1,U,F)),$+=z);var G=F;for(++F;F<q&&i.test(p[F]);++F);D.splice($,0,new s(2,G,F)),$+=z,U=F}else++F;U<q&&D.splice($,0,new s(1,U,q))}return"ltr"==a&&(1==D[0].level&&(L=o.match(/^\s+/))&&(D[0].from=L[0].length,D.unshift(new s(0,0,L[0].length))),1==Y(D).level&&(L=o.match(/\s+$/))&&(Y(D).to-=L[0].length,D.push(new s(0,c-L[0].length,c)))),"rtl"==a?D.reverse():D}}();function lt(t,e){var r=t.order;return null==r&&(r=t.order=ut(t.text,e)),r}var ct=[],pt=function(t,e,r){if(t.addEventListener)t.addEventListener(e,r,!1);else if(t.attachEvent)t.attachEvent("on"+e,r);else{var n=t._handlers||(t._handlers={});n[e]=(n[e]||ct).concat(r)}};function ht(t,e){return t._handlers&&t._handlers[e]||ct}function ft(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.detachEvent)t.detachEvent("on"+e,r);else{var n=t._handlers,i=n&&n[e];if(i){var s=$(i,r);s>-1&&(n[e]=i.slice(0,s).concat(i.slice(s+1)))}}}function dt(t,e){var r=ht(t,e);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function mt(t,e,r){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),dt(t,r||e.type,t,e),_t(e)||e.codemirrorIgnore}function gt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var r=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)-1==$(r,e[n])&&r.push(e[n])}function yt(t,e){return ht(t,e).length>0}function vt(t){t.prototype.on=function(t,e){pt(this,t,e)},t.prototype.off=function(t,e){ft(this,t,e)}}function bt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function xt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function _t(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function wt(t){bt(t),xt(t)}function Et(t){return t.target||t.srcElement}function St(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),v&&t.ctrlKey&&1==e&&(e=3),e}var At,Nt,Mt=function(){if(o&&a<9)return!1;var t=C("div");return"draggable"in t||"dragDrop"in t}();function kt(t){if(null==At){var e=C("span","​");k(t,C("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(At=e.offsetWidth<=1&&e.offsetHeight>2&&!(o&&a<8))}var r=At?C("span","​"):C("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Ct(t){if(null!=Nt)return Nt;var e=k(t,document.createTextNode("AخA")),r=A(e,0,1).getBoundingClientRect(),n=A(e,1,2).getBoundingClientRect();return M(t),!(!r||r.left==r.right)&&(Nt=n.right-r.right<3)}var Tt,Ot=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,r=[],n=t.length;e<=n;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var s=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),o=s.indexOf("\r");-1!=o?(r.push(s.slice(0,o)),e+=o+1):(r.push(s),e=i+1)}return r}:function(t){return t.split(/\r\n?|\n/)},It=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Pt="oncopy"in(Tt=C("div"))||(Tt.setAttribute("oncopy","return;"),"function"==typeof Tt.oncopy),Rt=null;var Lt={},Dt={};function qt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Lt[t]=e}function Bt(t){if("string"==typeof t&&Dt.hasOwnProperty(t))t=Dt[t];else if(t&&"string"==typeof t.name&&Dt.hasOwnProperty(t.name)){var e=Dt[t.name];"string"==typeof e&&(e={name:e}),(t=K(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Bt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Bt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Ut(t,e){e=Bt(e);var r=Lt[e.name];if(!r)return Ut(t,"text/plain");var n=r(t,e);if($t.hasOwnProperty(e.name)){var i=$t[e.name];for(var s in i)i.hasOwnProperty(s)&&(n.hasOwnProperty(s)&&(n["_"+s]=n[s]),n[s]=i[s])}if(n.name=e.name,e.helperType&&(n.helperType=e.helperType),e.modeProps)for(var o in e.modeProps)n[o]=e.modeProps[o];return n}var $t={};function zt(t,e){q(e,$t.hasOwnProperty(t)?$t[t]:$t[t]={})}function Ft(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var r={};for(var n in e){var i=e[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Gt(t,e){for(var r;t.innerMode&&(r=t.innerMode(e))&&r.mode!=t;)e=r.state,t=r.mode;return r||{mode:t,state:e}}function Vt(t,e,r){return!t.startState||t.startState(e,r)}var jt=function(t,e,r){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};function Ht(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var r=t;!r.lines;)for(var n=0;;++n){var i=r.children[n],s=i.chunkSize();if(e<s){r=i;break}e-=s}return r.lines[e]}function Wt(t,e,r){var n=[],i=e.line;return t.iter(e.line,r.line+1,(function(t){var s=t.text;i==r.line&&(s=s.slice(0,r.ch)),i==e.line&&(s=s.slice(e.ch)),n.push(s),++i})),n}function Yt(t,e,r){var n=[];return t.iter(e,r,(function(t){n.push(t.text)})),n}function Xt(t,e){var r=e-t.height;if(r)for(var n=t;n;n=n.parent)n.height+=r}function Zt(t){if(null==t.parent)return null;for(var e=t.parent,r=$(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var i=0;n.children[i]!=e;++i)r+=n.children[i].chunkSize();return r+e.first}function Kt(t,e){var r=t.first;t:do{for(var n=0;n<t.children.length;++n){var i=t.children[n],s=i.height;if(e<s){t=i;continue t}e-=s,r+=i.chunkSize()}return r}while(!t.lines);for(var o=0;o<t.lines.length;++o){var a=t.lines[o].height;if(e<a)break;e-=a}return r+o}function Jt(t,e){return e>=t.first&&e<t.first+t.size}function Qt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function te(t,e,r){if(void 0===r&&(r=null),!(this instanceof te))return new te(t,e,r);this.line=t,this.ch=e,this.sticky=r}function ee(t,e){return t.line-e.line||t.ch-e.ch}function re(t,e){return t.sticky==e.sticky&&0==ee(t,e)}function ne(t){return te(t.line,t.ch)}function ie(t,e){return ee(t,e)<0?e:t}function se(t,e){return ee(t,e)<0?t:e}function oe(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function ae(t,e){if(e.line<t.first)return te(t.first,0);var r=t.first+t.size-1;return e.line>r?te(r,Ht(t,r).text.length):function(t,e){var r=t.ch;return null==r||r>e?te(t.line,e):r<0?te(t.line,0):t}(e,Ht(t,e.line).text.length)}function ue(t,e){for(var r=[],n=0;n<e.length;n++)r[n]=ae(t,e[n]);return r}jt.prototype.eol=function(){return this.pos>=this.string.length},jt.prototype.sol=function(){return this.pos==this.lineStart},jt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},jt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},jt.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},jt.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},jt.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},jt.prototype.skipToEnd=function(){this.pos=this.string.length},jt.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},jt.prototype.backUp=function(t){this.pos-=t},jt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=B(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},jt.prototype.indentation=function(){return B(this.string,null,this.tabSize)-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},jt.prototype.match=function(t,e,r){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&n.index>0?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}var i=function(t){return r?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},jt.prototype.current=function(){return this.string.slice(this.start,this.pos)},jt.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},jt.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},jt.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var le=function(t,e){this.state=t,this.lookAhead=e},ce=function(t,e,r,n){this.state=e,this.doc=t,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function pe(t,e,r,n){var i=[t.state.modeGen],s={};xe(t,e.text,t.doc.mode,r,(function(t,e){return i.push(t,e)}),s,n);for(var o=r.state,a=function(n){r.baseTokens=i;var a=t.state.overlays[n],u=1,l=0;r.state=!0,xe(t,e.text,a.mode,r,(function(t,e){for(var r=u;l<t;){var n=i[u];n>t&&i.splice(u,1,t,i[u+1],n),u+=2,l=Math.min(t,n)}if(e)if(a.opaque)i.splice(r,u-r,t,"overlay "+e),u=r+2;else for(;r<u;r+=2){var s=i[r+1];i[r+1]=(s?s+" ":"")+"overlay "+e}}),s),r.state=o,r.baseTokens=null,r.baseTokenPos=1},u=0;u<t.state.overlays.length;++u)a(u);return{styles:i,classes:s.bgClass||s.textClass?s:null}}function he(t,e,r){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=fe(t,Zt(e)),i=e.text.length>t.options.maxHighlightLength&&Ft(t.doc.mode,n.state),s=pe(t,e,n);i&&(n.state=i),e.stateAfter=n.save(!i),e.styles=s.styles,s.classes?e.styleClasses=s.classes:e.styleClasses&&(e.styleClasses=null),r===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function fe(t,e,r){var n=t.doc,i=t.display;if(!n.mode.startState)return new ce(n,!0,e);var s=function(t,e,r){for(var n,i,s=t.doc,o=r?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>o;--a){if(a<=s.first)return s.first;var u=Ht(s,a-1),l=u.stateAfter;if(l&&(!r||a+(l instanceof le?l.lookAhead:0)<=s.modeFrontier))return a;var c=B(u.text,null,t.options.tabSize);(null==i||n>c)&&(i=a-1,n=c)}return i}(t,e,r),o=s>n.first&&Ht(n,s-1).stateAfter,a=o?ce.fromSaved(n,o,s):new ce(n,Vt(n.mode),s);return n.iter(s,e,(function(r){de(t,r.text,a);var n=a.line;r.stateAfter=n==e-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?a.save():null,a.nextLine()})),r&&(n.modeFrontier=a.line),a}function de(t,e,r,n){var i=t.doc.mode,s=new jt(e,t.options.tabSize,r);for(s.start=s.pos=n||0,""==e&&me(i,r.state);!s.eol();)ge(i,s,r.state),s.start=s.pos}function me(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var r=Gt(t,e);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function ge(t,e,r,n){for(var i=0;i<10;i++){n&&(n[0]=Gt(t,r).mode);var s=t.token(e,r);if(e.pos>e.start)return s}throw new Error("Mode "+t.name+" failed to advance stream.")}ce.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},ce.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},ce.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ce.fromSaved=function(t,e,r){return e instanceof le?new ce(t,Ft(t.mode,e.state),r,e.lookAhead):new ce(t,Ft(t.mode,e),r)},ce.prototype.save=function(t){var e=!1!==t?Ft(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new le(e,this.maxLookAhead):e};var ye=function(t,e,r){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=r};function ve(t,e,r,n){var i,s,o=t.doc,a=o.mode,u=Ht(o,(e=ae(o,e)).line),l=fe(t,e.line,r),c=new jt(u.text,t.options.tabSize,l);for(n&&(s=[]);(n||c.pos<e.ch)&&!c.eol();)c.start=c.pos,i=ge(a,c,l.state),n&&s.push(new ye(c,i,Ft(o.mode,l.state)));return n?s:new ye(c,i,l.state)}function be(t,e){if(t)for(;;){var r=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;t=t.slice(0,r.index)+t.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==e[n]?e[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(e[n])||(e[n]+=" "+r[2])}return t}function xe(t,e,r,n,i,s,o){var a=r.flattenSpans;null==a&&(a=t.options.flattenSpans);var u,l=0,c=null,p=new jt(e,t.options.tabSize,n),h=t.options.addModeClass&&[null];for(""==e&&be(me(r,n.state),s);!p.eol();){if(p.pos>t.options.maxHighlightLength?(a=!1,o&&de(t,e,n,p.pos),p.pos=e.length,u=null):u=be(ge(r,p,n.state,h),s),h){var f=h[0].name;f&&(u="m-"+(u?f+" "+u:f))}if(!a||c!=u){for(;l<p.start;)i(l=Math.min(p.start,l+5e3),c);c=u}p.start=p.pos}for(;l<p.pos;){var d=Math.min(p.pos,l+5e3);i(d,c),l=d}}var _e=!1,we=!1;function Ee(t,e,r){this.marker=t,this.from=e,this.to=r}function Se(t,e){if(t)for(var r=0;r<t.length;++r){var n=t[r];if(n.marker==e)return n}}function Ae(t,e){for(var r,n=0;n<t.length;++n)t[n]!=e&&(r||(r=[])).push(t[n]);return r}function Ne(t,e){if(e.full)return null;var r=Jt(t,e.from.line)&&Ht(t,e.from.line).markedSpans,n=Jt(t,e.to.line)&&Ht(t,e.to.line).markedSpans;if(!r&&!n)return null;var i=e.from.ch,s=e.to.ch,o=0==ee(e.from,e.to),a=function(t,e,r){var n;if(t)for(var i=0;i<t.length;++i){var s=t[i],o=s.marker;if(null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e)||s.from==e&&"bookmark"==o.type&&(!r||!s.marker.insertLeft)){var a=null==s.to||(o.inclusiveRight?s.to>=e:s.to>e);(n||(n=[])).push(new Ee(o,s.from,a?null:s.to))}}return n}(r,i,o),u=function(t,e,r){var n;if(t)for(var i=0;i<t.length;++i){var s=t[i],o=s.marker;if(null==s.to||(o.inclusiveRight?s.to>=e:s.to>e)||s.from==e&&"bookmark"==o.type&&(!r||s.marker.insertLeft)){var a=null==s.from||(o.inclusiveLeft?s.from<=e:s.from<e);(n||(n=[])).push(new Ee(o,a?null:s.from-e,null==s.to?null:s.to-e))}}return n}(n,s,o),l=1==e.text.length,c=Y(e.text).length+(l?i:0);if(a)for(var p=0;p<a.length;++p){var h=a[p];if(null==h.to){var f=Se(u,h.marker);f?l&&(h.to=null==f.to?null:f.to+c):h.to=i}}if(u)for(var d=0;d<u.length;++d){var m=u[d];null!=m.to&&(m.to+=c),null==m.from?Se(a,m.marker)||(m.from=c,l&&(a||(a=[])).push(m)):(m.from+=c,l&&(a||(a=[])).push(m))}a&&(a=Me(a)),u&&u!=a&&(u=Me(u));var g=[a];if(!l){var y,v=e.text.length-2;if(v>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(y||(y=[])).push(new Ee(a[b].marker,null,null));for(var x=0;x<v;++x)g.push(y);g.push(u)}return g}function Me(t){for(var e=0;e<t.length;++e){var r=t[e];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function ke(t){var e=t.markedSpans;if(e){for(var r=0;r<e.length;++r)e[r].marker.detachLine(t);t.markedSpans=null}}function Ce(t,e){if(e){for(var r=0;r<e.length;++r)e[r].marker.attachLine(t);t.markedSpans=e}}function Te(t){return t.inclusiveLeft?-1:0}function Oe(t){return t.inclusiveRight?1:0}function Ie(t,e){var r=t.lines.length-e.lines.length;if(0!=r)return r;var n=t.find(),i=e.find(),s=ee(n.from,i.from)||Te(t)-Te(e);return s?-s:ee(n.to,i.to)||Oe(t)-Oe(e)||e.id-t.id}function Pe(t,e){var r,n=we&&t.markedSpans;if(n)for(var i=void 0,s=0;s<n.length;++s)(i=n[s]).marker.collapsed&&null==(e?i.from:i.to)&&(!r||Ie(r,i.marker)<0)&&(r=i.marker);return r}function Re(t){return Pe(t,!0)}function Le(t){return Pe(t,!1)}function De(t,e){var r,n=we&&t.markedSpans;if(n)for(var i=0;i<n.length;++i){var s=n[i];s.marker.collapsed&&(null==s.from||s.from<e)&&(null==s.to||s.to>e)&&(!r||Ie(r,s.marker)<0)&&(r=s.marker)}return r}function qe(t,e,r,n,i){var s=Ht(t,e),o=we&&s.markedSpans;if(o)for(var a=0;a<o.length;++a){var u=o[a];if(u.marker.collapsed){var l=u.marker.find(0),c=ee(l.from,r)||Te(u.marker)-Te(i),p=ee(l.to,n)||Oe(u.marker)-Oe(i);if(!(c>=0&&p<=0||c<=0&&p>=0)&&(c<=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?ee(l.to,r)>=0:ee(l.to,r)>0)||c>=0&&(u.marker.inclusiveRight&&i.inclusiveLeft?ee(l.from,n)<=0:ee(l.from,n)<0)))return!0}}}function Be(t){for(var e;e=Re(t);)t=e.find(-1,!0).line;return t}function Ue(t,e){var r=Ht(t,e),n=Be(r);return r==n?e:Zt(n)}function $e(t,e){if(e>t.lastLine())return e;var r,n=Ht(t,e);if(!ze(t,n))return e;for(;r=Le(n);)n=r.find(1,!0).line;return Zt(n)+1}function ze(t,e){var r=we&&e.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Fe(t,e,n))return!0}}function Fe(t,e,r){if(null==r.to){var n=r.marker.find(1,!0);return Fe(t,n.line,Se(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==e.text.length)return!0;for(var i=void 0,s=0;s<e.markedSpans.length;++s)if((i=e.markedSpans[s]).marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&Fe(t,e,i))return!0}function Ge(t){for(var e=0,r=(t=Be(t)).parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==t)break;e+=i.height}for(var s=r.parent;s;s=(r=s).parent)for(var o=0;o<s.children.length;++o){var a=s.children[o];if(a==r)break;e+=a.height}return e}function Ve(t){if(0==t.height)return 0;for(var e,r=t.text.length,n=t;e=Re(n);){var i=e.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=t;e=Le(n);){var s=e.find(0,!0);r-=n.text.length-s.from.ch,r+=(n=s.to.line).text.length-s.to.ch}return r}function je(t){var e=t.display,r=t.doc;e.maxLine=Ht(r,r.first),e.maxLineLength=Ve(e.maxLine),e.maxLineChanged=!0,r.iter((function(t){var r=Ve(t);r>e.maxLineLength&&(e.maxLineLength=r,e.maxLine=t)}))}var He=function(t,e,r){this.text=t,Ce(this,e),this.height=r?r(this):1};function We(t){t.parent=null,ke(t)}He.prototype.lineNo=function(){return Zt(this)},vt(He);var Ye={},Xe={};function Ze(t,e){if(!t||/^\s*$/.test(t))return null;var r=e.addModeClass?Xe:Ye;return r[t]||(r[t]=t.replace(/\S+/g,"cm-$&"))}function Ke(t,e){var r=T("span",null,null,u?"padding-right: .1px":null),n={pre:T("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var s=i?e.rest[i-1]:e.line,o=void 0;n.pos=0,n.addToken=Qe,Ct(t.display.measure)&&(o=lt(s,t.doc.direction))&&(n.addToken=tr(n.addToken,o)),n.map=[],rr(s,n,he(t,s,e!=t.display.externalMeasured&&Zt(s))),s.styleClasses&&(s.styleClasses.bgClass&&(n.bgClass=R(s.styleClasses.bgClass,n.bgClass||"")),s.styleClasses.textClass&&(n.textClass=R(s.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(kt(t.display.measure))),0==i?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(u){var a=n.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return dt(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=R(n.pre.className,n.textClass||"")),n}function Je(t){var e=C("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Qe(t,e,r,n,i,s,u){if(e){var l,c=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var r=e,n="",i=0;i<t.length;i++){var s=t.charAt(i);" "!=s||!r||i!=t.length-1&&32!=t.charCodeAt(i+1)||(s=" "),n+=s,r=" "==s}return n}(e,t.trailingSpace):e,p=t.cm.state.specialChars,h=!1;if(p.test(e)){l=document.createDocumentFragment();for(var f=0;;){p.lastIndex=f;var d=p.exec(e),m=d?d.index-f:e.length-f;if(m){var g=document.createTextNode(c.slice(f,f+m));o&&a<9?l.appendChild(C("span",[g])):l.appendChild(g),t.map.push(t.pos,t.pos+m,g),t.col+=m,t.pos+=m}if(!d)break;f+=m+1;var y=void 0;if("\t"==d[0]){var v=t.cm.options.tabSize,b=v-t.col%v;(y=l.appendChild(C("span",W(b),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),t.col+=b}else"\r"==d[0]||"\n"==d[0]?((y=l.appendChild(C("span","\r"==d[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",d[0]),t.col+=1):((y=t.cm.options.specialCharPlaceholder(d[0])).setAttribute("cm-text",d[0]),o&&a<9?l.appendChild(C("span",[y])):l.appendChild(y),t.col+=1);t.map.push(t.pos,t.pos+1,y),t.pos++}}else t.col+=e.length,l=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,l),o&&a<9&&(h=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),r||n||i||h||s||u){var x=r||"";n&&(x+=n),i&&(x+=i);var _=C("span",[l],x,s);if(u)for(var w in u)u.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&_.setAttribute(w,u[w]);return t.content.appendChild(_)}t.content.appendChild(l)}}function tr(t,e){return function(r,n,i,s,o,a,u){i=i?i+" cm-force-border":"cm-force-border";for(var l=r.pos,c=l+n.length;;){for(var p=void 0,h=0;h<e.length&&!((p=e[h]).to>l&&p.from<=l);h++);if(p.to>=c)return t(r,n,i,s,o,a,u);t(r,n.slice(0,p.to-l),i,s,null,a,u),s=null,n=n.slice(p.to-l),l=p.to}}}function er(t,e,r,n){var i=!n&&r.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!n&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function rr(t,e,r){var n=t.markedSpans,i=t.text,s=0;if(n)for(var o,a,u,l,c,p,h,f=i.length,d=0,m=1,g="",y=0;;){if(y==d){u=l=c=a="",h=null,p=null,y=1/0;for(var v=[],b=void 0,x=0;x<n.length;++x){var _=n[x],w=_.marker;if("bookmark"==w.type&&_.from==d&&w.widgetNode)v.push(w);else if(_.from<=d&&(null==_.to||_.to>d||w.collapsed&&_.to==d&&_.from==d)){if(null!=_.to&&_.to!=d&&y>_.to&&(y=_.to,l=""),w.className&&(u+=" "+w.className),w.css&&(a=(a?a+";":"")+w.css),w.startStyle&&_.from==d&&(c+=" "+w.startStyle),w.endStyle&&_.to==y&&(b||(b=[])).push(w.endStyle,_.to),w.title&&((h||(h={})).title=w.title),w.attributes)for(var E in w.attributes)(h||(h={}))[E]=w.attributes[E];w.collapsed&&(!p||Ie(p.marker,w)<0)&&(p=_)}else _.from>d&&y>_.from&&(y=_.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==y&&(l+=" "+b[S]);if(!p||p.from==d)for(var A=0;A<v.length;++A)er(e,0,v[A]);if(p&&(p.from||0)==d){if(er(e,(null==p.to?f+1:p.to)-d,p.marker,null==p.from),null==p.to)return;p.to==d&&(p=!1)}}if(d>=f)break;for(var N=Math.min(f,y);;){if(g){var M=d+g.length;if(!p){var k=M>N?g.slice(0,N-d):g;e.addToken(e,k,o?o+u:u,c,d+k.length==y?l:"",a,h)}if(M>=N){g=g.slice(N-d),d=N;break}d=M,c=""}g=i.slice(s,s=r[m++]),o=Ze(r[m++],e.cm.options)}}else for(var C=1;C<r.length;C+=2)e.addToken(e,i.slice(s,s=r[C]),Ze(r[C+1],e.cm.options))}function nr(t,e,r){this.line=e,this.rest=function(t){for(var e,r;e=Le(t);)t=e.find(1,!0).line,(r||(r=[])).push(t);return r}(e),this.size=this.rest?Zt(Y(this.rest))-r+1:1,this.node=this.text=null,this.hidden=ze(t,e)}function ir(t,e,r){for(var n,i=[],s=e;s<r;s=n){var o=new nr(t.doc,Ht(t.doc,s),s);n=s+o.size,i.push(o)}return i}var sr=null;var or=null;function ar(t,e){var r=ht(t,e);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);sr?n=sr.delayedCallbacks:or?n=or:(n=or=[],setTimeout(ur,0));for(var s=function(t){n.push((function(){return r[t].apply(null,i)}))},o=0;o<r.length;++o)s(o)}}function ur(){var t=or;or=null;for(var e=0;e<t.length;++e)t[e]()}function lr(t,e,r,n){for(var i=0;i<e.changes.length;i++){var s=e.changes[i];"text"==s?hr(t,e):"gutter"==s?dr(t,e,r,n):"class"==s?fr(t,e):"widget"==s&&mr(t,e,n)}e.changes=null}function cr(t){return t.node==t.text&&(t.node=C("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),o&&a<8&&(t.node.style.zIndex=2)),t.node}function pr(t,e){var r=t.display.externalMeasured;return r&&r.line==e.line?(t.display.externalMeasured=null,e.measure=r.measure,r.built):Ke(t,e)}function hr(t,e){var r=e.text.className,n=pr(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,fr(t,e)):r&&(e.text.className=r)}function fr(t,e){(function(t,e){var r=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),e.background)r?e.background.className=r:(e.background.parentNode.removeChild(e.background),e.background=null);else if(r){var n=cr(e);e.background=n.insertBefore(C("div",null,r),n.firstChild),t.display.input.setUneditable(e.background)}})(t,e),e.line.wrapClass?cr(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var r=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=r||""}function dr(t,e,r,n){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=cr(e);e.gutterBackground=C("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var s=e.line.gutterMarkers;if(t.options.lineNumbers||s){var o=cr(e),a=e.gutter=C("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),t.display.input.setUneditable(a),o.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),!t.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(C("div",Qt(t.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),s)for(var u=0;u<t.display.gutterSpecs.length;++u){var l=t.display.gutterSpecs[u].className,c=s.hasOwnProperty(l)&&s[l];c&&a.appendChild(C("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function mr(t,e,r){e.alignable&&(e.alignable=null);for(var n=S("CodeMirror-linewidget"),i=e.node.firstChild,s=void 0;i;i=s)s=i.nextSibling,n.test(i.className)&&e.node.removeChild(i);yr(t,e,r)}function gr(t,e,r,n){var i=pr(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),fr(t,e),dr(t,e,r,n),yr(t,e,n),e.node}function yr(t,e,r){if(vr(t,e.line,e,r,!0),e.rest)for(var n=0;n<e.rest.length;n++)vr(t,e.rest[n],e,r,!1)}function vr(t,e,r,n,i){if(e.widgets)for(var s=cr(r),o=0,a=e.widgets;o<a.length;++o){var u=a[o],l=C("div",[u.node],"CodeMirror-linewidget"+(u.className?" "+u.className:""));u.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),br(u,l,r,n),t.display.input.setUneditable(l),i&&u.above?s.insertBefore(l,r.gutter||r.text):s.appendChild(l),ar(u,"redraw")}}function br(t,e,r,n){if(t.noHScroll){(r.alignable||(r.alignable=[])).push(e);var i=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(i-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function xr(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!O(document.body,t.node)){var r="position: relative;";t.coverGutter&&(r+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(r+="width: "+e.display.wrapper.clientWidth+"px;"),k(e.display.measure,C("div",[t.node],null,r))}return t.height=t.node.parentNode.offsetHeight}function _r(t,e){for(var r=Et(e);r!=t.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==t.sizer&&r!=t.mover)return!0}function wr(t){return t.lineSpace.offsetTop}function Er(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Sr(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=k(t.measure,C("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(t.cachedPaddingH=n),n}function Ar(t){return 50-t.display.nativeBarWidth}function Nr(t){return t.display.scroller.clientWidth-Ar(t)-t.display.barWidth}function Mr(t){return t.display.scroller.clientHeight-Ar(t)-t.display.barHeight}function kr(t,e,r){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var i=0;i<t.rest.length;i++)if(Zt(t.rest[i])>r)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function Cr(t,e,r,n){return Ir(t,Or(t,e),r,n)}function Tr(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[cn(t,e)];var r=t.display.externalMeasured;return r&&e>=r.lineN&&e<r.lineN+r.size?r:void 0}function Or(t,e){var r=Zt(e),n=Tr(t,r);n&&!n.text?n=null:n&&n.changes&&(lr(t,n,r,sn(t)),t.curOp.forceUpdate=!0),n||(n=function(t,e){var r=Zt(e=Be(e)),n=t.display.externalMeasured=new nr(t.doc,e,r);n.lineN=r;var i=n.built=Ke(t,n);return n.text=i.pre,k(t.display.lineMeasure,i.pre),n}(t,e));var i=kr(n,e,r);return{line:e,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ir(t,e,r,n,i){e.before&&(r=-1);var s,u=r+(n||"");return e.cache.hasOwnProperty(u)?s=e.cache[u]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(function(t,e,r){var n=t.options.lineWrapping,i=n&&Nr(t);if(!e.measure.heights||n&&e.measure.width!=i){var s=e.measure.heights=[];if(n){e.measure.width=i;for(var o=e.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var u=o[a],l=o[a+1];Math.abs(u.bottom-l.bottom)>2&&s.push((u.bottom+l.top)/2-r.top)}}s.push(r.bottom-r.top)}}(t,e.view,e.rect),e.hasHeights=!0),(s=function(t,e,r,n){var i,s=Lr(e.map,r,n),u=s.node,l=s.start,c=s.end,p=s.collapse;if(3==u.nodeType){for(var h=0;h<4;h++){for(;l&&nt(e.line.text.charAt(s.coverStart+l));)--l;for(;s.coverStart+c<s.coverEnd&&nt(e.line.text.charAt(s.coverStart+c));)++c;if((i=o&&a<9&&0==l&&c==s.coverEnd-s.coverStart?u.parentNode.getBoundingClientRect():Dr(A(u,l,c).getClientRects(),n)).left||i.right||0==l)break;c=l,l-=1,p="right"}o&&a<11&&(i=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=Rt)return Rt;var e=k(t,C("span","x")),r=e.getBoundingClientRect(),n=A(e,0,1).getBoundingClientRect();return Rt=Math.abs(r.left-n.left)>1}(t))return e;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*r,right:e.right*r,top:e.top*n,bottom:e.bottom*n}}(t.display.measure,i))}else{var f;l>0&&(p=n="right"),i=t.options.lineWrapping&&(f=u.getClientRects()).length>1?f["right"==n?f.length-1:0]:u.getBoundingClientRect()}if(o&&a<9&&!l&&(!i||!i.left&&!i.right)){var d=u.parentNode.getClientRects()[0];i=d?{left:d.left,right:d.left+nn(t.display),top:d.top,bottom:d.bottom}:Rr}for(var m=i.top-e.rect.top,g=i.bottom-e.rect.top,y=(m+g)/2,v=e.view.measure.heights,b=0;b<v.length-1&&!(y<v[b]);b++);var x=b?v[b-1]:0,_=v[b],w={left:("right"==p?i.right:i.left)-e.rect.left,right:("left"==p?i.left:i.right)-e.rect.left,top:x,bottom:_};return i.left||i.right||(w.bogus=!0),t.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}(t,e,r,n)).bogus||(e.cache[u]=s)),{left:s.left,right:s.right,top:i?s.rtop:s.top,bottom:i?s.rbottom:s.bottom}}var Pr,Rr={left:0,right:0,top:0,bottom:0};function Lr(t,e,r){for(var n,i,s,o,a,u,l=0;l<t.length;l+=3)if(a=t[l],u=t[l+1],e<a?(i=0,s=1,o="left"):e<u?s=1+(i=e-a):(l==t.length-3||e==u&&t[l+3]>e)&&(i=(s=u-a)-1,e>=u&&(o="right")),null!=i){if(n=t[l+2],a==u&&r==(n.insertLeft?"left":"right")&&(o=r),"left"==r&&0==i)for(;l&&t[l-2]==t[l-3]&&t[l-1].insertLeft;)n=t[2+(l-=3)],o="left";if("right"==r&&i==u-a)for(;l<t.length-3&&t[l+3]==t[l+4]&&!t[l+5].insertLeft;)n=t[(l+=3)+2],o="right";break}return{node:n,start:i,end:s,collapse:o,coverStart:a,coverEnd:u}}function Dr(t,e){var r=Rr;if("left"==e)for(var n=0;n<t.length&&(r=t[n]).left==r.right;n++);else for(var i=t.length-1;i>=0&&(r=t[i]).left==r.right;i--);return r}function qr(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Br(t){t.display.externalMeasure=null,M(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)qr(t.display.view[e])}function Ur(t){Br(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function $r(){return c&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function zr(){return c&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Fr(t){var e=0;if(t.widgets)for(var r=0;r<t.widgets.length;++r)t.widgets[r].above&&(e+=xr(t.widgets[r]));return e}function Gr(t,e,r,n,i){if(!i){var s=Fr(e);r.top+=s,r.bottom+=s}if("line"==n)return r;n||(n="local");var o=Ge(e);if("local"==n?o+=wr(t.display):o-=t.display.viewOffset,"page"==n||"window"==n){var a=t.display.lineSpace.getBoundingClientRect();o+=a.top+("window"==n?0:zr());var u=a.left+("window"==n?0:$r());r.left+=u,r.right+=u}return r.top+=o,r.bottom+=o,r}function Vr(t,e,r){if("div"==r)return e;var n=e.left,i=e.top;if("page"==r)n-=$r(),i-=zr();else if("local"==r||!r){var s=t.display.sizer.getBoundingClientRect();n+=s.left,i+=s.top}var o=t.display.lineSpace.getBoundingClientRect();return{left:n-o.left,top:i-o.top}}function jr(t,e,r,n,i){return n||(n=Ht(t.doc,e.line)),Gr(t,n,Cr(t,n,e.ch,i),r)}function Hr(t,e,r,n,i,s){function o(e,o){var a=Ir(t,i,e,o?"right":"left",s);return o?a.left=a.right:a.right=a.left,Gr(t,n,a,r)}n=n||Ht(t.doc,e.line),i||(i=Or(t,n));var a=lt(n,t.doc.direction),u=e.ch,l=e.sticky;if(u>=n.text.length?(u=n.text.length,l="before"):u<=0&&(u=0,l="after"),!a)return o("before"==l?u-1:u,"before"==l);function c(t,e,r){return o(r?t-1:t,1==a[e].level!=r)}var p=at(a,u,l),h=ot,f=c(u,p,"before"==l);return null!=h&&(f.other=c(u,h,"before"!=l)),f}function Wr(t,e){var r=0;e=ae(t.doc,e),t.options.lineWrapping||(r=nn(t.display)*e.ch);var n=Ht(t.doc,e.line),i=Ge(n)+wr(t.display);return{left:r,right:r,top:i,bottom:i+n.height}}function Yr(t,e,r,n,i){var s=te(t,e,r);return s.xRel=i,n&&(s.outside=n),s}function Xr(t,e,r){var n=t.doc;if((r+=t.display.viewOffset)<0)return Yr(n.first,0,null,-1,-1);var i=Kt(n,r),s=n.first+n.size-1;if(i>s)return Yr(n.first+n.size-1,Ht(n,s).text.length,null,1,1);e<0&&(e=0);for(var o=Ht(n,i);;){var a=Qr(t,o,i,e,r),u=De(o,a.ch+(a.xRel>0||a.outside>0?1:0));if(!u)return a;var l=u.find(1);if(l.line==i)return l;o=Ht(n,i=l.line)}}function Zr(t,e,r,n){n-=Fr(e);var i=e.text.length,s=st((function(e){return Ir(t,r,e-1).bottom<=n}),i,0);return{begin:s,end:i=st((function(e){return Ir(t,r,e).top>n}),s,i)}}function Kr(t,e,r,n){return r||(r=Or(t,e)),Zr(t,e,r,Gr(t,e,Ir(t,r,n),"line").top)}function Jr(t,e,r,n){return!(t.bottom<=r)&&(t.top>r||(n?t.left:t.right)>e)}function Qr(t,e,r,n,i){i-=Ge(e);var s=Or(t,e),o=Fr(e),a=0,u=e.text.length,l=!0,c=lt(e,t.doc.direction);if(c){var p=(t.options.lineWrapping?en:tn)(t,e,r,s,c,n,i);a=(l=1!=p.level)?p.from:p.to-1,u=l?p.to:p.from-1}var h,f,d=null,m=null,g=st((function(e){var r=Ir(t,s,e);return r.top+=o,r.bottom+=o,!!Jr(r,n,i,!1)&&(r.top<=i&&r.left<=n&&(d=e,m=r),!0)}),a,u),y=!1;if(m){var v=n-m.left<m.right-n,b=v==l;g=d+(b?0:1),f=b?"after":"before",h=v?m.left:m.right}else{l||g!=u&&g!=a||g++,f=0==g?"after":g==e.text.length?"before":Ir(t,s,g-(l?1:0)).bottom+o<=i==l?"after":"before";var x=Hr(t,te(r,g,f),"line",e,s);h=x.left,y=i<x.top?-1:i>=x.bottom?1:0}return Yr(r,g=it(e.text,g,1),f,y,n-h)}function tn(t,e,r,n,i,s,o){var a=st((function(a){var u=i[a],l=1!=u.level;return Jr(Hr(t,te(r,l?u.to:u.from,l?"before":"after"),"line",e,n),s,o,!0)}),0,i.length-1),u=i[a];if(a>0){var l=1!=u.level,c=Hr(t,te(r,l?u.from:u.to,l?"after":"before"),"line",e,n);Jr(c,s,o,!0)&&c.top>o&&(u=i[a-1])}return u}function en(t,e,r,n,i,s,o){var a=Zr(t,e,n,o),u=a.begin,l=a.end;/\s/.test(e.text.charAt(l-1))&&l--;for(var c=null,p=null,h=0;h<i.length;h++){var f=i[h];if(!(f.from>=l||f.to<=u)){var d=Ir(t,n,1!=f.level?Math.min(l,f.to)-1:Math.max(u,f.from)).right,m=d<s?s-d+1e9:d-s;(!c||p>m)&&(c=f,p=m)}}return c||(c=i[i.length-1]),c.from<u&&(c={from:u,to:c.to,level:c.level}),c.to>l&&(c={from:c.from,to:l,level:c.level}),c}function rn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Pr){Pr=C("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)Pr.appendChild(document.createTextNode("x")),Pr.appendChild(C("br"));Pr.appendChild(document.createTextNode("x"))}k(t.measure,Pr);var r=Pr.offsetHeight/50;return r>3&&(t.cachedTextHeight=r),M(t.measure),r||1}function nn(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=C("span","xxxxxxxxxx"),r=C("pre",[e],"CodeMirror-line-like");k(t.measure,r);var n=e.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function sn(t){for(var e=t.display,r={},n={},i=e.gutters.clientLeft,s=e.gutters.firstChild,o=0;s;s=s.nextSibling,++o){var a=t.display.gutterSpecs[o].className;r[a]=s.offsetLeft+s.clientLeft+i,n[a]=s.clientWidth}return{fixedPos:on(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function on(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function an(t){var e=rn(t.display),r=t.options.lineWrapping,n=r&&Math.max(5,t.display.scroller.clientWidth/nn(t.display)-3);return function(i){if(ze(t.doc,i))return 0;var s=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(s+=i.widgets[o].height);return r?s+(Math.ceil(i.text.length/n)||1)*e:s+e}}function un(t){var e=t.doc,r=an(t);e.iter((function(t){var e=r(t);e!=t.height&&Xt(t,e)}))}function ln(t,e,r,n){var i=t.display;if(!r&&"true"==Et(e).getAttribute("cm-not-content"))return null;var s,o,a=i.lineSpace.getBoundingClientRect();try{s=e.clientX-a.left,o=e.clientY-a.top}catch(t){return null}var u,l=Xr(t,s,o);if(n&&l.xRel>0&&(u=Ht(t.doc,l.line).text).length==l.ch){var c=B(u,u.length,t.options.tabSize)-u.length;l=te(l.line,Math.max(0,Math.round((s-Sr(t.display).left)/nn(t.display))-c))}return l}function cn(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var r=t.display.view,n=0;n<r.length;n++)if((e-=r[n].size)<0)return n}function pn(t,e,r,n){null==e&&(e=t.doc.first),null==r&&(r=t.doc.first+t.doc.size),n||(n=0);var i=t.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)we&&Ue(t.doc,e)<i.viewTo&&fn(t);else if(r<=i.viewFrom)we&&$e(t.doc,r+n)>i.viewFrom?fn(t):(i.viewFrom+=n,i.viewTo+=n);else if(e<=i.viewFrom&&r>=i.viewTo)fn(t);else if(e<=i.viewFrom){var s=dn(t,r,r+n,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=n):fn(t)}else if(r>=i.viewTo){var o=dn(t,e,e,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):fn(t)}else{var a=dn(t,e,e,-1),u=dn(t,r,r+n,1);a&&u?(i.view=i.view.slice(0,a.index).concat(ir(t,a.lineN,u.lineN)).concat(i.view.slice(u.index)),i.viewTo+=n):fn(t)}var l=i.externalMeasured;l&&(r<l.lineN?l.lineN+=n:e<l.lineN+l.size&&(i.externalMeasured=null))}function hn(t,e,r){t.curOp.viewChanged=!0;var n=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var s=n.view[cn(t,e)];if(null!=s.node){var o=s.changes||(s.changes=[]);-1==$(o,r)&&o.push(r)}}}function fn(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function dn(t,e,r,n){var i,s=cn(t,e),o=t.display.view;if(!we||r==t.doc.first+t.doc.size)return{index:s,lineN:r};for(var a=t.display.viewFrom,u=0;u<s;u++)a+=o[u].size;if(a!=e){if(n>0){if(s==o.length-1)return null;i=a+o[s].size-e,s++}else i=a-e;e+=i,r+=i}for(;Ue(t.doc,r)!=r;){if(s==(n<0?0:o.length-1))return null;r+=n*o[s-(n<0?1:0)].size,s+=n}return{index:s,lineN:r}}function mn(t){for(var e=t.display.view,r=0,n=0;n<e.length;n++){var i=e[n];i.hidden||i.node&&!i.changes||++r}return r}function gn(t){t.display.input.showSelection(t.display.input.prepareSelection())}function yn(t,e){void 0===e&&(e=!0);for(var r=t.doc,n={},i=n.cursors=document.createDocumentFragment(),s=n.selection=document.createDocumentFragment(),o=0;o<r.sel.ranges.length;o++)if(e||o!=r.sel.primIndex){var a=r.sel.ranges[o];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var u=a.empty();(u||t.options.showCursorWhenSelecting)&&vn(t,a.head,i),u||xn(t,a,s)}}return n}function vn(t,e,r){var n=Hr(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=r.appendChild(C("div"," ","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",n.other){var s=r.appendChild(C("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=n.other.left+"px",s.style.top=n.other.top+"px",s.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function bn(t,e){return t.top-e.top||t.left-e.left}function xn(t,e,r){var n=t.display,i=t.doc,s=document.createDocumentFragment(),o=Sr(t.display),a=o.left,u=Math.max(n.sizerWidth,Nr(t)-n.sizer.offsetLeft)-o.right,l="ltr"==i.direction;function c(t,e,r,n){e<0&&(e=0),e=Math.round(e),n=Math.round(n),s.appendChild(C("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==r?u-t:r)+"px;\n                             height: "+(n-e)+"px"))}function p(e,r,n){var s,o,p=Ht(i,e),h=p.text.length;function f(r,n){return jr(t,te(e,r),"div",p,n)}function d(e,r,n){var i=Kr(t,p,null,e),s="ltr"==r==("after"==n)?"left":"right";return f("after"==n?i.begin:i.end-(/\s/.test(p.text.charAt(i.end-1))?2:1),s)[s]}var m=lt(p,i.direction);return function(t,e,r,n){if(!t)return n(e,r,"ltr",0);for(var i=!1,s=0;s<t.length;++s){var o=t[s];(o.from<r&&o.to>e||e==r&&o.to==e)&&(n(Math.max(o.from,e),Math.min(o.to,r),1==o.level?"rtl":"ltr",s),i=!0)}i||n(e,r,"ltr")}(m,r||0,null==n?h:n,(function(t,e,i,p){var g="ltr"==i,y=f(t,g?"left":"right"),v=f(e-1,g?"right":"left"),b=null==r&&0==t,x=null==n&&e==h,_=0==p,w=!m||p==m.length-1;if(v.top-y.top<=3){var E=(l?x:b)&&w,S=(l?b:x)&&_?a:(g?y:v).left,A=E?u:(g?v:y).right;c(S,y.top,A-S,y.bottom)}else{var N,M,k,C;g?(N=l&&b&&_?a:y.left,M=l?u:d(t,i,"before"),k=l?a:d(e,i,"after"),C=l&&x&&w?u:v.right):(N=l?d(t,i,"before"):a,M=!l&&b&&_?u:y.right,k=!l&&x&&w?a:v.left,C=l?d(e,i,"after"):u),c(N,y.top,M-N,y.bottom),y.bottom<v.top&&c(a,y.bottom,null,v.top),c(k,v.top,C-k,v.bottom)}(!s||bn(y,s)<0)&&(s=y),bn(v,s)<0&&(s=v),(!o||bn(y,o)<0)&&(o=y),bn(v,o)<0&&(o=v)})),{start:s,end:o}}var h=e.from(),f=e.to();if(h.line==f.line)p(h.line,h.ch,f.ch);else{var d=Ht(i,h.line),m=Ht(i,f.line),g=Be(d)==Be(m),y=p(h.line,h.ch,g?d.text.length+1:null).end,v=p(f.line,g?0:null,f.ch).start;g&&(y.top<v.top-2?(c(y.right,y.top,null,y.bottom),c(a,v.top,v.left,v.bottom)):c(y.right,y.top,v.left-y.right,y.bottom)),y.bottom<v.top&&c(a,y.bottom,null,v.top)}r.appendChild(s)}function _n(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var r=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){t.hasFocus()||An(t),e.cursorDiv.style.visibility=(r=!r)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function wn(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||Sn(t))}function En(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&An(t))}),100)}function Sn(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(dt(t,"focus",t,e),t.state.focused=!0,P(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),u&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),_n(t))}function An(t,e){t.state.delayingBlurEvent||(t.state.focused&&(dt(t,"blur",t,e),t.state.focused=!1,N(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function Nn(t){for(var e=t.display,r=e.lineDiv.offsetTop,n=0;n<e.view.length;n++){var i=e.view[n],s=t.options.lineWrapping,u=void 0,l=0;if(!i.hidden){if(o&&a<8){var c=i.node.offsetTop+i.node.offsetHeight;u=c-r,r=c}else{var p=i.node.getBoundingClientRect();u=p.bottom-p.top,!s&&i.text.firstChild&&(l=i.text.firstChild.getBoundingClientRect().right-p.left-1)}var h=i.line.height-u;if((h>.005||h<-.005)&&(Xt(i.line,u),Mn(i.line),i.rest))for(var f=0;f<i.rest.length;f++)Mn(i.rest[f]);if(l>t.display.sizerWidth){var d=Math.ceil(l/nn(t.display));d>t.display.maxLineLength&&(t.display.maxLineLength=d,t.display.maxLine=i.line,t.display.maxLineChanged=!0)}}}}function Mn(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var r=t.widgets[e],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function kn(t,e,r){var n=r&&null!=r.top?Math.max(0,r.top):t.scroller.scrollTop;n=Math.floor(n-wr(t));var i=r&&null!=r.bottom?r.bottom:n+t.wrapper.clientHeight,s=Kt(e,n),o=Kt(e,i);if(r&&r.ensure){var a=r.ensure.from.line,u=r.ensure.to.line;a<s?(s=a,o=Kt(e,Ge(Ht(e,a))+t.wrapper.clientHeight)):Math.min(u,e.lastLine())>=o&&(s=Kt(e,Ge(Ht(e,u))-t.wrapper.clientHeight),o=u)}return{from:s,to:Math.max(o,s+1)}}function Cn(t,e){var r=t.display,n=rn(t.display);e.top<0&&(e.top=0);var i=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:r.scroller.scrollTop,s=Mr(t),o={};e.bottom-e.top>s&&(e.bottom=e.top+s);var a=t.doc.height+Er(r),u=e.top<n,l=e.bottom>a-n;if(e.top<i)o.scrollTop=u?0:e.top;else if(e.bottom>i+s){var c=Math.min(e.top,(l?a:e.bottom)-s);c!=i&&(o.scrollTop=c)}var p=t.options.fixedGutter?0:r.gutters.offsetWidth,h=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:r.scroller.scrollLeft-p,f=Nr(t)-r.gutters.offsetWidth,d=e.right-e.left>f;return d&&(e.right=e.left+f),e.left<10?o.scrollLeft=0:e.left<h?o.scrollLeft=Math.max(0,e.left+p-(d?0:10)):e.right>f+h-3&&(o.scrollLeft=e.right+(d?0:10)-f),o}function Tn(t,e){null!=e&&(Pn(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function On(t){Pn(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function In(t,e,r){null==e&&null==r||Pn(t),null!=e&&(t.curOp.scrollLeft=e),null!=r&&(t.curOp.scrollTop=r)}function Pn(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Rn(t,Wr(t,e.from),Wr(t,e.to),e.margin))}function Rn(t,e,r,n){var i=Cn(t,{left:Math.min(e.left,r.left),top:Math.min(e.top,r.top)-n,right:Math.max(e.right,r.right),bottom:Math.max(e.bottom,r.bottom)+n});In(t,i.scrollLeft,i.scrollTop)}function Ln(t,e){Math.abs(t.doc.scrollTop-e)<2||(r||ui(t,{top:e}),Dn(t,e,!0),r&&ui(t),ni(t,100))}function Dn(t,e,r){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||r)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function qn(t,e,r,n){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(r?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!n||(t.doc.scrollLeft=e,pi(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Bn(t){var e=t.display,r=e.gutters.offsetWidth,n=Math.round(t.doc.height+Er(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Ar(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:r}}var Un=function(t,e,r){this.cm=r;var n=this.vert=C("div",[C("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=C("div",[C("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=i.tabIndex=-1,t(n),t(i),pt(n,"scroll",(function(){n.clientHeight&&e(n.scrollTop,"vertical")})),pt(i,"scroll",(function(){i.clientWidth&&e(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,o&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Un.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,r=t.scrollHeight>t.clientHeight+1,n=t.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=e?n+"px":"0";var i=t.viewHeight-(e?n:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=t.barLeft+"px";var s=t.viewWidth-t.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+s)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:e?n:0}},Un.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Un.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Un.prototype.zeroWidthHack=function(){var t=v&&!f?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new U,this.disableVert=new U},Un.prototype.enableZeroWidthBar=function(t,e,r){t.style.pointerEvents="auto",e.set(1e3,(function n(){var i=t.getBoundingClientRect();("vert"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,n)}))},Un.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var $n=function(){};function zn(t,e){e||(e=Bn(t));var r=t.display.barWidth,n=t.display.barHeight;Fn(t,e);for(var i=0;i<4&&r!=t.display.barWidth||n!=t.display.barHeight;i++)r!=t.display.barWidth&&t.options.lineWrapping&&Nn(t),Fn(t,Bn(t)),r=t.display.barWidth,n=t.display.barHeight}function Fn(t,e){var r=t.display,n=r.scrollbars.update(e);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=e.gutterWidth+"px"):r.gutterFiller.style.display=""}$n.prototype.update=function(){return{bottom:0,right:0}},$n.prototype.setScrollLeft=function(){},$n.prototype.setScrollTop=function(){},$n.prototype.clear=function(){};var Gn={native:Un,null:$n};function Vn(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&N(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Gn[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),pt(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,r){"horizontal"==r?qn(t,e):Ln(t,e)}),t),t.display.scrollbars.addClass&&P(t.display.wrapper,t.display.scrollbars.addClass)}var jn=0;function Hn(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++jn},e=t.curOp,sr?sr.ops.push(e):e.ownsGroup=sr={ops:[e],delayedCallbacks:[]}}function Wn(t){var e=t.curOp;e&&function(t,e){var r=t.ownsGroup;if(r)try{!function(t){var e=t.delayedCallbacks,r=0;do{for(;r<e.length;r++)e[r].call(null);for(var n=0;n<t.ops.length;n++){var i=t.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<e.length)}(r)}finally{sr=null,e(r)}}(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,r=0;r<e.length;r++)Yn(e[r]);for(var n=0;n<e.length;n++)Xn(e[n]);for(var i=0;i<e.length;i++)Zn(e[i]);for(var s=0;s<e.length;s++)Kn(e[s]);for(var o=0;o<e.length;o++)Jn(e[o])}(t)}))}function Yn(t){var e=t.cm,r=e.display;(function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Ar(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Ar(t)+"px",e.scrollbarsClipped=!0)})(e),t.updateMaxLine&&je(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new si(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Xn(t){t.updatedDisplay=t.mustUpdate&&oi(t.cm,t.update)}function Zn(t){var e=t.cm,r=e.display;t.updatedDisplay&&Nn(e),t.barMeasure=Bn(e),r.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Cr(e,r.maxLine,r.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+t.adjustWidthTo+Ar(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+t.adjustWidthTo-Nr(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=r.input.prepareSelection())}function Kn(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&qn(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var r=t.focus&&t.focus==I();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,r),(t.updatedDisplay||t.startHeight!=e.doc.height)&&zn(e,t.barMeasure),t.updatedDisplay&&ci(e,t.barMeasure),t.selectionChanged&&_n(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),r&&wn(t.cm)}function Jn(t){var e=t.cm,r=e.display,n=e.doc;t.updatedDisplay&&ai(e,t.update),null==r.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=t.scrollTop&&Dn(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&qn(e,t.scrollLeft,!0,!0),t.scrollToPos&&function(t,e){if(!mt(t,"scrollCursorIntoView")){var r=t.display,n=r.sizer.getBoundingClientRect(),i=null;if(e.top+n.top<0?i=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!d){var s=C("div","​",null,"position: absolute;\n                         top: "+(e.top-r.viewOffset-wr(t.display))+"px;\n                         height: "+(e.bottom-e.top+Ar(t)+r.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(s),s.scrollIntoView(i),t.display.lineSpace.removeChild(s)}}}(e,function(t,e,r,n){var i;null==n&&(n=0),t.options.lineWrapping||e!=r||(r="before"==(e=e.ch?te(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?te(e.line,e.ch+1,"before"):e);for(var s=0;s<5;s++){var o=!1,a=Hr(t,e),u=r&&r!=e?Hr(t,r):a,l=Cn(t,i={left:Math.min(a.left,u.left),top:Math.min(a.top,u.top)-n,right:Math.max(a.left,u.left),bottom:Math.max(a.bottom,u.bottom)+n}),c=t.doc.scrollTop,p=t.doc.scrollLeft;if(null!=l.scrollTop&&(Ln(t,l.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(o=!0)),null!=l.scrollLeft&&(qn(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-p)>1&&(o=!0)),!o)break}return i}(e,ae(n,t.scrollToPos.from),ae(n,t.scrollToPos.to),t.scrollToPos.margin));var i=t.maybeHiddenMarkers,s=t.maybeUnhiddenMarkers;if(i)for(var o=0;o<i.length;++o)i[o].lines.length||dt(i[o],"hide");if(s)for(var a=0;a<s.length;++a)s[a].lines.length&&dt(s[a],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&dt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Qn(t,e){if(t.curOp)return e();Hn(t);try{return e()}finally{Wn(t)}}function ti(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Hn(t);try{return e.apply(t,arguments)}finally{Wn(t)}}}function ei(t){return function(){if(this.curOp)return t.apply(this,arguments);Hn(this);try{return t.apply(this,arguments)}finally{Wn(this)}}}function ri(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Hn(e);try{return t.apply(this,arguments)}finally{Wn(e)}}}function ni(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,D(ii,t))}function ii(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var r=+new Date+t.options.workTime,n=fe(t,e.highlightFrontier),i=[];e.iter(n.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(s){if(n.line>=t.display.viewFrom){var o=s.styles,a=s.text.length>t.options.maxHighlightLength?Ft(e.mode,n.state):null,u=pe(t,s,n,!0);a&&(n.state=a),s.styles=u.styles;var l=s.styleClasses,c=u.classes;c?s.styleClasses=c:l&&(s.styleClasses=null);for(var p=!o||o.length!=s.styles.length||l!=c&&(!l||!c||l.bgClass!=c.bgClass||l.textClass!=c.textClass),h=0;!p&&h<o.length;++h)p=o[h]!=s.styles[h];p&&i.push(n.line),s.stateAfter=n.save(),n.nextLine()}else s.text.length<=t.options.maxHighlightLength&&de(t,s.text,n),s.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return ni(t,t.options.workDelay),!0})),e.highlightFrontier=n.line,e.modeFrontier=Math.max(e.modeFrontier,n.line),i.length&&Qn(t,(function(){for(var e=0;e<i.length;e++)hn(t,i[e],"text")}))}}var si=function(t,e,r){var n=t.display;this.viewport=e,this.visible=kn(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Nr(t),this.force=r,this.dims=sn(t),this.events=[]};function oi(t,e){var r=t.display,n=t.doc;if(e.editorIsHidden)return fn(t),!1;if(!e.force&&e.visible.from>=r.viewFrom&&e.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==mn(t))return!1;hi(t)&&(fn(t),e.dims=sn(t));var i=n.first+n.size,s=Math.max(e.visible.from-t.options.viewportMargin,n.first),o=Math.min(i,e.visible.to+t.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(n.first,r.viewFrom)),r.viewTo>o&&r.viewTo-o<20&&(o=Math.min(i,r.viewTo)),we&&(s=Ue(t.doc,s),o=$e(t.doc,o));var a=s!=r.viewFrom||o!=r.viewTo||r.lastWrapHeight!=e.wrapperHeight||r.lastWrapWidth!=e.wrapperWidth;(function(t,e,r){var n=t.display;0==n.view.length||e>=n.viewTo||r<=n.viewFrom?(n.view=ir(t,e,r),n.viewFrom=e):(n.viewFrom>e?n.view=ir(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(cn(t,e))),n.viewFrom=e,n.viewTo<r?n.view=n.view.concat(ir(t,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,cn(t,r)))),n.viewTo=r})(t,s,o),r.viewOffset=Ge(Ht(t.doc,r.viewFrom)),t.display.mover.style.top=r.viewOffset+"px";var l=mn(t);if(!a&&0==l&&!e.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=function(t){if(t.hasFocus())return null;var e=I();if(!e||!O(t.display.lineDiv,e))return null;var r={activeElt:e};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&O(t.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}(t);return l>4&&(r.lineDiv.style.display="none"),function(t,e,r){var n=t.display,i=t.options.lineNumbers,s=n.lineDiv,o=s.firstChild;function a(e){var r=e.nextSibling;return u&&v&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),r}for(var l=n.view,c=n.viewFrom,p=0;p<l.length;p++){var h=l[p];if(h.hidden);else if(h.node&&h.node.parentNode==s){for(;o!=h.node;)o=a(o);var f=i&&null!=e&&e<=c&&h.lineNumber;h.changes&&($(h.changes,"gutter")>-1&&(f=!1),lr(t,h,c,r)),f&&(M(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(Qt(t.options,c)))),o=h.node.nextSibling}else{var d=gr(t,h,c,r);s.insertBefore(d,o)}c+=h.size}for(;o;)o=a(o)}(t,r.updateLineNumbers,e.dims),l>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,function(t){if(t&&t.activeElt&&t.activeElt!=I()&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&O(document.body,t.anchorNode)&&O(document.body,t.focusNode))){var e=window.getSelection(),r=document.createRange();r.setEnd(t.anchorNode,t.anchorOffset),r.collapse(!1),e.removeAllRanges(),e.addRange(r),e.extend(t.focusNode,t.focusOffset)}}(c),M(r.cursorDiv),M(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,a&&(r.lastWrapHeight=e.wrapperHeight,r.lastWrapWidth=e.wrapperWidth,ni(t,400)),r.updateLineNumbers=null,!0}function ai(t,e){for(var r=e.viewport,n=!0;;n=!1){if(n&&t.options.lineWrapping&&e.oldDisplayWidth!=Nr(t))n&&(e.visible=kn(t.display,t.doc,r));else if(r&&null!=r.top&&(r={top:Math.min(t.doc.height+Er(t.display)-Mr(t),r.top)}),e.visible=kn(t.display,t.doc,r),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!oi(t,e))break;Nn(t);var i=Bn(t);gn(t),zn(t,i),ci(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ui(t,e){var r=new si(t,e);if(oi(t,r)){Nn(t),ai(t,r);var n=Bn(t);gn(t),zn(t,n),ci(t,n),r.finish()}}function li(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px",ar(t,"gutterChanged",t)}function ci(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Ar(t)+"px"}function pi(t){var e=t.display,r=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var n=on(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,s=n+"px",o=0;o<r.length;o++)if(!r[o].hidden){t.options.fixedGutter&&(r[o].gutter&&(r[o].gutter.style.left=s),r[o].gutterBackground&&(r[o].gutterBackground.style.left=s));var a=r[o].alignable;if(a)for(var u=0;u<a.length;u++)a[u].style.left=s}t.options.fixedGutter&&(e.gutters.style.left=n+i+"px")}}function hi(t){if(!t.options.lineNumbers)return!1;var e=t.doc,r=Qt(t.options,e.first+e.size-1),n=t.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(C("div",[C("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(s,n.lineGutter.offsetWidth-o)+1,n.lineNumWidth=n.lineNumInnerWidth+o,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",li(t.display),!0}return!1}function fi(t,e){for(var r=[],n=!1,i=0;i<t.length;i++){var s=t[i],o=null;if("string"!=typeof s&&(o=s.style,s=s.className),"CodeMirror-linenumbers"==s){if(!e)continue;n=!0}r.push({className:s,style:o})}return e&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function di(t){var e=t.gutters,r=t.gutterSpecs;M(e),t.lineGutter=null;for(var n=0;n<r.length;++n){var i=r[n],s=i.className,o=i.style,a=e.appendChild(C("div",null,"CodeMirror-gutter "+s));o&&(a.style.cssText=o),"CodeMirror-linenumbers"==s&&(t.lineGutter=a,a.style.width=(t.lineNumWidth||1)+"px")}e.style.display=r.length?"":"none",li(t)}function mi(t){di(t.display),pn(t),pi(t)}function gi(t,e,n,i){var s=this;this.input=n,s.scrollbarFiller=C("div",null,"CodeMirror-scrollbar-filler"),s.scrollbarFiller.setAttribute("cm-not-content","true"),s.gutterFiller=C("div",null,"CodeMirror-gutter-filler"),s.gutterFiller.setAttribute("cm-not-content","true"),s.lineDiv=T("div",null,"CodeMirror-code"),s.selectionDiv=C("div",null,null,"position: relative; z-index: 1"),s.cursorDiv=C("div",null,"CodeMirror-cursors"),s.measure=C("div",null,"CodeMirror-measure"),s.lineMeasure=C("div",null,"CodeMirror-measure"),s.lineSpace=T("div",[s.measure,s.lineMeasure,s.selectionDiv,s.cursorDiv,s.lineDiv],null,"position: relative; outline: none");var l=T("div",[s.lineSpace],"CodeMirror-lines");s.mover=C("div",[l],null,"position: relative"),s.sizer=C("div",[s.mover],"CodeMirror-sizer"),s.sizerWidth=null,s.heightForcer=C("div",null,null,"position: absolute; height: 50px; width: 1px;"),s.gutters=C("div",null,"CodeMirror-gutters"),s.lineGutter=null,s.scroller=C("div",[s.sizer,s.heightForcer,s.gutters],"CodeMirror-scroll"),s.scroller.setAttribute("tabIndex","-1"),s.wrapper=C("div",[s.scrollbarFiller,s.gutterFiller,s.scroller],"CodeMirror"),o&&a<8&&(s.gutters.style.zIndex=-1,s.scroller.style.paddingRight=0),u||r&&y||(s.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(s.wrapper):t(s.wrapper)),s.viewFrom=s.viewTo=e.first,s.reportedViewFrom=s.reportedViewTo=e.first,s.view=[],s.renderedView=null,s.externalMeasured=null,s.viewOffset=0,s.lastWrapHeight=s.lastWrapWidth=0,s.updateLineNumbers=null,s.nativeBarWidth=s.barHeight=s.barWidth=0,s.scrollbarsClipped=!1,s.lineNumWidth=s.lineNumInnerWidth=s.lineNumChars=null,s.alignWidgets=!1,s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.maxLine=null,s.maxLineLength=0,s.maxLineChanged=!1,s.wheelDX=s.wheelDY=s.wheelStartX=s.wheelStartY=null,s.shift=!1,s.selForContextMenu=null,s.activeTouch=null,s.gutterSpecs=fi(i.gutters,i.lineNumbers),di(s),n.init(s)}si.prototype.signal=function(t,e){yt(t,e)&&this.events.push(arguments)},si.prototype.finish=function(){for(var t=0;t<this.events.length;t++)dt.apply(null,this.events[t])};var yi=0,vi=null;function bi(t){var e=t.wheelDeltaX,r=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==r&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:null==r&&(r=t.wheelDelta),{x:e,y:r}}function xi(t){var e=bi(t);return e.x*=vi,e.y*=vi,e}function _i(t,e){var n=bi(e),i=n.x,s=n.y,o=t.display,a=o.scroller,l=a.scrollWidth>a.clientWidth,c=a.scrollHeight>a.clientHeight;if(i&&l||s&&c){if(s&&v&&u)t:for(var h=e.target,f=o.view;h!=a;h=h.parentNode)for(var d=0;d<f.length;d++)if(f[d].node==h){t.display.currentWheelTarget=h;break t}if(i&&!r&&!p&&null!=vi)return s&&c&&Ln(t,Math.max(0,a.scrollTop+s*vi)),qn(t,Math.max(0,a.scrollLeft+i*vi)),(!s||s&&c)&&bt(e),void(o.wheelStartX=null);if(s&&null!=vi){var m=s*vi,g=t.doc.scrollTop,y=g+o.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):y=Math.min(t.doc.height,y+m+50),ui(t,{top:g,bottom:y})}yi<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=i,o.wheelDY=s,setTimeout((function(){if(null!=o.wheelStartX){var t=a.scrollLeft-o.wheelStartX,e=a.scrollTop-o.wheelStartY,r=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(vi=(vi*yi+r)/(yi+1),++yi)}}),200)):(o.wheelDX+=i,o.wheelDY+=s))}}o?vi=-.53:r?vi=15:c?vi=-.7:h&&(vi=-1/3);var wi=function(t,e){this.ranges=t,this.primIndex=e};wi.prototype.primary=function(){return this.ranges[this.primIndex]},wi.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var r=this.ranges[e],n=t.ranges[e];if(!re(r.anchor,n.anchor)||!re(r.head,n.head))return!1}return!0},wi.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new Ei(ne(this.ranges[e].anchor),ne(this.ranges[e].head));return new wi(t,this.primIndex)},wi.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},wi.prototype.contains=function(t,e){e||(e=t);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(ee(e,n.from())>=0&&ee(t,n.to())<=0)return r}return-1};var Ei=function(t,e){this.anchor=t,this.head=e};function Si(t,e,r){var n=t&&t.options.selectionsMayTouch,i=e[r];e.sort((function(t,e){return ee(t.from(),e.from())})),r=$(e,i);for(var s=1;s<e.length;s++){var o=e[s],a=e[s-1],u=ee(a.to(),o.from());if(n&&!o.empty()?u>0:u>=0){var l=se(a.from(),o.from()),c=ie(a.to(),o.to()),p=a.empty()?o.from()==o.head:a.from()==a.head;s<=r&&--r,e.splice(--s,2,new Ei(p?c:l,p?l:c))}}return new wi(e,r)}function Ai(t,e){return new wi([new Ei(t,e||t)],0)}function Ni(t){return t.text?te(t.from.line+t.text.length-1,Y(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Mi(t,e){if(ee(t,e.from)<0)return t;if(ee(t,e.to)<=0)return Ni(e);var r=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=Ni(e).ch-e.to.ch),te(r,n)}function ki(t,e){for(var r=[],n=0;n<t.sel.ranges.length;n++){var i=t.sel.ranges[n];r.push(new Ei(Mi(i.anchor,e),Mi(i.head,e)))}return Si(t.cm,r,t.sel.primIndex)}function Ci(t,e,r){return t.line==e.line?te(r.line,t.ch-e.ch+r.ch):te(r.line+(t.line-e.line),t.ch)}function Ti(t){t.doc.mode=Ut(t.options,t.doc.modeOption),Oi(t)}function Oi(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ni(t,100),t.state.modeGen++,t.curOp&&pn(t)}function Ii(t,e){return 0==e.from.ch&&0==e.to.ch&&""==Y(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Pi(t,e,r,n){function i(t){return r?r[t]:null}function s(t,r,i){(function(t,e,r,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),ke(t),Ce(t,r);var i=n?n(t):1;i!=t.height&&Xt(t,i)})(t,r,i,n),ar(t,"change",t,e)}function o(t,e){for(var r=[],s=t;s<e;++s)r.push(new He(l[s],i(s),n));return r}var a=e.from,u=e.to,l=e.text,c=Ht(t,a.line),p=Ht(t,u.line),h=Y(l),f=i(l.length-1),d=u.line-a.line;if(e.full)t.insert(0,o(0,l.length)),t.remove(l.length,t.size-l.length);else if(Ii(t,e)){var m=o(0,l.length-1);s(p,p.text,f),d&&t.remove(a.line,d),m.length&&t.insert(a.line,m)}else if(c==p)if(1==l.length)s(c,c.text.slice(0,a.ch)+h+c.text.slice(u.ch),f);else{var g=o(1,l.length-1);g.push(new He(h+c.text.slice(u.ch),f,n)),s(c,c.text.slice(0,a.ch)+l[0],i(0)),t.insert(a.line+1,g)}else if(1==l.length)s(c,c.text.slice(0,a.ch)+l[0]+p.text.slice(u.ch),i(0)),t.remove(a.line+1,d);else{s(c,c.text.slice(0,a.ch)+l[0],i(0)),s(p,h+p.text.slice(u.ch),f);var y=o(1,l.length-1);d>1&&t.remove(a.line+1,d-1),t.insert(a.line+1,y)}ar(t,"change",t,e)}function Ri(t,e,r){!function t(n,i,s){if(n.linked)for(var o=0;o<n.linked.length;++o){var a=n.linked[o];if(a.doc!=i){var u=s&&a.sharedHist;r&&!u||(e(a.doc,u),t(a.doc,n,u))}}}(t,null,!0)}function Li(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,un(t),Ti(t),Di(t),t.options.lineWrapping||je(t),t.options.mode=e.modeOption,pn(t)}function Di(t){("rtl"==t.doc.direction?P:N)(t.display.lineDiv,"CodeMirror-rtl")}function qi(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Bi(t,e){var r={from:ne(e.from),to:Ni(e),text:Wt(t,e.from,e.to)};return Gi(t,r,e.from.line,e.to.line+1),Ri(t,(function(t){return Gi(t,r,e.from.line,e.to.line+1)}),!0),r}function Ui(t){for(;t.length&&Y(t).ranges;)t.pop()}function $i(t,e,r,n){var i=t.history;i.undone.length=0;var s,o,a=+new Date;if((i.lastOp==n||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&i.lastModTime>a-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(s=function(t,e){return e?(Ui(t.done),Y(t.done)):t.done.length&&!Y(t.done).ranges?Y(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),Y(t.done)):void 0}(i,i.lastOp==n)))o=Y(s.changes),0==ee(e.from,e.to)&&0==ee(e.from,o.to)?o.to=Ni(e):s.changes.push(Bi(t,e));else{var u=Y(i.done);for(u&&u.ranges||Fi(t.sel,i.done),s={changes:[Bi(t,e)],generation:i.generation},i.done.push(s);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=e.origin,o||dt(t,"historyAdded")}function zi(t,e,r,n){var i=t.history,s=n&&n.origin;r==i.lastSelOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||function(t,e,r,n){var i=e.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,s,Y(i.done),e))?i.done[i.done.length-1]=e:Fi(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=s,i.lastSelOp=r,n&&!1!==n.clearRedo&&Ui(i.undone)}function Fi(t,e){var r=Y(e);r&&r.ranges&&r.equals(t)||e.push(t)}function Gi(t,e,r,n){var i=e["spans_"+t.id],s=0;t.iter(Math.max(t.first,r),Math.min(t.first+t.size,n),(function(r){r.markedSpans&&((i||(i=e["spans_"+t.id]={}))[s]=r.markedSpans),++s}))}function Vi(t){if(!t)return null;for(var e,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?e||(e=t.slice(0,r)):e&&e.push(t[r]);return e?e.length?e:null:t}function ji(t,e){var r=function(t,e){var r=e["spans_"+t.id];if(!r)return null;for(var n=[],i=0;i<e.text.length;++i)n.push(Vi(r[i]));return n}(t,e),n=Ne(t,e);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var s=r[i],o=n[i];if(s&&o)t:for(var a=0;a<o.length;++a){for(var u=o[a],l=0;l<s.length;++l)if(s[l].marker==u.marker)continue t;s.push(u)}else o&&(r[i]=o)}return r}function Hi(t,e,r){for(var n=[],i=0;i<t.length;++i){var s=t[i];if(s.ranges)n.push(r?wi.prototype.deepCopy.call(s):s);else{var o=s.changes,a=[];n.push({changes:a});for(var u=0;u<o.length;++u){var l=o[u],c=void 0;if(a.push({from:l.from,to:l.to,text:l.text}),e)for(var p in l)(c=p.match(/^spans_(\d+)$/))&&$(e,Number(c[1]))>-1&&(Y(a)[p]=l[p],delete l[p])}}}return n}function Wi(t,e,r,n){if(n){var i=t.anchor;if(r){var s=ee(e,i)<0;s!=ee(r,i)<0?(i=e,e=r):s!=ee(e,r)<0&&(e=r)}return new Ei(i,e)}return new Ei(r||e,e)}function Yi(t,e,r,n,i){null==i&&(i=t.cm&&(t.cm.display.shift||t.extend)),Qi(t,new wi([Wi(t.sel.primary(),e,r,i)],0),n)}function Xi(t,e,r){for(var n=[],i=t.cm&&(t.cm.display.shift||t.extend),s=0;s<t.sel.ranges.length;s++)n[s]=Wi(t.sel.ranges[s],e[s],null,i);Qi(t,Si(t.cm,n,t.sel.primIndex),r)}function Zi(t,e,r,n){var i=t.sel.ranges.slice(0);i[e]=r,Qi(t,Si(t.cm,i,t.sel.primIndex),n)}function Ki(t,e,r,n){Qi(t,Ai(e,r),n)}function Ji(t,e,r){var n=t.history.done,i=Y(n);i&&i.ranges?(n[n.length-1]=e,ts(t,e,r)):Qi(t,e,r)}function Qi(t,e,r){ts(t,e,r),zi(t,t.sel,t.cm?t.cm.curOp.id:NaN,r)}function ts(t,e,r){(yt(t,"beforeSelectionChange")||t.cm&&yt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,r){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var r=0;r<e.length;r++)this.ranges[r]=new Ei(ae(t,e[r].anchor),ae(t,e[r].head))},origin:r&&r.origin};return dt(t,"beforeSelectionChange",t,n),t.cm&&dt(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?Si(t.cm,n.ranges,n.ranges.length-1):e}(t,e,r));var n=r&&r.bias||(ee(e.primary().head,t.sel.primary().head)<0?-1:1);es(t,ns(t,e,n,!0)),r&&!1===r.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||On(t.cm)}function es(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,gt(t.cm)),ar(t,"cursorActivity",t))}function rs(t){es(t,ns(t,t.sel,null,!1))}function ns(t,e,r,n){for(var i,s=0;s<e.ranges.length;s++){var o=e.ranges[s],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[s],u=ss(t,o.anchor,a&&a.anchor,r,n),l=ss(t,o.head,a&&a.head,r,n);(i||u!=o.anchor||l!=o.head)&&(i||(i=e.ranges.slice(0,s)),i[s]=new Ei(u,l))}return i?Si(t.cm,i,e.primIndex):e}function is(t,e,r,n,i){var s=Ht(t,e.line);if(s.markedSpans)for(var o=0;o<s.markedSpans.length;++o){var a=s.markedSpans[o],u=a.marker,l="selectLeft"in u?!u.selectLeft:u.inclusiveLeft,c="selectRight"in u?!u.selectRight:u.inclusiveRight;if((null==a.from||(l?a.from<=e.ch:a.from<e.ch))&&(null==a.to||(c?a.to>=e.ch:a.to>e.ch))){if(i&&(dt(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--o;continue}break}if(!u.atomic)continue;if(r){var p=u.find(n<0?1:-1),h=void 0;if((n<0?c:l)&&(p=os(t,p,-n,p&&p.line==e.line?s:null)),p&&p.line==e.line&&(h=ee(p,r))&&(n<0?h<0:h>0))return is(t,p,e,n,i)}var f=u.find(n<0?-1:1);return(n<0?l:c)&&(f=os(t,f,n,f.line==e.line?s:null)),f?is(t,f,e,n,i):null}}return e}function ss(t,e,r,n,i){var s=n||1;return is(t,e,r,s,i)||!i&&is(t,e,r,s,!0)||is(t,e,r,-s,i)||!i&&is(t,e,r,-s,!0)||(t.cantEdit=!0,te(t.first,0))}function os(t,e,r,n){return r<0&&0==e.ch?e.line>t.first?ae(t,te(e.line-1)):null:r>0&&e.ch==(n||Ht(t,e.line)).text.length?e.line<t.first+t.size-1?te(e.line+1,0):null:new te(e.line,e.ch+r)}function as(t){t.setSelection(te(t.firstLine(),0),te(t.lastLine()),F)}function us(t,e,r){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(e,r,i,s){e&&(n.from=ae(t,e)),r&&(n.to=ae(t,r)),i&&(n.text=i),void 0!==s&&(n.origin=s)}),dt(t,"beforeChange",t,n),t.cm&&dt(t.cm,"beforeChange",t.cm,n),n.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function ls(t,e,r){if(t.cm){if(!t.cm.curOp)return ti(t.cm,ls)(t,e,r);if(t.cm.state.suppressEdits)return}if(!(yt(t,"beforeChange")||t.cm&&yt(t.cm,"beforeChange"))||(e=us(t,e,!0))){var n=_e&&!r&&function(t,e,r){var n=null;if(t.iter(e.line,r.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var r=t.markedSpans[e].marker;!r.readOnly||n&&-1!=$(n,r)||(n||(n=[])).push(r)}})),!n)return null;for(var i=[{from:e,to:r}],s=0;s<n.length;++s)for(var o=n[s],a=o.find(0),u=0;u<i.length;++u){var l=i[u];if(!(ee(l.to,a.from)<0||ee(l.from,a.to)>0)){var c=[u,1],p=ee(l.from,a.from),h=ee(l.to,a.to);(p<0||!o.inclusiveLeft&&!p)&&c.push({from:l.from,to:a.from}),(h>0||!o.inclusiveRight&&!h)&&c.push({from:a.to,to:l.to}),i.splice.apply(i,c),u+=c.length-3}}return i}(t,e.from,e.to);if(n)for(var i=n.length-1;i>=0;--i)cs(t,{from:n[i].from,to:n[i].to,text:i?[""]:e.text,origin:e.origin});else cs(t,e)}}function cs(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ee(e.from,e.to)){var r=ki(t,e);$i(t,e,r,t.cm?t.cm.curOp.id:NaN),fs(t,e,r,Ne(t,e));var n=[];Ri(t,(function(t,r){r||-1!=$(n,t.history)||(ys(t.history,e),n.push(t.history)),fs(t,e,null,Ne(t,e))}))}}function ps(t,e,r){var n=t.cm&&t.cm.state.suppressEdits;if(!n||r){for(var i,s=t.history,o=t.sel,a="undo"==e?s.done:s.undone,u="undo"==e?s.undone:s.done,l=0;l<a.length&&(i=a[l],r?!i.ranges||i.equals(t.sel):i.ranges);l++);if(l!=a.length){for(s.lastOrigin=s.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(n)return void a.push(i);break}if(Fi(i,u),r&&!i.equals(t.sel))return void Qi(t,i,{clearRedo:!1});o=i}var c=[];Fi(o,u),u.push({changes:c,generation:s.generation}),s.generation=i.generation||++s.maxGeneration;for(var p=yt(t,"beforeChange")||t.cm&&yt(t.cm,"beforeChange"),h=function(r){var n=i.changes[r];if(n.origin=e,p&&!us(t,n,!1))return a.length=0,{};c.push(Bi(t,n));var s=r?ki(t,n):Y(a);fs(t,n,s,ji(t,n)),!r&&t.cm&&t.cm.scrollIntoView({from:n.from,to:Ni(n)});var o=[];Ri(t,(function(t,e){e||-1!=$(o,t.history)||(ys(t.history,n),o.push(t.history)),fs(t,n,null,ji(t,n))}))},f=i.changes.length-1;f>=0;--f){var d=h(f);if(d)return d.v}}}}function hs(t,e){if(0!=e&&(t.first+=e,t.sel=new wi(X(t.sel.ranges,(function(t){return new Ei(te(t.anchor.line+e,t.anchor.ch),te(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){pn(t.cm,t.first,t.first-e,e);for(var r=t.cm.display,n=r.viewFrom;n<r.viewTo;n++)hn(t.cm,n,"gutter")}}function fs(t,e,r,n){if(t.cm&&!t.cm.curOp)return ti(t.cm,fs)(t,e,r,n);if(e.to.line<t.first)hs(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);hs(t,i),e={from:te(t.first,0),to:te(e.to.line+i,e.to.ch),text:[Y(e.text)],origin:e.origin}}var s=t.lastLine();e.to.line>s&&(e={from:e.from,to:te(s,Ht(t,s).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Wt(t,e.from,e.to),r||(r=ki(t,e)),t.cm?function(t,e,r){var n=t.doc,i=t.display,s=e.from,o=e.to,a=!1,u=s.line;t.options.lineWrapping||(u=Zt(Be(Ht(n,s.line))),n.iter(u,o.line+1,(function(t){if(t==i.maxLine)return a=!0,!0}))),n.sel.contains(e.from,e.to)>-1&&gt(t),Pi(n,e,r,an(t)),t.options.lineWrapping||(n.iter(u,s.line+e.text.length,(function(t){var e=Ve(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,a=!1)})),a&&(t.curOp.updateMaxLine=!0)),function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var r=t.first,n=e-1;n>r;n--){var i=Ht(t,n).stateAfter;if(i&&(!(i instanceof le)||n+i.lookAhead<e)){r=n+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,r)}}(n,s.line),ni(t,400);var l=e.text.length-(o.line-s.line)-1;e.full?pn(t):s.line!=o.line||1!=e.text.length||Ii(t.doc,e)?pn(t,s.line,o.line+1,l):hn(t,s.line,"text");var c=yt(t,"changes"),p=yt(t,"change");if(p||c){var h={from:s,to:o,text:e.text,removed:e.removed,origin:e.origin};p&&ar(t,"change",t,h),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(h)}t.display.selForContextMenu=null}(t.cm,e,n):Pi(t,e,n),ts(t,r,F),t.cantEdit&&ss(t,te(t.firstLine(),0))&&(t.cantEdit=!1)}}function ds(t,e,r,n,i){var s;n||(n=r),ee(n,r)<0&&(r=(s=[n,r])[0],n=s[1]),"string"==typeof e&&(e=t.splitLines(e)),ls(t,{from:r,to:n,text:e,origin:i})}function ms(t,e,r,n){r<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function gs(t,e,r,n){for(var i=0;i<t.length;++i){var s=t[i],o=!0;if(s.ranges){s.copied||((s=t[i]=s.deepCopy()).copied=!0);for(var a=0;a<s.ranges.length;a++)ms(s.ranges[a].anchor,e,r,n),ms(s.ranges[a].head,e,r,n)}else{for(var u=0;u<s.changes.length;++u){var l=s.changes[u];if(r<l.from.line)l.from=te(l.from.line+n,l.from.ch),l.to=te(l.to.line+n,l.to.ch);else if(e<=l.to.line){o=!1;break}}o||(t.splice(0,i+1),i=0)}}}function ys(t,e){var r=e.from.line,n=e.to.line,i=e.text.length-(n-r)-1;gs(t.done,r,n,i),gs(t.undone,r,n,i)}function vs(t,e,r,n){var i=e,s=e;return"number"==typeof e?s=Ht(t,oe(t,e)):i=Zt(e),null==i?null:(n(s,i)&&t.cm&&hn(t.cm,i,r),s)}function bs(t){this.lines=t,this.parent=null;for(var e=0,r=0;r<t.length;++r)t[r].parent=this,e+=t[r].height;this.height=e}function xs(t){this.children=t;for(var e=0,r=0,n=0;n<t.length;++n){var i=t[n];e+=i.chunkSize(),r+=i.height,i.parent=this}this.size=e,this.height=r,this.parent=null}Ei.prototype.from=function(){return se(this.anchor,this.head)},Ei.prototype.to=function(){return ie(this.anchor,this.head)},Ei.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},bs.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var r=t,n=t+e;r<n;++r){var i=this.lines[r];this.height-=i.height,We(i),ar(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,r){this.height+=r,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,r){for(var n=t+e;t<n;++t)if(r(this.lines[t]))return!0}},xs.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(t<i){var s=Math.min(e,i-t),o=n.height;if(n.removeInner(t,s),this.height-=o-n.height,i==s&&(this.children.splice(r--,1),n.parent=null),0==(e-=s))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof bs))){var a=[];this.collapse(a),this.children=[new bs(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,r){this.size+=e.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],s=i.chunkSize();if(t<=s){if(i.insertInner(t,e,r),i.lines&&i.lines.length>50){for(var o=i.lines.length%25+25,a=o;a<i.lines.length;){var u=new bs(i.lines.slice(a,a+=25));i.height-=u.height,this.children.splice(++n,0,u),u.parent=this}i.lines=i.lines.slice(0,o),this.maybeSpill()}break}t-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new xs(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var r=$(t.parent.children,t);t.parent.children.splice(r+1,0,e)}else{var n=new xs(t.children);n.parent=t,t.children=[n,e],t=n}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],s=i.chunkSize();if(t<s){var o=Math.min(e,s-t);if(i.iterN(t,o,r))return!0;if(0==(e-=o))break;t=0}else t-=s}}};var _s=function(t,e,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=t,this.node=e};function ws(t,e,r){Ge(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Tn(t,r)}_s.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,r=this.line,n=Zt(r);if(null!=n&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(r.widgets=null);var s=xr(this);Xt(r,Math.max(0,r.height-s)),t&&(Qn(t,(function(){ws(t,r,-s),hn(t,n,"widget")})),ar(t,"lineWidgetCleared",t,this,n))}},_s.prototype.changed=function(){var t=this,e=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=xr(this)-e;i&&(ze(this.doc,n)||Xt(n,n.height+i),r&&Qn(r,(function(){r.curOp.forceUpdate=!0,ws(r,n,i),ar(r,"lineWidgetChanged",r,t,Zt(n))})))},vt(_s);var Es=0,Ss=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Es};function As(t,e,r,n,i){if(n&&n.shared)return function(t,e,r,n,i){(n=q(n)).shared=!1;var s=[As(t,e,r,n,i)],o=s[0],a=n.widgetNode;return Ri(t,(function(t){a&&(n.widgetNode=a.cloneNode(!0)),s.push(As(t,ae(t,e),ae(t,r),n,i));for(var u=0;u<t.linked.length;++u)if(t.linked[u].isParent)return;o=Y(s)})),new Ns(s,o)}(t,e,r,n,i);if(t.cm&&!t.cm.curOp)return ti(t.cm,As)(t,e,r,n,i);var s=new Ss(t,i),o=ee(e,r);if(n&&q(n,s,!1),o>0||0==o&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=T("span",[s.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(qe(t,e.line,e,r,s)||e.line!=r.line&&qe(t,r.line,e,r,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");we=!0}s.addToHistory&&$i(t,{from:e,to:r,origin:"markText"},t.sel,NaN);var a,u=e.line,l=t.cm;if(t.iter(u,r.line+1,(function(t){l&&s.collapsed&&!l.options.lineWrapping&&Be(t)==l.display.maxLine&&(a=!0),s.collapsed&&u!=e.line&&Xt(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new Ee(s,u==e.line?e.ch:null,u==r.line?r.ch:null)),++u})),s.collapsed&&t.iter(e.line,r.line+1,(function(e){ze(t,e)&&Xt(e,0)})),s.clearOnEnter&&pt(s,"beforeCursorEnter",(function(){return s.clear()})),s.readOnly&&(_e=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++Es,s.atomic=!0),l){if(a&&(l.curOp.updateMaxLine=!0),s.collapsed)pn(l,e.line,r.line+1);else if(s.className||s.startStyle||s.endStyle||s.css||s.attributes||s.title)for(var c=e.line;c<=r.line;c++)hn(l,c,"text");s.atomic&&rs(l.doc),ar(l,"markerAdded",l,s)}return s}Ss.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Hn(t),yt(this,"clear")){var r=this.find();r&&ar(this,"clear",r.from,r.to)}for(var n=null,i=null,s=0;s<this.lines.length;++s){var o=this.lines[s],a=Se(o.markedSpans,this);t&&!this.collapsed?hn(t,Zt(o),"text"):t&&(null!=a.to&&(i=Zt(o)),null!=a.from&&(n=Zt(o))),o.markedSpans=Ae(o.markedSpans,a),null==a.from&&this.collapsed&&!ze(this.doc,o)&&t&&Xt(o,rn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var l=Be(this.lines[u]),c=Ve(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&pn(t,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&rs(t.doc)),t&&ar(t,"markerCleared",t,this,n,i),e&&Wn(t),this.parent&&this.parent.clear()}},Ss.prototype.find=function(t,e){var r,n;null==t&&"bookmark"==this.type&&(t=1);for(var i=0;i<this.lines.length;++i){var s=this.lines[i],o=Se(s.markedSpans,this);if(null!=o.from&&(r=te(e?s:Zt(s),o.from),-1==t))return r;if(null!=o.to&&(n=te(e?s:Zt(s),o.to),1==t))return n}return r&&{from:r,to:n}},Ss.prototype.changed=function(){var t=this,e=this.find(-1,!0),r=this,n=this.doc.cm;e&&n&&Qn(n,(function(){var i=e.line,s=Zt(e.line),o=Tr(n,s);if(o&&(qr(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!ze(r.doc,i)&&null!=r.height){var a=r.height;r.height=null;var u=xr(r)-a;u&&Xt(i,i.height+u)}ar(n,"markerChanged",n,t)}))},Ss.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=$(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Ss.prototype.detachLine=function(t){if(this.lines.splice($(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},vt(Ss);var Ns=function(t,e){this.markers=t,this.primary=e;for(var r=0;r<t.length;++r)t[r].parent=this};function Ms(t){return t.findMarks(te(t.first,0),t.clipPos(te(t.lastLine())),(function(t){return t.parent}))}function ks(t){for(var e=function(e){var r=t[e],n=[r.primary.doc];Ri(r.primary.doc,(function(t){return n.push(t)}));for(var i=0;i<r.markers.length;i++){var s=r.markers[i];-1==$(n,s.doc)&&(s.parent=null,r.markers.splice(i--,1))}},r=0;r<t.length;r++)e(r)}Ns.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ar(this,"clear")}},Ns.prototype.find=function(t,e){return this.primary.find(t,e)},vt(Ns);var Cs=0,Ts=function(t,e,r,n,i){if(!(this instanceof Ts))return new Ts(t,e,r,n,i);null==r&&(r=0),xs.call(this,[new bs([new He("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var s=te(r,0);this.sel=Ai(s),this.history=new qi(null),this.id=++Cs,this.modeOption=e,this.lineSep=n,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Pi(this,{from:s,to:s,text:t}),Qi(this,Ai(s),F)};Ts.prototype=K(xs.prototype,{constructor:Ts,iter:function(t,e,r){r?this.iterN(t-this.first,e-t,r):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var r=0,n=0;n<e.length;++n)r+=e[n].height;this.insertInner(t-this.first,e,r)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Yt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ri((function(t){var e=te(this.first,0),r=this.first+this.size-1;ls(this,{from:e,to:te(r,Ht(this,r).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&In(this.cm,0,0),Qi(this,Ai(e),F)})),replaceRange:function(t,e,r,n){ds(this,t,e=ae(this,e),r=r?ae(this,r):e,n)},getRange:function(t,e,r){var n=Wt(this,ae(this,t),ae(this,e));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Jt(this,t))return Ht(this,t)},getLineNumber:function(t){return Zt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Ht(this,t)),Be(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ae(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ri((function(t,e,r){Ki(this,ae(this,"number"==typeof t?te(t,e||0):t),null,r)})),setSelection:ri((function(t,e,r){Ki(this,ae(this,t),ae(this,e||t),r)})),extendSelection:ri((function(t,e,r){Yi(this,ae(this,t),e&&ae(this,e),r)})),extendSelections:ri((function(t,e){Xi(this,ue(this,t),e)})),extendSelectionsBy:ri((function(t,e){Xi(this,ue(this,X(this.sel.ranges,t)),e)})),setSelections:ri((function(t,e,r){if(t.length){for(var n=[],i=0;i<t.length;i++)n[i]=new Ei(ae(this,t[i].anchor),ae(this,t[i].head||t[i].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Qi(this,Si(this.cm,n,e),r)}})),addSelection:ri((function(t,e,r){var n=this.sel.ranges.slice(0);n.push(new Ei(ae(this,t),ae(this,e||t))),Qi(this,Si(this.cm,n,n.length-1),r)})),getSelection:function(t){for(var e,r=this.sel.ranges,n=0;n<r.length;n++){var i=Wt(this,r[n].from(),r[n].to());e=e?e.concat(i):i}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=Wt(this,r[n].from(),r[n].to());!1!==t&&(i=i.join(t||this.lineSeparator())),e[n]=i}return e},replaceSelection:function(t,e,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=t;this.replaceSelections(n,e,r||"+input")},replaceSelections:ri((function(t,e,r){for(var n=[],i=this.sel,s=0;s<i.ranges.length;s++){var o=i.ranges[s];n[s]={from:o.from(),to:o.to(),text:this.splitLines(t[s]),origin:r}}for(var a=e&&"end"!=e&&function(t,e,r){for(var n=[],i=te(t.first,0),s=i,o=0;o<e.length;o++){var a=e[o],u=Ci(a.from,i,s),l=Ci(Ni(a),i,s);if(i=a.to,s=l,"around"==r){var c=t.sel.ranges[o],p=ee(c.head,c.anchor)<0;n[o]=new Ei(p?l:u,p?u:l)}else n[o]=new Ei(u,u)}return new wi(n,t.sel.primIndex)}(this,n,e),u=n.length-1;u>=0;u--)ls(this,n[u]);a?Ji(this,a):this.cm&&On(this.cm)})),undo:ri((function(){ps(this,"undo")})),redo:ri((function(){ps(this,"redo")})),undoSelection:ri((function(){ps(this,"undo",!0)})),redoSelection:ri((function(){ps(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,r=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++r;return{undo:e,redo:r}},clearHistory:function(){var t=this;this.history=new qi(this.history),Ri(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Hi(this.history.done),undone:Hi(this.history.undone)}},setHistory:function(t){var e=this.history=new qi(this.history);e.done=Hi(t.done.slice(0),null,!0),e.undone=Hi(t.undone.slice(0),null,!0)},setGutterMarker:ri((function(t,e,r){return vs(this,t,"gutter",(function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[e]=r,!r&&et(n)&&(t.gutterMarkers=null),!0}))})),clearGutter:ri((function(t){var e=this;this.iter((function(r){r.gutterMarkers&&r.gutterMarkers[t]&&vs(e,r,"gutter",(function(){return r.gutterMarkers[t]=null,et(r.gutterMarkers)&&(r.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!Jt(this,t))return null;if(e=t,!(t=Ht(this,t)))return null}else if(null==(e=Zt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ri((function(t,e,r){return vs(this,t,"gutter"==e?"gutter":"class",(function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[n]){if(S(r).test(t[n]))return!1;t[n]+=" "+r}else t[n]=r;return!0}))})),removeLineClass:ri((function(t,e,r){return vs(this,t,"gutter"==e?"gutter":"class",(function(t){var n="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",i=t[n];if(!i)return!1;if(null==r)t[n]=null;else{var s=i.match(S(r));if(!s)return!1;var o=s.index+s[0].length;t[n]=i.slice(0,s.index)+(s.index&&o!=i.length?" ":"")+i.slice(o)||null}return!0}))})),addLineWidget:ri((function(t,e,r){return function(t,e,r,n){var i=new _s(t,r,n),s=t.cm;return s&&i.noHScroll&&(s.display.alignWidgets=!0),vs(t,e,"widget",(function(e){var r=e.widgets||(e.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length,Math.max(0,i.insertAt)),0,i),i.line=e,s&&!ze(t,e)){var n=Ge(e)<t.scrollTop;Xt(e,e.height+xr(i)),n&&Tn(s,i.height),s.curOp.forceUpdate=!0}return!0})),s&&ar(s,"lineWidgetAdded",s,i,"number"==typeof e?e:Zt(e)),i}(this,t,e,r)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,r){return As(this,ae(this,t),ae(this,e),r,r&&r.type||"range")},setBookmark:function(t,e){var r={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return As(this,t=ae(this,t),t,r,"bookmark")},findMarksAt:function(t){var e=[],r=Ht(this,(t=ae(this,t)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,r){t=ae(this,t),e=ae(this,e);var n=[],i=t.line;return this.iter(t.line,e.line+1,(function(s){var o=s.markedSpans;if(o)for(var a=0;a<o.length;a++){var u=o[a];null!=u.to&&i==t.line&&t.ch>=u.to||null==u.from&&i!=t.line||null!=u.from&&i==e.line&&u.from>=e.ch||r&&!r(u.marker)||n.push(u.marker.parent||u.marker)}++i})),n},getAllMarks:function(){var t=[];return this.iter((function(e){var r=e.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&t.push(r[n].marker)})),t},posFromIndex:function(t){var e,r=this.first,n=this.lineSeparator().length;return this.iter((function(i){var s=i.text.length+n;if(s>t)return e=t,!0;t-=s,++r})),ae(this,te(r,e))},indexFromPos:function(t){var e=(t=ae(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+r})),e},copy:function(t){var e=new Ts(Yt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,r=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<r&&(r=t.to);var n=new Ts(Yt(this,e,r),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.find(),s=t.clipPos(i.from),o=t.clipPos(i.to);if(ee(s,o)){var a=As(t,s,o,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}(n,Ms(this)),n},unlinkDoc:function(t){if(t instanceof Mo&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),ks(Ms(this));break}if(t.history==this.history){var r=[t.id];Ri(t,(function(t){return r.push(t.id)}),!0),t.history=new qi(null),t.history.done=Hi(this.history.done,r),t.history.undone=Hi(this.history.undone,r)}},iterLinkedDocs:function(t){Ri(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Ot(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ri((function(t){var e;"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&Qn(e=this.cm,(function(){Di(e),pn(e)})))}))}),Ts.prototype.eachLine=Ts.prototype.iter;var Os=0;function Is(t){var e=this;if(Ps(e),!mt(e,t)&&!_r(e.display,t)){bt(t),o&&(Os=+new Date);var r=ln(e,t,!0),n=t.dataTransfer.files;if(r&&!e.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,s=Array(i),a=0,u=function(){++a==i&&ti(e,(function(){var t={from:r=ae(e.doc,r),to:r,text:e.doc.splitLines(s.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};ls(e.doc,t),Ji(e.doc,Ai(ae(e.doc,r),ae(e.doc,Ni(t))))}))()},l=function(t,r){if(e.options.allowDropFileTypes&&-1==$(e.options.allowDropFileTypes,t.type))u();else{var n=new FileReader;n.onerror=function(){return u()},n.onload=function(){var t=n.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(s[r]=t),u()},n.readAsText(t)}},c=0;c<n.length;c++)l(n[c],c);else{if(e.state.draggingText&&e.doc.sel.contains(r)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var p=t.dataTransfer.getData("Text");if(p){var h;if(e.state.draggingText&&!e.state.draggingText.copy&&(h=e.listSelections()),ts(e.doc,Ai(r,r)),h)for(var f=0;f<h.length;++f)ds(e.doc,"",h[f].anchor,h[f].head,"drag");e.replaceSelection(p,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Ps(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Rs(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&r.push(i)}r.length&&r[0].operation((function(){for(var e=0;e<r.length;e++)t(r[e])}))}}var Ls=!1;function Ds(){var t;Ls||(pt(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Rs(qs)}),100))})),pt(window,"blur",(function(){return Rs(An)})),Ls=!0)}function qs(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Bs={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Us=0;Us<10;Us++)Bs[Us+48]=Bs[Us+96]=String(Us);for(var $s=65;$s<=90;$s++)Bs[$s]=String.fromCharCode($s);for(var zs=1;zs<=12;zs++)Bs[zs+111]=Bs[zs+63235]="F"+zs;var Fs={};function Gs(t){var e,r,n,i,s=t.split(/-(?!$)/);t=s[s.length-1];for(var o=0;o<s.length-1;o++){var a=s[o];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return e&&(t="Alt-"+t),r&&(t="Ctrl-"+t),i&&(t="Cmd-"+t),n&&(t="Shift-"+t),t}function Vs(t){var e={};for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete t[r];continue}for(var i=X(r.split(" "),Gs),s=0;s<i.length;s++){var o=void 0,a=void 0;s==i.length-1?(a=i.join(" "),o=n):(a=i.slice(0,s+1).join(" "),o="...");var u=e[a];if(u){if(u!=o)throw new Error("Inconsistent bindings for "+a)}else e[a]=o}delete t[r]}for(var l in e)t[l]=e[l];return t}function js(t,e,r,n){var i=(e=Xs(e)).call?e.call(t,n):e[t];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return js(t,e.fallthrough,r,n);for(var s=0;s<e.fallthrough.length;s++){var o=js(t,e.fallthrough[s],r,n);if(o)return o}}}function Hs(t){var e="string"==typeof t?t:Bs[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Ws(t,e,r){var n=t;return e.altKey&&"Alt"!=n&&(t="Alt-"+t),(w?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(t="Ctrl-"+t),(w?e.ctrlKey:e.metaKey)&&"Mod"!=n&&(t="Cmd-"+t),!r&&e.shiftKey&&"Shift"!=n&&(t="Shift-"+t),t}function Ys(t,e){if(p&&34==t.keyCode&&t.char)return!1;var r=Bs[t.keyCode];return null!=r&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(r=t.code),Ws(r,t,e))}function Xs(t){return"string"==typeof t?Fs[t]:t}function Zs(t,e){for(var r=t.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var s=e(r[i]);n.length&&ee(s.from,Y(n).to)<=0;){var o=n.pop();if(ee(o.from,s.from)<0){s.from=o.from;break}}n.push(s)}Qn(t,(function(){for(var e=n.length-1;e>=0;e--)ds(t.doc,"",n[e].from,n[e].to,"+delete");On(t)}))}function Ks(t,e,r){var n=it(t.text,e+r,r);return n<0||n>t.text.length?null:n}function Js(t,e,r){var n=Ks(t,e.ch,r);return null==n?null:new te(e.line,n,r<0?"after":"before")}function Qs(t,e,r,n,i){if(t){"rtl"==e.doc.direction&&(i=-i);var s=lt(r,e.doc.direction);if(s){var o,a=i<0?Y(s):s[0],u=i<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==e.doc.direction){var l=Or(e,r);o=i<0?r.text.length-1:0;var c=Ir(e,l,o).top;o=st((function(t){return Ir(e,l,t).top==c}),i<0==(1==a.level)?a.from:a.to-1,o),"before"==u&&(o=Ks(r,o,1))}else o=i<0?a.to:a.from;return new te(n,o,u)}}return new te(n,i<0?r.text.length:0,i<0?"before":"after")}Fs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Fs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Fs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Fs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Fs.default=v?Fs.macDefault:Fs.pcDefault;var to={selectAll:as,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),F)},killLine:function(t){return Zs(t,(function(e){if(e.empty()){var r=Ht(t.doc,e.head.line).text.length;return e.head.ch==r&&e.head.line<t.lastLine()?{from:e.head,to:te(e.head.line+1,0)}:{from:e.head,to:te(e.head.line,r)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return Zs(t,(function(e){return{from:te(e.from().line,0),to:ae(t.doc,te(e.to().line+1,0))}}))},delLineLeft:function(t){return Zs(t,(function(t){return{from:te(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return Zs(t,(function(e){var r=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:r},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return Zs(t,(function(e){var r=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:r},"div");return{from:e.from(),to:n}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(te(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(te(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return eo(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return ro(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(t,e){var r=Ht(t.doc,e),n=function(t){for(var e;e=Le(t);)t=e.find(1,!0).line;return t}(r);return n!=r&&(e=Zt(n)),Qs(!0,t,r,e,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var r=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:r},"div")}),V)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var r=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:r},"div")}),V)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var r=t.cursorCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:r},"div");return n.ch<t.getLine(n.line).search(/\S/)?ro(t,e.head):n}),V)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],r=t.listSelections(),n=t.options.tabSize,i=0;i<r.length;i++){var s=r[i].from(),o=B(t.getLine(s.line),s.ch,n);e.push(W(n-o%n))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Qn(t,(function(){for(var e=t.listSelections(),r=[],n=0;n<e.length;n++)if(e[n].empty()){var i=e[n].head,s=Ht(t.doc,i.line).text;if(s)if(i.ch==s.length&&(i=new te(i.line,i.ch-1)),i.ch>0)i=new te(i.line,i.ch+1),t.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),te(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var o=Ht(t.doc,i.line-1).text;o&&(i=new te(i.line,1),t.replaceRange(s.charAt(0)+t.doc.lineSeparator()+o.charAt(o.length-1),te(i.line-1,o.length-1),i,"+transpose"))}r.push(new Ei(i,i))}t.setSelections(r)}))},newlineAndIndent:function(t){return Qn(t,(function(){for(var e=t.listSelections(),r=e.length-1;r>=0;r--)t.replaceRange(t.doc.lineSeparator(),e[r].anchor,e[r].head,"+input");e=t.listSelections();for(var n=0;n<e.length;n++)t.indentLine(e[n].from().line,null,!0);On(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function eo(t,e){var r=Ht(t.doc,e),n=Be(r);return n!=r&&(e=Zt(n)),Qs(!0,t,n,e,1)}function ro(t,e){var r=eo(t,e.line),n=Ht(t.doc,r.line),i=lt(n,t.doc.direction);if(!i||0==i[0].level){var s=Math.max(r.ch,n.text.search(/\S/)),o=e.line==r.line&&e.ch<=s&&e.ch;return te(r.line,o?0:s,r.sticky)}return r}function no(t,e,r){if("string"==typeof e&&!(e=to[e]))return!1;t.display.input.ensurePolled();var n=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r&&(t.display.shift=!1),i=e(t)!=z}finally{t.display.shift=n,t.state.suppressEdits=!1}return i}var io=new U;function so(t,e,r,n){var i=t.state.keySeq;if(i){if(Hs(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:io.set(50,(function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())})),oo(t,i+" "+e,r,n))return!0}return oo(t,e,r,n)}function oo(t,e,r,n){var i=function(t,e,r){for(var n=0;n<t.state.keyMaps.length;n++){var i=js(e,t.state.keyMaps[n],r,t);if(i)return i}return t.options.extraKeys&&js(e,t.options.extraKeys,r,t)||js(e,t.options.keyMap,r,t)}(t,e,n);return"multi"==i&&(t.state.keySeq=e),"handled"==i&&ar(t,"keyHandled",t,e,r),"handled"!=i&&"multi"!=i||(bt(r),_n(t)),!!i}function ao(t,e){var r=Ys(e,!0);return!!r&&(e.shiftKey&&!t.state.keySeq?so(t,"Shift-"+r,e,(function(e){return no(t,e,!0)}))||so(t,r,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return no(t,e)})):so(t,r,e,(function(e){return no(t,e)})))}var uo=null;function lo(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||(e.curOp.focus=I(),mt(e,t)))){o&&a<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var i=ao(e,t);p&&(uo=i?n:null,i||88!=n||Pt||!(v?t.metaKey:t.ctrlKey)||e.replaceSelection("",null,"cut")),r&&!v&&!i&&46==n&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function r(t){18!=t.keyCode&&t.altKey||(N(e,"CodeMirror-crosshair"),ft(document,"keyup",r),ft(document,"mouseover",r))}P(e,"CodeMirror-crosshair"),pt(document,"keyup",r),pt(document,"mouseover",r)}(e)}}function co(t){16==t.keyCode&&(this.doc.sel.shift=!1),mt(this,t)}function po(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField()||_r(e.display,t)||mt(e,t)||t.ctrlKey&&!t.altKey||v&&t.metaKey)){var r=t.keyCode,n=t.charCode;if(p&&r==uo)return uo=null,void bt(t);if(!p||t.which&&!(t.which<10)||!ao(e,t)){var i=String.fromCharCode(null==n?r:n);"\b"!=i&&(function(t,e,r){return so(t,"'"+r+"'",e,(function(e){return no(t,e,!0)}))}(e,t,i)||e.display.input.onKeyPress(t))}}}var ho,fo,mo=function(t,e,r){this.time=t,this.pos=e,this.button=r};function go(t){var e=this,r=e.display;if(!(mt(e,t)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=t.shiftKey,_r(r,t))u||(r.scroller.draggable=!1,setTimeout((function(){return r.scroller.draggable=!0}),100));else if(!bo(e,t)){var n=ln(e,t),i=St(t),s=n?function(t,e){var r=+new Date;return fo&&fo.compare(r,t,e)?(ho=fo=null,"triple"):ho&&ho.compare(r,t,e)?(fo=new mo(r,t,e),ho=null,"double"):(ho=new mo(r,t,e),fo=null,"single")}(n,i):"single";window.focus(),1==i&&e.state.selectingText&&e.state.selectingText(t),n&&function(t,e,r,n,i){var s="Click";return"double"==n?s="Double"+s:"triple"==n&&(s="Triple"+s),so(t,Ws(s=(1==e?"Left":2==e?"Middle":"Right")+s,i),i,(function(e){if("string"==typeof e&&(e=to[e]),!e)return!1;var n=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n=e(t,r)!=z}finally{t.state.suppressEdits=!1}return n}))}(e,i,n,s,t)||(1==i?n?function(t,e,r,n){o?setTimeout(D(wn,t),0):t.curOp.focus=I();var i,s=function(t,e,r){var n=t.getOption("configureMouse"),i=n?n(t,e,r):{};if(null==i.unit){var s=b?r.shiftKey&&r.metaKey:r.altKey;i.unit=s?"rectangle":"single"==e?"char":"double"==e?"word":"line"}return(null==i.extend||t.doc.extend)&&(i.extend=t.doc.extend||r.shiftKey),null==i.addNew&&(i.addNew=v?r.metaKey:r.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(v?r.altKey:r.ctrlKey)),i}(t,r,n),l=t.doc.sel;t.options.dragDrop&&Mt&&!t.isReadOnly()&&"single"==r&&(i=l.contains(e))>-1&&(ee((i=l.ranges[i]).from(),e)<0||e.xRel>0)&&(ee(i.to(),e)>0||e.xRel<0)?function(t,e,r,n){var i=t.display,s=!1,l=ti(t,(function(e){u&&(i.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:En(t)),ft(i.wrapper.ownerDocument,"mouseup",l),ft(i.wrapper.ownerDocument,"mousemove",c),ft(i.scroller,"dragstart",p),ft(i.scroller,"drop",l),s||(bt(e),n.addNew||Yi(t.doc,r,null,null,n.extend),u&&!h||o&&9==a?setTimeout((function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()}),20):i.input.focus())})),c=function(t){s=s||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},p=function(){return s=!0};u&&(i.scroller.draggable=!0),t.state.draggingText=l,l.copy=!n.moveOnDrag,pt(i.wrapper.ownerDocument,"mouseup",l),pt(i.wrapper.ownerDocument,"mousemove",c),pt(i.scroller,"dragstart",p),pt(i.scroller,"drop",l),t.state.delayingBlurEvent=!0,setTimeout((function(){return i.input.focus()}),20),i.scroller.dragDrop&&i.scroller.dragDrop()}(t,n,e,s):function(t,e,r,n){o&&En(t);var i=t.display,s=t.doc;bt(e);var a,u,l=s.sel,c=l.ranges;if(n.addNew&&!n.extend?(u=s.sel.contains(r),a=u>-1?c[u]:new Ei(r,r)):(a=s.sel.primary(),u=s.sel.primIndex),"rectangle"==n.unit)n.addNew||(a=new Ei(r,r)),r=ln(t,e,!0,!0),u=-1;else{var p=yo(t,r,n.unit);a=n.extend?Wi(a,p.anchor,p.head,n.extend):p}n.addNew?-1==u?(u=c.length,Qi(s,Si(t,c.concat([a]),u),{scroll:!1,origin:"*mouse"})):c.length>1&&c[u].empty()&&"char"==n.unit&&!n.extend?(Qi(s,Si(t,c.slice(0,u).concat(c.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),l=s.sel):Zi(s,u,a,G):(u=0,Qi(s,new wi([a],0),G),l=s.sel);var h=r;function f(e){if(0!=ee(h,e))if(h=e,"rectangle"==n.unit){for(var i=[],o=t.options.tabSize,c=B(Ht(s,r.line).text,r.ch,o),p=B(Ht(s,e.line).text,e.ch,o),f=Math.min(c,p),d=Math.max(c,p),m=Math.min(r.line,e.line),g=Math.min(t.lastLine(),Math.max(r.line,e.line));m<=g;m++){var y=Ht(s,m).text,v=j(y,f,o);f==d?i.push(new Ei(te(m,v),te(m,v))):y.length>v&&i.push(new Ei(te(m,v),te(m,j(y,d,o))))}i.length||i.push(new Ei(r,r)),Qi(s,Si(t,l.ranges.slice(0,u).concat(i),u),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,x=a,_=yo(t,e,n.unit),w=x.anchor;ee(_.anchor,w)>0?(b=_.head,w=se(x.from(),_.anchor)):(b=_.anchor,w=ie(x.to(),_.head));var E=l.ranges.slice(0);E[u]=function(t,e){var r=e.anchor,n=e.head,i=Ht(t.doc,r.line);if(0==ee(r,n)&&r.sticky==n.sticky)return e;var s=lt(i);if(!s)return e;var o=at(s,r.ch,r.sticky),a=s[o];if(a.from!=r.ch&&a.to!=r.ch)return e;var u,l=o+(a.from==r.ch==(1!=a.level)?0:1);if(0==l||l==s.length)return e;if(n.line!=r.line)u=(n.line-r.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=at(s,n.ch,n.sticky),p=c-o||(n.ch-r.ch)*(1==a.level?-1:1);u=c==l-1||c==l?p<0:p>0}var h=s[l+(u?-1:0)],f=u==(1==h.level),d=f?h.from:h.to,m=f?"after":"before";return r.ch==d&&r.sticky==m?e:new Ei(new te(r.line,d,m),n)}(t,new Ei(ae(s,w),b)),Qi(s,Si(t,E,u),G)}}var d=i.wrapper.getBoundingClientRect(),m=0;function g(e){var r=++m,o=ln(t,e,!0,"rectangle"==n.unit);if(o)if(0!=ee(o,h)){t.curOp.focus=I(),f(o);var a=kn(i,s);(o.line>=a.to||o.line<a.from)&&setTimeout(ti(t,(function(){m==r&&g(e)})),150)}else{var u=e.clientY<d.top?-20:e.clientY>d.bottom?20:0;u&&setTimeout(ti(t,(function(){m==r&&(i.scroller.scrollTop+=u,g(e))})),50)}}function y(e){t.state.selectingText=!1,m=1/0,e&&(bt(e),i.input.focus()),ft(i.wrapper.ownerDocument,"mousemove",v),ft(i.wrapper.ownerDocument,"mouseup",b),s.history.lastSelOrigin=null}var v=ti(t,(function(t){0!==t.buttons&&St(t)?g(t):y(t)})),b=ti(t,y);t.state.selectingText=b,pt(i.wrapper.ownerDocument,"mousemove",v),pt(i.wrapper.ownerDocument,"mouseup",b)}(t,n,e,s)}(e,n,s,t):Et(t)==r.scroller&&bt(t):2==i?(n&&Yi(e.doc,n),setTimeout((function(){return r.input.focus()}),20)):3==i&&(E?e.display.input.onContextMenu(t):En(e)))}}function yo(t,e,r){if("char"==r)return new Ei(e,e);if("word"==r)return t.findWordAt(e);if("line"==r)return new Ei(te(e.line,0),ae(t.doc,te(e.line+1,0)));var n=r(t,e);return new Ei(n.from,n.to)}function vo(t,e,r,n){var i,s;if(e.touches)i=e.touches[0].clientX,s=e.touches[0].clientY;else try{i=e.clientX,s=e.clientY}catch(t){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&bt(e);var o=t.display,a=o.lineDiv.getBoundingClientRect();if(s>a.bottom||!yt(t,r))return _t(e);s-=a.top-o.viewOffset;for(var u=0;u<t.display.gutterSpecs.length;++u){var l=o.gutters.childNodes[u];if(l&&l.getBoundingClientRect().right>=i)return dt(t,r,t,Kt(t.doc,s),t.display.gutterSpecs[u].className,e),_t(e)}}function bo(t,e){return vo(t,e,"gutterClick",!0)}function xo(t,e){_r(t.display,e)||function(t,e){return!!yt(t,"gutterContextMenu")&&vo(t,e,"gutterContextMenu",!1)}(t,e)||mt(t,e,"contextmenu")||E||t.display.input.onContextMenu(e)}function _o(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ur(t)}mo.prototype.compare=function(t,e,r){return this.time+400>t&&0==ee(e,this.pos)&&r==this.button};var wo={toString:function(){return"CodeMirror.Init"}},Eo={},So={};function Ao(t,e,r){if(!e!=!(r&&r!=wo)){var n=t.display.dragFunctions,i=e?pt:ft;i(t.display.scroller,"dragstart",n.start),i(t.display.scroller,"dragenter",n.enter),i(t.display.scroller,"dragover",n.over),i(t.display.scroller,"dragleave",n.leave),i(t.display.scroller,"drop",n.drop)}}function No(t){t.options.lineWrapping?(P(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(N(t.display.wrapper,"CodeMirror-wrap"),je(t)),un(t),pn(t),Ur(t),setTimeout((function(){return zn(t)}),100)}function Mo(t,e){var r=this;if(!(this instanceof Mo))return new Mo(t,e);this.options=e=e?q(e):{},q(Eo,e,!1);var n=e.value;"string"==typeof n?n=new Ts(n,e.mode,null,e.lineSeparator,e.direction):e.mode&&(n.modeOption=e.mode),this.doc=n;var i=new Mo.inputStyles[e.inputStyle](this),s=this.display=new gi(t,n,i,e);for(var l in s.wrapper.CodeMirror=this,_o(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new U,keySeq:null,specialChars:null},e.autofocus&&!y&&s.input.focus(),o&&a<11&&setTimeout((function(){return r.display.input.reset(!0)}),20),function(t){var e=t.display;pt(e.scroller,"mousedown",ti(t,go)),pt(e.scroller,"dblclick",o&&a<11?ti(t,(function(e){if(!mt(t,e)){var r=ln(t,e);if(r&&!bo(t,e)&&!_r(t.display,e)){bt(e);var n=t.findWordAt(r);Yi(t.doc,n.anchor,n.head)}}})):function(e){return mt(t,e)||bt(e)}),pt(e.scroller,"contextmenu",(function(e){return xo(t,e)})),pt(e.input.getField(),"contextmenu",(function(r){e.scroller.contains(r.target)||xo(t,r)}));var r,n={end:0};function i(){e.activeTouch&&(r=setTimeout((function(){return e.activeTouch=null}),1e3),(n=e.activeTouch).end=+new Date)}function s(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function u(t,e){if(null==e.left)return!0;var r=e.left-t.left,n=e.top-t.top;return r*r+n*n>400}pt(e.scroller,"touchstart",(function(i){if(!mt(t,i)&&!s(i)&&!bo(t,i)){e.input.ensurePolled(),clearTimeout(r);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-n.end<=300?n:null},1==i.touches.length&&(e.activeTouch.left=i.touches[0].pageX,e.activeTouch.top=i.touches[0].pageY)}})),pt(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),pt(e.scroller,"touchend",(function(r){var n=e.activeTouch;if(n&&!_r(e,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var s,o=t.coordsChar(e.activeTouch,"page");s=!n.prev||u(n,n.prev)?new Ei(o,o):!n.prev.prev||u(n,n.prev.prev)?t.findWordAt(o):new Ei(te(o.line,0),ae(t.doc,te(o.line+1,0))),t.setSelection(s.anchor,s.head),t.focus(),bt(r)}i()})),pt(e.scroller,"touchcancel",i),pt(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Ln(t,e.scroller.scrollTop),qn(t,e.scroller.scrollLeft,!0),dt(t,"scroll",t))})),pt(e.scroller,"mousewheel",(function(e){return _i(t,e)})),pt(e.scroller,"DOMMouseScroll",(function(e){return _i(t,e)})),pt(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){mt(t,e)||wt(e)},over:function(e){mt(t,e)||(function(t,e){var r=ln(t,e);if(r){var n=document.createDocumentFragment();vn(t,r,n),t.display.dragCursor||(t.display.dragCursor=C("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),k(t.display.dragCursor,n)}}(t,e),wt(e))},start:function(e){return function(t,e){if(o&&(!t.state.draggingText||+new Date-Os<100))wt(e);else if(!mt(t,e)&&!_r(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!h)){var r=C("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",p&&(r.width=r.height=1,t.display.wrapper.appendChild(r),r._top=r.offsetTop),e.dataTransfer.setDragImage(r,0,0),p&&r.parentNode.removeChild(r)}}(t,e)},drop:ti(t,Is),leave:function(e){mt(t,e)||Ps(t)}};var l=e.input.getField();pt(l,"keyup",(function(e){return co.call(t,e)})),pt(l,"keydown",ti(t,lo)),pt(l,"keypress",ti(t,po)),pt(l,"focus",(function(e){return Sn(t,e)})),pt(l,"blur",(function(e){return An(t,e)}))}(this),Ds(),Hn(this),this.curOp.forceUpdate=!0,Li(this,n),e.autofocus&&!y||this.hasFocus()?setTimeout((function(){r.hasFocus()&&!r.state.focused&&Sn(r)}),20):An(this),So)So.hasOwnProperty(l)&&So[l](this,e[l],wo);hi(this),e.finishInit&&e.finishInit(this);for(var c=0;c<ko.length;++c)ko[c](this);Wn(this),u&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}Mo.defaults=Eo,Mo.optionHandlers=So;var ko=[];function Co(t,e,r,n){var i,s=t.doc;null==r&&(r="add"),"smart"==r&&(s.mode.indent?i=fe(t,e).state:r="prev");var o=t.options.tabSize,a=Ht(s,e),u=B(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var l,c=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==r&&((l=s.mode.indent(i,a.text.slice(c.length),a.text))==z||l>150)){if(!n)return;r="prev"}}else l=0,r="not";"prev"==r?l=e>s.first?B(Ht(s,e-1).text,null,o):0:"add"==r?l=u+t.options.indentUnit:"subtract"==r?l=u-t.options.indentUnit:"number"==typeof r&&(l=u+r),l=Math.max(0,l);var p="",h=0;if(t.options.indentWithTabs)for(var f=Math.floor(l/o);f;--f)h+=o,p+="\t";if(h<l&&(p+=W(l-h)),p!=c)return ds(s,p,te(e,0),te(e,c.length),"+input"),a.stateAfter=null,!0;for(var d=0;d<s.sel.ranges.length;d++){var m=s.sel.ranges[d];if(m.head.line==e&&m.head.ch<c.length){var g=te(e,c.length);Zi(s,d,new Ei(g,g));break}}}Mo.defineInitHook=function(t){return ko.push(t)};var To=null;function Oo(t){To=t}function Io(t,e,r,n,i){var s=t.doc;t.display.shift=!1,n||(n=s.sel);var o=+new Date-200,a="paste"==i||t.state.pasteIncoming>o,u=Ot(e),l=null;if(a&&n.ranges.length>1)if(To&&To.text.join("\n")==e){if(n.ranges.length%To.text.length==0){l=[];for(var c=0;c<To.text.length;c++)l.push(s.splitLines(To.text[c]))}}else u.length==n.ranges.length&&t.options.pasteLinesPerSelection&&(l=X(u,(function(t){return[t]})));for(var p=t.curOp.updateInput,h=n.ranges.length-1;h>=0;h--){var f=n.ranges[h],d=f.from(),m=f.to();f.empty()&&(r&&r>0?d=te(d.line,d.ch-r):t.state.overwrite&&!a?m=te(m.line,Math.min(Ht(s,m.line).text.length,m.ch+Y(u).length)):a&&To&&To.lineWise&&To.text.join("\n")==u.join("\n")&&(d=m=te(d.line,0)));var g={from:d,to:m,text:l?l[h%l.length]:u,origin:i||(a?"paste":t.state.cutIncoming>o?"cut":"+input")};ls(t.doc,g),ar(t,"inputRead",t,g)}e&&!a&&Ro(t,e),On(t),t.curOp.updateInput<2&&(t.curOp.updateInput=p),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Po(t,e){var r=t.clipboardData&&t.clipboardData.getData("Text");if(r)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Qn(e,(function(){return Io(e,r,0,null,"paste")})),!0}function Ro(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var r=t.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var s=t.getModeAt(i.head),o=!1;if(s.electricChars){for(var a=0;a<s.electricChars.length;a++)if(e.indexOf(s.electricChars.charAt(a))>-1){o=Co(t,i.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(Ht(t.doc,i.head.line).text.slice(0,i.head.ch))&&(o=Co(t,i.head.line,"smart"));o&&ar(t,"electricInput",t,i.head.line)}}}function Lo(t){for(var e=[],r=[],n=0;n<t.doc.sel.ranges.length;n++){var i=t.doc.sel.ranges[n].head.line,s={anchor:te(i,0),head:te(i+1,0)};r.push(s),e.push(t.getRange(s.anchor,s.head))}return{text:e,ranges:r}}function Do(t,e,r,n){t.setAttribute("autocorrect",r?"":"off"),t.setAttribute("autocapitalize",n?"":"off"),t.setAttribute("spellcheck",!!e)}function qo(){var t=C("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=C("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return u?t.style.width="1000px":t.setAttribute("wrap","off"),m&&(t.style.border="1px solid black"),Do(t),e}function Bo(t,e,r,n,i){var s=e,o=r,a=Ht(t,e.line),u=i&&"rtl"==t.direction?-r:r;function l(s){var o,l;if("codepoint"==n){var c=a.text.charCodeAt(e.ch+(r>0?0:-1));if(isNaN(c))o=null;else{var p=r>0?c>=55296&&c<56320:c>=56320&&c<57343;o=new te(e.line,Math.max(0,Math.min(a.text.length,e.ch+r*(p?2:1))),-r)}}else o=i?function(t,e,r,n){var i=lt(e,t.doc.direction);if(!i)return Js(e,r,n);r.ch>=e.text.length?(r.ch=e.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var s=at(i,r.ch,r.sticky),o=i[s];if("ltr"==t.doc.direction&&o.level%2==0&&(n>0?o.to>r.ch:o.from<r.ch))return Js(e,r,n);var a,u=function(t,r){return Ks(e,t instanceof te?t.ch:t,r)},l=function(r){return t.options.lineWrapping?(a=a||Or(t,e),Kr(t,e,a,r)):{begin:0,end:e.text.length}},c=l("before"==r.sticky?u(r,-1):r.ch);if("rtl"==t.doc.direction||1==o.level){var p=1==o.level==n<0,h=u(r,p?1:-1);if(null!=h&&(p?h<=o.to&&h<=c.end:h>=o.from&&h>=c.begin)){var f=p?"before":"after";return new te(r.line,h,f)}}var d=function(t,e,n){for(var s=function(t,e){return e?new te(r.line,u(t,1),"before"):new te(r.line,t,"after")};t>=0&&t<i.length;t+=e){var o=i[t],a=e>0==(1!=o.level),l=a?n.begin:u(n.end,-1);if(o.from<=l&&l<o.to)return s(l,a);if(l=a?o.from:u(o.to,-1),n.begin<=l&&l<n.end)return s(l,a)}},m=d(s+n,n,c);if(m)return m;var g=n>0?c.end:u(c.begin,-1);return null==g||n>0&&g==e.text.length||!(m=d(n>0?0:i.length-1,n,l(g)))?null:m}(t.cm,a,e,r):Js(a,e,r);if(null==o){if(s||((l=e.line+u)<t.first||l>=t.first+t.size||(e=new te(l,e.ch,e.sticky),!(a=Ht(t,l)))))return!1;e=Qs(i,t.cm,a,e.line,u)}else e=o;return!0}if("char"==n||"codepoint"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var c=null,p="group"==n,h=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(r<0)||l(!f);f=!1){var d=a.text.charAt(e.ch)||"\n",m=tt(d,h)?"w":p&&"\n"==d?"n":!p||/\s/.test(d)?null:"p";if(!p||f||m||(m="s"),c&&c!=m){r<0&&(r=1,l(),e.sticky="after");break}if(m&&(c=m),r>0&&!l(!f))break}var g=ss(t,e,s,o,!0);return re(s,g)&&(g.hitSide=!0),g}function Uo(t,e,r,n){var i,s,o=t.doc,a=e.left;if("page"==n){var u=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(u-.5*rn(t.display),3);i=(r>0?e.bottom:e.top)+r*l}else"line"==n&&(i=r>0?e.bottom+3:e.top-3);for(;(s=Xr(t,a,i)).outside;){if(r<0?i<=0:i>=o.height){s.hitSide=!0;break}i+=5*r}return s}var $o=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new U,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function zo(t,e){var r=Tr(t,e.line);if(!r||r.hidden)return null;var n=Ht(t.doc,e.line),i=kr(r,n,e.line),s=lt(n,t.doc.direction),o="left";s&&(o=at(s,e.ch)%2?"right":"left");var a=Lr(i.map,e.ch,o);return a.offset="right"==a.collapse?a.end:a.start,a}function Fo(t,e){return e&&(t.bad=!0),t}function Go(t,e,r){var n;if(e==t.display.lineDiv){if(!(n=t.display.lineDiv.childNodes[r]))return Fo(t.clipPos(te(t.display.viewTo-1)),!0);e=null,r=0}else for(n=e;;n=n.parentNode){if(!n||n==t.display.lineDiv)return null;if(n.parentNode&&n.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var s=t.display.view[i];if(s.node==n)return Vo(s,e,r)}}function Vo(t,e,r){var n=t.text.firstChild,i=!1;if(!e||!O(n,e))return Fo(te(Zt(t.line),0),!0);if(e==n&&(i=!0,e=n.childNodes[r],r=0,!e)){var s=t.rest?Y(t.rest):t.line;return Fo(te(Zt(s),s.text.length),i)}var o=3==e.nodeType?e:null,a=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,r&&(r=o.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var u=t.measure,l=u.maps;function c(e,r,n){for(var i=-1;i<(l?l.length:0);i++)for(var s=i<0?u.map:l[i],o=0;o<s.length;o+=3){var a=s[o+2];if(a==e||a==r){var c=Zt(i<0?t.line:t.rest[i]),p=s[o]+n;return(n<0||a!=e)&&(p=s[o+(n?1:0)]),te(c,p)}}}var p=c(o,a,r);if(p)return Fo(p,i);for(var h=a.nextSibling,f=o?o.nodeValue.length-r:0;h;h=h.nextSibling){if(p=c(h,h.firstChild,0))return Fo(te(p.line,p.ch-f),i);f+=h.textContent.length}for(var d=a.previousSibling,m=r;d;d=d.previousSibling){if(p=c(d,d.firstChild,-1))return Fo(te(p.line,p.ch+m),i);m+=d.textContent.length}}$o.prototype.init=function(t){var e=this,r=this,n=r.cm,i=r.div=t.lineDiv;function s(t){for(var e=t.target;e;e=e.parentNode){if(e==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(e.className))break}return!1}function o(t){if(s(t)&&!mt(n,t)){if(n.somethingSelected())Oo({lineWise:!1,text:n.getSelections()}),"cut"==t.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var e=Lo(n);Oo({lineWise:!0,text:e.text}),"cut"==t.type&&n.operation((function(){n.setSelections(e.ranges,0,F),n.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var o=To.text.join("\n");if(t.clipboardData.setData("Text",o),t.clipboardData.getData("Text")==o)return void t.preventDefault()}var a=qo(),u=a.firstChild;n.display.lineSpace.insertBefore(a,n.display.lineSpace.firstChild),u.value=To.text.join("\n");var l=I();L(u),setTimeout((function(){n.display.lineSpace.removeChild(a),l.focus(),l==i&&r.showPrimarySelection()}),50)}}i.contentEditable=!0,Do(i,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),pt(i,"paste",(function(t){!s(t)||mt(n,t)||Po(t,n)||a<=11&&setTimeout(ti(n,(function(){return e.updateFromDOM()})),20)})),pt(i,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),pt(i,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),pt(i,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),pt(i,"touchstart",(function(){return r.forceCompositionEnd()})),pt(i,"input",(function(){e.composing||e.readFromDOMSoon()})),pt(i,"copy",o),pt(i,"cut",o)},$o.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},$o.prototype.prepareSelection=function(){var t=yn(this.cm,!1);return t.focus=I()==this.div,t},$o.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},$o.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},$o.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,n=e.doc.sel.primary(),i=n.from(),s=n.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||s.line<e.display.viewFrom)t.removeAllRanges();else{var o=Go(e,t.anchorNode,t.anchorOffset),a=Go(e,t.focusNode,t.focusOffset);if(!o||o.bad||!a||a.bad||0!=ee(se(o,a),i)||0!=ee(ie(o,a),s)){var u=e.display.view,l=i.line>=e.display.viewFrom&&zo(e,i)||{node:u[0].measure.map[2],offset:0},c=s.line<e.display.viewTo&&zo(e,s);if(!c){var p=u[u.length-1].measure,h=p.maps?p.maps[p.maps.length-1]:p.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(l&&c){var f,d=t.rangeCount&&t.getRangeAt(0);try{f=A(l.node,l.offset,c.offset,c.node)}catch(t){}f&&(!r&&e.state.focused?(t.collapse(l.node,l.offset),f.collapsed||(t.removeAllRanges(),t.addRange(f))):(t.removeAllRanges(),t.addRange(f)),d&&null==t.anchorNode?t.addRange(d):r&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},$o.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},$o.prototype.showMultipleSelections=function(t){k(this.cm.display.cursorDiv,t.cursors),k(this.cm.display.selectionDiv,t.selection)},$o.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},$o.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return O(this.div,e)},$o.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&I()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},$o.prototype.blur=function(){this.div.blur()},$o.prototype.getField=function(){return this.div},$o.prototype.supportsTouch=function(){return!0},$o.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Qn(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},$o.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},$o.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(g&&c&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=Go(e,t.anchorNode,t.anchorOffset),n=Go(e,t.focusNode,t.focusOffset);r&&n&&Qn(e,(function(){Qi(e.doc,Ai(r,n),F),(r.bad||n.bad)&&(e.curOp.selectionChanged=!0)}))}}},$o.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,r,n=this.cm,i=n.display,s=n.doc.sel.primary(),o=s.from(),a=s.to();if(0==o.ch&&o.line>n.firstLine()&&(o=te(o.line-1,Ht(n.doc,o.line-1).length)),a.ch==Ht(n.doc,a.line).text.length&&a.line<n.lastLine()&&(a=te(a.line+1,0)),o.line<i.viewFrom||a.line>i.viewTo-1)return!1;o.line==i.viewFrom||0==(t=cn(n,o.line))?(e=Zt(i.view[0].line),r=i.view[0].node):(e=Zt(i.view[t].line),r=i.view[t-1].node.nextSibling);var u,l,c=cn(n,a.line);if(c==i.view.length-1?(u=i.viewTo-1,l=i.lineDiv.lastChild):(u=Zt(i.view[c+1].line)-1,l=i.view[c+1].node.previousSibling),!r)return!1;for(var p=n.doc.splitLines(function(t,e,r,n,i){var s="",o=!1,a=t.doc.lineSeparator(),u=!1;function l(){o&&(s+=a,u&&(s+=a),o=u=!1)}function c(t){t&&(l(),s+=t)}function p(e){if(1==e.nodeType){var r=e.getAttribute("cm-text");if(r)return void c(r);var s,h=e.getAttribute("cm-marker");if(h){var f=t.findMarks(te(n,0),te(i+1,0),(g=+h,function(t){return t.id==g}));return void(f.length&&(s=f[0].find(0))&&c(Wt(t.doc,s.from,s.to).join(a)))}if("false"==e.getAttribute("contenteditable"))return;var d=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;d&&l();for(var m=0;m<e.childNodes.length;m++)p(e.childNodes[m]);/^(pre|p)$/i.test(e.nodeName)&&(u=!0),d&&(o=!0)}else 3==e.nodeType&&c(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;p(e),e!=r;)e=e.nextSibling,u=!1;return s}(n,r,l,e,u)),h=Wt(n.doc,te(e,0),te(u,Ht(n.doc,u).text.length));p.length>1&&h.length>1;)if(Y(p)==Y(h))p.pop(),h.pop(),u--;else{if(p[0]!=h[0])break;p.shift(),h.shift(),e++}for(var f=0,d=0,m=p[0],g=h[0],y=Math.min(m.length,g.length);f<y&&m.charCodeAt(f)==g.charCodeAt(f);)++f;for(var v=Y(p),b=Y(h),x=Math.min(v.length-(1==p.length?f:0),b.length-(1==h.length?f:0));d<x&&v.charCodeAt(v.length-d-1)==b.charCodeAt(b.length-d-1);)++d;if(1==p.length&&1==h.length&&e==o.line)for(;f&&f>o.ch&&v.charCodeAt(v.length-d-1)==b.charCodeAt(b.length-d-1);)f--,d++;p[p.length-1]=v.slice(0,v.length-d).replace(/^\u200b+/,""),p[0]=p[0].slice(f).replace(/\u200b+$/,"");var _=te(e,f),w=te(u,h.length?Y(h).length-d:0);return p.length>1||p[0]||ee(_,w)?(ds(n.doc,p,_,w,"+input"),!0):void 0},$o.prototype.ensurePolled=function(){this.forceCompositionEnd()},$o.prototype.reset=function(){this.forceCompositionEnd()},$o.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},$o.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},$o.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Qn(this.cm,(function(){return pn(t.cm)}))},$o.prototype.setUneditable=function(t){t.contentEditable="false"},$o.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ti(this.cm,Io)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},$o.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},$o.prototype.onContextMenu=function(){},$o.prototype.resetPosition=function(){},$o.prototype.needsContentAttribute=!0;var jo=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new U,this.hasSelection=!1,this.composing=null};jo.prototype.init=function(t){var e=this,r=this,n=this.cm;this.createField(t);var i=this.textarea;function s(t){if(!mt(n,t)){if(n.somethingSelected())Oo({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var e=Lo(n);Oo({lineWise:!0,text:e.text}),"cut"==t.type?n.setSelections(e.ranges,null,F):(r.prevInput="",i.value=e.text.join("\n"),L(i))}"cut"==t.type&&(n.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),m&&(i.style.width="0px"),pt(i,"input",(function(){o&&a>=9&&e.hasSelection&&(e.hasSelection=null),r.poll()})),pt(i,"paste",(function(t){mt(n,t)||Po(t,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())})),pt(i,"cut",s),pt(i,"copy",s),pt(t.scroller,"paste",(function(e){if(!_r(t,e)&&!mt(n,e)){if(!i.dispatchEvent)return n.state.pasteIncoming=+new Date,void r.focus();var s=new Event("paste");s.clipboardData=e.clipboardData,i.dispatchEvent(s)}})),pt(t.lineSpace,"selectstart",(function(e){_r(t,e)||bt(e)})),pt(i,"compositionstart",(function(){var t=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:t,range:n.markText(t,n.getCursor("to"),{className:"CodeMirror-composing"})}})),pt(i,"compositionend",(function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)}))},jo.prototype.createField=function(t){this.wrapper=qo(),this.textarea=this.wrapper.firstChild},jo.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},jo.prototype.prepareSelection=function(){var t=this.cm,e=t.display,r=t.doc,n=yn(t);if(t.options.moveInputWithCursor){var i=Hr(t,r.sel.primary().head,"div"),s=e.wrapper.getBoundingClientRect(),o=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+o.top-s.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+o.left-s.left))}return n},jo.prototype.showSelection=function(t){var e=this.cm.display;k(e.cursorDiv,t.cursors),k(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},jo.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var r=e.getSelection();this.textarea.value=r,e.state.focused&&L(this.textarea),o&&a>=9&&(this.hasSelection=r)}else t||(this.prevInput=this.textarea.value="",o&&a>=9&&(this.hasSelection=null))}},jo.prototype.getField=function(){return this.textarea},jo.prototype.supportsTouch=function(){return!1},jo.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||I()!=this.textarea))try{this.textarea.focus()}catch(t){}},jo.prototype.blur=function(){this.textarea.blur()},jo.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},jo.prototype.receivedFocus=function(){this.slowPoll()},jo.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},jo.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function r(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,r))}))},jo.prototype.poll=function(){var t=this,e=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||It(r)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=r.value;if(i==n&&!e.somethingSelected())return!1;if(o&&a>=9&&this.hasSelection===i||v&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var s=i.charCodeAt(0);if(8203!=s||n||(n="​"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var u=0,l=Math.min(n.length,i.length);u<l&&n.charCodeAt(u)==i.charCodeAt(u);)++u;return Qn(e,(function(){Io(e,i.slice(u),n.length-u,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?r.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},jo.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},jo.prototype.onKeyPress=function(){o&&a>=9&&(this.hasSelection=null),this.fastPoll()},jo.prototype.onContextMenu=function(t){var e=this,r=e.cm,n=r.display,i=e.textarea;e.contextMenuPending&&e.contextMenuPending();var s=ln(r,t),l=n.scroller.scrollTop;if(s&&!p){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(s)&&ti(r,Qi)(r.doc,Ai(s),F);var c,h=i.style.cssText,f=e.wrapper.style.cssText,d=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-d.top-5)+"px; left: "+(t.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(o?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",u&&(c=window.scrollY),n.input.focus(),u&&window.scrollTo(null,c),n.input.reset(),r.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=y,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),o&&a>=9&&g(),E){wt(t);var m=function(){ft(window,"mouseup",m),setTimeout(y,20)};pt(window,"mouseup",m)}else setTimeout(y,50)}function g(){if(null!=i.selectionStart){var t=r.somethingSelected(),s="​"+(t?i.value:"");i.value="⇚",i.value=s,e.prevInput=t?"":"​",i.selectionStart=1,i.selectionEnd=s.length,n.selForContextMenu=r.doc.sel}}function y(){if(e.contextMenuPending==y&&(e.contextMenuPending=!1,e.wrapper.style.cssText=f,i.style.cssText=h,o&&a<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=l),null!=i.selectionStart)){(!o||o&&a<9)&&g();var t=0,s=function(){n.selForContextMenu==r.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==e.prevInput?ti(r,as)(r):t++<10?n.detectingSelectAll=setTimeout(s,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(s,200)}}},jo.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},jo.prototype.setUneditable=function(){},jo.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function r(r,n,i,s){t.defaults[r]=n,i&&(e[r]=s?function(t,e,r){r!=wo&&i(t,e,r)}:i)}t.defineOption=r,t.Init=wo,r("value","",(function(t,e){return t.setValue(e)}),!0),r("mode",null,(function(t,e){t.doc.modeOption=e,Ti(t)}),!0),r("indentUnit",2,Ti,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,(function(t){Oi(t),Ur(t),pn(t)}),!0),r("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var r=[],n=t.doc.first;t.doc.iter((function(t){for(var i=0;;){var s=t.text.indexOf(e,i);if(-1==s)break;i=s+e.length,r.push(te(n,s))}n++}));for(var i=r.length-1;i>=0;i--)ds(t.doc,e,r[i],te(r[i].line,r[i].ch+e.length))}})),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(t,e,r){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),r!=wo&&t.refresh()})),r("specialCharPlaceholder",Je,(function(t){return t.refresh()}),!0),r("electricChars",!0),r("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),r("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),r("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),r("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),r("rtlMoveVisually",!x),r("wholeLineUpdateBefore",!0),r("theme","default",(function(t){_o(t),mi(t)}),!0),r("keyMap","default",(function(t,e,r){var n=Xs(e),i=r!=wo&&Xs(r);i&&i.detach&&i.detach(t,n),n.attach&&n.attach(t,i||null)})),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,No,!0),r("gutters",[],(function(t,e){t.display.gutterSpecs=fi(e,t.options.lineNumbers),mi(t)}),!0),r("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?on(t.display)+"px":"0",t.refresh()}),!0),r("coverGutterNextToScrollbar",!1,(function(t){return zn(t)}),!0),r("scrollbarStyle","native",(function(t){Vn(t),zn(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),r("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=fi(t.options.gutters,e),mi(t)}),!0),r("firstLineNumber",1,mi,!0),r("lineNumberFormatter",(function(t){return t}),mi,!0),r("showCursorWhenSelecting",!1,gn,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,(function(t,e){"nocursor"==e&&(An(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),r("screenReaderLabel",null,(function(t,e){e=""===e?null:e,t.display.input.screenReaderLabelChanged(e)})),r("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),r("dragDrop",!0,Ao),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,gn,!0),r("singleCursorHeightPerLine",!0,gn,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,Oi,!0),r("addModeClass",!1,Oi,!0),r("pollInterval",100),r("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),r("historyEventDelay",1250),r("viewportMargin",10,(function(t){return t.refresh()}),!0),r("maxHighlightLength",1e4,Oi,!0),r("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),r("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),r("autofocus",null),r("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),r("phrases",null)}(Mo),function(t){var e=t.optionHandlers,r=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,r){var n=this.options,i=n[t];n[t]==r&&"mode"!=t||(n[t]=r,e.hasOwnProperty(t)&&ti(this,e[t])(this,r,i),dt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Xs(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,r=0;r<e.length;++r)if(e[r]==t||e[r].name==t)return e.splice(r,1),!0},addOverlay:ei((function(e,r){var n=e.token?e:t.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");(function(t,e,r){for(var n=0,i=r(e);n<t.length&&r(t[n])<=i;)n++;t.splice(n,0,e)})(this.state.overlays,{mode:n,modeSpec:e,opaque:r&&r.opaque,priority:r&&r.priority||0},(function(t){return t.priority})),this.state.modeGen++,pn(this)})),removeOverlay:ei((function(t){for(var e=this.state.overlays,r=0;r<e.length;++r){var n=e[r].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(r,1),this.state.modeGen++,void pn(this)}})),indentLine:ei((function(t,e,r){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Jt(this.doc,t)&&Co(this,t,e,r)})),indentSelection:ei((function(t){for(var e=this.doc.sel.ranges,r=-1,n=0;n<e.length;n++){var i=e[n];if(i.empty())i.head.line>r&&(Co(this,i.head.line,t,!0),r=i.head.line,n==this.doc.sel.primIndex&&On(this));else{var s=i.from(),o=i.to(),a=Math.max(r,s.line);r=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var u=a;u<r;++u)Co(this,u,t);var l=this.doc.sel.ranges;0==s.ch&&e.length==l.length&&l[n].from().ch>0&&Zi(this.doc,n,new Ei(s,l[n].to()),F)}}})),getTokenAt:function(t,e){return ve(this,t,e)},getLineTokens:function(t,e){return ve(this,te(t),e,!0)},getTokenTypeAt:function(t){t=ae(this.doc,t);var e,r=he(this,Ht(this.doc,t.line)),n=0,i=(r.length-1)/2,s=t.ch;if(0==s)e=r[2];else for(;;){var o=n+i>>1;if((o?r[2*o-1]:0)>=s)i=o;else{if(!(r[2*o+1]<s)){e=r[2*o+2];break}n=o+1}}var a=e?e.indexOf("overlay "):-1;return a<0?e:0==a?null:e.slice(0,a-1)},getModeAt:function(e){var r=this.doc.mode;return r.innerMode?t.innerMode(r,this.getTokenAt(e).state).mode:r},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!r.hasOwnProperty(e))return n;var i=r[e],s=this.getModeAt(t);if("string"==typeof s[e])i[s[e]]&&n.push(i[s[e]]);else if(s[e])for(var o=0;o<s[e].length;o++){var a=i[s[e][o]];a&&n.push(a)}else s.helperType&&i[s.helperType]?n.push(i[s.helperType]):i[s.name]&&n.push(i[s.name]);for(var u=0;u<i._global.length;u++){var l=i._global[u];l.pred(s,this)&&-1==$(n,l.val)&&n.push(l.val)}return n},getStateAfter:function(t,e){var r=this.doc;return fe(this,(t=oe(r,null==t?r.first+r.size-1:t))+1,e).state},cursorCoords:function(t,e){var r=this.doc.sel.primary();return Hr(this,null==t?r.head:"object"==typeof t?ae(this.doc,t):t?r.from():r.to(),e||"page")},charCoords:function(t,e){return jr(this,ae(this.doc,t),e||"page")},coordsChar:function(t,e){return Xr(this,(t=Vr(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Vr(this,{top:t,left:0},e||"page").top,Kt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,r){var n,i=!1;if("number"==typeof t){var s=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>s&&(t=s,i=!0),n=Ht(this.doc,t)}else n=t;return Gr(this,n,{top:0,left:0},e||"page",r||i).top+(i?this.doc.height-Ge(n):0)},defaultTextHeight:function(){return rn(this.display)},defaultCharWidth:function(){return nn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,r,n,i){var s,o,a,u=this.display,l=(t=Hr(this,ae(this.doc,t))).bottom,c=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),u.sizer.appendChild(e),"over"==n)l=t.top;else if("above"==n||"near"==n){var p=Math.max(u.wrapper.clientHeight,this.doc.height),h=Math.max(u.sizer.clientWidth,u.lineSpace.clientWidth);("above"==n||t.bottom+e.offsetHeight>p)&&t.top>e.offsetHeight?l=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=p&&(l=t.bottom),c+e.offsetWidth>h&&(c=h-e.offsetWidth)}e.style.top=l+"px",e.style.left=e.style.right="","right"==i?(c=u.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?c=0:"middle"==i&&(c=(u.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),r&&(s=this,o={left:c,top:l,right:c+e.offsetWidth,bottom:l+e.offsetHeight},null!=(a=Cn(s,o)).scrollTop&&Ln(s,a.scrollTop),null!=a.scrollLeft&&qn(s,a.scrollLeft))},triggerOnKeyDown:ei(lo),triggerOnKeyPress:ei(po),triggerOnKeyUp:co,triggerOnMouseDown:ei(go),execCommand:function(t){if(to.hasOwnProperty(t))return to[t].call(null,this)},triggerElectric:ei((function(t){Ro(this,t)})),findPosH:function(t,e,r,n){var i=1;e<0&&(i=-1,e=-e);for(var s=ae(this.doc,t),o=0;o<e&&!(s=Bo(this.doc,s,i,r,n)).hitSide;++o);return s},moveH:ei((function(t,e){var r=this;this.extendSelectionsBy((function(n){return r.display.shift||r.doc.extend||n.empty()?Bo(r.doc,n.head,t,e,r.options.rtlMoveVisually):t<0?n.from():n.to()}),V)})),deleteH:ei((function(t,e){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Zs(this,(function(r){var i=Bo(n,r.head,t,e,!1);return t<0?{from:i,to:r.head}:{from:r.head,to:i}}))})),findPosV:function(t,e,r,n){var i=1,s=n;e<0&&(i=-1,e=-e);for(var o=ae(this.doc,t),a=0;a<e;++a){var u=Hr(this,o,"div");if(null==s?s=u.left:u.left=s,(o=Uo(this,u,i,r)).hitSide)break}return o},moveV:ei((function(t,e){var r=this,n=this.doc,i=[],s=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy((function(o){if(s)return t<0?o.from():o.to();var a=Hr(r,o.head,"div");null!=o.goalColumn&&(a.left=o.goalColumn),i.push(a.left);var u=Uo(r,a,t,e);return"page"==e&&o==n.sel.primary()&&Tn(r,jr(r,u,"div").top-a.top),u}),V),i.length)for(var o=0;o<n.sel.ranges.length;o++)n.sel.ranges[o].goalColumn=i[o]})),findWordAt:function(t){var e=Ht(this.doc,t.line).text,r=t.ch,n=t.ch;if(e){var i=this.getHelper(t,"wordChars");"before"!=t.sticky&&n!=e.length||!r?++n:--r;for(var s=e.charAt(r),o=tt(s,i)?function(t){return tt(t,i)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!tt(t)};r>0&&o(e.charAt(r-1));)--r;for(;n<e.length&&o(e.charAt(n));)++n}return new Ei(te(t.line,r),te(t.line,n))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?P(this.display.cursorDiv,"CodeMirror-overwrite"):N(this.display.cursorDiv,"CodeMirror-overwrite"),dt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ei((function(t,e){In(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Ar(this)-this.display.barHeight,width:t.scrollWidth-Ar(this)-this.display.barWidth,clientHeight:Mr(this),clientWidth:Nr(this)}},scrollIntoView:ei((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:te(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Pn(t),t.curOp.scrollToPos=e}(this,t):Rn(this,t.from,t.to,t.margin)})),setSize:ei((function(t,e){var r=this,n=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=n(t)),null!=e&&(this.display.wrapper.style.height=n(e)),this.options.lineWrapping&&Br(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){hn(r,i,"widget");break}++i})),this.curOp.forceUpdate=!0,dt(this,"refresh",this)})),operation:function(t){return Qn(this,t)},startOperation:function(){return Hn(this)},endOperation:function(){return Wn(this)},refresh:ei((function(){var t=this.display.cachedTextHeight;pn(this),this.curOp.forceUpdate=!0,Ur(this),In(this,this.doc.scrollLeft,this.doc.scrollTop),li(this.display),(null==t||Math.abs(t-rn(this.display))>.5||this.options.lineWrapping)&&un(this),dt(this,"refresh",this)})),swapDoc:ei((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Li(this,t),Ur(this),this.display.input.reset(),In(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ar(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},vt(t),t.registerHelper=function(e,n,i){r.hasOwnProperty(e)||(r[e]=t[e]={_global:[]}),r[e][n]=i},t.registerGlobalHelper=function(e,n,i,s){t.registerHelper(e,n,s),r[e]._global.push({pred:i,val:s})}}(Mo);var Ho="iter insert remove copy getEditor constructor".split(" ");for(var Wo in Ts.prototype)Ts.prototype.hasOwnProperty(Wo)&&$(Ho,Wo)<0&&(Mo.prototype[Wo]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ts.prototype[Wo]));return vt(Ts),Mo.inputStyles={textarea:jo,contenteditable:$o},Mo.defineMode=function(t){Mo.defaults.mode||"null"==t||(Mo.defaults.mode=t),qt.apply(this,arguments)},Mo.defineMIME=function(t,e){Dt[t]=e},Mo.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Mo.defineMIME("text/plain","null"),Mo.defineExtension=function(t,e){Mo.prototype[t]=e},Mo.defineDocExtension=function(t,e){Ts.prototype[t]=e},Mo.fromTextArea=function(t,e){if((e=e?q(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var r=I();e.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}function n(){t.value=a.getValue()}var i;if(t.form&&(pt(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var s=t.form;i=s.submit;try{var o=s.submit=function(){n(),s.submit=i,s.submit(),s.submit=o}}catch(t){}}e.finishInit=function(r){r.save=n,r.getTextArea=function(){return t},r.toTextArea=function(){r.toTextArea=isNaN,n(),t.parentNode.removeChild(r.getWrapperElement()),t.style.display="",t.form&&(ft(t.form,"submit",n),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=i))}},t.style.display="none";var a=Mo((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return a},function(t){t.off=ft,t.on=pt,t.wheelEventPixels=xi,t.Doc=Ts,t.splitLines=Ot,t.countColumn=B,t.findColumn=j,t.isWordChar=Q,t.Pass=z,t.signal=dt,t.Line=He,t.changeEnd=Ni,t.scrollbarModel=Gn,t.Pos=te,t.cmpPos=ee,t.modes=Lt,t.mimeModes=Dt,t.resolveMode=Bt,t.getMode=Ut,t.modeExtensions=$t,t.extendMode=zt,t.copyState=Ft,t.startState=Vt,t.innerMode=Gt,t.commands=to,t.keyMap=Fs,t.keyName=Ys,t.isModifierKey=Hs,t.lookupKey=js,t.normalizeKeyMap=Vs,t.StringStream=jt,t.SharedTextMarker=Ns,t.TextMarker=Ss,t.LineWidget=_s,t.e_preventDefault=bt,t.e_stopPropagation=xt,t.e_stop=wt,t.addClass=P,t.contains=O,t.rmClass=N,t.keyNames=Bs}(Mo),Mo.version="5.61.0",Mo}()},18934:(t,e,r)=>{!function(t){"use strict";function e(t){for(var e={},r=0;r<t.length;++r)e[t[r].toLowerCase()]=!0;return e}t.defineMode("css",(function(e,r){var n=r.inline;r.propertyKeywords||(r=t.resolveMode("text/css"));var i,s,o=e.indentUnit,a=r.tokenHooks,u=r.documentTypes||{},l=r.mediaTypes||{},c=r.mediaFeatures||{},p=r.mediaValueKeywords||{},h=r.propertyKeywords||{},f=r.nonStandardPropertyKeywords||{},d=r.fontProperties||{},m=r.counterDescriptors||{},g=r.colorKeywords||{},y=r.valueKeywords||{},v=r.allowNested,b=r.lineComment,x=!0===r.supportsAtComponent,_=!1!==e.highlightNonStandardPropertyKeywords;function w(t,e){return i=e,t}function E(t,e){var r=t.next();if(a[r]){var n=a[r](t,e);if(!1!==n)return n}return"@"==r?(t.eatWhile(/[\w\\\-]/),w("def",t.current())):"="==r||("~"==r||"|"==r)&&t.eat("=")?w(null,"compare"):'"'==r||"'"==r?(e.tokenize=S(r),e.tokenize(t,e)):"#"==r?(t.eatWhile(/[\w\\\-]/),w("atom","hash")):"!"==r?(t.match(/^\s*\w*/),w("keyword","important")):/\d/.test(r)||"."==r&&t.eat(/\d/)?(t.eatWhile(/[\w.%]/),w("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?w(null,"select-op"):"."==r&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?w("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?w(null,r):t.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(t.current())&&(e.tokenize=A),w("variable callee","variable")):/[\w\\\-]/.test(r)?(t.eatWhile(/[\w\\\-]/),w("property","word")):w(null,null):/[\d.]/.test(t.peek())?(t.eatWhile(/[\w.%]/),w("number","unit")):t.match(/^-[\w\\\-]*/)?(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?w("variable-2","variable-definition"):w("variable-2","variable")):t.match(/^\w+-/)?w("meta","meta"):void 0}function S(t){return function(e,r){for(var n,i=!1;null!=(n=e.next());){if(n==t&&!i){")"==t&&e.backUp(1);break}i=!i&&"\\"==n}return(n==t||!i&&")"!=t)&&(r.tokenize=null),w("string","string")}}function A(t,e){return t.next(),t.match(/^\s*[\"\')]/,!1)?e.tokenize=null:e.tokenize=S(")"),w(null,"(")}function N(t,e,r){this.type=t,this.indent=e,this.prev=r}function M(t,e,r,n){return t.context=new N(r,e.indentation()+(!1===n?0:o),t.context),r}function k(t){return t.context.prev&&(t.context=t.context.prev),t.context.type}function C(t,e,r){return I[r.context.type](t,e,r)}function T(t,e,r,n){for(var i=n||1;i>0;i--)r.context=r.context.prev;return C(t,e,r)}function O(t){var e=t.current().toLowerCase();s=y.hasOwnProperty(e)?"atom":g.hasOwnProperty(e)?"keyword":"variable"}var I={top:function(t,e,r){if("{"==t)return M(r,e,"block");if("}"==t&&r.context.prev)return k(r);if(x&&/@component/i.test(t))return M(r,e,"atComponentBlock");if(/^@(-moz-)?document$/i.test(t))return M(r,e,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(t))return M(r,e,"atBlock");if(/^@(font-face|counter-style)/i.test(t))return r.stateArg=t,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(t))return"keyframes";if(t&&"@"==t.charAt(0))return M(r,e,"at");if("hash"==t)s="builtin";else if("word"==t)s="tag";else{if("variable-definition"==t)return"maybeprop";if("interpolation"==t)return M(r,e,"interpolation");if(":"==t)return"pseudo";if(v&&"("==t)return M(r,e,"parens")}return r.context.type},block:function(t,e,r){if("word"==t){var n=e.current().toLowerCase();return h.hasOwnProperty(n)?(s="property","maybeprop"):f.hasOwnProperty(n)?(s=_?"string-2":"property","maybeprop"):v?(s=e.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(s+=" error","maybeprop")}return"meta"==t?"block":v||"hash"!=t&&"qualifier"!=t?I.top(t,e,r):(s="error","block")},maybeprop:function(t,e,r){return":"==t?M(r,e,"prop"):C(t,e,r)},prop:function(t,e,r){if(";"==t)return k(r);if("{"==t&&v)return M(r,e,"propBlock");if("}"==t||"{"==t)return T(t,e,r);if("("==t)return M(r,e,"parens");if("hash"!=t||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(e.current())){if("word"==t)O(e);else if("interpolation"==t)return M(r,e,"interpolation")}else s+=" error";return"prop"},propBlock:function(t,e,r){return"}"==t?k(r):"word"==t?(s="property","maybeprop"):r.context.type},parens:function(t,e,r){return"{"==t||"}"==t?T(t,e,r):")"==t?k(r):"("==t?M(r,e,"parens"):"interpolation"==t?M(r,e,"interpolation"):("word"==t&&O(e),"parens")},pseudo:function(t,e,r){return"meta"==t?"pseudo":"word"==t?(s="variable-3",r.context.type):C(t,e,r)},documentTypes:function(t,e,r){return"word"==t&&u.hasOwnProperty(e.current())?(s="tag",r.context.type):I.atBlock(t,e,r)},atBlock:function(t,e,r){if("("==t)return M(r,e,"atBlock_parens");if("}"==t||";"==t)return T(t,e,r);if("{"==t)return k(r)&&M(r,e,v?"block":"top");if("interpolation"==t)return M(r,e,"interpolation");if("word"==t){var n=e.current().toLowerCase();s="only"==n||"not"==n||"and"==n||"or"==n?"keyword":l.hasOwnProperty(n)?"attribute":c.hasOwnProperty(n)?"property":p.hasOwnProperty(n)?"keyword":h.hasOwnProperty(n)?"property":f.hasOwnProperty(n)?_?"string-2":"property":y.hasOwnProperty(n)?"atom":g.hasOwnProperty(n)?"keyword":"error"}return r.context.type},atComponentBlock:function(t,e,r){return"}"==t?T(t,e,r):"{"==t?k(r)&&M(r,e,v?"block":"top",!1):("word"==t&&(s="error"),r.context.type)},atBlock_parens:function(t,e,r){return")"==t?k(r):"{"==t||"}"==t?T(t,e,r,2):I.atBlock(t,e,r)},restricted_atBlock_before:function(t,e,r){return"{"==t?M(r,e,"restricted_atBlock"):"word"==t&&"@counter-style"==r.stateArg?(s="variable","restricted_atBlock_before"):C(t,e,r)},restricted_atBlock:function(t,e,r){return"}"==t?(r.stateArg=null,k(r)):"word"==t?(s="@font-face"==r.stateArg&&!d.hasOwnProperty(e.current().toLowerCase())||"@counter-style"==r.stateArg&&!m.hasOwnProperty(e.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(t,e,r){return"word"==t?(s="variable","keyframes"):"{"==t?M(r,e,"top"):C(t,e,r)},at:function(t,e,r){return";"==t?k(r):"{"==t||"}"==t?T(t,e,r):("word"==t?s="tag":"hash"==t&&(s="builtin"),"at")},interpolation:function(t,e,r){return"}"==t?k(r):"{"==t||";"==t?T(t,e,r):("word"==t?s="variable":"variable"!=t&&"("!=t&&")"!=t&&(s="error"),"interpolation")}};return{startState:function(t){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new N(n?"block":"top",t||0,null)}},token:function(t,e){if(!e.tokenize&&t.eatSpace())return null;var r=(e.tokenize||E)(t,e);return r&&"object"==typeof r&&(i=r[1],r=r[0]),s=r,"comment"!=i&&(e.state=I[e.state](i,t,e)),s},indent:function(t,e){var r=t.context,n=e&&e.charAt(0),i=r.indent;return"prop"!=r.type||"}"!=n&&")"!=n||(r=r.prev),r.prev&&("}"!=n||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"restricted_atBlock"!=r.type?(")"!=n||"parens"!=r.type&&"atBlock_parens"!=r.type)&&("{"!=n||"at"!=r.type&&"atBlock"!=r.type)||(i=Math.max(0,r.indent-o)):i=(r=r.prev).indent),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}}));var r=["domain","regexp","url","url-prefix"],n=e(r),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],s=e(i),o=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],a=e(o),u=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],l=e(u),c=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],p=e(c),h=["border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],f=e(h),d=e(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),m=e(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],y=e(g),v=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=e(v),x=r.concat(i).concat(o).concat(u).concat(c).concat(h).concat(g).concat(v);function _(t,e){for(var r,n=!1;null!=(r=t.next());){if(n&&"/"==r){e.tokenize=null;break}n="*"==r}return["comment","comment"]}t.registerHelper("hintWords","css",x),t.defineMIME("text/css",{documentTypes:n,mediaTypes:s,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:p,nonStandardPropertyKeywords:f,fontProperties:d,counterDescriptors:m,colorKeywords:y,valueKeywords:b,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=_,_(t,e))}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:s,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:p,nonStandardPropertyKeywords:f,colorKeywords:y,valueKeywords:b,fontProperties:d,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=_,_(t,e)):["operator","operator"]},":":function(t){return!!t.match(/^\s*\{/,!1)&&[null,null]},$:function(t){return t.match(/^[\w-]+/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(t){return!!t.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:s,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:p,nonStandardPropertyKeywords:f,colorKeywords:y,valueKeywords:b,fontProperties:d,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=_,_(t,e)):["operator","operator"]},"@":function(t){return t.eat("{")?[null,"interpolation"]:!t.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:s,mediaFeatures:a,propertyKeywords:p,nonStandardPropertyKeywords:f,fontProperties:d,counterDescriptors:m,colorKeywords:y,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(t,e){return!!t.eat("*")&&(e.tokenize=_,_(t,e))}},name:"css",helperType:"gss"})}(r(53791))},57456:(t,e,r)=>{!function(t){"use strict";var e={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var r={};function n(t,e){var n=t.match(function(t){return r[t]||(r[t]=new RegExp("\\s+"+t+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(e));return n?/^\s*(.*?)\s*$/.exec(n[2])[1]:""}function i(t,e){return new RegExp((e?"^":"")+"</s*"+t+"s*>","i")}function s(t,e){for(var r in t)for(var n=e[r]||(e[r]=[]),i=t[r],s=i.length-1;s>=0;s--)n.unshift(i[s])}t.defineMode("htmlmixed",(function(r,o){var a=t.getMode(r,{name:"xml",htmlMode:!0,multilineTagIndentFactor:o.multilineTagIndentFactor,multilineTagIndentPastTag:o.multilineTagIndentPastTag,allowMissingTagName:o.allowMissingTagName}),u={},l=o&&o.tags,c=o&&o.scriptTypes;if(s(e,u),l&&s(l,u),c)for(var p=c.length-1;p>=0;p--)u.script.unshift(["type",c[p].matches,c[p].mode]);function h(e,s){var o,l=a.token(e,s.htmlState),c=/\btag\b/.test(l);if(c&&!/[<>\s\/]/.test(e.current())&&(o=s.htmlState.tagName&&s.htmlState.tagName.toLowerCase())&&u.hasOwnProperty(o))s.inTag=o+" ";else if(s.inTag&&c&&/>$/.test(e.current())){var p=/^([\S]+) (.*)/.exec(s.inTag);s.inTag=null;var f=">"==e.current()&&function(t,e){for(var r=0;r<t.length;r++){var i=t[r];if(!i[0]||i[1].test(n(e,i[0])))return i[2]}}(u[p[1]],p[2]),d=t.getMode(r,f),m=i(p[1],!0),g=i(p[1],!1);s.token=function(t,e){return t.match(m,!1)?(e.token=h,e.localState=e.localMode=null,null):function(t,e,r){var n=t.current(),i=n.search(e);return i>-1?t.backUp(n.length-i):n.match(/<\/?$/)&&(t.backUp(n.length),t.match(e,!1)||t.match(n)),r}(t,g,e.localMode.token(t,e.localState))},s.localMode=d,s.localState=t.startState(d,a.indent(s.htmlState,"",""))}else s.inTag&&(s.inTag+=e.current(),e.eol()&&(s.inTag+=" "));return l}return{startState:function(){return{token:h,inTag:null,localMode:null,localState:null,htmlState:t.startState(a)}},copyState:function(e){var r;return e.localState&&(r=t.copyState(e.localMode,e.localState)),{token:e.token,inTag:e.inTag,localMode:e.localMode,localState:r,htmlState:t.copyState(a,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,r,n){return!e.localMode||/^\s*<\//.test(r)?a.indent(e.htmlState,r,n):e.localMode.indent?e.localMode.indent(e.localState,r,n):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||a}}}}),"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")}(r(53791),r(12310),r(25027),r(18934))},25027:(t,e,r)=>{!function(t){"use strict";t.defineMode("javascript",(function(e,r){var n,i,s=e.indentUnit,o=r.statementIndent,a=r.jsonld,u=r.json||a,l=!1!==r.trackScope,c=r.typescript,p=r.wordCharacters||/[\w$\xa1-\uffff]/,h=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),r=t("keyword b"),n=t("keyword c"),i=t("keyword d"),s=t("operator"),o={type:"atom",style:"atom"};return{if:t("if"),while:e,with:e,else:r,do:r,try:r,finally:r,return:i,break:i,continue:i,new:t("new"),delete:n,void:n,throw:n,debugger:t("debugger"),var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:s,typeof:s,instanceof:s,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:t("this"),class:t("class"),super:t("atom"),yield:n,export:t("export"),import:t("import"),extends:n,await:n}}(),f=/[+\-*&%=<>!?|~^@]/,d=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function m(t,e,r){return n=t,i=r,e}function g(t,e){var r,n=t.next();if('"'==n||"'"==n)return e.tokenize=(r=n,function(t,e){var n,i=!1;if(a&&"@"==t.peek()&&t.match(d))return e.tokenize=g,m("jsonld-keyword","meta");for(;null!=(n=t.next())&&(n!=r||i);)i=!i&&"\\"==n;return i||(e.tokenize=g),m("string","string")}),e.tokenize(t,e);if("."==n&&t.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return m("number","number");if("."==n&&t.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return m(n);if("="==n&&t.eat(">"))return m("=>","operator");if("0"==n&&t.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return m("number","number");if(/\d/.test(n))return t.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),m("number","number");if("/"==n)return t.eat("*")?(e.tokenize=y,y(t,e)):t.eat("/")?(t.skipToEnd(),m("comment","comment")):Zt(t,e,1)?(function(t){for(var e,r=!1,n=!1;null!=(e=t.next());){if(!r){if("/"==e&&!n)return;"["==e?n=!0:n&&"]"==e&&(n=!1)}r=!r&&"\\"==e}}(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),m("regexp","string-2")):(t.eat("="),m("operator","operator",t.current()));if("`"==n)return e.tokenize=v,v(t,e);if("#"==n&&"!"==t.peek())return t.skipToEnd(),m("meta","meta");if("#"==n&&t.eatWhile(p))return m("variable","property");if("<"==n&&t.match("!--")||"-"==n&&t.match("->")&&!/\S/.test(t.string.slice(0,t.start)))return t.skipToEnd(),m("comment","comment");if(f.test(n))return">"==n&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=n&&"="!=n||t.eat("="):/[<>*+\-|&?]/.test(n)&&(t.eat(n),">"==n&&t.eat(n))),"?"==n&&t.eat(".")?m("."):m("operator","operator",t.current());if(p.test(n)){t.eatWhile(p);var i=t.current();if("."!=e.lastType){if(h.propertyIsEnumerable(i)){var s=h[i];return m(s.type,s.style,i)}if("async"==i&&t.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return m("async","keyword",i)}return m("variable","variable",i)}}function y(t,e){for(var r,n=!1;r=t.next();){if("/"==r&&n){e.tokenize=g;break}n="*"==r}return m("comment","comment")}function v(t,e){for(var r,n=!1;null!=(r=t.next());){if(!n&&("`"==r||"$"==r&&t.eat("{"))){e.tokenize=g;break}n=!n&&"\\"==r}return m("quasi","string-2",t.current())}function b(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var r=t.string.indexOf("=>",t.start);if(!(r<0)){if(c){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,r));n&&(r=n.index)}for(var i=0,s=!1,o=r-1;o>=0;--o){var a=t.string.charAt(o),u="([{}])".indexOf(a);if(u>=0&&u<3){if(!i){++o;break}if(0==--i){"("==a&&(s=!0);break}}else if(u>=3&&u<6)++i;else if(p.test(a))s=!0;else if(/["'\/`]/.test(a))for(;;--o){if(0==o)return;if(t.string.charAt(o-1)==a&&"\\"!=t.string.charAt(o-2)){o--;break}}else if(s&&!i){++o;break}}s&&!i&&(e.fatArrowAt=o)}}var x={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function _(t,e,r,n,i,s){this.indented=t,this.column=e,this.type=r,this.prev=i,this.info=s,null!=n&&(this.align=n)}function w(t,e){if(!l)return!1;for(var r=t.localVars;r;r=r.next)if(r.name==e)return!0;for(var n=t.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==e)return!0}var E={state:null,column:null,marked:null,cc:null};function S(){for(var t=arguments.length-1;t>=0;t--)E.cc.push(arguments[t])}function A(){return S.apply(null,arguments),!0}function N(t,e){for(var r=e;r;r=r.next)if(r.name==t)return!0;return!1}function M(t){var e=E.state;if(E.marked="def",l){if(e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var n=k(t,e.context);if(null!=n)return void(e.context=n)}else if(!N(t,e.localVars))return void(e.localVars=new O(t,e.localVars));r.globalVars&&!N(t,e.globalVars)&&(e.globalVars=new O(t,e.globalVars))}}function k(t,e){if(e){if(e.block){var r=k(t,e.prev);return r?r==e.prev?e:new T(r,e.vars,!0):null}return N(t,e.vars)?e:new T(e.prev,new O(t,e.vars),!1)}return null}function C(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function T(t,e,r){this.prev=t,this.vars=e,this.block=r}function O(t,e){this.name=t,this.next=e}var I=new O("this",new O("arguments",null));function P(){E.state.context=new T(E.state.context,E.state.localVars,!1),E.state.localVars=I}function R(){E.state.context=new T(E.state.context,E.state.localVars,!0),E.state.localVars=null}function L(){E.state.localVars=E.state.context.vars,E.state.context=E.state.context.prev}function D(t,e){var r=function(){var r=E.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var i=r.lexical;i&&")"==i.type&&i.align;i=i.prev)n=i.indented;r.lexical=new _(n,E.stream.column(),t,null,r.lexical,e)};return r.lex=!0,r}function q(){var t=E.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function B(t){return function e(r){return r==t?A():";"==t||"}"==r||")"==r||"]"==r?S():A(e)}}function U(t,e){return"var"==t?A(D("vardef",e),_t,B(";"),q):"keyword a"==t?A(D("form"),G,U,q):"keyword b"==t?A(D("form"),U,q):"keyword d"==t?E.stream.match(/^\s*$/,!1)?A():A(D("stat"),j,B(";"),q):"debugger"==t?A(B(";")):"{"==t?A(D("}"),R,at,q,L):";"==t?A():"if"==t?("else"==E.state.lexical.info&&E.state.cc[E.state.cc.length-1]==q&&E.state.cc.pop()(),A(D("form"),G,U,q,Mt)):"function"==t?A(Ot):"for"==t?A(D("form"),R,kt,U,L,q):"class"==t||c&&"interface"==e?(E.marked="keyword",A(D("form","class"==t?t:e),Dt,q)):"variable"==t?c&&"declare"==e?(E.marked="keyword",A(U)):c&&("module"==e||"enum"==e||"type"==e)&&E.stream.match(/^\s*\w/,!1)?(E.marked="keyword","enum"==e?A(Yt):"type"==e?A(Pt,B("operator"),ht,B(";")):A(D("form"),wt,B("{"),D("}"),at,q,q)):c&&"namespace"==e?(E.marked="keyword",A(D("form"),z,U,q)):c&&"abstract"==e?(E.marked="keyword",A(U)):A(D("stat"),tt):"switch"==t?A(D("form"),G,B("{"),D("}","switch"),R,at,q,q,L):"case"==t?A(z,B(":")):"default"==t?A(B(":")):"catch"==t?A(D("form"),P,$,U,q,L):"export"==t?A(D("stat"),$t,q):"import"==t?A(D("stat"),Ft,q):"async"==t?A(U):"@"==e?A(z,U):S(D("stat"),z,B(";"),q)}function $(t){if("("==t)return A(Rt,B(")"))}function z(t,e){return V(t,e,!1)}function F(t,e){return V(t,e,!0)}function G(t){return"("!=t?S():A(D(")"),j,B(")"),q)}function V(t,e,r){if(E.state.fatArrowAt==E.stream.start){var n=r?K:Z;if("("==t)return A(P,D(")"),st(Rt,")"),q,B("=>"),n,L);if("variable"==t)return S(P,wt,B("=>"),n,L)}var i=r?W:H;return x.hasOwnProperty(t)?A(i):"function"==t?A(Ot,i):"class"==t||c&&"interface"==e?(E.marked="keyword",A(D("form"),Lt,q)):"keyword c"==t||"async"==t?A(r?F:z):"("==t?A(D(")"),j,B(")"),q,i):"operator"==t||"spread"==t?A(r?F:z):"["==t?A(D("]"),Wt,q,i):"{"==t?ot(rt,"}",null,i):"quasi"==t?S(Y,i):"new"==t?A(function(t){return function(e){return"."==e?A(t?Q:J):"variable"==e&&c?A(vt,t?W:H):S(t?F:z)}}(r)):A()}function j(t){return t.match(/[;\}\)\],]/)?S():S(z)}function H(t,e){return","==t?A(j):W(t,e,!1)}function W(t,e,r){var n=0==r?H:W,i=0==r?z:F;return"=>"==t?A(P,r?K:Z,L):"operator"==t?/\+\+|--/.test(e)||c&&"!"==e?A(n):c&&"<"==e&&E.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?A(D(">"),st(ht,">"),q,n):"?"==e?A(z,B(":"),i):A(i):"quasi"==t?S(Y,n):";"!=t?"("==t?ot(F,")","call",n):"."==t?A(et,n):"["==t?A(D("]"),j,B("]"),q,n):c&&"as"==e?(E.marked="keyword",A(ht,n)):"regexp"==t?(E.state.lastType=E.marked="operator",E.stream.backUp(E.stream.pos-E.stream.start-1),A(i)):void 0:void 0}function Y(t,e){return"quasi"!=t?S():"${"!=e.slice(e.length-2)?A(Y):A(z,X)}function X(t){if("}"==t)return E.marked="string-2",E.state.tokenize=v,A(Y)}function Z(t){return b(E.stream,E.state),S("{"==t?U:z)}function K(t){return b(E.stream,E.state),S("{"==t?U:F)}function J(t,e){if("target"==e)return E.marked="keyword",A(H)}function Q(t,e){if("target"==e)return E.marked="keyword",A(W)}function tt(t){return":"==t?A(q,U):S(H,B(";"),q)}function et(t){if("variable"==t)return E.marked="property",A()}function rt(t,e){return"async"==t?(E.marked="property",A(rt)):"variable"==t||"keyword"==E.style?(E.marked="property","get"==e||"set"==e?A(nt):(c&&E.state.fatArrowAt==E.stream.start&&(r=E.stream.match(/^\s*:\s*/,!1))&&(E.state.fatArrowAt=E.stream.pos+r[0].length),A(it))):"number"==t||"string"==t?(E.marked=a?"property":E.style+" property",A(it)):"jsonld-keyword"==t?A(it):c&&C(e)?(E.marked="keyword",A(rt)):"["==t?A(z,ut,B("]"),it):"spread"==t?A(F,it):"*"==e?(E.marked="keyword",A(rt)):":"==t?S(it):void 0;var r}function nt(t){return"variable"!=t?S(it):(E.marked="property",A(Ot))}function it(t){return":"==t?A(F):"("==t?S(Ot):void 0}function st(t,e,r){function n(i,s){if(r?r.indexOf(i)>-1:","==i){var o=E.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),A((function(r,n){return r==e||n==e?S():S(t)}),n)}return i==e||s==e?A():r&&r.indexOf(";")>-1?S(t):A(B(e))}return function(r,i){return r==e||i==e?A():S(t,n)}}function ot(t,e,r){for(var n=3;n<arguments.length;n++)E.cc.push(arguments[n]);return A(D(e,r),st(t,e),q)}function at(t){return"}"==t?A():S(U,at)}function ut(t,e){if(c){if(":"==t)return A(ht);if("?"==e)return A(ut)}}function lt(t,e){if(c&&(":"==t||"in"==e))return A(ht)}function ct(t){if(c&&":"==t)return E.stream.match(/^\s*\w+\s+is\b/,!1)?A(z,pt,ht):A(ht)}function pt(t,e){if("is"==e)return E.marked="keyword",A()}function ht(t,e){return"keyof"==e||"typeof"==e||"infer"==e||"readonly"==e?(E.marked="keyword",A("typeof"==e?F:ht)):"variable"==t||"void"==e?(E.marked="type",A(yt)):"|"==e||"&"==e?A(ht):"string"==t||"number"==t||"atom"==t?A(yt):"["==t?A(D("]"),st(ht,"]",","),q,yt):"{"==t?A(D("}"),dt,q,yt):"("==t?A(st(gt,")"),ft,yt):"<"==t?A(st(ht,">"),ht):void 0}function ft(t){if("=>"==t)return A(ht)}function dt(t){return t.match(/[\}\)\]]/)?A():","==t||";"==t?A(dt):S(mt,dt)}function mt(t,e){return"variable"==t||"keyword"==E.style?(E.marked="property",A(mt)):"?"==e||"number"==t||"string"==t?A(mt):":"==t?A(ht):"["==t?A(B("variable"),lt,B("]"),mt):"("==t?S(It,mt):t.match(/[;\}\)\],]/)?void 0:A()}function gt(t,e){return"variable"==t&&E.stream.match(/^\s*[?:]/,!1)||"?"==e?A(gt):":"==t?A(ht):"spread"==t?A(gt):S(ht)}function yt(t,e){return"<"==e?A(D(">"),st(ht,">"),q,yt):"|"==e||"."==t||"&"==e?A(ht):"["==t?A(ht,B("]"),yt):"extends"==e||"implements"==e?(E.marked="keyword",A(ht)):"?"==e?A(ht,B(":"),ht):void 0}function vt(t,e){if("<"==e)return A(D(">"),st(ht,">"),q,yt)}function bt(){return S(ht,xt)}function xt(t,e){if("="==e)return A(ht)}function _t(t,e){return"enum"==e?(E.marked="keyword",A(Yt)):S(wt,ut,At,Nt)}function wt(t,e){return c&&C(e)?(E.marked="keyword",A(wt)):"variable"==t?(M(e),A()):"spread"==t?A(wt):"["==t?ot(St,"]"):"{"==t?ot(Et,"}"):void 0}function Et(t,e){return"variable"!=t||E.stream.match(/^\s*:/,!1)?("variable"==t&&(E.marked="property"),"spread"==t?A(wt):"}"==t?S():"["==t?A(z,B("]"),B(":"),Et):A(B(":"),wt,At)):(M(e),A(At))}function St(){return S(wt,At)}function At(t,e){if("="==e)return A(F)}function Nt(t){if(","==t)return A(_t)}function Mt(t,e){if("keyword b"==t&&"else"==e)return A(D("form","else"),U,q)}function kt(t,e){return"await"==e?A(kt):"("==t?A(D(")"),Ct,q):void 0}function Ct(t){return"var"==t?A(_t,Tt):"variable"==t?A(Tt):S(Tt)}function Tt(t,e){return")"==t?A():";"==t?A(Tt):"in"==e||"of"==e?(E.marked="keyword",A(z,Tt)):S(z,Tt)}function Ot(t,e){return"*"==e?(E.marked="keyword",A(Ot)):"variable"==t?(M(e),A(Ot)):"("==t?A(P,D(")"),st(Rt,")"),q,ct,U,L):c&&"<"==e?A(D(">"),st(bt,">"),q,Ot):void 0}function It(t,e){return"*"==e?(E.marked="keyword",A(It)):"variable"==t?(M(e),A(It)):"("==t?A(P,D(")"),st(Rt,")"),q,ct,L):c&&"<"==e?A(D(">"),st(bt,">"),q,It):void 0}function Pt(t,e){return"keyword"==t||"variable"==t?(E.marked="type",A(Pt)):"<"==e?A(D(">"),st(bt,">"),q):void 0}function Rt(t,e){return"@"==e&&A(z,Rt),"spread"==t?A(Rt):c&&C(e)?(E.marked="keyword",A(Rt)):c&&"this"==t?A(ut,At):S(wt,ut,At)}function Lt(t,e){return"variable"==t?Dt(t,e):qt(t,e)}function Dt(t,e){if("variable"==t)return M(e),A(qt)}function qt(t,e){return"<"==e?A(D(">"),st(bt,">"),q,qt):"extends"==e||"implements"==e||c&&","==t?("implements"==e&&(E.marked="keyword"),A(c?ht:z,qt)):"{"==t?A(D("}"),Bt,q):void 0}function Bt(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||c&&C(e))&&E.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(E.marked="keyword",A(Bt)):"variable"==t||"keyword"==E.style?(E.marked="property",A(Ut,Bt)):"number"==t||"string"==t?A(Ut,Bt):"["==t?A(z,ut,B("]"),Ut,Bt):"*"==e?(E.marked="keyword",A(Bt)):c&&"("==t?S(It,Bt):";"==t||","==t?A(Bt):"}"==t?A():"@"==e?A(z,Bt):void 0}function Ut(t,e){if("?"==e)return A(Ut);if(":"==t)return A(ht,At);if("="==e)return A(F);var r=E.state.lexical.prev;return S(r&&"interface"==r.info?It:Ot)}function $t(t,e){return"*"==e?(E.marked="keyword",A(Ht,B(";"))):"default"==e?(E.marked="keyword",A(z,B(";"))):"{"==t?A(st(zt,"}"),Ht,B(";")):S(U)}function zt(t,e){return"as"==e?(E.marked="keyword",A(B("variable"))):"variable"==t?S(F,zt):void 0}function Ft(t){return"string"==t?A():"("==t?S(z):"."==t?S(H):S(Gt,Vt,Ht)}function Gt(t,e){return"{"==t?ot(Gt,"}"):("variable"==t&&M(e),"*"==e&&(E.marked="keyword"),A(jt))}function Vt(t){if(","==t)return A(Gt,Vt)}function jt(t,e){if("as"==e)return E.marked="keyword",A(Gt)}function Ht(t,e){if("from"==e)return E.marked="keyword",A(z)}function Wt(t){return"]"==t?A():S(st(F,"]"))}function Yt(){return S(D("form"),wt,B("{"),D("}"),st(Xt,"}"),q,q)}function Xt(){return S(wt,At)}function Zt(t,e,r){return e.tokenize==g&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(r||0)))}return L.lex=!0,q.lex=!0,{startState:function(t){var e={tokenize:g,lastType:"sof",cc:[],lexical:new _((t||0)-s,0,"block",!1),localVars:r.localVars,context:r.localVars&&new T(null,null,!1),indented:t||0};return r.globalVars&&"object"==typeof r.globalVars&&(e.globalVars=r.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),b(t,e)),e.tokenize!=y&&t.eatSpace())return null;var r=e.tokenize(t,e);return"comment"==n?r:(e.lastType="operator"!=n||"++"!=i&&"--"!=i?n:"incdec",function(t,e,r,n,i){var s=t.cc;for(E.state=t,E.stream=i,E.marked=null,E.cc=s,E.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;)if((s.length?s.pop():u?z:U)(r,n)){for(;s.length&&s[s.length-1].lex;)s.pop()();return E.marked?E.marked:"variable"==r&&w(t,n)?"variable-2":e}}(e,r,n,i,t))},indent:function(e,n){if(e.tokenize==y||e.tokenize==v)return t.Pass;if(e.tokenize!=g)return 0;var i,a=n&&n.charAt(0),u=e.lexical;if(!/^\s*else\b/.test(n))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==q)u=u.prev;else if(c!=Mt&&c!=L)break}for(;("stat"==u.type||"form"==u.type)&&("}"==a||(i=e.cc[e.cc.length-1])&&(i==H||i==W)&&!/^[,\.=+\-*:?[\(]/.test(n));)u=u.prev;o&&")"==u.type&&"stat"==u.prev.type&&(u=u.prev);var p=u.type,h=a==p;return"vardef"==p?u.indented+("operator"==e.lastType||","==e.lastType?u.info.length+1:0):"form"==p&&"{"==a?u.indented:"form"==p?u.indented+s:"stat"==p?u.indented+(function(t,e){return"operator"==t.lastType||","==t.lastType||f.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}(e,n)?o||s:0):"switch"!=u.info||h||0==r.doubleIndentSwitch?u.align?u.column+(h?0:1):u.indented+(h?0:s):u.indented+(/^(?:case|default)\b/.test(n)?s:2*s)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:u?null:"/*",blockCommentEnd:u?null:"*/",blockCommentContinue:u?null:" * ",lineComment:u?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:u?"json":"javascript",jsonldMode:a,jsonMode:u,expressionAllowed:Zt,skipExpression:function(t){var e=t.cc[t.cc.length-1];e!=z&&e!=F||t.cc.pop()}}})),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(r(53791))},63125:(t,e,r)=>{!function(t){"use strict";t.defineMode("stex",(function(t,e){function r(t,e){t.cmdState.push(e)}function n(t){return t.cmdState.length>0?t.cmdState[t.cmdState.length-1]:null}function i(t,e,r){return function(){this.name=t,this.bracketNo=0,this.style=e,this.styles=r,this.argument=null,this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null},this.openBracket=function(){return this.bracketNo++,"bracket"},this.closeBracket=function(){}}}var s={};function o(t,e){t.f=e}function a(t,e){var i;if(t.match(/^\\[a-zA-Z@]+/)){var a=t.current().slice(1);return r(e,i=new(i=s.hasOwnProperty(a)?s[a]:s.DEFAULT)),o(e,l),i.style}if(t.match(/^\\[$&%#{}_]/))return"tag";if(t.match(/^\\[,;!\/\\]/))return"tag";if(t.match("\\["))return o(e,(function(t,e){return u(t,e,"\\]")})),"keyword";if(t.match("\\("))return o(e,(function(t,e){return u(t,e,"\\)")})),"keyword";if(t.match("$$"))return o(e,(function(t,e){return u(t,e,"$$")})),"keyword";if(t.match("$"))return o(e,(function(t,e){return u(t,e,"$")})),"keyword";var c=t.next();return"%"==c?(t.skipToEnd(),"comment"):"}"==c||"]"==c?(i=n(e))?(i.closeBracket(c),o(e,l),"bracket"):"error":"{"==c||"["==c?(r(e,i=new(i=s.DEFAULT)),"bracket"):/\d/.test(c)?(t.eatWhile(/[\w.%]/),"atom"):(t.eatWhile(/[\w\-_]/),"begin"==(i=function(t){for(var e=t.cmdState,r=e.length-1;r>=0;r--){var n=e[r];if("DEFAULT"!=n.name)return n}return{styleIdentifier:function(){return null}}}(e)).name&&(i.argument=t.current()),i.styleIdentifier())}function u(t,e,r){if(t.eatSpace())return null;if(r&&t.match(r))return o(e,a),"keyword";if(t.match(/^\\[a-zA-Z@]+/))return"tag";if(t.match(/^[a-zA-Z]+/))return"variable-2";if(t.match(/^\\[$&%#{}_]/))return"tag";if(t.match(/^\\[,;!\/]/))return"tag";if(t.match(/^[\^_&]/))return"tag";if(t.match(/^[+\-<>|=,\/@!*:;'"`~#?]/))return null;if(t.match(/^(\d+\.\d*|\d*\.\d+|\d+)/))return"number";var n=t.next();return"{"==n||"}"==n||"["==n||"]"==n||"("==n||")"==n?"bracket":"%"==n?(t.skipToEnd(),"comment"):"error"}function l(t,e){var r=t.peek();return"{"==r||"["==r?(n(e).openBracket(r),t.eat(r),o(e,a),"bracket"):/[ \t\r]/.test(r)?(t.eat(r),null):(o(e,a),function(t){var e=t.cmdState.pop();e&&e.closeBracket()}(e),a(t,e))}return s.importmodule=i("importmodule","tag",["string","builtin"]),s.documentclass=i("documentclass","tag",["","atom"]),s.usepackage=i("usepackage","tag",["atom"]),s.begin=i("begin","tag",["atom"]),s.end=i("end","tag",["atom"]),s.label=i("label","tag",["atom"]),s.ref=i("ref","tag",["atom"]),s.eqref=i("eqref","tag",["atom"]),s.cite=i("cite","tag",["atom"]),s.bibitem=i("bibitem","tag",["atom"]),s.Bibitem=i("Bibitem","tag",["atom"]),s.RBibitem=i("RBibitem","tag",["atom"]),s.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=this.openBracket=this.closeBracket=function(){}},{startState:function(){return{cmdState:[],f:e.inMathMode?function(t,e){return u(t,e)}:a}},copyState:function(t){return{cmdState:t.cmdState.slice(),f:t.f}},token:function(t,e){return e.f(t,e)},blankLine:function(t){t.f=a,t.cmdState.length=0},lineComment:"%"}})),t.defineMIME("text/x-stex","stex"),t.defineMIME("text/x-latex","stex")}(r(53791))},12310:(t,e,r)=>{!function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",(function(n,i){var s,o,a=n.indentUnit,u={},l=i.htmlMode?e:r;for(var c in l)u[c]=l[c];for(var c in i)u[c]=i[c];function p(t,e){function r(r){return e.tokenize=r,r(t,e)}var n=t.next();return"<"==n?t.eat("!")?t.eat("[")?t.match("CDATA[")?r(f("atom","]]>")):null:t.match("--")?r(f("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),r(d(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=f("meta","?>"),"meta"):(s=t.eat("/")?"closeTag":"openTag",e.tokenize=h,"tag bracket"):"&"==n?(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error":(t.eatWhile(/[^&<]/),null)}function h(t,e){var r,n,i=t.next();if(">"==i||"/"==i&&t.eat(">"))return e.tokenize=p,s=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return s="equals",null;if("<"==i){e.tokenize=p,e.state=v,e.tagName=e.tagStart=null;var o=e.tokenize(t,e);return o?o+" tag error":"tag error"}return/[\'\"]/.test(i)?(e.tokenize=(r=i,(n=function(t,e){for(;!t.eol();)if(t.next()==r){e.tokenize=h;break}return"string"}).isInAttribute=!0,n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function f(t,e){return function(r,n){for(;!r.eol();){if(r.match(e)){n.tokenize=p;break}r.next()}return t}}function d(t){return function(e,r){for(var n;null!=(n=e.next());){if("<"==n)return r.tokenize=d(t+1),r.tokenize(e,r);if(">"==n){if(1==t){r.tokenize=p;break}return r.tokenize=d(t-1),r.tokenize(e,r)}}return"meta"}}function m(t,e,r){this.prev=t.context,this.tagName=e||"",this.indent=t.indented,this.startOfLine=r,(u.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function g(t){t.context&&(t.context=t.context.prev)}function y(t,e){for(var r;;){if(!t.context)return;if(r=t.context.tagName,!u.contextGrabbers.hasOwnProperty(r)||!u.contextGrabbers[r].hasOwnProperty(e))return;g(t)}}function v(t,e,r){return"openTag"==t?(r.tagStart=e.column(),b):"closeTag"==t?x:v}function b(t,e,r){return"word"==t?(r.tagName=e.current(),o="tag",E):u.allowMissingTagName&&"endTag"==t?(o="tag bracket",E(t,0,r)):(o="error",b)}function x(t,e,r){if("word"==t){var n=e.current();return r.context&&r.context.tagName!=n&&u.implicitlyClosed.hasOwnProperty(r.context.tagName)&&g(r),r.context&&r.context.tagName==n||!1===u.matchClosing?(o="tag",_):(o="tag error",w)}return u.allowMissingTagName&&"endTag"==t?(o="tag bracket",_(t,0,r)):(o="error",w)}function _(t,e,r){return"endTag"!=t?(o="error",_):(g(r),v)}function w(t,e,r){return o="error",_(t,0,r)}function E(t,e,r){if("word"==t)return o="attribute",S;if("endTag"==t||"selfcloseTag"==t){var n=r.tagName,i=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==t||u.autoSelfClosers.hasOwnProperty(n)?y(r,n):(y(r,n),r.context=new m(r,n,i==r.indented)),v}return o="error",E}function S(t,e,r){return"equals"==t?A:(u.allowMissing||(o="error"),E(t,0,r))}function A(t,e,r){return"string"==t?N:"word"==t&&u.allowUnquoted?(o="string",E):(o="error",E(t,0,r))}function N(t,e,r){return"string"==t?N:E(t,0,r)}return p.isInText=!0,{startState:function(t){var e={tokenize:p,state:v,indented:t||0,tagName:null,tagStart:null,context:null};return null!=t&&(e.baseIndent=t),e},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;s=null;var r=e.tokenize(t,e);return(r||s)&&"comment"!=r&&(o=null,e.state=e.state(s||r,t,e),o&&(r="error"==o?r+" error":o)),r},indent:function(e,r,n){var i=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+a;if(i&&i.noIndent)return t.Pass;if(e.tokenize!=h&&e.tokenize!=p)return n?n.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==u.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+a*(u.multilineTagIndentFactor||1);if(u.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var s=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(s&&s[1])for(;i;){if(i.tagName==s[2]){i=i.prev;break}if(!u.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(s)for(;i;){var o=u.contextGrabbers[i.tagName];if(!o||!o.hasOwnProperty(s[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+a:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:u.htmlMode?"html":"xml",helperType:u.htmlMode?"html":"xml",skipAttribute:function(t){t.state==A&&(t.state=E)},xmlCurrentTag:function(t){return t.tagName?{name:t.tagName,close:"closeTag"==t.type}:null},xmlCurrentContext:function(t){for(var e=[],r=t.context;r;r=r.prev)e.push(r.tagName);return e.reverse()}}})),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}(r(53791))},64352:function(t,e){var r;!function(n){"use strict";var i=function(t){return.5*(Math.exp(t)+Math.exp(-t))},s=function(t){return.5*(Math.exp(t)-Math.exp(-t))},o=function(){throw SyntaxError("Invalid Param")};function a(t,e){var r=Math.abs(t),n=Math.abs(e);return 0===t?Math.log(n):0===e?Math.log(r):r<3e3&&n<3e3?.5*Math.log(t*t+e*e):Math.log(t/Math.cos(Math.atan2(e,t)))}function u(t,e){if(!(this instanceof u))return new u(t,e);var r=function(t,e){var r={re:0,im:0};if(null==t)r.re=r.im=0;else if(void 0!==e)r.re=t,r.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)r.re=t.re,r.im=t.im;else if("abs"in t&&"arg"in t){if(!Number.isFinite(t.abs)&&Number.isFinite(t.arg))return u.INFINITY;r.re=t.abs*Math.cos(t.arg),r.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!Number.isFinite(t.r)&&Number.isFinite(t.phi))return u.INFINITY;r.re=t.r*Math.cos(t.phi),r.im=t.r*Math.sin(t.phi)}else 2===t.length?(r.re=t[0],r.im=t[1]):o();break;case"string":r.im=r.re=0;var n=t.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,s=0;null===n&&o();for(var a=0;a<n.length;a++){var l=n[a];" "===l||"\t"===l||"\n"===l||("+"===l?i++:"-"===l?s++:"i"===l||"I"===l?(i+s===0&&o()," "===n[a+1]||isNaN(n[a+1])?r.im+=parseFloat((s%2?"-":"")+"1"):(r.im+=parseFloat((s%2?"-":"")+n[a+1]),a++),i=s=0):((i+s===0||isNaN(l))&&o(),"i"===n[a+1]||"I"===n[a+1]?(r.im+=parseFloat((s%2?"-":"")+l),a++):r.re+=parseFloat((s%2?"-":"")+l),i=s=0))}i+s>0&&o();break;case"number":r.im=0,r.re=t;break;default:o()}return isNaN(r.re)||isNaN(r.im),r}(t,e);this.re=r.re,this.im=r.im}u.prototype={re:0,im:0,sign:function(){var t=this.abs();return new u(this.re/t,this.im/t)},add:function(t,e){var r=new u(t,e);return this.isInfinite()&&r.isInfinite()?u.NAN:this.isInfinite()||r.isInfinite()?u.INFINITY:new u(this.re+r.re,this.im+r.im)},sub:function(t,e){var r=new u(t,e);return this.isInfinite()&&r.isInfinite()?u.NAN:this.isInfinite()||r.isInfinite()?u.INFINITY:new u(this.re-r.re,this.im-r.im)},mul:function(t,e){var r=new u(t,e);return this.isInfinite()&&r.isZero()||this.isZero()&&r.isInfinite()?u.NAN:this.isInfinite()||r.isInfinite()?u.INFINITY:0===r.im&&0===this.im?new u(this.re*r.re,0):new u(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(t,e){var r=new u(t,e);if(this.isZero()&&r.isZero()||this.isInfinite()&&r.isInfinite())return u.NAN;if(this.isInfinite()||r.isZero())return u.INFINITY;if(this.isZero()||r.isInfinite())return u.ZERO;t=this.re,e=this.im;var n,i,s=r.re,o=r.im;return 0===o?new u(t/s,e/s):Math.abs(s)<Math.abs(o)?new u((t*(i=s/o)+e)/(n=s*i+o),(e*i-t)/n):new u((t+e*(i=o/s))/(n=o*i+s),(e-t*i)/n)},pow:function(t,e){var r=new u(t,e);if(t=this.re,e=this.im,r.isZero())return u.ONE;if(0===r.im){if(0===e)return new u(Math.pow(t,r.re),0);if(0===t)switch((r.re%4+4)%4){case 0:return new u(Math.pow(e,r.re),0);case 1:return new u(0,Math.pow(e,r.re));case 2:return new u(-Math.pow(e,r.re),0);case 3:return new u(0,-Math.pow(e,r.re))}}if(0===t&&0===e&&r.re>0&&r.im>=0)return u.ZERO;var n=Math.atan2(e,t),i=a(t,e);return t=Math.exp(r.re*i-r.im*n),e=r.im*i+r.re*n,new u(t*Math.cos(e),t*Math.sin(e))},sqrt:function(){var t,e,r=this.re,n=this.im,i=this.abs();if(r>=0){if(0===n)return new u(Math.sqrt(r),0);t=.5*Math.sqrt(2*(i+r))}else t=Math.abs(n)/Math.sqrt(2*(i-r));return e=r<=0?.5*Math.sqrt(2*(i-r)):Math.abs(n)/Math.sqrt(2*(i+r)),new u(t,n<0?-e:e)},exp:function(){var t=Math.exp(this.re);return this.im,new u(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){var t=this.re,e=this.im;return new u(Math.expm1(t)*Math.cos(e)+function(t){var e=Math.PI/4;if(t<-e||t>e)return Math.cos(t)-1;var r=t*t;return r*(r*(1/24+r*(-1/720+r*(1/40320+r*(-1/3628800+r*(1/4790014600+r*(-1/87178291200+r*(1/20922789888e3)))))))-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){var t=this.re,e=this.im;return new u(a(t,e),Math.atan2(e,t))},abs:function(){return t=this.re,e=this.im,r=Math.abs(t),n=Math.abs(e),r<3e3&&n<3e3?Math.sqrt(r*r+n*n):(r<n?(r=n,n=t/e):n=e/t,r*Math.sqrt(1+n*n));var t,e,r,n},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var t=this.re,e=this.im;return new u(Math.sin(t)*i(e),Math.cos(t)*s(e))},cos:function(){var t=this.re,e=this.im;return new u(Math.cos(t)*i(e),-Math.sin(t)*s(e))},tan:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)+i(e);return new u(Math.sin(t)/r,s(e)/r)},cot:function(){var t=2*this.re,e=2*this.im,r=Math.cos(t)-i(e);return new u(-Math.sin(t)/r,s(e)/r)},sec:function(){var t=this.re,e=this.im,r=.5*i(2*e)+.5*Math.cos(2*t);return new u(Math.cos(t)*i(e)/r,Math.sin(t)*s(e)/r)},csc:function(){var t=this.re,e=this.im,r=.5*i(2*e)-.5*Math.cos(2*t);return new u(Math.sin(t)*i(e)/r,-Math.cos(t)*s(e)/r)},asin:function(){var t=this.re,e=this.im,r=new u(e*e-t*t+1,-2*t*e).sqrt(),n=new u(r.re-e,r.im+t).log();return new u(n.im,-n.re)},acos:function(){var t=this.re,e=this.im,r=new u(e*e-t*t+1,-2*t*e).sqrt(),n=new u(r.re-e,r.im+t).log();return new u(Math.PI/2-n.im,n.re)},atan:function(){var t=this.re,e=this.im;if(0===t){if(1===e)return new u(0,1/0);if(-1===e)return new u(0,-1/0)}var r=t*t+(1-e)*(1-e),n=new u((1-e*e-t*t)/r,-2*t/r).log();return new u(-.5*n.im,.5*n.re)},acot:function(){var t=this.re,e=this.im;if(0===e)return new u(Math.atan2(1,t),0);var r=t*t+e*e;return 0!==r?new u(t/r,-e/r).atan():new u(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new u(0,1/0);var r=t*t+e*e;return 0!==r?new u(t/r,-e/r).acos():new u(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new u(Math.PI/2,1/0);var r=t*t+e*e;return 0!==r?new u(t/r,-e/r).asin():new u(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){var t=this.re,e=this.im;return new u(s(t)*Math.cos(e),i(t)*Math.sin(e))},cosh:function(){var t=this.re,e=this.im;return new u(i(t)*Math.cos(e),s(t)*Math.sin(e))},tanh:function(){var t=2*this.re,e=2*this.im,r=i(t)+Math.cos(e);return new u(s(t)/r,Math.sin(e)/r)},coth:function(){var t=2*this.re,e=2*this.im,r=i(t)-Math.cos(e);return new u(s(t)/r,-Math.sin(e)/r)},csch:function(){var t=this.re,e=this.im,r=Math.cos(2*e)-i(2*t);return new u(-2*s(t)*Math.cos(e)/r,2*i(t)*Math.sin(e)/r)},sech:function(){var t=this.re,e=this.im,r=Math.cos(2*e)+i(2*t);return new u(2*i(t)*Math.cos(e)/r,-2*s(t)*Math.sin(e)/r)},asinh:function(){var t=this.im;this.im=-this.re,this.re=t;var e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){var t=this.acos();if(t.im<=0){var e=t.re;t.re=-t.im,t.im=e}else e=t.im,t.im=-t.re,t.re=e;return t},atanh:function(){var t=this.re,e=this.im,r=t>1&&0===e,n=1-t,i=1+t,s=n*n+e*e,o=0!==s?new u((i*n-e*e)/s,(e*n+i*e)/s):new u(-1!==t?t/0:0,0!==e?e/0:0),l=o.re;return o.re=a(o.re,o.im)/2,o.im=Math.atan2(o.im,l)/2,r&&(o.im=-o.im),o},acoth:function(){var t=this.re,e=this.im;if(0===t&&0===e)return new u(0,Math.PI/2);var r=t*t+e*e;return 0!==r?new u(t/r,-e/r).atanh():new u(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){var t=this.re,e=this.im;if(0===e)return new u(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);var r=t*t+e*e;return 0!==r?new u(t/r,-e/r).asinh():new u(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){var t=this.re,e=this.im;if(this.isZero())return u.INFINITY;var r=t*t+e*e;return 0!==r?new u(t/r,-e/r).acosh():new u(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return u.INFINITY;if(this.isInfinite())return u.ZERO;var t=this.re,e=this.im,r=t*t+e*e;return new u(t/r,-e/r)},conjugate:function(){return new u(this.re,-this.im)},neg:function(){return new u(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new u(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new u(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new u(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){var r=new u(t,e);return Math.abs(r.re-this.re)<=u.EPSILON&&Math.abs(r.im-this.im)<=u.EPSILON},clone:function(){return new u(this.re,this.im)},toString:function(){var t=this.re,e=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":0===e?r+t:(0!==t?(r+=t,r+=" ",e<0?(e=-e,r+="-"):r+="+",r+=" "):e<0&&(e=-e,r+="-"),1!==e&&(r+=e),r+"i")},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},u.ZERO=new u(0,0),u.ONE=new u(1,0),u.I=new u(0,1),u.PI=new u(Math.PI,0),u.E=new u(Math.E,0),u.INFINITY=new u(1/0,1/0),u.NAN=new u(NaN,NaN),u.EPSILON=1e-16,void 0===(r=function(){return u}.apply(e,[]))||(t.exports=r)}()},81501:function(t,e,r){var n;!function(i){"use strict";var s,o,a,u=9e15,l=1e9,c="0123456789abcdef",p="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",h="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-u,maxE:u,crypto:!1},d=!0,m="[DecimalError] ",g=m+"Invalid argument: ",y=m+"Precision limit exceeded",v=m+"crypto unavailable",b=Math.floor,x=Math.pow,_=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,E=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,S=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,A=1e7,N=p.length-1,M=h.length-1,k={name:"[object Decimal]"};function C(t){var e,r,n,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)(r=7-(n=t[e]+"").length)&&(s+=$(r)),s+=n;(r=7-(n=(o=t[e])+"").length)&&(s+=$(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return s+o}function T(t,e,r){if(t!==~~t||t<e||t>r)throw Error(g+t)}function O(t,e,r,n){var i,s,o,a;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=7,i=0):(i=Math.ceil((e+1)/7),e%=7),s=x(10,7-e),a=t[i]%s|0,null==n?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),o=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):o=(r<4&&a+1==s||r>3&&a+1==s/2)&&(t[i+1]/s/100|0)==x(10,e-2)-1||(a==s/2||0==a)&&0==(t[i+1]/s/100|0):e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),o=(n||r<4)&&9999==a||!n&&r>3&&4999==a):o=((n||r<4)&&a+1==s||!n&&r>3&&a+1==s/2)&&(t[i+1]/s/1e3|0)==x(10,e-3)-1,o}function I(t,e,r){for(var n,i,s=[0],o=0,a=t.length;o<a;){for(i=s.length;i--;)s[i]*=e;for(s[0]+=c.indexOf(t.charAt(o++)),n=0;n<s.length;n++)s[n]>r-1&&(void 0===s[n+1]&&(s[n+1]=0),s[n+1]+=s[n]/r|0,s[n]%=r)}return s.reverse()}k.absoluteValue=k.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),R(t)},k.ceil=function(){return R(new this.constructor(this),this.e+1,2)},k.comparedTo=k.cmp=function(t){var e,r,n,i,s=this,o=s.d,a=(t=new s.constructor(t)).d,u=s.s,l=t.s;if(!o||!a)return u&&l?u!==l?u:o===a?0:!o^u<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==t.e)return s.e>t.e^u<0?1:-1;for(e=0,r=(n=o.length)<(i=a.length)?n:i;e<r;++e)if(o[e]!==a[e])return o[e]>a[e]^u<0?1:-1;return n===i?0:n>i^u<0?1:-1},k.cosine=k.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(t,e){var r,n,i=e.d.length;i<32?n=(1/Z(4,r=Math.ceil(i/3))).toString():(r=16,n="2.3283064365386962890625e-10"),t.precision+=r,e=X(t,1,e.times(n),new t(1));for(var s=r;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}(n,K(n,r)),n.precision=t,n.rounding=e,R(2==a||3==a?r.neg():r,t,e,!0)):new n(1):new n(NaN)},k.cubeRoot=k.cbrt=function(){var t,e,r,n,i,s,o,a,u,l,c=this,p=c.constructor;if(!c.isFinite()||c.isZero())return new p(c);for(d=!1,(s=c.s*x(c.s*c,1/3))&&Math.abs(s)!=1/0?n=new p(s.toString()):(r=C(c.d),(s=((t=c.e)-r.length+1)%3)&&(r+=1==s||-2==s?"0":"00"),s=x(r,1/3),t=b((t+1)/3)-(t%3==(t<0?-1:2)),(n=new p(r=s==1/0?"5e"+t:(r=s.toExponential()).slice(0,r.indexOf("e")+1)+t)).s=c.s),o=(t=p.precision)+3;;)if(l=(u=(a=n).times(a).times(a)).plus(c),n=P(l.plus(c).times(a),l.plus(u),o+2,1),C(a.d).slice(0,o)===(r=C(n.d)).slice(0,o)){if("9999"!=(r=r.slice(o-3,o+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(R(n,t+1,1),e=!n.times(n).times(n).eq(c));break}if(!i&&(R(a,t+1,0),a.times(a).times(a).eq(c))){n=a;break}o+=4,i=1}return d=!0,R(n,t,p.rounding,e)},k.decimalPlaces=k.dp=function(){var t,e=this.d,r=NaN;if(e){if(r=7*((t=e.length-1)-b(this.e/7)),t=e[t])for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r},k.dividedBy=k.div=function(t){return P(this,new this.constructor(t))},k.dividedToIntegerBy=k.divToInt=function(t){var e=this.constructor;return R(P(this,new e(t),0,1,1),e.precision,e.rounding)},k.equals=k.eq=function(t){return 0===this.cmp(t)},k.floor=function(){return R(new this.constructor(this),this.e+1,3)},k.greaterThan=k.gt=function(t){return this.cmp(t)>0},k.greaterThanOrEqualTo=k.gte=function(t){var e=this.cmp(t);return 1==e||0===e},k.hyperbolicCosine=k.cosh=function(){var t,e,r,n,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;r=o.precision,n=o.rounding,o.precision=r+Math.max(s.e,s.sd())+4,o.rounding=1,(i=s.d.length)<32?e=(1/Z(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),s=X(o,1,s.times(e),new o(1),!0);for(var u,l=t,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return R(s,o.precision=r,o.rounding=n,!0)},k.hyperbolicSine=k.sinh=function(){var t,e,r,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,r=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,(n=i.d.length)<3)i=X(s,2,i,i,!0);else{t=(t=1.4*Math.sqrt(n))>16?16:0|t,i=X(s,2,i=i.times(1/Z(5,t)),i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);t--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=e,s.rounding=r,R(i,e,r,!0)},k.hyperbolicTangent=k.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,P(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)},k.inverseCosine=k.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,s=r.rounding;return-1!==n?0===n?e.isNeg()?B(r,i,s):new r(0):new r(NaN):e.isZero()?B(r,i+4,s).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=B(r,i+4,s).times(.5),r.precision=i,r.rounding=s,t.minus(e))},k.inverseHyperbolicCosine=k.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,d=!1,r=r.times(r).minus(1).sqrt().plus(r),d=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)},k.inverseHyperbolicSine=k.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,d=!1,r=r.times(r).plus(1).sqrt().plus(r),d=!0,n.precision=t,n.rounding=e,r.ln())},k.inverseHyperbolicTangent=k.atanh=function(){var t,e,r,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?R(new s(i),t,e,!0):(s.precision=r=n-i.e,i=P(i.plus(1),new s(1).minus(i),r+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)},k.inverseSine=k.asin=function(){var t,e,r,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),r=s.precision,n=s.rounding,-1!==e?0===e?((t=B(s,r+4,n).times(.5)).s=i.s,t):new s(NaN):(s.precision=r+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=r,s.rounding=n,i.times(2)))},k.inverseTangent=k.atan=function(){var t,e,r,n,i,s,o,a,u,l=this,c=l.constructor,p=c.precision,h=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&p+4<=M)return(o=B(c,p+4,h).times(.25)).s=l.s,o}else{if(!l.s)return new c(NaN);if(p+4<=M)return(o=B(c,p+4,h).times(.5)).s=l.s,o}for(c.precision=a=p+10,c.rounding=1,t=r=Math.min(28,a/7+2|0);t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(d=!1,e=Math.ceil(a/7),n=1,u=l.times(l),o=new c(l),i=l;-1!==t;)if(i=i.times(u),s=o.minus(i.div(n+=2)),i=i.times(u),void 0!==(o=s.plus(i.div(n+=2))).d[e])for(t=e;o.d[t]===s.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),d=!0,R(o,c.precision=p,c.rounding=h,!0)},k.isFinite=function(){return!!this.d},k.isInteger=k.isInt=function(){return!!this.d&&b(this.e/7)>this.d.length-2},k.isNaN=function(){return!this.s},k.isNegative=k.isNeg=function(){return this.s<0},k.isPositive=k.isPos=function(){return this.s>0},k.isZero=function(){return!!this.d&&0===this.d[0]},k.lessThan=k.lt=function(t){return this.cmp(t)<0},k.lessThanOrEqualTo=k.lte=function(t){return this.cmp(t)<1},k.logarithm=k.log=function(t){var e,r,n,i,s,o,a,u,l=this,c=l.constructor,p=c.precision,h=c.rounding;if(null==t)t=new c(10),e=!0;else{if(r=(t=new c(t)).d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=l.d,l.s<0||!r||!r[0]||l.eq(1))return new c(r&&!r[0]?-1/0:1!=l.s?NaN:r?0:1/0);if(e)if(r.length>1)s=!0;else{for(i=r[0];i%10==0;)i/=10;s=1!==i}if(d=!1,o=j(l,a=p+5),n=e?q(c,a+10):j(t,a),O((u=P(o,n,a,1)).d,i=p,h))do{if(o=j(l,a+=10),n=e?q(c,a+10):j(t,a),u=P(o,n,a,1),!s){+C(u.d).slice(i+1,i+15)+1==1e14&&(u=R(u,p+1,0));break}}while(O(u.d,i+=10,h));return d=!0,R(u,p,h)},k.minus=k.sub=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f=this,m=f.constructor;if(t=new m(t),!f.d||!t.d)return f.s&&t.s?f.d?t.s=-t.s:t=new m(t.d||f.s!==t.s?f:NaN):t=new m(NaN),t;if(f.s!=t.s)return t.s=-t.s,f.plus(t);if(l=f.d,h=t.d,a=m.precision,u=m.rounding,!l[0]||!h[0]){if(h[0])t.s=-t.s;else{if(!l[0])return new m(3===u?-0:0);t=new m(f)}return d?R(t,a,u):t}if(r=b(t.e/7),c=b(f.e/7),l=l.slice(),s=c-r){for((p=s<0)?(e=l,s=-s,o=h.length):(e=h,r=c,o=l.length),s>(n=Math.max(Math.ceil(a/7),o)+2)&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for((p=(n=l.length)<(o=h.length))&&(o=n),n=0;n<o;n++)if(l[n]!=h[n]){p=l[n]<h[n];break}s=0}for(p&&(e=l,l=h,h=e,t.s=-t.s),o=l.length,n=h.length-o;n>0;--n)l[o++]=0;for(n=h.length;n>s;){if(l[--n]<h[n]){for(i=n;i&&0===l[--i];)l[i]=A-1;--l[i],l[n]+=A}l[n]-=h[n]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--r;return l[0]?(t.d=l,t.e=D(l,r),d?R(t,a,u):t):new m(3===u?-0:0)},k.modulo=k.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?R(new n(r),n.precision,n.rounding):(d=!1,9==n.modulo?(e=P(r,t.abs(),0,3,1)).s*=t.s:e=P(r,t,0,n.modulo,1),e=e.times(t),d=!0,r.minus(e))},k.naturalExponential=k.exp=function(){return V(this)},k.naturalLogarithm=k.ln=function(){return j(this)},k.negated=k.neg=function(){var t=new this.constructor(this);return t.s=-t.s,R(t)},k.plus=k.add=function(t){var e,r,n,i,s,o,a,u,l,c,p=this,h=p.constructor;if(t=new h(t),!p.d||!t.d)return p.s&&t.s?p.d||(t=new h(t.d||p.s===t.s?p:NaN)):t=new h(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.minus(t);if(l=p.d,c=t.d,a=h.precision,u=h.rounding,!l[0]||!c[0])return c[0]||(t=new h(p)),d?R(t,a,u):t;if(s=b(p.e/7),n=b(t.e/7),l=l.slice(),i=s-n){for(i<0?(r=l,i=-i,o=c.length):(r=c,n=s,o=l.length),i>(o=(s=Math.ceil(a/7))>o?s+1:o+1)&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for((o=l.length)-(i=c.length)<0&&(i=o,r=c,c=l,l=r),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/A|0,l[i]%=A;for(e&&(l.unshift(e),++n),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=D(l,n),d?R(t,a,u):t},k.precision=k.sd=function(t){var e,r=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(g+t);return r.d?(e=U(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e},k.round=function(){var t=this,e=t.constructor;return R(new e(t),t.e+1,e.rounding)},k.sine=k.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+7,n.rounding=1,r=function(t,e){var r,n=e.d.length;if(n<3)return X(t,2,e,e);r=(r=1.4*Math.sqrt(n))>16?16:0|r,e=X(t,2,e=e.times(1/Z(5,r)),e);for(var i,s=new t(5),o=new t(16),a=new t(20);r--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}(n,K(n,r)),n.precision=t,n.rounding=e,R(a>2?r.neg():r,t,e,!0)):new n(NaN)},k.squareRoot=k.sqrt=function(){var t,e,r,n,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(1!==l||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(d=!1,0==(l=Math.sqrt(+o))||l==1/0?(((e=C(a)).length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=b((u+1)/2)-(u<0||u%2),n=new c(e=l==1/0?"5e"+u:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+u)):n=new c(l.toString()),r=(u=c.precision)+3;;)if(n=(s=n).plus(P(o,s,r+2,1)).times(.5),C(s.d).slice(0,r)===(e=C(n.d)).slice(0,r)){if("9999"!=(e=e.slice(r-3,r+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(R(n,u+1,1),t=!n.times(n).eq(o));break}if(!i&&(R(s,u+1,0),s.times(s).eq(o))){n=s;break}r+=4,i=1}return d=!0,R(n,u,c.rounding,t)},k.tangent=k.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,(r=r.sin()).s=1,r=P(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,R(2==a||4==a?r.neg():r,t,e,!0)):new n(NaN)},k.times=k.mul=function(t){var e,r,n,i,s,o,a,u,l,c=this,p=c.constructor,h=c.d,f=(t=new p(t)).d;if(t.s*=c.s,!(h&&h[0]&&f&&f[0]))return new p(!t.s||h&&!h[0]&&!f||f&&!f[0]&&!h?NaN:h&&f?0*t.s:t.s/0);for(r=b(c.e/7)+b(t.e/7),(u=h.length)<(l=f.length)&&(s=h,h=f,f=s,o=u,u=l,l=o),s=[],n=o=u+l;n--;)s.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)a=s[i]+f[n]*h[i-n-1]+e,s[i--]=a%A|0,e=a/A|0;s[i]=(s[i]+e)%A|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=D(s,r),d?R(t,p.precision,p.rounding):t},k.toBinary=function(t,e){return J(this,2,t,e)},k.toDecimalPlaces=k.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),void 0===t?r:(T(t,0,l),void 0===e?e=n.rounding:T(e,0,8),R(r,t+r.e+1,e))},k.toExponential=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=L(n,!0):(T(t,0,l),void 0===e?e=i.rounding:T(e,0,8),r=L(n=R(new i(n),t+1,e),!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r},k.toFixed=function(t,e){var r,n,i=this,s=i.constructor;return void 0===t?r=L(i):(T(t,0,l),void 0===e?e=s.rounding:T(e,0,8),r=L(n=R(new s(i),t+i.e+1,e),!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},k.toFraction=function(t){var e,r,n,i,s,o,a,u,l,c,p,h,f=this,m=f.d,y=f.constructor;if(!m)return new y(f);if(l=r=new y(1),n=u=new y(0),o=(s=(e=new y(n)).e=U(m)-f.e-1)%7,e.d[0]=x(10,o<0?7+o:o),null==t)t=s>0?e:l;else{if(!(a=new y(t)).isInt()||a.lt(l))throw Error(g+a);t=a.gt(e)?s>0?e:l:a}for(d=!1,a=new y(C(m)),c=y.precision,y.precision=s=7*m.length*2;p=P(a,e,0,1,1),1!=(i=r.plus(p.times(n))).cmp(t);)r=n,n=i,i=l,l=u.plus(p.times(i)),u=i,i=e,e=a.minus(p.times(i)),a=i;return i=P(t.minus(r),n,0,1,1),u=u.plus(i.times(l)),r=r.plus(i.times(n)),u.s=l.s=f.s,h=P(l,n,s,1).minus(f).abs().cmp(P(u,r,s,1).minus(f).abs())<1?[l,n]:[u,r],y.precision=c,d=!0,h},k.toHexadecimal=k.toHex=function(t,e){return J(this,16,t,e)},k.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),null==t){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),void 0===e?e=n.rounding:T(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(d=!1,r=P(r,t,0,e,1).times(t),d=!0,R(r)):(t.s=r.s,r=t),r},k.toNumber=function(){return+this},k.toOctal=function(t,e){return J(this,8,t,e)},k.toPower=k.pow=function(t){var e,r,n,i,s,o,a=this,u=a.constructor,l=+(t=new u(t));if(!(a.d&&t.d&&a.d[0]&&t.d[0]))return new u(x(+a,l));if((a=new u(a)).eq(1))return a;if(n=u.precision,s=u.rounding,t.eq(1))return R(a,n,s);if((e=b(t.e/7))>=t.d.length-1&&(r=l<0?-l:l)<=9007199254740991)return i=z(u,a,r,n),t.s<0?new u(1).div(i):R(i,n,s);if((o=a.s)<0){if(e<t.d.length-1)return new u(NaN);if(0==(1&t.d[e])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(e=0!=(r=x(+a,l))&&isFinite(r)?new u(r+"").e:b(l*(Math.log("0."+C(a.d))/Math.LN10+a.e+1)))>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(d=!1,u.rounding=a.s=1,r=Math.min(12,(e+"").length),(i=V(t.times(j(a,n+r)),n)).d&&O((i=R(i,n+5,1)).d,n,s)&&(e=n+10,+C((i=R(V(t.times(j(a,e+r)),e),e+5,1)).d).slice(n+1,n+15)+1==1e14&&(i=R(i,n+1,0))),i.s=o,d=!0,u.rounding=s,R(i,n,s))},k.toPrecision=function(t,e){var r,n=this,i=n.constructor;return void 0===t?r=L(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(T(t,1,l),void 0===e?e=i.rounding:T(e,0,8),r=L(n=R(new i(n),t,e),t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r},k.toSignificantDigits=k.toSD=function(t,e){var r=this.constructor;return void 0===t?(t=r.precision,e=r.rounding):(T(t,1,l),void 0===e?e=r.rounding:T(e,0,8)),R(new r(this),t,e)},k.toString=function(){var t=this,e=t.constructor,r=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r},k.truncated=k.trunc=function(){return R(new this.constructor(this),this.e+1,1)},k.valueOf=k.toJSON=function(){var t=this,e=t.constructor,r=L(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};var P=function(){function t(t,e,r){var n,i=0,s=t.length;for(t=t.slice();s--;)n=t[s]*e+i,t[s]=n%r|0,i=n/r|0;return i&&t.unshift(i),t}function e(t,e,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(t[i]!=e[i]){s=t[i]>e[i]?1:-1;break}return s}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;)t.shift()}return function(n,i,s,a,u,l){var c,p,h,f,d,m,g,y,v,x,_,w,E,S,N,M,k,C,T,O,I=n.constructor,P=n.s==i.s?1:-1,L=n.d,D=i.d;if(!(L&&L[0]&&D&&D[0]))return new I(n.s&&i.s&&(L?!D||L[0]!=D[0]:D)?L&&0==L[0]||!D?0*P:P/0:NaN);for(l?(d=1,p=n.e-i.e):(l=A,d=7,p=b(n.e/d)-b(i.e/d)),T=D.length,k=L.length,x=(v=new I(P)).d=[],h=0;D[h]==(L[h]||0);h++);if(D[h]>(L[h]||0)&&p--,null==s?(S=s=I.precision,a=I.rounding):S=u?s+(n.e-i.e)+1:s,S<0)x.push(1),m=!0;else{if(S=S/d+2|0,h=0,1==T){for(f=0,D=D[0],S++;(h<k||f)&&S--;h++)N=f*l+(L[h]||0),x[h]=N/D|0,f=N%D|0;m=f||h<k}else{for((f=l/(D[0]+1)|0)>1&&(D=t(D,f,l),L=t(L,f,l),T=D.length,k=L.length),M=T,w=(_=L.slice(0,T)).length;w<T;)_[w++]=0;(O=D.slice()).unshift(0),C=D[0],D[1]>=l/2&&++C;do{f=0,(c=e(D,_,T,w))<0?(E=_[0],T!=w&&(E=E*l+(_[1]||0)),(f=E/C|0)>1?(f>=l&&(f=l-1),1==(c=e(g=t(D,f,l),_,y=g.length,w=_.length))&&(f--,r(g,T<y?O:D,y,l))):(0==f&&(c=f=1),g=D.slice()),(y=g.length)<w&&g.unshift(0),r(_,g,w,l),-1==c&&(c=e(D,_,T,w=_.length))<1&&(f++,r(_,T<w?O:D,w,l)),w=_.length):0===c&&(f++,_=[0]),x[h++]=f,c&&_[0]?_[w++]=L[M]||0:(_=[L[M]],w=1)}while((M++<k||void 0!==_[0])&&S--);m=void 0!==_[0]}x[0]||x.shift()}if(1==d)v.e=p,o=m;else{for(h=1,f=x[0];f>=10;f/=10)h++;v.e=h+p*d-1,R(v,u?s+v.e+1:s,a,m)}return v}}();function R(t,e,r,n){var i,s,o,a,u,l,c,p,h,f=t.constructor;t:if(null!=e){if(!(p=t.d))return t;for(i=1,a=p[0];a>=10;a/=10)i++;if((s=e-i)<0)s+=7,o=e,u=(c=p[h=0])/x(10,i-o-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(a=p.length)){if(!n)break t;for(;a++<=h;)p.push(0);c=u=0,i=1,o=(s%=7)-7+1}else{for(c=a=p[h],i=1;a>=10;a/=10)i++;u=(o=(s%=7)-7+i)<0?0:c/x(10,i-o-1)%10|0}if(n=n||e<0||void 0!==p[h+1]||(o<0?c:c%x(10,i-o-1)),l=r<4?(u||n)&&(0==r||r==(t.s<0?3:2)):u>5||5==u&&(4==r||n||6==r&&(s>0?o>0?c/x(10,i-o):0:p[h-1])%10&1||r==(t.s<0?8:7)),e<1||!p[0])return p.length=0,l?(e-=t.e+1,p[0]=x(10,(7-e%7)%7),t.e=-e||0):p[0]=t.e=0,t;if(0==s?(p.length=h,a=1,h--):(p.length=h+1,a=x(10,7-s),p[h]=o>0?(c/x(10,i-o)%x(10,o)|0)*a:0),l)for(;;){if(0==h){for(s=1,o=p[0];o>=10;o/=10)s++;for(o=p[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(t.e++,p[0]==A&&(p[0]=1));break}if(p[h]+=a,p[h]!=A)break;p[h--]=0,a=1}for(s=p.length;0===p[--s];)p.pop()}return d&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function L(t,e,r){if(!t.isFinite())return H(t);var n,i=t.e,s=C(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+$(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+$(-i-1)+s,r&&(n=r-o)>0&&(s+=$(n))):i>=o?(s+=$(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+$(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=$(n))),s}function D(t,e){var r=t[0];for(e*=7;r>=10;r/=10)e++;return e}function q(t,e,r){if(e>N)throw d=!0,r&&(t.precision=r),Error(y);return R(new t(p),e,1,!0)}function B(t,e,r){if(e>M)throw Error(y);return R(new t(h),e,r,!0)}function U(t){var e=t.length-1,r=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function $(t){for(var e="";t--;)e+="0";return e}function z(t,e,r,n){var i,s=new t(1),o=Math.ceil(n/7+4);for(d=!1;;){if(r%2&&Q((s=s.times(e)).d,o)&&(i=!0),0===(r=b(r/2))){r=s.d.length-1,i&&0===s.d[r]&&++s.d[r];break}Q((e=e.times(e)).d,o)}return d=!0,s}function F(t){return 1&t.d[t.d.length-1]}function G(t,e,r){for(var n,i=new t(e[0]),s=0;++s<e.length;){if(!(n=new t(e[s])).s){i=n;break}i[r](n)&&(i=n)}return i}function V(t,e){var r,n,i,s,o,a,u,l=0,c=0,p=0,h=t.constructor,f=h.rounding,m=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(d=!1,u=m):u=e,a=new h(.03125);t.e>-2;)t=t.times(a),p+=5;for(u+=n=Math.log(x(2,p))/Math.LN10*2+5|0,r=s=o=new h(1),h.precision=u;;){if(s=R(s.times(t),u,1),r=r.times(++c),C((a=o.plus(P(s,r,u,1))).d).slice(0,u)===C(o.d).slice(0,u)){for(i=p;i--;)o=R(o.times(o),u,1);if(null!=e)return h.precision=m,o;if(!(l<3&&O(o.d,u-n,f,l)))return R(o,h.precision=m,f,d=!0);h.precision=u+=10,r=s=a=new h(1),c=0,l++}o=a}}function j(t,e){var r,n,i,s,o,a,u,l,c,p,h,f=1,m=t,g=m.d,y=m.constructor,v=y.rounding,b=y.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new y(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==e?(d=!1,c=b):c=e,y.precision=c+=10,n=(r=C(g)).charAt(0),!(Math.abs(s=m.e)<15e14))return l=q(y,c+2,b).times(s+""),m=j(new y(n+"."+r.slice(1)),c-10).plus(l),y.precision=b,null==e?R(m,b,v,d=!0):m;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=C((m=m.times(t)).d)).charAt(0),f++;for(s=m.e,n>1?(m=new y("0."+r),s++):m=new y(n+"."+r.slice(1)),p=m,u=o=m=P(m.minus(1),m.plus(1),c,1),h=R(m.times(m),c,1),i=3;;){if(o=R(o.times(h),c,1),C((l=u.plus(P(o,new y(i),c,1))).d).slice(0,c)===C(u.d).slice(0,c)){if(u=u.times(2),0!==s&&(u=u.plus(q(y,c+2,b).times(s+""))),u=P(u,new y(f),c,1),null!=e)return y.precision=b,u;if(!O(u.d,c-10,v,a))return R(u,y.precision=b,v,d=!0);y.precision=c+=10,l=o=m=P(p.minus(1),p.plus(1),c,1),h=R(m.times(m),c,1),i=a=1}u=l,i+=2}}function H(t){return String(t.s*t.s/0)}function W(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;48===e.charCodeAt(n);n++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(n,i)){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=7;n<i;)t.d.push(+e.slice(n,n+=7));n=7-(e=e.slice(n)).length}else n-=i;for(;n--;)e+="0";t.d.push(+e),d&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Y(t,e){var r,n,i,o,a,u,l,c,p;if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(w.test(e))r=16,e=e.toLowerCase();else if(_.test(e))r=2;else{if(!E.test(e))throw Error(g+e);r=8}for((o=e.search(/p/i))>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),a=(o=e.indexOf("."))>=0,n=t.constructor,a&&(o=(u=(e=e.replace(".","")).length)-o,i=z(n,new n(r),o,2*o)),o=p=(c=I(e,r,A)).length-1;0===c[o];--o)c.pop();return o<0?new n(0*t.s):(t.e=D(c,p),t.d=c,d=!1,a&&(t=P(t,i,4*u)),l&&(t=t.times(Math.abs(l)<54?x(2,l):s.pow(2,l))),d=!0,t)}function X(t,e,r,n,i){var s,o,a,u,l=t.precision,c=Math.ceil(l/7);for(d=!1,u=r.times(r),a=new t(n);;){if(o=P(a.times(u),new t(e++*e++),l,1),a=i?n.plus(o):n.minus(o),n=P(o.times(u),new t(e++*e++),l,1),void 0!==(o=a.plus(n)).d[c]){for(s=c;o.d[s]===a.d[s]&&s--;);if(-1==s)break}s=a,a=n,n=o,o=s}return d=!0,o.d.length=c+1,o}function Z(t,e){for(var r=t;--e;)r*=t;return r}function K(t,e){var r,n=e.s<0,i=B(t,t.precision,1),s=i.times(.5);if((e=e.abs()).lte(s))return a=n?4:1,e;if((r=e.divToInt(i)).isZero())a=n?3:2;else{if((e=e.minus(r.times(i))).lte(s))return a=F(r)?n?2:3:n?4:1,e;a=F(r)?n?1:4:n?3:2}return e.minus(i).abs()}function J(t,e,r,n){var i,s,a,u,p,h,f,d,m,g=t.constructor,y=void 0!==r;if(y?(T(r,1,l),void 0===n?n=g.rounding:T(n,0,8)):(r=g.precision,n=g.rounding),t.isFinite()){for(y?(i=2,16==e?r=4*r-3:8==e&&(r=3*r-2)):i=e,(a=(f=L(t)).indexOf("."))>=0&&(f=f.replace(".",""),(m=new g(1)).e=f.length-a,m.d=I(L(m),10,i),m.e=m.d.length),s=p=(d=I(f,10,i)).length;0==d[--p];)d.pop();if(d[0]){if(a<0?s--:((t=new g(t)).d=d,t.e=s,d=(t=P(t,m,r,n,0,i)).d,s=t.e,h=o),a=d[r],u=i/2,h=h||void 0!==d[r+1],h=n<4?(void 0!==a||h)&&(0===n||n===(t.s<0?3:2)):a>u||a===u&&(4===n||h||6===n&&1&d[r-1]||n===(t.s<0?8:7)),d.length=r,h)for(;++d[--r]>i-1;)d[r]=0,r||(++s,d.unshift(1));for(p=d.length;!d[p-1];--p);for(a=0,f="";a<p;a++)f+=c.charAt(d[a]);if(y){if(p>1)if(16==e||8==e){for(a=16==e?4:3,--p;p%a;p++)f+="0";for(p=(d=I(f,i,e)).length;!d[p-1];--p);for(a=1,f="1.";a<p;a++)f+=c.charAt(d[a])}else f=f.charAt(0)+"."+f.slice(1);f=f+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)f="0"+f;f="0."+f}else if(++s>p)for(s-=p;s--;)f+="0";else s<p&&(f=f.slice(0,s)+"."+f.slice(s))}else f=y?"0p+0":"0";f=(16==e?"0x":2==e?"0b":8==e?"0o":"")+f}else f=H(t);return t.s<0?"-"+f:f}function Q(t,e){if(t.length>e)return t.length=e,!0}function tt(t){return new this(t).abs()}function et(t){return new this(t).acos()}function rt(t){return new this(t).acosh()}function nt(t,e){return new this(t).plus(e)}function it(t){return new this(t).asin()}function st(t){return new this(t).asinh()}function ot(t){return new this(t).atan()}function at(t){return new this(t).atanh()}function ut(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,s=n+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(r=e.s<0?B(this,n,i):new this(0)).s=t.s:!t.d||e.isZero()?(r=B(this,s,1).times(.5)).s=t.s:e.s<0?(this.precision=s,this.rounding=1,r=this.atan(P(t,e,s,1)),e=B(this,s,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(P(t,e,s,1)):(r=B(this,s,1).times(e.s>0?.25:.75)).s=t.s:r=new this(NaN),r}function lt(t){return new this(t).cbrt()}function ct(t){return R(t=new this(t),t.e+1,2)}function pt(t){if(!t||"object"!=typeof t)throw Error(m+"Object expected");var e,r,n,i=!0===t.defaults,s=["precision",1,l,"rounding",0,8,"toExpNeg",-u,0,"toExpPos",0,u,"maxE",0,u,"minE",-u,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(r=s[e],i&&(this[r]=f[r]),void 0!==(n=t[r])){if(!(b(n)===n&&n>=s[e+1]&&n<=s[e+2]))throw Error(g+r+": "+n);this[r]=n}if(r="crypto",i&&(this[r]=f[r]),void 0!==(n=t[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(g+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(v);this[r]=!0}else this[r]=!1}return this}function ht(t){return new this(t).cos()}function ft(t){return new this(t).cosh()}function dt(t,e){return new this(t).div(e)}function mt(t){return new this(t).exp()}function gt(t){return R(t=new this(t),t.e+1,3)}function yt(){var t,e,r=new this(0);for(d=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return d=!0,new this(1/0);r=e}return d=!0,r.sqrt()}function vt(t){return t instanceof s||t&&"[object Decimal]"===t.name||!1}function bt(t){return new this(t).ln()}function xt(t,e){return new this(t).log(e)}function _t(t){return new this(t).log(2)}function wt(t){return new this(t).log(10)}function Et(){return G(this,arguments,"lt")}function St(){return G(this,arguments,"gt")}function At(t,e){return new this(t).mod(e)}function Nt(t,e){return new this(t).mul(e)}function Mt(t,e){return new this(t).pow(e)}function kt(t){var e,r,n,i,s=0,o=new this(1),a=[];if(void 0===t?t=this.precision:T(t,1,l),n=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)(i=e[s])>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(v);for(e=crypto.randomBytes(n*=4);s<n;)(i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((127&e[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=n/4}else for(;s<n;)a[s++]=1e7*Math.random()|0;for(t%=7,(n=a[--s])&&t&&(i=x(10,7-t),a[s]=(n/i|0)*i);0===a[s];s--)a.pop();if(s<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=7)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<7&&(r-=7-n)}return o.e=r,o.d=a,o}function Ct(t){return R(t=new this(t),t.e+1,this.rounding)}function Tt(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Ot(t){return new this(t).sin()}function It(t){return new this(t).sinh()}function Pt(t){return new this(t).sqrt()}function Rt(t,e){return new this(t).sub(e)}function Lt(t){return new this(t).tan()}function Dt(t){return new this(t).tanh()}function qt(t){return R(t=new this(t),t.e+1,1)}(s=function t(e){var r,n,i;function s(t){var e,r,n,i=this;if(!(i instanceof s))return new s(t);if(i.constructor=s,t instanceof s)return i.s=t.s,void(d?!t.d||t.e>s.maxE?(i.e=NaN,i.d=null):t.e<s.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"==(n=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,r=t;r>=10;r/=10)e++;return void(d?e>s.maxE?(i.e=NaN,i.d=null):e<s.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):W(i,t.toString())}if("string"!==n)throw Error(g+t);return 45===(r=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===r&&(t=t.slice(1)),i.s=1),S.test(t)?W(i,t):Y(i,t)}if(s.prototype=k,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=pt,s.clone=t,s.isDecimal=vt,s.abs=tt,s.acos=et,s.acosh=rt,s.add=nt,s.asin=it,s.asinh=st,s.atan=ot,s.atanh=at,s.atan2=ut,s.cbrt=lt,s.ceil=ct,s.cos=ht,s.cosh=ft,s.div=dt,s.exp=mt,s.floor=gt,s.hypot=yt,s.ln=bt,s.log=xt,s.log10=wt,s.log2=_t,s.max=Et,s.min=St,s.mod=At,s.mul=Nt,s.pow=Mt,s.random=kt,s.round=Ct,s.sign=Tt,s.sin=Ot,s.sinh=It,s.sqrt=Pt,s.sub=Rt,s.tan=Lt,s.tanh=Dt,s.trunc=qt,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<i.length;)e.hasOwnProperty(n=i[r++])||(e[n]=this[n]);return s.config(e),s}(f)).default=s.Decimal=s,p=new s(p),h=new s(h),void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()},43770:t=>{"use strict";var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},n={"–":"\\--","—":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},i=function(t,r){return e({},t,r)};t.exports=function(t){for(var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.preserveFormatting,a=void 0!==o&&o,u=s.escapeMapFn,l=void 0===u?i:u,c=String(t),p="",h=l(e({},r),a?e({},n):{}),f=Object.keys(h),d=function(){var t=!1;f.forEach((function(e,r){t||c.length>=e.length&&c.slice(0,e.length)===e&&(p+=h[f[r]],c=c.slice(e.length,c.length),t=!0)})),t||(p+=c.slice(0,1),c=c.slice(1,c.length))};c;)d();return p}},1006:function(t,e){var r;!function(n){"use strict";var i={s:1,n:0,d:1};function s(t){function e(){var e=Error.apply(this,arguments);e.name=this.name=t,this.stack=e.stack,this.message=e.message}function r(){}return r.prototype=Error.prototype,e.prototype=new r,e}var o=h.DivisionByZero=s("DivisionByZero"),a=h.InvalidParameter=s("InvalidParameter");function u(t,e){return isNaN(t=parseInt(t,10))&&l(),t*e}function l(){throw new a}var c=function(t,e){var r,n=0,s=1,a=1,c=0,p=0,h=0,f=1,d=1,m=0,g=1,y=1,v=1,b=1e7;if(null==t);else if(void 0!==e)a=(n=t)*(s=e);else switch(typeof t){case"object":"d"in t&&"n"in t?(n=t.n,s=t.d,"s"in t&&(n*=t.s)):0 in t?(n=t[0],1 in t&&(s=t[1])):l(),a=n*s;break;case"number":if(t<0&&(a=t,t=-t),t%1==0)n=t;else if(t>0){for(t>=1&&(t/=d=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));g<=b&&v<=b;){if(t===(r=(m+y)/(g+v))){g+v<=b?(n=m+y,s=g+v):v>g?(n=y,s=v):(n=m,s=g);break}t>r?(m+=y,g+=v):(y+=m,v+=g),g>b?(n=y,s=v):(n=m,s=g)}n*=d}else(isNaN(t)||isNaN(e))&&(s=n=NaN);break;case"string":if(null===(g=t.match(/\d+|./g))&&l(),"-"===g[m]?(a=-1,m++):"+"===g[m]&&m++,g.length===m+1?p=u(g[m++],a):"."===g[m+1]||"."===g[m]?("."!==g[m]&&(c=u(g[m++],a)),(1+ ++m===g.length||"("===g[m+1]&&")"===g[m+3]||"'"===g[m+1]&&"'"===g[m+3])&&(p=u(g[m],a),f=Math.pow(10,g[m].length),m++),("("===g[m]&&")"===g[m+2]||"'"===g[m]&&"'"===g[m+2])&&(h=u(g[m+1],a),d=Math.pow(10,g[m+1].length)-1,m+=3)):"/"===g[m+1]||":"===g[m+1]?(p=u(g[m],a),f=u(g[m+2],1),m+=3):"/"===g[m+3]&&" "===g[m+1]&&(c=u(g[m],a),p=u(g[m+2],a),f=u(g[m+4],1),m+=5),g.length<=m){a=n=h+(s=f*d)*c+d*p;break}default:l()}if(0===s)throw new o;i.s=a<0?-1:1,i.n=Math.abs(n),i.d=Math.abs(s)};function p(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function h(t,e){if(!(this instanceof h))return new h(t,e);c(t,e),t=h.REDUCE?p(i.d,i.n):1,this.s=i.s,this.n=i.n/t,this.d=i.d/t}h.REDUCE=1,h.prototype={s:1,n:0,d:1,abs:function(){return new h(this.n,this.d)},neg:function(){return new h(-this.s*this.n,this.d)},add:function(t,e){return c(t,e),new h(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(t,e){return c(t,e),new h(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(t,e){return c(t,e),new h(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(t,e){return c(t,e),new h(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return new h(this)},mod:function(t,e){return isNaN(this.n)||isNaN(this.d)?new h(NaN):void 0===t?new h(this.s*this.n%this.d,1):(c(t,e),0===i.n&&0===this.d&&h(0,0),new h(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d))},gcd:function(t,e){return c(t,e),new h(p(i.n,this.n)*p(i.d,this.d),i.d*this.d)},lcm:function(t,e){return c(t,e),0===i.n&&0===this.n?new h:new h(i.n*this.n,p(i.n,this.n)*p(i.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):new h(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):new h(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):new h(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return new h(this.s*this.d,this.n)},pow:function(t){return t<0?new h(Math.pow(this.s*this.d,-t),Math.pow(this.n,-t)):new h(Math.pow(this.s*this.n,t),Math.pow(this.d,t))},equals:function(t,e){return c(t,e),this.s*this.n*i.d==i.s*i.n*this.d},compare:function(t,e){c(t,e);var r=this.s*this.n*i.d-i.s*i.n*this.d;return(0<r)-(r<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;var e=this.abs().toContinued();function r(t){return 1===t.length?new h(t[0]):r(t.slice(1)).inverse().add(t[0])}t=t||.001;for(var n=0;n<e.length;n++){var i=r(e.slice(0,n+1));if(i.sub(this.abs()).abs().valueOf()<t)return i.mul(this.s)}return this},divisible:function(t,e){return c(t,e),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(t&&(e=Math.floor(n/i))>0&&(r+=e,r+=" ",n%=i),r+=n,r+="/",r+=i),r},toLatex:function(t){var e,r="",n=this.n,i=this.d;return this.s<0&&(r+="-"),1===i?r+=n:(t&&(e=Math.floor(n/i))>0&&(r+=e,n%=i),r+="\\frac{",r+=n,r+="}{",r+=i,r+="}"),r},toContinued:function(){var t,e=this.n,r=this.d,n=[];if(isNaN(e)||isNaN(r))return n;do{n.push(Math.floor(e/r)),t=e%r,e=r,r=t}while(1!==e);return n},toString:function(t){var e,r=this.n,n=this.d;if(isNaN(r)||isNaN(n))return"NaN";h.REDUCE||(r/=e=p(r,n),n/=e),t=t||15;var i=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var r=10%e,n=1;1!==r;n++)if(r=10*r%e,n>2e3)return 0;return n}(0,n),s=function(t,e,r){for(var n=1,i=function(t,e,r){for(var n=1;e>0;t=t*t%r,e>>=1)1&e&&(n=n*t%r);return n}(10,r,e),s=0;s<300;s++){if(n===i)return s;n=10*n%e,i=10*i%e}return 0}(0,n,i),o=-1===this.s?"-":"";if(o+=r/n|0,r%=n,(r*=10)&&(o+="."),i){for(var a=s;a--;)o+=r/n|0,r%=n,r*=10;for(o+="(",a=i;a--;)o+=r/n|0,r%=n,r*=10;o+=")"}else for(a=t;r&&a--;)o+=r/n|0,r%=n,r*=10;return o}},void 0===(r=function(){return h}.apply(e,[]))||(t.exports=r)}()},42987:(t,e,r)=>{"use strict";var n=r(95751),i=r(98035).hasProp;function s(t,e){t.appendChild(window.document.createTextNode(e))}function o(t,e,r){var o,a=window.document.createElement(t);try{if(e)for(o in e)i(e,o)&&("class"===o?a.className=e.class:"className"===o?a.className=e.className:"style"===o?c(a,e.style):a.setAttribute(o,e[o]))}catch(r){n("plantage dans getElement "+t+" avec les attributs ",e,r)}return r&&s(a,r),a}var a,u,l=(1e4,u="sesa"+(a=0),function(){for(;window.document.getElementById(u)&&a<1e4;)a++,u="sesa"+a;if(1e4===a)throw Error("Max de 10000 id générés atteint");return u});function c(t,e){try{if(t&&t.style)if("string"==typeof e)(e=e.split(";")).forEach((function(e){if((e=/([\w]+):(.+)/.exec(e))&&3===e.length){var r=e[1];t.style[r]=e[2]}}));else if("object"==typeof e)for(var r in e)i(e,r)&&(t.style[r]=e[r])}catch(t){n.error(t)}}t.exports={addCss:function(t){for(var e=window.document.getElementsByTagName("head")[0],r=e.getElementsByTagName("link"),i=!1,s=0;s<r.length;s++)if(r[s].href===t){i=!0;break}if(i)n(t+" était déjà présent, on ne l'ajoute pas");else{var o=window.document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=t,e.appendChild(o)}},addJs:function(t,e){var r=window.document.getElementsByTagName("body")[0],n=window.document.createElement("script");n.type="text/javascript",r.appendChild(n),n.addEventListener("load",(function t(){e(),n.removeEventListener("load",t)})),n.src=t},addElement:function(t,e,r,n){var i=o(e,r,n);return t.appendChild(i),i},addElementAfter:function(t,e,r,i){var s=o(e,r,i),a=t.parentNode;return a?a.insertBefore(s,t.nextSibling):n.error(new Error("Navigateur incompatible (pas de parentNode), impossible d'ajouter l'élément")),s},addElementBefore:function(t,e,r,i){var s=o(e,r,i),a=t.parentNode;return a?a.insertBefore(s,t):n.error(new Error("Navigateur incompatible (pas de parentNode), impossible d'insérer l'élément")),s},addElementFirstChild:function(t,e,r,n){var i=o(e,r,n);return t.insertBefore(i,t.firstChild),i},addElementFirstSibling:function(t,e,r,n){var i=o(e,r,n);return t.parentNode.insertBefore(i,t.parentNode.firstChild),i},addText:s,empty:function(t){if(t&&t.firstChild)for(;t.firstChild;)t.removeChild(t.firstChild)},getElement:o,getSize:function(){var t="CSS1Compat"===window.document.compatMode?window.document.documentElement:window.document.body;return{width:Math.floor(Math.min(t.clientWidth,window.innerWidth)),height:Math.floor(Math.min(t.clientHeight,window.innerHeight))}},getNewId:l,setStyles:c}},98035:t=>{"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(t){for(var e=0;e<this.length;e++)t(this[e],e,this)});var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function r(t,e){return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){return"function"==typeof t}function i(t,e){switch(typeof t){case"number":return Math.floor(t)===t;case"string":return Boolean(e&&t&&Math.floor(t)==t);default:return!1}}function s(t){return void 0===t}function o(t,e,r){for(e&&("string"!=typeof e&&(e=String(e)),1!==e.length&&(console.error(new Error("char invalide "+e)),e=void 0)),e||(e="number"==typeof t?"0":" "),"string"!=typeof t&&(t=String(t)),r||(r=2);t.length<r;)t=e+t;return t}t.exports={countSlash:function(t){if("string"!=typeof t)throw new TypeError("countSlash n’accepte qu’une string en paramètre");return t.replace(/[^/]+/g,"").length},escapeForHtml:function(t,r){return r?t.replace(/[&<>"']/g,(function(t){return e[t]})):t.replace(/</g,"&lt;")},formatDate:function(t,e){function r(t,e){return o(t,"0",e)}if(e){if(!(e instanceof Date))throw new TypeError("date is not a Date")}else e=new Date;if("string"!=typeof t)throw new TypeError("format is not a string");return t.replace(/%(.)/g,(function(t,n){switch(n){case"d":return r(e.getDate());case"F":return String(e.getFullYear())+"-"+r(e.getMonth()+1)+"-"+r(e.getDate());case"H":return r(e.getHours());case"m":return r(e.getMonth()+1);case"M":return r(e.getMinutes());case"o":return r(e.getMilliseconds(),3);case"O":return r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+"."+r(e.getMilliseconds(),3);case"s":return r(Math.round(e.getTime()/1e3));case"S":return r(e.getSeconds());case"T":return r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds());case"y":return String(e.getFullYear()).substr(2);case"Y":return e.getFullYear();case"%":return"%";default:return"%"+n}}))},getToken:function(){return Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)},hasProp:r,isArray:function(t){return Array.isArray(t)},isArrayEmpty:function(t){return Boolean(Array.isArray(t)&&0===t.length)},isArrayNotEmpty:function(t){return Boolean(Array.isArray(t)&&t.length)},isDate:function(t){return"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)},isError:function(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}},isFunction:n,isInArray:function(t,e){if(!Array.isArray(t))throw new Error("isInArray veut un tableau en 1er argument");return-1!==t.indexOf(e)},isInt:i,isIntPos:function(t,e,r){return i(t,r)&&(e?t>0:t>=0)},isObject:function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},isObjectPlain:function(t){return!!t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)},isRegExp:function(t){return!!t&&"object"==typeof t&&"[object RegExp]"===Object.prototype.toString.call(t)},isString:function(t){return"string"==typeof t},isUndefined:s,isUrlAbsolute:function(t){return"string"==typeof t&&/^https?:\/\/[a-z0-9\-._]+(:[0-9]+)?(\/|$)/.test(t)},pad:o,parse:function(t){var e;if("string"==typeof t)try{e=JSON.parse(t)}catch(t){!s(console)&&console.error&&console.error(t)}return e},splitAndTrim:function(t,e){return"string"==typeof t?(e||(e=/[,;\s]+/),t.split(e).map((function(t){return t.trim()})).filter((function(t){return t}))):[]},stringify:function(t,e){var i;try{i=e?JSON.stringify(t,null,e):JSON.stringify(t)}catch(p){var o,a,u=[];for(o in t)if(r(t,o)&&!s(t[o])&&!n(t[o])){a=t[o],i='"'+o+'":';try{i+=e?JSON.stringify(a,null,e):JSON.stringify(a)}catch(t){i+='"'+t.toString()+'"'}u.push(i)}var l=",";if(i="{",e){var c="\n"+" ".repeat(e);l+=c,i+=c}i+=u.join(l),e&&(i+="\n"),i+="}"}return i},toAscii:function(t){return"string"==typeof t?/^[\w]*$/.test(t)?t:[[/[áàâäãå]/g,"a"],[/[ÁÀÂÄÃÅ]/g,"A"],["ç","c"],["Ç","C"],[/[éèêë]/g,"e"],[/[ÉÈÊË]/g,"E"],[/[íìîï]/g,"i"],[/[ÍÌÎÏ]/g,"I"],["ñ","n"],["Ñ","N"],[/[óòôöõ]/g,"o"],[/[ÓÒÔÖÕ]/g,"O"],[/[úùûü]/g,"u"],[/[ÚÙÛÜ]/g,"U"],[/[ýÿ]/g,"y"],[/[ÝŸ]/g,"Y"],["æ","ae"],["Æ","AE"],["œ","oe"],["Œ","OE"]].reduce((function(t,e){return t.replace(e[0],e[1])}),t):(console.error(new TypeError("not a string"),t),"")},toInt:function(t){switch(typeof t){case"number":return Math.round(t);case"string":return""===t?NaN:Math.round(t);default:return NaN}}}},27025:(t,e,r)=>{"use strict";var n=r(98035),i=n.hasProp;t.exports=function t(e,r){if(null===e)return"null";switch(typeof e){case"undefined":return e;case"number":case"boolean":return String(e);case"string":return'"'+e.replace('"','\\"')+'"';case"symbol":return"[Symbol "+e.toString()+"]";default:r||(r=0);var s=" ".repeat(r);r+=2;var o,a=s+"  ",u=[];if(n.isDate(e))return JSON.stringify(e);if(n.isArray(e))return o="[\n",e.forEach((function(n,i){o+=a+t(n,r)+(i===e.length-1?"\n":",\n")})),e.length?o+=s+"]":o+="]",o;if(n.isRegExp(e)||n.isFunction(e))return"function"==typeof e.toSource?e.toSource():e.toString();if(n.isObject(e)){var l=0;for(var c in e)if(i(e,c)){l++;try{JSON.stringify(e[c]),u.push(c+": "+t(e[c],r))}catch(t){u.push(c+': "'+t.toString().replace('"','\\"')+'"')}}return l?"{\n"+a+u.join(",\n"+a)+"\n"+s+"}":n.isObjectPlain(e)?s+"{}":s+e.toString()}return console.error("dump est tombé sur un truc qui ne ressemble à rien de connu",e),n.stringify(e,2)}}},95751:(t,e,r)=>{"use strict";var n=r(27025),i=r(98035),s=i.formatDate,o=i.hasProp,a={debug:0,info:1,notice:1,warn:2,warning:2,error:3,alert:4,critical:4},u=["[debug]","[info]","[warning]","[error]","[CRITICAL]"],l=[console.info||console.log,console.log,console.warn||console.error||console.log,console.error||console.log,console.error||console.log],c=a.info,p="undefined"!=typeof process&&process.env,h=p&&o(process.env,"NODE_APP_INSTANCE"),f=p&&!h,d="[%O]",m=h,g=h&&process.env.NODE_APP_INSTANCE||"N/A";function y(t,e){try{var r=l[e]||console.log,n="";if(f&&(n=s(d)),m&&(n&&(n+=" "),n+="["+g+"]"),n&&(n+=" "),n+=u[e],t.length<1&&(t=[Error("fonction de log appelée sans contenu")]),r(n,t[0]),t.length>1)for(var i=1;i<t.length;i++)r(t[i])}catch(t){}}function v(){c<a.warning&&y(arguments,a.info)}v.debug=function(){c<a.info&&y(arguments,a.debug)},v.info=function(){c<a.warning&&y(arguments,a.info)},v.warn=function(){c<a.error&&y(arguments,a.warning)},v.ifError=function t(){t&&c<a.critical&&y(arguments,a.error)},v.error=function(){c<a.critical&&y(arguments,a.error)},v.critical=function(){y(arguments,a.critical)},v.disable=function(){c=a.error},v.disableDatePrefix=function(){f=!1},v.disableProcessPrefix=function(){m=!1},v.dump=function(t,e,r){"object"!=typeof r&&(r={});var i=r.level||a.debug;"string"==typeof i&&(i=a[i]||a.debug);var s=n(e),o=r.max||1e3;s.length>o&&(s=s.substr(0,o)+"…"),c<=i&&y([t,s],i)},v.enable=function(){c=a.info},v.enableDatePrefix=function(){f=!0},v.enableProcessPrefix=function(){"undefined"==typeof process?console.error("process not available"):m=!0},v.setDatePrefix=function(t){"string"==typeof t?d=t:v.error(new Error("Le préfixe de log doit être une string"))},v.setLogLevel=function(t){switch(t){case 0:case"0":case"debug":c=a.debug;break;case 1:case"1":case"info":case"notice":c=a.notice;break;case 2:case"2":case"warn":case"warning":c=a.warning;break;case 3:case"3":case"err":case"error":c=a.error;break;case 4:case"4":case"alert":case"crit":case"critical":c=a.critical;break;default:v.error("niveau d’erreur "+t)}},v.levels={debug:0,info:1,notice:1,warn:2,warning:2,error:3,alert:4,critical:4},t.exports=v},599:t=>{t.exports=function t(e,r){"use strict";var n,i,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,l=/^0/,c=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},p=c(e).replace(o,"")||"",h=c(r).replace(o,"")||"",f=p.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=h.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(p.match(u),16)||1!==f.length&&p.match(a)&&Date.parse(p),g=parseInt(h.match(u),16)||m&&h.match(a)&&Date.parse(h)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var y=0,v=Math.max(f.length,d.length);y<v;y++){if(n=!(f[y]||"").match(l)&&parseFloat(f[y])||f[y]||0,i=!(d[y]||"").match(l)&&parseFloat(d[y])||d[y]||0,isNaN(n)!==isNaN(i))return isNaN(n)?1:-1;if(typeof n!=typeof i&&(n+="",i+=""),n<i)return-1;if(n>i)return 1}return 0}},68116:(t,e,r)=>{var n=r(65082),i=r(7557),s=r(42262),o=r(42095),a=r(70431),u=r(67131),l=r(67701);l.alea=n,l.xor128=i,l.xorwow=s,l.xorshift7=o,l.xor4096=a,l.tychei=u,t.exports=l},65082:function(t,e,r){var n;!function(t,i,s){function o(t){var e,r=this,n=(e=4022871197,function(t){t=String(t);for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)});r.next=function(){var t=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=t-(r.c=0|t)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(t),r.s0<0&&(r.s0+=1),r.s1-=n(t),r.s1<0&&(r.s1+=1),r.s2-=n(t),r.s2<0&&(r.s2+=1),n=null}function a(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var r=new o(t),n=e&&e.state,i=r.next;return i.int32=function(){return 4294967296*r.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.alea=u}(0,t=r.nmd(t),r.amdD)},67131:function(t,e,r){var n;!function(t,i,s){function o(t){var e=this,r="";e.next=function(){var t=e.b,r=e.c,n=e.d,i=e.a;return t=t<<25^t>>>7^r,r=r-n|0,n=n<<24^n>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-n|0,e.d=n<<16^r>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):r+=t;for(var n=0;n<r.length+20;n++)e.b^=0|r.charCodeAt(n),e.next()}function a(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.tychei=u}(0,t=r.nmd(t),r.amdD)},7557:function(t,e,r){var n;!function(t,i,s){function o(t){var e=this,r="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xor128=u}(0,t=r.nmd(t),r.amdD)},70431:function(t,e,r){var n;!function(t,i,s){function o(t){var e=this;e.next=function(){var t,r,n=e.w,i=e.X,s=e.i;return e.w=n=n+1640531527|0,r=i[s+34&127],t=i[s=s+1&127],r^=r<<13,t^=t<<17,r^=r>>>15,t^=t>>>12,r=i[s]=r^t,e.i=s,r+(n^n>>>16)|0},function(t,e){var r,n,i,s,o,a=[],u=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,u=Math.max(u,e.length)),i=0,s=-32;s<u;++s)e&&(n^=e.charCodeAt((s+32)%e.length)),0===s&&(o=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,s>=0&&(o=o+1640531527|0,i=0==(r=a[127&s]^=n+o)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,s=512;s>0;--s)n=a[i+34&127],r=a[i=i+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,a[i]=n^r;t.w=o,t.X=a,t.i=i}(e,t)}function a(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.X&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xor4096=u}(0,t=r.nmd(t),r.amdD)},42095:function(t,e,r){var n;!function(t,i,s){function o(t){var e=this;e.next=function(){var t,r,n=e.x,i=e.i;return t=n[i],r=(t^=t>>>7)^t<<24,r^=(t=n[i+1&7])^t>>>10,r^=(t=n[i+3&7])^t>>>3,r^=(t=n[i+4&7])^t<<7,t=n[i+7&7],r^=(t^=t<<13)^t<<9,n[i]=r,e.i=i+1&7,r},function(t,e){var r,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,r=0;r<e.length;++r)n[7&r]=n[7&r]<<15^e.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],t.x=n,t.i=0,r=256;r>0;--r)t.next()}(e,t)}function a(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&(n.x&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xorshift7=u}(0,t=r.nmd(t),r.amdD)},42262:function(t,e,r){var n;!function(t,i,s){function o(t){var e=this,r="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:r+=t;for(var n=0;n<r.length+64;n++)e.x^=0|r.charCodeAt(n),n==r.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function a(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var r=new o(t),n=e&&e.state,i=function(){return(r.next()>>>0)/4294967296};return i.double=function(){do{var t=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=r.next,i.quick=i,n&&("object"==typeof n&&a(n,r),i.state=function(){return a(r,{})}),i}i&&i.exports?i.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(e,r,e,i))||(i.exports=n):this.xorwow=u}(0,t=r.nmd(t),r.amdD)},67701:function(t,e,r){var n;!function(i,s,o){var a,u=256,l=o.pow(u,6),c=o.pow(2,52),p=2*c,h=255;function f(t,e,r){var n=[],h=y(g((e=1==e?{entropy:!0}:e||{}).entropy?[t,v(s)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(u):(t=new Uint8Array(u),(i.crypto||i.msCrypto).getRandomValues(t)),v(t)}catch(t){var e=i.navigator,r=e&&e.plugins;return[+new Date,i,r,i.screen,v(s)]}}():t,3),n),f=new d(n),b=function(){for(var t=f.g(6),e=l,r=0;t<c;)t=(t+r)*u,e*=u,r=f.g(1);for(;t>=p;)t/=2,e/=2,r>>>=1;return(t+r)/e};return b.int32=function(){return 0|f.g(4)},b.quick=function(){return f.g(4)/4294967296},b.double=b,y(v(f.S),s),(e.pass||r||function(t,e,r,n){return n&&(n.S&&m(n,f),t.state=function(){return m(f,{})}),r?(o.random=t,e):t})(b,h,"global"in e?e.global:this==o,e.state)}function d(t){var e,r=t.length,n=this,i=0,s=n.i=n.j=0,o=n.S=[];for(r||(t=[r++]);i<u;)o[i]=i++;for(i=0;i<u;i++)o[i]=o[s=h&s+t[i%r]+(e=o[i])],o[s]=e;(n.g=function(t){for(var e,r=0,i=n.i,s=n.j,o=n.S;t--;)e=o[i=h&i+1],r=r*u+o[h&(o[i]=o[s=h&s+e])+(o[s]=e)];return n.i=i,n.j=s,r})(u)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var r,n=[],i=typeof t;if(e&&"object"==i)for(r in t)try{n.push(g(t[r],e-1))}catch(t){}return n.length?n:"string"==i?t:t+"\0"}function y(t,e){for(var r,n=t+"",i=0;i<n.length;)e[h&i]=h&(r^=19*e[h&i])+n.charCodeAt(i++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(y(o.random(),s),t.exports){t.exports=f;try{a=r(21440)}catch(t){}}else void 0===(n=function(){return f}.call(e,r,e,t))||(t.exports=n)}("undefined"!=typeof self?self:this,[],Math)},90187:function(t,e,r){t.exports=function(t){"use strict";var e=Object.freeze({__proto__:null,get FunctionDeclaration(){return ft},get VariableDeclaration(){return dt},get VariableDeclarator(){return mt},get ClassDeclaration(){return gt},get ClassBody(){return yt},get MethodDefinition(){return vt}}),n=Object.freeze({__proto__:null,get FunctionDeclaration(){return Ut},get VariableDeclaration(){return $t},get VariableDeclarator(){return zt},get ClassDeclaration(){return Ft},get ClassBody(){return Gt},get MethodDefinition(){return Vt}}),i=Object.freeze,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.prototype.hasOwnProperty;function u(t,e){return a.call(t,e)}var l=Object.getOwnPropertyNames,c=Object.setPrototypeOf;var p=Object.getPrototypeOf;function h(t){return p?p(t):t.__proto__}var f=Object.getOwnPropertyDescriptor;function d(t,e,r){for(;e;){var n=f(e,r),i=void 0!==n&&void 0===n.writable&&"function"==typeof n[t]&&n[t];if(i)return i;e=h(e)}}function m(t,e){return d("get",t,e)}function g(t,e){return d("set",t,e)}var y=Object.create;function v(t,e){var r,n;r=t,n=e,c?c(r,n):r.__proto__=n,t.prototype=y(e.prototype,{constructor:{value:t,writable:!0}})}var b=Object.assign||function(t){for(var e=1;e<arguments.length;++e){var r=arguments[e];for(var n in r)u(r,n)&&(t[n]=r[n])}return t},x=[],_=y(null);try{if(!window.Object)throw 0;x=l(_=window).filter((function(t){return"webkitStorageInfo"!==t}))}catch(t){try{if(!r.g.Object)throw 0;x=l(_=r.g).filter((function(t){return"GLOBAL"!==t&&"root"!==t}))}catch(t){try{_.Object=Object}catch(t){}try{_.Function=Function}catch(t){}try{_.Array=Array}catch(t){}try{_.Number=Number}catch(t){}try{_.parseFloat=parseFloat}catch(t){}try{_.parseInt=parseInt}catch(t){}try{_.Infinity=1/0}catch(t){}try{_.NaN=NaN}catch(t){}try{_.undefined=void 0}catch(t){}try{_.Boolean=Boolean}catch(t){}try{_.String=String}catch(t){}try{_.Symbol=Symbol}catch(t){}try{_.Date=Date}catch(t){}try{_.Promise=Promise}catch(t){}try{_.RegExp=RegExp}catch(t){}try{_.Error=Error}catch(t){}try{_.EvalError=EvalError}catch(t){}try{_.RangeError=RangeError}catch(t){}try{_.ReferenceError=ReferenceError}catch(t){}try{_.SyntaxError=SyntaxError}catch(t){}try{_.TypeError=TypeError}catch(t){}try{_.URIError=URIError}catch(t){}try{_.JSON=JSON}catch(t){}try{_.Math=Math}catch(t){}try{_.console=console}catch(t){}try{_.Intl=Intl}catch(t){}try{_.ArrayBuffer=ArrayBuffer}catch(t){}try{_.Uint8Array=Uint8Array}catch(t){}try{_.Int8Array=Int8Array}catch(t){}try{_.Uint16Array=Uint16Array}catch(t){}try{_.Int16Array=Int16Array}catch(t){}try{_.Uint32Array=Uint32Array}catch(t){}try{_.Int32Array=Int32Array}catch(t){}try{_.Float32Array=Float32Array}catch(t){}try{_.Float64Array=Float64Array}catch(t){}try{_.Uint8ClampedArray=Uint8ClampedArray}catch(t){}try{_.DataView=DataView}catch(t){}try{_.Map=Map}catch(t){}try{_.Set=Set}catch(t){}try{_.WeakMap=WeakMap}catch(t){}try{_.WeakSet=WeakSet}catch(t){}try{_.Proxy=Proxy}catch(t){}try{_.Reflect=Reflect}catch(t){}try{_.decodeURI=decodeURI}catch(t){}try{_.decodeURIComponent=decodeURIComponent}catch(t){}try{_.encodeURI=encodeURI}catch(t){}try{_.encodeURIComponent=encodeURIComponent}catch(t){}try{_.escape=escape}catch(t){}try{_.unescape=unescape}catch(t){}try{_.eval=eval}catch(t){}try{_.isFinite=isFinite}catch(t){}try{_.isNaN=isNaN}catch(t){}try{_.SharedArrayBuffer=SharedArrayBuffer}catch(t){}try{_.Atomics=Atomics}catch(t){}try{_.WebAssembly=WebAssembly}catch(t){}try{_.clearInterval=clearInterval}catch(t){}try{_.clearTimeout=clearTimeout}catch(t){}try{_.setInterval=setInterval}catch(t){}try{_.setTimeout=setTimeout}catch(t){}try{_.crypto=crypto}catch(t){}x=l(_)}}_.Symbol&&(!_.Symbol.iterator&&(_.Symbol.iterator=M("iterator")),!_.Symbol.asyncIterator&&(_.Symbol.asyncIterator=M("asynciterator")));for(var w=y({}),E=0;E<x.length;E++){var S=x[E];try{w[S]=_[S]}catch(t){}}var A=M("window");function N(){var t;return b(y(((t={})[A]=_,t)),w)}function M(t){return t+Math.random().toString(36).substring(2)}var k={RES:void 0},C={RES:void 0},T=M("continue"),O=M("break"),I=M("super"),P=M("supercall"),R=M("noctor"),L=M("clsctor"),D=M("newtarget"),q=M("noinit"),B=M("deadzone"),U=function(){function t(t,e){this.kind=t,this.value=e}return t.prototype.get=function(){return this.value},t.prototype.set=function(t){if("const"===this.kind)throw new TypeError("Assignment to constant variable");return this.value=t},t}(),$=function(){function t(t,e){this.object=t,this.property=e}return t.prototype.get=function(){return this.object[this.property]},t.prototype.set=function(t){return this.object[this.property]=t,!0},t.prototype.del=function(){return delete this.object[this.property]},t}(),z=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this.context=y(null),this.parent=t,this.isolated=e}return t.prototype.global=function(){for(var t=this;t.parent;)t=t.parent;return t},t.prototype.clone=function(){var e=new t(this.parent,this.isolated);for(var r in this.context){var n=this.context[r];e[n.kind](r,n.get())}return e},t.prototype.find=function(t){if(this.context[t])return this.context[t];if(this.parent)return this.parent.find(t);var e=this.global().find("window").get();return t in e?new $(e,t):null},t.prototype.var=function(t,e){for(var r=this;r.parent&&!r.isolated;)r=r.parent;var n=r.context[t];if(n){if("var"!==n.kind)throw new SyntaxError("Identifier '"+t+"' has already been declared");e!==q&&n.set(e)}else r.context[t]=new U("var",e===q?void 0:e);if(!r.parent){var i=r.find("window").get();e!==q&&s(i,t,{value:e,writable:!0,enumerable:!0})}},t.prototype.let=function(t,e){var r=this.context[t];if(r&&r.get()!==B)throw new SyntaxError("Identifier '"+t+"' has already been declared");this.context[t]=new U("let",e)},t.prototype.const=function(t,e){var r=this.context[t];if(r&&r.get()!==B)throw new SyntaxError("Identifier '"+t+"' has already been declared");this.context[t]=new U("const",e)},t.prototype.func=function(t,e){var r=this.context[t];if(r&&"var"!==r.kind)throw new SyntaxError("Identifier '"+t+"' has already been declared");this.context[t]=new U("var",e)},t}();function F(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function G(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}function V(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,s=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function j(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(V(arguments[e]));return t}function H(t,e,r){void 0===r&&(r={});var n=r.getVar,i=void 0!==n&&n,s=r.throwErr,o=void 0===s||s;if("undefined"!==t.name){var a=e.find(t.name);if(a){if(i)return a;var u=a.get();if(u===B)throw new ReferenceError(t.name+" is not defined");return u}if(o)throw new ReferenceError(t.name+" is not defined")}}var W=Object.freeze({__proto__:null,Identifier:H});function Y(t,e){return t.value}var X=Object.freeze({__proto__:null,Literal:Y});function Z(t,e,r){void 0===r&&(r={});var n,i,o=r.getObj,a=void 0!==o&&o,u=r.getVar,l=void 0!==u&&u;if(n="Super"===t.object.type?J(t.object,e,{getProto:!0}):ht(t.object,e),a)return n;if(i=t.computed?ht(t.property,e):t.property.name,l){var c=g(n,i);if("Super"===t.object.type&&c){var p=e.find("this").get(),h=M(i);return s(p,h,{set:c}),new $(p,h)}return new $(n,i)}var f=m(n,i);return"Super"===t.object.type&&f?(p=e.find("this").get(),f.call(p)):n[i]}function K(t,e){return t.value.raw}function J(t,e,r){void 0===r&&(r={});var n=r.getProto,i=void 0!==n&&n,s=e.find(I).get();return i?s.prototype:s}function Q(t,e){return ht(t.argument,e)}var tt=Object.freeze({__proto__:null,ThisExpression:function(t,e){var r=e.find(P);if(r&&!r.get())throw new ReferenceError("Must call super constructor in derived class before accessing 'this' or returning from derived constructor");return e.find("this").get()},ArrayExpression:function(t,e){for(var r=[],n=0;n<t.elements.length;n++){var i=t.elements[n];"SpreadElement"===i.type?r=r.concat(Q(i,e)):r.push(ht(i,e))}return r},ObjectExpression:function(t,e){for(var r={},n=0;n<t.properties.length;n++){var i=t.properties[n];if("SpreadElement"===i.type)b(r,Q(i,e));else{var a,u=i.key;a=i.computed?ht(u,e):"Identifier"===u.type?u.name:""+Y(u);var l=ht(i.value,e),c=i.kind;if("init"===c)r[a]=l;else if("get"===c){var p=o(r,a);s(r,a,{get:l,set:p&&p.set,enumerable:!0,configurable:!0})}else p=o(r,a),s(r,a,{get:p&&p.get,set:l,enumerable:!0,configurable:!0})}}return r},FunctionExpression:function(t,e){if(t.id&&t.id.name){var r=new z(e),n=ee(t,r);return r.const(t.id.name,n),n}return ee(t,e)},UnaryExpression:function(t,e){var r=t.argument;switch(t.operator){case"+":return+ht(r,e);case"-":return-ht(r,e);case"!":return!ht(r,e);case"~":return~ht(r,e);case"void":return void ht(r,e);case"typeof":return"Identifier"===r.type?typeof H(r,e,{throwErr:!1}):typeof ht(r,e);case"delete":if("MemberExpression"===r.type)return Z(r,e,{getVar:!0}).del();if("Identifier"===r.type)throw new SyntaxError("Delete of an unqualified identifier in strict mode");return ht(r,e),!0;default:throw new SyntaxError("Unexpected token "+t.operator)}},UpdateExpression:function(t,e){var r,n=t.argument;if("Identifier"===n.type)r=H(n,e,{getVar:!0});else{if("MemberExpression"!==n.type)throw new SyntaxError("Unexpected token");r=Z(n,e,{getVar:!0})}var i=r.get();if("++"===t.operator)return r.set(i+1),t.prefix?r.get():i;if("--"===t.operator)return r.set(i-1),t.prefix?r.get():i;throw new SyntaxError("Unexpected token "+t.operator)},BinaryExpression:function(t,e){var r=ht(t.left,e),n=ht(t.right,e);switch(t.operator){case"==":return r==n;case"!=":return r!=n;case"===":return r===n;case"!==":return r!==n;case"<":return r<n;case"<=":return r<=n;case">":return r>n;case">=":return r>=n;case"<<":return r<<n;case">>":return r>>n;case">>>":return r>>>n;case"+":return r+n;case"-":return r-n;case"*":return r*n;case"**":return Math.pow(r,n);case"/":return r/n;case"%":return r%n;case"|":return r|n;case"^":return r^n;case"&":return r&n;case"in":return r in n;case"instanceof":return r instanceof n;default:throw new SyntaxError("Unexpected token "+t.operator)}},AssignmentExpression:function(t,e){var r,n=ht(t.right,e),i=t.left;if("Identifier"===i.type){if(!(r=H(i,e,{getVar:!0,throwErr:!1}))){var s=e.global().find("window").get();r=new $(s,i.name)}}else{if("MemberExpression"!==i.type)return te(i,e,{feed:n});r=Z(i,e,{getVar:!0})}switch(t.operator){case"=":return r.set(n),r.get();case"+=":return r.set(r.get()+n),r.get();case"-=":return r.set(r.get()-n),r.get();case"*=":return r.set(r.get()*n),r.get();case"/=":return r.set(r.get()/n),r.get();case"%=":return r.set(r.get()%n),r.get();case"**=":return r.set(Math.pow(r.get(),n)),r.get();case"<<=":return r.set(r.get()<<n),r.get();case">>=":return r.set(r.get()>>n),r.get();case">>>=":return r.set(r.get()>>>n),r.get();case"|=":return r.set(r.get()|n),r.get();case"^=":return r.set(r.get()^n),r.get();case"&=":return r.set(r.get()&n),r.get();default:throw new SyntaxError("Unexpected token "+t.operator)}},LogicalExpression:function(t,e){switch(t.operator){case"||":return ht(t.left,e)||ht(t.right,e);case"&&":return ht(t.left,e)&&ht(t.right,e);default:throw new SyntaxError("Unexpected token "+t.operator)}},MemberExpression:Z,ConditionalExpression:function(t,e){return ht(t.test,e)?ht(t.consequent,e):ht(t.alternate,e)},CallExpression:function(t,e){var r,n;if("MemberExpression"===t.callee.type){n=Z(t.callee,e,{getObj:!0});var i;if(i=t.callee.computed?ht(t.callee.property,e):t.callee.property.name,"Super"===t.callee.object.type){var s=e.find("this").get();r=n[i].bind(s)}else r=n[i];if("function"!=typeof r)throw new TypeError(i+" is not a function");if(r[L])throw new TypeError("Class constructor "+i+" cannot be invoked without 'new'")}else if(n=e.find("this").get(),"function"!=typeof(r=ht(t.callee,e))||"Super"!==t.callee.type&&r[L]){var o;if("Identifier"===t.callee.type)o=t.callee.name;else try{o=JSON.stringify(r)}catch(t){o=""+r}throw"function"!=typeof r?new TypeError(o+" is not a function"):new TypeError("Class constructor "+o+" cannot be invoked without 'new'")}for(var a=[],u=0;u<t.arguments.length;u++){var l=t.arguments[u];"SpreadElement"===l.type?a=a.concat(Q(l,e)):a.push(ht(l,e))}if("Super"===t.callee.type){if(e.find(P).get())throw new ReferenceError("Super constructor may only be called once");e.find(P).set(!0)}return n&&n[A]&&-1!==r.toString().indexOf("[native code]")?r.apply(n[A],a):r.apply(n,a)},NewExpression:function(t,e){var r=ht(t.callee,e);if("function"!=typeof r){var n;if("Identifier"===t.callee.type)n=t.callee.name;else try{n=JSON.stringify(r)}catch(t){n=""+r}throw new TypeError(n+" is not a constructor")}if(r[R])throw new TypeError((r.name||"(intermediate value)")+" is not a constructor");for(var i=[],s=0;s<t.arguments.length;s++){var o=t.arguments[s];"SpreadElement"===o.type?i=i.concat(Q(o,e)):i.push(ht(o,e))}return new(r.bind.apply(r,j([void 0],i)))},MetaProperty:function(t,e){return e.find(D).get()},SequenceExpression:function(t,e){for(var r,n=0;n<t.expressions.length;n++)r=ht(t.expressions[n],e);return r},ArrowFunctionExpression:function(t,e){return ee(t,e)},TemplateLiteral:function(t,e){for(var r,n,i=t.quasis.slice(),s=t.expressions.slice(),o="";r=i.shift();)o+=K(r),(n=s.shift())&&(o+=ht(n,e));return o},TaggedTemplateExpression:function(t,e){var r=ht(t.tag,e),n=t.quasi.quasis,o=n.map((function(t){return t.value.cooked})),a=n.map((function(t){return t.value.raw}));s(o,"raw",{value:i(a)});var u=t.quasi.expressions,l=[];if(u)for(var c=0;c<u.length;c++)l.push(ht(u[c],e));return r.apply(void 0,j([i(o)],l))},TemplateElement:K,ClassExpression:function(t,e){if(t.id&&t.id.name){var r=new z(e),n=re(t,r);return r.const(t.id.name,n),n}return re(t,e)},Super:J,SpreadElement:Q});function et(t,e,r){void 0===r&&(r={});var n=r.invasived,i=void 0!==n&&n,s=r.hoisted,o=void 0!==s&&s,a=i?e:new z(e);o||Jt(t,a,{onlyBlock:!0});for(var u=0;u<t.body.length;u++){var l=ht(t.body[u],a);if(l===O||l===T||l===C)return l}}function rt(t,e){for(var r=0;r<t.consequent.length;r++){var n=ht(t.consequent[r],e);if(n===O||n===T||n===C)return n}}function nt(t,e){return et(t.body,e,{invasived:!0})}var it=Object.freeze({__proto__:null,ExpressionStatement:function(t,e){ht(t.expression,e)},BlockStatement:et,EmptyStatement:function(){},DebuggerStatement:function(){},ReturnStatement:function(t,e){return C.RES=t.argument?ht(t.argument,e):void 0,C},BreakStatement:function(){return O},ContinueStatement:function(){return T},IfStatement:function(t,e){return ht(t.test,e)?ht(t.consequent,e):ht(t.alternate,e)},SwitchStatement:function(t,e){for(var r=ht(t.discriminant,e),n=!1,i=0;i<t.cases.length;i++){var s=t.cases[i];if(n||s.test&&ht(s.test,e)!==r||(n=!0),n){var o=rt(s,e);if(o===O)break;if(o===T||o===C)return o}}},SwitchCase:rt,ThrowStatement:function(t,e){throw ht(t.argument,e)},TryStatement:function(t,e){try{return et(t.block,e)}catch(s){if(t.handler){var r=new z(e),n=t.handler.param;if(n)if("Identifier"===n.type){var i=n.name;r.var(i,s)}else te(n,e,{feed:s});return nt(t.handler,r)}throw s}finally{if(t.finalizer){var s=et(t.finalizer,e);if(s===O||s===T||s===C)return s}}},CatchClause:nt,WhileStatement:function(t,e){for(;ht(t.test,e);){var r=ht(t.body,e);if(r===O)break;if(r!==T&&r===C)return r}},DoWhileStatement:function(t,e){do{var r=ht(t.body,e);if(r===O)break;if(r!==T&&r===C)return r}while(ht(t.test,e))},ForStatement:function(t,e){var r=new z(e);for(ht(t.init,r);!t.test||ht(t.test,r);ht(t.update,r)){var n,i=new z(r);if((n="BlockStatement"===t.body.type?et(t.body,i,{invasived:!0}):ht(t.body,i))===O)break;if(n!==T&&n===C)return n}},ForInStatement:function(t,e){for(var r in ht(t.right,e)){var n=ne(t,e,{value:r});if(n===O)break;if(n!==T&&n===C)return n}},ForOfStatement:function(t,e){var r,n,i=ht(t.right,e);try{for(var s=G(i),o=s.next();!o.done;o=s.next()){var a=ne(t,e,{value:o.value});if(a===O)break;if(a!==T&&a===C)return a}}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}}});function st(t,e,r){void 0===r&&(r={});for(var n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,u=void 0!==a&&a,l=r.feed,c=void 0===l?{}:l,p=[],h=0;h<t.properties.length;h++){var f=t.properties[h];if(o)(u||"var"===i)&&("Property"===f.type?"Identifier"===(d=f.value).type?e[i](d.name,u?B:"var"===i?q:void 0):te(d,e,{kind:i,hoist:o,onlyBlock:u}):at(f,e,{kind:i,hoist:o,onlyBlock:u}));else if("Property"===f.type){var d,m;m=f.computed?ht(f.key,e):f.key.name,p.push(m),"Identifier"===(d=f.value).type?e[i](d.name,c[m]):te(d,e,{kind:i,feed:c[m]})}else{for(var g=b({},c),y=0;y<p.length;y++)delete g[p[y]];at(f,e,{kind:i,feed:g})}}}function ot(t,e,r){void 0===r&&(r={});for(var n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,u=r.feed,l=void 0===u?[]:u,c=[],p=0;p<t.elements.length;p++){var h=t.elements[p];if(h)if(s)(a||"var"===n)&&("Identifier"===h.type?e[n](h.name,a?B:"var"===n?q:void 0):te(h,e,{kind:n,hoist:s,onlyBlock:a}));else if("Identifier"===h.type)if(n)e[n](h.name,l[p]);else{var f=H(h,e,{getVar:!0});f.set(l[p]),c.push(f.get())}else"RestElement"===h.type?at(h,e,{kind:n,feed:l.slice(p)}):te(h,e,{kind:n,feed:l[p]})}if(c.length)return c}function at(t,e,r){void 0===r&&(r={});var n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,u=r.feed,l=void 0===u?[]:u,c=t.argument;s?(a||"var"===n)&&("Identifier"===c.type?e[n](c.name,a?B:"var"===n?q:void 0):te(c,e,{kind:n,hoist:s,onlyBlock:a})):"Identifier"===c.type?n?e[n](c.name,l):H(c,e,{getVar:!0}).set(l):te(c,e,{kind:n,feed:l})}function ut(t,e,r){void 0===r&&(r={});var n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,u=void 0!==a&&a,l=r.feed,c=void 0===l?ht(t.right,e):l,p=t.left;o?(u||"var"===i)&&("Identifier"===p.type?e[i](p.name,u?B:"var"===i?q:void 0):te(p,e,{kind:i,hoist:o,onlyBlock:u})):"Identifier"===p.type?e[i](p.name,c):te(p,e,{kind:i,feed:c})}var lt=Object.freeze({__proto__:null,ObjectPattern:st,ArrayPattern:ot,RestElement:at,AssignmentPattern:ut});var ct,pt=Object.freeze({__proto__:null,Program:function(t,e){for(var r=0;r<t.body.length;r++)ht(t.body[r],e)}});function ht(t,r){if(t){ct||(ct=b({},e,tt,W,it,X,lt,pt));var n=ct[t.type];if(n)return n(t,r);throw new Error(t.type+" isn't implemented")}}function ft(t,e){e.func(t.id.name,ee(t,e))}function dt(t,e,r){void 0===r&&(r={});for(var n=0;n<t.declarations.length;n++)mt(t.declarations[n],e,b({kind:t.kind},r))}function mt(t,e,r){void 0===r&&(r={});var n=r.kind,i=void 0===n?"var":n,o=r.hoist,a=void 0!==o&&o,u=r.onlyBlock,l=void 0!==u&&u,c=r.feed;if(a)(l||"var"===i)&&("Identifier"===t.id.type?e[i](t.id.name,l?B:"var"===i?q:void 0):te(t.id,e,{kind:i,hoist:a,onlyBlock:l}));else{var p="feed"in r,h=p?c:ht(t.init,e);if("Identifier"===t.id.type){var f=t.id.name;"var"!==i||t.init||p?e[i](f,h):e.var(f,q),t.init&&-1!==["ClassExpression","FunctionExpression","ArrowFunctionExpression"].indexOf(t.init.type)&&!h.name&&s(h,"name",{value:f,configurable:!0})}else te(t.id,e,{kind:i,feed:h})}}function gt(t,e){e.func(t.id.name,re(t,e))}function yt(t,e,r){void 0===r&&(r={});for(var n=r.klass,i=r.superClass,s=0;s<t.body.length;s++)vt(t.body[s],e,{klass:n,superClass:i})}function vt(t,e,r){void 0===r&&(r={});var n,i=r.klass,a=r.superClass;if(t.computed)n=ht(t.key,e);else{if("Identifier"!==t.key.type)throw new SyntaxError("Unexpected token");n=t.key.name}var u=t.static?i:i.prototype,l=ee(t.value,e,{superClass:a});switch(t.kind){case"constructor":break;case"method":s(u,n,{value:l,writable:!0,configurable:!0});break;case"get":var c=o(u,n);s(u,n,{get:l,set:c&&c.set,configurable:!0});break;case"set":c=o(u,n),s(u,n,{get:c&&c.get,set:l,configurable:!0});break;default:throw new SyntaxError("Unexpected token")}}function bt(t,e,r){var n,i,s,o,a,u;return void 0===r&&(r={}),F(this,(function(l){if(n=r.getVar,i=void 0!==n&&n,s=r.throwErr,o=void 0===s||s,"undefined"===t.name)return[2,void 0];if(a=e.find(t.name)){if(i)return[2,a];if((u=a.get())===B)throw new ReferenceError(t.name+" is not defined");return[2,u]}if(o)throw new ReferenceError(t.name+" is not defined");return[2,void 0]}))}var xt=Object.freeze({__proto__:null,Identifier:bt});function _t(t,e){return F(this,(function(e){return[2,t.value]}))}var wt=Object.freeze({__proto__:null,Literal:_t});function Et(t,e,r){var n,i,o,a,u,l,c,p,h,f;return void 0===r&&(r={}),F(this,(function(d){switch(d.label){case 0:return n=r.getObj,i=void 0!==n&&n,o=r.getVar,a=void 0!==o&&o,"Super"!==t.object.type?[3,2]:[5,G(At(t.object,e,{getProto:!0}))];case 1:return u=d.sent(),[3,4];case 2:return[5,G(Bt(t.object,e))];case 3:u=d.sent(),d.label=4;case 4:return i?[2,u]:t.computed?[5,G(Bt(t.property,e))]:[3,6];case 5:return l=d.sent(),[3,7];case 6:l=t.property.name,d.label=7;case 7:return a?(c=g(u,l),"Super"===t.object.type&&c?(f=e.find("this").get(),p=M(l),s(f,p,{set:c}),[2,new $(f,p)]):[2,new $(u,l)]):(h=m(u,l),"Super"===t.object.type&&h?(f=e.find("this").get(),[2,h.call(f)]):[2,u[l]])}}))}function St(t,e){return F(this,(function(e){return[2,t.value.raw]}))}function At(t,e,r){var n,i,s;return void 0===r&&(r={}),F(this,(function(t){return n=r.getProto,i=void 0!==n&&n,s=e.find(I).get(),[2,i?s.prototype:s]}))}function Nt(t,e){return F(this,(function(r){switch(r.label){case 0:return[5,G(Bt(t.argument,e))];case 1:return[2,r.sent()]}}))}var Mt=Object.freeze({__proto__:null,ThisExpression:function(t,e){var r;return F(this,(function(t){if((r=e.find(P))&&!r.get())throw new ReferenceError("Must call super constructor in derived class before accessing 'this' or returning from derived constructor");return[2,e.find("this").get()]}))},ArrayExpression:function(t,e){var r,n,i,s,o,a,u;return F(this,(function(l){switch(l.label){case 0:r=[],n=0,l.label=1;case 1:return n<t.elements.length?"SpreadElement"!==(i=t.elements[n]).type?[3,3]:(o=(s=r).concat,[5,G(Nt(i,e))]):[3,6];case 2:return r=o.apply(s,[l.sent()]),[3,5];case 3:return u=(a=r).push,[5,G(Bt(i,e))];case 4:u.apply(a,[l.sent()]),l.label=5;case 5:return n++,[3,1];case 6:return[2,r]}}))},ObjectExpression:function(t,e){var r,n,i,a,u,l,c,p,h,f,d;return F(this,(function(m){switch(m.label){case 0:r={},n=0,m.label=1;case 1:return n<t.properties.length?"SpreadElement"!==(i=t.properties[n]).type?[3,3]:(a=b,u=[r],[5,G(Nt(i,e))]):[3,11];case 2:return a.apply(void 0,u.concat([m.sent()])),[3,10];case 3:return l=void 0,c=i.key,i.computed?[5,G(Bt(c,e))]:[3,5];case 4:return l=m.sent(),[3,8];case 5:return"Identifier"!==c.type?[3,6]:(l=c.name,[3,8]);case 6:return p="",[5,G(_t(c))];case 7:l=p+m.sent(),m.label=8;case 8:return[5,G(Bt(i.value,e))];case 9:h=m.sent(),"init"===(f=i.kind)?r[l]=h:"get"===f?(d=o(r,l),s(r,l,{get:h,set:d&&d.set,enumerable:!0,configurable:!0})):(d=o(r,l),s(r,l,{get:d&&d.get,set:h,enumerable:!0,configurable:!0})),m.label=10;case 10:return n++,[3,1];case 11:return[2,r]}}))},FunctionExpression:function(t,e){var r,n;return F(this,(function(i){return t.id&&t.id.name?(r=new z(e),n=Xt(t,r),r.const(t.id.name,n),[2,n]):[2,Xt(t,e)]}))},UnaryExpression:function(t,e){var r;return F(this,(function(n){switch(n.label){case 0:switch(r=t.argument,t.operator){case"+":return[3,1];case"-":return[3,3];case"!":return[3,5];case"~":return[3,7];case"void":return[3,9];case"typeof":return[3,11];case"delete":return[3,15]}return[3,20];case 1:return[5,G(Bt(r,e))];case 2:return[2,+n.sent()];case 3:return[5,G(Bt(r,e))];case 4:return[2,-n.sent()];case 5:return[5,G(Bt(r,e))];case 6:return[2,!n.sent()];case 7:return[5,G(Bt(r,e))];case 8:return[2,~n.sent()];case 9:return[5,G(Bt(r,e))];case 10:return[2,void n.sent()];case 11:return"Identifier"!==r.type?[3,13]:[5,G(bt(r,e,{throwErr:!1}))];case 12:return[2,typeof n.sent()];case 13:return[5,G(Bt(r,e))];case 14:return[2,typeof n.sent()];case 15:return"MemberExpression"!==r.type?[3,17]:[5,G(Et(r,e,{getVar:!0}))];case 16:return[2,n.sent().del()];case 17:if("Identifier"!==r.type)return[3,18];throw new SyntaxError("Delete of an unqualified identifier in strict mode");case 18:return[5,G(Bt(r,e))];case 19:return n.sent(),[2,!0];case 20:throw new SyntaxError("Unexpected token "+t.operator)}}))},UpdateExpression:function(t,e){var r,n,i;return F(this,(function(s){switch(s.label){case 0:return"Identifier"!==(r=t.argument).type?[3,2]:[5,G(bt(r,e,{getVar:!0}))];case 1:return n=s.sent(),[3,5];case 2:return"MemberExpression"!==r.type?[3,4]:[5,G(Et(r,e,{getVar:!0}))];case 3:return n=s.sent(),[3,5];case 4:throw new SyntaxError("Unexpected token");case 5:if(i=n.get(),"++"===t.operator)return n.set(i+1),[2,t.prefix?n.get():i];if("--"===t.operator)return n.set(i-1),[2,t.prefix?n.get():i];throw new SyntaxError("Unexpected token "+t.operator)}}))},BinaryExpression:function(t,e){var r,n;return F(this,(function(i){switch(i.label){case 0:return[5,G(Bt(t.left,e))];case 1:return r=i.sent(),[5,G(Bt(t.right,e))];case 2:switch(n=i.sent(),t.operator){case"==":return[2,r==n];case"!=":return[2,r!=n];case"===":return[2,r===n];case"!==":return[2,r!==n];case"<":return[2,r<n];case"<=":return[2,r<=n];case">":return[2,r>n];case">=":return[2,r>=n];case"<<":return[2,r<<n];case">>":return[2,r>>n];case">>>":return[2,r>>>n];case"+":return[2,r+n];case"-":return[2,r-n];case"*":return[2,r*n];case"**":return[2,Math.pow(r,n)];case"/":return[2,r/n];case"%":return[2,r%n];case"|":return[2,r|n];case"^":return[2,r^n];case"&":return[2,r&n];case"in":return[2,r in n];case"instanceof":return[2,r instanceof n];default:throw new SyntaxError("Unexpected token "+t.operator)}}}))},AssignmentExpression:function(t,e){var r,n,i,s;return F(this,(function(o){switch(o.label){case 0:return[5,G(Bt(t.right,e))];case 1:return r=o.sent(),"Identifier"!==(n=t.left).type?[3,3]:[5,G(bt(n,e,{getVar:!0,throwErr:!1}))];case 2:return(i=o.sent())||(s=e.global().find("window").get(),i=new $(s,n.name)),[3,7];case 3:return"MemberExpression"!==n.type?[3,5]:[5,G(Et(n,e,{getVar:!0}))];case 4:return i=o.sent(),[3,7];case 5:return[5,G(Yt(n,e,{feed:r}))];case 6:return[2,o.sent()];case 7:switch(t.operator){case"=":return i.set(r),[2,i.get()];case"+=":return i.set(i.get()+r),[2,i.get()];case"-=":return i.set(i.get()-r),[2,i.get()];case"*=":return i.set(i.get()*r),[2,i.get()];case"/=":return i.set(i.get()/r),[2,i.get()];case"%=":return i.set(i.get()%r),[2,i.get()];case"**=":return i.set(Math.pow(i.get(),r)),[2,i.get()];case"<<=":return i.set(i.get()<<r),[2,i.get()];case">>=":return i.set(i.get()>>r),[2,i.get()];case">>>=":return i.set(i.get()>>>r),[2,i.get()];case"|=":return i.set(i.get()|r),[2,i.get()];case"^=":return i.set(i.get()^r),[2,i.get()];case"&=":return i.set(i.get()&r),[2,i.get()];default:throw new SyntaxError("Unexpected token "+t.operator)}}}))},LogicalExpression:function(t,e){var r,n;return F(this,(function(i){switch(i.label){case 0:switch(t.operator){case"||":return[3,1];case"&&":return[3,5]}return[3,9];case 1:return[5,G(Bt(t.left,e))];case 2:return(r=i.sent())?[3,4]:[5,G(Bt(t.right,e))];case 3:r=i.sent(),i.label=4;case 4:return[2,r];case 5:return[5,G(Bt(t.left,e))];case 6:return(n=i.sent())?[5,G(Bt(t.right,e))]:[3,8];case 7:n=i.sent(),i.label=8;case 8:return[2,n];case 9:throw new SyntaxError("Unexpected token "+t.operator)}}))},MemberExpression:Et,ConditionalExpression:function(t,e){var r;return F(this,(function(n){switch(n.label){case 0:return[5,G(Bt(t.test,e))];case 1:return n.sent()?[5,G(Bt(t.consequent,e))]:[3,3];case 2:return r=n.sent(),[3,5];case 3:return[5,G(Bt(t.alternate,e))];case 4:r=n.sent(),n.label=5;case 5:return[2,r]}}))},CallExpression:function(t,e){var r,n,i,s,o,a,u,l,c,p,h,f;return F(this,(function(d){switch(d.label){case 0:return"MemberExpression"!==t.callee.type?[3,5]:[5,G(Et(t.callee,e,{getObj:!0}))];case 1:return n=d.sent(),i=void 0,t.callee.computed?[5,G(Bt(t.callee.property,e))]:[3,3];case 2:return i=d.sent(),[3,4];case 3:i=t.callee.property.name,d.label=4;case 4:if("Super"===t.callee.object.type?(s=e.find("this").get(),r=n[i].bind(s)):r=n[i],"function"!=typeof r)throw new TypeError(i+" is not a function");if(r[L])throw new TypeError("Class constructor "+i+" cannot be invoked without 'new'");return[3,7];case 5:return n=e.find("this").get(),[5,G(Bt(t.callee,e))];case 6:if("function"!=typeof(r=d.sent())||"Super"!==t.callee.type&&r[L]){if("Identifier"===t.callee.type)o=t.callee.name;else try{o=JSON.stringify(r)}catch(t){o=""+r}throw"function"!=typeof r?new TypeError(o+" is not a function"):new TypeError("Class constructor "+o+" cannot be invoked without 'new'")}d.label=7;case 7:a=[],u=0,d.label=8;case 8:return u<t.arguments.length?"SpreadElement"!==(l=t.arguments[u]).type?[3,10]:(p=(c=a).concat,[5,G(Nt(l,e))]):[3,13];case 9:return a=p.apply(c,[d.sent()]),[3,12];case 10:return f=(h=a).push,[5,G(Bt(l,e))];case 11:f.apply(h,[d.sent()]),d.label=12;case 12:return u++,[3,8];case 13:if("Super"===t.callee.type){if(e.find(P).get())throw new ReferenceError("Super constructor may only be called once");e.find(P).set(!0)}return n&&n[A]&&-1!==r.toString().indexOf("[native code]")?[2,r.apply(n[A],a)]:[2,r.apply(n,a)]}}))},NewExpression:function(t,e){var r,n,i,s,o,a,u,l,c;return F(this,(function(p){switch(p.label){case 0:return[5,G(Bt(t.callee,e))];case 1:if("function"!=typeof(r=p.sent())){if("Identifier"===t.callee.type)n=t.callee.name;else try{n=JSON.stringify(r)}catch(t){n=""+r}throw new TypeError(n+" is not a constructor")}if(r[R])throw new TypeError((r.name||"(intermediate value)")+" is not a constructor");i=[],s=0,p.label=2;case 2:return s<t.arguments.length?"SpreadElement"!==(o=t.arguments[s]).type?[3,4]:(u=(a=i).concat,[5,G(Nt(o,e))]):[3,7];case 3:return i=u.apply(a,[p.sent()]),[3,6];case 4:return c=(l=i).push,[5,G(Bt(o,e))];case 5:c.apply(l,[p.sent()]),p.label=6;case 6:return s++,[3,2];case 7:return[2,new(r.bind.apply(r,j([void 0],i)))]}}))},MetaProperty:function(t,e){return F(this,(function(t){return[2,e.find(D).get()]}))},SequenceExpression:function(t,e){var r,n;return F(this,(function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<t.expressions.length?[5,G(Bt(t.expressions[n],e))]:[3,4];case 2:r=i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2,r]}}))},ArrowFunctionExpression:function(t,e){return F(this,(function(r){return[2,Xt(t,e)]}))},TemplateLiteral:function(t,e){var r,n,i,s,o,a,u;return F(this,(function(l){switch(l.label){case 0:r=t.quasis.slice(),n=t.expressions.slice(),i="",l.label=1;case 1:return(s=r.shift())?(a=i,[5,G(St(s))]):[3,5];case 2:return i=a+l.sent(),(o=n.shift())?(u=i,[5,G(Bt(o,e))]):[3,4];case 3:i=u+l.sent(),l.label=4;case 4:return[3,1];case 5:return[2,i]}}))},TaggedTemplateExpression:function(t,e){var r,n,o,a,u,l,c,p,h;return F(this,(function(f){switch(f.label){case 0:return[5,G(Bt(t.tag,e))];case 1:if(r=f.sent(),n=t.quasi.quasis,o=n.map((function(t){return t.value.cooked})),a=n.map((function(t){return t.value.raw})),s(o,"raw",{value:i(a)}),u=t.quasi.expressions,l=[],!u)return[3,5];c=0,f.label=2;case 2:return c<u.length?(h=(p=l).push,[5,G(Bt(u[c],e))]):[3,5];case 3:h.apply(p,[f.sent()]),f.label=4;case 4:return c++,[3,2];case 5:return[2,r.apply(void 0,j([i(o)],l))]}}))},TemplateElement:St,ClassExpression:function(t,e){var r,n;return F(this,(function(i){switch(i.label){case 0:return t.id&&t.id.name?(r=new z(e),[5,G(Zt(t,r))]):[3,2];case 1:return n=i.sent(),r.const(t.id.name,n),[2,n];case 2:return[5,G(Zt(t,e))];case 3:return[2,i.sent()]}}))},Super:At,SpreadElement:Nt,YieldExpression:function(t,e){var r,n;return F(this,(function(i){switch(i.label){case 0:return[5,G(Bt(t.argument,e))];case 1:return r=i.sent(),t.delegate?[5,G(r)]:[3,3];case 2:return n=i.sent(),[3,5];case 3:return[4,r];case 4:n=i.sent(),i.label=5;case 5:return[2,n]}}))},AwaitExpression:function(t,e){var r;return F(this,(function(n){switch(n.label){case 0:return r=k,[5,G(Bt(t.argument,e))];case 1:return r.RES=n.sent(),[4,k];case 2:return[2,n.sent()]}}))}});function kt(t,e,r){var n,i,s,o,a,u,l;return void 0===r&&(r={}),F(this,(function(c){switch(c.label){case 0:return n=r.invasived,i=void 0!==n&&n,s=r.hoisted,o=void 0!==s&&s,a=i?e:new z(e),o?[3,2]:[5,G(Ht(t,a,{onlyBlock:!0}))];case 1:c.sent(),c.label=2;case 2:u=0,c.label=3;case 3:return u<t.body.length?[5,G(Bt(t.body[u],a))]:[3,6];case 4:if((l=c.sent())===O||l===T||l===C)return[2,l];c.label=5;case 5:return u++,[3,3];case 6:return[2]}}))}function Ct(t,e){var r,n;return F(this,(function(i){switch(i.label){case 0:r=0,i.label=1;case 1:return r<t.consequent.length?[5,G(Bt(t.consequent[r],e))]:[3,4];case 2:if((n=i.sent())===O||n===T||n===C)return[2,n];i.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}function Tt(t,e){return F(this,(function(r){switch(r.label){case 0:return[5,G(kt(t.body,e,{invasived:!0}))];case 1:return[2,r.sent()]}}))}var Ot=Object.freeze({__proto__:null,ExpressionStatement:function(t,e){return F(this,(function(r){switch(r.label){case 0:return[5,G(Bt(t.expression,e))];case 1:return r.sent(),[2]}}))},BlockStatement:kt,EmptyStatement:function(){return F(this,(function(t){return[2]}))},DebuggerStatement:function(){return F(this,(function(t){return[2]}))},ReturnStatement:function(t,e){var r,n;return F(this,(function(i){switch(i.label){case 0:return r=C,t.argument?[5,G(Bt(t.argument,e))]:[3,2];case 1:return n=i.sent(),[3,3];case 2:n=void 0,i.label=3;case 3:return r.RES=n,[2,C]}}))},BreakStatement:function(){return F(this,(function(t){return[2,O]}))},ContinueStatement:function(){return F(this,(function(t){return[2,T]}))},IfStatement:function(t,e){return F(this,(function(r){switch(r.label){case 0:return[5,G(Bt(t.test,e))];case 1:return r.sent()?[5,G(Bt(t.consequent,e))]:[3,3];case 2:return[2,r.sent()];case 3:return[5,G(Bt(t.alternate,e))];case 4:return[2,r.sent()]}}))},SwitchStatement:function(t,e){var r,n,i,s,o,a,u;return F(this,(function(l){switch(l.label){case 0:return[5,G(Bt(t.discriminant,e))];case 1:r=l.sent(),n=!1,i=0,l.label=2;case 2:return i<t.cases.length?(s=t.cases[i],(o=!n)?(a=!s.test)?[3,4]:[5,G(Bt(s.test,e))]:[3,5]):[3,8];case 3:a=l.sent()===r,l.label=4;case 4:o=a,l.label=5;case 5:return o&&(n=!0),n?[5,G(Ct(s,e))]:[3,7];case 6:if((u=l.sent())===O)return[3,8];if(u===T||u===C)return[2,u];l.label=7;case 7:return i++,[3,2];case 8:return[2]}}))},SwitchCase:Ct,ThrowStatement:function(t,e){return F(this,(function(r){switch(r.label){case 0:return[5,G(Bt(t.argument,e))];case 1:throw r.sent()}}))},TryStatement:function(t,e){var r,n,i,s,o;return F(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,9,12]),[5,G(kt(t.block,e))];case 1:return[2,a.sent()];case 2:return r=a.sent(),t.handler?(n=new z(e),(i=t.handler.param)?"Identifier"!==i.type?[3,3]:(s=i.name,n.var(s,r),[3,5]):[3,5]):[3,7];case 3:return[5,G(Yt(i,e,{feed:r}))];case 4:a.sent(),a.label=5;case 5:return[5,G(Tt(t.handler,n))];case 6:return[2,a.sent()];case 7:throw r;case 8:return[3,12];case 9:return t.finalizer?[5,G(kt(t.finalizer,e))]:[3,11];case 10:if((o=a.sent())===O||o===T||o===C)return[2,o];a.label=11;case 11:return[7];case 12:return[2]}}))},CatchClause:Tt,WhileStatement:function(t,e){var r;return F(this,(function(n){switch(n.label){case 0:return[5,G(Bt(t.test,e))];case 1:return n.sent()?[5,G(Bt(t.body,e))]:[3,3];case 2:return(r=n.sent())===O?[3,3]:r===T?[3,0]:r===C?[2,r]:[3,0];case 3:return[2]}}))},DoWhileStatement:function(t,e){var r;return F(this,(function(n){switch(n.label){case 0:return[5,G(Bt(t.body,e))];case 1:if((r=n.sent())===O)return[3,4];if(r===T)return[3,2];if(r===C)return[2,r];n.label=2;case 2:return[5,G(Bt(t.test,e))];case 3:if(n.sent())return[3,0];n.label=4;case 4:return[2]}}))},ForStatement:function(t,e){var r,n,i,s;return F(this,(function(o){switch(o.label){case 0:return r=new z(e),[5,G(Bt(t.init,r))];case 1:o.sent(),o.label=2;case 2:return t.test?[5,G(Bt(t.test,r))]:[3,4];case 3:return n=o.sent(),[3,5];case 4:n=!0,o.label=5;case 5:return n?(i=new z(r),s=void 0,"BlockStatement"!==t.body.type?[3,7]:[5,G(kt(t.body,i,{invasived:!0}))]):[3,12];case 6:return s=o.sent(),[3,9];case 7:return[5,G(Bt(t.body,i))];case 8:s=o.sent(),o.label=9;case 9:if(s===O)return[3,12];if(s===T)return[3,10];if(s===C)return[2,s];o.label=10;case 10:return[5,G(Bt(t.update,r))];case 11:return o.sent(),[3,2];case 12:return[2]}}))},ForInStatement:function(t,e){var r,n,i,s,o;return F(this,(function(a){switch(a.label){case 0:return r=[],[5,G(Bt(t.right,e))];case 1:for(n in a.sent())r.push(n);i=0,a.label=2;case 2:return i<r.length?(s=r[i],[5,G(Kt(t,e,{value:s}))]):[3,5];case 3:if((o=a.sent())===O)return[3,5];if(o===T)return[3,4];if(o===C)return[2,o];a.label=4;case 4:return i++,[3,2];case 5:return[2]}}))},ForOfStatement:function(t,e){var r,n,i,s,o,a,u,l,c,p;return F(this,(function(h){switch(h.label){case 0:return[5,G(Bt(t.right,e))];case 1:return r=h.sent(),t.await?(n=function(t){var e;if("function"==typeof Symbol&&!(e=t[Symbol.asyncIterator])&&(e=t[Symbol.iterator]),e)return e.call(t);if("function"==typeof t.next)return t;var r=0;return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}(r),i=void 0,k.RES=n.next(),[4,k]):[3,8];case 2:i=h.sent(),h.label=3;case 3:return i.done?[3,7]:[5,G(Kt(t,e,{value:i.value}))];case 4:if((u=h.sent())===O)return[3,7];if(u===T)return[3,5];if(u===C)return[2,u];h.label=5;case 5:return k.RES=n.next(),[4,k];case 6:return i=h.sent(),[3,3];case 7:return[3,15];case 8:h.trys.push([8,13,14,15]),s=G(r),o=s.next(),h.label=9;case 9:return o.done?[3,12]:(a=o.value,[5,G(Kt(t,e,{value:a}))]);case 10:if((u=h.sent())===O)return[3,12];if(u===T)return[3,11];if(u===C)return[2,u];h.label=11;case 11:return o=s.next(),[3,9];case 12:return[3,15];case 13:return l=h.sent(),c={error:l},[3,15];case 14:try{o&&!o.done&&(p=s.return)&&p.call(s)}finally{if(c)throw c.error}return[7];case 15:return[2]}}))}});function It(t,e,r){var n,i,s,o,a,u,l,c,p,h,f,d,m,g,y;return void 0===r&&(r={}),F(this,(function(v){switch(v.label){case 0:n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,u=void 0!==a&&a,l=r.feed,c=void 0===l?{}:l,p=[],h=0,v.label=1;case 1:return h<t.properties.length?(f=t.properties[h],o?u||"var"===i?"Property"!==f.type?[3,5]:"Identifier"!==(m=f.value).type?[3,2]:(e[i](m.name,u?B:"var"===i?q:void 0),[3,4]):[3,7]:[3,8]):[3,18];case 2:return[5,G(Yt(m,e,{kind:i,hoist:o,onlyBlock:u}))];case 3:v.sent(),v.label=4;case 4:return[3,7];case 5:return[5,G(Rt(f,e,{kind:i,hoist:o,onlyBlock:u}))];case 6:v.sent(),v.label=7;case 7:return[3,17];case 8:return"Property"!==f.type?[3,15]:(d=void 0,f.computed?[5,G(Bt(f.key,e))]:[3,10]);case 9:return d=v.sent(),[3,11];case 10:d=f.key.name,v.label=11;case 11:return p.push(d),"Identifier"!==(m=f.value).type?[3,12]:(e[i](m.name,c[d]),[3,14]);case 12:return[5,G(Yt(m,e,{kind:i,feed:c[d]}))];case 13:v.sent(),v.label=14;case 14:return[3,17];case 15:for(g=b({},c),y=0;y<p.length;y++)delete g[p[y]];return[5,G(Rt(f,e,{kind:i,feed:g}))];case 16:v.sent(),v.label=17;case 17:return h++,[3,1];case 18:return[2]}}))}function Pt(t,e,r){var n,i,s,o,a,u,l,c,p,h,f;return void 0===r&&(r={}),F(this,(function(d){switch(d.label){case 0:n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,u=r.feed,l=void 0===u?[]:u,c=[],p=0,d.label=1;case 1:return p<t.elements.length?(h=t.elements[p])?s?a||"var"===n?"Identifier"!==h.type?[3,2]:(e[n](h.name,a?B:"var"===n?q:void 0),[3,4]):[3,4]:[3,5]:[3,13]:[3,14];case 2:return[5,G(Yt(h,e,{kind:n,hoist:s,onlyBlock:a}))];case 3:d.sent(),d.label=4;case 4:return[3,13];case 5:return"Identifier"!==h.type?[3,9]:n?(e[n](h.name,l[p]),[3,8]):[3,6];case 6:return[5,G(bt(h,e,{getVar:!0}))];case 7:(f=d.sent()).set(l[p]),c.push(f.get()),d.label=8;case 8:return[3,13];case 9:return"RestElement"!==h.type?[3,11]:[5,G(Rt(h,e,{kind:n,feed:l.slice(p)}))];case 10:return d.sent(),[3,13];case 11:return[5,G(Yt(h,e,{kind:n,feed:l[p]}))];case 12:d.sent(),d.label=13;case 13:return p++,[3,1];case 14:return c.length?[2,c]:[2]}}))}function Rt(t,e,r){var n,i,s,o,a,u,l,c;return void 0===r&&(r={}),F(this,(function(p){switch(p.label){case 0:return n=r.kind,i=r.hoist,s=void 0!==i&&i,o=r.onlyBlock,a=void 0!==o&&o,u=r.feed,l=void 0===u?[]:u,c=t.argument,s?a||"var"===n?"Identifier"!==c.type?[3,1]:(e[n](c.name,a?B:"var"===n?q:void 0),[3,3]):[3,3]:[3,4];case 1:return[5,G(Yt(c,e,{kind:n,hoist:s,onlyBlock:a}))];case 2:p.sent(),p.label=3;case 3:return[3,10];case 4:return"Identifier"!==c.type?[3,8]:n?(e[n](c.name,l),[3,7]):[3,5];case 5:return[5,G(bt(c,e,{getVar:!0}))];case 6:p.sent().set(l),p.label=7;case 7:return[3,10];case 8:return[5,G(Yt(c,e,{kind:n,feed:l}))];case 9:p.sent(),p.label=10;case 10:return[2]}}))}function Lt(t,e,r){var n,i,s,o,a,u,l,c,p,h;return void 0===r&&(r={}),F(this,(function(f){switch(f.label){case 0:return n=r.kind,i=void 0===n?"var":n,s=r.hoist,o=void 0!==s&&s,a=r.onlyBlock,u=void 0!==a&&a,void 0!==(l=r.feed)?[3,2]:[5,G(Bt(t.right,e))];case 1:return p=f.sent(),[3,3];case 2:p=l,f.label=3;case 3:return c=p,h=t.left,o?u||"var"===i?"Identifier"!==h.type?[3,4]:(e[i](h.name,u?B:"var"===i?q:void 0),[3,6]):[3,6]:[3,7];case 4:return[5,G(Yt(h,e,{kind:i,hoist:o,onlyBlock:u}))];case 5:f.sent(),f.label=6;case 6:return[3,10];case 7:return"Identifier"!==h.type?[3,8]:(e[i](h.name,c),[3,10]);case 8:return[5,G(Yt(h,e,{kind:i,feed:c}))];case 9:f.sent(),f.label=10;case 10:return[2]}}))}var Dt,qt=Object.freeze({__proto__:null,ObjectPattern:It,ArrayPattern:Pt,RestElement:Rt,AssignmentPattern:Lt});function Bt(t,e){var r;return F(this,(function(i){switch(i.label){case 0:return t?(Dt||(Dt=b({},n,Mt,xt,Ot,wt,qt)),(r=Dt[t.type])?[5,G(r(t,e))]:[3,2]):[2];case 1:return[2,i.sent()];case 2:throw new Error(t.type+" isn't implemented")}}))}function Ut(t,e){return F(this,(function(r){return e.func(t.id.name,Xt(t,e)),[2]}))}function $t(t,e,r){var n;return void 0===r&&(r={}),F(this,(function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<t.declarations.length?[5,G(zt(t.declarations[n],e,b({kind:t.kind},r)))]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}function zt(t,e,r){var n,i,o,a,u,l,c,p,h,f,d;return void 0===r&&(r={}),F(this,(function(m){switch(m.label){case 0:return n=r.kind,i=void 0===n?"var":n,o=r.hoist,a=void 0!==o&&o,u=r.onlyBlock,l=void 0!==u&&u,c=r.feed,a?l||"var"===i?"Identifier"!==t.id.type?[3,1]:(e[i](t.id.name,l?B:"var"===i?q:void 0),[3,3]):[3,3]:[3,4];case 1:return[5,G(Yt(t.id,e,{kind:i,hoist:a,onlyBlock:l}))];case 2:m.sent(),m.label=3;case 3:return[3,10];case 4:return(p="feed"in r)?(f=c,[3,7]):[3,5];case 5:return[5,G(Bt(t.init,e))];case 6:f=m.sent(),m.label=7;case 7:return h=f,"Identifier"!==t.id.type?[3,8]:(d=t.id.name,"var"!==i||t.init||p?e[i](d,h):e.var(d,q),t.init&&-1!==["ClassExpression","FunctionExpression","ArrowFunctionExpression"].indexOf(t.init.type)&&!h.name&&s(h,"name",{value:d,configurable:!0}),[3,10]);case 8:return[5,G(Yt(t.id,e,{kind:i,feed:h}))];case 9:m.sent(),m.label=10;case 10:return[2]}}))}function Ft(t,e){var r,n,i;return F(this,(function(s){switch(s.label){case 0:return n=(r=e).func,i=[t.id.name],[5,G(Zt(t,e))];case 1:return n.apply(r,i.concat([s.sent()])),[2]}}))}function Gt(t,e,r){var n,i,s;return void 0===r&&(r={}),F(this,(function(o){switch(o.label){case 0:n=r.klass,i=r.superClass,s=0,o.label=1;case 1:return s<t.body.length?[5,G(Vt(t.body[s],e,{klass:n,superClass:i}))]:[3,4];case 2:o.sent(),o.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}function Vt(t,e,r){var n,i,a,u,l,c;return void 0===r&&(r={}),F(this,(function(p){switch(p.label){case 0:return n=r.klass,i=r.superClass,t.computed?[5,G(Bt(t.key,e))]:[3,2];case 1:return a=p.sent(),[3,3];case 2:if("Identifier"!==t.key.type)throw new SyntaxError("Unexpected token");a=t.key.name,p.label=3;case 3:switch(u=t.static?n:n.prototype,l=Xt(t.value,e,{superClass:i}),t.kind){case"constructor":break;case"method":s(u,a,{value:l,writable:!0,configurable:!0});break;case"get":c=o(u,a),s(u,a,{get:l,set:c&&c.set,configurable:!0});break;case"set":c=o(u,a),s(u,a,{get:c&&c.get,set:l,configurable:!0});break;default:throw new SyntaxError("Unexpected token")}return[2]}}))}function jt(t,e){void 0===e&&(e={});var r=e.res,n=e.err,i=e.ret,s=e.fullRet;return new Promise((function(o,a){if("ret"in e)return o(t.return(i));function u(e){var r;try{r=t.next(e)}catch(t){return a(t)}return c(r),null}function l(e){var r;try{r=t.throw(e)}catch(t){return a(t)}c(r)}function c(t){if(t.done)return o(s?t:t.value);if(t.value!==k)return o(t);var e=t.value.RES;return(e&&"function"===e.then?e:Promise.resolve(e)).then(u,l)}"err"in e?l(n):u(r)}))}function Ht(t,e,r){var n,i,s,o,a,u;return void 0===r&&(r={}),F(this,(function(l){switch(l.label){case 0:n=r.onlyBlock,i=void 0!==n&&n,s=[],o=[],u=0,l.label=1;case 1:return u<t.body.length?"FunctionDeclaration"!==(a=t.body[u]).type?[3,2]:(s.push(a),o.push(u),[3,6]):[3,7];case 2:return"VariableDeclaration"!==a.type||-1===["const","let"].indexOf(a.kind)?[3,4]:[5,G($t(a,e,{hoist:!0,onlyBlock:!0}))];case 3:return l.sent(),[3,6];case 4:return i?[3,6]:[5,G(Wt(a,e))];case 5:l.sent(),l.label=6;case 6:return u++,[3,1];case 7:if(o.length){for(u=o.length-1;u>-1;u--)t.body.splice(o[u],1);t.body=s.concat(t.body)}return[2]}}))}function Wt(t,e){var r,n,i,s,o;return F(this,(function(a){switch(a.label){case 0:switch(t.type){case"VariableDeclaration":return[3,1];case"ForInStatement":case"ForOfStatement":return[3,3];case"ForStatement":return[3,5];case"WhileStatement":case"DoWhileStatement":return[3,7];case"IfStatement":return[3,9];case"BlockStatement":return[3,13];case"SwitchStatement":return[3,18];case"TryStatement":return[3,25]}return[3,38];case 1:return[5,G($t(t,e,{hoist:!0}))];case 2:return a.sent(),[3,38];case 3:return"VariableDeclaration"!==t.left.type?[3,5]:[5,G($t(t.left,e,{hoist:!0}))];case 4:a.sent(),a.label=5;case 5:return"ForStatement"!==t.type||"VariableDeclaration"!==t.init.type?[3,7]:[5,G($t(t.init,e,{hoist:!0}))];case 6:a.sent(),a.label=7;case 7:return[5,G(Wt(t.body,e))];case 8:return a.sent(),[3,38];case 9:return[5,G(Wt(t.consequent,e))];case 10:return a.sent(),t.alternate?[5,G(Wt(t.alternate,e))]:[3,12];case 11:a.sent(),a.label=12;case 12:return[3,38];case 13:o=0,a.label=14;case 14:return o<t.body.length?[5,G(Wt(t.body[o],e))]:[3,17];case 15:a.sent(),a.label=16;case 16:return o++,[3,14];case 17:return[3,38];case 18:o=0,a.label=19;case 19:if(!(o<t.cases.length))return[3,24];r=0,a.label=20;case 20:return r<t.cases[o].consequent.length?[5,G(Wt(t.cases[o].consequent[r],e))]:[3,23];case 21:a.sent(),a.label=22;case 22:return r++,[3,20];case 23:return o++,[3,19];case 24:return[3,38];case 25:n=t.block.body,o=0,a.label=26;case 26:return o<n.length?[5,G(Wt(n[o],e))]:[3,29];case 27:a.sent(),a.label=28;case 28:return o++,[3,26];case 29:if(!(i=t.handler&&t.handler.body.body))return[3,33];o=0,a.label=30;case 30:return o<i.length?[5,G(Wt(i[o],e))]:[3,33];case 31:a.sent(),a.label=32;case 32:return o++,[3,30];case 33:if(!(s=t.finalizer&&t.finalizer.body))return[3,37];o=0,a.label=34;case 34:return o<s.length?[5,G(Wt(s[o],e))]:[3,37];case 35:a.sent(),a.label=36;case 36:return o++,[3,34];case 37:return[3,38];case 38:return[2]}}))}function Yt(t,e,r){return void 0===r&&(r={}),F(this,(function(n){switch(n.label){case 0:switch(t.type){case"ObjectPattern":return[3,1];case"ArrayPattern":return[3,3];case"RestElement":return[3,5];case"AssignmentPattern":return[3,7]}return[3,9];case 1:return[5,G(It(t,e,r))];case 2:return[2,n.sent()];case 3:return[5,G(Pt(t,e,r))];case 4:return[2,n.sent()];case 5:return[5,G(Rt(t,e,r))];case 6:return[2,n.sent()];case 7:return[5,G(Lt(t,e,r))];case 8:return[2,n.sent()];case 9:throw new SyntaxError("Unexpected token")}}))}function Xt(t,e,r){if(void 0===r&&(r={}),!t.generator&&!t.async)return ee(t,e,r);var n,i=r.superClass,o=r.isCtor,a=t.params,u=function r(){var n,s,u,l,c,p=this&&this instanceof r?this.constructor:void 0,h=[];for(n=0;n<arguments.length;n++)h[n]=arguments[n];return F(this,(function(r){switch(r.label){case 0:s=new z(e,!0),"ArrowFunctionExpression"!==t.type&&(s.const("this",this),s.let("arguments",arguments),s.const(D,p),i&&(s.const(I,i),o&&s.let(P,!1))),u=0,r.label=1;case 1:return u<a.length?"Identifier"!==(l=a[u]).type?[3,2]:(s.var(l.name,h[u]),[3,6]):[3,7];case 2:return"RestElement"!==l.type?[3,4]:[5,G(Rt(l,s,{kind:"var",feed:h.slice(u)}))];case 3:return r.sent(),[3,6];case 4:return[5,G(Yt(l,s,{feed:h[u]}))];case 5:r.sent(),r.label=6;case 6:return u++,[3,1];case 7:return"BlockStatement"!==t.body.type?[3,10]:[5,G(Ht(t.body,s))];case 8:return r.sent(),[5,G(kt(t.body,s,{invasived:!0,hoisted:!0}))];case 9:return c=r.sent(),[3,12];case 10:return[5,G(Bt(t.body,s))];case 11:c=r.sent(),"ArrowFunctionExpression"===t.type&&(C.RES=c,c=C),r.label=12;case 12:return c===C?[2,c.RES]:[2]}}))};return n=t.async&&t.generator?function(){var t=u.apply(this,arguments),e=Promise.resolve(),r=!1,n=function(n){return e=e.then((function(){return jt(t,b({fullRet:!0},n))})).catch((function(t){if(!r)return r=!0,Promise.reject(t)}))},i={next:function(t){return n({res:t})},throw:function(t){return n({err:t})},return:function(t){return n({ret:t})}};return"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i}:t.async?function(){return jt(u.apply(this,arguments))}:u,s(n,R,{value:!0}),s(n,"name",{value:t.id&&t.id.name||"",configurable:!0}),s(n,"length",{value:a.length,configurable:!0}),n}function Zt(t,e){var r,n,i,o,a;return F(this,(function(u){switch(u.label){case 0:return[5,G(Bt(t.superClass,e))];case 1:for(r=u.sent(),n=function(){r&&r.apply(this)},i=t.body.body,o=0;o<i.length;o++)if("constructor"===(a=i[o]).kind){n=Xt(a.value,e,{superClass:r,isCtor:!0});break}return r&&v(n,r),[5,G(Gt(t.body,e,{klass:n,superClass:r}))];case 2:return u.sent(),s(n,L,{value:!0}),s(n,"name",{value:t.id&&t.id.name||"",configurable:!0}),[2,n]}}))}function Kt(t,e,r){var n,i,s,o;return F(this,(function(a){switch(a.label){case 0:return n=r.value,i=t.left,s=new z(e),"VariableDeclaration"!==i.type?[3,2]:[5,G($t(i,s,{feed:n}))];case 1:return a.sent(),[3,6];case 2:return"Identifier"!==i.type?[3,4]:[5,G(H(i,e,{getVar:!0}))];case 3:return a.sent().set(n),[3,6];case 4:return[5,G(Yt(i,e,{feed:n}))];case 5:a.sent(),a.label=6;case 6:return"BlockStatement"!==t.body.type?[3,8]:[5,G(kt(t.body,s,{invasived:!0}))];case 7:return o=a.sent(),[3,10];case 8:return[5,G(Bt(t.body,s))];case 9:o=a.sent(),a.label=10;case 10:return[2,o]}}))}function Jt(t,e,r){void 0===r&&(r={});for(var n=r.onlyBlock,i=void 0!==n&&n,s=[],o=[],a=0;a<t.body.length;a++){var u=t.body[a];"FunctionDeclaration"===u.type?(s.push(u),o.push(a)):"VariableDeclaration"===u.type&&-1!==["const","let"].indexOf(u.kind)?dt(u,e,{hoist:!0,onlyBlock:!0}):i||Qt(u,e)}if(o.length){for(a=o.length-1;a>-1;a--)t.body.splice(o[a],1);t.body=s.concat(t.body)}}function Qt(t,e){switch(t.type){case"VariableDeclaration":dt(t,e,{hoist:!0});break;case"ForInStatement":case"ForOfStatement":"VariableDeclaration"===t.left.type&&dt(t.left,e,{hoist:!0});case"ForStatement":"ForStatement"===t.type&&"VariableDeclaration"===t.init.type&&dt(t.init,e,{hoist:!0});case"WhileStatement":case"DoWhileStatement":Qt(t.body,e);break;case"IfStatement":Qt(t.consequent,e),t.alternate&&Qt(t.alternate,e);break;case"BlockStatement":for(var r=0;r<t.body.length;r++)Qt(t.body[r],e);break;case"SwitchStatement":for(r=0;r<t.cases.length;r++)for(var n=0;n<t.cases[r].consequent.length;n++)Qt(t.cases[r].consequent[n],e);break;case"TryStatement":var i=t.block.body;for(r=0;r<i.length;r++)Qt(i[r],e);var s=t.handler&&t.handler.body.body;if(s)for(r=0;r<s.length;r++)Qt(s[r],e);var o=t.finalizer&&t.finalizer.body;if(o)for(r=0;r<o.length;r++)Qt(o[r],e)}}function te(t,e,r){switch(void 0===r&&(r={}),t.type){case"ObjectPattern":return st(t,e,r);case"ArrayPattern":return ot(t,e,r);case"RestElement":return at(t,e,r);case"AssignmentPattern":return ut(t,e,r);default:throw new SyntaxError("Unexpected token")}}function ee(t,e,r){if(void 0===r&&(r={}),t.generator||t.async)return Xt(t,e,r);var n=r.superClass,i=r.isCtor,o=t.params,a=function r(){for(var s=this&&this instanceof r?this.constructor:void 0,a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var l,c=new z(e,!0);"ArrowFunctionExpression"!==t.type&&(c.const("this",this),c.let("arguments",arguments),c.const(D,s),n&&(c.const(I,n),i&&c.let(P,!1)));for(var p=0;p<o.length;p++){var h=o[p];"Identifier"===h.type?c.var(h.name,a[p]):"RestElement"===h.type?at(h,c,{kind:"var",feed:a.slice(p)}):te(h,c,{feed:a[p]})}if("BlockStatement"===t.body.type?(Jt(t.body,c),l=et(t.body,c,{invasived:!0,hoisted:!0})):(l=ht(t.body,c),"ArrowFunctionExpression"===t.type&&(C.RES=l,l=C)),l===C)return l.RES};return"ArrowFunctionExpression"===t.type&&s(a,R,{value:!0}),s(a,"name",{value:t.id&&t.id.name||"",configurable:!0}),s(a,"length",{value:o.length,configurable:!0}),a}function re(t,e){for(var r=ht(t.superClass,e),n=function(){r&&r.apply(this)},i=t.body.body,o=0;o<i.length;o++){var a=i[o];if("constructor"===a.kind){n=ee(a.value,e,{superClass:r,isCtor:!0});break}}return r&&v(n,r),yt(t.body,e,{klass:n,superClass:r}),s(n,L,{value:!0}),s(n,"name",{value:t.id&&t.id.name||"",configurable:!0}),n}function ne(t,e,r){var n=r.value,i=t.left,s=new z(e);return"VariableDeclaration"===i.type?dt(i,s,{feed:n}):"Identifier"===i.type?H(i,e,{getVar:!0}).set(n):te(i,e,{feed:n}),"BlockStatement"===t.body.type?et(t.body,s,{invasived:!0}):ht(t.body,s)}return function(){function e(t){void 0===t&&(t={}),this.options={},this.scope=new z(null,!0),this.exports={};var e=t.ecmaVer,r=void 0===e?9:e,n=t.sandBox,i=void 0===n||n;if(-1===[3,5,6,7,8,9,10].indexOf(r-=r<2015?0:2009))throw new Error("unsupported ecmaVer");if(this.options.ecmaVersion=r,i){var s=N();this.scope.let("window",s),this.scope.let("this",s)}else this.scope.let("window",_),this.scope.let("this",_);this.scope.const("exports",this.exports={})}return e.prototype.import=function(t,e){var r;if("string"==typeof t&&((r={})[t]=e,t=r),"object"==typeof t)for(var n=l(t),i=0;i<n.length;i++){var s=n[i];this.scope.var(s,t[s])}},e.prototype.parse=function(e,r){return"function"==typeof r?r(e,b({},this.options)):t.parse(e,this.options)},e.prototype.run=function(e){var r="string"==typeof e?t.parse(e,this.options):e;Jt(r,this.scope),ht(r,this.scope)},e.version="0.4.8",e}()}(r(69012))},63581:function(t,e){"use strict";var r,n;void 0===(n="function"==typeof(r=function(){function t(){return!0}function e(){return!1}function r(){}return function n(){var i=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t&&null!==t&&t.constructor===Object}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],s={name:"any",test:t},o=[],a=[],u={types:i,conversions:a,ignore:o};function l(t){var e=U(u.types,(function(e){return e.name===t}));if(e)return e;if("any"===t)return s;var r=U(u.types,(function(e){return e.name.toLowerCase()===t.toLowerCase()}));throw new TypeError('Unknown type "'+t+'"'+(r?'. Did you mean "'+r.name+'"?':""))}function c(t){return t===s?999:u.types.indexOf(t)}function p(t){var e=U(u.types,(function(e){return e.test(t)}));if(e)return e.name;throw new TypeError("Value has unknown type. Value: "+t)}function h(t){return t.map((function(t){var e=t.types.map(x);return(t.restParam?"...":"")+e.join("|")})).join(",")}function f(t,e){var r=0===t.indexOf("..."),n=(r?t.length>3?t.slice(3):"any":t).split("|").map(I).filter(P).filter(O),i=function(t,e){var r={};return t.forEach((function(t){-1!==e.indexOf(t.from)||-1===e.indexOf(t.to)||r[t.from]||(r[t.from]=t)})),Object.keys(r).map((function(t){return r[t]}))}(e,n),s=n.map((function(t){var e=l(t);return{name:t,typeIndex:c(e),test:e.test,conversion:null,conversionIndex:-1}})),o=i.map((function(t){var r=l(t.from);return{name:t.from,typeIndex:c(r),test:r.test,conversion:t,conversionIndex:e.indexOf(t)}}));return{types:s.concat(o),restParam:r}}function d(t){var e=D(t);return!!e&&e.restParam}function m(t){return t.types.some((function(t){return null!=t.conversion}))}function g(e){if(e&&0!==e.types.length){if(1===e.types.length)return l(e.types[0].name).test;if(2===e.types.length){var r=l(e.types[0].name).test,n=l(e.types[1].name).test;return function(t){return r(t)||n(t)}}var i=e.types.map((function(t){return l(t.name).test}));return function(t){for(var e=0;e<i.length;e++)if(i[e](t))return!0;return!1}}return t}function y(t){var e,r,n,i;if(d(t)){var s=(e=(i=t,i.slice(0,i.length-1)).map(g)).length,o=g(D(t));return function(t){for(var r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return function(t){for(var e=s;e<t.length;e++)if(!o(t[e]))return!1;return!0}(t)&&t.length>=s+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(r=g(t[0]),function(t){return r(t[0])&&1===t.length}):2===t.length?(r=g(t[0]),n=g(t[1]),function(t){return r(t[0])&&n(t[1])&&2===t.length}):(e=t.map(g),function(t){for(var r=0;r<e.length;r++)if(!e[r](t[r]))return!1;return t.length===e.length})}function v(t,e){return e<t.params.length?t.params[e]:d(t.params)?D(t.params):null}function b(t,e,r){var n=v(t,e);return(n?r?n.types.filter(_):n.types:[]).map(x)}function x(t){return t.name}function _(t){return null===t.conversion||void 0===t.conversion}function w(t,e){var r=function(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!0;return Object.keys(e)}($(t,(function(t){return b(t,e,!1)})));return-1!==r.indexOf("any")?["any"]:r}function E(t,e,r){var n,i,s,o=t||"unnamed",a=r;for(s=0;s<e.length;s++){var u=a.filter((function(t){var r=g(v(t,s));return(s<t.params.length||d(t.params))&&r(e[s])}));if(0===u.length){if((i=w(a,s)).length>0){var l=p(e[s]);return(n=new TypeError("Unexpected type of argument in function "+o+" (expected: "+i.join(" or ")+", actual: "+l+", index: "+s+")")).data={category:"wrongType",fn:o,index:s,actual:l,expected:i},n}}else a=u}var c=a.map((function(t){return d(t.params)?1/0:t.params.length}));if(e.length<Math.min.apply(null,c))return i=w(a,s),(n=new TypeError("Too few arguments in function "+o+" (expected: "+i.join(" or ")+", index: "+e.length+")")).data={category:"tooFewArgs",fn:o,index:e.length,expected:i},n;var h=Math.max.apply(null,c);return e.length>h?((n=new TypeError("Too many arguments in function "+o+" (expected: "+h+", actual: "+e.length+")")).data={category:"tooManyArgs",fn:o,index:e.length,expectedLength:h},n):((n=new TypeError('Arguments of type "'+e.join(", ")+'" do not match any of the defined signatures of function '+o+".")).data={category:"mismatch",actual:e.map(p)},n)}function S(t){for(var e=999,r=0;r<t.types.length;r++)_(t.types[r])&&(e=Math.min(e,t.types[r].typeIndex));return e}function A(t){for(var e=999,r=0;r<t.types.length;r++)_(t.types[r])||(e=Math.min(e,t.types[r].conversionIndex));return e}function N(t,e){var r;return 0!=(r=t.restParam-e.restParam)||0!=(r=m(t)-m(e))||0!=(r=S(t)-S(e))?r:A(t)-A(e)}function M(t,e){var r,n,i=Math.min(t.params.length,e.params.length);if(0!=(n=t.params.some(m)-e.params.some(m)))return n;for(r=0;r<i;r++)if(0!=(n=m(t.params[r])-m(e.params[r])))return n;for(r=0;r<i;r++)if(0!==(n=N(t.params[r],e.params[r])))return n;return t.params.length-e.params.length}function k(t){var e,r,n,i,s=[],o=[];switch(t.types.forEach((function(t){t.conversion&&(s.push(l(t.conversion.from).test),o.push(t.conversion.convert))})),o.length){case 0:return function(t){return t};case 1:return e=s[0],n=o[0],function(t){return e(t)?n(t):t};case 2:return e=s[0],r=s[1],n=o[0],i=o[1],function(t){return e(t)?n(t):r(t)?i(t):t};default:return function(t){for(var e=0;e<o.length;e++)if(s[e](t))return o[e](t);return t}}}function C(t,e){return function t(r,n,i){if(n<r.length){var s,o=r[n],a=e?o.types.filter(_):o.types;if(o.restParam){var u=a.filter(_);s=u.length<a.length?[u,a]:[a]}else s=a.map((function(t){return[t]}));return $(s,(function(e){return t(r,n+1,i.concat([e]))}))}return[i.map((function(t,e){return{types:t,restParam:e===r.length-1&&d(r)}}))]}(t,0,[])}function T(t,n){if(0===Object.keys(n).length)throw new SyntaxError("No signatures provided");var i=[];Object.keys(n).map((function(t){return function(t,e,r){var n=[];return""!==t.trim()&&(n=t.split(",").map(I).map((function(t,e,n){var i=f(t,r);if(i.restParam&&e!==n.length-1)throw new SyntaxError('Unexpected rest parameter "'+t+'": only allowed for the last parameter');return i}))),n.some(L)?null:{params:n,fn:e}}(t,n[t],u.conversions)})).filter(R).forEach((function(t){var e=U(i,(function(e){return function(t,e){for(var r=Math.max(t.params.length,e.params.length),n=0;n<r;n++)if(!B(b(t,n,!0),b(e,n,!0)))return!1;var i=t.params.length,s=e.params.length,o=d(t.params),a=d(e.params);return o?a?i===s:s>=i:a?i>=s:i===s}(e,t)}));if(e)throw new TypeError('Conflicting signatures "'+h(e.params)+'" and "'+h(t.params)+'".');i.push(t)}));var s=$(i,(function(t){return(t?C(t.params,!1):[]).map((function(e){return{params:e,fn:t.fn}}))})).filter(R);s.sort(M);var o=s[0]&&s[0].params.length<=2&&!d(s[0].params),a=s[1]&&s[1].params.length<=2&&!d(s[1].params),l=s[2]&&s[2].params.length<=2&&!d(s[2].params),c=s[3]&&s[3].params.length<=2&&!d(s[3].params),p=s[4]&&s[4].params.length<=2&&!d(s[4].params),v=s[5]&&s[5].params.length<=2&&!d(s[5].params),x=o&&a&&l&&c&&p&&v,_=s.map((function(t){return y(t.params)})),w=o?g(s[0].params[0]):e,S=a?g(s[1].params[0]):e,A=l?g(s[2].params[0]):e,N=c?g(s[3].params[0]):e,T=p?g(s[4].params[0]):e,O=v?g(s[5].params[0]):e,P=o?g(s[0].params[1]):e,D=a?g(s[1].params[1]):e,z=l?g(s[2].params[1]):e,F=c?g(s[3].params[1]):e,G=p?g(s[4].params[1]):e,V=v?g(s[5].params[1]):e,j=s.map((function(t){return function(t,e){var r=e;if(t.some(m)){var n=d(t),i=t.map(k);r=function(){for(var t=[],r=n?arguments.length-1:arguments.length,s=0;s<r;s++)t[s]=i[s](arguments[s]);return n&&(t[r]=arguments[r].map(i[r])),e.apply(this,t)}}var s=r;if(d(t)){var o=t.length-1;s=function(){return r.apply(this,q(arguments,0,o).concat([q(arguments,o)]))}}return s}(t.params,t.fn)})),H=o?j[0]:r,W=a?j[1]:r,Y=l?j[2]:r,X=c?j[3]:r,Z=p?j[4]:r,K=v?j[5]:r,J=o?s[0].params.length:-1,Q=a?s[1].params.length:-1,tt=l?s[2].params.length:-1,et=c?s[3].params.length:-1,rt=p?s[4].params.length:-1,nt=v?s[5].params.length:-1,it=x?6:0,st=s.length,ot=function(){for(var e=it;e<st;e++)if(_[e](arguments))return j[e].apply(this,arguments);throw E(t,arguments,s)},at=function t(e,r){return arguments.length===J&&w(e)&&P(r)?H.apply(t,arguments):arguments.length===Q&&S(e)&&D(r)?W.apply(t,arguments):arguments.length===tt&&A(e)&&z(r)?Y.apply(t,arguments):arguments.length===et&&N(e)&&F(r)?X.apply(t,arguments):arguments.length===rt&&T(e)&&G(r)?Z.apply(t,arguments):arguments.length===nt&&O(e)&&V(r)?K.apply(t,arguments):ot.apply(t,arguments)};try{Object.defineProperty(at,"name",{value:t})}catch(t){}return at.signatures=function(t){var e={};return t.forEach((function(t){t.params.some(m)||C(t.params,!0).forEach((function(r){e[h(r)]=t.fn}))})),e}(s),at}function O(t){return-1===u.ignore.indexOf(t)}function I(t){return t.trim()}function P(t){return!!t}function R(t){return null!==t}function L(t){return 0===t.types.length}function D(t){return t[t.length-1]}function q(t,e,r){return Array.prototype.slice.call(t,e,r)}function B(t,e){for(var r=0;r<t.length;r++)if(n=e,i=t[r],-1!==n.indexOf(i))return!0;var n,i;return!1}function U(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return t[r]}function $(t,e){return Array.prototype.concat.apply([],t.map(e))}function z(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(("object"==typeof n.signatures||"string"==typeof n.signature)&&""!==n.name)if(""===e)e=n.name;else if(e!==n.name){var i=new Error("Function names do not match (expected: "+e+", actual: "+n.name+")");throw i.data={actual:n.name,expected:e},i}}return e}function F(t){var e,r={};function n(t,n){if(r.hasOwnProperty(t)&&n!==r[t])throw(e=new Error('Signature "'+t+'" is defined twice')).data={signature:t},e}for(var i=0;i<t.length;i++){var s=t[i];if("object"==typeof s.signatures)for(var o in s.signatures)s.signatures.hasOwnProperty(o)&&(n(o,s.signatures[o]),r[o]=s.signatures[o]);else{if("string"!=typeof s.signature)throw(e=new TypeError("Function is no typed-function (index: "+i+")")).data={index:i},e;n(s.signature,s),r[s.signature]=s}}return r}return(u=T("typed",{"string, Object":T,Object:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(t[r]);return T(z(e),t)},"...Function":function(t){return T(z(t),F(t))},"string, ...Function":function(t,e){return T(t,F(e))}})).create=n,u.types=i,u.conversions=a,u.ignore=o,u.convert=function(t,e){var r=p(t);if(e===r)return t;for(var n=0;n<u.conversions.length;n++){var i=u.conversions[n];if(i.from===r&&i.to===e)return i.convert(t)}throw new Error("Cannot convert from "+r+" to "+e)},u.find=function(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var r;if("string"==typeof e){r=e.split(",");for(var n=0;n<r.length;n++)r[n]=r[n].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");r=e}var i=r.join(","),s=t.signatures[i];if(s)return s;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+r.join(", ")+"))")},u.addType=function(t,e){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");if(!1!==e)for(var r=0;r<u.types.length;r++)if("Object"===u.types[r].name)return void u.types.splice(r,0,t);u.types.push(t)},u.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");u.conversions.push(t)},u}()})?r.apply(e,[]):r)||(t.exports=n)},21440:()=>{}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var __webpack_exports__={};(()=>{"use strict";const t="http://www.w3.org/2000/svg",e={alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",pi:"π",rho:"ρ",sigma:"σ",tau:"τ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",Gamma:"Γ",Delta:"Δ",Xi:"Ξ",Pi:"Π",Sigma:"Σ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω"},r=Math.PI/180,n=180/Math.PI,i=Math.cos(30*r),s=.5,o=function(t,e,r,n,i,s){this.bold=t,this.italic=e,this.underline=r,this.couleur=n,this.fontface=i,this.taille=s},a={};Object.entries({alpha2:"α",plus:"+",moins:"-",fois:"×",divise:"÷",petitf:"f",petitebarre:"–",grandebarre:"—",prime:"'",seconde:'"',puceronde:"•",grandC:"ℂ",euler:"ℂ",petitg:"ℊ",petith:"ℏ",Ironde:"ℑ",Lronde:"ℒ",lronde:"ℓ",grandN:"ℕ",Pronde:"℘",grandQ:"ℚ",Rronde:"ℜ",grandR:"ℝ",grandZ:"ℤ",Eronde:"ℰ",Fronde:"ℱ",Nronde:"ℵ",flecheG:"←",flecheH:"↑",flecheD:"→",flecheB:"↓",flecheDG:"↔",flecheGD:"↔",flecheHB:"↕",flecheBH:"↕",croissant:"↗",decroissant:"↘",alaligneadroite:"↳",alaligneagauche:"↵",doubleflecheG:"⇐",doubleflecheD:"⇒",doubleflecheDG:"⇔",doubleflecheGD:"⇔",flecheGbarre:"⇤",flecheDbarre:"⇥",flecheGcreuse:"⇦",flecheHcreuse:"⇧",flecheDcreuse:"⇨",flecheBcreuse:"⇩",qqsoit:"∀",pourtout:"∀",quelquesoit:"∀",complement:"∁",differentielpartiel:"∂",ilexiste:"∃",ilnexistepas:"∄",vide:"∅",nabla:"∇",appartienta:"∈",nappartientpasa:"∉",contient:"∋",petitcontient:"∍",grandproduit:"∏",grandcoproduit:"∐",grandesomme:"∑",petitebarrefine:"−",moinsouplus:"∓",antislash:"\\",asterisque:"∗",racine:"√",proportionnela:"∝",infini:"∞",angle:"∡",anglespherique:"∢",nedivisepas:"∤",parallelea:"//",nestpasparallelea:"∦",etlogique:"∧",oulogique:"∨",inter:"∩",intersection:"∩",union:"∪",integrale:"∫",doubleintegrale:"∬",tripleintegrale:"∭",integralecurviligne:"∮",integralesurfacique:"∯",integralevolumique:"∰",egaleasymptotiquea:"≃",environdroit:"≃",environegala:"≅",environ:"≈",egalpardefinition:"≝",differentde:"≠",identiquea:"≡",inferieura:"≤",superieura:"≥",inclusdans:"⊂",nestpasinclusdans:"⊄",necontientpas:"⊅",sommedirecte:"⊕",differencedirecte:"⊖",produittensoriel:"⊗",divisiondirecte:"⊘",produitdirect:"⊙",top:"⊤",perpendiculairea:"⊥",antecedentde:"⊶",imagede:"⊷",angledroitarc:"⊾",point:"⋅",pv:";"}).forEach((([t,e])=>{a[t.toLowerCase()]=e}));const u=t=>Math.abs(t)<1e-9;function l(t){let e=t-360*Math.floor((t+180)/360);return-180===e&&(e=180),e}const c=t=>["compas","compasLeve","crayon","equerre","rapporteur","regle","requerre"].includes(t);function p(t){let e,r,n,i=!1;if(0===t.indexOf("<font"))r="</font>",i=!0;else{if(n=t.indexOf(">"),-1===n)return t.length;e=t.substring(0,n+1),r=e.substring(0,1)+"/"+e.substring(1)}const s=t.indexOf(r);if(-1===s){if(i){const e=t.indexOf("<font",5);if(-1!==e)return e}return-1}return s+r.length}function h(t){const e=t.trim(),r={},n=e.indexOf(","),i=e.indexOf(")");return r.erreur=-1===n||-1===i,r.erreur?(r.texte="",r):(r.operande=e.substring(3,n),r.exposant=e.substring(n+1,i),r.texte=e.substring(i+1),r)}function f(t,e){let r,n,i=1;for(r=e+1;r<t.length&&(n=t.charAt(r),"("===n?i++:")"===n&&i--,0!==i);)r++;return 0===i?r:-1}function d(t,e,r,n,i){const s=(n-i)/(e-r);return s*t+(n-s*e)}function m(t){return(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<B>/g,"<b>")).replace(/<\/B>/g,"</b>")).replace(/<I>/g,"<i>")).replace(/<\/I>/g,"</i>")).replace(/<U>/g,"<u>")).replace(/<\/U>/g,"</u>")).replace(/£lt£i£gt£/gi,"<i>")).replace(/£i£/gi,"<i>")).replace(/£lt£\/i£gt£/gi,"</i>")).replace(/£\/i£/gi,"</i>")).replace(/£lt£b£gt£/gi,"<b>")).replace(/£b£/gi,"<b>")).replace(/£lt£\/b£gt£/gi,"</b>")).replace(/£\/b£/gi,"</b>")).replace(/£lt£u£gt£/gi,"<u>")).replace(/£u£/gi,"<u>")).replace(/£lt£\/u£gt£/gi,"</u>")).replace(/£\/u£/gi,"</u>")).replace(/£lt£br£gt£/gi,"<br>")).replace(/£lt£br\/£gt£/gi,"<br>")).replace(/£br£/gi,"<br>")).replace(/£br\/£/gi,"<br>")).replace(/£lt£font/gi,"<font")).replace(/£lt£\/font£gt£/gi,"</font>")).replace(/£lt£bold£gt£/gi,"<b>")).replace(/£lt£\/bold£gt£/gi,"</b>")).replace(/£lt£/gi,"<")).replace(/£gt£/gi,">")).replace(/£inferieurstrict£/gi,"<")).replace(/£superieurstrict£/gi,">")).replace(/£guillemet£/gi,'"')}function g(t){if(!t.includes("£"))return t;const e=t.split("£").map(((t,e)=>{if(e%2){const e=t.toLowerCase();return a[e]||`£${t}£`}return t})).join("");return(t.length-t.replace(/£/g,"").length)%2?(console.warn(`Il y a un nombre impair de £ dans cette chaîne : ${t}`),e.substr(0,e.length-1)):e}function y(t,e){let r,n,i;for(i=1,r=e+1;r<t.length&&(n=t.charAt(r),"{"===n?i++:"}"===n&&i--,0!==i);)r++;return 0===i?r:-1}function v(t){return-1!==t.indexOf("\\frac")||-1!==t.indexOf("\\sqrt")||-1!==t.indexOf("}^{")||-1!==t.indexOf("}_{")||-1!==t.indexOf("\\widehat{")||-1!==t.indexOf("\\left[")||-1!==t.indexOf("\\left(")||-1!==t.indexOf("\\left|")||-1!==t.indexOf("\\left\\|")||-1!==t.indexOf("\\overrightarrow{")||-1!==t.indexOf("\\text{")}function b(t){const e={noir:"black",rouge:"red",vert:"green",bleu:"blue",blanc:"white",gris:"grey",darkorange:"maroon"};if("0"===t)return"black";if(e[t])return e[t];const r=t=>t.length<7?"#"+"0".repeat(6-t.length)+t:t.substr(-6);return/^#/.test(t)?7===t.length?t:4===t.length?`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`:(console.error(Error(`couleur ${t} invalide, on va tronquer ou compléter avec des 0`)),r(t.substring(1))):/^0x/.test(t)?r(t.substring(2)):/^[0-9]/.test(t)?r(parseFloat(t).toString(16)):t}const x=(t,e)=>function(t,e){const r=t.norme(),n=e.norme();return!(!u(r)&&!u(n))||u((t.x*e.y-t.y*e.x)/r/n)}(t,e)&&t.x*e.x+t.y*e.y>=0;function _(t,e,r){let n,i,s=0,o=e;for(;o<t.length;){if(n=t.charAt(o),"("===n){if(i=f(t,o),-1===i)return-1;o=i}else if(","===n&&s++,s===r)return o;o++}return-1}function w(t,e,r){let n;return e*t<0?n=-Math.floor(-t/r)*r:Math.ceil(Math.log(Math.abs(t))/Math.LN10)!==Math.ceil(Math.log(Math.abs(e))/Math.LN10)?(n=t<0?-Math.pow(10,Math.floor(Math.log(Math.abs(t))/Math.LN10)):Math.pow(10,Math.ceil(Math.log(Math.abs(t))/Math.LN10)),n-=Math.floor((n-t)/r)*r):(n=function(t,e){const r=Math.pow(10,e);return Math.round(t/r)*r}(t,Math.floor(Math.log(r)/Math.LN10)),n<t&&(n+=r)),n}function E(e,r,n,i,s){if(""===e)return;let a,u,l,c,h,f,d,m,g;const y=e.search(/<b>|<i>|<u>|<font/),v=document.createElementNS(t,"tspan");if(v.setAttribute("pointer-events","none"),-1===y||y>0){a="",r.couleur&&(a+="fill:"+r.couleur+";"),r.bold&&(a+="font-weight:bold;"),r.italic&&(a+="font-style:italic;"),r.underline&&(a+="text-decoration:underline;"),""!==r.fontface?a+="font-family:"+r.fontface+";":a+='font-family: "Times New Roman", Times, serif;',a+="font-size:"+r.taille+"px;",v.setAttribute("style",a),i&&(v.setAttribute("x",0),i=!1),v.setAttribute("y",s);const t=-1===y?e:e.substring(0,y);v.appendChild(document.createTextNode(t)),n.appendChild(v),y>0&&E(e.substring(y),r,n,i,s)}else 0===e.indexOf("<b>")?(g=new o(!0,r.italic,r.underline,r.couleur,r.fontface),u=p(e),E(-1===u?e.substring(3):e.substring(3,u-4),g,n,i,s)):0===e.indexOf("<i>")?(g=new o(r.bold,!0,r.underline,r.couleur,r.fontface),u=p(e),E(-1===u?e.substring(3):e.substring(3,u-4),g,n,i,s)):0===e.indexOf("<u>")?(g=new o(r.bold,r.italic,!0,r.couleur,r.fontface),u=p(e),E(-1===u?e.substring(3):e.substring(3,u-4),g,n,i,s)):0===e.indexOf("<font")&&(u=p(e),-1===u&&(u=e.length),l=e.indexOf('face="'),-1!==l?(c=e.indexOf('"',l+6),h=-1!==c?e.substring(l+6,c):""):h="",f="",l=e.indexOf('couleur="'),-1!==l?(c=e.indexOf('"',l+9),-1!==c&&(f=b(e.substring(l+9,c)))):(l=e.indexOf('color="'),-1!==l&&(c=e.indexOf('"',l+7),-1!==c&&(f=b(e.substring(l+7,c))))),l=e.indexOf('size="'),-1!==l&&(c=e.indexOf('"',l+6),d=-1!==c?e.substring(l+6,c):r.taille),g=new o(r.bold,r.italic,r.underline,f,h,d),m=e.indexOf(">"),/<\/font>/i.test(e)?E(e.substring(m+1,u-7),g,n,i,s):E(e.substring(m+1),g,n,i,s))}function S(t){if(["a","c","d","f","g","n","p","r","s","u","v"].some((e=>t.includes(`£${e}(`))))return!0;let e,r,n,i=t;for(;-1!==(e=i.search(/£e\(|£i\(/g));){if(r=f(i,e+3),-1===r&&(r=i.length),n=i.substring(e,r),-1!==n.search(/£e\(|£i\(£lt£font/g))return!0;if(r===i.length)return!1;i=n.substring(r+1)}for(i=t;-1!==(e=i.search(/£lt£font/g));){if(r=p(i.substring(e)),-1===r?r=i.length:r+=e,n=i.substring(e,r),-1!==n.search(/£e\(|£i\(/g))return!0;if(r===i.length)return!1;i=n.substring(r+1)}return!1}function A(t,e){let r,n,i,s,o,a,u,l,c,h,d,m,g;const x=t;if(""===x)return"";for(;-1!==(r=x.indexOf("<font"));)return l=null,u=x.substring(r),n=p(u),s=u.indexOf('couleur="'),-1!==s?(o=u.indexOf('"',s+9),-1!==o&&(l=b(u.substring(s+9,o)))):(s=u.indexOf('color="'),-1!==s&&(o=u.indexOf('"',s+7),-1!==o&&(l=b(u.substring(s+7,o))))),null!=l?(a=r+u.indexOf(">")+1,-1===n?A(x.substring(0,r)+"\\textcolor{"+l+"}{"+x.substring(a)+"}",e):(n+=r,A(x.substring(0,r)+"\\textcolor{"+l+"}{"+x.substring(a,n-7)+"}"+x.substring(n),e))):(a=r+u.indexOf(">")+1,-1===n?A(x.substring(0,r)+x.substring(a),e):(n+=r,A(x.substring(0,r)+x.substring(a,n-7)+x.substring(n),e)));for(;-1!==(r=x.indexOf("£u("));)return n=f(x,r+2),-1===n?x:A(x.substring(0,r),e)+"\\unicode{x"+x.substring(r+3,n)+"}"+A(x.substring(n+1),e);for(;-1!==(r=x.indexOf("£f("));)return i=_(x,r+3,1),n=f(x,r+2),-1===i||-1===n||i>n?x:A(A(x.substring(0,r),e)+"\\displaystyle{\\frac{"+A(x.substring(r+3,i),!1)+"}{"+A(x.substring(i+1,n),!1)+"}}"+A(x.substring(n+1),e),e);for(;-1!==(r=x.indexOf("£r("));)return n=f(x,r+2),-1===n?x:A(A(x.substring(0,r),e)+"\\sqrt{"+A(x.substring(r+3,n),!1)+"}"+A(x.substring(n+1),e),e);for(;-1!==(r=x.indexOf("£a("));)return n=f(x,r+2),-1===n?x:A(A(x.substring(0,r),e)+"\\widehat{"+A(x.substring(r+3,n),!0)+"}"+A(x.substring(n+1),e),e);for(;-1!==(r=x.indexOf("£g("));)return h=_(x,r+3,1),d=_(x,r+3,2),m=_(x,r+3,3),n=f(x,r+2),-1===n?x:A(A(x.substring(0,r),e)+"\\int_{"+A(x.substring(d+1,m),!1)+"}^{"+A(x.substring(m+1,n),!1)+"}"+A(x.substring(r+3,h),!1)+" d"+A(x.substring(h+1,d),!1)+A(x.substring(n+1),e),e);for(;-1!==(r=x.indexOf("£c("));)return n=f(x,r+2),-1===n?x:A(x.substring(0,r),e)+"\\left["+A(x.substring(r+3,n),e)+"\\right]"+A(x.substring(n+1),e);for(;-1!==(r=x.indexOf("£p("));)return n=f(x,r+2),-1===n?x:A(A(x.substring(0,r),e)+"\\left("+A(x.substring(r+3,n),e)+"\\right)"+A(x.substring(n+1),e));for(;-1!==(r=x.indexOf("£d("));)return n=f(x,r+2),-1===n?x:A(A(x.substring(0,r),e)+"\\left|"+A(x.substring(r+3,n),!1)+"\\right|"+A(x.substring(n+1),e),e);for(;-1!==(r=x.indexOf("£n("));)return n=f(x,r+2),-1===n?x:A(A(x.substring(0,r),e)+"\\left\\|"+A(x.substring(r+3,n),!1)+"\\right\\|"+A(x.substring(n+1),e));for(;-1!==(r=x.indexOf("£i("));)return i=_(x,r+3,1),n=f(x,r+2),-1===i||-1===n||i>n?x:A(A(x.substring(0,r),e)+"{"+A(x.substring(r+3,i),!1)+"}_{"+A(x.substring(i+1,n),!1)+"}"+A(x.substring(n+1),e),e);for(;-1!==(r=x.indexOf("£e("));)return i=_(x,r+3,1),n=f(x,r+2),-1===i||-1===n||i>n?x:A(A(x.substring(0,r),e)+"{"+A(x.substring(r+3,i),!1)+"}^{"+A(x.substring(i+1,n),!1)+"}"+A(x.substring(n+1),e));for(;-1!==(r=x.indexOf("£v("));)return n=f(x,r+2),-1===n?x:A(A(x.substring(0,r),e)+"\\overrightarrow{"+A(x.substring(r+3,n),!1)+"}"+A(x.substring(n+1),e),e);for(;-1!==(r=x.indexOf("<u>"));)return n=p(x.substring(r)),-1===n?x:(n+=r,A(x.substring(0,r),e)+"\\underline{"+A(x.substring(r+3,n-4),!0)+"}"+A(x.substring(n),e));for(;-1!==(r=x.indexOf("<i>"));)return n=p(x.substring(r)),-1===n?A(x.substring(0,r),e)+"\\textit{"+A(x.substring(r+3),!1)+"}":(n+=r,A(x.substring(0,r),e)+"\\textit{"+A(x.substring(r+3,n-4),!1)+"}"+A(x.substring(n),e));for(;-1!==(r=x.indexOf("<b>"));)return n=p(x.substring(r)),-1===n?A(x.substring(0,r),e)+"\\textbf{"+A(x.substring(r+3),!1)+"}":(n+=r,A(x.substring(0,r),e)+"\\textbf{"+A(x.substring(r+3,n-4),!1)+"}"+A(x.substring(n),e));if(e){if(g=x.charAt(0),")"===g||","===g||"}"===g)return g+A(x.substring(1),e);if(v(x))return x;if(r=x.indexOf("\\textcolor{"),-1!==r){for(c="",u=x;-1!==(r=u.indexOf("\\textcolor{"));)s=u.indexOf("}{"),n=y(u,s+1),-1===n?0===r?(s+2!==u.length?c+=u.substring(0,s+2)+"\\text{"+u.substring(s+2)+"}":c+=u,u=""):(s+2!==u.length?c+="\\text{"+u.substring(0,r)+"}"+u.substring(r,s+2)+"\\text{"+u.substring(s+2)+"}":c+="\\text{"+u.substring(0,r)+"}"+u.substring(r,s+2),u=""):0===r?(c+=u.substring(0,n+1),u=n<u.length-1?u.substring(n+1):""):(c+="\\text{"+u.substring(0,r)+"}"+u.substring(r,s+2)+"\\text{"+u.substring(s+2,n+1)+"}",u=n<u.length-1?u.substring(n+1):"");return""===u?c:c+"\\text{"+u+"}"}{let t=0,e=0;for(;" "===x.charAt(e);)t++,e++;return"~".repeat(t)+"\\text{"+x.substring(e)+"}"}}return x}function N(t,e){let r,n,i,s,o,a,u,l,c,h,d=t;if(""===d)return"";for(;-1!==(r=d.indexOf("<font"));)return l=null,u=d.substring(r),n=p(u),s=u.indexOf('couleur="'),-1!==s?(o=u.indexOf('"',s+9),-1!==o&&(l=b(u.substring(s+9,o)))):(s=u.indexOf('color="'),-1!==s&&(o=u.indexOf('"',s+7),-1!==o&&(l=b(u.substring(s+7,o))))),null!==l?(a=r+u.indexOf(">")+1,-1===n?N(d.substring(0,r)+"\\textcolor{"+l+"}{"+d.substring(a)+"}",e):(n+=r,N(d.substring(0,r)+"\\textcolor{"+l+"}{"+d.substring(a,n-7)+"}"+d.substring(n),e))):(a=r+u.indexOf(">")+1,-1===n?N(d.substring(0,r)+d.substring(a),e):(n+=r,N(d.substring(0,r)+d.substring(a,n-7)+d.substring(n),e)));for(;-1!==(r=d.indexOf("£u("));)return n=f(d,r+2),-1===n?d:N(d.substring(0,r),e)+"\\unicode{x"+d.substring(r+3,n)+"}"+N(d.substring(n+1),e);for(;-1!==(r=d.indexOf("£r("));)return n=f(d,r+2),-1===n?d:N(N(d.substring(0,r),e)+"\\sqrt{"+N(d.substring(r+3,n),!1)+"}"+N(d.substring(n+1),e),e);for(;-1!==(r=d.indexOf("£d("));)return n=f(d,r+2),-1===n?d:N(N(d.substring(0,r),e)+"\\left|"+N(d.substring(r+3,n),!1)+"\\right|"+N(d.substring(n+1),e),e);for(;-1!==(r=d.indexOf("£n("));)return n=f(d,r+2),-1===n?d:N(N(d.substring(0,r),e)+"\\left\\|"+N(d.substring(r+3,n),!1)+"\\right\\|"+N(d.substring(n+1),e));for(;-1!==(r=d.indexOf("£i("));)return i=_(d,r+3,1),n=f(d,r+2),-1===i||-1===n||i>n?d:N(N(d.substring(0,r),e)+"{"+N(d.substring(r+3,i),!0)+"}_{"+N(d.substring(i+1,n),!1)+"}"+N(d.substring(n+1),e),e);for(;-1!==(r=d.indexOf("£e("));)return i=_(d,r+3,1),n=f(d,r+2),-1===i||-1===n||i>n?d:N(N(d.substring(0,r),e)+"{"+N(d.substring(r+3,i),!0)+"}^{"+N(d.substring(i+1,n),!1)+"}"+N(d.substring(n+1),e));for(;-1!==(r=d.indexOf("£v("));)return n=f(d,r+2),-1===n?d:N(N(d.substring(0,r),e)+"\\overrightarrow{"+N(d.substring(r+3,n),!1)+"}"+N(d.substring(n+1),e),e);for(;-1!==(r=d.indexOf("<u>"));)return n=p(d.substring(r)),-1===n?d:(n+=r,N(d.substring(0,r),e)+"\\underline{"+N(d.substring(r+3,n-4),!0)+"}"+N(d.substring(n),e));for(;-1!==(r=d.indexOf("<i>"));)return n=p(d.substring(r)),-1===n?N(d.substring(0,r),e)+"\\textit{"+N(d.substring(r+3),!1)+"}":(n+=r,N(d.substring(0,r),e)+"\\textit{"+N(d.substring(r+3,n-4),!1)+"}"+N(d.substring(n),e));for(;-1!==(r=d.indexOf("<b>"));)return n=p(d.substring(r)),-1===n?N(d.substring(0,r),e)+"\\textbf{"+N(d.substring(r+3),!1)+"}":(n+=r,N(d.substring(0,r),e)+"\\textbf{"+N(d.substring(r+3,n-4),!1)+"}"+N(d.substring(n),e));if(e){if(v(d))return d;if(r=d.indexOf("\\textcolor{"),-1!==r){for(c="",u=d;-1!==(r=u.indexOf("\\textcolor{"));)s=u.indexOf("}{"),n=y(u,s+1),-1===n?0===r?(s+2!==u.length?c+=u.substring(0,s+2)+"\\text{"+u.substring(s+2)+"}":c+=u,u=""):(s+2!==u.length?c+="\\text{"+u.substring(0,r)+"}"+u.substring(r,s+2)+"\\text{"+u.substring(s+2)+"}":c+="\\text{"+u.substring(0,r)+"}"+u.substring(r,s+2),u=""):0===r?(c+=u.substring(0,n+1),u=n<u.length-1?u.substring(n+1):""):(c+="\\text{"+u.substring(0,r)+"}"+u.substring(r,s+2)+"\\text{"+u.substring(s+2,n+1)+"}",u=n<u.length-1?u.substring(n+1):"");return""===u?c:c+"\\text{"+u+"}"}if(h=d.charAt(0),")"===h||","===h||"}"===h)return d;{let t="";for(;0===d.indexOf(" ");)t+="~",d=d.substring(1);return t+"\\text{"+d+"}"}}return d}function M(t,e={}){if(!t||"object"!=typeof t)throw Error("objet invalide");const r=e.defaut||20,n=e.min||5,i=e.max||199;if("number"!=typeof r||"number"!=typeof n||"number"!=typeof i)throw Error("options invalides");const s=Number(t.taille);return isNaN(s)?(console.error(Error(`taille invalide (${t.taille}) => ${r}`)),r):s<n?(console.error(Error(`taille trop petite (${t.taille} < ${n}) => ${r}`)),r):s>i?(console.error(Error(`taille trop grande (${t.taille} > ${i}) => ${r}`)),r):s}const k=C;function C(t,e,r,n){arguments.length>2?(this.x=r-t,this.y=n-e):(this.x=t,this.y=e)}C.prototype.presqueNul=function(){return u(this.x)&&u(this.y)},C.prototype.norme=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},C.prototype.vecteurColineaire=function(t){const e=this.norme();return new C(this.x/e*t,this.y/e*t)},C.prototype.tourne=function(t){const e=Math.cos(t*r),n=Math.sin(t*r);return new C(e*this.x-n*this.y,e*this.y+n*this.x)},C.prototype.angle=function(){let t;return 0===this.x&&0===this.y?0:(0===this.x?t=this.y>0?3*Math.PI/2:Math.PI/2:(t=this.x>=0?Math.atan(-this.y/this.x):Math.PI-Math.atan(this.y/this.x),t<0&&(t+=2*Math.PI)),t*n)};const T=O;function O(t){this.doc=t,this.x=200,this.y=400,this.angle=0,this.zoomfactor=1,this.visible=!1}O.prototype.montre=function(t){this.visible=t,this.g.setAttribute("visibility",t?"visible":"hidden")},O.prototype.updateg=function(){this.initialisePosition(),this.doc.svg.removeChild(this.g),this.doc.svg.appendChild(this.g)},O.prototype.translate=function(t,e){this.setPosition(t,e,this.angle,this.zoomfactor)},O.prototype.angleInit=function(){return 0},O.prototype.setPosition=function(t,e,r,n){let i;this.x=t,this.y=e,this.angle=r,arguments.length>=4?(i=n,this.zoomfactor=i):i=this.zoomfactor,this.g.setAttribute("transform","scale("+i+") translate("+String(t/i)+","+String(e/i)+") rotate("+r+")")},O.prototype.initialisePosition=function(){this.setPosition(200,400,this.angleInit(),1)},O.prototype.lanceAnimationTranslation=function(t,e,r){this.xfin=t,this.yfin=e,this.pix=Math.abs(r/2);const n=new k(this.x,this.y,t,e);if(this.dist=n.norme(),0===this.dist)return void this.doc.actionSuivante();this.vect=n.vecteurColineaire(this.pix);const i=this;this.timer=setInterval((function(){i.actionPourTranslation()}),25)},O.prototype.actionPourTranslation=function(){const t=this.x+this.vect.x,e=this.y+this.vect.y,r=new k(t,e,this.xfin,this.yfin).norme();r>this.dist||!this.doc.animationEnCours?(this.setPosition(this.xfin,this.yfin,this.angle),this===this.doc.compas&&null!=this.doc.compasLeve&&this.doc.compasLeve.visible&&this.doc.compasLeve.setPosition(this.xfin,this.yfin,this.angle),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=r,this.setPosition(t,e,this.angle),this===this.doc.compas&&null!=this.doc.compasLeve&&this.doc.compasLeve.visible&&this.doc.compasLeve.setPosition(t,e,this.angle))},O.prototype.lanceAnimationRotation=function(t,e){const r=l(this.angle);let n=l(t);Math.abs(n-r)>180&&(n>r?n-=360:n+=360),this.anglefin=n,this.angle=r,this.pasdeg=e/3,this.pasdeg*=n>=r?1:-1,this.distang=Math.abs(n-this.angle);const i=this;this.timer=setInterval((function(){i.actionPourRotation()}),25)},O.prototype.actionPourRotation=function(){const t=parseFloat(this.angle)+parseFloat(this.pasdeg),e=Math.abs(t-this.anglefin);e>this.distang||!this.doc.animationEnCours?(this.setPosition(this.x,this.y,this.anglefin),clearInterval(this.timer),this.doc.actionSuivante()):(this.distang=e,this.setPosition(this.x,this.y,t))},O.prototype.lanceAnimationZoom=function(t,e){this.zoomfin=t,this.vitesse=parseInt(e),this.pas=.05*this.vitesse*(this.zoomfin-this.zoomfactor),this.senspos=this.pas>=0;const r=this;this.timer=setInterval((function(){r.actionPourZoom()}),100)},O.prototype.actionPourZoom=function(){const t=this.zoomfactor+this.pas;this.doc.animationEnCours&&(this.senspos&&t<this.zoomfin||!this.senspos&&t>this.zoomfin)?this.setPosition(this.x,this.y,this.angle,t):(this.zoomfactor=this.zoomfin,this.positionne(),clearInterval(this.timer),this.doc.actionSuivante())},O.prototype.positionne=function(){this.setPosition(this.x,this.y,this.angle,this.zoomfactor)};const I=P;function P(t){T.call(this,t),this.ecart=0,this.bretourne=!1,this.leve=!1,this.lon=185,this.longpointe=18;const e=this.lon+this.longpointe;this.alp=Math.asin(this.ecart/(2*e))/Math.PI*180,this.decbh=30,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle,1),t.svg.appendChild(this.g)}P.prototype=new T,P.prototype.initialisePosition=function(){T.prototype.initialisePosition.call(this),this.ecart=0,this.positionne()},P.prototype.creeg=function(){let e,r,n,i;const s=this.lon,o=this.longpointe,a=document.createElementNS(t,"g");this.bg=document.createElementNS(t,"g"),e=document.createElementNS(t,"line"),e.setAttribute("x1",0),e.setAttribute("y1",0),e.setAttribute("x2",0),e.setAttribute("y2",-o),e.setAttribute("style","stroke: black; stroke-width:1.5;"),this.bg.appendChild(e),r=document.createElementNS(t,"path"),n="M0 "+String(-o)+"L 0 "+String(-o-s)+" "+String(-7)+" "+String(-o-s)+" "+String(-7)+" "+String(-o)+"Z",r.setAttribute("d",n),r.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bg.appendChild(r),i=document.createElementNS(t,"circle"),i.setAttribute("cx",-3.5),i.setAttribute("cy",-o-20),i.setAttribute("r",6),i.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bg.appendChild(i),i=document.createElementNS(t,"circle"),i.setAttribute("cx",-3.5),i.setAttribute("cy",-o-20),i.setAttribute("r",2),i.setAttribute("style","stroke:black;stroke-width:1; fill: silver; fill-opacity: 1"),this.bg.appendChild(i),a.appendChild(this.bg),this.bd=document.createElementNS(t,"g"),r=document.createElementNS(t,"path"),n="M 0 0 L0 "+String(-o)+" 3.5 "+String(-o-3.5)+" 3.5 "+String(-6.5)+"Z",r.setAttribute("style","stroke:black;stroke-width:0.75; fill: blck; fill-opacity: 1"),r.setAttribute("d",n),this.bd.appendChild(r),r=document.createElementNS(t,"path"),n="M0 "+String(-o)+"L 0 "+String(-o-s)+" 7 "+String(-o-s)+" 7 "+String(-o)+"Z",r.setAttribute("d",n),r.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bd.appendChild(r),r=document.createElementNS(t,"path"),n="M7 "+String(-o-20+4.5)+"A 4.5 3 -90 0 0 7 "+String(-o-20-4.5)+"Z",r.setAttribute("style","stroke:black;stroke-width:1; fill: silver; fill-opacity: 1"),r.setAttribute("d",n),this.bd.appendChild(r);const u="stroke: black; stroke-width:1;";e=document.createElementNS(t,"line"),e.setAttribute("x1",0),e.setAttribute("y1",-100),e.setAttribute("x2",7),e.setAttribute("y2",-93),e.setAttribute("style",u),this.bd.appendChild(e),e=document.createElementNS(t,"line"),e.setAttribute("x1",0),e.setAttribute("y1",-50),e.setAttribute("x2",7),e.setAttribute("y2",-50),e.setAttribute("style",u),this.bd.appendChild(e),e=document.createElementNS(t,"line"),e.setAttribute("x1",3.5),e.setAttribute("y1",-50),e.setAttribute("x2",3.5),e.setAttribute("y2",-73),e.setAttribute("style",u),this.bd.appendChild(e);const l=document.createElementNS(t,"rect");l.setAttribute("x",7),l.setAttribute("y",-68),l.setAttribute("width",4),l.setAttribute("height",12),l.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),this.bd.appendChild(l),a.appendChild(this.bd),this.haut=document.createElementNS(t,"g"),r=document.createElementNS(t,"path"),n="M 0 0 L3 0 12 "+String(-24)+" 12 "+String(-35)+"A"+String(15)+" "+String(6)+" -90 0 1 6 "+String(-50)+"L3 "+String(-70)+" "+String(-3)+" "+String(-70)+"L"+String(-6)+" "+String(-50)+"A"+String(15)+" "+String(6)+" 90 0 1 "+String(-12)+" "+String(-35)+" L "+String(-12)+" "+String(-24)+" "+String(-3)+" 0Z",r.setAttribute("d",n),r.setAttribute("style","stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1"),this.haut.appendChild(r),e=document.createElementNS(t,"line"),e.setAttribute("x1",6),e.setAttribute("y1",-50),e.setAttribute("x2",-6),e.setAttribute("y2",-50),e.setAttribute("style","stroke: black; stroke-width:1;"),this.haut.appendChild(e);const c=document.createElementNS(t,"text");c.setAttribute("pointer-events","none"),c.appendChild(document.createTextNode("Sésamath")),c.setAttribute("x",0),c.setAttribute("y",0),c.setAttribute("style","font-family: Arial;font-size: 5pt;fill: white"),c.setAttribute("transform","rotate(-90) translate(4,2.5)"),this.haut.appendChild(c),i=document.createElementNS(t,"circle"),i.setAttribute("cx",-6),i.setAttribute("cy",-this.decbh),i.setAttribute("r",3),i.setAttribute("style","stroke:black;stroke-width:1; fill: white; fill-opacity: 1"),this.haut.appendChild(i),i=document.createElementNS(t,"circle"),i.setAttribute("cx",6),i.setAttribute("cy",-this.decbh),i.setAttribute("r",3),i.setAttribute("style","stroke:black;stroke-width:1; fill: white; fill-opacity: 1"),this.haut.appendChild(i),a.appendChild(this.haut),this.g=a},P.prototype.setPosition=function(t,e,r,n){let i;arguments.length>=4?(i=n,this.zoomfactor=i):i=this.zoomfactor,this.x=t,this.y=e,this.angle=r;const s=this.lon+this.longpointe;let o=this.ecart/(2*s*i);if(o>1&&(o=1),this.alp=Math.asin(o)/Math.PI*180,isNaN(this.alp))console.error(Error("dans compas.setPosition on a alp qui est NaN")),this.doc.debug&&console.log(`avec x=${t}, y=${e}, angle=${r} et zoom=${i} on a d=${s} et ecart=${this.ecart} asin(${this.ecart}/${2*s*i}/π*180) donne NaN`);else{this.bg.setAttribute("transform",`rotate(${this.alp})`),this.bd.setAttribute("transform",`translate(${this.ecart/i}, 0) rotate(${-this.alp})`);const n=this.alp/180*Math.PI,o=this.ecart/2/i,a=-s*Math.cos(n)+this.decbh;this.haut.setAttribute("transform",`translate(${o},${a})`);const u=this.bretourne?`scale(${i},${-i})`:`scale(${i})`;this.g.setAttribute("transform",`${u} translate(${t/i},${e/i}) rotate(${r})`)}},P.prototype.retourne=function(){this.bretourne=!this.bretourne,this.setPosition(this.x,this.y,this.angle)},P.prototype.positionne=function(){T.prototype.positionne.call(this),this.leve&&null!=this.doc.compasLeve&&T.prototype.positionne.call(this.doc.compasLeve)},P.prototype.translate=function(t,e){T.prototype.translate.call(this,t,e),this.leve&&null!=this.doc.compasLeve&&T.prototype.translate.call(this.doc.compasLeve,t,e)},P.prototype.lanceAnimationEcartement=function(t,e){this.ecartfin=parseFloat(t),this.pasecart=e/4,this.pasecart*=t>=this.ecart?1:-1,this.distecart=Math.abs(t-this.ecart);const r=this;this.timer=setInterval((function(){r.actionPourEcartement()}),25)},P.prototype.actionPourEcartement=function(){const t=this.ecart+this.pasecart,e=Math.abs(t-this.ecartfin);e>this.distecart||!this.doc.animationEnCours?(this.ecart=this.ecartfin,this.setPosition(this.x,this.y,this.angle),clearInterval(this.timer),this.doc.actionSuivante()):(this.distecart=e,this.ecart=t,this.setPosition(this.x,this.y,this.angle))};const R=L;function L(t){T.call(this,t),this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),t.svg.appendChild(this.g)}L.prototype=new T,L.prototype.creeg=function(){let e,r;const n=document.createElementNS(t,"g");e=document.createElementNS(t,"path"),r="M 0 0 L 131 0 L 0 "+String(-223)+" Z";const i="M 24 "+String(-31)+" L 24 "+String(-134.83969465648855)+" L "+String(85)+" "+String(-31)+" Z";r+=i,e.setAttribute("d",r),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: #c6cbe8; fill-opacity: 0.5"),n.appendChild(e),e=document.createElementNS(t,"path"),r="M 16 "+String(-16)+" L 121.60089686098655 "+String(-16)+" L 16 -195.76335877862596 Z",r+=i,e.setAttribute("d",r),e.setAttribute("style","stroke-width:0; fill: #c6cbe8; fill-opacity: 0.5"),n.appendChild(e);const s=document.createElementNS(t,"text");s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode("Sésamath")),s.setAttribute("x",24),s.setAttribute("y",-13),s.setAttribute("style","font-family: Arial;font-size: 8pt;font-weight:bold;fill: maroon"),n.appendChild(s),this.g=n};const D=q;function q(t){T.call(this,t),this.graduationExterneVisible=!0,this.graduationInterneVisible=!0,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),t.svg.appendChild(this.g)}q.prototype=new T,q.prototype.creeg=function(){let e,r,n,i,s;const o=String(156),a=String(89),u=document.createElementNS(t,"g");for(r=document.createElementNS(t,"path"),e="M "+o+" 0 A "+o+" "+o+" 0 0 0 -"+o+" 0 L -"+o+" 13 L "+o+" 13 L "+o+" 0",e+="M 0 0 L -"+a+" 0 A "+a+" "+a+" 0 0 1 "+a+" 0 Z",r.setAttribute("d",e),r.setAttribute("style","stroke:#999999;stroke-width:1; fill: #c6cbe8; fill-opacity: 0.5"),u.appendChild(r),r=document.createElementNS(t,"path"),e="M 7 0 A 7 7 0 0 0 -7 0 M 0 0 L 0 -7",r.setAttribute("d",e),r.setAttribute("style","stroke: #666666;stroke-width:1; fill: none"),u.appendChild(r),i=0;i<=180;i++)n=document.createElementNS(t,"line"),n.setAttribute("x1",o),n.setAttribute("y1",0),n.setAttribute("x2",i%10==0?136:i%5==0?146:151),n.setAttribute("y2",0),n.setAttribute("transform","rotate(-"+i+")"),n.setAttribute("style","stroke: #333333;stroke-width:0.7;"),u.appendChild(n);for(this.gradext=document.createElementNS(t,"g"),i=0;i<=180;i++)i%10==0&&(s=document.createElementNS(t,"text"),s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode(i)),s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("style","font-family: arial;font-size: 10px;text-anchor: middle; fill: black"),s.setAttribute("transform"," scale(-1) rotate("+String(-i-90)+") translate(0,"+String(-124)+")"),this.gradext.appendChild(s));for(u.appendChild(this.gradext),r=document.createElementNS(t,"path"),e="M "+String(120)+" 0 L 116 0 A 116 116 0 0 0 -116 0 L "+String(-120)+" 0",r.setAttribute("d",e),r.setAttribute("style","stroke: #666666;stroke-width:1; fill: none"),u.appendChild(r),i=0;i<=18;i++)n=document.createElementNS(t,"line"),n.setAttribute("x1",89),n.setAttribute("y1",0),n.setAttribute("x2",99),n.setAttribute("y2",0),n.setAttribute("transform","rotate(-"+String(10*i)+")"),n.setAttribute("style","stroke: #333333;stroke-width:0.7;"),u.appendChild(n);for(this.gradint=document.createElementNS(t,"g"),i=0;i<=18;i++)s=document.createElementNS(t,"text"),s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode(180-10*i)),s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("style","font-family: arial;font-size: 9px;text-anchor: middle; fill: black"),s.setAttribute("transform","scale(-1) rotate("+String(-10*i-90)+") translate(0,"+String(-103)+")"),this.gradint.appendChild(s);u.appendChild(this.gradint);const l=document.createElementNS(t,"circle");l.setAttribute("cx",0),l.setAttribute("cy",0),l.setAttribute("r",2),l.setAttribute("style","stroke: black; stroke-width: 1;fill: none"),u.appendChild(l),s=document.createElementNS(t,"text"),s.setAttribute("pointer-events","none"),s.appendChild(document.createTextNode("Sésamath")),s.setAttribute("x",0),s.setAttribute("y",11),s.setAttribute("style","font-family: sans-serif;font-size: 7pt;font-weight:bold;text-anchor: middle; fill: maroon"),u.appendChild(s),this.g=u},q.prototype.montreGraduations=function(t){this.graduationInterneVisible=!0,this.visible&&this.gradint.setAttribute("visibility",t?"visible":"hidden")},q.prototype.montreGraduationsExternes=function(t){this.graduationExterneVisible=!0,this.visible&&this.gradext.setAttribute("visibility",t?"visible":"hidden")},q.prototype.montre=function(t){T.prototype.montre.call(this,t),t?(this.gradint.setAttribute("visibility",this.graduationInterneVisible?"visible":"hidden"),this.gradext.setAttribute("visibility",this.graduationExterneVisible?"visible":"hidden")):(this.gradint.setAttribute("visibility","hidden"),this.gradext.setAttribute("visibility","hidden"))};const B=U;function U(t){T.call(this,t),this.x=100,this.y=400,this.angle=0,this.longueur=15,this.graduationVisible=!0,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),t.svg.appendChild(this.g)}U.prototype=new T,U.prototype.creeg=function(){let e,r;const n=30*this.longueur+15,i=String(57),s=String(6),o=document.createElementNS(t,"g"),a=document.createElementNS(t,"rect");a.setAttribute("x",-s-1),a.setAttribute("y",0),a.setAttribute("width",String(n+6+1)),a.setAttribute("height",i),a.setAttribute("rx",s),a.setAttribute("ry",s),a.setAttribute("style","stroke:#999999;stroke-width:2; fill: #c6cbe8; fill-opacity: 0.5;"),o.appendChild(a);const u=document.createElementNS(t,"line");u.setAttribute("x1",-s),u.setAttribute("y1",27),u.setAttribute("x2",n),u.setAttribute("y2",27),u.setAttribute("style","stroke:#999999;stroke-width:2;"),o.appendChild(u),this.graduations=document.createElementNS(t,"g");for(let n=0;n<=10*this.longueur;n++){e=document.createElementNS(t,"line");const i=3*n;e.setAttribute("x1",i),e.setAttribute("y1",0),e.setAttribute("x2",i),e.setAttribute("y2",n%10==0?12:n%5==0?9:6),n%10==0&&(r=document.createElementNS(t,"text"),r.setAttribute("pointer-events","none"),r.appendChild(document.createTextNode(String(n/10))),r.setAttribute("x",i),r.setAttribute("y",21),r.setAttribute("style","font-family: monospace;font-size: 9pt;text-anchor:middle"),this.graduations.appendChild(r)),e.setAttribute("style","stroke:black;stroke-width:0.7;"),this.graduations.appendChild(e)}r=document.createElementNS(t,"text"),r.setAttribute("pointer-events","none"),r.appendChild(document.createTextNode("Sésamath")),r.setAttribute("x",n/2-6-3),r.setAttribute("y",i-5),r.setAttribute("style","font-family: Arial;font-size: 8pt;font-weight:bold;fill: maroon;text-anchor:middle;"),o.appendChild(r),o.appendChild(this.graduations),this.g=o},U.prototype.montreGraduations=function(t){this.graduationVisible=t,this.graduations.setAttribute("visibility",this.visible&&t?"visible":"hidden")},U.prototype.montre=function(t){T.prototype.montre.call(this,t),t?this.graduations.setAttribute("visibility",this.graduationVisible?"visble":"hidden"):this.graduations.setAttribute("visibility","hidden")},U.prototype.initialisePosition=function(){if(15!==this.longueur){this.longueur=15;const t=this.visible,e=this.g;this.creeg(),this.g.setAttribute("visibility",t?"visible":"hidden"),this.doc.svg.replaceChild(this.g,e)}T.prototype.initialisePosition.call(this)};const z=F;function F(t){T.call(this,t),this.x=200,this.y=400,this.angle=0,this.zoomfactor=1,this.abscisse=0,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),t.svg.appendChild(this.g)}F.prototype=new T,F.prototype.creeg=function(){let e,r;const n=172,i="stroke:#999999;stroke-width:2; fill: #c6cbe8; fill-opacity: 0.5",s=document.createElementNS(t,"g");e=document.createElementNS(t,"path"),r="M 0 0 L "+String(167)+" 0 A 5 5 0 0 1 "+String(n)+" 5 L "+String(n)+" "+String(52)+" A 5 5 90 0 1 "+String(167)+" "+String(57)+" L "+String(-251)+" 57 A 5 5 180 0 1 -256 "+String(52)+" L "+String(-256)+" 5 A 5 5 -90 0 1 "+String(-251)+" 0Z";const o="M"+String(158)+" 42A 6 6 180 0 0 "+String(146)+" "+String(42)+"A 6 6 180 0 0 "+String(158)+" "+String(42);r+=o,e.setAttribute("d",r),e.setAttribute("style",i),s.appendChild(e),e=document.createElementNS(t,"path"),r="M"+String(n)+" "+String(16)+"L"+String(n)+" "+String(52)+" A 5 5 90 0 1 "+String(167)+" "+String(57)+" L "+String(-251)+" 57 A 5 5 180 0 1 -256 "+String(52)+" L "+String(-256)+" "+String(16)+"Z"+o,e.setAttribute("d",r),e.setAttribute("style",i),s.appendChild(e);const a=document.createElementNS(t,"line");a.setAttribute("x1",0),a.setAttribute("y1",8),a.setAttribute("x2",0),a.setAttribute("y2",0),a.setAttribute("style","stroke: black"),s.appendChild(a);const u={};R.prototype.creeg.call(u),this.gequerre=u.g,this.gequerre.setAttribute("transform","scale(0.7)"),s.appendChild(this.gequerre),this.setAbs(this.abscisse),this.g=s},F.prototype.setAbs=function(t){this.abscisse=t,this.gequerre.setAttribute("transform","translate("+t+",0)")},F.prototype.lanceAnimationGlissement=function(t,e){this.absfin=t,this.pix=t>=this.abscisse?e/4:-e/4,this.dist=Math.abs(t-this.abscisse);const r=this;this.timer=setInterval((function(){r.actionPourGlissement()}),25)},F.prototype.actionPourGlissement=function(){const t=this.abscisse+this.pix,e=Math.abs(this.absfin-t);e>this.dist||!this.doc.animationEnCours?(this.setAbs(this.absfin),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=e,this.setAbs(t))};const G=V;function V(t){T.call(this,t),this.angle=this.angleInit(),this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(this.x,this.y,this.angle),t.svg.appendChild(this.g)}V.prototype=new T,V.prototype.angleInit=function(){return-40},V.prototype.creeg=function(){let e,r,n,i,s;const o=document.createElementNS(t,"g");e=document.createElementNS(t,"defs"),i=document.createElementNS(t,"linearGradient"),i.setAttribute("id","gradpointe"),s=document.createElementNS(t,"stop"),s.setAttribute("offset","0%"),s.setAttribute("style","stop-color: #f00000;"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","50%"),s.setAttribute("style","stop-color: #eeb444;"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","100%"),s.setAttribute("style","stop-color: #f00000"),i.appendChild(s),i.setAttribute("x1","0%"),i.setAttribute("y1","0%"),i.setAttribute("x2","0%"),i.setAttribute("y2","100%"),e.appendChild(i),o.appendChild(e),e=document.createElementNS(t,"defs"),i=document.createElementNS(t,"linearGradient"),i.setAttribute("id","gradcorps"),s=document.createElementNS(t,"stop"),s.setAttribute("offset","0%"),s.setAttribute("style","stop-color: #810216;"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","25%"),s.setAttribute("style","stop-color: #c64f00;"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","50%"),s.setAttribute("style","stop-color: #ab4a36"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","75%"),s.setAttribute("style","stop-color: #c64f00;"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","100%"),s.setAttribute("style","stop-colr: #810216;"),i.appendChild(s),i.setAttribute("x1","0%"),i.setAttribute("y1","0%"),i.setAttribute("x2","0%"),i.setAttribute("y2","100%"),e.appendChild(i),o.appendChild(e),r=document.createElementNS(t,"path");const a="A1.5 1.125 -90 0 0 15 "+String(1.5)+"A1.5 1.125 -90 0 1 15 "+String(-1.5)+"A1.5 1.125 -90 0 0 15 "+String(-4.5);n="M 0 0 L15 4.5"+a+"Z",r.setAttribute("d",n),r.setAttribute("style","stroke:black; stroke-width:0.5; fill: url(#gradpointe); fill-opacity: 1;"),o.appendChild(r),r=document.createElementNS(t,"path"),n="M 0 0 L 3 0.9 3 "+String(-.9)+"Z",r.setAttribute("d",n),r.setAttribute("style","stroke:black; stroke-width:0.5; fill: black; fill-opacity: 1;"),o.appendChild(r),r=document.createElementNS(t,"path"),n="M 15 4.5"+a+" L 97 "+String(-4.5)+" L 97 "+String(4.5)+"Z",r.setAttribute("d",n),r.setAttribute("style","stroke:black; stroke-width:0.5; fill: url(#gradcorps); fill-opacity: 1;"),o.appendChild(r);const u=document.createElementNS(t,"circle");u.setAttribute("r",4.5),u.setAttribute("cx",97),u.setAttribute("cy",0),u.setAttribute("style","stroke:blue; stroke-width:0.5; fill: blue; fill-opacity: 1;"),o.appendChild(u),this.g=o};const j=H;function H(t,e){0!==arguments.length&&(this.doc=t,"string"==typeof e&&(e=Number(e)),this.tempo="number"==typeof e&&e>0&&Number.isFinite(e)?100*e:null,this.isReady=!1)}H.prototype.setReady=function(){this.isReady=!0},H.prototype.creegElement=function(){},H.prototype.actionVisible=function(){return!0};const W=Y;function Y(t,e){j.call(this,t,e)}Y.prototype=new j,Y.prototype.execute=function(t){const e=this.doc.compas,r=this.doc.compasLeve;e.leve&&(r.montre(!1),e.setPosition(r.x,r.y,r.angle)),!t&&e.visible&&e.montre(!0),e.leve=!1,t||this.doc.actionSuivante(t)},Y.prototype.actionVisible=function(){return!!this.doc.getInstrumentVisibility(this.doc.compas.compas,this.indice-1)&&"leve"===this.doc.getCompasStatus(this.indice-1)};const X=Z;function Z(t,e,r){this.doc=t,this.id=e,this.couleur=r,this.zoomfactor=1,this.visible=!1,this.objet="trait"}Z.prototype.positionne=function(){},Z.prototype.initialisePosition=function(){},Z.prototype.translate=function(t,e){this.setPosition(t,e,this.angle,this.zoomfactor)},Z.prototype.tourne=function(t){this.setPosition(this.x,this.y,t,this.zoomfactor)},Z.prototype.zoom=function(t){this.zoomfactor=t,this.setPosition(this.x,this.y,this.angle,t)},Z.prototype.montre=function(t){this.visible=t,this.g&&this.g.setAttribute("visibility",t?"visible":"hidden")},Z.prototype.lanceAnimationTranslation=function(t,e,r){this.xfin=t,this.yfin=e,this.pix=Math.abs(r/4);const n=new k(this.x,this.y,t,e);if(this.dist=n.norme(),0===this.dist)return this.translate(this.xfin,this.yfin),void this.doc.actionSuivante();this.vect=n.vecteurColineaire(this.pix);const i=this;this.timer=setInterval((function(){i.actionPourTranslation()}),25)},Z.prototype.actionPourTranslation=function(){const t=this.x+this.vect.x,e=this.y+this.vect.y,r=new k(t,e,this.xfin,this.yfin).norme();r>this.dist||!this.doc.animationEnCours?(this.translate(this.xfin,this.yfin),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=r,this.translate(t,e))},Z.prototype.lanceAnimationRotation=function(t,e){const r=l(this.angle);let n=l(t);Math.abs(n-r)>180&&(n>r?n-=360:n+=360),this.anglefin=n,this.angle=r,this.pasdeg=2*e/3,this.pasdeg*=t>=this.angle?1:-1,this.distang=Math.abs(t-this.angle);const i=this;this.timer=setInterval((function(){i.actionPourRotation()}),25)},Z.prototype.actionPourRotation=function(){const t=parseFloat(this.angle)+parseFloat(this.pasdeg),e=Math.abs(t-this.anglefin);e>this.distang||!this.doc.animationEnCours?(this.tourne(this.anglefin),clearInterval(this.timer),this.doc.actionSuivante()):(this.distang=e,this.tourne(t))},Z.prototype.lanceAnimationZoom=function(t,e){this.zoomfin=t,this.vitesse=parseInt(e),this.pas=.05*this.vitesse*(this.zoomfin-this.zoomfactor),this.senspos=this.pas>=0;const r=this;this.timer=setInterval((function(){r.actionPourZoom()}),100)},Z.prototype.actionPourZoom=function(){const t=this.zoomfactor+this.pas;this.doc.animationEnCours&&(this.senspos&&t<this.zoomfin||!this.senspos&&t>this.zoomfin)?this.zoom(t):(this.zoom(this.zoomfin),clearInterval(this.timer),this.doc.actionSuivante())},Z.prototype.updateg=function(){const t=this.g;this.creeg(),this.doc.svg.replaceChild(this.g,t),this.doc.setElement(this.id,this),this.g.setAttribute("visibility","visible")},Z.prototype.creationAnimee=function(){return!1},Z.prototype.finAction=function(){};const K=J;function J(t,e,r,n){X.call(this,t,e,"black"),this.x=parseFloat(r),this.y=parseFloat(n),this.xinit=this.x,this.yinit=this.y,this.taille=20,this.angle=0,this.texte="",this.objet="texte"}J.prototype=new X,J.prototype.positionne=function(){this.setPosition(this.x,this.y,this.angle,this.zoomfactor)},J.prototype.translate=function(t,e){this.x=t,this.y=e,this.positionne()},J.prototype.updateg=function(t){const e=this.g;if(!e)return console.error("Il faut appeler creeg avant updateg");this.doc.svg.replaceChild(t,e),this.g=t,t.setAttribute("visibility","visible")},J.prototype.creeg=function(){this.g=document.createElementNS(t,"g")},J.prototype.setPosition=function(t,e,r,n){this.x=t,this.y=e,this.angle=r,this.zoomfactor=n;const i=e+M(this);this.g.setAttribute("transform","scale("+n+") translate("+String(t/n)+","+String(i/n)+") rotate("+r+")")};const Q=tt;function tt(t,e,r,n,i){j.call(this,t,n),this.id=e;const s=this.doc.getElement(e,r.objet);this.objetRemplace=null===s?null:s,this.objet=r,this.vitesse=arguments.length>=5&&null!=i?Math.abs(parseFloat(i)):8,null!==this.objetRemplace?this.doc.addElement(this.objet):this.doc.pushElement(this.objet)}tt.prototype=new j,tt.prototype.execute=function(t){this.objet instanceof K&&(this.objet.x=this.objet.xinit,this.objet.y=this.objet.yinit),null!==this.objetRemplace&&this.objetRemplace.montre(!1),this.objet.creationAnimee()&&!t?this.objet.lanceAnimation(this.vitesse):(this.objet.montre(!0),t?this.objet.finAction():this.doc.actionSuivante())},tt.prototype.creegElement=function(){const t=this.doc,e=this.objet;e.creeg(),e.positionne(),e.g.setAttribute("visibility","hidden"),t.svg.appendChild(e.g)},tt.prototype.actionVisible=function(){return!(this.objet instanceof K)};const et=rt;function rt(t,e,r,n){j.call(this,t,r),this.ecartement=e,this.ec10=null===n?16:parseFloat(n)}rt.prototype=new j,rt.prototype.execute=function(t){t?(this.doc.compas.ecart=this.ecartement,this.doc.compas.positionne()):this.doc.compas.lanceAnimationEcartement(this.ecartement,this.ec10)},rt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.compas,this.indice-1)};const nt={tex:{inlineMath:[["$","$"],["\\(","\\)"]],packages:{"[+]":["color"]}},svg:{mtextInheritFont:!0},options:{ignoreHtmlClass:"tex2jax_ignore",processHtmlClass:"tex2jax_process"},loader:{load:["[tex]/noerrors","[tex]/color"]}};let it;function st(){return it||(it=new Promise(((t,e)=>{if("object"==typeof MathJax&&/^3\./.test(MathJax.version))return MathJax.config=nt,t();window.MathJax=nt,MathJax.startup={ready:()=>{clearTimeout(i),MathJax.startup.defaultReady(),MathJax.startup.promise.then((()=>{t()}))}};const r=document.createElement("script");r.type="text/javascript",r.crossOrigin="anonymous";const n=window.mathJax3BaseUrl?`${window.mathJax3BaseUrl}es5/tex-svg.js`:"https://www.mathgraph32.org/js/MathJax3/es5/tex-svg.js";r.src=n,document.getElementsByTagName("head")[0].appendChild(r);const i=setTimeout((()=>{e(Error(`Mathjax non chargé après 10s d’attente (${n})`))}),1e4)})),it)}const ot=at;function at(t,e,r,n,i,s,o,a,u,l,c,p,h,f,d,y){j.call(this,t,y),this.txt=this.doc.getElement(e,"texte"),this.id=e,this.couleur=r,this.taille=null==n?"20":n.replace(/O/g,"0"),this.style=null===s?"texte":s,this.couleurFond=o,this.opaciteFond=null==a?"0.6":parseFloat(a)/100,this.couleurCadre=u,null!==l&&null===u&&(this.couleurCadre=r),this.epaisseurCadre=null!=l?l:null==u?0:1,this.marge=null==c?0:parseFloat(c),this.margeGauche=null==p?0:parseFloat(p),this.margeDroite=null==h?0:parseFloat(h),this.margeHaut=null==f?0:parseFloat(f),this.margeBas=null==d?0:parseFloat(d),this.texte=i,this.estLatex=this.estAffichageLatex(),this.estLatex||(this.texte=m(g(this.texte)),this.texte=this.traduitCaracteresGrecs(this.texte),this.texte=this.texte.replace(/\*/g,"×"),S(i)&&(this.texte="$"+this.traiteMaths(this.texte)+"$",this.estLatex=!0))}at.prototype=new j,at.prototype.execute=function(t){if(null!=this.txt){this.angle=0;const t=this.txt;t.couleur=this.couleur,t.taille=this.taille,t.texte=this.texte,t.couleurFond=this.couleurFond,t.couleurCadre=this.couleurCadre,t.epaisseurCadre=this.epaisseurCadre,t.updateg(this.g),t.positionne()}t||this.doc.actionSuivante(t)},at.prototype.estAffichageLatex=function(){return"$"===this.texte.charAt(0)&&"$"===this.texte.charAt(this.texte.length-1)},at.prototype.traduitCaracteresGrecs=function(t){if(!t.includes("£"))return t;const r=t.split("£").map(((t,r)=>r%2?e[t]||`£${t}£`:t)).join("");return(t.length-t.replace(/£/g,"").length)%2?(console.warn(`Il y a un nombre impair de £ dans cette chaîne : ${t}`),r.substr(0,r.length-1)):r},at.prototype.traiteMaths=function(t){let e;const r=t,n="texte"===this.style,i=r.split(/<\/?br *\/?>/gi);if(i.length<=1)return A(t,n);let s="\\begin{array}{l}";for(e=0;e<i.length;e++)0!==e&&(s+="\\\\"),s+=A(i[e],n);return s+="\\end{array}",s},at.prototype.prepare=function(){let t;if(this.estLatex&&(t=this.texte.replace(/^\$(.*)\$$/,"$1"),t||(console.error(Error("texte latex mais pas enveloppé de $, ignoré"),this.texte),this.estLatex=!1)),this.estLatex){const e=this;st().then((()=>{const r=e.doc.getWidth(),n=e.taille,i=e.prelatex()+t;e.ex=.45*n;const s={em:n,ex:e.ex,containerWidth:r,display:!1};return e.doc.debug&&console.log("On passe à MathJax la string",i),MathJax.tex2svgPromise(i,s)})).then((t=>{e.html=t,e.creegLatex(),e.setReady()})).catch((t=>{console.error(t),alert("Pb Mathjax, impossible d’afficher le LaTeX correctement")}))}else this.creeg(),this.setReady()},at.prototype.prelatex=function(){return"\\color{"+this.couleur+"}"},at.prototype.creegLatex=function(){try{const e=this.html.firstChild,r=e.cloneNode(!0),n=document.createElementNS(t,"g");n.appendChild(r);const i=parseFloat(e.getAttribute("width"))*this.ex,s=parseFloat(e.getAttribute("height"))*this.ex,o=r.style["vertical-align"],a=(o&&parseFloat(o)||1)*this.ex;r.setAttribute("width",i+"px"),r.setAttribute("height",s+"px"),r.style["vertical-align"]=`${a}px`,r.setAttribute("x","0");const u=M(this);if(r.setAttribute("y",String(-u)),n.setAttribute("visibility","hidden"),null!==this.couleurFond||null!==this.couleurCadre){n.setAttribute("visibility","hidden"),this.doc.svg.appendChild(n),this.rectAff={};const t=parseFloat(this.epaisseurCadre),{x:e,y:r,width:i,height:s}=n.getBBox();this.rectAff.height=s+2*t+4+2*this.marge+this.margeHaut+this.margeBas,this.rectAff.width=i+2*t+2+2*this.marge+this.margeGauche+this.margeDroite,this.rectAff.x=e-t-1-this.marge-this.margeGauche,this.rectAff.y=r-t-1-this.marge-this.margeHaut,n.setAttribute("visibility","visible"),this.doc.svg.removeChild(n),this.creeRectangle(n,null==this.couleurFond?"white":this.couleurFond)}this.g=n}catch(e){console.error("Erreur dans ActionEcrireTexte.creegLatex (on remplace par un <g> vide) :",e),this.g=document.createElementNS(t,"g")}},at.prototype.creeg=function(){let e,r,n,i,s,a,u,l,c,f,d,m,g,y,v,b,x,_,w=0;const S="<",A="£e(",N="£i(",k=document.createElementNS(t,"g"),C=M(this),T=C+2;let O=0;const I=.4*C;if(""!==this.texte){if(a=document.createElementNS(t,"text"),a.setAttribute("pointer-events","none"),a.setAttribute("x",0),a.setAttribute("y",0),s="text-anchor:left;font-size:"+C+"px;fill:"+this.couleur+";",a.setAttribute("style",s),i=this.texte.replace(/ /g," "),-1===this.texte.indexOf(S)&&-1===this.texte.indexOf(A)&&-1===this.texte.indexOf(N)&&-1===this.texte.indexOf("<br>"))a.appendChild(document.createTextNode(i));else for(v=i.split(/<br>/gi),y=-T,b=0;b<v.length;b++)for(x=!0,n=v[b];""!==n;){if(e=n.indexOf(S),l=n.indexOf(A),c=n.indexOf(N),x&&(y+=T+O),-1!==l&&(y+=I),-1===e&&-1===l&&-1===c){r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.setAttribute("dy",w),x&&(r.setAttribute("x",0),r.setAttribute("y",y),x=!1),w=0,r.appendChild(document.createTextNode(n)),a.appendChild(r);break}for(;-1!==n.indexOf(S)||-1!==n.indexOf(A)||-1!==n.indexOf(N);)if(e=n.indexOf(S),l=n.indexOf(A),c=n.indexOf(N),f=-1===e?-1===l?c:-1===c?l:Math.min(c,l):-1===l?-1===c?e:Math.min(e,c):-1===c?Math.min(e,l):Math.min(e,c,l),f>0)r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.setAttribute("dy",w),x&&(r.setAttribute("x",0),r.setAttribute("y",y),x=!1),w=0,r.appendChild(document.createTextNode(n.substring(0,f))),a.appendChild(r),n=n.substring(f);else if(0===e){const t=new o(!1,!1,!1,this.couleur,"",C);u=p(n),E(-1===u?n:n.substring(0,u),t,a,x,y),x=!1,n=-1!==u?n.substring(u):"",w=0}else d=f===l,_=h(n),r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.setAttribute("dy",w+"px"),x&&(r.setAttribute("x",0),r.setAttribute("y",y),x=!1),_.erreur?r.appendChild(document.createTextNode(n)):(r.appendChild(document.createTextNode(_.operande)),a.appendChild(r),r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.appendChild(document.createTextNode(_.exposant)),w=I,d?w=-w:O=w,r.setAttribute("dy",w+"px"),m=.6*C,g="font-size:"+m+"px;",r.setAttribute("style",g),a.appendChild(r),w=-w),n=_.texte}k.appendChild(a)}if(k.setAttribute("visibility","hidden"),null!=this.couleurFond||null!=this.couleurCadre){k.setAttribute("visibility","hidden"),this.doc.svg.appendChild(k),this.rectAff={};const t=parseFloat(this.epaisseurCadre);this.rectAff.height=k.getBBox().height+2*t+3+2*this.marge+this.margeHaut+this.margeBas,this.rectAff.width=k.getBBox().width+2*t+2+2*this.marge+this.margeGauche+this.margeDroite,this.rectAff.x=k.getBBox().x-t-1-this.marge-this.margeGauche,this.rectAff.y=k.getBBox().y-t-1-this.marge-this.margeHaut,k.setAttribute("visibility","visible"),this.doc.svg.removeChild(k),this.creeRectangle(k,null==this.couleurFond?"white":this.couleurFond)}this.g=k},at.prototype.contientBalisesItaliqueOuUnderlineOuFontOuBold=function(t){return/<(u|b|i|font[^>]+)>/gi.test(t)},at.prototype.creeRectangle=function(e,r){const n=document.createElementNS(t,"rect"),i="stroke-width:"+this.epaisseurCadre+"px;stroke:"+this.couleurCadre+";fill:"+r+";fill-opacity:"+this.opaciteFond+";";n.setAttribute("style",i),n.setAttribute("x",this.rectAff.x),n.setAttribute("y",this.rectAff.y),n.setAttribute("width",this.rectAff.width),n.setAttribute("height",this.rectAff.height),n.setAttribute("pointer-events","none"),e.insertBefore(n,e.childNodes[0])};const ut=lt;function lt(t,e,r,n){j.call(this,t,r),this.abscisseFin=parseFloat(e),this.pix10=null===n?8:String(Math.abs(n))}lt.prototype=new j,lt.prototype.execute=function(t){t?(this.doc.requerre.setAbs(this.abscisseFin),this.doc.requerre.positionne()):this.doc.requerre.lanceAnimationGlissement(this.abscisseFin,this.pix10)},lt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.requerre,this.indice-1)};const ct=pt;function pt(t,e,r,n,i){T.call(this,t);const s=null==t.compasLeve?null:t.compasLeve.g;this.x=e,this.y=r,this.angle=n,this.ecart=i,this.creeg(),this.g.setAttribute("visibility","hidden"),this.setPosition(e,r,n),null==s?t.svg.appendChild(this.g):t.svg.replaceChild(this.g,s)}pt.prototype=new T,pt.prototype.creeg=function(){let e,r,n;const i=this.ecart,s=document.createElementNS(t,"g");this.ecart>16&&(e=document.createElementNS(t,"rect"),e.setAttribute("x",8),e.setAttribute("y",-3.5),e.setAttribute("width",this.ecart-16),e.setAttribute("height",7),e.setAttribute("rx",1),e.setAttribute("ry",1),e.setAttribute("style","stroke:black;stroke-width:0.5;fill:silver;fill-opacity:1"),s.appendChild(e)),n=document.createElementNS(t,"path"),n.setAttribute("d","M0 0 L8 1 8 -1Z"),n.setAttribute("style","stroke:black;stroke-width:0.5;fill:black;fill-opacity:1"),s.appendChild(n);const o=i-16;r=document.createElementNS(t,"line"),r.setAttribute("x1",8),r.setAttribute("y1",0),r.setAttribute("x2",8+o/8),r.setAttribute("y2",0),r.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(r),n=document.createElementNS(t,"path");const a=String(i-8);n.setAttribute("d","M"+i+" 0 L"+a+" 1.5 "+a+" -1.5Z"),n.setAttribute("style","stroke:black;stroke-width:0.5;fill:black;fill-opacity:1"),s.appendChild(n),r=document.createElementNS(t,"line"),r.setAttribute("x1",a),r.setAttribute("y1",0),r.setAttribute("x2",String(i-8-o/8)),r.setAttribute("y2",0),r.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(r),r=document.createElementNS(t,"line");let u=String(i-8-o/8-2);r.setAttribute("x1",u),r.setAttribute("y1",-3.5),r.setAttribute("x2",u),r.setAttribute("y2",3.5),r.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(r),r=document.createElementNS(t,"line"),u=String(i-8-o/3-2),r.setAttribute("x1",u),r.setAttribute("y1",-3.5),r.setAttribute("x2",u),r.setAttribute("y2",3.5),r.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(r),e=document.createElementNS(t,"rect"),e.setAttribute("x",String(8+o/8-5)),e.setAttribute("y",String(-7)),e.setAttribute("width",8),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e),e=document.createElementNS(t,"rect"),e.setAttribute("x",String(i-8-o/8-4)),e.setAttribute("y",String(-7)),e.setAttribute("width",8),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e);const l=12;n=document.createElementNS(t,"path");const c="M"+String(i/2+l)+" "+String(-4)+" A "+String(l)+" 2 180 0 0 "+String(i/2-l)+" "+String(-4)+"A"+String(4)+" 2 90 0 1 "+String(i/2-l)+" "+String(4)+"A"+String(l)+" 2 0 0 0 "+String(i/2+l)+" "+String(4)+"A"+String(4)+" 2 -90 0 1 "+String(i/2+l)+" "+String(-4);n.setAttribute("d",c),n.setAttribute("style","stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1"),s.appendChild(n),r=document.createElementNS(t,"line"),r.setAttribute("x1",String(i/2+l)),r.setAttribute("y1",-3.5),r.setAttribute("x2",String(i/2-l)),r.setAttribute("y2",3.5),r.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(r),r=document.createElementNS(t,"line"),r.setAttribute("x1",String(i/2-l)),r.setAttribute("y1",-3.5),r.setAttribute("x2",String(i/2+l)),r.setAttribute("y2",3.5),r.setAttribute("style","stroke: black; stroke-width:0.5;"),s.appendChild(r);const p=document.createElementNS(t,"circle");p.setAttribute("cx",String(i/2)),p.setAttribute("cy",0),p.setAttribute("r",5),p.setAttribute("style","stroke:black;stroke-width:0.75; fill: #666666; fill-opacity: 1"),s.appendChild(p),e=document.createElementNS(t,"rect"),e.setAttribute("x",String(8+o/8-5)),e.setAttribute("y",String(-7)),e.setAttribute("width",7),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e),e=document.createElementNS(t,"rect"),e.setAttribute("x",String(i-8-o/8-4)),e.setAttribute("y",String(-7)),e.setAttribute("width",7),e.setAttribute("height",3),e.setAttribute("style","stroke:black;stroke-width:0.75; fill: silver; fill-opacity: 1"),s.appendChild(e),this.g=s},pt.prototype.setPosition=function(t,e,r){this.x=t,this.y=e,this.angle=r,this.g.setAttribute("transform","translate("+t+","+e+") rotate("+r+")")};const ht=ft;function ft(t,e){j.call(this,t,e)}ft.prototype=new j,ft.prototype.execute=function(t){const e=this.doc.compas;e.visible&&(e.montre(!1),e.visible=!0),this.doc.compasLeve=new ct(this.doc,e.x,e.y,e.angle,e.ecart),!t&&e.visible&&this.doc.compasLeve.montre(!0),e.leve=!0,t||this.doc.actionSuivante(t)},ft.prototype.actionVisible=function(){return!!this.doc.getInstrumentVisibility(this.doc.compas,this.indice-1)&&"couche"===this.doc.getCompasStatus(this.indice-1)};const dt=mt;function mt(t,e,r,n){j.call(this,t,n),this.objet=this.doc.getElement(e,r)}mt.prototype=new j,mt.prototype.execute=function(t){const e=this.objet;null!=e&&e.montre(!1),t||this.doc.actionSuivante(t)},mt.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const gt=yt;function yt(t,e,r){j.call(this,t,r),this.instrument=e}yt.prototype=new j,yt.prototype.execute=function(t){const e=this.doc.compas;this.instrument.montre(!1),e.leve&&this.doc.compasLeve.montre(!1),t||this.doc.actionSuivante(t)},yt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const vt=bt;function bt(t,e,r,n){j.call(this,t,n),this.instrument=e,this.longueur=r}bt.prototype=new j,bt.prototype.execute=function(t){if(this.instrument===this.doc.regle){const t=this.instrument.visible;this.instrument.longueur=this.longueur;const e=this.instrument.g;this.instrument.creeg(),this.instrument.g.setAttribute("visibility",t?"visible":"hidden"),this.doc.svg.replaceChild(this.instrument.g,e),this.instrument.translate(this.instrument.x,this.instrument.y)}t||this.doc.actionSuivante(t)},bt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const xt=_t;function _t(t,e,r,n){j.call(this,t,n),this.objet=this.doc.getElement(e,r)}_t.prototype=new j,_t.prototype.execute=function(t){const e=this.objet;null!==e&&e.montre(!0),t||this.doc.actionSuivante(t)},_t.prototype.actionVisible=function(){return!this.doc.getObjectVisibility(this.objet,this.indice-1)};const wt=Et;function Et(t,e,r,n){j.call(this,t,n),this.instrument=e,this.bmontrer=r}Et.prototype=new j,Et.prototype.execute=function(t){this.instrument.montreGraduations(this.bmontrer),t||this.doc.actionSuivante(t)},Et.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const St=At;function At(t,e,r,n,i){j.call(this,t,i),this.x=null===r?null:parseFloat(r),this.y=null===n?null:parseFloat(n),this.instrument=e}At.prototype=new j,At.prototype.execute=function(t){const e=this.doc.compas;null!==this.x&&null!==this.y&&this.instrument.translate(this.x,this.y),this.instrument!==e||t?this.instrument.montre(!0):(e.leve?this.doc.compasLeve.montre(!0):e.montre(!0),e.visible=!0),t||this.doc.actionSuivante(t)},At.prototype.actionVisible=function(){return!this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const Nt=Mt;function Mt(t,e,r){j.call(this,t,r),this.bmontrer=e}Mt.prototype=new j,Mt.prototype.execute=function(t){this.doc.rapporteur.montreGraduationsExternes(this.bmontrer),t||this.doc.actionSuivante(t)},Mt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.rapporteur,this.indice-1)};const kt=Ct;function Ct(t,e,r){j.call(this,t,r),this.nomPoint=e}Ct.prototype=new j,Ct.prototype.prepare=function(){if(this.nomPoint.estLatex){const t=this,e=this.doc.getWidth(),r=M(this.nomPoint)-2,n=this.nomPoint.nom.substring(1);this.ex=r/2;const i={em:r,ex:this.ex,containerWidth:e,display:!1};this.doc.debug&&console.log("chargement MathJax dans ActionNommerPoint"),st().then((()=>MathJax.tex2svgPromise(n,i))).then((e=>{t.nomPoint.html=e,t.nomPoint.creegLatex(),t.setReady()})).catch((t=>{console.error(t),alert("Pb Mathjax, impossible d’afficher le point en LaTeX")}))}else this.nomPoint.creeg(),this.setReady()},Ct.prototype.execute=function(t){if("point"===this.nomPoint.objet){this.nomPoint.positionne();const t=this.nomPoint.point;null!==t.nom?this.doc.svg.replaceChild(this.nomPoint.g,t.nom.g):this.doc.svg.appendChild(this.nomPoint.g),t.nom=this.nomPoint}this.nomPoint.g.setAttribute("visibility","visible"),t||this.doc.actionSuivante(t)},Ct.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.nomPoint.point,this.indice-1)};const Tt=Ot;function Ot(t,e){j.call(this,t,e)}Ot.prototype=new j,Ot.prototype.execute=function(t){t||(this.doc.activeIconeContinuer(),this.doc.animationEnCours=!1)},Ot.prototype.actionVisible=function(){return!1};const It=Pt;function Pt(t,e,r,n,i){j.call(this,t,n),this.instrument=e,this.anglefin=parseFloat(r),this.deg10=null==i?8:Math.abs(parseFloat(i))}Pt.prototype=new j,Pt.prototype.execute=function(t){t?(this.instrument.angle=this.anglefin,this.instrument.positionne(),t||this.doc.actionSuivante(t)):this.instrument.lanceAnimationRotation(this.anglefin,this.deg10)},Pt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const Rt=Lt;function Lt(t,e){j.call(this,t,e)}Lt.prototype=new j,Lt.prototype.execute=function(t){this.doc.compas.retourne(),t||this.doc.actionSuivante(t)},Lt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.doc.compas,this.indice-1)};const Dt=qt;function qt(t,e,r,n,i,s){j.call(this,t,i),this.anglefin=parseFloat(r),this.deg10=null==s?8:Math.abs(parseFloat(s)),this.objet=this.doc.getElement(e,n)}qt.prototype=new j,qt.prototype.execute=function(t){const e=this.objet;null!=e?t?(e.angle=this.anglefin,e.positionne()):e.lanceAnimationRotation(this.anglefin,this.deg10,this.tempo):t||this.doc.actionSuivante(t)},qt.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const Bt=Ut;function Ut(t,e,r,n,i,s){j.call(this,t,i),this.instrument=e,this.xfin=parseFloat(r),this.yfin=parseFloat(n),this.pix10=null==s?8:parseFloat(s)}Ut.prototype=new j,Ut.prototype.execute=function(t){isNaN(this.xfin)||isNaN(this.yfin)?this.doc.actionSuivante(t):t?this.instrument.translate(this.xfin,this.yfin):this.instrument.lanceAnimationTranslation(this.xfin,this.yfin,this.pix10)},Ut.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const $t=zt;function zt(t,e,r,n,i,s,o){j.call(this,t,s),this.xfin=parseFloat(r),this.yfin=parseFloat(n),this.pix10=null==o?8:parseFloat(o),this.type=i,this.objet=this.doc.getElement(e,i)}zt.prototype=new j,zt.prototype.execute=function(t){const e=this.objet;null!=e?t?e.translate(this.xfin,this.yfin):e.lanceAnimationTranslation(this.xfin,this.yfin,this.pix10):this.doc.actionSuivante(t)},zt.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const Ft=Gt;function Gt(t,e,r,n,i){j.call(this,t,n),this.instrument=e,this.zoomfin=parseFloat(r)/100,this.vitesse=parseInt(i)}Gt.prototype=new j,Gt.prototype.execute=function(t){t?(this.instrument.zoomfactor=this.zoomfin,this.instrument.positionne()):this.instrument.lanceAnimationZoom(this.zoomfin,this.vitesse)},Gt.prototype.actionVisible=function(){return this.doc.getInstrumentVisibility(this.instrument,this.indice-1)};const Vt=jt;function jt(t,e,r,n,i,s){j.call(this,t,i),this.objet=this.doc.getElement(e,n),this.zoomfin=parseFloat(r)/100,this.vitesse=s,this.type=n}jt.prototype=new j,jt.prototype.execute=function(t){const e=this.objet;null!=e?t?(e.zoomfactor=this.zoomfin,e.positionne()):e.lanceAnimationZoom(this.zoomfin,this.vitesse):this.doc.actionSuivante(t)},jt.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const Ht=Wt;function Wt(t,e,r,n,i,s){j.call(this,t,i),this.rayFin=parseFloat(r),this.pix10=null==s?8:parseFloat(s),this.type=n,this.objet=this.doc.getElement(e,n)}Wt.prototype=new j,Wt.prototype.execute=function(t){const e=this.objet;null!=e?t?e.donneRayon(this.rayFin):e.lanceAnimationModificationRayon(this.rayFin,this.pix10):this.doc.actionSuivante(t)},Wt.prototype.actionVisible=function(){return this.doc.getObjectVisibility(this.objet,this.indice-1)};const Yt=Xt;function Xt(t,e,r,n,i,s){X.call(this,t,e,r),this.epaisseur=n,this.opacite=arguments.length>=5?i:"100",this.styleTrait=arguments.length>=6?s:"continu";const o=parseFloat(this.opacite/100);this.style="stroke:"+r+";stroke-width:"+n+";stroke-opacity:"+o+";stroke-linecap:round;","tiret"===this.styleTrait&&(this.style+="stroke-dasharray:10 8 10;")}Xt.prototype=new X;const Zt=Kt;function Kt(t,e,r,n,i,s,o,a,u,l,c){this.x=parseFloat(r),this.y=parseFloat(n),this.ray=parseFloat(i),this.ang1=parseFloat(s),this.ang2=parseFloat(o),this.motif=null==c?"simple":c,Yt.call(this,t,e,a,u,1),this.opaciteRemplissage=null==l?.7:parseFloat(l)/100,this.objet="angle"}Kt.prototype=new Yt,Kt.prototype.creeg=function(){let e,n,i,s,o,a,u,c,p,h;const f=this.motif,d=this.ray,m=this.ang1,g=this.ang2,y=g-m,v=l(y);var b;b=Math.abs(y)-180,e=Math.abs(b)<1e-7?this.ang1<=this.ang2:v>0;const x=new k(this.x,this.y,this.x+Math.cos(m*r),this.y+Math.sin(m*r)).vecteurColineaire(d),_=new k(this.x,this.y,this.x+Math.cos(g*r),this.y+Math.sin(g*r)).vecteurColineaire(d);let w=this.x+x.x,E=this.y+x.y,S=this.x+_.x,A=this.y+_.y;const N=document.createElementNS(t,"g");let M=document.createElementNS(t,"path");const C=-1!==f.indexOf("plein")?this.couleur:"none";n="none"!==C?"M"+this.x+" "+this.y+"L"+w+" "+E+"A"+d+" "+d+" "+this.ang1+" 0 "+(e?"1 ":"0 ")+S+" "+A+" Z":"M"+w+" "+E+"A"+d+" "+d+" "+this.ang1+" 0 "+(e?"1 ":"0 ")+S+" "+A,M.setAttribute("d",n);const T="stroke:"+this.couleur+";stroke-width:"+this.epaisseur+";",O=T+"fill:"+C+";fill-opacity:"+this.opaciteRemplissage+";";M.setAttribute("style",O),N.appendChild(M);const I=-1!==f.indexOf("O"),P=x.tourne(v/2),R=this.x+P.x,L=this.y+P.y;if(I){const e=document.createElementNS(t,"circle");e.setAttribute("r",5),e.setAttribute("cx",R),e.setAttribute("cy",L),e.setAttribute("style",T+"fill:none;"),N.appendChild(e)}const D=-1!==f.indexOf("triple")?2:-1!==f.indexOf("double")?1:0;for(let r=1;r<=D;r++){M=document.createElementNS(t,"path");const i=d-5*r,s=x.vecteurColineaire(i),o=_.vecteurColineaire(i);w=this.x+s.x,E=this.y+s.y,S=this.x+o.x,A=this.y+o.y,n="M"+w+" "+E+"A"+i+" "+i+" "+this.ang1+" 0 "+(e?"1 ":"0 ")+S+" "+A,M.setAttribute("d",n),M.setAttribute("style",T+"fill:none;"),N.appendChild(M)}const q=-1!==f.indexOf("///")?3:-1!==f.indexOf("//")?2:-1!==f.indexOf("/")?1:0;if(0===q)return void(this.g=N);const B=D+1,U=P.vecteurColineaire(1);switch(q){case 1:u=this.x+U.x*d,c=this.y+U.y*d,i=document.createElementNS(t,"line"),i.setAttribute("x1",u-5*U.x*B),i.setAttribute("y1",c-5*U.y*B),i.setAttribute("x2",u+5*U.x),i.setAttribute("y2",c+5*U.y),i.setAttribute("style",O),N.appendChild(i);break;case 2:p=v/6,h=6,Math.abs(p)>=Math.abs(h)&&(p=h),s=U.tourne(p),o=this.x+s.x*d,a=this.y+s.y*d,i=document.createElementNS(t,"line"),i.setAttribute("x1",o-5*U.x*B),i.setAttribute("y1",a-5*U.y*B),i.setAttribute("x2",o+5*U.x),i.setAttribute("y2",a+5*U.y),i.setAttribute("style",O),N.appendChild(i),s=U.tourne(-p),o=this.x+s.x*d,a=this.y+s.y*d,i=document.createElementNS(t,"line"),i.setAttribute("x1",o-5*U.x*B),i.setAttribute("y1",a-5*U.y*B),i.setAttribute("x2",o+5*U.x),i.setAttribute("y2",a+5*U.y),i.setAttribute("style",O),N.appendChild(i);break;case 3:u=this.x+U.x*d,c=this.y+U.y*d,i=document.createElementNS(t,"line"),i.setAttribute("x1",u-5*U.x*B),i.setAttribute("y1",c-5*U.y*B),i.setAttribute("x2",u+5*U.x),i.setAttribute("y2",c+5*U.y),i.setAttribute("style",O),N.appendChild(i),p=v/4,h=9,Math.abs(p)>=Math.abs(h)&&(p=h),s=U.tourne(p),o=this.x+s.x*d,a=this.y+s.y*d,i=document.createElementNS(t,"line"),i.setAttribute("x1",o-5*U.x*B),i.setAttribute("y1",a-5*U.y*B),i.setAttribute("x2",o+5*U.x),i.setAttribute("y2",a+5*U.y),i.setAttribute("style",O),N.appendChild(i),s=U.tourne(-p),o=this.x+s.x*d,a=this.y+s.y*d,i=document.createElementNS(t,"line"),i.setAttribute("x1",o-5*U.x*B),i.setAttribute("y1",a-5*U.y*B),i.setAttribute("x2",o+5*U.x),i.setAttribute("y2",a+5*U.y),i.setAttribute("style",O),N.appendChild(i)}this.g=N};const Jt=Qt;function Qt(t,e,r,n,i,s,o,a){this.xsommet=parseFloat(r),this.ysommet=parseFloat(n),this.xinter=parseFloat(i),this.yinter=parseFloat(s),Yt.call(this,t,e,o,a,100),this.objet="angle_droit"}Qt.prototype=new Yt,Qt.prototype.creeg=function(){let e=new k(this.xsommet,this.ysommet,this.xinter,this.yinter);const r=e.norme();e=e.vecteurColineaire(r/Math.sqrt(2)),e=e.tourne(45);const n=e.tourne(-90),i=document.createElementNS(t,"polyline"),s=String(this.xsommet+e.x)+" "+String(this.ysommet+e.y)+" "+this.xsommet+" "+this.ysommet+" "+String(this.xsommet+n.x)+" "+String(this.ysommet+n.y);i.setAttribute("points",s),i.setAttribute("style",this.style+"fill:none;"),this.g=i};const te=ee;function ee(t,e,r,n,i,s,o,a,u,l,c){this.x=parseFloat(r),this.y=parseFloat(n),this.ray=parseFloat(i),this.debut=parseFloat(s),this.fin=parseFloat(o),Yt.call(this,t,e,a,u,l,c)}ee.prototype=new Yt,ee.prototype.creeg=function(){const e=this.debut,n=this.fin,i=this.ray,s=e<n?"1":"0",o=Math.abs(n-e),a=document.createElementNS(t,"g");if(o>=359.9){const e=document.createElementNS(t,"circle");e.setAttribute("r",i),e.setAttribute("cx",0),e.setAttribute("cy",0),e.setAttribute("style",this.style+";fill:none;"),a.appendChild(e)}else{const u=document.createElementNS(t,"path"),l=new k(Math.cos(e*r)*i,Math.sin(e*r)*i),c=new k(Math.cos(n*r)*i,Math.sin(n*r)*i),p="M"+l.x+" "+l.y+"A"+i+" "+i+" "+e+" "+(o>180?"1":"0")+" "+s+" "+c.x+" "+c.y;u.setAttribute("d",p),u.setAttribute("style",this.style+";fill:none"),a.appendChild(u)}a.setAttribute("transform","translate("+this.x+","+this.y+")"),a.setAttribute("visibility","hidden"),this.g=a},ee.prototype.creationAnimee=function(){return!0},ee.prototype.lanceAnimation=function(t){const e=this.doc.compas;null==this.doc.compasLeve&&(this.doc.compasLeve=new ct(this.doc,e.x,e.y,e.angle,e.ecart));const r=this.doc.compasLeve;this.ray=this.doc.compas.ecart,this.angfin=this.fin,this.pasdeg=t/2,this.pasdeg*=this.fin>=this.debut?1:-1,this.distang=Math.abs(this.fin-this.debut),this.fin=this.debut,e.setPosition(this.x,this.y,this.debut),r.setPosition(this.x,this.y,this.debut);const n=this;this.timer=setInterval((function(){n.actionPourAnimation()}),25)},ee.prototype.actionPourAnimation=function(){const t=this.doc.compas,e=this.doc.compasLeve;this.fin+=this.pasdeg;const r=Math.abs(this.angfin-this.fin);r>this.distang||!this.doc.animationEnCours?(this.fin=this.angfin,this.updateg(),this.finAction(),clearInterval(this.timer),this.doc.actionSuivante()):(this.distang=r,this.updateg(),t.setPosition(this.x,this.y,this.fin),null!==e&&e.setPosition(this.x,this.y,this.fin))},ee.prototype.finAction=function(){this.doc.compas.setPosition(this.x,this.y,this.fin),null!==this.doc.compasLeve&&this.doc.compasLeve.setPosition(this.x,this.y,this.fin)};const re=ne;function ne(t,e,r,n,i,s,o,a,u,l){Yt.call(this,t,e,o,a,l,"continu"),this.x=parseFloat(r),this.y=parseFloat(n),this.ray=null===i?10:parseFloat(i),this.ecartAngle=parseFloat(s),this.couleur=o,this.couleurFond=null===u?o:u,this.angle=0,this.objet="gabarit"}ne.prototype=new Yt,ne.prototype.creationAnimee=function(){return!1},ne.prototype.creeg=function(){const e=this.ecartAngle,n=this.ray,i=e>=0?"1":"0",s=Math.abs(e),o=document.createElementNS(t,"g"),a=document.createElementNS(t,"path"),u=new k(Math.cos(e*r)*n,Math.sin(e*r)*n),l="M 0 0 L "+n+" 0 A "+n+" "+n+" 0 "+(s>180?"1":"0")+" "+i+" "+u.x+" "+u.y+" Z";a.setAttribute("d",l);const c=parseFloat(this.opacite/100),p="stroke:"+this.couleur+";stroke-width:"+this.epaisseur+";fill:"+this.couleurFond+";fill-opacity:"+c+";";a.setAttribute("style",p),o.appendChild(a),o.setAttribute("transform","translate("+this.x+","+this.y+") rotate("+this.angle+")"),o.setAttribute("visibility","hidden"),this.g=o},ne.prototype.donneRayon=function(t){this.ray=t,this.updateg(),this.setPosition(this.x,this.y,this.angle)},ne.prototype.setPosition=function(t,e,r){this.x=t,this.y=e,this.angle=r,this.g.setAttribute("transform","translate("+t+","+e+") rotate("+r+")")},ne.prototype.lanceAnimationModificationRayon=function(t,e){this.rayFin=t,this.rayInit=this.ray;const r=t-this.ray;if(this.dist=Math.abs(r),this.dray=Math.sign(r)*Math.abs(e/4),0===this.dist)return;const n=this;this.timer=setInterval((function(){n.actionPourModificationRayon()}),25)},ne.prototype.actionPourModificationRayon=function(){const t=this.ray+this.dray,e=Math.abs(t-this.rayInit);e>this.dist||!this.doc.animationEnCours?(this.donneRayon(this.rayFin),clearInterval(this.timer),this.doc.actionSuivante()):(this.dist=e,this.donneRayon(t))};const ie=se;function se(t,e,r,n,i,s,o,a,u,l){X.call(this,t,"axeIEP",l),this.pente=null==e?"horizontal":e,this.largeur=r,this.haut=null==n?0:parseFloat(n),this.gauche=null==i?0:parseFloat(i),this.distanceBord=parseFloat(s),this.xgrad=o,this.xmin=a,this.xmax=u,this.cadre={},this.cadre.gauche=30*this.gauche,this.cadre.haut=30*this.haut,this.width=30*r,this.cadre.droite=this.gauche+this.width,this.cadre.bas=this.haut+this.width}se.prototype=new X,se.prototype.creeg=function(){let e,r,n,i;this.g=document.createElementNS(t,"g");const s="stroke:black;stroke-width:1;";"horizontal"===this.pente&&this.xmax-this.xmin>this.xgrad?(r=Math.floor((this.xmax-this.xmin)/this.xgrad),n=30*this.distanceBord,i=w(this.xmin,this.xmax,this.xgrad),this.tracer_abscisses(i,this.xgrad,r,n),e=document.createElementNS(t,"line"),e.setAttribute("style",s),e.setAttribute("x1",this.cadre.gauche),e.setAttribute("y1",n),e.setAttribute("x2",this.cadre.droite),e.setAttribute("y2",n),this.g.appendChild(e)):this.xmax-this.xmin>this.xgrad&&(r=Math.floor((this.xmax-this.xmin)/this.xgrad),n=30*Number(this.distanceBord),i=w(this.xmin,this.xmax,this.xgrad),this.tracer_ordonnees(i,this.xgrad,r,n),e=document.createElementNS(t,"line"),e.setAttribute("style",s),e.setAttribute("x1",n),e.setAttribute("y1",this.cadre.bas),e.setAttribute("x2",n),e.setAttribute("y2",this.cadre.haut),this.g.appendChild(e))},se.prototype.tracer_abscisses=function(e,r,n,i){let s,o,a,u;const l="stroke:black;stroke-width:1.5;";for(s=document.createElementNS(t,"line"),s.setAttribute("style",l),s.setAttribute("x1",this.cadre.gauche),s.setAttribute("y1",i),s.setAttribute("x2",this.cadre.droite),s.setAttribute("y2",i),this.g.appendChild(s),u=0;u<=n;u++){s=document.createElementNS(t,"line"),s.setAttribute("style",l),a=this.mettre_x_en_pixels(e+u*r),s.setAttribute("x1",a),s.setAttribute("y1",String(i-5)),s.setAttribute("x2",a),s.setAttribute("y2",String(i+5)),this.g.appendChild(s),o=document.createElementNS(t,"text"),o.setAttribute("x",a),o.setAttribute("y",i+12+5);const n="text-anchor:left;font-size:12px;fill:"+this.couleur+";";o.setAttribute("style",n),o.appendChild(document.createTextNode(String(e+u*r))),this.g.appendChild(o)}},se.prototype.tracer_ordonnees=function(e,r,n,i){let s,o,a;const u="stroke:black;stroke-width:1.5;";for(s=document.createElementNS(t,"line"),s.setAttribute("style",u),s.setAttribute("x1",i),s.setAttribute("y1",this.cadre.haut),s.setAttribute("x2",i),s.setAttribute("y2",this.cadre.bas),this.g.appendChild(s),a=0;a<=n;a++){s=document.createElementNS(t,"line"),s.setAttribute("style",u);const n=this.mettre_y_en_pixels(e+a*r);s.setAttribute("x1",String(i-5)),s.setAttribute("y1",n),s.setAttribute("x2",String(i+5)),s.setAttribute("y2",n),this.g.appendChild(s),o=document.createElementNS(t,"text"),o.setAttribute("x",i+10),o.setAttribute("y",n+2);const l="text-anchor:left;font-size:12px;fill:"+this.couleur+";";o.setAttribute("style",l),o.appendChild(document.createTextNode(String(e+a*r))),this.g.appendChild(o)}},se.prototype.mettre_x_en_pixels=function(t){return d(t,this.xmin,this.xmax,this.cadre.gauche,this.cadre.droite)},se.prototype.mettre_y_en_pixels=function(t){return d(t,this.xmax,this.xmin,this.cadre.haut,this.cadre.bas)};const oe=ae;function ae(t,e,r,n,i,s,o,a,u,l){this.x1=parseFloat(r),this.y1=parseFloat(n),this.x2=parseFloat(i),this.y2=parseFloat(s),Yt.call(this,t,e,o,a,u,l)}ae.prototype=new Yt,ae.prototype.creeg=function(){const e=document.createElementNS(t,"g"),r=document.createElementNS(t,"line");r.setAttribute("x1",this.x1),r.setAttribute("y1",this.y1),r.setAttribute("x2",this.x2),r.setAttribute("y2",this.y2),r.setAttribute("style",this.style),e.appendChild(r),e.setAttribute("visibility","hidden"),this.g=e},ae.prototype.creationAnimee=function(){return!0},ae.prototype.lanceAnimation=function(t){this.vitesse=t/4;const e=new k(this.x1,this.y1,this.x2,this.y2);if(this.dist=e.norme(),u(this.dist))return void this.doc.actionSuivante();this.vect=e.vecteurColineaire(1.8*this.vitesse),this.xfin=this.x2,this.yfin=this.y2,this.x2=this.x1,this.y2=this.y1;const r=this.doc.crayon;r.setPosition(this.x1,this.y1,r.angle);const n=this;this.timer=setInterval((function(){n.actionPourAnimation(n)}),25)},ae.prototype.actionPourAnimation=function(){this.x2+=this.vect.x,this.y2+=this.vect.y;const t=new k(this.x1,this.y1,this.x2,this.y2).norme(),e=this.doc.crayon;t>this.dist||!this.doc.animationEnCours?(this.x2=this.xfin,this.y2=this.yfin,this.finAction(),this.updateg(),clearInterval(this.timer),this.doc.actionSuivante()):(e.translate(this.x2,this.y2),this.updateg())},ae.prototype.finAction=function(){this.doc.crayon.translate(this.x2,this.y2)};const ue=le;function le(t,e,r,n,i,s,o,a,u,l){oe.call(this,t,e,r,n,i,s,o,a,u,l)}le.prototype=new oe,le.prototype.creeg=function(){if(this.calcule(),this.horsFenetre)this.g=document.createElementNS(t,"g");else{const e=document.createElementNS(t,"line");e.setAttribute("x1",this.xext1),e.setAttribute("y1",this.yext1),e.setAttribute("x2",this.xext2),e.setAttribute("y2",this.yext2),e.setAttribute("style",this.style),this.g=e}this.g.setAttribute("visibility","hidden")},le.prototype.calcule=function(){const{x1:t,y1:e,x2:r,y2:n}=this;if(t===r&&e===n)return void(this.horsFenetre=!0);this.horsFenetre=!1;const i=this.doc.getWidth(),s=this.doc.getHeight();if(t===r)return this.xext1=t,this.yext1=0,this.xext2=t,this.yext2=s,t<0||t>i?void(this.horsFenetre=!0):(this.xext1=t,this.yext1=0,this.xext2=t,void(this.yext2=s));if(e===n)return this.xext1=0,this.yext1=e,this.xext2=i,this.yext2=e,e<0||e>s?void(this.horsFenetre=!0):(this.xext1=0,this.yext1=e,this.xext2=i,void(this.yext2=e));let o=0;const a=(n-e)/(r-t),u=this.y1+a*(0-t);u>=0&&u<=s&&(o++,this.xext1=0,this.yext1=u);const l=i,c=a*(l-t)+e;if(c>=0&&c<=s){if(o++,1!==o)return this.xext2=l,void(this.yext2=c);this.xext1=l,this.yext1=c}const p=(0-e)/a+t;if(p>0&&p<i){if(o++,1!==o)return this.xext2=p,void(this.yext2=0);this.xext1=p,this.yext1=0}const h=s,f=(h-e)/a+t;f>0&&f<=i?(o++,2===o?(this.xext2=f,this.yext2=h):this.horsFenetre=!0):this.horsFenetre=!0,this.horsFenetre&&(this.xext1=0,this.yext1=u,this.xext2=l,this.yext2=c)};const ce=pe;function pe(t,e,r,n,i,s,o,a,u,l){ue.call(this,t,e,r,n,i,s,o,a,u,l)}pe.prototype=new ue,pe.prototype.calcule=function(){ue.prototype.calcule.call(this);const t=new k(this.x1,this.y1,this.x2,this.y2);if(this.horsFenetre)return;const e=new k(this.x1,this.y1,this.xext1,this.yext1);if(e.presqueNul()){const e=new k(this.x1,this.y1,this.xext2,this.yext2);x(e,t)?(this.xext1=this.x1,this.yext1=this.y1):(this.xext2=this.xext1,this.yext2=this.yext1,this.xext1=this.x1,this.yext1=this.y1)}else x(e,t)?(this.xext2=this.xext1,this.yext2=this.yext1,this.xext1=this.x1,this.yext1=this.y1):(this.xext1=this.x1,this.yext1=this.y1)};const he=fe;function fe(t,e,r){this.doc=t,this.id=e,this.url=r,this.x=0,this.y=0,this.angle=0,this.objet="image",this.zoomfactor=1}fe.prototype=new X,fe.prototype.initialisePosition=function(){this.x=0,this.y=0,this.angle=0,this.zoomfactor=1,this.positionne()},fe.prototype.prepareAction=function(){const t=new Image;t.owner=this,this.action=new Q(this.doc,this.id,this),this.action.isReady=!1,this.doc.ajouteAction(this.action),t.onload=function(){const t=this.owner;t.width=this.width,t.height=this.height,t.action.isReady=!0},t.src=this.url},fe.prototype.creeg=function(){const e=document.createElementNS(t,"image");e.setAttribute("width",this.width),e.setAttribute("height",this.height),e.setAttributeNS("http://www.w3.org/1999/xlink","href",this.url),e.setAttribute("x",this.x),e.setAttribute("y",this.y),e.setAttribute("visibility","hidden"),this.g=e,this.setPosition(this.x,this.y,this.angle,this.zoomfactor),this.doc.svg.appendChild(e)},fe.prototype.setPosition=function(t,e,r,n){this.x=t,this.y=e,this.angle=r,this.zoomfactor=n,this.g?this.g.setAttribute("transform","scale("+n+") translate("+String(t/n)+","+String(e/n)+") rotate("+r+")"):console.error("Il faut appeler imag.creeg avant imag.setPosition")},fe.prototype.positionne=function(){this.setPosition(this.x,this.y,this.angle,this.zoomfactor)};const de=me;function me(t,e,r,n,i,s,o,a,u,l){Yt.call(this,t,e,o,a,u,l),this.xdeb=r,this.ydeb=n,this.abs=i.split(","),this.ord=s.split(","),this.objet="trait"}me.prototype=new Yt,me.prototype.creeg=function(){let e,r;const n=document.createElementNS(t,"polyline");for(e=this.xdeb+" "+this.ydeb,r=0;r<this.abs.length;r++)e+=" "+this.abs[r]+" "+this.ord[r];n.setAttribute("points",e),n.setAttribute("style",this.style+"fill:none;"),n.setAttribute("visibility","hidden"),this.g=n},me.prototype.creationAnimee=function(){return!0},me.prototype.lanceAnimation=function(){this.sauveabs=this.abs,this.sauveord=this.ord,this.abs=[],this.ord=[],this.ind=-1;const t=this;this.timer=setInterval((function(){t.actionPourAnimation()}),25)},me.prototype.actionPourAnimation=function(){this.ind++;const t=this.doc.crayon;if(this.ind>=this.sauveabs.length)this.abs=this.sauveabs,this.ord=this.sauveord,this.updateg(),clearInterval(this.timer),this.finAction(),this.doc.actionSuivante();else{const e=this.sauveabs[this.ind],r=this.sauveord[this.ind];this.abs.push(e),this.ord.push(r),this.updateg(),t.setPosition(parseFloat(e),parseFloat(r),t.angle),this.updateg()}},me.prototype.finAction=function(){const t=this.abs.length;this.doc.crayon.translate(parseFloat(this.abs[t-1]),parseFloat(this.ord[t-1]))};const ge=ye;function ye(t,e,r,n,i,s,o){this.x=parseFloat(r),this.y=parseFloat(n),this.motif=o,Yt.call(this,t,e,i,s,100),this.objet="longueur"}ye.prototype=new Yt,ye.prototype.creeg=function(){let e,r,n;const i=2.5;switch(this.motif){case"/":e=document.createElementNS(t,"line"),e.setAttribute("x1",5),e.setAttribute("y1",-5),e.setAttribute("x2",-5),e.setAttribute("y2",5),e.setAttribute("style",this.style);break;case"\\":e=document.createElementNS(t,"line"),e.setAttribute("x1",-5),e.setAttribute("y1",-5),e.setAttribute("x2",5),e.setAttribute("y2",5),e.setAttribute("style",this.style);break;case"//":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n+=2)r=document.createElementNS(t,"line"),r.setAttribute("x1",n*i+5),r.setAttribute("y1",-5),r.setAttribute("x2",n*i-5),r.setAttribute("y2",5),r.setAttribute("style",this.style),e.appendChild(r);break;case"///":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n++)r=document.createElementNS(t,"line"),r.setAttribute("x1",5*n+5),r.setAttribute("y1",-5),r.setAttribute("x2",5*n-5),r.setAttribute("y2",5),r.setAttribute("style",this.style),e.appendChild(r);break;case"\\\\":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n+=2)r=document.createElementNS(t,"line"),r.setAttribute("x1",n*i-5),r.setAttribute("y1",-5),r.setAttribute("x2",n*i+5),r.setAttribute("y2",5),r.setAttribute("style",this.style),e.appendChild(r);break;case"\\\\\\":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n++)r=document.createElementNS(t,"line"),r.setAttribute("x1",5*n-5),r.setAttribute("y1",-5),r.setAttribute("x2",5*n+5),r.setAttribute("y2",5),r.setAttribute("style",this.style),e.appendChild(r);break;case"X":e=document.createElementNS(t,"g"),r=document.createElementNS(t,"line"),r.setAttribute("x1",-5),r.setAttribute("y1",-5),r.setAttribute("x2",5),r.setAttribute("y2",5),r.setAttribute("style",this.style),e.appendChild(r),r=document.createElementNS(t,"line"),r.setAttribute("x1",5),r.setAttribute("y1",-5),r.setAttribute("x2",-5),r.setAttribute("y2",5),r.setAttribute("style",this.style),e.appendChild(r);break;case"O":e=document.createElementNS(t,"circle"),e.setAttribute("cx",0),e.setAttribute("cy",0),e.setAttribute("r",5),e.setAttribute("style",this.style+"fill:none;");break;default:e=document.createElementNS(t,"g")}this.g=e},ye.prototype.positionne=function(){this.g.setAttribute("transform","translate("+this.x+","+this.y+")")},ye.prototype.translate=function(t,e){this.x=t,this.y=e,this.positionne()};const ve=be;function be(t,e,r,n,i,s,o,a,u,l,c){oe.call(this,t,e,r,n,i,s,o,a,u,l),this.stylefleche=c}be.prototype=new oe,be.prototype.creeg=function(){if(oe.prototype.creeg.call(this),"vecteur"===this.stylefleche){const e=12,r=this.x1,n=this.x2,o=this.y1,a=this.y2,u=new k(n,a,r,o).vecteurColineaire(e),l=new k(u.x*i-u.y*s,u.x*s+u.y*i),c=new k(u.x*i+u.y*s,-u.x*s+u.y*i),p=String(n+l.x)+" "+String(a+l.y)+","+n+" "+a+","+String(n+c.x)+" "+String(a+c.y),h=document.createElementNS(t,"polyline");h.setAttribute("points",p);const f="stroke:"+this.couleur+";stroke-width:"+this.epaisseur+";stroke-opacity:"+this.opacite+";fill:none";h.setAttribute("style",f),this.g.appendChild(h)}};const xe=_e;function _e(t,e,r,n,i,s,o){this.idSeg=r,this.motif=s,this.rayon=null!==o?o:"5",Yt.call(this,t,e,n,i,100),this.objet="marque"}_e.prototype=new Yt,_e.prototype.creeg=function(){let e,r,n;if(this.doc.getElement(this.idSeg,"trait")instanceof ve){const i=this.rayon,s=5,o=s/2,a=5;switch(this.motif){case"/":e=document.createElementNS(t,"line"),e.setAttribute("x1",i),e.setAttribute("y1",-i),e.setAttribute("x2",-i),e.setAttribute("y2",i),e.setAttribute("style",this.style);break;case"\\":e=document.createElementNS(t,"line"),e.setAttribute("x1",-i),e.setAttribute("y1",-i),e.setAttribute("x2",i),e.setAttribute("y2",i),e.setAttribute("style",this.style);break;case"//":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n+=2)r=document.createElementNS(t,"line"),r.setAttribute("x1",n*o+i),r.setAttribute("y1",-i),r.setAttribute("x2",n*o-i),r.setAttribute("y2",i),r.setAttribute("style",this.style),e.appendChild(r);break;case"///":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n++)r=document.createElementNS(t,"line"),r.setAttribute("x1",n*s+i),r.setAttribute("y1",-i),r.setAttribute("x2",n*s-i),r.setAttribute("y2",i),r.setAttribute("style",this.style),e.appendChild(r);break;case"\\\\":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n+=2)r=document.createElementNS(t,"line"),r.setAttribute("x1",n*o-i),r.setAttribute("y1",-i),r.setAttribute("x2",n*o+i),r.setAttribute("y2",i),r.setAttribute("style",this.style),e.appendChild(r);break;case"\\\\\\":for(e=document.createElementNS(t,"g"),n=-1;n<=1;n++)r=document.createElementNS(t,"line"),r.setAttribute("x1",n*s-i),r.setAttribute("y1",-i),r.setAttribute("x2",n*s+i),r.setAttribute("y2",i),r.setAttribute("style",this.style),e.appendChild(r);break;case"X":e=document.createElementNS(t,"g"),r=document.createElementNS(t,"line"),r.setAttribute("x1",-i),r.setAttribute("y1",-i),r.setAttribute("x2",i),r.setAttribute("y2",i),r.setAttribute("style",this.style),e.appendChild(r),r=document.createElementNS(t,"line"),r.setAttribute("x1",i),r.setAttribute("y1",-i),r.setAttribute("x2",-i),r.setAttribute("y2",i),r.setAttribute("style",this.style),e.appendChild(r);break;case"O":e=document.createElementNS(t,"circle"),e.setAttribute("cx",0),e.setAttribute("cy",0),e.setAttribute("r",a),e.setAttribute("style",this.style+"fill:none;");break;default:e=document.createElementNS(t,"g")}}else console.log("Maque de segment non associée à un objet segment"),e=document.createElementNS(t,"g");this.g=e},_e.prototype.positionne=function(){const t=this.doc.getElement(this.idSeg,"trait"),e=new k(t.x1,t.y1,t.x2,t.y2),r=(t.x1+t.x2)/2,n=(t.y1+t.y2)/2,i=-e.angle();this.g.setAttribute("transform","translate("+r+","+n+") rotate("+i+") ")},_e.prototype.translate=function(t,e){this.x=t,this.y=e,this.positionne()};var we=__webpack_require__(42987);const Ee=Se;function Se(t,e,r,n,i,s){X.call(this,t,e,s),this.dx=null==r?2:parseFloat(r),this.dy=null==n?4:parseFloat(n),this.nom=m(g(i)),this.taille=20,this.point=this.doc.getElement(this.id,"point"),this.objet="point",this.nom=this.nom.replace(/\*/g,"×"),S(i)?(this.nom="$"+this.traiteMaths(this.nom)+"$",this.estLatex=!0):this.estLatex=!1}Se.prototype=new X,Se.prototype.creeg=function(){let e,r,n,i,s,a,u,l,c,f,d,m,g,y,v,b,x,_,w=0;const S="<",A="£e(",N="£i(",k=document.createElementNS(t,"g"),C=M(this),T=C+2;let O=0;const I=.4*C;if(0!==this.nom.length){if(a=document.createElementNS(t,"text"),a.setAttribute("pointer-events","none"),a.setAttribute("x",0),a.setAttribute("y",0),s="text-anchor:left;font-size:"+C+"px;fill:"+this.couleur+";",a.setAttribute("style",s),i=this.nom.replace(/ /g," "),-1===this.nom.indexOf(S)&&-1===this.nom.indexOf(A)&&-1===this.nom.indexOf(N)&&-1===this.nom.indexOf("<br>"))a.appendChild(document.createTextNode(i));else for(v=i.split(/<br>/gi),y=-T,b=0;b<v.length;b++)for(x=!0,n=v[b];0!==n.length;){if(e=n.indexOf(S),l=n.indexOf(A),c=n.indexOf(N),x&&(y+=T+O),-1!==l&&(y+=I),-1===e&&-1===l&&-1===c){r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.setAttribute("dy",w),x&&(r.setAttribute("x",0),r.setAttribute("y",y),x=!1),w=0,r.appendChild(document.createTextNode(n)),a.appendChild(r);break}for(;-1!==n.indexOf(S)||-1!==n.indexOf(A)||-1!==n.indexOf(N);)if(e=n.indexOf(S),l=n.indexOf(A),c=n.indexOf(N),f=-1===e?-1===l?c:-1===c?l:Math.min(c,l):-1===l?-1===c?e:Math.min(e,c):-1===c?Math.min(e,l):Math.min(e,c,l),f>0)r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.setAttribute("dy",w),x&&(r.setAttribute("x",0),r.setAttribute("y",y),x=!1),w=0,r.appendChild(document.createTextNode(n.substring(0,f))),a.appendChild(r),n=n.substring(f);else if(0===e){const t=new o(!1,!1,!1,this.couleur,"",C);u=p(n),E(-1===u?n:n.substring(0,u),t,a,x,y),x=!1,n=-1!==u?n.substring(u):"",w=0}else d=f===l,_=h(n),r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.setAttribute("dy",w+"px"),x&&(r.setAttribute("x",0),r.setAttribute("y",y),x=!1),_.erreur?r.appendChild(document.createTextNode(n)):(r.appendChild(document.createTextNode(_.operande)),a.appendChild(r),r=document.createElementNS(t,"tspan"),r.setAttribute("pointer-events","none"),r.appendChild(document.createTextNode(_.exposant)),w=I,d?w=-w:O=w,r.setAttribute("dy",w+"px"),m=.6*C,g="font-size:"+m+"px;",r.setAttribute("style",g),a.appendChild(r),w=-w),n=_.texte}k.appendChild(a),this.g=k}k.setAttribute("visibility","hidden")},Se.prototype.creegLatex=function(){try{const e=document.createElementNS(t,"g"),r=this.html.firstChild,n=r.cloneNode(!0);e.appendChild(n);const i=parseFloat(r.getAttribute("width"))*this.ex,s=parseFloat(r.getAttribute("height"))*this.ex,o=n.style["vertical-align"],a=(o&&parseFloat(o)||1)*this.ex;n.setAttribute("width",i+"px"),n.setAttribute("height",s+"px"),(0,we.setStyles)(n,"vertical-align",a+"px"),n.setAttribute("x","0");const u=M(this);n.setAttribute("y",String(-u)),n.setAttribute("visibility","hidden"),this.g=e}catch(e){console.error(e,"on remplace par un <g> vide"),this.g=document.createElementNS(t,"g")}},Se.prototype.positionne=function(){null===this.point&&(this.point=this.doc.getElement(this.id,"point"));const t=this.point.x,e=this.point.y,r=M(this);this.g.setAttribute("transform","translate("+String(t+this.dx)+","+String(e+this.dy+r)+")")},Se.prototype.traiteMaths=function(t){return N(t,!0)};const Ae=Ne;function Ne(t,e,r,n,i,s){this.x=parseFloat(r),this.y=parseFloat(n),this.xinit=this.x,this.yinit=this.y,this.xcons=this.x,this.ycons=this.y,Yt.call(this,t,e,i,s),this.style+="stroke-linecap:round;",this.nom=null,this.objet="point"}Ne.prototype=new Yt,Ne.prototype.initialisePosition=function(){this.x=this.xinit,this.y=this.yinit,this.positionne()},Ne.prototype.creeg=function(){const e=document.createElementNS(t,"g");let r;r=document.createElementNS(t,"line"),r.setAttribute("x1",-5),r.setAttribute("y1",5),r.setAttribute("x2",5),r.setAttribute("y2",-5),r.setAttribute("style",this.style),e.appendChild(r),r=document.createElementNS(t,"line"),r.setAttribute("x1",-5),r.setAttribute("y1",-5),r.setAttribute("x2",5),r.setAttribute("y2",5),r.setAttribute("style",this.style),e.appendChild(r),this.g=e},Ne.prototype.positionne=function(){this.g.setAttribute("transform","translate("+this.x+","+this.y+")")},Ne.prototype.translate=function(t,e){this.x=t,this.y=e,this.positionne(),null!==this.nom&&this.nom.positionne()},Ne.prototype.updateg=function(){this.setPosition(this.x,this.y)},Ne.prototype.montre=function(t){X.prototype.montre.call(this,t),null!==this.nom&&this.nom.g&&this.nom.montre(t)};const Me=ke;function ke(t,e,r,n,i,s,o,a){X.call(this,t,e,i),this.abs=r.split(","),this.ord=n.split(","),this.sauveabs=this.abs,this.sauveord=this.ord,this.epaisseur=s,this.opacite=null==a?"60":a;const u=parseFloat(this.opacite/100);this.couleurFond=null==o?this.couleur:o,this.style="stroke:"+i+";stroke-width:"+s+";fill:"+this.couleurFond+";",this.style+="fill-opacity:"+u+";",this.objet="trait"}ke.prototype=new X,ke.prototype.creeg=function(){let e,r;const n=document.createElementNS(t,"polygon");for(e="",r=0;r<this.abs.length;r++)e+=" "+this.abs[r]+" "+this.ord[r];n.setAttribute("points",e),n.setAttribute("style",this.style),n.setAttribute("visibility","hidden"),this.g=n},ke.prototype.creationAnimee=function(){return!0},ke.prototype.lanceAnimation=function(t){this.pix=parseFloat(t/2),this.abs=[],this.abs[0]=this.sauveabs[0],this.ord=[],this.ord[0]=this.sauveord[0],this.ind=0,this.n=0;const e=this.doc.crayon,r=new k(parseFloat(this.sauveabs[0]),parseFloat(this.sauveord[0]),parseFloat(this.sauveabs[1]),parseFloat(this.sauveord[1]));this.longcote=r.norme(),this.vect=r.vecteurColineaire(this.pix),e.setPosition(parseFloat(this.abs[0]),parseFloat(this.ord[0]),e.angle);const n=this;this.timer=setInterval((function(){n.actionPourAnimation()}),25)},ke.prototype.actionPourAnimation=function(){const t=this.doc.crayon;let e=this.ind;const r=parseFloat(this.abs[e]),n=parseFloat(this.ord[e]);if(this.n++,this.doc.animationEnCours)if(this.n*this.pix<=this.longcote){const i=r+this.n*this.vect.x,s=n+this.n*this.vect.y;this.abs[e+1]=String(i),this.ord[e+1]=String(s),t.translate(i,s),this.updateg()}else if(this.ind++,e++,e===this.sauveabs.length-1)clearInterval(this.timer),this.finAction(),this.doc.actionSuivante();else{this.abs[e]=this.sauveabs[e],this.ord[e]=this.sauveord[e],t.translate(parseFloat(this.abs[e]),parseFloat(this.ord[e]));const r=new k(parseFloat(this.sauveabs[e]),parseFloat(this.sauveord[e]),parseFloat(this.sauveabs[e+1]),parseFloat(this.sauveord[e+1]));this.longcote=r.norme(),this.vect=r.vecteurColineaire(this.pix),this.n=0}else clearInterval(this.timer),this.finAction(),this.doc.actionSuivante()},ke.prototype.finAction=function(){this.abs=this.sauveabs,this.ord=this.sauveord;const t=this.abs.length;this.updateg(),this.doc.crayon.translate(parseFloat(this.abs[t-1]),parseFloat(this.ord[t-1]))};const Ce=Te;function Te(t,e,r,n,i,s,o){X.call(this,t,"quadrillageIEP",o),this.hauteur=parseFloat(r),this.largeur=parseFloat(n),this.haut=null==i?0:parseFloat(i),this.gauche=null==s?0:parseFloat(s),this.type=e,this.cadre={},this.cadre.gauche=30*this.gauche,this.cadre.haut=30*this.haut,this.cadre.droite=this.cadre.gauche+30*this.largeur,this.cadre.bas=this.cadre.haut+30*this.hauteur,this.objet="quadrillage"}Te.prototype=new X,Te.prototype.creeg=function(){const e=this.cadre.gauche,r=this.cadre.droite,n=this.cadre.haut,i=this.cadre.bas,s=this.couleur;this.g=document.createElementNS(t,"g");const o=this.doc.svg.getElementById("quadrillageIEP");switch(null!=o&&this.doc.svg.removeChild(o),this.type){case"seyes":this.tracer_grille(s,24,6,e,n,r,i,!1,1),this.tracer_grille(s,24,24,e,n,r,i,!1,1);break;case"millimetre":this.tracer_grille(s,3,3,e,n,r,i,!1,.6),this.tracer_grille(s,30,30,e,n,r,i,!1,.8),this.tracer_grille(s,150,150,e,n,r,i,!1,1);break;case"10x10":case"10x":this.tracer_grille(s,30,30,e,n,r,i,!1,1);break;case"5x5":case"5x":default:this.tracer_grille(s,15,15,e,n,r,i,!1,1)}},Te.prototype.tracer_grille=function(e,r,n,i,s,o,a,u,l){let c,p;const h="stroke:"+e+";stroke-width:0.5;stroke-opacity:"+l+";";u&&(this.style+="stroke-dasharray:2 2;");let f=Math.ceil(Math.abs(o-i)/r);for(p=0;p<f;p++)c=document.createElementNS(t,"line"),c.setAttribute("style",h),c.setAttribute("x1",i+p*r),c.setAttribute("y1",s),c.setAttribute("x2",i+p*r),c.setAttribute("y2",a),c.setAttribute("style",h),this.g.appendChild(c);for(f=Math.ceil(Math.abs(a-s)/n),p=0;p<f;p++)c=document.createElementNS(t,"line"),c.setAttribute("style",h),c.setAttribute("x1",i),c.setAttribute("y1",s+p*n),c.setAttribute("x2",o),c.setAttribute("y2",s+p*n),c.setAttribute("style",h),this.g.appendChild(c)};const Oe=Ie;function Ie(t,e,r,n,i,s,o,a,u,l,c,p,h,f,d){X.call(this,t,"repereIEP",p),this.hauteur=e,this.largeur=r,this.haut=null==n?0:parseFloat(n),this.gauche=null==i?0:parseFloat(i),this.xgrad=parseFloat(s),this.ygrad=parseFloat(o),this.xmin=parseFloat(a),this.xmax=parseFloat(u),this.ymin=parseFloat(l),this.ymax=parseFloat(c),this.grille=null==h?"visible":h,this.axes=null==f?"visible":f,this.etiquettes=null==d?"visible":d,this.cadre={},this.cadre.gauche=30*this.gauche,this.cadre.haut=30*this.haut,this.cadre.droite=this.cadre.gauche+30*this.largeur,this.cadre.bas=this.cadre.haut+30*this.hauteur}Ie.prototype=new X,Ie.prototype.mettre_x_en_pixels=function(t){return d(t,this.xmin,this.xmax,this.cadre.gauche,this.cadre.droite)},Ie.prototype.mettre_y_en_pixels=function(t){return d(t,this.ymax,this.ymin,this.cadre.haut,this.cadre.bas)},Ie.prototype.tracer_abscisses=function(e,r,n,i,s,o){let a,u,l,c;const p="stroke:black;stroke-width:0.5;";for("invisible"===this.grille&&"invisible"!==this.axes&&(a=document.createElementNS(t,"line"),a.setAttribute("style",p),a.setAttribute("x1",this.cadre.gauche),a.setAttribute("y1",i),a.setAttribute("x2",this.cadre.droite),a.setAttribute("y2",i),this.g.appendChild(a)),c=0;c<=n;c++)if(a=document.createElementNS(t,"line"),a.setAttribute("style",p),l=this.mettre_x_en_pixels(e+c*r),"invisible"===this.grille?"invisible"!==this.axes&&(a.setAttribute("x1",l),a.setAttribute("y1",String(i-5)),a.setAttribute("x2",l),a.setAttribute("y2",String(i+5)),this.g.appendChild(a)):(a.setAttribute("x1",l),a.setAttribute("y1",s),a.setAttribute("x2",l),a.setAttribute("y2",o),this.g.appendChild(a)),"invisible"!==this.etiquettes&&"invisible"!==this.axes){u=document.createElementNS(t,"text"),u.setAttribute("x",l+2),u.setAttribute("y",i+12);const n="text-anchor:left;font-size:12px;fill:"+this.couleur+";";u.setAttribute("style",n),u.appendChild(document.createTextNode(String(e+c*r))),this.g.appendChild(u)}},Ie.prototype.tracer_ordonnees=function(e,r,n,i,s,o){let a,u,l,c;const p="stroke:black;stroke-width:0.5;";for("invisible"===this.grille&&"invisible"!==this.axes&&(a=document.createElementNS(t,"line"),a.setAttribute("style",p),a.setAttribute("x1",i),a.setAttribute("y1",this.cadre.haut),a.setAttribute("x2",i),a.setAttribute("y2",this.cadre.bas),this.g.appendChild(a)),c=0;c<=n;c++)if(a=document.createElementNS(t,"line"),a.setAttribute("style",p),l=this.mettre_y_en_pixels(e+c*r),"invisible"===this.grille?"invisible"!==this.axes&&(a.setAttribute("x1",String(i-5)),a.setAttribute("y1",l),a.setAttribute("x2",String(i+5)),a.setAttribute("y2",l),this.g.appendChild(a)):(a.setAttribute("x1",s),a.setAttribute("y1",l),a.setAttribute("x2",o),a.setAttribute("y2",l),this.g.appendChild(a)),"invisible"!==this.etiquettes&&"invisible"!==this.axes){u=document.createElementNS(t,"text"),u.setAttribute("x",i+2),u.setAttribute("y",l+12);const n="text-anchor:left;font-size:12px;fill:"+this.couleur+";";u.setAttribute("style",n),u.appendChild(document.createTextNode(String(e+c*r))),this.g.appendChild(u)}},Ie.prototype.creeg=function(){const e=this.cadre.droite-this.cadre.gauche,r=this.cadre.bas-this.cadre.haut;this.g=document.createElementNS(t,"g");const n=document.createElementNS(t,"defs"),i=document.createElementNS(t,"clipPath");i.setAttribute("id","clipRepere");const s="stroke:"+this.couleur+";stroke-width:1;fill:none;",o=document.createElementNS(t,"rect");if(o.setAttribute("style",s),o.setAttribute("x",this.cadre.gauche),o.setAttribute("y",this.cadre.haut),o.setAttribute("width",e),o.setAttribute("height",r),i.appendChild(o),n.appendChild(i),this.g.appendChild(n),this.g.setAttribute("style","clip-path:url(#clipRepere)"),this.xmax-this.xmin>this.xgrad){const t=Math.floor((this.xmax-this.xmin)/this.xgrad);let e;e=this.ymax*this.ymin<0?this.mettre_y_en_pixels(0):this.ymax<0?this.cadre.haut:this.cadre.bas;const r=w(this.xmin,this.xmax,this.xgrad);this.tracer_abscisses(r,this.xgrad,t,e,this.cadre.haut,this.cadre.bas)}if(this.ymax-this.ymin>this.ygrad){const t=Math.floor((this.ymax-this.ymin)/this.ygrad);let e;e=this.xmax*this.xmin<0?this.mettre_x_en_pixels(0):this.xmax<0?this.cadre.droite:this.cadre.gauche;const r=w(this.ymin,this.ymax,this.ygrad);this.tracer_ordonnees(r,this.ygrad,t,e,this.cadre.gauche,this.cadre.droite)}const a=document.createElementNS(t,"rect");a.setAttribute("style",s),a.setAttribute("x",this.cadre.gauche),a.setAttribute("y",this.cadre.haut),a.setAttribute("width",e),a.setAttribute("height",r),this.g.appendChild(a),this.g.setAttribute("visibility","hidden")};const Pe=er,Re=["compas","equerre","rapporteur","regle","requerre","crayon"],Le=["Reset","PrevStep","Pause","Play","Restart","NextStep","GotoEnd","XML"];function De(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");const a=document.createElementNS(t,"polygon");return a.setAttribute("points","-5,8 8,0 -5,-8"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function qe(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");let a=document.createElementNS(t,"rect");return a.setAttribute("x",-6),a.setAttribute("y",-7),a.setAttribute("width",3),a.setAttribute("height",14),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),a=document.createElementNS(t,"rect"),a.setAttribute("x",2),a.setAttribute("y",-7),a.setAttribute("width",3),a.setAttribute("height",14),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function Be(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");const a=document.createElementNS(t,"rect");a.setAttribute("x",5),a.setAttribute("y",-6),a.setAttribute("width",3),a.setAttribute("height",12),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a);const u=document.createElementNS(t,"polygon");return u.setAttribute("points","-7,6 2,0 -7,-6"),u.setAttribute("style","stroke:white;fill:white;"),u.setAttribute("transform","translate(16,16)"),i.appendChild(u),i}function Ue(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");const a=document.createElementNS(t,"rect");a.setAttribute("x",-7),a.setAttribute("y",-6),a.setAttribute("width",3),a.setAttribute("height",12),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a);const u=document.createElementNS(t,"polygon");return u.setAttribute("points","7,6 -2,0 7,-6"),u.setAttribute("style","stroke:white;fill:white;"),u.setAttribute("transform","translate(16,16)"),i.appendChild(u),i}function $e(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");let a=document.createElementNS(t,"polygon");return a.setAttribute("points","-6,7 1,0 -6,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),a=document.createElementNS(t,"polygon"),a.setAttribute("points","3,7 10,0 3,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function ze(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");let a=document.createElementNS(t,"polygon");return a.setAttribute("points","6,7 -1,0 6,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),a=document.createElementNS(t,"polygon"),a.setAttribute("points","-3,7 -10,0 -3,-7"),a.setAttribute("style","stroke:white;fill:white;"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function Fe(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");const a=document.createElementNS(t,"path");return a.setAttribute("d","M 0 -8 A 8 8 -90 1 1 -8 0"),a.setAttribute("style","stroke:white;stroke-width:3;fill:none;"),a.setAttribute("marker-end","url(#markerarrow"),a.setAttribute("transform","translate(16,16)"),i.appendChild(a),i}function Ge(e,r,n){const i=document.createElementNS(t,"svg");i.setAttribute("x",e),i.setAttribute("y",r),i.setAttribute("width",32),i.setAttribute("height",32);const s=document.createElementNS(t,"circle");i.appendChild(s),s.setAttribute("cx",16),s.setAttribute("cy",16),s.setAttribute("r",15);const o="fonce"===n?"filtrebleu":"filtregris";s.setAttribute("style","stroke:none;fill:url(#radial"+n+"); filter:url(#"+o+");");const a=document.createElementNS(t,"text");return a.setAttribute("pointer-events","none"),a.appendChild(document.createTextNode("XML")),a.setAttribute("x",16),a.setAttribute("y",21),a.setAttribute("style","font-family:Arial;font-size:9pt;fill:white;text-anchor:middle"),i.appendChild(a),i}function Ve(t){return t.getAttribute("id")}function je(t){return t.getAttribute("abscisse")}function He(t){const e=t.getAttribute("ordonnee");return null===e?t.getAttribute("ordonnée"):e}function We(t){const e=t.getAttribute("couleur");return e?b(e):"black"}function Ye(t){const e=t.getAttribute("couleur_cadre");return e?b(e):null}function Xe(t){const e=t.getAttribute("couleur_fond");return e?b(e):null}function Ze(t){const e=t.getAttribute("epaisseur");return null===e||0===parseInt(e)?"1":e}function Ke(t){const e=t.getAttribute("opacite");return null===e?"100":e}function Je(t){const e=t.getAttribute("opacite");return null===e?"50":e}function Qe(t){const e=t.getAttribute("pointille");return null==e?"continu":e}function tr(t){const e=t.getAttribute("style");return null==e?"normal":e}function er(t,e,r){this.svg=t,"boolean"==typeof r?(this.autoStart=r,r={}):("object"!=typeof r&&(r={}),this.autoStart=Boolean(r.autoStart)),this.debug=Boolean(r.debug),this.windowxml=null;let n=e;-1===n.search(/<?xml/gi)&&(n='<?xml version="1.0" encoding="UTF-8"?>'+n),n=n.replace(/<action[_]\d*/gi,"<action"),n=n.replace(/<!--.*-->/g,""),n=n.replace(/(="[^"]*")([^ ])/g,"$1 $2").replace(/--/g,""),n=n.replace(/<</g,"<").replace(/>>/g,">"),n=n.replace(/<action(\w)/gi,"<action $1"),n=n.replace(/<commentaire\s*texte\s*=/gi,"<commentaire texteCommentaire ="),n=function(t){let e="";const r=["objet","mouvement","vitesse","tempo","abscisse","ordonnee","id","couleur","pointille","echelle","angle","cible","texte","ecrire","rotation","translation","epaisseur","opacite","masquer","montrer","crayon","equerre","regle","compas","reglequerre","sens","hauteur","largeur","haut","gauche","Xmin","Ymin","Xmax","yMax","Xgrad","Ygrad","image","police","taille","ordonnee_bas_droite","abscisse_bas_droite","ordonnee_haut_gauche","abscisse_haut_gauche"];return t.split(/<action/gi).forEach(((t,n)=>{r.forEach((e=>{const r=new RegExp(" "+e+'[^\\w ]*= *"[\\w]*"',"i"),n=t.search(r);-1!==n&&-1!==t.substring(n+1).search(r)&&(t=t.replace(r,""))})),e+=0===n?t:"<action"+t})),e}(n),this.codexml=n;const i=/<\s*INSTRUMENPOCHE[^>]*>(.*)<\s*\/INSTRUMENPOCHE/is.exec(n);if(!i)throw Error("script xml invalide");this.chdoc="<INSTRUMENPOCHE>"+i[1]+"</INSTRUMENPOCHE>",this.actions=[],this.elements=[],this.compasRetourne=!1,this.compasLeve=null,this.compas=new I(this),this.equerre=new R(this),this.rapporteur=new D(this),this.regle=new B(this),this.requerre=new z(this),this.crayon=new G(this),this.xmldoc=function(t){let e,r;return window.DOMParser?(e=new DOMParser,r=e.parseFromString(t,"text/xml")):window.ActiveXObject?(r=new ActiveXObject("Microsoft.XMLDOM"),r.async=!1,r.loadXML(t)):console.error(Error("Votre navigateur ne peut pas analyser du XML, impossible d’utiliser instrumenpoche")),r}(this.chdoc),this.tabact=this.xmldoc.getElementsByTagName("action"),this.started=!1,this.animationEnCours=!0;const s={x:0,y:0,width:800,height:600},o=this.xmldoc.getElementsByTagName("viewBox");if(o&&o.length){o.length>1&&console.error(Error("Il y a plusieurs tags viewBox dans le script, on prend le premier"),o);const t=o[0];Object.keys(s).forEach((e=>{const r=Number(t.getAttribute(e));Number.isFinite(r)&&(e.length<2||r>0)&&(s[e]=r)}))}if(window.innerHeight>.6*s.height&&s.width/s.height<window.innerWidth/window.innerHeight)try{t.parentNode.style.width=window.innerHeight/s.height*s.width+"px"}catch(t){console.error(t)}try{t.parentNode.style.minWidth=s.width/2+"px",t.parentNode.style.minHeight=s.height/2+"px"}catch(t){console.error(t)}this.initialViewBox=s,t.setAttribute("viewBox",`${s.x} ${s.y} ${s.width} ${s.height}`),t.setAttribute("preserveAspectRatio","xMinYMin meet"),this.indiceActionEnCours=0,this.creeActions();const a=this;t.addEventListener("mousemove",(function(t){a.mousemoveListenerSvg(t,t.clientX,t.clientY)}),!1),t.addEventListener("mouseup",(function(){a.mouseupListener()}),!1),t.addEventListener("mouseleave",(function(){a.mouseleaveListener()}),!1),t.addEventListener("touchmove",(function(t){a.mousemoveListenerSvg(t,t.touches[0].pageX,t.touches[0].pageY)}),!1),t.addEventListener("touchend",(function(){a.mouseupListener()}),!1),t.addEventListener("touchcancel",(function(){a.mouseupListener()}),!1),t.addEventListener("touchleave",(function(){a.mouseleaveListener()}),!1),this.debug&&console.log("iepDoc instancié :",this)}er.prototype.setViewBox=function(t){if("object"!=typeof t||Object.keys(this.initialViewBox).some((e=>!Number.isFinite(t[e]))))throw TypeError("paramètre invalide (il faut passer un objet { x: number, y: number, width: number, height: number })");const{x:e,y:r,width:n,height:i}=t;if(n<10||i<10)throw TypeError("width et height doivent être supérieur à 10");const s=this.initialViewBox.width/n;this.svg.setAttribute("viewBox",`${e} ${r} ${n} ${i}`),this.barreIcones.setAttribute("transform",`translate(${e+this.xbarre/s}, ${r+this.ybarre/s}) scale(${1/s})`)},er.prototype.zoom=function(t,e,r){if("number"!=typeof t||t<1e-6||t>1e6)throw Error(`zoomFactor invalide : ${typeof t} ${t}`);if(1===t)return this.setViewBox(this.initialViewBox);let{x:n,y:i,width:s,height:o}=this.getViewBox();Number.isFinite(e)||(e=n+s/2),Number.isFinite(r)||(r=i+o/2),s=Math.round(s/t),o=Math.round(o/t),n=e-s/2,i=r-o/2,this.setViewBox({x:n,y:i,width:s,height:o})},er.prototype.isReadyAll=function(){if(this.debug){const t=this.actions.filter((t=>!t.isReady));t.length?console.log(`${t.length} actions pas encore prêtes (sur ${this.actions.length})`):console.log(`Les ${this.actions.length} actions sont prêtes`)}return this.actions.every((t=>t.isReady))},er.prototype.whenReady=function(t,e=30){const r=()=>this.isReadyAll()?t():Date.now()-n<1e3*e?setTimeout(r,100):void t(Error(`Après ${e}s d’attente l’animation n’est pas prête, échec du chargement…`)),n=Date.now();r()},er.prototype.getReadyPromise=function(t=30){return this.isReadyAll()?Promise.resolve():new Promise(((e,r)=>{this.whenReady((t=>{t?r(t):e(this)}),t)}))},er.prototype.getWidth=function(){return this.getViewBox().width},er.prototype.getHeight=function(){return this.getViewBox().height},er.prototype.getViewBox=function(){try{const t=this.svg.getAttribute("viewBox");if(t){const e=t.split(" ").map(Number).filter((t=>!Number.isNaN(t)));if(4===e.length){const[t,r,n,i]=e;if(n>0&&i>0)return{x:t,y:r,width:n,height:i}}}console.error(Error("viewBox invalide"),t)}catch(t){console.error(t)}return this.svg.setAttribute("viewBox","0 0 800 600"),{x:0,y:0,width:800,height:600}},er.prototype.goFast=function(t=100,e){const r=this,n=()=>{r.nextStep(),r.indiceActionEnCours<r.actions.length?setTimeout((()=>n()),t):e&&e()};this.getReadyPromise().then((()=>r.animationEnCours?(r.pause(),new Promise((t=>{setTimeout((()=>t()),500)}))):Promise.resolve())).then((()=>{r.reset(),n()})).catch((t=>{console.error(t),alert(t.message)}))},er.prototype.creeElementsGraphiques=function(){this.actions.forEach((t=>t.creegElement()))},er.prototype.initialiseOutils=function(){Re.forEach((t=>{this[t].initialisePosition(),this[t].montre(!1)})),this.compas.leve=!1},er.prototype.recreeOutils=function(){Re.forEach((t=>{this[t].updateg(),this[t].montre(!1)})),this.compasLeve=null},er.prototype.init=function(){this.started=!0,this.creeElementsGraphiques(),this.recreeOutils(),this.creeIcones(),this.autoStart?(this.montreIcones(["Pause"]),this.play()):this.montreIcones(["Play"])},er.prototype.creeIcones=function(){const e=this;this.barreIcones=document.createElementNS(t,"g"),this.creeElementsPourIcones(),this.iconReset=ze(0,0,"fonce"),this.iconResetGris=ze(0,0,"clair"),this.iconReset.onclick=this.reset.bind(this),this.barreIcones.appendChild(this.iconReset),this.barreIcones.appendChild(this.iconResetGris),this.iconPrevStep=Ue(32,0,"fonce"),this.iconPrevStepGris=Ue(32,0,"clair"),this.iconPrevStep.onclick=function(){e.prevStep()},this.barreIcones.appendChild(this.iconPrevStep),this.barreIcones.appendChild(this.iconPrevStepGris),this.iconPause=qe(64,0,"fonce"),this.iconPauseGris=qe(64,0,"clair"),this.iconPause.onclick=this.pause.bind(this),this.barreIcones.appendChild(this.iconPause),this.barreIcones.appendChild(this.iconPauseGris),this.iconPlay=De(96,0,"fonce"),this.iconPlayGris=De(96,0,"clair"),this.iconPlay.onclick=this.play.bind(this),this.barreIcones.appendChild(this.iconPlay),this.iconContinue=De(96,0,"rouge"),this.iconContinue.setAttribute("visibility","hidden"),this.iconContinue.onclick=this.continue.bind(this),this.barreIcones.appendChild(this.iconContinue),this.barreIcones.appendChild(this.iconPlayGris),this.iconRestart=Fe(128,0,"fonce"),this.iconRestartGris=Fe(128,0,"clair"),this.iconRestart.onclick=this.restart.bind(this),this.barreIcones.appendChild(this.iconRestart),this.barreIcones.appendChild(this.iconRestartGris),this.iconNextStep=Be(160,0,"fonce"),this.iconNextStepGris=Be(160,0,"clair"),this.iconNextStep.onclick=function(){e.nextStep()},this.barreIcones.appendChild(this.iconNextStep),this.barreIcones.appendChild(this.iconNextStepGris),this.iconGotoEnd=$e(192,0,"fonce"),this.iconGotoEndGris=$e(192,0,"clair"),this.iconGotoEnd.onclick=function(){e.gotoEnd()},this.barreIcones.appendChild(this.iconGotoEnd),this.barreIcones.appendChild(this.iconGotoEndGris),this.iconXML=Ge(224,0,"fonce"),this.iconXMLGris=Ge(224,0,"clair"),this.iconXML.onclick=function(){e.showXml()},this.barreIcones.appendChild(this.iconXML),this.barreIcones.appendChild(this.iconXMLGris),this.hauteurBarre=32,this.demiLargeurBarre=128,this.xbarre=50,this.ybarre=4,this.barreIcones.setAttribute("transform",`translate(${this.xbarre}, ${this.ybarre})`),this.svg.appendChild(this.barreIcones),this.isDraggingBarre=!1,this.barreIcones.addEventListener("mousedown",(function(t){e.mousedownListenerBarre(t.clientX,t.clientY)}),!1),this.barreIcones.addEventListener("mousemove",(function(t){e.mousemoveListenerBarre(t.clientX,t.clientY)}),!1),this.barreIcones.addEventListener("touchstart",(function(t){e.mousedownListenerBarre(t.touches[0].pageX,t.touches[0].pageY)}),!1),this.barreIcones.addEventListener("touchmove",this.mousemoveListenerBarre.bind(this),!1),this.deltax=0,this.deltay=0},er.prototype.mousedownListenerBarre=function(t,e){this.animationEnCours||(this.isDraggingBarre=!0,this.xcapturebarre=t,this.ycapturebarre=e)},er.prototype.mousemoveListenerBarre=function(){this.animationEnCours?(this.barreIcones.style.cursor="default",this.isDraggingBarre=!1):this.barreIcones.style.cursor="pointer"},er.prototype.mousemoveListenerSvg=function(t,e,r){if(this.isDraggingBarre){const n=this.getWidth(),i=this.getHeight(),s=e-this.xcapturebarre,o=r-this.ycapturebarre,a=this.deltax+s,u=this.deltay+o,l=this.xbarre+a,c=this.ybarre+u;l<=n-2*this.demiLargeurBarre&&l>=0&&c>=0&&c<=i-this.hauteurBarre&&(this.barreIcones.setAttribute("transform","translate("+l+","+c+")"),this.deltax=a,this.deltay=u,this.xcapturebarre=e,this.ycapturebarre=r),t.preventDefault()}},er.prototype.mouseupListener=function(){this.isDraggingBarre=!1},er.prototype.mouseleaveListener=function(){this.isDraggingBarre=!1},er.prototype.showXml=function(){null==this.windowxml?this.windowxml=this.popup():this.windowxml.focus()},er.prototype.montreIcones=function(t){Le.forEach((e=>{const r=t.includes(e),n="icon"+e;this[n]?(this[n].setAttribute("visibility",r?"visible":"hidden"),this[n+"Gris"].setAttribute("visibility",r?"hidden":"visible")):console.error(`L’icone ${n} n’existe pas`)}))},er.prototype.activeIconeContinuer=function(){this.montreIcones(["XML"]),this.iconPlayGris.setAttribute("visibility","hidden"),this.iconContinue.setAttribute("visibility","visible")},er.prototype.gotoEnd=function(){this.animationEnCours=!1,this.initialise(),this.montreIcones(["Reset","PrevStep","Restart","XML"]),this.executeJusque(this.actions.length-1),this.indiceActionEnCours=this.actions.length},er.prototype.play=function(){this.animationEnCours=!0,this.montreIcones(["Pause"]),this.actions[this.indiceActionEnCours]?this.actions[this.indiceActionEnCours].execute(!1):console.error(Error(`Pas d'action ${this.indiceActionEnCours}`),this.actions)},er.prototype.continue=function(){this.indiceActionEnCours!==this.actions.length?(this.iconContinue.setAttribute("visibility","hidden"),this.montreIcones(["Pause"]),this.animationEnCours=!0,this.indiceActionEnCours++,this.actions[this.indiceActionEnCours]?this.actions[this.indiceActionEnCours].execute(!1):console.error(Error(`Pas d'action ${this.indiceActionEnCours}`),this.actions)):this.gotoEnd()},er.prototype.reset=function(){this.animationEnCours=!1,this.initialise(),this.montreIcones(["Play","NextStep","GotoEnd","XML"]),this.indiceActionEnCours=0,this.zoom(1)},er.prototype.restart=function(){if(this.animationEnCours)return this.animationEnCours=!1,void setTimeout(this.restart.bind(this),100);this.initialise(),this.indiceActionEnCours=0,this.zoom(1),this.play()},er.prototype.pause=function(){this.animationEnCours=!1,setTimeout((()=>this.montreIcones(["Reset","PrevStep","Play","Restart","NextStep","GotoEnd","XML"])),500)},er.prototype.nextStep=function(){const t=this.actions.length;this.animationEnCours=!1,this.indiceActionEnCours<t&&(this.actions[this.indiceActionEnCours].actionVisible()?this.indiceActionEnCours++:this.indiceActionEnCours=this.indiceProchaineActionVisible(this.indiceActionEnCours)+1,this.executeJusque(this.indiceActionEnCours-1));const e=["Reset","PrevStep","Restart","XML"];this.indiceActionEnCours===this.actions.length?this.montreIcones(e):this.montreIcones(e.concat(["NextStep","GotoEnd","Play"]))},er.prototype.prevStep=function(){this.animationEnCours=!1,this.indiceActionEnCours=this.indicePrecedenteActionVisible(this.indiceActionEnCours-1),this.indiceActionEnCours>0&&this.executeJusque(this.indiceActionEnCours-1);const t=["Play","NextStep","GotoEnd","XML"];0===this.indiceActionEnCours?this.montreIcones(t):this.montreIcones(t.concat(["Reset","PrevStep"]))},er.prototype.initialise=function(){let t,e;const r=this.svg;for(t=0;t<r.childNodes.length;t++)if(e=r.childNodes[t],e!==this.barreIcones)try{r.childNodes[t].setAttribute("visibility","hidden")}catch(t){console.error(t)}for(t=0;t<this.actions.length;t++){const e=this.actions[t];e instanceof Q&&e.objet.initialisePosition()}this.initialiseOutils()},er.prototype.getInstrumentVisibility=function(t,e){if(-1===e)return!1;let r,n=!1;for(let i=0;i<=e;i++)r=this.actions[i],r instanceof St?r.instrument===t&&(n=!0):r instanceof gt&&r.instrument===t&&(n=!1);return n},er.prototype.getObjectVisibility=function(t,e){if(-1===e)return!1;let r,n=!1;for(let i=0;i<=e;i++)r=this.actions[i],r instanceof xt?r.objet===t&&(n=!0):r instanceof dt&&r.objet===t&&(n=!1);return n},er.prototype.getCompasStatus=function(t){if(-1===t)return"couche";let e,r=!0;for(let n=0;n<=t;n++)e=this.actions[n],e instanceof W?r=!0:e instanceof ht&&(r=!1);return r?"couche":"leve"},er.prototype.indiceProchaineActionVisible=function(t){if(t>=this.actions.length)return this.actions.length-1;for(let e=t;e<this.actions.length;e++)if(this.actions[e].actionVisible())return e;return this.actions.length-1},er.prototype.indicePrecedenteActionVisible=function(t){if(t<0)return 0;t===this.actions.length&&t--;for(let e=t;e>=0;e--)if(this.actions[e].actionVisible())return e;return 0},er.prototype.montreInstrumentsEtape=function(t){let e=this.getInstrumentVisibility(this.compas,t);this.compas.leve?this.compasLeve.montre(e):this.compas.montre(e),e=this.getInstrumentVisibility(this.crayon,t),this.crayon.montre(e),e=this.getInstrumentVisibility(this.equerre,t),this.equerre.montre(e),e=this.getInstrumentVisibility(this.rapporteur,t),this.rapporteur.montre(e),e=this.getInstrumentVisibility(this.regle,t),this.regle.montre(e),e=this.getInstrumentVisibility(this.requerre,t),this.requerre.montre(e)},er.prototype.executeJusque=function(t){if(!(t>=this.actions.length)){this.initialise(),this.initialiseOutils(),this.animationEnCours=!1;for(let e=0;e<=t;e++)this.actions[e].execute(!0);this.montreInstrumentsEtape(t)}},er.prototype.addElement=function(t){const e=this.elements.findIndex((e=>e.id===t.id&&e.objet===t.objet));-1!==e?this.elements[e]=t:this.elements.push(t)},er.prototype.pushElement=function(t){if(this.elements.some((e=>e.id===t.id&&e.objet===t.objet)))throw Error(`Il y a déjà un élément ${t.id} désignant le même objet`);this.elements.push(t)},er.prototype.getElement=function(t,e){return this.elements.find((r=>r.objet===e&&("quadrillage"===e||r.id===t)))||null},er.prototype.setElement=function(t,e){const r=this.elements.findIndex((e=>e.id===t));return-1!==r&&(this.elements[r]=e,!0)},er.prototype.ajouteAction=function(t){t.indice=this.actions.length,this.actions.push(t)},er.prototype.creeActions=function(){let t,e,r,n,i,s,o,a,u,l,p,h,f,d,m,g,y,v,b,x,_,w,E;for(t=0;t<this.tabact.length;t++){e=this.tabact[t],l=Ve(e),r=e.getAttribute("mouvement"),y=e.getAttribute("tempo");try{let t,S;switch(r){case"creer":if(n=e.getAttribute("objet"),null!==this.getElement(l,n)){console.error(`L'id ${l} existe déjà, action creer ignorée`,n);break}if(null!=n){switch(n){case"point":i=new Ae(this,l,parseFloat(je(e)),parseFloat(He(e)),We(e),Ze(e)),s=new Q(this,l,i,y);break;case"angle":i=new Zt(this,l,je(e),He(e),e.getAttribute("rayon"),e.getAttribute("angle1"),e.getAttribute("angle2"),We(e),Ze(e),Je(e),e.getAttribute("forme")),s=new Q(this,l,i,y);break;case"angle_droit":i=new Jt(this,l,e.getAttribute("abscisse_sommet"),e.getAttribute("ordonnee_sommet"),e.getAttribute("abscisse_inter"),e.getAttribute("ordonnee_inter"),We(e),Ze(e)),s=new Q(this,l,i,y);break;case"longueur":i=new ge(this,l,je(e),He(e),We(e),Ze(e),e.getAttribute("forme")),s=new Q(this,l,i,y);break;case"marque":i=new xe(this,l,e.getAttribute("idSeg"),We(e),Ze(e),e.getAttribute("forme"),e.getAttribute("rayon")),s=new Q(this,l,i,y);break;case"texte":i=new K(this,l,je(e),He(e),We(e),e.getAttribute("taille")),s=new Q(this,l,i,y);break;case"repere":i=new Oe(this,e.getAttribute("hauteur"),e.getAttribute("largeur"),e.getAttribute("haut"),e.getAttribute("gauche"),e.getAttribute("Xgrad"),e.getAttribute("Ygrad"),e.getAttribute("Xmin"),e.getAttribute("Xmax"),e.getAttribute("Ymin"),e.getAttribute("Ymax"),We(e),e.getAttribute("grille"),e.getAttribute("axes"),e.getAttribute("etiquettes")),s=new Q(this,l,i,y);break;case"quadrillage":if(t=e.getAttribute("abscisse_bas_droite"),null!=t){t=parseFloat(t)/30;const r=parseFloat(e.getAttribute("ordonnee_bas_droite"))/30,n=parseFloat(e.getAttribute("abscisse_haut_gauche"))/30,o=parseFloat(e.getAttribute("ordonnee_haut_gauche"))/30;i=new Ce(this,e.getAttribute("quadrillage"),String(r-o),String(t-n),o,n,We(e)),s=new Q(this,"quadrillageIEP",i,y)}else i=new Ce(this,e.getAttribute("quadrillage"),e.getAttribute("hauteur"),e.getAttribute("largeur"),e.getAttribute("haut"),e.getAttribute("gauche"),We(e));s=new Q(this,"quadrillageIEP",i,y);break;case"axe":i=new ie(this,e.getAttribute("pente"),e.getAttribute("largeur"),e.getAttribute("haut"),e.getAttribute("gauche"),e.getAttribute("distanceBord"),e.getAttribute("Xgrad"),e.getAttribute("Xmin"),e.getAttribute("Xmax"),We(e)),s=new Q(this,l,i,y);break;case"gabarit":S=e.getAttribute("ecart_angle"),null===S&&(S="-30"),i=new re(this,l,e.getAttribute("abscisse"),e.getAttribute("ordonnee"),e.getAttribute("rayon"),S,We(e),Ze(e),Xe(e),Ke(e)),s=new Q(this,l,i,y);break;default:console.error(`objet ${i} inconnu => création ignorée`),s=null}s&&(this.ajouteAction(s),s.setReady())}break;case"montrer":n=e.getAttribute("objet"),c(n)?(d=e.getAttribute("abscisse"),m=e.getAttribute("ordonnee"),s=new St(this,this[n],d,m,y),"crayon"!==n&&"compas"!==n||null==d||null==m||this[n].translate(parseFloat(d),parseFloat(m))):s=new xt(this,l,n,y),this.ajouteAction(s),s.setReady();break;case"masquer":n=e.getAttribute("objet"),s=c(n)?new gt(this,this[n],y):new dt(this,l,n,y),this.ajouteAction(s),s.setReady();break;case"tracer":switch(n=e.getAttribute("objet"),E=e.getAttribute("cible"),null!=E?(i=this.getElement(E,"point"),d=i.xcons,m=i.ycons):(d=parseFloat(je(e)),m=parseFloat(He(e))),n){case"crayon":switch(o=e.getAttribute("forme"),a=this.crayon.x,u=this.crayon.y,l=Ve(e),o){case null:isNaN(d)||isNaN(m)?(i=new de(this,l,this.crayon.x,this.crayon.y,e.getAttribute("abscisses"),e.getAttribute("ordonnees"),We(e),Ze(e),Ke(e),Qe(e),tr(e)),v=i.abs.length,this.crayon.translate(i.abs[v-1],i.ord[v-1])):(i=new ve(this,l,a,u,d,m,We(e),Ze(e),Ke(e),Qe(e),tr(e)),this.crayon.translate(d,m));break;case"droite":if(isNaN(d)||isNaN(m))break;i=new ue(this,l,a,u,d,m,We(e),Ze(e),Ke(e),Qe(e),tr(e)),this.crayon.translate(d,m);break;case"demidroite":if(isNaN(d)||isNaN(m))break;i=new ce(this,l,a,u,d,m,We(e),Ze(e),Ke(e),Qe(e),tr(e)),this.crayon.translate(d,m);break;case"polygone":if(g=e.getAttribute("cibles"),null===g)i=new Me(this,l,e.getAttribute("abscisses"),e.getAttribute("ordonnees"),We(e),Ze(e),Xe(e),e.getAttribute("opacite"));else{let t="",r="";g.split(",").forEach(((e,n)=>{const i=0===n?"":",",s=this.getElement(e,"point");t+=i+s.xcons,r+=i+s.ycons})),i=new Me(this,l,t,r,We(e),Ze(e),Xe(e),e.getAttribute("opacite"))}v=i.abs.length,this.crayon.translate(i.abs[v-1],i.ord[v-1]);break;case"libre":i=new de(this,l,this.crayon.x,this.crayon.y,e.getAttribute("abscisses"),e.getAttribute("ordonnees"),We(e),Ze(e),Ke(e),Qe(e),tr(e)),v=i.abs.length,this.crayon.translate(i.abs[v-1],i.ord[v-1])}f=e.getAttribute("vitesse"),null==f&&(f="4"),s=new Q(this,Ve(e),i,y,f),this.ajouteAction(s),s.setReady();break;case"trait":f=e.getAttribute("vitesse"),null===f&&(f=1e4),i=new ve(this,l,e.getAttribute("abscisse1"),e.getAttribute("ordonnee1"),e.getAttribute("abscisse2"),e.getAttribute("ordonnee2"),We(e),Ze(e),Ke(e),Qe(e),tr(e)),s=new Q(this,Ve(e),i,y,f),this.ajouteAction(s),s.setReady();break;case"compas":i=new te(this,l,this.compas.x,this.compas.y,this.compas.ecart,this.getAngle(e,"debut"),this.getAngle(e,"fin"),We(e),Ze(e),Ke(e),Qe(e)),f=e.getAttribute("sens"),null==f&&(f="8"),s=new Q(this,Ve(e),i,y,f),this.ajouteAction(s),s.setReady();break;case"angle_droit":i=new Jt(this,l,e.getAttribute("abscisse_sommet"),e.getAttribute("ordonnee_sommet"),e.getAttribute("abscisse_inter"),e.getAttribute("ordonnee_inter"),We(e),Ze(e)),s=new Q(this,Ve(e),i,y,f),this.ajouteAction(s),s.setReady()}break;case"rotation":n=e.getAttribute("objet"),h=e.getAttribute("sens"),c(n)?(E=e.getAttribute("cible"),null!=E&&null===e.getAttribute("angle")?(i=this.getElement(E,"point"),d=i.xcons,m=i.ycons,x=new k(this[n].x,this[n].y,d,m),p=x.presqueNul()?0:-x.angle()):p="compas"===n?this.getAngle(e,"angle"):e.getAttribute("angle"),s=new It(this,this[n],p,y,h)):null===this.getElement(l,n)?s=null:(p=e.getAttribute("angle"),s=new Dt(this,l,p,n,y,h)),null!==s&&(this.ajouteAction(s),s.setReady());break;case"translation":n=e.getAttribute("objet"),E=e.getAttribute("cible"),null!=E?(i=this.getElement(E,"point"),d=i.xcons,m=i.ycons):(d=parseFloat(je(e)),m=parseFloat(He(e))),f=e.getAttribute("vitesse"),c(n)?(this[n].x=d,this[n].y=m,s=new Bt(this,this[n],d,m,y,f)):null===this.getElement(l,n)?s=null:("point"===n&&(w=this.getElement(l,"point"),w.xcons=d,w.ycons=m),s=new $t(this,l,d,m,n,y,f)),null!==s&&(this.ajouteAction(s),"crayon"!==n&&"compas"!==n||this[n].translate(d,m),s.setReady());break;case"zoom":n=e.getAttribute("objet"),f=e.getAttribute("vitesse"),c(n)?(_=e.getAttribute("echelle"),this[n].zoomfactor=parseFloat(_)/100,s=new Ft(this,this[n],_,y,f)):s="texte"===n||"image"===n?new Vt(this,l,e.getAttribute("echelle"),n,y,f):null,null!==s&&(this.ajouteAction(s),s.setReady());break;case"ecarter":E=e.getAttribute("cible"),null!=E?(i=this.getElement(E,"point"),x=new k(this.compas.x,this.compas.y,i.xcons,i.ycons),b=x.norme()):b=parseFloat(e.getAttribute("ecart"))*this.compas.zoomfactor,this.compas.ecart=b,s=new et(this,b,y,e.getAttribute("vitesse")),this.ajouteAction(s),s.setReady();break;case"lever":s=new ht(this,y),this.ajouteAction(s),s.setReady();break;case"coucher":s=new W(this,y),this.ajouteAction(s),s.setReady();break;case"masquer_nombres":s=new Nt(this,!1,y),this.ajouteAction(s),s.setReady();break;case"montrer_nombres":s=new Nt(this,!0,y),this.ajouteAction(s),s.setReady();break;case"graduations":n=e.getAttribute("objet"),s=new wt(this,this[n],!0,y),this.ajouteAction(s),s.setReady();break;case"vide":n=e.getAttribute("objet"),s=new wt(this,this[n],!1,y),this.ajouteAction(s),s.setReady();break;case"retourner":this.compasRetourne=!this.compasRetourne,s=new Rt(this,y),this.ajouteAction(s),s.setReady();break;case"glisser":s=new ut(this,e.getAttribute("abscisse"),y,e.getAttribute("vitesse")),this.ajouteAction(s),s.setReady();break;case"chargement":i=new he(this,l,e.getAttribute("url")),i.prepareAction();break;case"ecrire":s=new ot(this,l,We(e),e.getAttribute("taille"),e.getAttribute("texte"),e.getAttribute("style"),Xe(e),e.getAttribute("opacite_fond"),Ye(e),e.getAttribute("epaisseur_cadre"),e.getAttribute("marge"),e.getAttribute("marge_gauche"),e.getAttribute("marge_droite"),e.getAttribute("marge_haut"),e.getAttribute("marge_bas"),y),this.ajouteAction(s),s.prepare();break;case"nommer":if(null!==this.getElement(l,"point")){const t=e.getAttribute("nom");""!==t&&(i=new Ee(this,l,je(e),He(e),t,We(e)),s=new kt(this,i,y),this.ajouteAction(s),s.prepare())}break;case"pause":s=new Tt(this,y),this.ajouteAction(s),s.setReady();break;case"modifier_longueur":n=e.getAttribute("objet"),s=new vt(this,this[n],e.getAttribute("longueur"),y),this.ajouteAction(s),s.setReady();break;case"modifier_rayon":n=e.getAttribute("objet"),s=new Ht(this,l,e.getAttribute("rayon"),n,y),this.ajouteAction(s),s.setReady()}}catch(t){console.error(t)}}this.getReadyPromise().then(this.init.bind(this)).catch((t=>{console.error(t),window.alert(t.message())}))},er.prototype.execute=function(t){this.indiceActionEnCours=0,this.actions[0].execute(t)},er.prototype.actionSuivante=function(t){if(t=Boolean(t),!this.animationEnCours&&!t)return;const e=this.actions[this.indiceActionEnCours];null===e.tempo||t?this.passageActionSuivante(t):setTimeout(this.passageActionSuivante.bind(this,t),e.tempo)},er.prototype.passageActionSuivante=function(t){this.indiceActionEnCours>=this.actions.length||(this.indiceActionEnCours!==this.actions.length-1?(this.indiceActionEnCours++,this.actions[this.indiceActionEnCours].execute(t)):(this.indiceActionEnCours++,this.montreIcones(["Reset","PrevStep","Restart","XML"]),this.animationEnCours=!1))},er.prototype.getAngle=function(t,e){const r=t.getAttribute(e);return null==r?null:this.compasRetourne?String(parseFloat(r)+180):r},er.prototype.creeElementsPourIcones=function(){let e=document.createElementNS(t,"defs");e.appendChild(this.radialGradiant("#9999FF","#000099","radialfonce")),this.svg.appendChild(e),e=document.createElementNS(t,"defs"),e.appendChild(this.radialGradiant("#CCCCCC","#666666","radialclair")),this.svg.appendChild(e),e=document.createElementNS(t,"defs"),e.appendChild(this.radialGradiant("#FF9999","#FF0000","radialrouge")),this.svg.appendChild(e),e=document.createElementNS(t,"defs"),e.appendChild(this.markerArrow("markerarrow")),this.barreIcones.appendChild(e),e=document.createElementNS(t,"defs"),e.appendChild(this.filtreEclairageIcone("filtrebleu")),this.barreIcones.appendChild(e),e=document.createElementNS(t,"defs"),e.appendChild(this.filtreEclairageIcone("filtregris")),this.barreIcones.appendChild(e)},er.prototype.radialGradiant=function(e,r,n){const i=document.createElementNS(t,"radialGradient");i.setAttribute("id",n);let s=document.createElementNS(t,"stop");return s.setAttribute("offset","0%"),s.setAttribute("style","stop-color:"+r+";"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","80%"),s.setAttribute("style","stop-color:"+e+";"),i.appendChild(s),s=document.createElementNS(t,"stop"),s.setAttribute("offset","100%"),s.setAttribute("style","stop-color:"+r+";"),i.appendChild(s),i},er.prototype.markerArrow=function(e){const r=document.createElementNS(t,"marker");r.setAttribute("id",e),r.setAttribute("markerWidth","4"),r.setAttribute("markerHeight","4"),r.setAttribute("refX","0"),r.setAttribute("refY","2"),r.setAttribute("orient","auto");const n=document.createElementNS(t,"path");return n.setAttribute("d","M 0 0 2 2 0 4 Z"),n.setAttribute("style","fill:white;"),r.appendChild(n),r},er.prototype.filtreEclairageIcone=function(e){const r=document.createElementNS(t,"filter");r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("color-interpolation-filters","sRGB");const n=document.createElementNS(t,"feDiffuseLighting");n.setAttribute("lighting-color","white"),n.setAttribute("surfaceScale","1"),n.setAttribute("diffuseConstant","1.2"),n.setAttribute("in","SourceGraphic"),n.setAttribute("result","diffOut");const i=document.createElementNS(t,"fePointLight");i.setAttribute("x","5"),i.setAttribute("y","5"),i.setAttribute("z","15"),n.appendChild(i),r.appendChild(n);const s=document.createElementNS(t,"feComposite");return s.setAttribute("in","SourceGraphic"),s.setAttribute("in2","diffOut"),s.setAttribute("operator","arithmetic"),s.setAttribute("k1","1"),s.setAttribute("k2","0"),s.setAttribute("k3","0"),s.setAttribute("k4","0"),r.appendChild(s),r.setAttribute("id",e),r},er.prototype.popup=function(){const t=window.open("","popup","width=700,height=450,toolbar=no,scrollbars=no,resizable=yes");t.iepDoc=this;const e=t.document;e.title="Code Xml de la figure";const r=e.createElement("div"),n=e.createElement("form");r.appendChild(n),r.setAttribute("align","center"),e.body.appendChild(r);const i=e.createElement("textarea");n.appendChild(i),i.setAttribute("cols",80),i.setAttribute("rows",25),i.setAttribute("readonly",!0),i.style.fontSize="13px",i.scrollIntoView();let s=this.codexml;s=s.replace(/>\s*</g,">\n<"),i.appendChild(document.createTextNode(s)),i.select();const o=this;return t.addEventListener("unload",(()=>{o.windowxml=null})),t};const rr=ir;function nr(t){t.docs.forEach((t=>{t.windowxml&&t.windowxml.close()}))}function ir(t){this.debug=Boolean(t&&t.debug),this.debug&&console.log("Mode debug activé"),this.docs=[],window.addEventListener("unload",nr.bind(null,this))}let sr;function or(t,e,r){return"object"!=typeof r&&(r={}),Promise.resolve().then((()=>{if("undefined"==typeof window||!window.document)throw Error("iepLoad doit être utilisé dans un navigateur");if("string"==typeof t&&(t=document.getElementById(t)),!(t instanceof HTMLElement))throw Error("Conteneur html manquant");if("string"!=typeof e)throw Error("Script xml manquant");return/^http/.test(e)?function(t){return"https:"===window.location.protocol&&"http:"===t.substr(0,5)?Promise.reject(Error(`Impossible de charger ici un script externe qui n’est pas en https (${t})`)):fetch(t,{Accept:"text/xml"}).catch((e=>{throw console.error(e),Error(`Impossible de récupérer le xml ${t}`)})).then((e=>{const{status:r,statusText:n,ok:i}=e;if(r>399)throw Error(`Impossible de récupérer le xml ${t} (erreur ${r} ${n})`);if(!i)throw Error(`Impossible de récupérer le xml ${t}`);return e.text()})).then((e=>{if(!e||!/<INSTRUMENPOCHE/.test(e))throw Error(`L’url ${t} ne retourne pas de script instrumenpoche en xml`);return e}))}(e):e})).then((e=>{if(!e||!/<INSTRUMENPOCHE/.test(e))throw Error("Ce n’est pas un script instrumenpoche valide");"https:"===window.location.protocol&&(e=e.replace(/http:\/\/([a-z]+.sesamath.net)/g,((t,e)=>`https://${e}`))),(0,we.empty)(t),(0,we.setStyles)(t,{position:"relative",overflow:"auto"});const n=function(t){const e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.classList.add("svgIep"),t.appendChild(e),(0,we.setStyles)(e,{margin:0,padding:0,width:"98%",height:"98%"}),e}(t),i={};r.debug&&(i.debug=!0),sr||(sr=new rr(i));const s="boolean"!=typeof r.autostart||r.autostart;return sr.addDoc(n,e,s),r.zoom&&function(t){const e=t.parentNode;e.style.resize="both",e.style.padding="0",e.style.border="1px solid black";const r={position:"absolute",zIndex:99,textAlign:"center",padding:0,width:"2.5em",height:"1.8em",left:"0.1em"};(0,we.addElement)(e,"button",{style:{...r,top:"0.1em"}},"+").addEventListener("click",(()=>t.iepDoc.zoom(1.1)),!1),(0,we.addElement)(e,"button",{style:{...r,top:"2em"}},"-").addEventListener("click",(()=>t.iepDoc.zoom(.9)),!1)}(n),sr}))}ir.prototype.addDoc=function(t,e,r=!0){if("string"==typeof t&&(t=document.getElementById(t)),!t)return new Error("svg manquant");if("svg"!==t.localName)return new Error("svg incorrect");const n={autoStart:r,debug:this.debug},i=new Pe(t,e,n);return this.docs.push(i),t.iepDoc=i,i},ir.prototype.flush=function(){this.closeAllXMLWindows(),this.docs.forEach((({svg:t})=>{t.parentNode?t.parentNode.removeChild(t):console.error("le svg",t,"n’a pas de parentNode")})),this.docs=[]},ir.prototype.getDocs=function(){return this.docs},ir.prototype.getLastDoc=function(){const t=this.docs.length;return t?this.docs[t-1]:null};var ar=__webpack_require__(53791),ur=__webpack_require__.n(ar),lr=(__webpack_require__(25027),__webpack_require__(12310),__webpack_require__(57456),__webpack_require__(63125),__webpack_require__(92052),__webpack_require__(32407),__webpack_require__(53582),__webpack_require__(13786)),cr=__webpack_require__.n(lr),pr={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function hr(){return(hr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var fr=function(t){if(t)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(pr)};function dr(t){return"number"==typeof t}function mr(t){return t&&!0===t.constructor.prototype.isBigNumber||!1}function gr(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function yr(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function vr(t){return t&&!0===t.constructor.prototype.isUnit||!1}function br(t){return"string"==typeof t}hr(fr,pr,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var xr=Array.isArray;function _r(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function wr(t){return Array.isArray(t)||_r(t)}function Er(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function Sr(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function Ar(t){return t&&!0===t.constructor.prototype.isRange||!1}function Nr(t){return t&&!0===t.constructor.prototype.isIndex||!1}function Mr(t){return"boolean"==typeof t}function kr(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function Cr(t){return t&&!0===t.constructor.prototype.isHelp||!1}function Tr(t){return"function"==typeof t}function Or(t){return t instanceof Date}function Ir(t){return t instanceof RegExp}function Pr(t){return!(!t||"object"!=typeof t||t.constructor!==Object||gr(t)||yr(t))}function Rr(t){return null===t}function Lr(t){return void 0===t}function Dr(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function qr(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function Br(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Ur(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function $r(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function zr(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function Fr(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Gr(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function Vr(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function jr(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function Hr(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function Wr(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function Yr(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function Xr(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function Zr(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function Kr(t){return t&&!0===t.constructor.prototype.isChain||!1}function Jr(t){var e=typeof t;return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":mr(t)?"BigNumber":gr(t)?"Complex":yr(t)?"Fraction":_r(t)?"Matrix":vr(t)?"Unit":Nr(t)?"Index":Ar(t)?"Range":kr(t)?"ResultSet":jr(t)?t.type:Kr(t)?"Chain":Cr(t)?"Help":"Object":"function"===e?"Function":e}function Qr(t){var e=typeof t;if("number"===e||"string"===e||"boolean"===e||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map((function(t){return Qr(t)}));if(t instanceof Date)return new Date(t.valueOf());if(mr(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return function(t,e){var r={};for(var n in t)rn(t,n)&&(r[n]=e(t[n]));return r}(t,Qr)}function tn(t,e){for(var r in e)rn(e,r)&&(t[r]=e[r]);return t}function en(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!en(t[n],e[n]))return!1;return!0}if("function"==typeof t)return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!en(t[r],e[r]))return!1;for(r in e)if(!(r in t)||!en(t[r],e[r]))return!1;return!0}return t===e}function rn(t,e){return t&&Object.hasOwnProperty.call(t,e)}function nn(t,e,r,n){function i(n){var i=function(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],s=t[i];void 0!==s&&(r[i]=s)}return r}(n,e.map(sn));return function(t,e,r){if(!e.filter((t=>!function(t){return t&&"?"===t[0]}(t))).every((t=>void 0!==r[t]))){var n=e.filter((t=>void 0===r[t]));throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(n.map((t=>'"'.concat(t,'"'))).join(", "),"."))}}(t,e,n),r(i)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function sn(t){return t&&"?"===t[0]?t.slice(1):t}var on=nn("ResultSet",[],(()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t}),{isClass:!0}),an=__webpack_require__(64352);function un(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}var ln=Math.sign||function(t){return t>0?1:t<0?-1:0},cn=Math.log2||function(t){return Math.log(t)/Math.LN2},pn=Math.log10||function(t){return Math.log(t)/Math.LN10},hn=Math.log1p||function(t){return Math.log(t+1)},fn=Math.cbrt||function(t){if(0===t)return t;var e,r=t<0;return r&&(t=-t),e=isFinite(t)?(t/((e=Math.exp(Math.log(t)/3))*e)+2*e)/3:t,r?-e:e},dn=Math.expm1||function(t){return t>=2e-4||t<=-2e-4?Math.exp(t)-1:t+t*t/2+t*t*t/6};function mn(t,e,r){var n={2:"0b",8:"0o",16:"0x"}[e],i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!un(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!un(t))throw new Error("Value must be an integer");t<0&&(t+=2**r),i="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(n).concat(t.toString(e)).concat(i)}function gn(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r,n,i="auto";if(e&&(e.notation&&(i=e.notation),dr(e)?r=e:dr(e.precision)&&(r=e.precision),e.wordSize&&"number"!=typeof(n=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return vn(t,r);case"exponential":return bn(t,r);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=xn(yn(t),e),n=r.exponent,i=r.coefficients,s=n%3==0?n:n<0?n-3-n%3:n-n%3;if(dr(e))for(;e>i.length||n-s+1>i.length;)i.push(0);else for(var o=Math.abs(n-s)-(i.length-1),a=0;a<o;a++)i.push(0);for(var u=Math.abs(n-s),l=1;u>0;)l++,u--;var c=i.slice(l).join(""),p=dr(e)&&c.length||c.match(/[1-9]/)?"."+c:"",h=i.slice(0,l).join("")+p+"e"+(n>=0?"+":"")+s.toString();return r.sign+h}(t,r);case"bin":return mn(t,2,n);case"oct":return mn(t,8,n);case"hex":return mn(t,16,n);case"auto":return function(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&void 0!==r.lowerExp?r.lowerExp:-3,i=r&&void 0!==r.upperExp?r.upperExp:5,s=yn(t),o=e?xn(s,e):s;if(o.exponent<n||o.exponent>=i)return bn(t,e);var a=o.coefficients,u=o.exponent;a.length<e&&(a=a.concat(_n(e-a.length))),a=a.concat(_n(u-a.length+1+(a.length<e?e-a.length:0)));var l=u>0?u:0;return l<(a=_n(-u).concat(a)).length-1&&a.splice(l+1,0,"."),o.sign+a.join("")}(t,r,e&&e).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function yn(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),s=n.indexOf(".");i+=-1!==s?s-1:n.length-1;var o=n.replace(".","").replace(/^0*/,(function(t){return i-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===o.length&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function vn(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=yn(t),n="number"==typeof e?xn(r,r.exponent+1+e):r,i=n.coefficients,s=n.exponent+1,o=s+(e||0);return i.length<o&&(i=i.concat(_n(o-i.length))),s<0&&(i=_n(1-s).concat(i),s=1),s<i.length&&i.splice(s,0,0===s?"0.":"."),n.sign+i.join("")}function bn(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=yn(t),n=e?xn(r,e):r,i=n.coefficients,s=n.exponent;i.length<e&&(i=i.concat(_n(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function xn(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e&&n.splice(e,n.length-e)[0]>=5){var i=e-1;for(n[i]++;10===n[i];)n.pop(),0===i&&(n.unshift(0),r.exponent++,i++),n[--i]++}return r}function _n(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}var wn=Number.EPSILON||2220446049250313e-31;function En(t,e,r){if(null==r)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<wn||n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}var Sn=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},An=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},Nn=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},Mn=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},kn=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},Cn=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)},Tn=nn("Complex",[],(()=>(an.prototype.type="Complex",an.prototype.isComplex=!0,an.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},an.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},an.prototype.format=function(t){var e=this.im,r=this.re,n=gn(this.re,t),i=gn(this.im,t),s=dr(t)?t:t?t.precision:null;if(null!==s){var o=Math.pow(10,-s);Math.abs(r/e)<o&&(r=0),Math.abs(e/r)<o&&(e=0)}return 0===e?n:0===r?1===e?"i":-1===e?"-i":i+"i":e<0?-1===e?n+" - i":n+" - "+i.substring(1)+"i":1===e?n+" + i":n+" + "+i+"i"},an.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return an(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var r=arguments[0],n=arguments[1];if(dr(r)){if(vr(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),dr(n))return new an({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},an.prototype.valueOf=an.prototype.toString,an.fromJSON=function(t){return new an(t)},an.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},an)),{isClass:!0}),On=nn("Range",[],(()=>{function t(e,r,n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=null!=e,s=null!=r,o=null!=n;if(i)if(mr(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(s)if(mr(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter end must be a number");if(o)if(mr(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(e):0,this.end=s?parseFloat(r):0,this.step=o?parseFloat(n):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if("string"!=typeof e)return null;var r=e.split(":").map((function(t){return parseFloat(t)}));if(r.some((function(t){return isNaN(t)})))return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var t=0,e=this.start,r=this.step,n=this.end-e;return ln(r)===ln(n)?t=Math.ceil(n/r):0===n&&(t=0),isNaN(t)&&(t=0),[t]},t.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},t.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},t.prototype.forEach=function(t){var e=this.start,r=this.step,n=this.end,i=0;if(r>0)for(;e<n;)t(e,[i],this),e+=r,i++;else if(r<0)for(;e>n;)t(e,[i],this),e+=r,i++},t.prototype.map=function(t){var e=[];return this.forEach((function(r,n,i){e[n[0]]=t(r,n,i)})),e},t.prototype.toArray=function(){var t=[];return this.forEach((function(e,r){t[r[0]]=e})),t},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(t){var e=gn(this.start,t);return 1!==this.step&&(e+=":"+gn(this.step,t)),e+":"+gn(this.end,t)},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t}),{isClass:!0});function In(t){var e=0,r=1,n=Object.create(null),i=Object.create(null),s=0,o=function(t){var o=i[t];if(o&&(delete n[o],delete i[t],--e,r===o)){if(!e)return s=0,void(r=1);for(;!hasOwnProperty.call(n,++r););}};return t=Math.abs(t),{hit:function(a){var u=i[a],l=++s;if(n[l]=a,i[a]=l,!u){if(++e<=t)return;return a=n[r],o(a),a}if(delete n[u],r===u)for(;!hasOwnProperty.call(n,++r););},delete:o,clear:function(){e=s=0,r=1,n=Object.create(null),i=Object.create(null)}}}function Pn(t){var{hasher:e,limit:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=null==r?Number.POSITIVE_INFINITY:r,e=null==e?JSON.stringify:e,function n(){"object"!=typeof n.cache&&(n.cache={values:new Map,lru:In(r||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=e(i);if(n.cache.values.has(o))return n.cache.lru.hit(o),n.cache.values.get(o);var a=t.apply(t,i);return n.cache.values.set(o,a),n.cache.values.delete(n.cache.lru.hit(o)),a}}function Rn(t){return Object.keys(t.signatures||{}).reduce((function(t,e){var r=(e.match(/,/g)||[]).length+1;return Math.max(t,r)}),-1)}var Ln=Pn((function(t){return new t(1).exp()}),{hasher:Un}),Dn=Pn((function(t){return new t(1).plus(new t(5).sqrt()).div(2)}),{hasher:Un}),qn=Pn((function(t){return t.acos(-1)}),{hasher:Un}),Bn=Pn((function(t){return qn(t).times(2)}),{hasher:Un});function Un(t){return t[0].precision}var $n=Math.PI,zn=2*Math.PI,Fn=Math.E,Gn=nn("true",[],(()=>!0)),Vn=nn("false",[],(()=>!1)),jn=nn("null",[],(()=>null)),Hn=oi("Infinity",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(1/0):1/0})),Wn=oi("NaN",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(NaN):NaN})),Yn=oi("pi",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?qn(r):$n})),Xn=oi("tau",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?Bn(r):zn})),Zn=oi("e",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?Ln(r):Fn})),Kn=oi("phi",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?Dn(r):1.618033988749895})),Jn=oi("LN2",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(2).ln():Math.LN2})),Qn=oi("LN10",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(10).ln():Math.LN10})),ti=oi("LOG2E",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(1).div(new r(2).ln()):Math.LOG2E})),ei=oi("LOG10E",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(1).div(new r(10).ln()):Math.LOG10E})),ri=oi("SQRT1_2",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r("0.5").sqrt():Math.SQRT1_2})),ni=oi("SQRT2",["config","?BigNumber"],(t=>{var{config:e,BigNumber:r}=t;return"BigNumber"===e.number?new r(2).sqrt():Math.SQRT2})),ii=oi("i",["Complex"],(t=>{var{Complex:e}=t;return e.I})),si=nn("version",[],(()=>"9.3.2"));function oi(t,e,r){return nn(t,e,r,{recreateOnConfigChange:!0})}var ai=__webpack_require__(81501),ui=nn("BigNumber",["?on","config"],(t=>{var{on:e,config:r}=t,n=ai.clone({precision:r.precision,modulo:9});return n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(t){return new n(t.value)},e&&e("config",(function(t,e){t.precision!==e.precision&&n.config({precision:t.precision})})),n}),{isClass:!0}),li=nn("Matrix",[],(()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t}),{isClass:!0}),ci=nn("replacer",[],(()=>function(t,e){return"number"!=typeof e||isFinite(e)&&!isNaN(e)?e:{mathjs:"number",value:String(e)}})),pi=as("speedOfLight","299792458","m s^-1"),hi=as("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),fi=as("planckConstant","6.62607015e-34","J s"),di=as("reducedPlanckConstant","1.0545718176461565e-34","J s"),mi=as("magneticConstant","1.25663706212e-6","N A^-2"),gi=as("electricConstant","8.8541878128e-12","F m^-1"),yi=as("vacuumImpedance","376.730313667","ohm"),vi=as("coulomb","8.987551792261171e9","N m^2 C^-2"),bi=as("elementaryCharge","1.602176634e-19","C"),xi=as("bohrMagneton","9.2740100783e-24","J T^-1"),_i=as("conductanceQuantum","7.748091729863649e-5","S"),wi=as("inverseConductanceQuantum","12906.403729652257","ohm"),Ei=as("magneticFluxQuantum","2.0678338484619295e-15","Wb"),Si=as("nuclearMagneton","5.0507837461e-27","J T^-1"),Ai=as("klitzing","25812.807459304513","ohm"),Ni=as("bohrRadius","5.29177210903e-11","m"),Mi=as("classicalElectronRadius","2.8179403262e-15","m"),ki=as("electronMass","9.1093837015e-31","kg"),Ci=as("fermiCoupling","1.1663787e-5","GeV^-2"),Ti=us("fineStructure",.0072973525693),Oi=as("hartreeEnergy","4.3597447222071e-18","J"),Ii=as("protonMass","1.67262192369e-27","kg"),Pi=as("deuteronMass","3.3435830926e-27","kg"),Ri=as("neutronMass","1.6749271613e-27","kg"),Li=as("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),Di=as("rydberg","10973731.568160","m^-1"),qi=as("thomsonCrossSection","6.6524587321e-29","m^2"),Bi=us("weakMixingAngle",.2229),Ui=us("efimovFactor",22.7),$i=as("atomicMass","1.66053906660e-27","kg"),zi=as("avogadro","6.02214076e23","mol^-1"),Fi=as("boltzmann","1.380649e-23","J K^-1"),Gi=as("faraday","96485.33212331001","C mol^-1"),Vi=as("firstRadiation","3.7417718521927573e-16","W m^2"),ji=as("loschmidt","2.686780111798444e25","m^-3"),Hi=as("gasConstant","8.31446261815324","J K^-1 mol^-1"),Wi=as("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),Yi=as("molarVolume","0.022413969545014137","m^3 mol^-1"),Xi=us("sackurTetrode",-1.16487052358),Zi=as("secondRadiation","0.014387768775039337","m K"),Ki=as("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),Ji=as("wienDisplacement","2.897771955e-3","m K"),Qi=as("molarMass","0.99999999965e-3","kg mol^-1"),ts=as("molarMassC12","11.9999999958e-3","kg mol^-1"),es=as("gravity","9.80665","m s^-2"),rs=as("planckLength","1.616255e-35","m"),ns=as("planckMass","2.176435e-8","kg"),is=as("planckTime","5.391245e-44","s"),ss=as("planckCharge","1.87554603778e-18","C"),os=as("planckTemperature","1.416785e+32","K");function as(t,e,r){return nn(t,["config","Unit","BigNumber"],(t=>{var{config:n,Unit:i,BigNumber:s}=t,o=new i("BigNumber"===n.number?new s(e):parseFloat(e),r);return o.fixPrefix=!0,o}))}function us(t,e){return nn(t,["config","BigNumber"],(t=>{var{config:r,BigNumber:n}=t;return"BigNumber"===r.number?new n(e):e}))}var ls=__webpack_require__(1006),cs=nn("Fraction",[],(()=>(ls.prototype.type="Fraction",ls.prototype.isFraction=!0,ls.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ls.fromJSON=function(t){return new ls(t)},ls)),{isClass:!0});function ps(t,e,r){var n=new(0,t.constructor)(2),i="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!un(r))throw new Error("size must be an integer");if(t.greaterThan(n.pow(r-1).sub(1))||t.lessThan(n.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(n.pow(r))),i="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function hs(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function fs(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e}function ds(t,e){return"number"==typeof t?gn(t,e):mr(t)?function(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r,n,i="auto";if(void 0!==e&&(e.notation&&(i=e.notation),"number"==typeof e?r=e:e.precision&&(r=e.precision),e.wordSize&&"number"!=typeof(n=e.wordSize)))throw new Error('Option "wordSize" must be a number');switch(i){case"fixed":return function(t,e){return t.toFixed(e)}(t,r);case"exponential":return hs(t,r);case"engineering":return function(t,e){var r=t.e,n=r%3==0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),s=i.toPrecision(e);return-1!==s.indexOf("e")&&(s=i.toString()),s+"e"+(r>=0?"+":"")+n.toString()}(t,r);case"bin":return ps(t,2,n);case"oct":return ps(t,8,n);case"hex":return ps(t,16,n);case"auto":var s=e&&void 0!==e.lowerExp?e.lowerExp:-3,o=e&&void 0!==e.upperExp?e.upperExp:5;if(t.isZero())return"0";var a=t.toSignificantDigits(r),u=a.e;return(u>=s&&u<o?a.toFixed():hs(t,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(t,e):function(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}(t)?e&&"decimal"===e.fraction?t.toString():t.s*t.n+"/"+t.d:Array.isArray(t)?ys(t,e):br(t)?'"'+t+'"':"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"==typeof t?"function"==typeof t.format?t.format(e):t&&t.toString(e)!=={}.toString()?t.toString(e):"{"+Object.keys(t).map((r=>'"'+r+'": '+ds(t[r],e))).join(", ")+"}":String(t)}function ms(t){for(var e=String(t),r="",n=0;n<e.length;){var i=e.charAt(n);"\\"===i?(r+=i,n++,""!==(i=e.charAt(n))&&-1!=='"\\/bfnrtu'.indexOf(i)||(r+="\\"),r+=i):r+='"'===i?'\\"':i,n++}return'"'+r+'"'}function gs(t){var e=String(t);return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ys(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)0!==i&&(r+=", "),r+=ys(t[i],e);return r+"]"}return ds(t,e)}function vs(t,e){if(!br(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Jr(t)+", index: 0)");if(!br(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Jr(e)+", index: 1)");return t===e?0:t>e?1:-1}function bs(t,e,r){if(!(this instanceof bs))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function xs(t,e,r){if(!(this instanceof xs))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function _s(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function ws(t,e,r){var n,i=t.length;if(i!==e[r])throw new bs(i,e[r]);if(r<e.length-1){var s=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new bs(e.length-1,e.length,"<");ws(t[n],e,s)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new bs(e.length+1,e.length,">")}function Es(t,e){if(0===e.length){if(Array.isArray(t))throw new bs(t.length,0)}else ws(t,e,0)}function Ss(t,e){if(!dr(t)||!un(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new xs(t,e)}function As(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach((function(t){if(!dr(t)||!un(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ds(e)+")")})),Ns(t,e,0,void 0!==r?r:0),t}function Ns(t,e,r,n){var i,s,o=t.length,a=e[r],u=Math.min(o,a);if(t.length=a,r<e.length-1){var l=r+1;for(i=0;i<u;i++)s=t[i],Array.isArray(s)||(s=[s],t[i]=s),Ns(s,e,l,n);for(i=u;i<a;i++)s=[],t[i]=s,Ns(s,e,l,n)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<a;i++)t[i]=n}}function Ms(t,e){var r=Rs(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new bs(0,n,"!=");var i=Cs(e=ks(e,n));if(n!==i)throw new bs(i,n,"!=");try{return function(t,e){for(var r,n=t,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}(r,e)}catch(t){if(t instanceof bs)throw new bs(i,n,"!=");throw t}}function ks(t,e){var r=Cs(t),n=t.slice(),i=t.indexOf(-1);if(t.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(e%r!=0)throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);n[i]=-e/r}return n}function Cs(t){return t.reduce(((t,e)=>t*e),1)}function Ts(t,e){for(var r=e||_s(t);Array.isArray(t)&&1===t.length;)t=t[0],r.shift();for(var n=r.length;1===r[n-1];)n--;return n<r.length&&(t=Os(t,n,0),r.length=n),t}function Os(t,e,r){var n,i;if(r<e){var s=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Os(t[n],e,s)}else for(;Array.isArray(t);)t=t[0];return t}function Is(t,e,r,n){var i=n||_s(t);if(r)for(var s=0;s<r;s++)t=[t],i.unshift(1);for(t=Ps(t,e,0);i.length<e;)i.push(1);return t}function Ps(t,e,r){var n,i;if(Array.isArray(t)){var s=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Ps(t[n],e,s)}else for(var o=r;o<e;o++)t=[t];return t}function Rs(t){if(!Array.isArray(t))return t;var e=[];return t.forEach((function t(r){Array.isArray(r)?r.forEach(t):e.push(r)})),e}function Ls(t,e){return Array.prototype.map.call(t,e)}function Ds(t,e){Array.prototype.forEach.call(t,e)}function qs(t,e){if(1!==_s(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function Bs(t,e){if(1!==_s(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,(t=>e.test(t)))}function Us(t,e){return Array.prototype.join.call(t,e)}function $s(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e}function zs(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e}function Fs(t,e){for(var r,n=0,i=0;i<t.length;i++){var s=t[i],o=Array.isArray(s);if(0===i&&o&&(n=s.length),o&&s.length!==n)return;var a=o?Fs(s,e):e(s);if(void 0===r)r=a;else if(r!==a)return"mixed"}return r}bs.prototype=new RangeError,bs.prototype.constructor=RangeError,bs.prototype.name="DimensionError",bs.prototype.isDimensionError=!0,xs.prototype=new RangeError,xs.prototype.constructor=RangeError,xs.prototype.name="IndexError",xs.prototype.isIndexError=!0;var Gs=nn("DenseMatrix",["Matrix"],(t=>{var{Matrix:e}=t;function r(t,e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!br(e))throw new Error("Invalid datatype: "+e);if(_r(t))"DenseMatrix"===t.type?(this._data=Qr(t._data),this._size=Qr(t._size),this._datatype=e||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=e||t._datatype);else if(t&&xr(t.data)&&xr(t.size))this._data=t.data,this._size=t.size,Es(this._data,this._size),this._datatype=e||t.datatype;else if(xr(t))this._data=l(t),this._size=_s(this._data),Es(this._data,this._size),this._datatype=e;else{if(t)throw new TypeError("Unsupported type of data ("+Jr(t)+")");this._data=[],this._size=[0],this._datatype=e}}function n(t,e){if(!Nr(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var n=e.size();if(n.length!==t._size.length)throw new bs(n.length,t._size.length);for(var s=e.min(),o=e.max(),a=0,u=t._size.length;a<u;a++)Ss(s[a],t._size[a]),Ss(o[a],t._size[a]);return new r(i(t._data,e,n.length,0),t._datatype)}function i(t,e,r,n){var s=n===r-1,o=e.dimension(n);return s?o.map((function(e){return Ss(e,t.length),t[e]})).valueOf():o.map((function(s){return Ss(s,t.length),i(t[s],e,r,n+1)})).valueOf()}function s(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var i,s=e.size(),a=e.isScalar();if(_r(r)?(i=r.size(),r=r.valueOf()):i=_s(r),a){if(0!==i.length)throw new TypeError("Scalar expected");t.set(e.min(),r,n)}else{if(s.length<t._size.length)throw new bs(s.length,t._size.length,"<");if(i.length<s.length){for(var l=0,c=0;1===s[l]&&1===i[l];)l++;for(;1===s[l];)c++,l++;r=Is(r,s.length,c,i)}if(!en(s,i))throw new bs(s,i,">");u(t,e.max().map((function(t){return t+1})),n);var p=s.length;o(t._data,e,r,p,0)}return t}function o(t,e,r,n,i){var s=i===n-1,a=e.dimension(i);s?a.forEach((function(e,n){Ss(e),t[e]=r[n[0]]})):a.forEach((function(s,a){Ss(s),o(t[s],e,r[a[0]],n,i+1)}))}function a(t,e,r){if(0===e.length){for(var n=t._data;xr(n);)n=n[0];return n}return t._size=e.slice(0),t._data=As(t._data,t._size,r),t}function u(t,e,r){for(var n=t._size.slice(0),i=!1;n.length<e.length;)n.push(0),i=!0;for(var s=0,o=e.length;s<o;s++)e[s]>n[s]&&(n[s]=e[s],i=!0);i&&a(t,n,r)}function l(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];xr(n)?t[e]=l(n):n&&!0===n.isMatrix&&(t[e]=l(n.valueOf()))}return t}return r.prototype=new e,r.prototype.createDenseMatrix=function(t,e){return new r(t,e)},r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Fs(this._data,Jr)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(t,e){return new r(t,e)},r.prototype.subset=function(t,e,r){switch(arguments.length){case 1:return n(this,t);case 2:case 3:return s(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(t){if(!xr(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new bs(t.length,this._size.length);for(var e=0;e<t.length;e++)Ss(t[e],this._size[e]);for(var r=this._data,n=0,i=t.length;n<i;n++){var s=t[n];Ss(s,r.length),r=r[s]}return r},r.prototype.set=function(t,e,r){if(!xr(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new bs(t.length,this._size.length,"<");var n,i,s;u(this,t.map((function(t){return t+1})),r);var o=this._data;for(n=0,i=t.length-1;n<i;n++)Ss(s=t[n],o.length),o=o[s];return Ss(s=t[t.length-1],o.length),o[s]=e,this},r.prototype.resize=function(t,e,r){if(!wr(t))throw new TypeError("Array or Matrix expected");var n=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));return a(r?this.clone():this,n,e)},r.prototype.reshape=function(t,e){var r=e?this.clone():this;r._data=Ms(r._data,t);var n=r._size.reduce(((t,e)=>t*e));return r._size=ks(t,n),r},r.prototype.clone=function(){return new r({data:Qr(this._data),size:Qr(this._size),datatype:this._datatype})},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(t){var e=this,n=function r(n,i){return xr(n)?n.map((function(t,e){return r(t,i.concat(e))})):t(n,i,e)}(this._data,[]);return new r(n,void 0!==this._datatype?Fs(n,Jr):void 0)},r.prototype.forEach=function(t){var e=this;!function r(n,i){xr(n)?n.forEach((function(t,e){r(t,i.concat(e))})):t(n,i,e)}(this._data,[])},r.prototype.toArray=function(){return Qr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(t){return ds(this._data,t)},r.prototype.toString=function(){return ds(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(t){if(t){if(mr(t)&&(t=t.toNumber()),!dr(t)||!un(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,n=t<0?-t:0,i=this._size[0],s=this._size[1],o=Math.min(i-n,s-e),a=[],u=0;u<o;u++)a[u]=this._data[u+n][u+e];return new r({data:a,size:[o],datatype:this._datatype})},r.diagonal=function(t,e,n,i){if(!xr(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(mr(t)&&(t=t.toNumber()),!dr(t)||!un(t)||t<1)throw new Error("Size values must be positive integers");return t})),n){if(mr(n)&&(n=n.toNumber()),!dr(n)||!un(n))throw new TypeError("The parameter k must be an integer number")}else n=0;var s,o=n>0?n:0,a=n<0?-n:0,u=t[0],l=t[1],c=Math.min(u-a,l-o);if(xr(e)){if(e.length!==c)throw new Error("Invalid value array length");s=function(t){return e[t]}}else if(_r(e)){var p=e.size();if(1!==p.length||p[0]!==c)throw new Error("Invalid matrix length");s=function(t){return e.get([t])}}else s=function(){return e};i||(i=mr(s(0))?s(0).mul(0):0);var h=[];if(t.length>0){h=As(h,t,i);for(var f=0;f<c;f++)h[f+a][f+o]=s(f)}return new r({data:h,size:[u,l]})},r.fromJSON=function(t){return new r(t)},r.prototype.swapRows=function(t,e){if(!(dr(t)&&un(t)&&dr(e)&&un(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Ss(t,this._size[0]),Ss(e,this._size[0]),r._swapRows(t,e,this._data),this},r._swapRows=function(t,e,r){var n=r[t];r[t]=r[e],r[e]=n},r}),{isClass:!0}),Vs=__webpack_require__(63581),js=function(){return js=Vs.create,Vs},Hs=nn("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(t){var{BigNumber:e,Complex:r,DenseMatrix:n,Fraction:i}=t,s=js();return s.types=[{name:"number",test:dr},{name:"Complex",test:gr},{name:"BigNumber",test:mr},{name:"Fraction",test:yr},{name:"Unit",test:vr},{name:"string",test:br},{name:"Chain",test:Kr},{name:"Array",test:xr},{name:"Matrix",test:_r},{name:"DenseMatrix",test:Er},{name:"SparseMatrix",test:Sr},{name:"Range",test:Ar},{name:"Index",test:Nr},{name:"boolean",test:Mr},{name:"ResultSet",test:kr},{name:"Help",test:Cr},{name:"function",test:Tr},{name:"Date",test:Or},{name:"RegExp",test:Ir},{name:"null",test:Rr},{name:"undefined",test:Lr},{name:"AccessorNode",test:Dr},{name:"ArrayNode",test:qr},{name:"AssignmentNode",test:Br},{name:"BlockNode",test:Ur},{name:"ConditionalNode",test:$r},{name:"ConstantNode",test:zr},{name:"FunctionNode",test:Gr},{name:"FunctionAssignmentNode",test:Fr},{name:"IndexNode",test:Vr},{name:"Node",test:jr},{name:"ObjectNode",test:Hr},{name:"OperatorNode",test:Wr},{name:"ParenthesisNode",test:Yr},{name:"RangeNode",test:Xr},{name:"SymbolNode",test:Zr},{name:"Object",test:Pr}],s.conversions=[{from:"number",to:"BigNumber",convert:function(t){if(e||Ws(t),t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return r||Ys(t),new r(t,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(t){return r||Ys(t),new r(t.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return r||Ys(t),new r(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){i||Xs(t);var e=new i(t);if(e.valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||Ws(t);try{return new e(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(t){i||Xs(t);try{return new i(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){r||Ys(t);try{return new r(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||Ws(t),new e(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return i||Xs(t),new i(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return n||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new n(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],s}));function Ws(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Ys(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Xs(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}function Zs(t){for(var e=0;e<t.length;e++)if(wr(t[e]))return!0;return!1}function Ks(t,e){_r(t)&&(t=t.valueOf());for(var r=0,n=t.length;r<n;r++){var i=t[r];Array.isArray(i)?Ks(i,e):e(i)}}function Js(t,e,r){return t&&"function"==typeof t.map?t.map((function(t){return Js(t,e,r)})):e(t)}function Qs(t,e,r){var n=Array.isArray(t)?_s(t):t.size();if(e<0||e>=n.length)throw new xs(e,n.length);return _r(t)?t.create(to(t.valueOf(),e,r)):to(t,e,r)}function to(t,e,r){var n,i,s,o;if(e<=0){if(Array.isArray(t[0])){for(o=function(t){var e,r,n=t.length,i=t[0].length,s=[];for(r=0;r<i;r++){var o=[];for(e=0;e<n;e++)o.push(t[e][r]);s.push(o)}return s}(t),i=[],n=0;n<o.length;n++)i[n]=to(o[n],e-1,r);return i}for(s=t[0],n=1;n<t.length;n++)s=r(s,t[n]);return s}for(i=[],n=0;n<t.length;n++)i[n]=to(t[n],e-1,r);return i}function eo(t,e,r,n,i,s,o,a,u,l,c){var p,h,f,d,m=t._values,g=t._index,y=t._ptr;if(n)for(h=y[e],f=y[e+1],p=h;p<f;p++)r[d=g[p]]!==s?(r[d]=s,o.push(d),l?(n[d]=u?a(m[p],c):a(c,m[p]),i[d]=s):n[d]=m[p]):(n[d]=u?a(m[p],n[d]):a(n[d],m[p]),i[d]=s);else for(h=y[e],f=y[e+1],p=h;p<f;p++)r[d=g[p]]!==s?(r[d]=s,o.push(d)):i[d]=s}var ro="isInteger",no=nn(ro,["typed"],(t=>{var{typed:e}=t;return e(ro,{number:un,BigNumber:function(t){return t.isInt()},Fraction:function(t){return 1===t.d&&isFinite(t.n)},"Array | Matrix":function(t){return Js(t,this)}})})),io="isNumeric",so=nn(io,["typed"],(t=>{var{typed:e}=t;return e(io,{"number | BigNumber | Fraction | boolean":function(){return!0},"Complex | Unit | string | null | undefined | Node":function(){return!1},"Array | Matrix":function(t){return Js(t,this)}})})),oo="number";function ao(t){return t<0}function uo(t){return t>0}function lo(t){return 0===t}function co(t){return Number.isNaN(t)}ao.signature=oo,uo.signature=oo,lo.signature=oo,co.signature=oo;var po="isPositive",ho=nn(po,["typed"],(t=>{var{typed:e}=t;return e(po,{number:uo,BigNumber:function(t){return!t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s>0&&t.n>0},Unit:function(t){return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),fo="isNaN",mo=nn(fo,["typed"],(t=>{var{typed:e}=t;return e(fo,{number:co,BigNumber:function(t){return t.isNaN()},Fraction:function(t){return!1},Complex:function(t){return t.isNaN()},Unit:function(t){return Number.isNaN(t.value)},"Array | Matrix":function(t){return Js(t,Number.isNaN)}})}));function go(t,e,r){if(null==r)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}var yo="equalScalar",vo=nn(yo,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(yo,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return En(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||go(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return function(t,e,r){return En(t.re,e.re,r)&&En(t.im,e.im,r)}(t,e,r.epsilon)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)}})}));nn(yo,["typed","config"],(t=>{var{typed:e,config:r}=t;return e(yo,{"number, number":function(t,e){return En(t,e,r.epsilon)}})}));var bo=nn("number",["typed"],(t=>{var{typed:e}=t,r=e("number",{"":function(){return 0},number:function(t){return t},string:function(t){if("NaN"===t)return NaN;var e,r,n=(r=(e=t).match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/))?{input:e,radix:{"0b":2,"0o":8,"0x":16}[r[1]],integerPart:r[2],fractionalPart:r[3]}:null;if(n)return function(t){for(var e=parseInt(t.integerPart,t.radix),r=0,n=0;n<t.fractionalPart.length;n++)r+=parseInt(t.fractionalPart[n],t.radix)/Math.pow(t.radix,n+1);var i=e+r;if(isNaN(i))throw new SyntaxError('String "'+t.input+'" is no valid number');return i}(n);var i=0,s=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);s&&(i=Number(s[2]),t=s[1]);var o=Number(t);if(isNaN(o))throw new SyntaxError('String "'+t+'" is no valid number');if(s){if(o>2**i-1)throw new SyntaxError('String "'.concat(t,'" is out of range'));o>=2**(i-1)&&(o-=2**i)}return o},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},null:function(t){return 0},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return Js(t,this)}});return r.fromJSON=function(t){return parseFloat(t.value)},r})),xo="boolean",_o=nn(xo,["typed"],(t=>{var{typed:e}=t;return e(xo,{"":function(){return!1},boolean:function(t){return t},number:function(t){return!!t},null:function(t){return!1},BigNumber:function(t){return!t.isZero()},string:function(t){var e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;var r=Number(t);if(""!==t&&!isNaN(r))return!!r;throw new Error('Cannot convert "'+t+'" to a boolean')},"Array | Matrix":function(t){return Js(t,this)}})})),wo=nn("complex",["typed","Complex"],(t=>{var{typed:e,Complex:r}=t;return e("complex",{"":function(){return r.ZERO},number:function(t){return new r(t,0)},"number, number":function(t,e){return new r(t,e)},"BigNumber, BigNumber":function(t,e){return new r(t.toNumber(),e.toNumber())},Fraction:function(t){return new r(t.valueOf(),0)},Complex:function(t){return t.clone()},string:function(t){return r(t)},null:function(t){return r(0)},Object:function(t){if("re"in t&&"im"in t)return new r(t.re,t.im);if("r"in t&&"phi"in t||"abs"in t&&"arg"in t)return new r(t);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":function(t){return Js(t,this)}})})),Eo="splitUnit",So=nn(Eo,["typed"],(t=>{var{typed:e}=t;return e(Eo,{"Unit, Array":function(t,e){return t.splitUnit(e)}})})),Ao="number",No="number, number";function Mo(t){return Math.abs(t)}function ko(t,e){return t+e}function Co(t,e){return t*e}function To(t){return-t}function Oo(t){return t}function Io(t){return fn(t)}function Po(t){return Math.ceil(t)}function Ro(t){return t*t*t}function Lo(t){return Math.exp(t)}function Do(t){return dn(t)}function qo(t,e){if(!un(t)||!un(e))throw new Error("Parameters in function gcd must be integer numbers");for(var r;0!==e;)r=t%e,t=e,e=r;return t<0?-t:t}function Bo(t,e){if(!un(t)||!un(e))throw new Error("Parameters in function lcm must be integer numbers");if(0===t||0===e)return 0;for(var r,n=t*e;0!==e;)e=t%(r=e),t=r;return Math.abs(n/t)}function Uo(t){return Math.log(t)}function $o(t){return pn(t)}function zo(t){return cn(t)}function Fo(t,e){if(e>0)return t-e*Math.floor(t/e);if(0===e)return t;throw new Error("Cannot calculate mod for a negative divisor")}function Go(t,e){var r=e<0;if(r&&(e=-e),0===e)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!=1)throw new Error("Root must be odd when a is negative.");if(0===t)return r?1/0:0;if(!isFinite(t))return r?0:t;var n=Math.pow(Math.abs(t),1/e);return n=t<0?-n:n,r?1/n:n}function Vo(t){return ln(t)}function jo(t){return t*t}function Ho(t,e){var r,n,i,s=0,o=1,a=1,u=0;if(!un(t)||!un(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)i=t-(n=Math.floor(t/e))*e,r=s,s=o-n*s,o=r,r=a,a=u-n*a,u=r,t=e,e=i;return t<0?[-t,-o,-u]:[t,t?o:0,u]}function Wo(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}function Yo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(vn(t,e))}Mo.signature=Ao,ko.signature=No,Co.signature=No,To.signature=Ao,Oo.signature=Ao,Io.signature=Ao,Po.signature=Ao,Ro.signature=Ao,Lo.signature=Ao,Do.signature=Ao,qo.signature=No,Bo.signature=No,Uo.signature=Ao,$o.signature=Ao,zo.signature=Ao,Fo.signature=No,Go.signature=No,Vo.signature=Ao,jo.signature=Ao,Ho.signature=No,Wo.signature=No,Yo.signature=No;var Xo="unaryPlus",Zo=nn(Xo,["typed","config","BigNumber"],(t=>{var{typed:e,config:r,BigNumber:n}=t;return e(Xo,{number:Oo,Complex:function(t){return t},BigNumber:function(t){return t},Fraction:function(t){return t},Unit:function(t){return t.clone()},"Array | Matrix":function(t){return Js(t,this,!0)},"boolean | string":function(t){return"BigNumber"===r.number?new n(+t):+t}})})),Ko="apply",Jo=nn(Ko,["typed","isInteger"],(t=>{var{typed:e,isInteger:r}=t;return e(Ko,{"Array | Matrix, number | BigNumber, function":function(t,e,n){if(!r(e))throw new TypeError("Integer number expected for dimension");var i=Array.isArray(t)?_s(t):t.size();if(e<0||e>=i.length)throw new xs(e,i.length);return _r(t)?t.create(Qo(t.valueOf(),e,n)):Qo(t,e,n)}})}));function Qo(t,e,r){var n,i,s;if(e<=0){if(Array.isArray(t[0])){for(s=function(t){var e,r,n=t.length,i=t[0].length,s=[];for(r=0;r<i;r++){var o=[];for(e=0;e<n;e++)o.push(t[e][r]);s.push(o)}return s}(t),i=[],n=0;n<s.length;n++)i[n]=Qo(s[n],e-1,r);return i}return r(t)}for(i=[],n=0;n<t.length;n++)i[n]=Qo(t[n],e-1,r);return i}var ta="cube",ea=nn(ta,["typed"],(t=>{var{typed:e}=t;return e(ta,{number:Ro,Complex:function(t){return t.mul(t).mul(t)},BigNumber:function(t){return t.times(t).times(t)},Fraction:function(t){return t.pow(3)},"Array | Matrix":function(t){return Js(t,this,!0)},Unit:function(t){return t.pow(3)}})})),ra="expm1",na=nn(ra,["typed","Complex"],(t=>{var{typed:e,Complex:r}=t;return e(ra,{number:Do,Complex:function(t){var e=Math.exp(t.re);return new r(e*Math.cos(t.im)-1,e*Math.sin(t.im))},BigNumber:function(t){return t.exp().minus(1)},"Array | Matrix":function(t){return Js(t,this)}})})),ia="log10",sa=nn(ia,["typed","config","Complex"],(t=>{var{typed:e,config:r,Complex:n}=t;return e(ia,{number:function(t){return t>=0||r.predictable?$o(t):new n(t,0).log().div(Math.LN10)},Complex:function(t){return new n(t).log().div(Math.LN10)},BigNumber:function(t){return!t.isNegative()||r.predictable?t.log():new n(t.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":function(t){return Js(t,this)}})})),oa=nn("multiplyScalar",["typed"],(t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Co,"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var r=e.clone();return r.value=null===r.value?r._normalize(t):this(r.value,t),r},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var r=t.clone();return r.value=null===r.value?r._normalize(e):this(r.value,e),r},"Unit, Unit":function(t,e){return t.multiply(e)}})})),aa="sign",ua=nn(aa,["typed","BigNumber","Fraction","complex"],(t=>{var{typed:e,BigNumber:r,complex:n,Fraction:i}=t;return e(aa,{number:Vo,Complex:function(t){return 0===t.im?n(Vo(t.re)):t.sign()},BigNumber:function(t){return new r(t.cmp(0))},Fraction:function(t){return new i(t.s,1)},"Array | Matrix":function(t){return Js(t,this,!0)},Unit:function(t){return this(t.value)}})})),la="square",ca=nn(la,["typed"],(t=>{var{typed:e}=t;return e(la,{number:jo,Complex:function(t){return t.mul(t)},BigNumber:function(t){return t.times(t)},Fraction:function(t){return t.mul(t)},"Array | Matrix":function(t){return Js(t,this,!0)},Unit:function(t){return t.pow(2)}})}));function pa(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new r(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new r(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new r(0):t}return da(t,e,(function(t,e){return t&e}))}function ha(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,r=e.precision;e.config({precision:1e9});var n=t.plus(new e(1));return n.s=-n.s||null,e.config({precision:r}),n}function fa(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);var n=new r(-1);return t.isZero()||e.eq(n)||t.eq(e)?e:e.isZero()||t.eq(n)?t:t.isFinite()&&e.isFinite()?da(t,e,(function(t,e){return t|e})):!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?n:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t}function da(t,e,r){var n,i,s,o,a,u=t.constructor,l=+(t.s<0),c=+(e.s<0);if(l){n=ma(ha(t));for(var p=0;p<n.length;++p)n[p]^=1}else n=ma(t);if(c){i=ma(ha(e));for(var h=0;h<i.length;++h)i[h]^=1}else i=ma(e);n.length<=i.length?(s=n,o=i,a=l):(s=i,o=n,a=c);var f=s.length,d=o.length,m=1^r(l,c),g=new u(1^m),y=new u(1),v=new u(2),b=u.precision;for(u.config({precision:1e9});f>0;)r(s[--f],o[--d])===m&&(g=g.plus(y)),y=y.times(v);for(;d>0;)r(a,o[--d])===m&&(g=g.plus(y)),y=y.times(v);return u.config({precision:b}),0===m&&(g.s=-g.s),g}function ma(t){for(var e=t.d,r=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",s=7-i.length;s--;)i="0"+i;r+=i}for(var o=r.length;"0"===r.charAt(o);)o--;var a=t.e,u=r.slice(0,o+1||1),l=u.length;if(a>0)if(++a>l)for(a-=l;a--;)u+="0";else a<l&&(u=u.slice(0,a)+"."+u.slice(a));for(var c=[0],p=0;p<u.length;){for(var h=c.length;h--;)c[h]*=10;c[0]+=parseInt(u.charAt(p++));for(var f=0;f<c.length;++f)c[f]>1&&(null!==c[f+1]&&void 0!==c[f+1]||(c[f+1]=0),c[f+1]+=c[f]>>1,c[f]&=1)}return c.reverse()}function ga(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var r=t.constructor;if(t.isNaN()||e.isNaN())return new r(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new r(0);var n=new r(-1);return t.eq(n)?ha(e):e.eq(n)?ha(t):t.isFinite()&&e.isFinite()?da(t,e,(function(t,e){return t^e})):t.isFinite()||e.isFinite()?new r(t.isNegative()===e.isNegative()?1/0:-1/0):n}function ya(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:t.isFinite()||e.isFinite()?e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new r(2).pow(e)):new r(NaN)}function va(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var r=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new r(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new r(2).pow(e)).floor():t.isNegative()?new r(-1):t.isFinite()?new r(0):new r(NaN)}var ba="number, number";function xa(t,e){if(!un(t)||!un(e))throw new Error("Integers expected in function bitAnd");return t&e}function _a(t){if(!un(t))throw new Error("Integer expected in function bitNot");return~t}function wa(t,e){if(!un(t)||!un(e))throw new Error("Integers expected in function bitOr");return t|e}function Ea(t,e){if(!un(t)||!un(e))throw new Error("Integers expected in function bitXor");return t^e}function Sa(t,e){if(!un(t)||!un(e))throw new Error("Integers expected in function leftShift");return t<<e}function Aa(t,e){if(!un(t)||!un(e))throw new Error("Integers expected in function rightArithShift");return t>>e}function Na(t,e){if(!un(t)||!un(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}xa.signature=ba,_a.signature="number",wa.signature=ba,Ea.signature=ba,Sa.signature=ba,Aa.signature=ba,Na.signature=ba;var Ma="bitNot",ka=nn(Ma,["typed"],(t=>{var{typed:e}=t;return e(Ma,{number:_a,BigNumber:ha,"Array | Matrix":function(t){return Js(t,this)}})})),Ca=nn("arg",["typed"],(t=>{var{typed:e}=t;return e("arg",{number:function(t){return Math.atan2(0,t)},BigNumber:function(t){return t.constructor.atan2(0,t)},Complex:function(t){return t.arg()},"Array | Matrix":function(t){return Js(t,this)}})})),Ta=nn("im",["typed"],(t=>{var{typed:e}=t;return e("im",{number:function(t){return 0},BigNumber:function(t){return t.mul(0)},Complex:function(t){return t.im},"Array | Matrix":function(t){return Js(t,this)}})})),Oa="number, number";function Ia(t){return!t}function Pa(t,e){return!(!t&&!e)}function Ra(t,e){return!!t!=!!e}function La(t,e){return!(!t||!e)}Ia.signature="number",Pa.signature=Oa,Ra.signature=Oa,La.signature=Oa;var Da=nn("not",["typed"],(t=>{var{typed:e}=t;return e("not",{number:Ia,Complex:function(t){return 0===t.re&&0===t.im},BigNumber:function(t){return t.isZero()||t.isNaN()},Unit:function(t){return null===t.value||this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),qa=nn("filter",["typed"],(t=>{var{typed:e}=t;return e("filter",{"Array, function":Ba,"Matrix, function":function(t,e){return t.create(Ba(t.toArray(),e))},"Array, RegExp":Bs,"Matrix, RegExp":function(t,e){return t.create(Bs(t.toArray(),e))}})}));function Ba(t,e){var r=Rn(e);return qs(t,(function(t,n,i){return 1===r?e(t):2===r?e(t,[n]):e(t,[n],i)}))}var Ua="forEach",$a=nn(Ua,["typed"],(t=>{var{typed:e}=t;return e(Ua,{"Array, function":za,"Matrix, function":function(t,e){return t.forEach(e)}})}));function za(t,e){var r=Rn(e);!function n(i,s){Array.isArray(i)?Ds(i,(function(t,e){n(t,s.concat(e))})):1===r?e(i):2===r?e(i,s):e(i,s,t)}(t,[])}var Fa=nn("map",["typed"],(t=>{var{typed:e}=t;return e("map",{"Array, function":Ga,"Matrix, function":function(t,e){return t.map(e)}})}));function Ga(t,e){var r=Rn(e);return function n(i,s){return Array.isArray(i)?i.map((function(t,e){return n(t,s.concat(e))})):1===r?e(i):2===r?e(i,s):e(i,s,t)}(t,[])}var Va=nn("erf",["typed"],(t=>{var{typed:e}=t;return e("name",{number:function(t){var e=Math.abs(t);return e>=Xa?ln(t):e<=ja?ln(t)*function(t){var e,r=t*t,n=Wa[0][4]*r,i=r;for(e=0;e<3;e+=1)n=(n+Wa[0][e])*r,i=(i+Ya[0][e])*r;return t*(n+Wa[0][3])/(i+Ya[0][3])}(e):e<=4?ln(t)*(1-function(t){var e,r=Wa[1][8]*t,n=t;for(e=0;e<7;e+=1)r=(r+Wa[1][e])*t,n=(n+Ya[1][e])*t;var i=(r+Wa[1][7])/(n+Ya[1][7]),s=parseInt(16*t)/16,o=(t-s)*(t+s);return Math.exp(-s*s)*Math.exp(-o)*i}(e)):ln(t)*(1-function(t){var e,r=1/(t*t),n=Wa[2][5]*r,i=r;for(e=0;e<4;e+=1)n=(n+Wa[2][e])*r,i=(i+Ya[2][e])*r;var s=r*(n+Wa[2][4])/(i+Ya[2][4]);s=(Ha-s)/t;var o=(t-(r=parseInt(16*t)/16))*(t+r);return Math.exp(-r*r)*Math.exp(-o)*s}(e))},"Array | Matrix":function(t){return Js(t,this)}})})),ja=.46875,Ha=.5641895835477563,Wa=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Ya=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Xa=Math.pow(2,53),Za="format",Ka=nn(Za,["typed"],(t=>{var{typed:e}=t;return e(Za,{any:ds,"any, Object | function | number":ds})})),Ja=nn("oct",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("oct",{"number | BigNumber":function(t){return r(t,{notation:"oct"})},"number | BigNumber, number":function(t,e){return r(t,{notation:"oct",wordSize:e})}})})),Qa="print",tu=nn(Qa,["typed"],(t=>{var{typed:e}=t;return e(Qa,{"string, Object | Array":eu,"string, Object | Array, number | Object":eu})}));function eu(t,e,r){return t.replace(/\$([\w.]+)/g,(function(t,n){for(var i=n.split("."),s=e[i.shift()];i.length&&void 0!==s;){var o=i.shift();s=o?s[o]:s+"."}return void 0!==s?br(s)?s:ds(s,r):t}))}var ru="isPrime",nu=nn(ru,["typed"],(t=>{var{typed:e}=t;return e(ru,{number:function(t){if(0*t!=0)return!1;if(t<=3)return t>1;if(t%2==0||t%3==0)return!1;for(var e=5;e*e<=t;e+=6)if(t%e==0||t%(e+2)==0)return!1;return!0},BigNumber:function(t){if(0*t.toNumber()!=0)return!1;if(t.lte(3))return t.gt(1);if(t.mod(2).eq(0)||t.mod(3).eq(0))return!1;if(t.lt(Math.pow(2,32))){for(var e=t.toNumber(),r=5;r*r<=e;r+=6)if(e%r==0||e%(r+2)==0)return!1;return!0}function n(t,e,r){for(var n=1;!e.eq(0);)e.mod(2).eq(0)?(e=e.div(2),t=t.mul(t).mod(r)):(e=e.sub(1),n=t.mul(n).mod(r));return n}for(var i=t.constructor.clone({precision:2*t.toFixed(0).length}),s=0,o=(t=new i(t)).sub(1);o.mod(2).eq(0);)o=o.div(2),s+=1;var a=null;if(t.lt("3317044064679887385961981"))a=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter((e=>e<t));else{var u=Math.min(t.toNumber()-2,Math.floor(2*Math.pow(t.toFixed(0).length*Math.log(10),2)));a=[];for(var l=2;l<=u;l+=1)a.push(u)}for(var c=0;c<a.length;c+=1){var p=a[c],h=n(t.sub(t).add(p),o,t);if(!h.eq(1))for(var f=0,d=h;!d.eq(t.sub(1));f+=1,d=d.mul(d).mod(t))if(f===s-1)return!1}return!0},"Array | Matrix":function(t){return Js(t,this)}})})),iu="acos",su=nn(iu,["typed","config","Complex"],(t=>{var{typed:e,config:r,Complex:n}=t;return e(iu,{number:function(t){return t>=-1&&t<=1||r.predictable?Math.acos(t):new n(t,0).acos()},Complex:function(t){return t.acos()},BigNumber:function(t){return t.acos()},"Array | Matrix":function(t){return Js(t,this)}})})),ou="number";function au(t){return Sn(t)}function uu(t){return Math.atan(1/t)}function lu(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}function cu(t){return Math.asin(1/t)}function pu(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}function hu(t){return Math.acos(1/t)}function fu(t){var e=1/t,r=Math.sqrt(e*e-1);return Math.log(r+e)}function du(t){return An(t)}function mu(t){return Nn(t)}function gu(t){return 1/Math.tan(t)}function yu(t){var e=Math.exp(2*t);return(e+1)/(e-1)}function vu(t){return 1/Math.sin(t)}function bu(t){return 0===t?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*ln(t)}function xu(t){return 1/Math.cos(t)}function _u(t){return 2/(Math.exp(t)+Math.exp(-t))}function wu(t){return kn(t)}au.signature=ou,uu.signature=ou,lu.signature=ou,cu.signature=ou,pu.signature=ou,hu.signature=ou,fu.signature=ou,du.signature=ou,mu.signature=ou,gu.signature=ou,yu.signature=ou,vu.signature=ou,bu.signature=ou,xu.signature=ou,_u.signature=ou,wu.signature=ou;var Eu="acot",Su=nn(Eu,["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e(Eu,{number:uu,Complex:function(t){return t.acot()},BigNumber:function(t){return new r(1).div(t).atan()},"Array | Matrix":function(t){return Js(t,this)}})})),Au="acsc",Nu=nn(Au,["typed","config","Complex","BigNumber"],(t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(Au,{number:function(t){return t<=-1||t>=1||r.predictable?cu(t):new n(t,0).acsc()},Complex:function(t){return t.acsc()},BigNumber:function(t){return new i(1).div(t).asin()},"Array | Matrix":function(t){return Js(t,this)}})})),Mu="asec",ku=nn(Mu,["typed","config","Complex","BigNumber"],(t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(Mu,{number:function(t){return t<=-1||t>=1||r.predictable?hu(t):new n(t,0).asec()},Complex:function(t){return t.asec()},BigNumber:function(t){return new i(1).div(t).acos()},"Array | Matrix":function(t){return Js(t,this)}})})),Cu="asin",Tu=nn(Cu,["typed","config","Complex"],(t=>{var{typed:e,config:r,Complex:n}=t;return e(Cu,{number:function(t){return t>=-1&&t<=1||r.predictable?Math.asin(t):new n(t,0).asin()},Complex:function(t){return t.asin()},BigNumber:function(t){return t.asin()},"Array | Matrix":function(t){return Js(t,this,!0)}})})),Ou=nn("atan",["typed"],(t=>{var{typed:e}=t;return e("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()},"Array | Matrix":function(t){return Js(t,this,!0)}})})),Iu="atanh",Pu=nn(Iu,["typed","config","Complex"],(t=>{var{typed:e,config:r,Complex:n}=t;return e(Iu,{number:function(t){return t<=1&&t>=-1||r.predictable?mu(t):new n(t,0).atanh()},Complex:function(t){return t.atanh()},BigNumber:function(t){return t.atanh()},"Array | Matrix":function(t){return Js(t,this,!0)}})})),Ru="cosh",Lu=nn(Ru,["typed"],(t=>{var{typed:e}=t;return e(Ru,{number:Mn,Complex:function(t){return t.cosh()},BigNumber:function(t){return t.cosh()},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cosh is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Du="coth",qu=nn(Du,["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e(Du,{number:yu,Complex:function(t){return t.coth()},BigNumber:function(t){return new r(1).div(t.tanh())},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function coth is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Bu="csch",Uu=nn(Bu,["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e(Bu,{number:bu,Complex:function(t){return t.csch()},BigNumber:function(t){return new r(1).div(t.sinh())},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csch is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),$u="sech",zu=nn($u,["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e($u,{number:_u,Complex:function(t){return t.sech()},BigNumber:function(t){return new r(1).div(t.cosh())},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sech is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Fu="sinh",Gu=nn(Fu,["typed"],(t=>{var{typed:e}=t;return e(Fu,{number:wu,Complex:function(t){return t.sinh()},BigNumber:function(t){return t.sinh()},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sinh is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this,!0)}})})),Vu=nn("tanh",["typed"],(t=>{var{typed:e}=t;return e("tanh",{number:Cn,Complex:function(t){return t.tanh()},BigNumber:function(t){return t.tanh()},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tanh is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this,!0)}})}));function ju(t,e){if(e<t)return 1;if(e===t)return e;var r=e+t>>1;return ju(t,r)*ju(r+1,e)}function Hu(t,e){if(!un(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!un(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");var r=t-e;return e<r?ju(r+1,t)/ju(1,e):ju(e+1,t)/ju(1,r)}Hu.signature="number, number";var Wu="combinations",Yu=nn(Wu,["typed"],(t=>{var{typed:e}=t;return e(Wu,{"number, number":Hu,"BigNumber, BigNumber":function(t,e){var r,n,i=t.constructor,s=t.minus(e),o=new i(1);if(!Xu(t)||!Xu(e))throw new TypeError("Positive integer value expected in function combinations");if(e.gt(t))throw new TypeError("k must be less than n in function combinations");if(r=o,e.lt(s))for(n=o;n.lte(s);n=n.plus(o))r=r.times(e.plus(n)).dividedBy(n);else for(n=o;n.lte(e);n=n.plus(o))r=r.times(s.plus(n)).dividedBy(n);return r}})}));function Xu(t){return t.isInteger()&&t.gte(0)}var Zu=__webpack_require__(68116),Ku=Zu(Date.now());function Ju(t){var e,r;return e=null===(r=t)?Ku:Zu(String(r)),function(){return e()}}var Qu=nn("pickRandom",["typed","config","?on"],(t=>{var{typed:e,config:r,on:n}=t,i=Ju(r.randomSeed);return n&&n("config",(function(t,e){t.randomSeed!==e.randomSeed&&(i=Ju(t.randomSeed))})),e({"Array | Matrix":function(t){return s(t,{})},"Array | Matrix, Object":function(t,e){return s(t,e)},"Array | Matrix, number":function(t,e){return s(t,{number:e})},"Array | Matrix, Array | Matrix":function(t,e){return s(t,{weights:e})},"Array | Matrix, Array | Matrix, number":function(t,e,r){return s(t,{number:r,weights:e})},"Array | Matrix, number, Array | Matrix":function(t,e,r){return s(t,{number:e,weights:r})}});function s(t,e){var{number:r,weights:n,elementWise:s=!0}=e,o=void 0===r;o&&(r=1);var a=_r(t)?t.create:_r(n)?n.create:null;t=t.valueOf(),n&&(n=n.valueOf()),!0===s&&(t=Rs(t),n=Rs(n));var u=0;if(void 0!==n){if(n.length!==t.length)throw new Error("Weights must have the same length as possibles");for(var l=0,c=n.length;l<c;l++){if(!dr(n[l])||n[l]<0)throw new Error("Weights must be an array of positive numbers");u+=n[l]}}for(var p,h=t.length,f=[];f.length<r;){if(void 0===n)p=t[Math.floor(i()*h)];else for(var d=i()*u,m=0,g=t.length;m<g;m++)if((d-=n[m])<0){p=t[m];break}f.push(p)}return o?f[0]:a?a(f):f}}));function tl(t,e){var r=[];if((t=t.slice(0)).length>1)for(var n=0,i=t.shift();n<i;n++)r.push(tl(t,e));else for(var s=0,o=t.shift();s<o;s++)r.push(e());return r}var el="randomInt",rl=nn(el,["typed","config","?on"],(t=>{var{typed:e,config:r,on:n}=t,i=Ju(r.randomSeed);return n&&n("config",(function(t,e){t.randomSeed!==e.randomSeed&&(i=Ju(t.randomSeed))})),e(el,{"":()=>o(0,1),number:t=>o(0,t),"number, number":(t,e)=>o(t,e),"Array | Matrix":t=>s(t,0,1),"Array | Matrix, number":(t,e)=>s(t,0,e),"Array | Matrix, number, number":(t,e,r)=>s(t,e,r)});function s(t,e,r){var n=tl(t.valueOf(),(()=>o(e,r)));return _r(t)?t.create(n):n}function o(t,e){return Math.floor(t+i()*(e-t))}})),nl="clone",il=nn(nl,["typed"],(t=>{var{typed:e}=t;return e(nl,{any:Qr})})),sl="hasNumericValue",ol=nn(sl,["typed","isNumeric"],(t=>{var{typed:e,isNumeric:r}=t;return e(sl,{string:function(t){return t.trim().length>0&&!isNaN(Number(t))},any:function(t){return r(t)}})})),al="typeOf",ul=nn(al,["typed"],(t=>{var{typed:e}=t;return e(al,{any:Jr})})),ll="string",cl=nn(ll,["typed"],(t=>{var{typed:e}=t;return e(ll,{"":function(){return""},number:gn,null:function(t){return"null"},boolean:function(t){return t+""},string:function(t){return t},"Array | Matrix":function(t){return Js(t,this)},any:function(t){return String(t)}})})),pl=nn("fraction",["typed","Fraction"],(t=>{var{typed:e,Fraction:r}=t;return e("fraction",{number:function(t){if(!isFinite(t)||isNaN(t))throw new Error(t+" cannot be represented as a fraction");return new r(t)},string:function(t){return new r(t)},"number, number":function(t,e){return new r(t,e)},null:function(t){return new r(0)},BigNumber:function(t){return new r(t.toString())},Fraction:function(t){return t},Object:function(t){return new r(t)},"Array | Matrix":function(t){return Js(t,this)}})})),hl="unaryMinus",fl=nn(hl,["typed"],(t=>{var{typed:e}=t;return e(hl,{number:To,Complex:function(t){return t.neg()},BigNumber:function(t){return t.neg()},Fraction:function(t){return t.neg()},Unit:function(t){var e=t.clone();return e.value=this(t.value),e},"Array | Matrix":function(t){return Js(t,this,!0)}})})),dl="addScalar",ml=nn(dl,["typed"],(t=>{var{typed:e}=t;return e(dl,{"number, number":ko,"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null===t.value||void 0===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value||void 0===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var r=t.clone();return r.value=this(r.value,e.value),r.fixPrefix=!1,r}})})),gl=nn("exp",["typed"],(t=>{var{typed:e}=t;return e("exp",{number:Lo,Complex:function(t){return t.exp()},BigNumber:function(t){return t.exp()},"Array | Matrix":function(t){return Js(t,this)}})})),yl="log2",vl=nn(yl,["typed","config","Complex"],(t=>{var{typed:e,config:r,Complex:n}=t;return e(yl,{number:function(t){return t>=0||r.predictable?zo(t):i(new n(t,0))},Complex:i,BigNumber:function(t){return!t.isNegative()||r.predictable?t.log(2):i(new n(t.toNumber(),0))},"Array | Matrix":function(t){return Js(t,this)}});function i(t){var e=Math.sqrt(t.re*t.re+t.im*t.im);return new n(Math.log2?Math.log2(e):Math.log(e)/Math.LN2,Math.atan2(t.im,t.re)/Math.LN2)}})),bl=nn("sqrt",["config","typed","Complex"],(t=>{var{config:e,typed:r,Complex:n}=t;return r("sqrt",{number:i,Complex:function(t){return t.sqrt()},BigNumber:function(t){return!t.isNegative()||e.predictable?t.sqrt():i(t.toNumber())},"Array | Matrix":function(t){return Js(t,this,!0)},Unit:function(t){return t.pow(.5)}});function i(t){return isNaN(t)?NaN:t>=0||e.predictable?Math.sqrt(t):new n(t,0).sqrt()}})),xl="conj",_l=nn(xl,["typed"],(t=>{var{typed:e}=t;return e(xl,{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.conjugate()},"Array | Matrix":function(t){return Js(t,this)}})})),wl="getMatrixDataType",El=nn(wl,["typed"],(t=>{var{typed:e}=t;return e(wl,{Array:function(t){return Fs(t,Jr)},Matrix:function(t){return t.getDataType()}})})),Sl="mode",Al=nn(Sl,["typed","isNaN","isNumeric"],(t=>{var{typed:e,isNaN:r,isNumeric:n}=t;return e(Sl,{"Array | Matrix":i,"...":function(t){return i(t)}});function i(t){if(0===(t=Rs(t.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var e={},i=[],s=0,o=0;o<t.length;o++){var a=t[o];if(n(a)&&r(a))throw new Error("Cannot calculate mode of an array containing NaN values");a in e||(e[a]=0),e[a]++,e[a]===s?i.push(a):e[a]>s&&(s=e[a],i=[a])}return i}})),Nl=nn("bin",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("bin",{"number | BigNumber":function(t){return r(t,{notation:"bin"})},"number | BigNumber, number":function(t,e){return r(t,{notation:"bin",wordSize:e})}})})),Ml="acosh",kl=nn(Ml,["typed","config","Complex"],(t=>{var{typed:e,config:r,Complex:n}=t;return e(Ml,{number:function(t){return t>=1||r.predictable?au(t):t<=-1?new n(Math.log(Math.sqrt(t*t-1)-t),Math.PI):new n(t,0).acosh()},Complex:function(t){return t.acosh()},BigNumber:function(t){return t.acosh()},"Array | Matrix":function(t){return Js(t,this)}})})),Cl="acsch",Tl=nn(Cl,["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e(Cl,{number:pu,Complex:function(t){return t.acsch()},BigNumber:function(t){return new r(1).div(t).asinh()},"Array | Matrix":function(t){return Js(t,this)}})})),Ol=nn("asinh",["typed"],(t=>{var{typed:e}=t;return e("asinh",{number:du,Complex:function(t){return t.asinh()},BigNumber:function(t){return t.asinh()},"Array | Matrix":function(t){return Js(t,this,!0)}})})),Il=nn("cos",["typed"],(t=>{var{typed:e}=t;return e("cos",{number:Math.cos,Complex:function(t){return t.cos()},BigNumber:function(t){return t.cos()},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Pl=nn("csc",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e("csc",{number:vu,Complex:function(t){return t.csc()},BigNumber:function(t){return new r(1).div(t.sin())},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Rl=nn("sin",["typed"],(t=>{var{typed:e}=t;return e("sin",{number:Math.sin,Complex:function(t){return t.sin()},BigNumber:function(t){return t.sin()},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sin is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this,!0)}})})),Ll="combinationsWithRep",Dl=nn(Ll,["typed"],(t=>{var{typed:e}=t;return e(Ll,{"number, number":function(t,e){if(!un(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!un(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(t<1)throw new TypeError("k must be less than or equal to n + k - 1");return e<t-1?ju(t,t+e-1)/ju(1,e):ju(e+1,t+e-1)/ju(1,t-1)},"BigNumber, BigNumber":function(t,e){var r,n,i=new(0,t.constructor)(1),s=t.minus(i);if(!ql(t)||!ql(e))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(t.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(r=i,e.lt(s))for(n=i;n.lte(s);n=n.plus(i))r=r.times(e.plus(n)).dividedBy(n);else for(n=i;n.lte(e);n=n.plus(i))r=r.times(s.plus(n)).dividedBy(n);return r}})}));function ql(t){return t.isInteger()&&t.gte(0)}var Bl="random",Ul=nn(Bl,["typed","config","?on"],(t=>{var{typed:e,config:r,on:n}=t,i=Ju(r.randomSeed);return n&&n("config",(function(t,e){t.randomSeed!==e.randomSeed&&(i=Ju(t.randomSeed))})),e(Bl,{"":()=>o(0,1),number:t=>o(0,t),"number, number":(t,e)=>o(t,e),"Array | Matrix":t=>s(t,0,1),"Array | Matrix, number":(t,e)=>s(t,0,e),"Array | Matrix, number, number":(t,e,r)=>s(t,e,r)});function s(t,e,r){var n=tl(t.valueOf(),(()=>o(e,r)));return _r(t)?t.create(n):n}function o(t,e){return t+i()*(e-t)}})),$l="isNegative",zl=nn($l,["typed"],(t=>{var{typed:e}=t;return e($l,{number:ao,BigNumber:function(t){return t.isNeg()&&!t.isZero()&&!t.isNaN()},Fraction:function(t){return t.s<0},Unit:function(t){return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Fl=nn("SparseMatrix",["typed","equalScalar","Matrix"],(t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!br(e))throw new Error("Invalid datatype: "+e);if(_r(t))!function(t,e,r){"SparseMatrix"===e.type?(t._values=e._values?Qr(e._values):void 0,t._index=Qr(e._index),t._ptr=Qr(e._ptr),t._size=Qr(e._size),t._datatype=r||e._datatype):s(t,e.valueOf(),r||e._datatype)}(this,t,e);else if(t&&xr(t.index)&&xr(t.ptr)&&xr(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if(xr(t))s(this,t,e);else{if(t)throw new TypeError("Unsupported type of data ("+Jr(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}}function s(t,n,i){t._values=[],t._index=[],t._ptr=[],t._datatype=i;var s=n.length,o=0,a=r,u=0;if(br(i)&&(a=e.find(r,[i,i])||r,u=e.convert(0,i)),s>0){var l=0;do{t._ptr.push(t._index.length);for(var c=0;c<s;c++){var p=n[c];if(xr(p)){if(0===l&&o<p.length&&(o=p.length),l<p.length){var h=p[l];a(h,u)||(t._values.push(h),t._index.push(c))}}else 0===l&&o<1&&(o=1),a(p,u)||(t._values.push(p),t._index.push(c))}l++}while(l<o)}t._ptr.push(t._index.length),t._size=[s,o]}function o(t,e){if(!Nr(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var r,n,s,o,a=e.size();if(a.length!==t._size.length)throw new bs(a.length,t._size.length);var u=e.min(),l=e.max();for(r=0,n=t._size.length;r<n;r++)Ss(u[r],t._size[r]),Ss(l[r],t._size[r]);var c=t._values,p=t._index,h=t._ptr,f=e.dimension(0),d=e.dimension(1),m=[],g=[];f.forEach((function(t,e){g[t]=e[0],m[t]=!0}));var y=c?[]:void 0,v=[],b=[];return d.forEach((function(t){for(b.push(v.length),s=h[t],o=h[t+1];s<o;s++)r=p[s],!0===m[r]&&(v.push(g[r]),y&&y.push(c[s]))})),b.push(v.length),new i({values:y,index:v,ptr:b,size:a,datatype:t._datatype})}function a(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var i,s=e.size(),o=e.isScalar();if(_r(r)?(i=r.size(),r=r.toArray()):i=_s(r),o){if(0!==i.length)throw new TypeError("Scalar expected");t.set(e.min(),r,n)}else{if(1!==s.length&&2!==s.length)throw new bs(s.length,t._size.length,"<");if(i.length<s.length){for(var a=0,u=0;1===s[a]&&1===i[a];)a++;for(;1===s[a];)u++,a++;r=Is(r,s.length,u,i)}if(!en(s,i))throw new bs(s,i,">");for(var l=e.min()[0],c=e.min()[1],p=i[0],h=i[1],f=0;f<p;f++)for(var d=0;d<h;d++){var m=r[f][d];t.set([f+l,d+c],m,n)}}return t}function u(t,e,r,n){if(r-e==0)return r;for(var i=e;i<r;i++)if(n[i]===t)return i;return e}function l(t,e,r,n,i,s,o){i.splice(t,0,n),s.splice(t,0,e);for(var a=r+1;a<o.length;a++)o[a]++}function c(t,n,i,s){var o=s||0,a=r,u=0;br(t._datatype)&&(a=e.find(r,[t._datatype,t._datatype])||r,u=e.convert(0,t._datatype),o=e.convert(o,t._datatype));var l,c,p,h=!a(o,u),f=t._size[0],d=t._size[1];if(i>d){for(c=d;c<i;c++)if(t._ptr[c]=t._values.length,h)for(l=0;l<f;l++)t._values.push(o),t._index.push(l);t._ptr[i]=t._values.length}else i<d&&(t._ptr.splice(i+1,d-i),t._values.splice(t._ptr[i],t._values.length),t._index.splice(t._ptr[i],t._index.length));if(d=i,n>f){if(h){var m=0;for(c=0;c<d;c++){t._ptr[c]=t._ptr[c]+m,p=t._ptr[c+1]+m;var g=0;for(l=f;l<n;l++,g++)t._values.splice(p+g,0,o),t._index.splice(p+g,0,l),m++}t._ptr[d]=t._values.length}}else if(n<f){var y=0;for(c=0;c<d;c++){t._ptr[c]=t._ptr[c]-y;var v=t._ptr[c],b=t._ptr[c+1]-y;for(p=v;p<b;p++)(l=t._index[p])>n-1&&(t._values.splice(p,1),t._index.splice(p,1),y++)}t._ptr[c]=t._values.length}return t._size[0]=n,t._size[1]=i,t}function p(t,e,r,n,i){var s,o,a=n[0],u=n[1],l=[];for(s=0;s<a;s++)for(l[s]=[],o=0;o<u;o++)l[s][o]=0;for(o=0;o<u;o++)for(var c=r[o],p=r[o+1],h=c;h<p;h++)l[s=e[h]][o]=t?i?Qr(t[h]):t[h]:1;return l}return i.prototype=new n,i.prototype.createSparseMatrix=function(t,e){return new i(t,e)},i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Fs(this._values,Jr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(t,e){return new i(t,e)},i.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},i.prototype.subset=function(t,e,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,t);case 2:case 3:return a(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(t){if(!xr(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new bs(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],r=t[1];Ss(e,this._size[0]),Ss(r,this._size[1]);var n=u(e,this._ptr[r],this._ptr[r+1],this._index);return n<this._ptr[r+1]&&this._index[n]===e?this._values[n]:0},i.prototype.set=function(t,n,i){if(!xr(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new bs(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var s=t[0],o=t[1],a=this._size[0],p=this._size[1],h=r,f=0;br(this._datatype)&&(h=e.find(r,[this._datatype,this._datatype])||r,f=e.convert(0,this._datatype)),(s>a-1||o>p-1)&&(c(this,Math.max(s+1,a),Math.max(o+1,p),i),a=this._size[0],p=this._size[1]),Ss(s,a),Ss(o,p);var d=u(s,this._ptr[o],this._ptr[o+1],this._index);return d<this._ptr[o+1]&&this._index[d]===s?h(n,f)?function(t,e,r,n,i){r.splice(t,1),n.splice(t,1);for(var s=e+1;s<i.length;s++)i[s]--}(d,o,this._values,this._index,this._ptr):this._values[d]=n:l(d,s,o,n,this._values,this._index,this._ptr),this},i.prototype.resize=function(t,e,r){if(!wr(t))throw new TypeError("Array or Matrix expected");var n=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));if(2!==n.length)throw new Error("Only two dimensions matrix are supported");return n.forEach((function(t){if(!dr(t)||!un(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ds(n)+")")})),c(r?this.clone():this,n[0],n[1],e)},i.prototype.reshape=function(t,e){if(!xr(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");t.forEach((function(e){if(!dr(e)||!un(e)||e<=-2||0===e)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+ds(t)+")")}));var r=this._size[0]*this._size[1];if(r!==(t=ks(t,r))[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var n=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return n;for(var i=[],s=0;s<n._ptr.length;s++)for(var o=0;o<n._ptr[s+1]-n._ptr[s];o++)i.push(s);for(var a=n._values.slice(),c=n._index.slice(),p=0;p<n._index.length;p++){var h=c[p],f=i[p],d=h*n._size[1]+f;i[p]=d%t[1],c[p]=Math.floor(d/t[1])}n._values.length=0,n._index.length=0,n._ptr.length=t[1]+1,n._size=t.slice();for(var m=0;m<n._ptr.length;m++)n._ptr[m]=0;for(var g=0;g<a.length;g++){var y=c[g],v=i[g],b=a[g];l(u(y,n._ptr[v],n._ptr[v+1],n._index),y,v,b,n._values,n._index,n._ptr)}return n},i.prototype.clone=function(){return new i({values:this._values?Qr(this._values):void 0,index:Qr(this._index),ptr:Qr(this._ptr),size:Qr(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(t,n){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var s=this;return function(t,n,s,o,a,u,l){var c=[],p=[],h=[],f=r,d=0;br(t._datatype)&&(f=e.find(r,[t._datatype,t._datatype])||r,d=e.convert(0,t._datatype));for(var m=function(t,e,r){t=u(t,e,r),f(t,d)||(c.push(t),p.push(e))},g=0;g<=a;g++){h.push(c.length);var y=t._ptr[g],v=t._ptr[g+1];if(l)for(var b=y;b<v;b++){var x=t._index[b];x>=0&&x<=s&&m(t._values[b],x-0,g-0)}else{for(var _={},w=y;w<v;w++)_[t._index[w]]=t._values[w];for(var E=0;E<=s;E++)m(E in _?_[E]:0,E-0,g-0)}}return h.push(c.length),new i({values:c,index:p,ptr:h,size:[s-0+1,a-0+1]})}(this,0,this._size[0]-1,0,this._size[1]-1,(function(e,r,n){return t(e,[r,n],s)}),n)},i.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this._size[0],n=this._size[1],i=0;i<n;i++){var s=this._ptr[i],o=this._ptr[i+1];if(e)for(var a=s;a<o;a++){var u=this._index[a];t(this._values[a],[u,i],this)}else{for(var l={},c=s;c<o;c++)l[this._index[c]]=this._values[c];for(var p=0;p<r;p++)t(p in l?l[p]:0,[p,i],this)}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(t){for(var e=this._size[0],r=this._size[1],n=this.density(),i="Sparse Matrix ["+ds(e,t)+" x "+ds(r,t)+"] density: "+ds(n,t)+"\n",s=0;s<r;s++)for(var o=this._ptr[s],a=this._ptr[s+1],u=o;u<a;u++)i+="\n    ("+ds(this._index[u],t)+", "+ds(s,t)+") ==> "+(this._values?ds(this._values[u],t):"X");return i},i.prototype.toString=function(){return ds(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(t){if(t){if(mr(t)&&(t=t.toNumber()),!dr(t)||!un(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,r=t<0?-t:0,n=this._size[0],s=this._size[1],o=Math.min(n-r,s-e),a=[],u=[],l=[];l[0]=0;for(var c=e;c<s&&a.length<o;c++)for(var p=this._ptr[c],h=this._ptr[c+1],f=p;f<h;f++){var d=this._index[f];if(d===c-e+r){a.push(this._values[f]),u[a.length-1]=d-r;break}}return l.push(a.length),new i({values:a,index:u,ptr:l,size:[o,1]})},i.fromJSON=function(t){return new i(t)},i.diagonal=function(t,n,s,o,a){if(!xr(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(mr(t)&&(t=t.toNumber()),!dr(t)||!un(t)||t<1)throw new Error("Size values must be positive integers");return t})),s){if(mr(s)&&(s=s.toNumber()),!dr(s)||!un(s))throw new TypeError("The parameter k must be an integer number")}else s=0;var u=r,l=0;br(a)&&(u=e.find(r,[a,a])||r,l=e.convert(0,a));var c,p=s>0?s:0,h=s<0?-s:0,f=t[0],d=t[1],m=Math.min(f-h,d-p);if(xr(n)){if(n.length!==m)throw new Error("Invalid value array length");c=function(t){return n[t]}}else if(_r(n)){var g=n.size();if(1!==g.length||g[0]!==m)throw new Error("Invalid matrix length");c=function(t){return n.get([t])}}else c=function(){return n};for(var y=[],v=[],b=[],x=0;x<d;x++){b.push(y.length);var _=x-p;if(_>=0&&_<m){var w=c(_);u(w,l)||(v.push(_+h),y.push(w))}}return b.push(y.length),new i({values:y,index:v,ptr:b,size:[f,d]})},i.prototype.swapRows=function(t,e){if(!(dr(t)&&un(t)&&dr(e)&&un(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Ss(t,this._size[0]),Ss(e,this._size[0]),i._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(t,e,r,n,i){for(var s=n[t],o=n[t+1],a=s;a<o;a++)i(r[a],e[a])},i._swapRows=function(t,e,r,n,i,s){for(var o=0;o<r;o++){var a=s[o],l=s[o+1],c=u(t,a,l,i),p=u(e,a,l,i);if(c<l&&p<l&&i[c]===t&&i[p]===e){if(n){var h=n[c];n[c]=n[p],n[p]=h}}else if(c<l&&i[c]===t&&(p>=l||i[p]!==e)){var f=n?n[c]:void 0;i.splice(p,0,e),n&&n.splice(p,0,f),i.splice(p<=c?c+1:c,1),n&&n.splice(p<=c?c+1:c,1)}else if(p<l&&i[p]===e&&(c>=l||i[c]!==t)){var d=n?n[p]:void 0;i.splice(c,0,t),n&&n.splice(c,0,d),i.splice(c<=p?p+1:p,1),n&&n.splice(c<=p?p+1:p,1)}}},i}),{isClass:!0}),Gl="matrix",Vl=nn(Gl,["typed","Matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(Gl,{"":function(){return s([])},string:function(t){return s([],t)},"string, string":function(t,e){return s([],t,e)},Array:function(t){return s(t)},Matrix:function(t){return s(t,t.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(t,e,r){if("dense"===e||"default"===e||void 0===e)return new n(t,r);if("sparse"===e)return new i(t,r);throw new TypeError("Unknown matrix type "+JSON.stringify(e)+".")}})),jl="cbrt",Hl=nn(jl,["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],(t=>{var{config:e,typed:r,isNegative:n,unaryMinus:i,matrix:s,Complex:o,BigNumber:a,Fraction:u}=t;return r(jl,{number:Io,Complex:l,"Complex, boolean":l,BigNumber:function(t){return t.cbrt()},Unit:function(t){if(t.value&&gr(t.value)){var e=t.clone();return e.value=1,(e=e.pow(1/3)).value=l(t.value),e}var r,s=n(t.value);s&&(t.value=i(t.value)),r=mr(t.value)?new a(1).div(3):yr(t.value)?new u(1,3):1/3;var o=t.pow(r);return s&&(o.value=i(o.value)),o},"Array | Matrix":function(t){return Js(t,this,!0)}});function l(t,r){var n=t.arg()/3,i=t.abs(),a=new o(Io(i),0).mul(new o(0,n).exp());if(r){var u=[a,new o(Io(i),0).mul(new o(0,n+2*Math.PI/3).exp()),new o(Io(i),0).mul(new o(0,n-2*Math.PI/3).exp())];return"Array"===e.matrix?u:s(u)}return a}})),Wl=nn("algorithm01",["typed"],(t=>{var{typed:e}=t;return function(t,r,n,i){var s=t._data,o=t._size,a=t._datatype,u=r._values,l=r._index,c=r._ptr,p=r._size,h=r._datatype;if(o.length!==p.length)throw new bs(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,d,m=o[0],g=o[1],y="string"==typeof a&&a===h?a:void 0,v=y?e.find(n,[y,y]):n,b=[];for(f=0;f<m;f++)b[f]=[];var x=[],_=[];for(d=0;d<g;d++){for(var w=d+1,E=c[d],S=c[d+1],A=E;A<S;A++)x[f=l[A]]=i?v(u[A],s[f][d]):v(s[f][d],u[A]),_[f]=w;for(f=0;f<m;f++)_[f]===w?b[f][d]=x[f]:b[f][d]=s[f][d]}return t.createDenseMatrix({data:b,size:[m,g],datatype:y})}})),Yl=nn("algorithm04",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var s=t._values,o=t._index,a=t._ptr,u=t._size,l=t._datatype,c=n._values,p=n._index,h=n._ptr,f=n._size,d=n._datatype;if(u.length!==f.length)throw new bs(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var m,g=u[0],y=u[1],v=r,b=0,x=i;"string"==typeof l&&l===d&&(m=l,v=e.find(r,[m,m]),b=e.convert(0,m),x=e.find(i,[m,m]));var _,w,E,S,A,N=s&&c?[]:void 0,M=[],k=[],C=s&&c?[]:void 0,T=s&&c?[]:void 0,O=[],I=[];for(w=0;w<y;w++){k[w]=M.length;var P=w+1;for(S=a[w],A=a[w+1],E=S;E<A;E++)_=o[E],M.push(_),O[_]=P,C&&(C[_]=s[E]);for(S=h[w],A=h[w+1],E=S;E<A;E++)if(O[_=p[E]]===P){if(C){var R=x(C[_],c[E]);v(R,b)?O[_]=null:C[_]=R}}else M.push(_),I[_]=P,T&&(T[_]=c[E]);if(C&&T)for(E=k[w];E<M.length;)O[_=M[E]]===P?(N[E]=C[_],E++):I[_]===P?(N[E]=T[_],E++):M.splice(E,1)}return k[y]=M.length,t.createSparseMatrix({values:N,index:M,ptr:k,size:[g,y],datatype:m})}})),Xl=nn("algorithm10",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,n,i,s){var o=t._values,a=t._index,u=t._ptr,l=t._size,c=t._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=l[0],f=l[1],d=i;"string"==typeof c&&(p=c,n=e.convert(n,p),d=e.find(i,[p,p]));for(var m=[],g=[],y=[],v=0;v<f;v++){for(var b=v+1,x=u[v],_=u[v+1],w=x;w<_;w++){var E=a[w];g[E]=o[w],y[E]=b}for(var S=0;S<h;S++)0===v&&(m[S]=[]),y[S]===b?m[S][v]=s?d(n,g[S]):d(g[S],n):m[S][v]=n}return new r({data:m,size:[h,f],datatype:p})}})),Zl=nn("algorithm13",["typed"],(t=>{var{typed:e}=t;return function(t,n,i){var s,o=t._data,a=t._size,u=t._datatype,l=n._data,c=n._size,p=n._datatype,h=[];if(a.length!==c.length)throw new bs(a.length,c.length);for(var f=0;f<a.length;f++){if(a[f]!==c[f])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+c+")");h[f]=a[f]}var d=i;"string"==typeof u&&u===p&&(s=u,d=e.find(i,[s,s]));var m=h.length>0?r(d,0,h,h[0],o,l):[];return t.createDenseMatrix({data:m,size:h,datatype:s})};function r(t,e,n,i,s,o){var a=[];if(e===n.length-1)for(var u=0;u<i;u++)a[u]=t(s[u],o[u]);else for(var l=0;l<i;l++)a[l]=r(t,e+1,n,n[e+1],s[l],o[l]);return a}})),Kl=nn("algorithm14",["typed"],(t=>{var{typed:e}=t;return function(t,n,i,s){var o,a=t._data,u=t._size,l=t._datatype,c=i;"string"==typeof l&&(o=l,n=e.convert(n,o),c=e.find(i,[o,o]));var p=u.length>0?r(c,0,u,u[0],a,n,s):[];return t.createDenseMatrix({data:p,size:Qr(u),datatype:o})};function r(t,e,n,i,s,o,a){var u=[];if(e===n.length-1)for(var l=0;l<i;l++)u[l]=a?t(o,s[l]):t(s[l],o);else for(var c=0;c<i;c++)u[c]=r(t,e+1,n,n[e+1],s[c],o,a);return u}})),Jl=nn("gcd",["typed","matrix","equalScalar","BigNumber","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,DenseMatrix:s}=t,o=Wl({typed:e}),a=Yl({typed:e,equalScalar:n}),u=Xl({typed:e,DenseMatrix:s}),l=Zl({typed:e}),c=Kl({typed:e});return e("gcd",{"number, number":qo,"BigNumber, BigNumber":function(t,e){if(!t.isInt()||!e.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var r=new i(0);!e.isZero();){var n=t.mod(e);t=e,e=n}return t.lt(r)?t.neg():t},"Fraction, Fraction":function(t,e){return t.gcd(e)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, number | BigNumber":function(t,e){return u(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return c(t,e,this,!1)},"number | BigNumber, SparseMatrix":function(t,e){return u(e,t,this,!0)},"number | BigNumber, DenseMatrix":function(t,e){return c(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return c(r(t),e,this,!1).valueOf()},"number | BigNumber, Array":function(t,e){return c(r(e),t,this,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(t,e,r){for(var n=this(t,e),i=0;i<r.length;i++)n=this(n,r[i]);return n}})})),Ql=nn("algorithm02",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i,s){var o=t._data,a=t._size,u=t._datatype,l=n._values,c=n._index,p=n._ptr,h=n._size,f=n._datatype;if(a.length!==h.length)throw new bs(a.length,h.length);if(a[0]!==h[0]||a[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+h+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,m=a[0],g=a[1],y=r,v=0,b=i;"string"==typeof u&&u===f&&(d=u,y=e.find(r,[d,d]),v=e.convert(0,d),b=e.find(i,[d,d]));for(var x=[],_=[],w=[],E=0;E<g;E++){w[E]=_.length;for(var S=p[E],A=p[E+1],N=S;N<A;N++){var M=c[N],k=s?b(l[N],o[M][E]):b(o[M][E],l[N]);y(k,v)||(_.push(M),x.push(k))}}return w[g]=_.length,n.createSparseMatrix({values:x,index:_,ptr:w,size:[m,g],datatype:d})}})),tc=nn("algorithm03",["typed"],(t=>{var{typed:e}=t;return function(t,r,n,i){var s=t._data,o=t._size,a=t._datatype,u=r._values,l=r._index,c=r._ptr,p=r._size,h=r._datatype;if(o.length!==p.length)throw new bs(o.length,p.length);if(o[0]!==p[0]||o[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+p+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,d=o[0],m=o[1],g=0,y=n;"string"==typeof a&&a===h&&(f=a,g=e.convert(0,f),y=e.find(n,[f,f]));for(var v=[],b=0;b<d;b++)v[b]=[];for(var x=[],_=[],w=0;w<m;w++){for(var E=w+1,S=c[w],A=c[w+1],N=S;N<A;N++){var M=l[N];x[M]=i?y(u[N],s[M][w]):y(s[M][w],u[N]),_[M]=E}for(var k=0;k<d;k++)_[k]===E?v[k][w]=x[k]:v[k][w]=i?y(g,s[k][w]):y(s[k][w],g)}return t.createDenseMatrix({data:v,size:[d,m],datatype:f})}})),ec=nn("algorithm05",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var s=t._values,o=t._index,a=t._ptr,u=t._size,l=t._datatype,c=n._values,p=n._index,h=n._ptr,f=n._size,d=n._datatype;if(u.length!==f.length)throw new bs(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var m,g=u[0],y=u[1],v=r,b=0,x=i;"string"==typeof l&&l===d&&(m=l,v=e.find(r,[m,m]),b=e.convert(0,m),x=e.find(i,[m,m]));var _,w,E,S,A=s&&c?[]:void 0,N=[],M=[],k=A?[]:void 0,C=A?[]:void 0,T=[],O=[];for(w=0;w<y;w++){M[w]=N.length;var I=w+1;for(E=a[w],S=a[w+1];E<S;E++)_=o[E],N.push(_),T[_]=I,k&&(k[_]=s[E]);for(E=h[w],S=h[w+1];E<S;E++)T[_=p[E]]!==I&&N.push(_),O[_]=I,C&&(C[_]=c[E]);if(A)for(E=M[w];E<N.length;){var P=T[_=N[E]],R=O[_];if(P===I||R===I){var L=x(P===I?k[_]:b,R===I?C[_]:b);v(L,b)?N.splice(E,1):(A.push(L),E++)}}}return M[y]=N.length,t.createSparseMatrix({values:A,index:N,ptr:M,size:[g,y],datatype:m})}})),rc=nn("algorithm11",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i,s){var o=t._values,a=t._index,u=t._ptr,l=t._size,c=t._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=l[0],f=l[1],d=r,m=0,g=i;"string"==typeof c&&(p=c,d=e.find(r,[p,p]),m=e.convert(0,p),n=e.convert(n,p),g=e.find(i,[p,p]));for(var y=[],v=[],b=[],x=0;x<f;x++){b[x]=v.length;for(var _=u[x],w=u[x+1],E=_;E<w;E++){var S=a[E],A=s?g(n,o[E]):g(o[E],n);d(A,m)||(v.push(S),y.push(A))}}return b[f]=v.length,t.createSparseMatrix({values:y,index:v,ptr:b,size:[h,f],datatype:p})}})),nc=nn("algorithm12",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,n,i,s){var o=t._values,a=t._index,u=t._ptr,l=t._size,c=t._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p,h=l[0],f=l[1],d=i;"string"==typeof c&&(p=c,n=e.convert(n,p),d=e.find(i,[p,p]));for(var m=[],g=[],y=[],v=0;v<f;v++){for(var b=v+1,x=u[v],_=u[v+1],w=x;w<_;w++){var E=a[w];g[E]=o[w],y[E]=b}for(var S=0;S<h;S++)0===v&&(m[S]=[]),y[S]===b?m[S][v]=s?d(n,g[S]):d(g[S],n):m[S][v]=s?d(n,0):d(0,n)}return new r({data:m,size:[h,f],datatype:p})}})),ic=nn("mod",["typed","matrix","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i}=t,s=Ql({typed:e,equalScalar:n}),o=tc({typed:e}),a=ec({typed:e,equalScalar:n}),u=rc({typed:e,equalScalar:n}),l=nc({typed:e,DenseMatrix:i}),c=Zl({typed:e}),p=Kl({typed:e});return e("mod",{"number, number":Fo,"BigNumber, BigNumber":function(t,e){if(e.isNeg())throw new Error("Cannot calculate mod for a negative divisor");return e.isZero()?t:t.mod(e)},"Fraction, Fraction":function(t,e){if(e.compare(0)<0)throw new Error("Cannot calculate mod for a negative divisor");return t.compare(0)>=0?t.mod(e):t.mod(e).add(e).mod(e)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,this,!1)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return c(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return u(t,e,this,!1)},"DenseMatrix, any":function(t,e){return p(t,e,this,!1)},"any, SparseMatrix":function(t,e){return l(e,t,this,!0)},"any, DenseMatrix":function(t,e){return p(e,t,this,!0)},"Array, any":function(t,e){return p(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return p(r(e),t,this,!0).valueOf()}})})),sc=nn("algorithm06",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var s=t._values,o=t._size,a=t._datatype,u=n._values,l=n._size,c=n._datatype;if(o.length!==l.length)throw new bs(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");var p,h=o[0],f=o[1],d=r,m=0,g=i;"string"==typeof a&&a===c&&(p=a,d=e.find(r,[p,p]),m=e.convert(0,p),g=e.find(i,[p,p]));for(var y=s&&u?[]:void 0,v=[],b=[],x=y?[]:void 0,_=[],w=[],E=0;E<f;E++){b[E]=v.length;var S=E+1;if(eo(t,E,_,x,w,S,v,g),eo(n,E,_,x,w,S,v,g),x)for(var A=b[E];A<v.length;){var N=v[A];if(w[N]===S){var M=x[N];d(M,m)?v.splice(A,1):(y.push(M),A++)}else v.splice(A,1)}else for(var k=b[E];k<v.length;)w[v[k]]!==S?v.splice(k,1):k++}return b[f]=v.length,t.createSparseMatrix({values:y,index:v,ptr:b,size:[h,f],datatype:p})}})),oc="nthRoot",ac=nn(oc,["typed","matrix","equalScalar","BigNumber"],(t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i}=t,s=Wl({typed:e}),o=Ql({typed:e,equalScalar:n}),a=sc({typed:e,equalScalar:n}),u=rc({typed:e,equalScalar:n}),l=Zl({typed:e}),c=Kl({typed:e}),p="Complex number not supported in function nthRoot. Use nthRoots instead.";return e(oc,{number:function(t){return Go(t,2)},"number, number":Go,BigNumber:function(t){return h(t,new i(2))},Complex:function(t){throw new Error(p)},"Complex, number":function(t,e){throw new Error(p)},"BigNumber, BigNumber":h,"Array | Matrix":function(t){return this(t,2)},"SparseMatrix, SparseMatrix":function(t,e){if(1===e.density())return a(t,e,this);throw new Error("Root must be non-zero")},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){if(1===e.density())return s(t,e,this,!1);throw new Error("Root must be non-zero")},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, number | BigNumber":function(t,e){return u(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return c(t,e,this,!1)},"number | BigNumber, SparseMatrix":function(t,e){if(1===e.density())return u(e,t,this,!0);throw new Error("Root must be non-zero")},"number | BigNumber, DenseMatrix":function(t,e){return c(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return this(r(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return this(t,r(e)).valueOf()}});function h(t,e){var r=i.precision,n=i.clone({precision:r+2}),s=new i(0),o=new n(1),a=e.isNegative();if(a&&(e=e.neg()),e.isZero())throw new Error("Root must be non-zero");if(t.isNegative()&&!e.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(t.isZero())return a?new n(1/0):0;if(!t.isFinite())return a?s:t;var u=t.abs().pow(o.div(e));return u=t.isNeg()?u.neg():u,new i((a?o.div(u):u).toPrecision(r))}})),uc="xgcd",lc=nn(uc,["typed","config","matrix","BigNumber"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(uc,{"number, number":function(t,e){var i=Ho(t,e);return"Array"===r.matrix?i:n(i)},"BigNumber, BigNumber":function(t,e){var s,o,a,u,l=new i(0),c=new i(1),p=l,h=c,f=c,d=l;if(!t.isInt()||!e.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!e.isZero();)o=t.div(e).floor(),a=t.mod(e),s=p,p=h.minus(o.times(p)),h=s,s=f,f=d.minus(o.times(f)),d=s,t=e,e=a;return u=t.lt(l)?[t.neg(),h.neg(),d.neg()]:[t,t.isZero()?0:h,d],"Array"===r.matrix?u:n(u)}})})),cc="bitAnd",pc=nn(cc,["typed","matrix","equalScalar"],(t=>{var{typed:e,matrix:r,equalScalar:n}=t,i=Ql({typed:e,equalScalar:n}),s=sc({typed:e,equalScalar:n}),o=rc({typed:e,equalScalar:n}),a=Zl({typed:e}),u=Kl({typed:e});return e(cc,{"number, number":xa,"BigNumber, BigNumber":pa,"SparseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"SparseMatrix, DenseMatrix":function(t,e){return i(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return i(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return a(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return o(t,e,this,!1)},"DenseMatrix, any":function(t,e){return u(t,e,this,!1)},"any, SparseMatrix":function(t,e){return o(e,t,this,!0)},"any, DenseMatrix":function(t,e){return u(e,t,this,!0)},"Array, any":function(t,e){return u(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return u(r(e),t,this,!0).valueOf()}})})),hc=nn("algorithm07",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:r}=t;return function(t,i,s){var o=t._size,a=t._datatype,u=i._size,l=i._datatype;if(o.length!==u.length)throw new bs(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var c,p,h,f=o[0],d=o[1],m=0,g=s;"string"==typeof a&&a===l&&(c=a,m=e.convert(0,c),g=e.find(s,[c,c]));var y=[];for(p=0;p<f;p++)y[p]=[];var v=[],b=[],x=[],_=[];for(h=0;h<d;h++){var w=h+1;for(n(t,h,x,v,w),n(i,h,_,b,w),p=0;p<f;p++){var E=x[p]===w?v[p]:m,S=_[p]===w?b[p]:m;y[p][h]=g(E,S)}}return new r({data:y,size:[f,d],datatype:c})};function n(t,e,r,n,i){for(var s=t._values,o=t._index,a=t._ptr,u=a[e],l=a[e+1];u<l;u++){var c=o[u];r[c]=i,n[c]=s[u]}}})),fc="bitXor",dc=nn(fc,["typed","matrix","DenseMatrix"],(t=>{var{typed:e,matrix:r,DenseMatrix:n}=t,i=tc({typed:e}),s=hc({typed:e,DenseMatrix:n}),o=nc({typed:e,DenseMatrix:n}),a=Zl({typed:e}),u=Kl({typed:e});return e(fc,{"number, number":Ea,"BigNumber, BigNumber":ga,"SparseMatrix, SparseMatrix":function(t,e){return s(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return i(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return i(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return a(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return o(t,e,this,!1)},"DenseMatrix, any":function(t,e){return u(t,e,this,!1)},"any, SparseMatrix":function(t,e){return o(e,t,this,!0)},"any, DenseMatrix":function(t,e){return u(e,t,this,!0)},"Array, any":function(t,e){return u(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return u(r(e),t,this,!0).valueOf()}})})),mc=nn("or",["typed","matrix","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i}=t,s=tc({typed:e}),o=ec({typed:e,equalScalar:n}),a=nc({typed:e,DenseMatrix:i}),u=Zl({typed:e}),l=Kl({typed:e});return e("or",{"number, number":Pa,"Complex, Complex":function(t,e){return 0!==t.re||0!==t.im||0!==e.re||0!==e.im},"BigNumber, BigNumber":function(t,e){return!t.isZero()&&!t.isNaN()||!e.isZero()&&!e.isNaN()},"Unit, Unit":function(t,e){return this(t.value||0,e.value||0)},"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return a(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return a(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(r(e),t,this,!0).valueOf()}})})),gc="concat",yc=nn(gc,["typed","matrix","isInteger"],(t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(gc,{"...Array | Matrix | number | BigNumber":function(t){var e,i,s=t.length,o=-1,a=!1,u=[];for(e=0;e<s;e++){var l=t[e];if(_r(l)&&(a=!0),dr(l)||mr(l)){if(e!==s-1)throw new Error("Dimension must be specified as last argument");if(i=o,o=l.valueOf(),!n(o))throw new TypeError("Integer number expected for dimension");if(o<0||e>0&&o>i)throw new xs(o,i+1)}else{var c=Qr(l).valueOf(),p=_s(c);if(u[e]=c,i=o,o=p.length-1,e>0&&o!==i)throw new bs(i+1,o+1)}}if(0===u.length)throw new SyntaxError("At least one matrix expected");for(var h=u.shift();u.length;)h=vc(h,u.shift(),o,0);return a?r(h):h},"...string":function(t){return t.join("")}})}));function vc(t,e,r,n){if(n<r){if(t.length!==e.length)throw new bs(t.length,e.length);for(var i=[],s=0;s<t.length;s++)i[s]=vc(t[s],e[s],r,n+1);return i}return t.concat(e)}var bc="diag",xc=nn(bc,["typed","matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(bc,{Array:function(t){return s(t,0,_s(t),null)},"Array, number":function(t,e){return s(t,e,_s(t),null)},"Array, BigNumber":function(t,e){return s(t,e.toNumber(),_s(t),null)},"Array, string":function(t,e){return s(t,0,_s(t),e)},"Array, number, string":function(t,e,r){return s(t,e,_s(t),r)},"Array, BigNumber, string":function(t,e,r){return s(t,e.toNumber(),_s(t),r)},Matrix:function(t){return s(t,0,t.size(),t.storage())},"Matrix, number":function(t,e){return s(t,e,t.size(),t.storage())},"Matrix, BigNumber":function(t,e){return s(t,e.toNumber(),t.size(),t.storage())},"Matrix, string":function(t,e){return s(t,0,t.size(),e)},"Matrix, number, string":function(t,e,r){return s(t,e,t.size(),r)},"Matrix, BigNumber, string":function(t,e,r){return s(t,e.toNumber(),t.size(),r)}});function s(t,e,s,o){if(!un(e))throw new TypeError("Second parameter in function diag must be an integer");var a=e>0?e:0,u=e<0?-e:0;switch(s.length){case 1:return function(t,e,r,s,o,a){var u=[s+o,s+a];if(r&&"sparse"!==r&&"dense"!==r)throw new TypeError("Unknown matrix type ".concat(r,'"'));var l="sparse"===r?i.diagonal(u,t,e):n.diagonal(u,t,e);return null!==r?l:l.valueOf()}(t,e,o,s[0],u,a);case 2:return function(t,e,n,i,s,o){if(_r(t)){var a=t.diagonal(e);return null!==n?n!==a.storage()?r(a,n):a:a.valueOf()}for(var u=Math.min(i[0]-s,i[1]-o),l=[],c=0;c<u;c++)l[c]=t[c+s][c+o];return null!==n?r(l):l}(t,e,o,s,u,a)}throw new RangeError("Matrix for function diag must be 2 dimensional")}})),_c="identity",wc=nn(_c,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i,DenseMatrix:s,SparseMatrix:o}=t;return e(_c,{"":function(){return"Matrix"===r.matrix?n([]):[]},string:function(t){return n(t)},"number | BigNumber":function(t){return u(t,t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, string":function(t,e){return u(t,t,e)},"number | BigNumber, number | BigNumber":function(t,e){return u(t,e,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,r){return u(t,e,r)},Array:function(t){return a(t)},"Array, string":function(t,e){return a(t,e)},Matrix:function(t){return a(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return a(t.valueOf(),e)}});function a(t,e){switch(t.length){case 0:return e?n(e):[];case 1:return u(t[0],t[0],e);case 2:return u(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function u(t,e,r){var n=mr(t)||mr(e)?i:null;if(mr(t)&&(t=t.toNumber()),mr(e)&&(e=e.toNumber()),!un(t)||t<1)throw new Error("Parameters in function identity must be positive integers");if(!un(e)||e<1)throw new Error("Parameters in function identity must be positive integers");var a=n?new i(1):1,u=n?new n(0):0,l=[t,e];if(r){if("sparse"===r)return o.diagonal(l,a,0,u);if("dense"===r)return s.diagonal(l,a,0,u);throw new TypeError('Unknown matrix type "'.concat(r,'"'))}for(var c=As([],l,u),p=t<e?t:e,h=0;h<p;h++)c[h][h]=a;return c}})),Ec=nn("ones",["typed","config","matrix","BigNumber"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e("ones",{"":function(){return"Array"===r.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return s(t,e)}return"Array"===r.matrix?s(t):s(t,"default")},Array:s,Matrix:function(t){var e=t.storage();return s(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return s(t.valueOf(),e)}});function s(t,e){var r=function(t){var e=!1;return t.forEach((function(t,r,n){mr(t)&&(e=!0,n[r]=t.toNumber())})),e}(t)?new i(1):1;if(function(t){t.forEach((function(t){if("number"!=typeof t||!un(t)||t<0)throw new Error("Parameters in function ones must be positive integers")}))}(t),e){var s=n(e);return t.length>0?s.resize(t,r):s}var o=[];return t.length>0?As(o,t,r):o}})),Sc="reshape",Ac=nn(Sc,["typed","isInteger","matrix"],(t=>{var{typed:e,isInteger:r}=t;return e(Sc,{"Matrix, Array":function(t,e){return t.reshape(e)},"Array, Array":function(t,e){return e.forEach((function(t){if(!r(t))throw new TypeError("Invalid size for dimension: "+t)})),Ms(t,e)}})}));function Nc(){throw new Error('No "bignumber" implementation available')}function Mc(){throw new Error('No "fraction" implementation available')}function kc(){throw new Error('No "matrix" implementation available')}var Cc="size",Tc=nn(Cc,["typed","config","?matrix"],(t=>{var{typed:e,config:r,matrix:n}=t;return e(Cc,{Matrix:function(t){return t.create(t.size())},Array:_s,string:function(t){return"Array"===r.matrix?[t.length]:n([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return"Array"===r.matrix?[]:n?n([]):kc()}})}));function Oc(t,e){if(Lc(t)&&Pc(t,e))return t[e];if("function"==typeof t[e]&&Rc(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function Ic(t,e,r){if(Lc(t)&&Pc(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Pc(t,e){return!(!t||"object"!=typeof t||!rn(Dc,e)&&(e in Object.prototype||e in Function.prototype))}function Rc(t,e){return!(null==t||"function"!=typeof t[e]||rn(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)||!rn(qc,e)&&(e in Object.prototype||e in Function.prototype))}function Lc(t){return"object"==typeof t&&t&&t.constructor===Object}var Dc={length:!0,name:!0},qc={toString:!0,valueOf:!0,toLocaleString:!0},Bc="subset",Uc=nn(Bc,["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e(Bc,{"Array, Index":function(t,e){var n=r(t).subset(e);return e.isScalar()?n:n.valueOf()},"Matrix, Index":function(t,e){return t.subset(e)},"Object, Index":Fc,"string, Index":$c,"Array, Index, any":function(t,e,n){return r(Qr(t)).subset(e,n,void 0).valueOf()},"Array, Index, any, any":function(t,e,n,i){return r(Qr(t)).subset(e,n,i).valueOf()},"Matrix, Index, any":function(t,e,r){return t.clone().subset(e,r)},"Matrix, Index, any, any":function(t,e,r,n){return t.clone().subset(e,r,n)},"string, Index, string":zc,"string, Index, string, string":zc,"Object, Index, any":Gc})}));function $c(t,e){if(!Nr(e))throw new TypeError("Index expected");if(1!==e.size().length)throw new bs(e.size().length,1);var r=t.length;Ss(e.min()[0],r),Ss(e.max()[0],r);var n=e.dimension(0),i="";return n.forEach((function(e){i+=t.charAt(e)})),i}function zc(t,e,r,n){if(!e||!0!==e.isIndex)throw new TypeError("Index expected");if(1!==e.size().length)throw new bs(e.size().length,1);if(void 0!==n){if("string"!=typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0);if(i.size()[0]!==r.length)throw new bs(i.size()[0],r.length);var s=t.length;Ss(e.min()[0]),Ss(e.max()[0]);for(var o=[],a=0;a<s;a++)o[a]=t.charAt(a);if(i.forEach((function(t,e){o[t]=r.charAt(e[0])})),o.length>s)for(var u=s-1,l=o.length;u<l;u++)o[u]||(o[u]=n);return o.join("")}function Fc(t,e){if(1!==e.size().length)throw new bs(e.size(),1);var r=e.dimension(0);if("string"!=typeof r)throw new TypeError("String expected as index to retrieve an object property");return Oc(t,r)}function Gc(t,e,r){if(1!==e.size().length)throw new bs(e.size(),1);var n=e.dimension(0);if("string"!=typeof n)throw new TypeError("String expected as index to retrieve an object property");var i=Qr(t);return Ic(i,n,r),i}var Vc="zeros",jc=nn(Vc,["typed","config","matrix","BigNumber"],(t=>{var{typed:e,config:r,matrix:n,BigNumber:i}=t;return e(Vc,{"":function(){return"Array"===r.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(t){if("string"==typeof t[t.length-1]){var e=t.pop();return s(t,e)}return"Array"===r.matrix?s(t):s(t,"default")},Array:s,Matrix:function(t){var e=t.storage();return s(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return s(t.valueOf(),e)}});function s(t,e){var r=function(t){var e=!1;return t.forEach((function(t,r,n){mr(t)&&(e=!0,n[r]=t.toNumber())})),e}(t)?new i(0):0;if(function(t){t.forEach((function(t){if("number"!=typeof t||!un(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")}))}(t),e){var s=n(e);return t.length>0?s.resize(t,r):s}var o=[];return t.length>0?As(o,t,r):o}})),Hc=nn("hex",["typed","format"],(t=>{var{typed:e,format:r}=t;return e("hex",{"number | BigNumber":function(t){return r(t,{notation:"hex"})},"number | BigNumber, number":function(t,e){return r(t,{notation:"hex",wordSize:e})}})}));function Wc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wc(Object(r),!0).forEach((function(e){Xc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Zc="Number of decimals in function round must be an integer",Kc="round",Jc=nn(Kc,["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,BigNumber:s,DenseMatrix:o}=t,a=rc({typed:e,equalScalar:n}),u=nc({typed:e,DenseMatrix:o}),l=Kl({typed:e});return e(Kc,Yc(Yc({},Qc),{},{Complex:function(t){return t.round()},"Complex, number":function(t,e){if(e%1)throw new TypeError(Zc);return t.round(e)},"Complex, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(Zc);var r=e.toNumber();return t.round(r)},"number, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(Zc);return new s(t).toDecimalPlaces(e.toNumber())},BigNumber:function(t){return t.toDecimalPlaces(0)},"BigNumber, BigNumber":function(t,e){if(!e.isInteger())throw new TypeError(Zc);return t.toDecimalPlaces(e.toNumber())},Fraction:function(t){return t.round()},"Fraction, number":function(t,e){if(e%1)throw new TypeError(Zc);return t.round(e)},"Array | Matrix":function(t){return Js(t,this,!0)},"SparseMatrix, number | BigNumber":function(t,e){return a(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return l(t,e,this,!1)},"number | Complex | BigNumber, SparseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):u(e,t,this,!0)},"number | Complex | BigNumber, DenseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):l(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return l(r(t),e,this,!1).valueOf()},"number | Complex | BigNumber, Array":function(t,e){return l(r(e),t,this,!0).valueOf()}}))})),Qc={number:Yo,"number, number":function(t,e){if(!un(e))throw new TypeError(Zc);if(e<0||e>15)throw new Error("Number of decimals in function round must be in te range of 0-15");return Yo(t,e)}},tp=nn("algorithm08",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var s=t._values,o=t._index,a=t._ptr,u=t._size,l=t._datatype,c=n._values,p=n._index,h=n._ptr,f=n._size,d=n._datatype;if(u.length!==f.length)throw new bs(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");if(!s||!c)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m,g=u[0],y=u[1],v=r,b=0,x=i;"string"==typeof l&&l===d&&(m=l,v=e.find(r,[m,m]),b=e.convert(0,m),x=e.find(i,[m,m]));for(var _,w,E,S,A=[],N=[],M=[],k=[],C=[],T=0;T<y;T++){M[T]=N.length;var O=T+1;for(w=a[T],E=a[T+1],_=w;_<E;_++)C[S=o[_]]=O,k[S]=s[_],N.push(S);for(w=h[T],E=h[T+1],_=w;_<E;_++)C[S=p[_]]===O&&(k[S]=x(k[S],c[_]));for(_=M[T];_<N.length;){var I=k[S=N[_]];v(I,b)?N.splice(_,1):(A.push(I),_++)}}return M[y]=N.length,t.createSparseMatrix({values:A,index:N,ptr:M,size:[g,y],datatype:m})}})),ep="leftShift",rp=nn(ep,["typed","matrix","equalScalar","zeros","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:s}=t,o=Wl({typed:e}),a=Ql({typed:e,equalScalar:n}),u=tp({typed:e,equalScalar:n}),l=Xl({typed:e,DenseMatrix:s}),c=rc({typed:e,equalScalar:n}),p=Zl({typed:e}),h=Kl({typed:e});return e(ep,{"number, number":Sa,"BigNumber, BigNumber":ya,"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,this,!1)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return p(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, number | BigNumber":function(t,e){return n(e,0)?t.clone():c(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return n(e,0)?t.clone():h(t,e,this,!1)},"number | BigNumber, SparseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):l(e,t,this,!0)},"number | BigNumber, DenseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):h(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return this(r(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return this(t,r(e)).valueOf()}})})),np="rightLogShift",ip=nn(np,["typed","matrix","equalScalar","zeros","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:s}=t,o=Wl({typed:e}),a=Ql({typed:e,equalScalar:n}),u=tp({typed:e,equalScalar:n}),l=Xl({typed:e,DenseMatrix:s}),c=rc({typed:e,equalScalar:n}),p=Zl({typed:e}),h=Kl({typed:e});return e(np,{"number, number":Na,"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,this,!1)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return p(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, number | BigNumber":function(t,e){return n(e,0)?t.clone():c(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return n(e,0)?t.clone():h(t,e,this,!1)},"number | BigNumber, SparseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):l(e,t,this,!0)},"number | BigNumber, DenseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):h(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return this(r(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return this(t,r(e)).valueOf()}})})),sp="compare",op=nn(sp,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix"],(t=>{var{typed:e,config:r,equalScalar:n,matrix:i,BigNumber:s,Fraction:o,DenseMatrix:a}=t,u=tc({typed:e}),l=ec({typed:e,equalScalar:n}),c=nc({typed:e,DenseMatrix:a}),p=Zl({typed:e}),h=Kl({typed:e});return e(sp,{"boolean, boolean":function(t,e){return t===e?0:t>e?1:-1},"number, number":function(t,e){return En(t,e,r.epsilon)?0:t>e?1:-1},"BigNumber, BigNumber":function(t,e){return go(t,e,r.epsilon)?new s(0):new s(t.cmp(e))},"Fraction, Fraction":function(t,e){return new o(t.compare(e))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return l(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return u(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return u(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return p(t,e,this)},"Array, Array":function(t,e){return this(i(t),i(e)).valueOf()},"Array, Matrix":function(t,e){return this(i(t),e)},"Matrix, Array":function(t,e){return this(t,i(e))},"SparseMatrix, any":function(t,e){return c(t,e,this,!1)},"DenseMatrix, any":function(t,e){return h(t,e,this,!1)},"any, SparseMatrix":function(t,e){return c(e,t,this,!0)},"any, DenseMatrix":function(t,e){return h(e,t,this,!0)},"Array, any":function(t,e){return h(i(t),e,this,!1).valueOf()},"any, Array":function(t,e){return h(i(e),t,this,!0).valueOf()}})})),ap="compareText",up=nn(ap,["typed","matrix"],(t=>{var{typed:e,matrix:r}=t,n=Zl({typed:e}),i=Kl({typed:e});return e(ap,{"any, any":vs,"DenseMatrix, DenseMatrix":function(t,e){return n(t,e,vs)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"DenseMatrix, any":function(t,e){return i(t,e,vs,!1)},"any, DenseMatrix":function(t,e){return i(e,t,vs,!0)},"Array, any":function(t,e){return i(r(t),e,vs,!1).valueOf()},"any, Array":function(t,e){return i(r(e),t,vs,!0).valueOf()}})})),lp="smaller",cp=nn(lp,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,s=tc({typed:e}),o=hc({typed:e,DenseMatrix:i}),a=nc({typed:e,DenseMatrix:i}),u=Zl({typed:e}),l=Kl({typed:e});return e(lp,{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,e){return t<e&&!En(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.lt(e)&&!go(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return-1===t.compare(e)},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,this)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return a(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return a(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(n(e),t,this,!0).valueOf()}})})),pp="larger",hp=nn(pp,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,s=tc({typed:e}),o=hc({typed:e,DenseMatrix:i}),a=nc({typed:e,DenseMatrix:i}),u=Zl({typed:e}),l=Kl({typed:e});return e(pp,{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,e){return t>e&&!En(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.gt(e)&&!go(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,this)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return a(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return a(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(n(e),t,this,!0).valueOf()}})})),fp="unequal",dp=nn(fp,["typed","config","equalScalar","matrix","DenseMatrix"],(t=>{var{typed:e,config:r,equalScalar:n,matrix:i,DenseMatrix:s}=t,o=tc({typed:e}),a=hc({typed:e,DenseMatrix:s}),u=nc({typed:e,DenseMatrix:s}),l=Zl({typed:e}),c=Kl({typed:e});return e("unequal",{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:p(t,e)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,p)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,p,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,p,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,p)},"Array, Array":function(t,e){return this(i(t),i(e)).valueOf()},"Array, Matrix":function(t,e){return this(i(t),e)},"Matrix, Array":function(t,e){return this(t,i(e))},"SparseMatrix, any":function(t,e){return u(t,e,p,!1)},"DenseMatrix, any":function(t,e){return c(t,e,p,!1)},"any, SparseMatrix":function(t,e){return u(e,t,p,!0)},"any, DenseMatrix":function(t,e){return c(e,t,p,!0)},"Array, any":function(t,e){return c(i(t),e,p,!1).valueOf()},"any, Array":function(t,e){return c(i(e),t,p,!0).valueOf()}});function p(t,e){return!n(t,e)}})),mp=(nn(fp,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return e(fp,{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:!r(t,e)}})})),nn("ImmutableDenseMatrix",["smaller","DenseMatrix"],(t=>{var{smaller:e,DenseMatrix:r}=t;function n(t,e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!br(e))throw new Error("Invalid datatype: "+e);if(_r(t)||xr(t)){var i=new r(t,e);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(t&&xr(t.data)&&xr(t.size))this._data=t.data,this._size=t.size,this._datatype=t.datatype,this._min=void 0!==t.min?t.min:null,this._max=void 0!==t.max?t.max:null;else{if(t)throw new TypeError("Unsupported type of data ("+Jr(t)+")");this._data=[],this._size=[0],this._datatype=e,this._min=null,this._max=null}}return n.prototype=new r,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(t){switch(arguments.length){case 1:var e=r.prototype.subset.call(this,t);return _r(e)?new n({data:e._data,size:e._size,datatype:e._datatype}):e;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:Qr(this._data),size:Qr(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(t){return new n(t)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(null===this._min){var t=null;this.forEach((function(r){(null===t||e(r,t))&&(t=r)})),this._min=null!==t?t:void 0}return this._min},n.prototype.max=function(){if(null===this._max){var t=null;this.forEach((function(r){(null===t||e(t,r))&&(t=r)})),this._max=null!==t?t:void 0}return this._max},n}),{isClass:!0})),gp=nn("FibonacciHeap",["smaller","larger"],(t=>{var{smaller:e,larger:r}=t,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function s(t,e,r){e.left.right=e.right,e.right.left=e.left,r.degree--,r.child===e&&(r.child=e.right),0===r.degree&&(r.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1}function o(t,e){var r=e.parent;r&&(e.mark?(s(t,e,r),o(r)):e.mark=!0)}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(t,r){var n={key:t,value:r,degree:0};if(this._minimum){var i=this._minimum;n.left=i,n.right=i.right,i.right=n,n.right.left=n,e(t,i.key)&&(this._minimum=n)}else n.left=n,n.right=n,this._minimum=n;return this._size++,n},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var i=this._minimum,s=t.degree,o=t.child;s>0;){var u=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=u,s--}return t.left.right=t.right,t.right.left=t.left,i=t===t.right?null:function(t,i){var s,o=Math.floor(Math.log(i)*n)+1,u=new Array(o),l=0,c=t;if(c)for(l++,c=c.right;c!==t;)l++,c=c.right;for(;l>0;){for(var p=c.degree,h=c.right;s=u[p];){if(r(c.key,s.key)){var f=s;s=c,c=f}a(s,c),u[p]=null,p++}u[p]=c,c=h,l--}t=null;for(var d=0;d<o;d++)(s=u[d])&&(t?(s.left.right=s.right,s.right.left=s.left,s.left=t,s.right=t.right,t.right=s,s.right.left=s,e(s.key,t.key)&&(t=s)):t=s);return t}(i=t.right,this._size),this._size--,this._minimum=i,t},i.prototype.remove=function(t){this._minimum=function(t,r,n){r.key=-1;var i=r.parent;return i&&e(r.key,i.key)&&(s(t,r,i),o(t,i)),e(r.key,t.key)&&(t=r),t}(this._minimum,t),this.extractMinimum()};var a=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1};return i}),{isClass:!0}),yp="sparse",vp=nn(yp,["typed","SparseMatrix"],(t=>{var{typed:e,SparseMatrix:r}=t;return e(yp,{"":function(){return new r([])},string:function(t){return new r([],t)},"Array | Matrix":function(t){return new r(t)},"Array | Matrix, string":function(t,e){return new r(t,e)}})})),bp="acoth",xp=nn(bp,["typed","config","Complex","BigNumber"],(t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(bp,{number:function(t){return t>=1||t<=-1||r.predictable?lu(t):new n(t,0).acoth()},Complex:function(t){return t.acoth()},BigNumber:function(t){return new i(1).div(t).atanh()},"Array | Matrix":function(t){return Js(t,this)}})})),_p=nn("algorithm09",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return function(t,n,i){var s=t._values,o=t._index,a=t._ptr,u=t._size,l=t._datatype,c=n._values,p=n._index,h=n._ptr,f=n._size,d=n._datatype;if(u.length!==f.length)throw new bs(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var m,g=u[0],y=u[1],v=r,b=0,x=i;"string"==typeof l&&l===d&&(m=l,v=e.find(r,[m,m]),b=e.convert(0,m),x=e.find(i,[m,m]));var _,w,E,S,A,N=s&&c?[]:void 0,M=[],k=[],C=N?[]:void 0,T=[];for(w=0;w<y;w++){k[w]=M.length;var O=w+1;if(C)for(S=h[w],A=h[w+1],E=S;E<A;E++)T[_=p[E]]=O,C[_]=c[E];for(S=a[w],A=a[w+1],E=S;E<A;E++)if(_=o[E],C){var I=T[_]===O?C[_]:b,P=x(s[E],I);v(P,b)||(M.push(_),N.push(P))}else M.push(_)}return k[y]=M.length,t.createSparseMatrix({values:N,index:M,ptr:k,size:[g,y],datatype:m})}})),wp="atan2",Ep=nn(wp,["typed","matrix","equalScalar","BigNumber","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,BigNumber:i,DenseMatrix:s}=t,o=Ql({typed:e,equalScalar:n}),a=tc({typed:e}),u=_p({typed:e,equalScalar:n}),l=rc({typed:e,equalScalar:n}),c=nc({typed:e,DenseMatrix:s}),p=Zl({typed:e}),h=Kl({typed:e});return e(wp,{"number, number":Math.atan2,"BigNumber, BigNumber":function(t,e){return i.atan2(t,e)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,this,!1)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return p(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, number | BigNumber":function(t,e){return l(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return h(t,e,this,!1)},"number | BigNumber, SparseMatrix":function(t,e){return c(e,t,this,!0)},"number | BigNumber, DenseMatrix":function(t,e){return h(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return h(r(t),e,this,!1).valueOf()},"number | BigNumber, Array":function(t,e){return h(r(e),t,this,!0).valueOf()}})})),Sp=nn("sec",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e("sec",{number:xu,Complex:function(t){return t.sec()},BigNumber:function(t){return new r(1).div(t.cos())},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Ap=nn("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:s,SparseMatrix:o}=t,a=Wl({typed:e}),u=Yl({typed:e,equalScalar:i}),l=Xl({typed:e,DenseMatrix:s}),c=Zl({typed:e}),p=Kl({typed:e});return e("add",tn({"DenseMatrix, DenseMatrix":function(t,e){return c(t,e,n)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,n,!1)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,n,!0)},"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,n)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"DenseMatrix, any":function(t,e){return p(t,e,n,!1)},"SparseMatrix, any":function(t,e){return l(t,e,n,!1)},"any, DenseMatrix":function(t,e){return p(e,t,n,!0)},"any, SparseMatrix":function(t,e){return l(e,t,n,!0)},"Array, any":function(t,e){return p(r(t),e,n,!1).valueOf()},"any, Array":function(t,e){return p(r(e),t,n,!0).valueOf()},"any, any":n,"any, any, ...any":function(t,e,r){for(var n=this(t,e),i=0;i<r.length;i++)n=this(n,r[i]);return n}},n.signatures))})),Np=nn("dot",["typed","addScalar","multiplyScalar","conj","size"],(t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:s}=t;return e("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(t,s){var u=o(t,s),l=_r(t)?t._data:t,c=_r(t)?t._datatype:void 0,p=_r(s)?s._data:s,h=_r(s)?s._datatype:void 0,f=2===a(t).length,d=2===a(s).length,m=r,g=n;if(c&&h&&c===h&&"string"==typeof c){var y=c;m=e.find(r,[y,y]),g=e.find(n,[y,y])}if(!f&&!d){for(var v=g(i(l[0]),p[0]),b=1;b<u;b++)v=m(v,g(i(l[b]),p[b]));return v}if(!f&&d){for(var x=g(i(l[0]),p[0][0]),_=1;_<u;_++)x=m(x,g(i(l[_]),p[_][0]));return x}if(f&&!d){for(var w=g(i(l[0][0]),p[0]),E=1;E<u;E++)w=m(w,g(i(l[E][0]),p[E]));return w}if(f&&d){for(var S=g(i(l[0][0]),p[0][0]),A=1;A<u;A++)S=m(S,g(i(l[A][0]),p[A][0]));return S}},"SparseMatrix, SparseMatrix":function(t,e){o(t,e);for(var i=t._index,s=t._values,a=e._index,u=e._values,l=0,c=r,p=n,h=0,f=0;h<i.length&&f<a.length;){var d=i[h],m=a[f];d<m?h++:d>m?f++:d===m&&(l=c(l,p(s[h],u[f])),h++,f++)}return l}});function o(t,e){var r,n,i=a(t),s=a(e);if(1===i.length)r=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");r=i[0]}if(1===s.length)n=s[0];else{if(2!==s.length||1!==s[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+s.join(", ")+")");n=s[0]}if(r!==n)throw new RangeError("Vectors must have equal length ("+r+" != "+n+")");if(0===r)throw new RangeError("Cannot calculate the dot product of empty vectors");return r}function a(t){return _r(t)?t.size():s(t)}})),Mp="composition",kp=nn(Mp,["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],(t=>{var{typed:e,addScalar:r,combinations:n,isPositive:i,isNegative:s,isInteger:o,larger:a}=t;return e(Mp,{"number | BigNumber, number | BigNumber":function(t,e){if(!(o(t)&&i(t)&&o(e)&&i(e)))throw new TypeError("Positive integer value expected in function composition");if(a(e,t))throw new TypeError("k must be less than or equal to n in function composition");return n(r(t,-1),r(e,-1))}})})),Cp="isZero",Tp=nn(Cp,["typed"],(t=>{var{typed:e}=t;return e(Cp,{number:lo,BigNumber:function(t){return t.isZero()},Complex:function(t){return 0===t.re&&0===t.im},Fraction:function(t){return 1===t.d&&0===t.n},Unit:function(t){return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),Op=nn("abs",["typed"],(t=>{var{typed:e}=t;return e("abs",{number:Mo,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},Fraction:function(t){return t.abs()},"Array | Matrix":function(t){return Js(t,this,!0)},Unit:function(t){return t.abs()}})})),Ip=nn("floor",["typed","config","round","matrix","equalScalar"],(t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:s}=t,o=rc({typed:e,equalScalar:s}),a=Kl({typed:e});return e("floor",{number:function(t){return En(t,n(t),r.epsilon)?n(t):Math.floor(t)},"number, number":function(t,e){if(En(t,n(t,e),r.epsilon))return n(t,e);var[i,s]="".concat(t,"e").split("e"),o=Math.floor(Number("".concat(i,"e").concat(Number(s)+e)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-e))},Complex:function(t){return t.floor()},"Complex, number":function(t,e){return t.floor(e)},BigNumber:function(t){return go(t,n(t),r.epsilon)?n(t):t.floor()},"BigNumber, BigNumber":function(t,e){return go(t,n(t,e),r.epsilon)?n(t,e):t.toDecimalPlaces(e.toNumber(),ai.ROUND_FLOOR)},Fraction:function(t){return t.floor()},"Fraction, number":function(t,e){return t.floor(e)},"Array | Matrix":function(t){return Js(t,this,!0)},"Array | Matrix, number":function(t,e){return Js(t,(t=>this(t,e)),!0)},"SparseMatrix, number | BigNumber":function(t,e){return o(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return a(t,e,this,!1)},"number | Complex | BigNumber, Array":function(t,e){return a(i(e),t,this,!0).valueOf()}})})),Pp="multiply",Rp=nn(Pp,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:s,dot:o}=t,a=rc({typed:e,equalScalar:s}),u=Kl({typed:e});function l(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}}var c=e("_multiplyMatrixVector",{"DenseMatrix, any":function(t,r){var s,o=t._data,a=t._size,u=t._datatype,l=r._data,c=r._datatype,p=a[0],h=a[1],f=n,d=i;u&&c&&u===c&&"string"==typeof u&&(s=u,f=e.find(n,[s,s]),d=e.find(i,[s,s]));for(var m=[],g=0;g<p;g++){for(var y=o[g],v=d(y[0],l[0]),b=1;b<h;b++)v=f(v,d(y[b],l[b]));m[g]=v}return t.createDenseMatrix({data:m,size:[p],datatype:s})},"SparseMatrix, any":function(t,r){var o=t._values,a=t._index,u=t._ptr,l=t._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,p=r._data,h=r._datatype,f=t._size[0],d=r._size[0],m=[],g=[],y=[],v=n,b=i,x=s,_=0;l&&h&&l===h&&"string"==typeof l&&(c=l,v=e.find(n,[c,c]),b=e.find(i,[c,c]),x=e.find(s,[c,c]),_=e.convert(0,c));var w=[],E=[];y[0]=0;for(var S=0;S<d;S++){var A=p[S];if(!x(A,_))for(var N=u[S],M=u[S+1],k=N;k<M;k++){var C=a[k];E[C]?w[C]=v(w[C],b(A,o[k])):(E[C]=!0,g.push(C),w[C]=b(A,o[k]))}}for(var T=g.length,O=0;O<T;O++){var I=g[O];m[O]=w[I]}return y[1]=g.length,t.createSparseMatrix({values:m,index:g,ptr:y,size:[f,1],datatype:c})}}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(t,r){var s,o=t._data,a=t._size,u=t._datatype,l=r._data,c=r._size,p=r._datatype,h=a[0],f=a[1],d=c[1],m=n,g=i;u&&p&&u===p&&"string"==typeof u&&(s=u,m=e.find(n,[s,s]),g=e.find(i,[s,s]));for(var y=[],v=0;v<h;v++){var b=o[v];y[v]=[];for(var x=0;x<d;x++){for(var _=g(b[0],l[0][x]),w=1;w<f;w++)_=m(_,g(b[w],l[w][x]));y[v][x]=_}}return t.createDenseMatrix({data:y,size:[h,d],datatype:s})},"DenseMatrix, SparseMatrix":function(t,r){var o=t._data,a=t._size,u=t._datatype,l=r._values,c=r._index,p=r._ptr,h=r._size,f=r._datatype;if(!l)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var d,m=a[0],g=h[1],y=n,v=i,b=s,x=0;u&&f&&u===f&&"string"==typeof u&&(d=u,y=e.find(n,[d,d]),v=e.find(i,[d,d]),b=e.find(s,[d,d]),x=e.convert(0,d));for(var _=[],w=[],E=[],S=r.createSparseMatrix({values:_,index:w,ptr:E,size:[m,g],datatype:d}),A=0;A<g;A++){E[A]=w.length;var N=p[A],M=p[A+1];if(M>N)for(var k=0,C=0;C<m;C++){for(var T=C+1,O=void 0,I=N;I<M;I++){var P=c[I];k!==T?(O=v(o[C][P],l[I]),k=T):O=y(O,v(o[C][P],l[I]))}k!==T||b(O,x)||(w.push(C),_.push(O))}}return E[g]=w.length,S},"SparseMatrix, DenseMatrix":function(t,r){var o=t._values,a=t._index,u=t._ptr,l=t._datatype;if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,p=r._data,h=r._datatype,f=t._size[0],d=r._size[0],m=r._size[1],g=n,y=i,v=s,b=0;l&&h&&l===h&&"string"==typeof l&&(c=l,g=e.find(n,[c,c]),y=e.find(i,[c,c]),v=e.find(s,[c,c]),b=e.convert(0,c));for(var x=[],_=[],w=[],E=t.createSparseMatrix({values:x,index:_,ptr:w,size:[f,m],datatype:c}),S=[],A=[],N=0;N<m;N++){w[N]=_.length;for(var M=N+1,k=0;k<d;k++){var C=p[k][N];if(!v(C,b))for(var T=u[k],O=u[k+1],I=T;I<O;I++){var P=a[I];A[P]!==M?(A[P]=M,_.push(P),S[P]=y(C,o[I])):S[P]=g(S[P],y(C,o[I]))}}for(var R=w[N],L=_.length,D=R;D<L;D++){var q=_[D];x[D]=S[q]}}return w[m]=_.length,E},"SparseMatrix, SparseMatrix":function(t,r){var s,o=t._values,a=t._index,u=t._ptr,l=t._datatype,c=r._values,p=r._index,h=r._ptr,f=r._datatype,d=t._size[0],m=r._size[1],g=o&&c,y=n,v=i;l&&f&&l===f&&"string"==typeof l&&(s=l,y=e.find(n,[s,s]),v=e.find(i,[s,s]));for(var b,x,_,w,E,S,A,N,M=g?[]:void 0,k=[],C=[],T=t.createSparseMatrix({values:M,index:k,ptr:C,size:[d,m],datatype:s}),O=g?[]:void 0,I=[],P=0;P<m;P++){C[P]=k.length;var R=P+1;for(E=h[P],S=h[P+1],w=E;w<S;w++)if(N=p[w],g)for(x=u[N],_=u[N+1],b=x;b<_;b++)I[A=a[b]]!==R?(I[A]=R,k.push(A),O[A]=v(c[w],o[b])):O[A]=y(O[A],v(c[w],o[b]));else for(x=u[N],_=u[N+1],b=x;b<_;b++)I[A=a[b]]!==R&&(I[A]=R,k.push(A));if(g)for(var L=C[P],D=k.length,q=L;q<D;q++){var B=k[q];M[q]=O[B]}}return C[m]=k.length,T}});return e(Pp,tn({"Array, Array":function(t,e){l(_s(t),_s(e));var n=this(r(t),r(e));return _r(n)?n.valueOf():n},"Matrix, Matrix":function(t,r){var s=t.size(),a=r.size();return l(s,a),1===s.length?1===a.length?function(t,e,r){if(0===r)throw new Error("Cannot multiply two empty vectors");return o(t,e)}(t,r,s[0]):function(t,r){if("dense"!==r.storage())throw new Error("Support for SparseMatrix not implemented");return function(t,r){var s,o=t._data,a=t._size,u=t._datatype,l=r._data,c=r._size,p=r._datatype,h=a[0],f=c[1],d=n,m=i;u&&p&&u===p&&"string"==typeof u&&(s=u,d=e.find(n,[s,s]),m=e.find(i,[s,s]));for(var g=[],y=0;y<f;y++){for(var v=m(o[0],l[0][y]),b=1;b<h;b++)v=d(v,m(o[b],l[b][y]));g[y]=v}return t.createDenseMatrix({data:g,size:[f],datatype:s})}(t,r)}(t,r):1===a.length?c(t,r):p(t,r)},"Matrix, Array":function(t,e){return this(t,r(e))},"Array, Matrix":function(t,e){return this(r(t,e.storage()),e)},"SparseMatrix, any":function(t,e){return a(t,e,i,!1)},"DenseMatrix, any":function(t,e){return u(t,e,i,!1)},"any, SparseMatrix":function(t,e){return a(e,t,i,!0)},"any, DenseMatrix":function(t,e){return u(e,t,i,!0)},"Array, any":function(t,e){return u(r(t),e,i,!1).valueOf()},"any, Array":function(t,e){return u(r(e),t,i,!0).valueOf()},"any, any":i,"any, any, ...any":function(t,e,r){for(var n=this(t,e),i=0;i<r.length;i++)n=this(n,r[i]);return n}},i.signatures))})),Lp="dotMultiply",Dp=nn(Lp,["typed","matrix","equalScalar","multiplyScalar"],(t=>{var{typed:e,matrix:r,equalScalar:n,multiplyScalar:i}=t,s=Ql({typed:e,equalScalar:n}),o=_p({typed:e,equalScalar:n}),a=rc({typed:e,equalScalar:n}),u=Zl({typed:e}),l=Kl({typed:e});return e(Lp,{"any, any":i,"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,i,!1)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,i,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,i,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,i)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return a(t,e,i,!1)},"DenseMatrix, any":function(t,e){return l(t,e,i,!1)},"any, SparseMatrix":function(t,e){return a(e,t,i,!0)},"any, DenseMatrix":function(t,e){return l(e,t,i,!0)},"Array, any":function(t,e){return l(r(t),e,i,!1).valueOf()},"any, Array":function(t,e){return l(r(e),t,i,!0).valueOf()}})})),qp=nn("re",["typed"],(t=>{var{typed:e}=t;return e("re",{number:function(t){return t},BigNumber:function(t){return t},Complex:function(t){return t.re},"Array | Matrix":function(t){return Js(t,this)}})})),Bp="flatten",Up=nn(Bp,["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e(Bp,{Array:function(t){return Rs(Qr(t))},Matrix:function(t){var e=Rs(Qr(t.toArray()));return r(e)}})}));function $p(t,e,r,n){if(!(this instanceof $p))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=r,this.max=n,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+r+(null!=n?"-"+n:"")+" expected)",this.stack=(new Error).stack}$p.prototype=new Error,$p.prototype.constructor=Error,$p.prototype.name="ArgumentsError",$p.prototype.isArgumentsError=!0;var zp=nn("resize",["config","matrix"],(t=>{var{config:e,matrix:r}=t;return function(t,i,s){if(2!==arguments.length&&3!==arguments.length)throw new $p("resize",arguments.length,2,3);if(_r(i)&&(i=i.valueOf()),mr(i[0])&&(i=i.map((function(t){return mr(t)?t.toNumber():t}))),_r(t))return t.resize(i,s,!0);if("string"==typeof t)return n(t,i,s);var o=!Array.isArray(t)&&"Array"!==e.matrix;if(0===i.length){for(;Array.isArray(t);)t=t[0];return Qr(t)}Array.isArray(t)||(t=[t]);var a=As(t=Qr(t),i,s);return o?r(a):a};function n(t,e,r){if(void 0!==r){if("string"!=typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";if(1!==e.length)throw new bs(e.length,1);var n=e[0];if("number"!=typeof n||!un(n))throw new TypeError("Invalid size, must contain positive integers (size: "+ds(e)+")");if(t.length>n)return t.substring(0,n);if(t.length<n){for(var i=t,s=0,o=n-t.length;s<o;s++)i+=r;return i}return t}})),Fp="squeeze",Gp=nn(Fp,["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e(Fp,{Array:function(t){return Ts(Qr(t))},Matrix:function(t){var e=Ts(t.toArray());return Array.isArray(e)?r(e):e},any:function(t){return Qr(t)}})})),Vp=nn("to",["typed","matrix"],(t=>{var{typed:e,matrix:r}=t,n=Zl({typed:e}),i=Kl({typed:e});return e("to",{"Unit, Unit | string":function(t,e){return t.to(e)},"Matrix, Matrix":function(t,e){return n(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"Matrix, any":function(t,e){return i(t,e,this,!1)},"any, Matrix":function(t,e){return i(e,t,this,!0)},"Array, any":function(t,e){return i(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return i(r(e),t,this,!0).valueOf()}})})),jp=nn("pow",["typed","config","identity","multiply","matrix","fraction","number","Complex"],(t=>{var{typed:e,config:r,identity:n,multiply:i,matrix:s,number:o,fraction:a,Complex:u}=t;return e("pow",{"number, number":l,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(t,e){return e.isInteger()||t>=0||r.predictable?t.pow(e):new u(t.toNumber(),0).pow(e.toNumber(),0)},"Fraction, Fraction":function(t,e){if(1!==e.d){if(r.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return l(t.valueOf(),e.valueOf())}return t.pow(e)},"Array, number":c,"Array, BigNumber":function(t,e){return c(t,e.toNumber())},"Matrix, number":p,"Matrix, BigNumber":function(t,e){return p(t,e.toNumber())},"Unit, number | BigNumber":function(t,e){return t.pow(e)}});function l(t,e){if(r.predictable&&!un(e)&&t<0)try{var n=a(e),i=o(n);if((e===i||Math.abs((e-i)/e)<1e-14)&&n.d%2==1)return(n.n%2==0?1:-1)*Math.pow(-t,e)}catch(t){}return r.predictable&&(t<-1&&e===1/0||t>-1&&t<0&&e===-1/0)?NaN:un(e)||t>=0||r.predictable?Wo(t,e):t*t<1&&e===1/0||t*t>1&&e===-1/0?0:new u(t,0).pow(e,0)}function c(t,e){if(!un(e)||e<0)throw new TypeError("For A^b, b must be a positive integer (value is "+e+")");var r=_s(t);if(2!==r.length)throw new Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!==r[1])throw new Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");for(var s=n(r[0]).valueOf(),o=t;e>=1;)1==(1&e)&&(s=i(o,s)),e>>=1,o=i(o,o);return s}function p(t,e){return s(c(t.valueOf(),e))}})),Hp="dotPow",Wp=nn(Hp,["typed","equalScalar","matrix","pow","DenseMatrix"],(t=>{var{typed:e,equalScalar:r,matrix:n,pow:i,DenseMatrix:s}=t,o=tc({typed:e}),a=hc({typed:e,DenseMatrix:s}),u=rc({typed:e,equalScalar:r}),l=nc({typed:e,DenseMatrix:s}),c=Zl({typed:e}),p=Kl({typed:e});return e(Hp,{"any, any":i,"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,i,!1)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,i,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,i,!1)},"DenseMatrix, DenseMatrix":function(t,e){return c(t,e,i)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return u(t,e,this,!1)},"DenseMatrix, any":function(t,e){return p(t,e,this,!1)},"any, SparseMatrix":function(t,e){return l(e,t,this,!0)},"any, DenseMatrix":function(t,e){return p(e,t,this,!0)},"Array, any":function(t,e){return p(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return p(n(e),t,this,!0).valueOf()}})})),Yp="rightArithShift",Xp=nn(Yp,["typed","matrix","equalScalar","zeros","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,DenseMatrix:s}=t,o=Wl({typed:e}),a=Ql({typed:e,equalScalar:n}),u=tp({typed:e,equalScalar:n}),l=Xl({typed:e,DenseMatrix:s}),c=rc({typed:e,equalScalar:n}),p=Zl({typed:e}),h=Kl({typed:e});return e(Yp,{"number, number":Aa,"BigNumber, BigNumber":va,"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,this,!1)},"SparseMatrix, DenseMatrix":function(t,e){return a(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return p(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, number | BigNumber":function(t,e){return n(e,0)?t.clone():c(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return n(e,0)?t.clone():h(t,e,this,!1)},"number | BigNumber, SparseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):l(e,t,this,!0)},"number | BigNumber, DenseMatrix":function(t,e){return n(t,0)?i(e.size(),e.storage()):h(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return this(r(t),e).valueOf()},"number | BigNumber, Array":function(t,e){return this(t,r(e)).valueOf()}})})),Zp=__webpack_require__(599),Kp="compareNatural",Jp=nn(Kp,["typed","compare"],(t=>{var{typed:e,compare:r}=t,n=r.signatures["boolean,boolean"];return e(Kp,{"any, any":function(t,e){var o,a=Jr(t),u=Jr(e);if(!("number"!==a&&"BigNumber"!==a&&"Fraction"!==a||"number"!==u&&"BigNumber"!==u&&"Fraction"!==u))return"0"!==(o=r(t,e)).toString()?o>0?1:-1:Zp(a,u);if("Array"===a||"Matrix"===a||"Array"===u||"Matrix"===u)return 0!==(o=i(this,t,e))?o:Zp(a,u);if(a!==u)return Zp(a,u);if("Complex"===a)return function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}(t,e);if("Unit"===a)return t.equalBase(e)?this(t.value,e.value):s(this,t.formatUnits(),e.formatUnits());if("boolean"===a)return n(t,e);if("string"===a)return Zp(t,e);if("Object"===a)return function(t,e,r){var n=Object.keys(e),i=Object.keys(r);n.sort(Zp),i.sort(Zp);var o=s(t,n,i);if(0!==o)return o;for(var a=0;a<n.length;a++){var u=t(e[n[a]],r[i[a]]);if(0!==u)return u}return 0}(this,t,e);if("null"===a)return 0;if("undefined"===a)return 0;throw new TypeError('Unsupported type of value "'+a+'"')}});function i(t,e,r){return Sr(e)&&Sr(r)?s(t,e.toJSON().values,r.toJSON().values):Sr(e)?i(t,e.toArray(),r):Sr(r)?i(t,e,r.toArray()):Er(e)?i(t,e.toJSON().data,r):Er(r)?i(t,e,r.toJSON().data):Array.isArray(e)?Array.isArray(r)?s(t,e,r):i(t,e,[r]):i(t,[e],r)}function s(t,e,r){for(var n=0,i=Math.min(e.length,r.length);n<i;n++){var s=t(e[n],r[n]);if(0!==s)return s}return e.length>r.length?1:e.length<r.length?-1:0}})),Qp="equalText",th=nn(Qp,["typed","compareText","isZero"],(t=>{var{typed:e,compareText:r,isZero:n}=t;return e(Qp,{"any, any":function(t,e){return n(r(t,e))}})})),eh="largerEq",rh=nn(eh,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,s=tc({typed:e}),o=hc({typed:e,DenseMatrix:i}),a=nc({typed:e,DenseMatrix:i}),u=Zl({typed:e}),l=Kl({typed:e});return e(eh,{"boolean, boolean":function(t,e){return t>=e},"number, number":function(t,e){return t>=e||En(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.gte(e)||go(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return-1!==t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,this)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return a(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return a(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(n(e),t,this,!0).valueOf()}})})),nh="partitionSelect",ih=nn(nh,["typed","isNumeric","isNaN","compare"],(t=>{var{typed:e,isNumeric:r,isNaN:n,compare:i}=t,s=i,o=(t,e)=>-i(t,e);return e(nh,{"Array | Matrix, number":function(t,e){return a(t,e,s)},"Array | Matrix, number, string":function(t,e,r){if("asc"===r)return a(t,e,s);if("desc"===r)return a(t,e,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":a});function a(t,e,r){if(!un(e)||e<0)throw new Error("k must be a non-negative integer");if(_r(t)){if(t.size().length>1)throw new Error("Only one dimensional matrices supported");return u(t.valueOf(),e,r)}if(Array.isArray(t))return u(t,e,r)}function u(t,e,i){if(e>=t.length)throw new Error("k out of bounds");for(var s=0;s<t.length;s++)if(r(t[s])&&n(t[s]))return t[s];for(var o=0,a=t.length-1;o<a;){for(var u=o,l=a,c=t[Math.floor(Math.random()*(a-o+1))+o];u<l;)if(i(t[u],c)>=0){var p=t[l];t[l]=t[u],t[u]=p,--l}else++u;i(t[u],c)>0&&--u,e<=u?a=u:o=u+1}return t[e]}})),sh=nn("Index",["ImmutableDenseMatrix"],(t=>{var{ImmutableDenseMatrix:e}=t;function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var e=0,i=arguments.length;e<i;e++){var s=arguments[e];if(Ar(s))this._dimensions.push(s),this._isScalar=!1;else if(Array.isArray(s)||_r(s)){var o=n(s.valueOf());this._dimensions.push(o);var a=o.size();1===a.length&&1===a[0]||(this._isScalar=!1)}else if("number"==typeof s)this._dimensions.push(n([s]));else{if("string"!=typeof s)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(s)}}}function n(t){for(var r=0,n=t.length;r<n;r++)if("number"!=typeof t[r]||!un(t[r]))throw new TypeError("Index parameters must be positive integer numbers");return new e(t)}return r.prototype.type="Index",r.prototype.isIndex=!0,r.prototype.clone=function(){var t=new r;return t._dimensions=Qr(this._dimensions),t._isScalar=this._isScalar,t},r.create=function(t){var e=new r;return r.apply(e,t),e},r.prototype.size=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?1:n.size()[0]}return t},r.prototype.max=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.max()}return t},r.prototype.min=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.min()}return t},r.prototype.forEach=function(t){for(var e=0,r=this._dimensions.length;e<r;e++)t(this._dimensions[e],e,this)},r.prototype.dimension=function(t){return this._dimensions[t]||null},r.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t.push("string"==typeof n?n:n.toArray())}return t},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];"string"==typeof n?t.push(JSON.stringify(n)):t.push(n.toString())}return"["+t.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(t){return r.create(t.dimensions)},r}),{isClass:!0}),oh="asech",ah=nn(oh,["typed","config","Complex","BigNumber"],(t=>{var{typed:e,config:r,Complex:n,BigNumber:i}=t;return e(oh,{number:function(t){if(t<=1&&t>=-1||r.predictable){var e=1/t;if(e>0||r.predictable)return fu(t);var i=Math.sqrt(e*e-1);return new n(Math.log(i-e),Math.PI)}return new n(t,0).asech()},Complex:function(t){return t.asech()},BigNumber:function(t){return new i(1).div(t).acosh()},"Array | Matrix":function(t){return Js(t,this)}})})),uh=nn("tan",["typed"],(t=>{var{typed:e}=t;return e("tan",{number:Math.tan,Complex:function(t){return t.tan()},BigNumber:function(t){return t.tan()},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this,!0)}})})),lh="setDifference",ch=nn(lh,["typed","size","subset","compareNatural","Index","DenseMatrix"],(t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=t;return e(lh,{"Array | Matrix, Array | Matrix":function(t,e){var a;if(0===n(r(t),new s(0)))a=[];else{if(0===n(r(e),new s(0)))return Rs(t.toArray());var u,l=$s(Rs(Array.isArray(t)?t:t.toArray()).sort(i)),c=$s(Rs(Array.isArray(e)?e:e.toArray()).sort(i));a=[];for(var p=0;p<l.length;p++){u=!1;for(var h=0;h<c.length;h++)if(0===i(l[p].value,c[h].value)&&l[p].identifier===c[h].identifier){u=!0;break}u||a.push(l[p])}}return Array.isArray(t)&&Array.isArray(e)?zs(a):new o(zs(a))}})})),ph="setIntersect",hh=nn(ph,["typed","size","subset","compareNatural","Index","DenseMatrix"],(t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=t;return e(ph,{"Array | Matrix, Array | Matrix":function(t,e){var a;if(0===n(r(t),new s(0))||0===n(r(e),new s(0)))a=[];else{var u=$s(Rs(Array.isArray(t)?t:t.toArray()).sort(i)),l=$s(Rs(Array.isArray(e)?e:e.toArray()).sort(i));a=[];for(var c=0;c<u.length;c++)for(var p=0;p<l.length;p++)if(0===i(u[c].value,l[p].value)&&u[c].identifier===l[p].identifier){a.push(u[c]);break}}return Array.isArray(t)&&Array.isArray(e)?zs(a):new o(zs(a))}})})),fh="setMultiplicity",dh=nn(fh,["typed","size","subset","compareNatural","Index"],(t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:s}=t;return e(fh,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(t,e){if(0===n(r(e),new s(0)))return 0;for(var o=Rs(Array.isArray(e)?e:e.toArray()),a=0,u=0;u<o.length;u++)0===i(o[u],t)&&a++;return a}})})),mh="setSize",gh=nn(mh,["typed","compareNatural"],(t=>{var{typed:e,compareNatural:r}=t;return e(mh,{"Array | Matrix":function(t){return Array.isArray(t)?Rs(t).length:Rs(t.toArray()).length},"Array | Matrix, boolean":function(t,e){if(!1===e||0===t.length)return Array.isArray(t)?Rs(t).length:Rs(t.toArray()).length;for(var n=Rs(Array.isArray(t)?t:t.toArray()).sort(r),i=1,s=1;s<n.length;s++)0!==r(n[s],n[s-1])&&i++;return i}})})),yh=nn("trace",["typed","matrix","add"],(t=>{var{typed:e,matrix:r,add:n}=t;return e("trace",{Array:function(t){return i(r(t))},SparseMatrix:function(t){var e=t._values,r=t._index,i=t._ptr,s=t._size,o=s[0],a=s[1];if(o===a){var u=0;if(e.length>0)for(var l=0;l<a;l++)for(var c=i[l],p=i[l+1],h=c;h<p;h++){var f=r[h];if(f===l){u=n(u,e[h]);break}if(f>l)break}return u}throw new RangeError("Matrix must be square (size: "+ds(s)+")")},DenseMatrix:i,any:Qr});function i(t){var e=t._size,r=t._data;switch(e.length){case 1:if(1===e[0])return Qr(r[0]);throw new RangeError("Matrix must be square (size: "+ds(e)+")");case 2:var i=e[0];if(i===e[1]){for(var s=0,o=0;o<i;o++)s=n(s,r[o][o]);return s}throw new RangeError("Matrix must be square (size: "+ds(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ds(e)+")")}}})),vh=nn("quantileSeq",["typed","add","multiply","partitionSelect","compare"],(t=>{var{typed:e,add:r,multiply:n,partitionSelect:i,compare:s}=t;function o(t,e,o){var u=Rs(t),l=u.length;if(0===l)throw new Error("Cannot calculate quantile of an empty sequence");if(dr(e)){var c=e*(l-1),p=c%1;if(0===p){var h=o?u[c]:i(u,c);return a(h),h}var f,d,m=Math.floor(c);if(o)f=u[m],d=u[m+1];else{d=i(u,m+1),f=u[m];for(var g=0;g<m;++g)s(u[g],f)>0&&(f=u[g])}return a(f),a(d),r(n(f,1-p),n(d,p))}var y=e.times(l-1);if(y.isInteger()){y=y.toNumber();var v=o?u[y]:i(u,y);return a(v),v}var b,x,_=y.floor(),w=y.minus(_),E=_.toNumber();if(o)b=u[E],x=u[E+1];else{x=i(u,E+1),b=u[E];for(var S=0;S<E;++S)s(u[S],b)>0&&(b=u[S])}a(b),a(x);var A=new w.constructor(1);return r(n(b,A.minus(w)),n(x,w))}var a=e({"number | BigNumber | Unit":function(t){return t}});return function(t,e,r){var n,i,s;if(arguments.length<2||arguments.length>3)throw new SyntaxError("Function quantileSeq requires two or three parameters");if(wr(t)){if("boolean"==typeof(r=r||!1)){if(i=t.valueOf(),dr(e)){if(e<0)throw new Error("N/prob must be non-negative");if(e<=1)return o(i,e,r);if(e>1){if(!un(e))throw new Error("N must be a positive integer");var a=e+1;n=new Array(e);for(var u=0;u<e;)n[u]=o(i,++u/a,r);return n}}if(mr(e)){var l=e.constructor;if(e.isNegative())throw new Error("N/prob must be non-negative");if(s=new l(1),e.lte(s))return new l(o(i,e,r));if(e.gt(s)){if(!e.isInteger())throw new Error("N must be a positive integer");var c=e.toNumber();if(c>4294967295)throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var p=new l(c+1);n=new Array(c);for(var h=0;h<c;)n[h]=new l(o(i,new l(++h).div(p),r));return n}}if(Array.isArray(e)){n=new Array(e.length);for(var f=0;f<n.length;++f){var d=e[f];if(dr(d)){if(d<0||d>1)throw new Error("Probability must be between 0 and 1, inclusive")}else{if(!mr(d))throw new TypeError("Unexpected type of argument in function quantileSeq");if(s=new d.constructor(1),d.isNegative()||d.gt(s))throw new Error("Probability must be between 0 and 1, inclusive")}n[f]=o(i,d,r)}return n}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}throw new TypeError("Unexpected type of argument in function quantileSeq")}}));function bh(t){var e;if(un(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:ju(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*bh(1-t));if(t>=171.35)return 1/0;if(t>85){var r=t*t,n=r*t,i=n*t,s=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*r)-139/(51840*n)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*t))}--t,e=_h[0];for(var o=1;o<_h.length;++o)e+=_h[o]/(t+o);var a=t+xh+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,t+.5)*Math.exp(-a)*e}bh.signature="number";var xh=4.7421875,_h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],wh="gamma",Eh=nn(wh,["typed","config","multiplyScalar","pow","BigNumber","Complex"],(t=>{var{typed:e,config:r,multiplyScalar:n,pow:i,BigNumber:s,Complex:o}=t;return e(wh,{number:bh,Complex:function(t){if(0===t.im)return this(t.re);t=new o(t.re-1,t.im);for(var e=new o(_h[0],0),r=1;r<_h.length;++r){var s=t.re+r,a=s*s+t.im*t.im;0!==a?(e.re+=_h[r]*s/a,e.im+=-_h[r]*t.im/a):e.re=_h[r]<0?-1/0:1/0}var u=new o(t.re+xh+.5,t.im),l=Math.sqrt(2*Math.PI);t.re+=.5;var c=i(u,t);0===c.im?c.re*=l:(0===c.re||(c.re*=l),c.im*=l);var p=Math.exp(-u.re);return u.re=p*Math.cos(-u.im),u.im=p*Math.sin(-u.im),n(n(c,u),e)},BigNumber:function(t){if(t.isInteger())return t.isNegative()||t.isZero()?new s(1/0):a(t.minus(1));if(!t.isFinite())return new s(t.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(t){return Js(t,this)}});function a(t){if(t<8)return new s([1,1,2,6,24,120,720,5040][t]);var e=r.precision+(0|Math.log(t.toNumber())),n=s.clone({precision:e});if(t%2==1)return t.times(a(new s(t-1)));for(var i=t,o=new n(t),u=t.toNumber();i>2;)u+=i-=2,o=o.times(u);return new s(o.toPrecision(s.precision))}})),Sh=nn("bignumber",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e("bignumber",{"":function(){return new r(0)},number:function(t){return new r(t+"")},string:function(t){var e=t.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(e){var n=e[2],i=r(e[1]),s=new r(2).pow(Number(n));if(i.gt(s.sub(1)))throw new SyntaxError('String "'.concat(t,'" is out of range'));var o=new r(2).pow(Number(n)-1);return i.gte(o)?i.sub(s):i}return new r(t)},BigNumber:function(t){return t},Fraction:function(t){return new r(t.n).div(t.d).times(t.s)},null:function(t){return new r(0)},"Array | Matrix":function(t){return Js(t,this)}})})),Ah=nn("lcm",["typed","matrix","equalScalar"],(t=>{var{typed:e,matrix:r,equalScalar:n}=t,i=Ql({typed:e,equalScalar:n}),s=sc({typed:e,equalScalar:n}),o=rc({typed:e,equalScalar:n}),a=Zl({typed:e}),u=Kl({typed:e});return e("lcm",{"number, number":Bo,"BigNumber, BigNumber":function(t,e){if(!t.isInt()||!e.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(t.isZero())return t;if(e.isZero())return e;for(var r=t.times(e);!e.isZero();){var n=e;e=t.mod(n),t=n}return r.div(t).abs()},"Fraction, Fraction":function(t,e){return t.lcm(e)},"SparseMatrix, SparseMatrix":function(t,e){return s(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return i(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return i(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return a(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, number | BigNumber":function(t,e){return o(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return u(t,e,this,!1)},"number | BigNumber, SparseMatrix":function(t,e){return o(e,t,this,!0)},"number | BigNumber, DenseMatrix":function(t,e){return u(e,t,this,!0)},"Array, number | BigNumber":function(t,e){return u(r(t),e,this,!1).valueOf()},"number | BigNumber, Array":function(t,e){return u(r(e),t,this,!0).valueOf()},"Array | Matrix | number | BigNumber, Array | Matrix | number | BigNumber, ...Array | Matrix | number | BigNumber":function(t,e,r){for(var n=this(t,e),i=0;i<r.length;i++)n=this(n,r[i]);return n}})})),Nh="bitOr",Mh=nn(Nh,["typed","matrix","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i}=t,s=Wl({typed:e}),o=Yl({typed:e,equalScalar:n}),a=Xl({typed:e,DenseMatrix:i}),u=Zl({typed:e}),l=Kl({typed:e});return e(Nh,{"number, number":wa,"BigNumber, BigNumber":fa,"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return a(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return a(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(r(e),t,this,!0).valueOf()}})})),kh="kron",Ch=nn(kh,["typed","matrix","multiplyScalar"],(t=>{var{typed:e,matrix:r,multiplyScalar:n}=t;return e(kh,{"Matrix, Matrix":function(t,e){return r(i(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return r(i(t.toArray(),e))},"Array, Matrix":function(t,e){return r(i(t,e.toArray()))},"Array, Array":i});function i(t,e){if(1===_s(t).length&&(t=[t]),1===_s(e).length&&(e=[e]),_s(t).length>2||_s(e).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(t.length)+", y = "+JSON.stringify(e.length)+")");var r=[],i=[];return t.map((function(t){return e.map((function(e){return i=[],r.push(i),t.map((function(t){return e.map((function(e){return i.push(n(t,e))}))}))}))}))&&r}})),Th=nn("transpose",["typed","matrix"],(t=>{var{typed:e,matrix:r}=t;return e("transpose",{Array:function(t){return this(r(t)).valueOf()},Matrix:function(t){var e,r=t.size();switch(r.length){case 1:e=t.clone();break;case 2:var n=r[0],i=r[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+ds(r)+")");switch(t.storage()){case"dense":e=function(t,e,r){for(var n,i=t._data,s=[],o=0;o<r;o++){n=s[o]=[];for(var a=0;a<e;a++)n[a]=Qr(i[a][o])}return t.createDenseMatrix({data:s,size:[r,e],datatype:t._datatype})}(t,n,i);break;case"sparse":e=function(t,e,r){for(var n,i,s,o=t._values,a=t._index,u=t._ptr,l=o?[]:void 0,c=[],p=[],h=[],f=0;f<e;f++)h[f]=0;for(n=0,i=a.length;n<i;n++)h[a[n]]++;for(var d=0,m=0;m<e;m++)p.push(d),d+=h[m],h[m]=p[m];for(p.push(d),s=0;s<r;s++)for(var g=u[s],y=u[s+1],v=g;v<y;v++){var b=h[a[v]]++;c[b]=s,o&&(l[b]=Qr(o[v]))}return t.createSparseMatrix({values:l,index:c,ptr:p,size:[r,e],datatype:t._datatype})}(t,n,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+ds(this._size)+")")}return e},any:function(t){return Qr(t)}})})),Oh=nn("numeric",["number","?bignumber","?fraction"],(t=>{var{number:e,bignumber:r,fraction:n}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:t=>e(t),BigNumber:r?t=>r(t):Nc,Fraction:n?t=>n(t):Mc};return function(t,e){var r=Jr(t);if(!(r in i))throw new TypeError("Cannot convert "+t+' of type "'+r+'"; valid input types are '+Object.keys(i).join(", "));if(!(e in s))throw new TypeError("Cannot convert "+t+' to type "'+e+'"; valid output types are '+Object.keys(s).join(", "));return e===r?t:s[e](t)}})),Ih=nn("and",["typed","matrix","equalScalar","zeros","not"],(t=>{var{typed:e,matrix:r,equalScalar:n,zeros:i,not:s}=t,o=Ql({typed:e,equalScalar:n}),a=sc({typed:e,equalScalar:n}),u=rc({typed:e,equalScalar:n}),l=Zl({typed:e}),c=Kl({typed:e});return e("and",{"number, number":La,"Complex, Complex":function(t,e){return!(0===t.re&&0===t.im||0===e.re&&0===e.im)},"BigNumber, BigNumber":function(t,e){return!(t.isZero()||e.isZero()||t.isNaN()||e.isNaN())},"Unit, Unit":function(t,e){return this(t.value||0,e.value||0)},"SparseMatrix, SparseMatrix":function(t,e){return a(t,e,this,!1)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return o(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return l(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return s(e)?i(t.size(),t.storage()):u(t,e,this,!1)},"DenseMatrix, any":function(t,e){return s(e)?i(t.size(),t.storage()):c(t,e,this,!1)},"any, SparseMatrix":function(t,e){return s(t)?i(t.size(),t.storage()):u(e,t,this,!0)},"any, DenseMatrix":function(t,e){return s(t)?i(t.size(),t.storage()):c(e,t,this,!0)},"Array, any":function(t,e){return this(r(t),e).valueOf()},"any, Array":function(t,e){return this(t,r(e)).valueOf()}})})),Ph="smallerEq",Rh=nn(Ph,["typed","config","matrix","DenseMatrix"],(t=>{var{typed:e,config:r,matrix:n,DenseMatrix:i}=t,s=tc({typed:e}),o=hc({typed:e,DenseMatrix:i}),a=nc({typed:e,DenseMatrix:i}),u=Zl({typed:e}),l=Kl({typed:e});return e(Ph,{"boolean, boolean":function(t,e){return t<=e},"number, number":function(t,e){return t<=e||En(t,e,r.epsilon)},"BigNumber, BigNumber":function(t,e){return t.lte(e)||go(t,e,r.epsilon)},"Fraction, Fraction":function(t,e){return 1!==t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return this(t.value,e.value)},"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,this)},"Array, Array":function(t,e){return this(n(t),n(e)).valueOf()},"Array, Matrix":function(t,e){return this(n(t),e)},"Matrix, Array":function(t,e){return this(t,n(e))},"SparseMatrix, any":function(t,e){return a(t,e,this,!1)},"DenseMatrix, any":function(t,e){return l(t,e,this,!1)},"any, SparseMatrix":function(t,e){return a(e,t,this,!0)},"any, DenseMatrix":function(t,e){return l(e,t,this,!0)},"Array, any":function(t,e){return l(n(t),e,this,!1).valueOf()},"any, Array":function(t,e){return l(n(e),t,this,!0).valueOf()}})})),Lh="sort",Dh=nn(Lh,["typed","matrix","compare","compareNatural"],(t=>{var{typed:e,matrix:r,compare:n,compareNatural:i}=t,s=n,o=(t,e)=>-n(t,e);return e(Lh,{Array:function(t){return u(t),t.sort(s)},Matrix:function(t){return l(t),r(t.toArray().sort(s),t.storage())},"Array, function":function(t,e){return u(t),t.sort(e)},"Matrix, function":function(t,e){return l(t),r(t.toArray().sort(e),t.storage())},"Array, string":function(t,e){return u(t),t.sort(a(e))},"Matrix, string":function(t,e){return l(t),r(t.toArray().sort(a(e)),t.storage())}});function a(t){if("asc"===t)return s;if("desc"===t)return o;if("natural"===t)return i;throw new Error('String "asc", "desc", or "natural" expected')}function u(t){if(1!==_s(t).length)throw new Error("One dimensional array expected")}function l(t){if(1!==t.size().length)throw new Error("One dimensional matrix expected")}}));function qh(t,e,r){var n;return-1!==String(t).indexOf("Unexpected type")?(n=arguments.length>2?" (type: "+Jr(r)+", value: "+JSON.stringify(r)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):-1!==String(t).indexOf("complex numbers")?(n=arguments.length>2?" (type: "+Jr(r)+", value: "+JSON.stringify(r)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):t}var Bh=nn("min",["typed","config","numeric","smaller"],(t=>{var{typed:e,config:r,numeric:n,smaller:i}=t;return e("min",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(t,e){return Qs(t,e.valueOf(),s)},"...":function(t){if(Zs(t))throw new TypeError("Scalar values expected in function min");return o(t)}});function s(t,e){try{return i(t,e)?t:e}catch(t){throw qh(t,"min",e)}}function o(t){var e;if(Ks(t,(function(t){try{isNaN(t)&&"number"==typeof t?e=NaN:(void 0===e||i(t,e))&&(e=t)}catch(e){throw qh(e,"min",t)}})),void 0===e)throw new Error("Cannot calculate min of an empty array");return"string"==typeof e&&(e=n(e,r.number)),e}})),Uh=nn("cot",["typed","BigNumber"],(t=>{var{typed:e,BigNumber:r}=t;return e("cot",{number:gu,Complex:function(t){return t.cot()},BigNumber:function(t){return new r(1).div(t.tan())},Unit:function(t){if(!t.hasBase(t.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return this(t.value)},"Array | Matrix":function(t){return Js(t,this)}})})),$h="setDistinct",zh=nn($h,["typed","size","subset","compareNatural","Index","DenseMatrix"],(t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=t;return e($h,{"Array | Matrix":function(t){var e;if(0===n(r(t),new s(0)))e=[];else{var a=Rs(Array.isArray(t)?t:t.toArray()).sort(i);(e=[]).push(a[0]);for(var u=1;u<a.length;u++)0!==i(a[u],a[u-1])&&e.push(a[u])}return Array.isArray(t)?e:new o(e)}})})),Fh="setPowerset",Gh=nn(Fh,["typed","size","subset","compareNatural","Index"],(t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:s}=t;return e(Fh,{"Array | Matrix":function(t){if(0===n(r(t),new s(0)))return[];for(var e=Rs(Array.isArray(t)?t:t.toArray()).sort(i),a=[],u=0;u.toString(2).length<=e.length;)a.push(o(e,u.toString(2).split("").reverse())),u++;return function(t){for(var e=[],r=t.length-1;r>0;r--)for(var n=0;n<r;n++)t[n].length>t[n+1].length&&(e=t[n],t[n]=t[n+1],t[n+1]=e);return t}(a)}});function o(t,e){for(var r=[],n=0;n<e.length;n++)"1"===e[n]&&r.push(t[n]);return r}})),Vh="index",jh=nn(Vh,["typed","Index"],(t=>{var{typed:e,Index:r}=t;return e(Vh,{"...number | string | BigNumber | Range | Array | Matrix":function(t){var e=t.map((function(t){return mr(t)?t.toNumber():Array.isArray(t)||_r(t)?t.map((function(t){return mr(t)?t.toNumber():t})):t})),n=new r;return r.apply(n,e),n}})})),Hh=nn("sum",["typed","config","add","numeric"],(t=>{var{typed:e,config:r,add:n,numeric:i}=t;return e("sum",{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(t,e){try{return Qs(t,e,n)}catch(t){throw qh(t,"sum")}},"...":function(t){if(Zs(t))throw new TypeError("Scalar values expected in function sum");return s(t)}});function s(t){var e;return Ks(t,(function(t){try{e=void 0===e?t:n(e,t)}catch(e){throw qh(e,"sum",t)}})),void 0===e&&(e=i(0,r.number)),"string"==typeof e&&(e=i(e,r.number)),e}})),Wh="factorial",Yh=nn(Wh,["typed","gamma"],(t=>{var{typed:e,gamma:r}=t;return e(Wh,{number:function(t){if(t<0)throw new Error("Value must be non-negative");return r(t+1)},BigNumber:function(t){if(t.isNegative())throw new Error("Value must be non-negative");return r(t.plus(1))},"Array | Matrix":function(t){return Js(t,this)}})})),Xh="permutations",Zh=nn(Xh,["typed","factorial"],(t=>{var{typed:e,factorial:r}=t;return e(Xh,{"number | BigNumber":r,"number, number":function(t,e){if(!un(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(!un(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(e>t)throw new TypeError("second argument k must be less than or equal to first argument n");return ju(t-e+1,t)},"BigNumber, BigNumber":function(t,e){var r,n;if(!Kh(t)||!Kh(e))throw new TypeError("Positive integer value expected in function permutations");if(e.gt(t))throw new TypeError("second argument k must be less than or equal to first argument n");for(r=t.mul(0).add(1),n=t.minus(e).plus(1);n.lte(t);n=n.plus(1))r=r.times(n);return r}})}));function Kh(t){return t.isInteger()&&t.gte(0)}var Jh=nn("ceil",["typed","config","round","matrix","equalScalar"],(t=>{var{typed:e,config:r,round:n,matrix:i,equalScalar:s}=t,o=rc({typed:e,equalScalar:s}),a=Kl({typed:e});return e("ceil",{number:function(t){return En(t,n(t),r.epsilon)?n(t):Po(t)},"number, number":function(t,e){if(En(t,n(t,e),r.epsilon))return n(t,e);var[i,s]="".concat(t,"e").split("e"),o=Math.ceil(Number("".concat(i,"e").concat(Number(s)+e)));return[i,s]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(s)-e))},Complex:function(t){return t.ceil()},"Complex, number":function(t,e){return t.ceil(e)},BigNumber:function(t){return go(t,n(t),r.epsilon)?n(t):t.ceil()},"BigNumber, BigNumber":function(t,e){return go(t,n(t,e),r.epsilon)?n(t,e):t.toDecimalPlaces(e.toNumber(),ai.ROUND_CEIL)},Fraction:function(t){return t.ceil()},"Fraction, number":function(t,e){return t.ceil(e)},"Array | Matrix":function(t){return Js(t,this,!0)},"Array | Matrix, number":function(t,e){return Js(t,(t=>this(t,e)),!0)},"SparseMatrix, number | BigNumber":function(t,e){return o(t,e,this,!1)},"DenseMatrix, number | BigNumber":function(t,e){return a(t,e,this,!1)},"number | Complex | BigNumber, Array":function(t,e){return a(i(e),t,this,!0).valueOf()}})})),Qh="subtract",tf=nn(Qh,["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:s,DenseMatrix:o}=t,a=Wl({typed:e}),u=tc({typed:e}),l=ec({typed:e,equalScalar:n}),c=Xl({typed:e,DenseMatrix:o}),p=Zl({typed:e}),h=Kl({typed:e});return e(Qh,{"number, number":function(t,e){return t-e},"Complex, Complex":function(t,e){return t.sub(e)},"BigNumber, BigNumber":function(t,e){return t.minus(e)},"Fraction, Fraction":function(t,e){return t.sub(e)},"Unit, Unit":function(t,e){if(null===t.value)throw new Error("Parameter x contains a unit with undefined value");if(null===e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var r=t.clone();return r.value=this(r.value,e.value),r.fixPrefix=!1,r},"SparseMatrix, SparseMatrix":function(t,e){return ef(t,e),l(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return ef(t,e),u(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return ef(t,e),a(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return ef(t,e),p(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return c(t,s(e),i)},"DenseMatrix, any":function(t,e){return h(t,e,this)},"any, SparseMatrix":function(t,e){return c(e,t,this,!0)},"any, DenseMatrix":function(t,e){return h(e,t,this,!0)},"Array, any":function(t,e){return h(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return h(r(e),t,this,!0).valueOf()}})}));function ef(t,e){var r=t.size(),n=e.size();if(r.length!==n.length)throw new bs(r.length,n.length)}var rf="cross",nf=nn(rf,["typed","matrix","subtract","multiply"],(t=>{var{typed:e,matrix:r,subtract:n,multiply:i}=t;return e(rf,{"Matrix, Matrix":function(t,e){return r(s(t.toArray(),e.toArray()))},"Matrix, Array":function(t,e){return r(s(t.toArray(),e))},"Array, Matrix":function(t,e){return r(s(t,e.toArray()))},"Array, Array":s});function s(t,e){var r=Math.max(_s(t).length,_s(e).length);t=Ts(t),e=Ts(e);var s=_s(t),o=_s(e);if(1!==s.length||1!==o.length||3!==s[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+s.join(", ")+"], B = ["+o.join(", ")+"])");var a=[n(i(t[1],e[2]),i(t[2],e[1])),n(i(t[2],e[0]),i(t[0],e[2])),n(i(t[0],e[1]),i(t[1],e[0]))];return r>1?[a]:a}})),sf="range",of=nn(sf,["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],(t=>{var{typed:e,config:r,matrix:n,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:u}=t;return e(sf,{string:c,"string, boolean":c,"number, number":function(t,e){return l(p(t,e,1))},"number, number, number":function(t,e,r){return l(p(t,e,r))},"number, number, boolean":function(t,e,r){return l(r?h(t,e,1):p(t,e,1))},"number, number, number, boolean":function(t,e,r,n){return l(n?h(t,e,r):p(t,e,r))},"BigNumber, BigNumber":function(t,e){return l(f(t,e,new(0,t.constructor)(1)))},"BigNumber, BigNumber, BigNumber":function(t,e,r){return l(f(t,e,r))},"BigNumber, BigNumber, boolean":function(t,e,r){var n=t.constructor;return l(r?d(t,e,new n(1)):f(t,e,new n(1)))},"BigNumber, BigNumber, BigNumber, boolean":function(t,e,r,n){return l(n?d(t,e,r):f(t,e,r))}});function l(t){return"Matrix"===r.matrix?n?n(t):kc():t}function c(t,e){var n=function(t){var e=t.split(":").map((function(t){return Number(t)}));if(e.some((function(t){return isNaN(t)})))return null;switch(e.length){case 2:return{start:e[0],end:e[1],step:1};case 3:return{start:e[0],end:e[2],step:e[1]};default:return null}}(t);if(!n)throw new SyntaxError('String "'+t+'" is no valid range');return"BigNumber"===r.number?(void 0===i&&Nc(),l((e?d:f)(i(n.start),i(n.end),i(n.step)))):l((e?h:p)(n.start,n.end,n.step))}function p(t,e,r){var n=[],i=t;if(r>0)for(;s(i,e);)n.push(i),i+=r;else if(r<0)for(;a(i,e);)n.push(i),i+=r;return n}function h(t,e,r){var n=[],i=t;if(r>0)for(;o(i,e);)n.push(i),i+=r;else if(r<0)for(;u(i,e);)n.push(i),i+=r;return n}function f(t,e,r){var n=i(0),o=[],u=t;if(r.gt(n))for(;s(u,e);)o.push(u),u=u.plus(r);else if(r.lt(n))for(;a(u,e);)o.push(u),u=u.plus(r);return o}function d(t,e,r){var n=i(0),s=[],a=t;if(r.gt(n))for(;o(a,e);)s.push(a),a=a.plus(r);else if(r.lt(n))for(;u(a,e);)s.push(a),a=a.plus(r);return s}})),af=nn("row",["typed","Index","matrix","range"],(t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e("row",{"Matrix, number":s,"Array, number":function(t,e){return s(n(Qr(t)),e).valueOf()}});function s(t,e){if(2!==t.size().length)throw new Error("Only two dimensional matrix is supported");Ss(e,t.size()[0]);var n=i(0,t.size()[1]),s=new r(e,n);return t.subset(s)}})),uf="prod",lf=nn(uf,["typed","config","multiplyScalar","numeric"],(t=>{var{typed:e,config:r,multiplyScalar:n,numeric:i}=t;return e(uf,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(t,e){throw new Error("prod(A, dim) is not yet supported")},"...":function(t){return s(t)}});function s(t){var e;if(Ks(t,(function(t){try{e=void 0===e?t:n(e,t)}catch(e){throw qh(e,"prod",t)}})),"string"==typeof e&&(e=i(e,r.number)),void 0===e)throw new Error("Cannot calculate prod of an empty array");return e}})),cf="equal",pf=nn(cf,["typed","matrix","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,DenseMatrix:i}=t,s=tc({typed:e}),o=hc({typed:e,DenseMatrix:i}),a=nc({typed:e,DenseMatrix:i}),u=Zl({typed:e}),l=Kl({typed:e});return e(cf,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:n(t,e)},"SparseMatrix, SparseMatrix":function(t,e){return o(t,e,n)},"SparseMatrix, DenseMatrix":function(t,e){return s(e,t,n,!0)},"DenseMatrix, SparseMatrix":function(t,e){return s(t,e,n,!1)},"DenseMatrix, DenseMatrix":function(t,e){return u(t,e,n)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return a(t,e,n,!1)},"DenseMatrix, any":function(t,e){return l(t,e,n,!1)},"any, SparseMatrix":function(t,e){return a(e,t,n,!0)},"any, DenseMatrix":function(t,e){return l(e,t,n,!0)},"Array, any":function(t,e){return l(r(t),e,n,!1).valueOf()},"any, Array":function(t,e){return l(r(e),t,n,!0).valueOf()}})})),hf=(nn(cf,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:r}=t;return e(cf,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:r(t,e)}})})),nn("max",["typed","config","numeric","larger"],(t=>{var{typed:e,config:r,numeric:n,larger:i}=t;return e("max",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(t,e){return Qs(t,e.valueOf(),s)},"...":function(t){if(Zs(t))throw new TypeError("Scalar values expected in function max");return o(t)}});function s(t,e){try{return i(t,e)?t:e}catch(t){throw qh(t,"max",e)}}function o(t){var e;if(Ks(t,(function(t){try{isNaN(t)&&"number"==typeof t?e=NaN:(void 0===e||i(t,e))&&(e=t)}catch(e){throw qh(e,"max",t)}})),void 0===e)throw new Error("Cannot calculate max of an empty array");return"string"==typeof e&&(e=n(e,r.number)),e}}))),ff="setCartesian",df=nn(ff,["typed","size","subset","compareNatural","Index","DenseMatrix"],(t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:s,DenseMatrix:o}=t;return e(ff,{"Array | Matrix, Array | Matrix":function(t,e){var a=[];if(0!==n(r(t),new s(0))&&0!==n(r(e),new s(0))){var u=Rs(Array.isArray(t)?t:t.toArray()).sort(i),l=Rs(Array.isArray(e)?e:e.toArray()).sort(i);a=[];for(var c=0;c<u.length;c++)for(var p=0;p<l.length;p++)a.push([u[c],l[p]])}return Array.isArray(t)&&Array.isArray(e)?a:new o(a)}})})),mf="setSymDifference",gf=nn(mf,["typed","size","concat","subset","setDifference","Index"],(t=>{var{typed:e,size:r,concat:n,subset:i,setDifference:s,Index:o}=t;return e(mf,{"Array | Matrix, Array | Matrix":function(t,e){if(0===i(r(t),new o(0)))return Rs(e);if(0===i(r(e),new o(0)))return Rs(t);var a=Rs(t),u=Rs(e);return n(s(a,u),s(u,a))}})})),yf=nn("fix",["typed","Complex","matrix","ceil","floor"],(t=>{var{typed:e,Complex:r,matrix:n,ceil:i,floor:s}=t,o=Kl({typed:e});return e("fix",{number:function(t){return t>0?s(t):i(t)},"number, number | BigNumber":function(t,e){return t>0?s(t,e):i(t,e)},Complex:function(t){return new r(t.re>0?Math.floor(t.re):Math.ceil(t.re),t.im>0?Math.floor(t.im):Math.ceil(t.im))},"Complex, number | BigNumber":function(t,e){return new r(t.re>0?s(t.re,e):i(t.re,e),t.im>0?s(t.im,e):i(t.im,e))},BigNumber:function(t){return t.isNegative()?i(t):s(t)},"BigNumber, number | BigNumber":function(t,e){return t.isNegative()?i(t,e):s(t,e)},Fraction:function(t){return t.s<0?t.ceil():t.floor()},"Fraction, number | BigNumber":function(t,e){return t.s<0?t.ceil(e):t.floor(e)},"Array | Matrix":function(t){return Js(t,this,!0)},"Array | Matrix, number | BigNumber":function(t,e){return Js(t,(t=>this(t,e)),!0)},"number | Complex | BigNumber, Array":function(t,e){return o(n(e),t,this,!0).valueOf()}})})),vf="column",bf=nn(vf,["typed","Index","matrix","range"],(t=>{var{typed:e,Index:r,matrix:n,range:i}=t;return e(vf,{"Matrix, number":s,"Array, number":function(t,e){return s(n(Qr(t)),e).valueOf()}});function s(t,e){if(2!==t.size().length)throw new Error("Only two dimensional matrix is supported");Ss(e,t.size()[1]);var n=i(0,t.size()[0]),s=new r(n,e);return t.subset(s)}})),xf="diff",_f=nn(xf,["typed","matrix","subtract","number"],(t=>{var{typed:e,matrix:r,subtract:n,number:i}=t;return e(xf,{"Array | Matrix":function(t){return _r(t)?r(o(t.toArray())):o(t)},"Array | Matrix, number":function(t,e){if(!un(e))throw new RangeError("Dimension must be a whole number");return _r(t)?r(s(t.toArray(),e)):s(t,e)},"Array | Matrix, BigNumber":function(t,e){return this(t,i(e))}});function s(t,e){if(_r(t)&&(t=t.toArray()),!Array.isArray(t))throw RangeError("Array/Matrix does not have that many dimensions");if(e>0){var r=[];return t.forEach((t=>{r.push(s(t,e-1))})),r}if(0===e)return o(t);throw RangeError("Cannot have negative dimension")}function o(t){var e=[],r=t.length;if(r<2)return t;for(var n=1;n<r;n++)e.push(a(t[n-1],t[n]));return e}function a(t,e){_r(t)&&(t=t.toArray()),_r(e)&&(e=e.toArray());var r=Array.isArray(t),i=Array.isArray(e);if(r&&i)return function(t,e){if(t.length!==e.length)throw RangeError("Not all sub-arrays have the same length");for(var r=[],n=t.length,i=0;i<n;i++)r.push(a(t[i],e[i]));return r}(t,e);if(!r&&!i)return n(e,t);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}})),wf="ctranspose",Ef=nn(wf,["typed","transpose","conj"],(t=>{var{typed:e,transpose:r,conj:n}=t;return e(wf,{any:function(t){return n(r(t))}})})),Sf="deepEqual",Af=nn(Sf,["typed","equal"],(t=>{var{typed:e,equal:r}=t;return e(Sf,{"any, any":function(t,e){return n(t.valueOf(),e.valueOf())}});function n(t,e){if(Array.isArray(t)){if(Array.isArray(e)){var i=t.length;if(i!==e.length)return!1;for(var s=0;s<i;s++)if(!n(t[s],e[s]))return!1;return!0}return!1}return!Array.isArray(e)&&r(t,e)}})),Nf="setIsSubset",Mf=nn(Nf,["typed","size","subset","compareNatural","Index"],(t=>{var{typed:e,size:r,subset:n,compareNatural:i,Index:s}=t;return e(Nf,{"Array | Matrix, Array | Matrix":function(t,e){if(0===n(r(t),new s(0)))return!0;if(0===n(r(e),new s(0)))return!1;for(var o,a=$s(Rs(Array.isArray(t)?t:t.toArray()).sort(i)),u=$s(Rs(Array.isArray(e)?e:e.toArray()).sort(i)),l=0;l<a.length;l++){o=!1;for(var c=0;c<u.length;c++)if(0===i(a[l].value,u[c].value)&&a[l].identifier===u[c].identifier){o=!0;break}if(!1===o)return!1}return!0}})})),kf=nn("xor",["typed","matrix","DenseMatrix"],(t=>{var{typed:e,matrix:r,DenseMatrix:n}=t,i=tc({typed:e}),s=hc({typed:e,DenseMatrix:n}),o=nc({typed:e,DenseMatrix:n}),a=Zl({typed:e}),u=Kl({typed:e});return e("xor",{"number, number":Ra,"Complex, Complex":function(t,e){return(0!==t.re||0!==t.im)!=(0!==e.re||0!==e.im)},"BigNumber, BigNumber":function(t,e){return(!t.isZero()&&!t.isNaN())!=(!e.isZero()&&!e.isNaN())},"Unit, Unit":function(t,e){return this(t.value||0,e.value||0)},"SparseMatrix, SparseMatrix":function(t,e){return s(t,e,this)},"SparseMatrix, DenseMatrix":function(t,e){return i(e,t,this,!0)},"DenseMatrix, SparseMatrix":function(t,e){return i(t,e,this,!1)},"DenseMatrix, DenseMatrix":function(t,e){return a(t,e,this)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return o(t,e,this,!1)},"DenseMatrix, any":function(t,e){return u(t,e,this,!1)},"any, SparseMatrix":function(t,e){return o(e,t,this,!0)},"any, DenseMatrix":function(t,e){return u(e,t,this,!0)},"Array, any":function(t,e){return u(r(t),e,this,!1).valueOf()},"any, Array":function(t,e){return u(r(e),t,this,!0).valueOf()}})})),Cf="divideScalar",Tf=nn(Cf,["typed","numeric"],(t=>{var{typed:e,numeric:r}=t;return e(Cf,{"number, number":function(t,e){return t/e},"Complex, Complex":function(t,e){return t.div(e)},"BigNumber, BigNumber":function(t,e){return t.div(e)},"Fraction, Fraction":function(t,e){return t.div(e)},"Unit, number | Fraction | BigNumber":function(t,e){var n=t.clone(),i=r(1,Jr(e));return n.value=this(null===n.value?n._normalize(i):n.value,e),n},"number | Fraction | BigNumber, Unit":function(t,e){var n=e.clone();n=n.pow(-1);var i=r(1,Jr(t));return n.value=this(t,null===e.value?e._normalize(i):e.value),n},"Unit, Unit":function(t,e){return t.divide(e)}})})),Of="nthRoots",If=nn(Of,["config","typed","divideScalar","Complex"],(t=>{var{typed:e,config:r,divideScalar:n,Complex:i}=t,s=[function(t){return new i(t,0)},function(t){return new i(0,t)},function(t){return new i(-t,0)},function(t){return new i(0,-t)}];function o(t,e){if(e<0)throw new Error("Root must be greater than zero");if(0===e)throw new Error("Root must be non-zero");if(e%1!=0)throw new Error("Root must be an integer");if(0===t||0===t.abs())return[new i(0,0)];var r,n="number"==typeof t;(n||0===t.re||0===t.im)&&(r=n?2*+(t<0):0===t.im?2*+(t.re<0):2*+(t.im<0)+1);for(var o=t.arg(),a=t.abs(),u=[],l=Math.pow(a,1/e),c=0;c<e;c++){var p=(r+4*c)/e;p!==Math.round(p)?u.push(new i({r:l,phi:(o+2*Math.PI*c)/e})):u.push(s[p%4](l))}return u}return e(Of,{Complex:function(t){return o(t,2)},"Complex, number":o})}));function Pf(t){var{DenseMatrix:e}=t;return function(t,r,n){var i=t.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+ds(i)+")");var s=i[0];if(s!==i[1])throw new RangeError("Matrix must be square (size: "+ds(i)+")");var o=[];if(_r(r)){var a=r.size(),u=r._data;if(1===a.length){if(a[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var l=0;l<s;l++)o[l]=[u[l]];return new e({data:o,size:[s,1],datatype:r._datatype})}if(2===a.length){if(a[0]!==s||1!==a[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Er(r)){if(n){o=[];for(var c=0;c<s;c++)o[c]=[u[c][0]];return new e({data:o,size:[s,1],datatype:r._datatype})}return r}if(Sr(r)){for(var p=0;p<s;p++)o[p]=[0];for(var h=r._values,f=r._index,d=r._ptr,m=d[1],g=d[0];g<m;g++)o[f[g]][0]=h[g];return new e({data:o,size:[s,1],datatype:r._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(xr(r)){var y=_s(r);if(1===y.length){if(y[0]!==s)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var v=0;v<s;v++)o[v]=[r[v]];return new e({data:o,size:[s,1]})}if(2===y.length){if(y[0]!==s||1!==y[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var b=0;b<s;b++)o[b]=[r[b][0]];return new e({data:o,size:[s,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var Rf="lsolve",Lf=nn(Rf,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=t,u=Pf({DenseMatrix:a});return e(Rf,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=(e=u(t,e,!0))._data,l=t._size[0],c=t._size[1],p=t._values,h=t._index,f=t._ptr,d=[],m=0;m<c;m++){var g=r[m][0]||0;if(o(g,0))d[m]=[0];else{for(var y=0,v=[],b=[],x=f[m],_=f[m+1],w=x;w<_;w++){var E=h[w];E===m?y=p[w]:E>m&&(v.push(p[w]),b.push(E))}if(o(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var S=n(g,y),A=0,N=b.length;A<N;A++){var M=b[A];r[M]=[s(r[M][0]||0,i(S,v[A]))]}d[m]=[S]}}return new a({data:d,size:[l,1]})}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return l(t,e)},"Array, Array | Matrix":function(t,e){return l(r(t),e).valueOf()}});function l(t,e){for(var r=(e=u(t,e,!0))._data,l=t._size[0],c=t._size[1],p=[],h=t._data,f=0;f<c;f++){var d=r[f][0]||0,m=void 0;if(o(d,0))m=0;else{var g=h[f][f];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=n(d,g);for(var y=f+1;y<l;y++)r[y]=[s(r[y][0]||0,i(m,h[y][f]))]}p[f]=[m]}return new a({data:p,size:[l,1]})}})),Df="lsolveAll",qf=nn(Df,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=t,u=Pf({DenseMatrix:a});return e(Df,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=[u(t,e,!0)._data.map((t=>t[0]))],l=t._size[0],c=t._size[1],p=t._values,h=t._index,f=t._ptr,d=0;d<c;d++)for(var m=r.length,g=0;g<m;g++){for(var y=r[g],v=[],b=[],x=f[d],_=f[d+1],w=0,E=x;E<_;E++){var S=h[E];S===d?w=p[E]:S>d&&(v.push(p[E]),b.push(S))}if(o(w,0))if(o(y[d],0)){if(0===g){var A=[...y];A[d]=1;for(var N=0,M=b.length;N<M;N++){var k=b[N];A[k]=s(A[k],v[N])}r.push(A)}}else{if(0===g)return[];r.splice(g,1),g-=1,m-=1}else{y[d]=n(y[d],w);for(var C=0,T=b.length;C<T;C++){var O=b[C];y[O]=s(y[O],i(y[d],v[C]))}}}return r.map((t=>new a({data:t.map((t=>[t])),size:[l,1]})))}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return l(t,e)},"Array, Array | Matrix":function(t,e){return l(r(t),e).map((t=>t.valueOf()))}});function l(t,e){for(var r=[u(t,e,!0)._data.map((t=>t[0]))],l=t._data,c=t._size[0],p=t._size[1],h=0;h<p;h++)for(var f=r.length,d=0;d<f;d++){var m=r[d];if(o(l[h][h],0))if(o(m[h],0)){if(0===d){var g=[...m];g[h]=1;for(var y=h+1;y<p;y++)g[y]=s(g[y],l[y][h]);r.push(g)}}else{if(0===d)return[];r.splice(d,1),d-=1,f-=1}else{m[h]=n(m[h],l[h][h]);for(var v=h+1;v<p;v++)m[v]=s(m[v],i(m[h],l[v][h]))}}return r.map((t=>new a({data:t.map((t=>[t])),size:[c,1]})))}})),Bf=nn("Spa",["addScalar","equalScalar","FibonacciHeap"],(t=>{var{addScalar:e,equalScalar:r,FibonacciHeap:n}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var r=this._heap.insert(t,e);this._values[t]=r}},i.prototype.get=function(t){var e=this._values[t];return e?e.value:0},i.prototype.accumulate=function(t,r){var n=this._values[t];n?n.value=e(n.value,r):(n=this._heap.insert(t,r),this._values[t]=n)},i.prototype.forEach=function(t,e,n){var i=this._heap,s=this._values,o=[],a=i.extractMinimum();for(a&&o.push(a);a&&a.key<=e;)a.key>=t&&(r(a.value,0)||n(a.key,a.value,this)),(a=i.extractMinimum())&&o.push(a);for(var u=0;u<o.length;u++){var l=o[u];s[(a=i.insert(l.key,l.value)).key]=a}},i.prototype.swap=function(t,e){var r=this._values[t],n=this._values[e];if(!r&&n)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(r&&!n)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(r&&n){var i=r.value;r.value=n.value,n.value=i}},i}),{isClass:!0}),Uf="setUnion",$f=nn(Uf,["typed","size","concat","subset","setIntersect","setSymDifference","Index"],(t=>{var{typed:e,size:r,concat:n,subset:i,setIntersect:s,setSymDifference:o,Index:a}=t;return e(Uf,{"Array | Matrix, Array | Matrix":function(t,e){if(0===i(r(t),new a(0)))return Rs(e);if(0===i(r(e),new a(0)))return Rs(t);var u=Rs(t),l=Rs(e);return n(o(u,l),s(u,l))}})})),zf=nn("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtract","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(t=>{var{typed:e,matrix:r,abs:n,addScalar:i,divideScalar:s,multiplyScalar:o,subtract:a,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:p,SparseMatrix:h,Spa:f}=t;return e("lup",{DenseMatrix:function(t){return d(t)},SparseMatrix:function(t){return function(t){var e,r,i,a=t._size[0],p=t._size[1],d=Math.min(a,p),m=t._values,g=t._index,y=t._ptr,v=[],b=[],x=[],_=[a,d],w=[],E=[],S=[],A=[d,p],N=[],M=[];for(e=0;e<a;e++)N[e]=e,M[e]=e;var k=function(){var t=new f;r<a&&(x.push(v.length),v.push(1),b.push(r)),S.push(w.length);var p=y[r],d=y[r+1];for(i=p;i<d;i++)e=g[i],t.set(N[e],m[i]);r>0&&t.forEach(0,r-1,(function(e,r){h._forEachRow(e,v,b,x,(function(n,i){n>e&&t.accumulate(n,c(o(i,r)))}))}));var k,C,T,O,I=r,P=t.get(r),R=n(P);t.forEach(r+1,a-1,(function(t,e){var r=n(e);u(r,R)&&(I=t,R=r,P=e)})),r!==I&&(h._swapRows(r,I,_[1],v,b,x),h._swapRows(r,I,A[1],w,E,S),t.swap(r,I),C=I,T=M[k=r],O=M[C],N[T]=C,N[O]=k,M[k]=O,M[C]=T),t.forEach(0,a-1,(function(t,e){t<=r?(w.push(e),E.push(t)):(e=s(e,P),l(e,0)||(v.push(e),b.push(t)))}))};for(r=0;r<p;r++)k();return S.push(w.length),x.push(v.length),{L:new h({values:v,index:b,ptr:x,size:_}),U:new h({values:w,index:E,ptr:S,size:A}),p:N,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}(t)},Array:function(t){var e=d(r(t));return{L:e.L.valueOf(),U:e.U.valueOf(),p:e.p}}});function d(t){var e,r,c,h=t._size[0],f=t._size[1],d=Math.min(h,f),m=Qr(t._data),g=[],y=[h,d],v=[],b=[d,f],x=[];for(e=0;e<h;e++)x[e]=e;for(r=0;r<f;r++){if(r>0)for(e=0;e<h;e++){var _=Math.min(e,r),w=0;for(c=0;c<_;c++)w=i(w,o(m[e][c],m[c][r]));m[e][r]=a(m[e][r],w)}var E=r,S=0,A=0;for(e=r;e<h;e++){var N=m[e][r],M=n(N);u(M,S)&&(E=e,S=M,A=N)}if(r!==E&&(x[r]=[x[E],x[E]=x[r]][0],p._swapRows(r,E,m)),r<h)for(e=r+1;e<h;e++){var k=m[e][r];l(k,0)||(m[e][r]=s(m[e][r],A))}}for(r=0;r<f;r++)for(e=0;e<h;e++)0===r&&(e<f&&(v[e]=[]),g[e]=[]),e<r?(e<f&&(v[e][r]=m[e][r]),r<h&&(g[e][r]=0)):e!==r?(e<f&&(v[e][r]=0),r<h&&(g[e][r]=m[e][r])):(e<f&&(v[e][r]=m[e][r]),r<h&&(g[e][r]=1));var C=new p({data:g,size:y}),T=new p({data:v,size:b}),O=[];for(e=0,d=x.length;e<d;e++)O[x[e]]=e;return{L:C,U:T,p:O,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}}));function Ff(t,e,r,n,i,s,o){var a=0;for(r[o]=t;a>=0;){var u=r[o+a],l=r[n+u];-1===l?(a--,s[e++]=u):(r[n+u]=r[i+l],r[o+ ++a]=l)}return e}function Gf(t){return-t-2}var Vf=nn("csAmd",["add","multiply","transpose"],(t=>{var{add:e,multiply:r,transpose:n}=t;return function(t,o){if(!o||t<=0||t>3)return null;var a=o._size,u=a[0],l=a[1],c=0,p=Math.max(16,10*Math.sqrt(l)),h=function(t,i,s,o,a){var u=n(i);if(1===t&&o===s)return e(i,u);if(2===t){for(var l=u._index,c=u._ptr,p=0,h=0;h<s;h++){var f=c[h];if(c[h]=p,!(c[h+1]-f>a))for(var d=c[h+1];f<d;f++)l[p++]=l[f]}return c[s]=p,i=n(u),r(u,i)}return r(u,i)}(t,o,u,l,p=Math.min(l-2,p));!function(t,e,r){for(var n=t._values,i=t._index,s=t._ptr,o=t._size[1],a=0,u=0;u<o;u++){var l=s[u];for(s[u]=a;l<s[u+1];l++)e(i[l],u,n?n[l]:1,null)&&(i[a]=i[l],n&&(n[a]=n[l]),a++)}s[o]=a,i.splice(a,i.length-a),n&&n.splice(a,n.length-a)}(h,s);for(var f,d,m,g,y,v,b,x,_,w,E,S,A,N,M,k,C=h._index,T=h._ptr,O=T[l],I=[],P=[],R=l+1,L=2*(l+1),D=3*(l+1),q=4*(l+1),B=5*(l+1),U=6*(l+1),$=7*(l+1),z=I,F=function(t,e,r,n,s,o,a,u,l,c,p,h){for(var f=0;f<t;f++)r[0+f]=e[f+1]-e[f];r[0+t]=0;for(var d=0;d<=t;d++)r[s+d]=-1,o[d]=-1,r[a+d]=-1,r[u+d]=-1,r[l+d]=1,r[c+d]=1,r[p+d]=0,r[h+d]=r[0+d];var m=i(0,0,r,c,t);return r[p+t]=-2,e[t]=-1,r[c+t]=0,m}(l,T,P,0,D,z,L,$,R,U,q,B),G=function(t,e,r,n,i,s,o,a,u,l,c){for(var p=0,h=0;h<t;h++){var f=r[n+h];if(0===f)r[i+h]=-2,p++,e[h]=-1,r[s+h]=0;else if(f>o)r[a+h]=0,r[i+h]=-1,p++,e[h]=Gf(t),r[a+t]++;else{var d=r[u+f];-1!==d&&(l[d]=h),r[c+h]=r[u+f],r[u+f]=h}}return p}(l,T,P,B,q,U,p,R,D,z,L),V=0;G<l;){for(m=-1;V<l&&-1===(m=P[D+V]);V++);-1!==P[L+m]&&(z[P[L+m]]=-1),P[D+V]=P[L+m];var j=P[q+m],H=P[R+m];G+=H;var W=0;P[R+m]=-H;var Y=T[m],X=0===j?Y:O,Z=X;for(g=1;g<=j+1;g++){for(g>j?(v=m,b=Y,x=P[0+m]-j):(b=T[v=C[Y++]],x=P[0+v]),y=1;y<=x;y++)(_=P[R+(f=C[b++])])<=0||(W+=_,P[R+f]=-_,C[Z++]=f,-1!==P[L+f]&&(z[P[L+f]]=z[f]),-1!==z[f]?P[L+z[f]]=P[L+f]:P[D+P[B+f]]=P[L+f]);v!==m&&(T[v]=Gf(m),P[U+v]=0)}for(0!==j&&(O=Z),P[B+m]=W,T[m]=X,P[0+m]=Z-X,P[q+m]=-2,F=i(F,c,P,U,l),w=X;w<Z;w++)if(!((E=P[q+(f=C[w])])<=0)){var K=F-(_=-P[R+f]);for(Y=T[f],S=T[f]+E-1;Y<=S;Y++)P[U+(v=C[Y])]>=F?P[U+v]-=_:0!==P[U+v]&&(P[U+v]=P[B+v]+K)}for(w=X;w<Z;w++){for(A=(S=T[f=C[w]])+P[q+f]-1,N=S,M=0,k=0,Y=S;Y<=A;Y++)if(0!==P[U+(v=C[Y])]){var J=P[U+v]-F;J>0?(k+=J,C[N++]=v,M+=v):(T[v]=Gf(m),P[U+v]=0)}P[q+f]=N-S+1;var Q=N,tt=S+P[0+f];for(Y=A+1;Y<tt;Y++){var et=P[R+(d=C[Y])];et<=0||(k+=et,C[N++]=d,M+=d)}0===k?(T[f]=Gf(m),W-=_=-P[R+f],H+=_,G+=_,P[R+f]=0,P[q+f]=-1):(P[B+f]=Math.min(P[B+f],k),C[N]=C[Q],C[Q]=C[S],C[S]=m,P[0+f]=N-S+1,M=(M<0?-M:M)%l,P[L+f]=P[$+M],P[$+M]=f,z[f]=M)}for(P[B+m]=W,F=i(F+(c=Math.max(c,W)),c,P,U,l),w=X;w<Z;w++)if(!(P[R+(f=C[w])]>=0))for(f=P[$+(M=z[f])],P[$+M]=-1;-1!==f&&-1!==P[L+f];f=P[L+f],F++){for(x=P[0+f],E=P[q+f],Y=T[f]+1;Y<=T[f]+x-1;Y++)P[U+C[Y]]=F;var rt=f;for(d=P[L+f];-1!==d;){var nt=P[0+d]===x&&P[q+d]===E;for(Y=T[d]+1;nt&&Y<=T[d]+x-1;Y++)P[U+C[Y]]!==F&&(nt=0);nt?(T[d]=Gf(f),P[R+f]+=P[R+d],P[R+d]=0,P[q+d]=-1,d=P[L+d],P[L+rt]=d):(rt=d,d=P[L+d])}}for(Y=X,w=X;w<Z;w++)(_=-P[R+(f=C[w])])<=0||(P[R+f]=_,k=P[B+f]+W-_,-1!==P[D+(k=Math.min(k,l-G-_))]&&(z[P[D+k]]=f),P[L+f]=P[D+k],z[f]=-1,P[D+k]=f,V=Math.min(V,k),P[B+f]=k,C[Y++]=f);P[R+m]=H,0==(P[0+m]=Y-X)&&(T[m]=-1,P[U+m]=0),0!==j&&(O=Y)}for(f=0;f<l;f++)T[f]=Gf(T[f]);for(d=0;d<=l;d++)P[D+d]=-1;for(d=l;d>=0;d--)P[R+d]>0||(P[L+d]=P[D+T[d]],P[D+T[d]]=d);for(v=l;v>=0;v--)P[R+v]<=0||-1!==T[v]&&(P[L+v]=P[D+T[v]],P[D+T[v]]=v);for(m=0,f=0;f<=l;f++)-1===T[f]&&(m=Ff(f,m,P,D,L,I,U));return I.splice(I.length-1,1),I};function i(t,e,r,n,i){if(t<2||t+e<0){for(var s=0;s<i;s++)0!==r[n+s]&&(r[n+s]=1);t=2}return t}function s(t,e){return t!==e}}));function jf(t,e,r,n,i,s,o){var a,u,l,c=0;if(t<=e||r[n+e]<=r[i+t])return-1;r[i+t]=r[n+e];var p=r[s+t];if(r[s+t]=e,-1===p)c=1,l=t;else{for(c=2,l=p;l!==r[o+l];l=r[o+l]);for(a=p;a!==l;a=u)u=r[o+a],r[o+a]=l}return{jleaf:c,q:l}}var Hf=nn("csCounts",["transpose"],(t=>{var{transpose:e}=t;return function(t,r,n,i){if(!t||!r||!n)return null;var s,o,a,u,l,c,p,h=t._size,f=h[0],d=h[1],m=4*d+(i?d+f+1:0),g=[],y=d,v=2*d,b=3*d,x=4*d,_=5*d+1;for(a=0;a<m;a++)g[a]=-1;var w=[],E=e(t),S=E._index,A=E._ptr;for(a=0;a<d;a++)for(w[o=n[a]]=-1===g[b+o]?1:0;-1!==o&&-1===g[b+o];o=r[o])g[b+o]=a;if(i){for(a=0;a<d;a++)g[n[a]]=a;for(s=0;s<f;s++){for(a=d,c=A[s],p=A[s+1],l=c;l<p;l++)a=Math.min(a,g[S[l]]);g[_+s]=g[x+a],g[x+a]=s}}for(s=0;s<d;s++)g[0+s]=s;for(a=0;a<d;a++){for(-1!==r[o=n[a]]&&w[r[o]]--,u=i?g[x+a]:o;-1!==u;u=i?g[_+u]:-1)for(l=A[u];l<A[u+1];l++){var N=jf(s=S[l],o,g,b,y,v,0);N.jleaf>=1&&w[o]++,2===N.jleaf&&w[N.q]--}-1!==r[o]&&(g[0+o]=r[o])}for(o=0;o<d;o++)-1!==r[o]&&(w[r[o]]+=w[o]);return w}})),Wf=nn("csSqr",["add","multiply","transpose"],(t=>{var{add:e,multiply:r,transpose:n}=t,i=Vf({add:e,multiply:r,transpose:n}),s=Hf({transpose:n});return function(t,e,r){var n,o=e._ptr,a=e._size[1],u={};if(u.q=i(t,e),t&&!u.q)return null;if(r){var l=t?function(t,e,r,n){for(var i=t._values,s=t._index,o=t._ptr,a=t._size,u=t._datatype,l=a[0],c=a[1],p=null,h=[],f=[],d=0,m=0;m<c;m++){f[m]=d;for(var g=r?r[m]:m,y=o[g],v=o[g+1],b=y;b<v;b++){var x=s[b];h[d]=x,p&&(p[d]=i[b]),d++}}return f[c]=d,t.createSparseMatrix({values:p,index:h,ptr:f,size:[l,c],datatype:u})}(e,0,u.q):e;u.parent=function(t,e){if(!t)return null;var r,n,i=t._index,s=t._ptr,o=t._size,a=o[0],u=o[1],l=[],c=[],p=u;for(r=0;r<a;r++)c[p+r]=-1;for(var h=0;h<u;h++){l[h]=-1,c[0+h]=-1;for(var f=s[h],d=s[h+1],m=f;m<d;m++){var g=i[m];for(r=c[p+g];-1!==r&&r<h;r=n)n=c[0+r],c[0+r]=h,-1===n&&(l[r]=h);c[p+g]=h}}return l}(l);var c=function(t,e){if(!t)return null;var r,n=0,i=[],s=[],o=e,a=2*e;for(r=0;r<e;r++)s[0+r]=-1;for(r=e-1;r>=0;r--)-1!==t[r]&&(s[o+r]=s[0+t[r]],s[0+t[r]]=r);for(r=0;r<e;r++)-1===t[r]&&(n=Ff(r,n,s,0,o,i,a));return i}(u.parent,a);if(u.cp=s(l,u.parent,c,1),l&&u.parent&&u.cp&&function(t,e){var r=t._ptr,n=t._index,i=t._size,s=i[0],o=i[1];e.pinv=[],e.leftmost=[];var a,u,l,c,p,h=e.parent,f=e.pinv,d=e.leftmost,m=[],g=s,y=s+o,v=s+2*o;for(u=0;u<o;u++)m[g+u]=-1,m[y+u]=-1,m[v+u]=0;for(a=0;a<s;a++)d[a]=-1;for(u=o-1;u>=0;u--)for(c=r[u],p=r[u+1],l=c;l<p;l++)d[n[l]]=u;for(a=s-1;a>=0;a--)f[a]=-1,-1!==(u=d[a])&&(0==m[v+u]++&&(m[y+u]=a),m[0+a]=m[g+u],m[g+u]=a);for(e.lnz=0,e.m2=s,u=0;u<o;u++)if(a=m[g+u],e.lnz++,a<0&&(a=e.m2++),f[a]=u,!(--v[u]<=0)){e.lnz+=m[v+u];var b=h[u];-1!==b&&(0===m[v+b]&&(m[y+b]=m[y+u]),m[0+m[y+u]]=m[g+b],m[g+b]=m[0+a],m[v+b]+=m[v+u])}for(a=0;a<s;a++)f[a]<0&&(f[a]=u++);return!0}(l,u))for(u.unz=0,n=0;n<a;n++)u.unz+=u.cp[n]}else u.unz=4*o[a]+a,u.lnz=u.unz;return u}}));function Yf(t,e){return t[e]<0}function Xf(t,e){t[e]=Gf(t[e])}function Zf(t){return t<0?Gf(t):t}function Kf(t,e,r,n,i){var s,o,a,u=e._index,l=e._ptr,c=e._size[1],p=0;for(n[0]=t;p>=0;){t=n[p];var h=i?i[t]:t;Yf(l,t)||(Xf(l,t),n[c+p]=h<0?0:Zf(l[h]));var f=1;for(o=n[c+p],a=h<0?0:Zf(l[h+1]);o<a;o++)if(!Yf(l,s=u[o])){n[c+p]=o,n[++p]=s,f=0;break}f&&(p--,n[--r]=t)}return r}var Jf=nn("csSpsolve",["divideScalar","multiply","subtract"],(t=>{var{divideScalar:e,multiply:r,subtract:n}=t;return function(t,i,s,o,a,u,l){var c,p,h,f,d=t._values,m=t._index,g=t._ptr,y=t._size[1],v=i._values,b=i._index,x=i._ptr,_=function(t,e,r,n,i){var s,o,a,u=t._ptr,l=t._size,c=e._index,p=e._ptr,h=l[1],f=h;for(o=p[r],a=p[r+1],s=o;s<a;s++){var d=c[s];Yf(u,d)||(f=Kf(d,t,f,n,i))}for(s=f;s<h;s++)Xf(u,n[s]);return f}(t,i,s,o,u);for(c=_;c<y;c++)a[o[c]]=0;for(p=x[s],h=x[s+1],c=p;c<h;c++)a[b[c]]=v[c];for(var w=_;w<y;w++){var E=o[w],S=u?u[E]:E;if(!(S<0))for(p=g[S],h=g[S+1],a[E]=e(a[E],d[l?p:h-1]),c=l?p+1:p,f=l?h:h-1;c<f;c++){var A=m[c];a[A]=n(a[A],r(d[c],a[E]))}}return _}})),Qf=nn("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],(t=>{var{abs:e,divideScalar:r,multiply:n,subtract:i,larger:s,largerEq:o,SparseMatrix:a}=t,u=Jf({divideScalar:r,multiply:n,subtract:i});return function(t,i,l){if(!t)return null;var c,p=t._size[1],h=100,f=100;i&&(c=i.q,h=i.lnz||h,f=i.unz||f);var d,m,g=[],y=[],v=[],b=new a({values:g,index:y,ptr:v,size:[p,p]}),x=[],_=[],w=[],E=new a({values:x,index:_,ptr:w,size:[p,p]}),S=[],A=[],N=[];for(d=0;d<p;d++)A[d]=0,S[d]=-1,v[d+1]=0;h=0,f=0;for(var M=0;M<p;M++){v[M]=h,w[M]=f;var k=c?c[M]:M,C=u(b,t,k,N,A,S,1),T=-1,O=-1;for(m=C;m<p;m++)if(S[d=N[m]]<0){var I=e(A[d]);s(I,O)&&(O=I,T=d)}else _[f]=S[d],x[f++]=A[d];if(-1===T||O<=0)return null;S[k]<0&&o(e(A[k]),n(O,l))&&(T=k);var P=A[T];for(_[f]=M,x[f++]=P,S[T]=M,y[h]=T,g[h++]=1,m=C;m<p;m++)S[d=N[m]]<0&&(y[h]=d,g[h++]=r(A[d],P)),A[d]=0}for(v[p]=h,w[p]=f,m=0;m<h;m++)y[m]=S[y[m]];return g.splice(h,g.length-h),y.splice(h,y.length-h),x.splice(f,x.length-f),_.splice(f,_.length-f),{L:b,U:E,pinv:S}}})),td=nn("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],(t=>{var{typed:e,abs:r,add:n,multiply:i,transpose:s,divideScalar:o,subtract:a,larger:u,largerEq:l,SparseMatrix:c}=t,p=Wf({add:n,multiply:i,transpose:s}),h=Qf({abs:r,divideScalar:o,multiply:i,subtract:a,larger:u,largerEq:l,SparseMatrix:c});return e("slu",{"SparseMatrix, number, number":function(t,e,r){if(!un(e)||e<0||e>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(r<0||r>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var n=p(e,t,!1),i=h(t,n,r);return{L:i.L,U:i.U,p:i.pinv,q:n.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})})),ed=nn("det",["typed","matrix","subtract","multiply","unaryMinus","lup"],(t=>{var{typed:e,matrix:r,subtract:n,multiply:i,unaryMinus:s,lup:o}=t;return e("det",{any:function(t){return Qr(t)},"Array | Matrix":function(t){var e;switch((e=_r(t)?t.size():Array.isArray(t)?(t=r(t)).size():[]).length){case 0:return Qr(t);case 1:if(1===e[0])return Qr(t.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+ds(e)+")");case 2:var a=e[0];if(a===e[1])return function(t,e,r){if(1===e)return Qr(t[0][0]);if(2===e)return n(i(t[0][0],t[1][1]),i(t[1][0],t[0][1]));for(var a=o(t),u=a.U[0][0],l=1;l<e;l++)u=i(u,a.U[l][l]);for(var c=0,p=0,h=[];;){for(;h[p];)p++;if(p>=e)break;for(var f=p,d=0;!h[a.p[f]];)h[a.p[f]]=!0,f=a.p[f],d++;d%2==0&&c++}return c%2==0?u:s(u)}(t.clone().valueOf(),a);throw new RangeError("Matrix must be square (size: "+ds(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ds(e)+")")}}})})),rd="distance",nd=nn(rd,["typed","addScalar","subtract","divideScalar","multiplyScalar","unaryMinus","sqrt","abs"],(t=>{var{typed:e,addScalar:r,subtract:n,multiplyScalar:i,divideScalar:s,unaryMinus:o,sqrt:a,abs:u}=t;return e(rd,{"Array, Array, Array":function(t,e,r){if(2===t.length&&2===e.length&&2===r.length){if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(r))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");var a=s(n(r[1],r[0]),n(e[1],e[0])),u=i(i(a,a),e[0]),l=o(i(a,e[0])),p=t[1];return m(t[0],t[1],u,l,p)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(t,e,r){if(2===Object.keys(t).length&&2===Object.keys(e).length&&2===Object.keys(r).length){if(!c(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(e))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(r))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if("pointX"in t&&"pointY"in t&&"lineOnePtX"in e&&"lineOnePtY"in e&&"lineTwoPtX"in r&&"lineTwoPtY"in r){var a=s(n(r.lineTwoPtY,r.lineTwoPtX),n(e.lineOnePtY,e.lineOnePtX)),u=i(i(a,a),e.lineOnePtX),l=o(i(a,e.lineOnePtX)),p=t.pointX;return m(t.pointX,t.pointY,u,l,p)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(t,e){if(2===t.length&&3===e.length){if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!p(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return m(t[0],t[1],e[0],e[1],e[2])}if(3===t.length&&6===e.length){if(!p(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(e))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(t[0],t[1],t[2],e[0],e[1],e[2],e[3],e[4],e[5])}if(t.length===e.length&&t.length>0){if(!h(t))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!h(e))throw new TypeError("All values of an array should be numbers or BigNumbers");return y(t,e)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(t,e){if(2===Object.keys(t).length&&3===Object.keys(e).length){if(!c(t))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!p(e))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in t&&"pointY"in t&&"xCoeffLine"in e&&"yCoeffLine"in e&&"constant"in e)return m(t.pointX,t.pointY,e.xCoeffLine,e.yCoeffLine,e.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(t).length&&6===Object.keys(e).length){if(!p(t))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(e))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in t&&"pointY"in t&&"x0"in e&&"y0"in e&&"z0"in e&&"a"in e&&"b"in e&&"c"in e)return g(t.pointX,t.pointY,t.pointZ,e.x0,e.y0,e.z0,e.a,e.b,e.c);throw new TypeError("Key names do not match")}if(2===Object.keys(t).length&&2===Object.keys(e).length){if(!c(t))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(e))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in t&&"pointOneY"in t&&"pointTwoX"in e&&"pointTwoY"in e)return y([t.pointOneX,t.pointOneY],[e.pointTwoX,e.pointTwoY]);throw new TypeError("Key names do not match")}if(3===Object.keys(t).length&&3===Object.keys(e).length){if(!p(t))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!p(e))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in t&&"pointOneY"in t&&"pointOneZ"in t&&"pointTwoX"in e&&"pointTwoY"in e&&"pointTwoZ"in e)return y([t.pointOneX,t.pointOneY,t.pointOneZ],[e.pointTwoX,e.pointTwoY,e.pointTwoZ]);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(t){if(!function(t){if(2===t[0].length&&l(t[0][0])&&l(t[0][1])){if(t.some((t=>2!==t.length||!l(t[0])||!l(t[1]))))return!1}else{if(!(3===t[0].length&&l(t[0][0])&&l(t[0][1])&&l(t[0][2])))return!1;if(t.some((t=>3!==t.length||!l(t[0])||!l(t[1])||!l(t[2]))))return!1}return!0}(t))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(t){for(var e=[],r=[],n=[],i=0;i<t.length-1;i++)for(var s=i+1;s<t.length;s++)2===t[0].length?(r=[t[i][0],t[i][1]],n=[t[s][0],t[s][1]]):3===t[0].length&&(r=[t[i][0],t[i][1],t[i][2]],n=[t[s][0],t[s][1],t[s][2]]),e.push(y(r,n));return e}(t)}});function l(t){return"number"==typeof t||mr(t)}function c(t){return t.constructor!==Array&&(t=d(t)),l(t[0])&&l(t[1])}function p(t){return t.constructor!==Array&&(t=d(t)),l(t[0])&&l(t[1])&&l(t[2])}function h(t){return Array.isArray(t)||(t=d(t)),t.every(l)}function f(t){return t.constructor!==Array&&(t=d(t)),l(t[0])&&l(t[1])&&l(t[2])&&l(t[3])&&l(t[4])&&l(t[5])}function d(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;n++)r.push(t[e[n]]);return r}function m(t,e,n,o,l){var c=u(r(r(i(n,t),i(o,e)),l)),p=a(r(i(n,n),i(o,o)));return s(c,p)}function g(t,e,o,u,l,c,p,h,f){var d=[n(i(n(l,e),f),i(n(c,o),h)),n(i(n(c,o),p),i(n(u,t),f)),n(i(n(u,t),h),i(n(l,e),p))];d=a(r(r(i(d[0],d[0]),i(d[1],d[1])),i(d[2],d[2])));var m=a(r(r(i(p,p),i(h,h)),i(f,f)));return s(d,m)}function y(t,e){for(var s=t.length,o=0,u=0,l=0;l<s;l++)u=n(t[l],e[l]),o=r(i(u,u),o);return a(o)}})),id="stirlingS2",sd=nn(id,["typed","addScalar","subtract","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","larger"],(t=>{var{typed:e,addScalar:r,subtract:n,multiplyScalar:i,divideScalar:s,pow:o,factorial:a,combinations:u,isNegative:l,isInteger:c,larger:p}=t;return e(id,{"number | BigNumber, number | BigNumber":function(t,e){if(!c(t)||l(t)||!c(e)||l(e))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(e,t))throw new TypeError("k must be less than or equal to n in function stirlingS2");for(var h=a(e),f=0,d=0;d<=e;d++){var m=o(-1,n(e,d)),g=u(e,d),y=o(d,t);f=r(f,i(i(g,y),m))}return s(f,h)}})})),od="catalan",ad=nn(od,["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],(t=>{var{typed:e,addScalar:r,divideScalar:n,multiplyScalar:i,combinations:s,isNegative:o,isInteger:a}=t;return e(od,{"number | BigNumber":function(t){if(!a(t)||o(t))throw new TypeError("Non-negative integer value expected in function catalan");return n(s(i(t,2),t),r(t,1))}})})),ud="count",ld=nn(ud,["typed","size","prod"],(t=>{var{typed:e,size:r,prod:n}=t;return e(ud,{string:function(t){return t.length},"Matrix | Array":function(t){return n(r(t))}})})),cd=nn("log",["config","typed","divideScalar","Complex"],(t=>{var{typed:e,config:r,divideScalar:n,Complex:i}=t;return e("log",{number:function(t){return t>=0||r.predictable?Uo(t):new i(t,0).log()},Complex:function(t){return t.log()},BigNumber:function(t){return!t.isNegative()||r.predictable?t.ln():new i(t.toNumber(),0).log()},"Array | Matrix":function(t){return Js(t,this)},"any, any":function(t,e){return n(this(t),this(e))}})})),pd="dotDivide",hd=nn(pd,["typed","matrix","equalScalar","divideScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,equalScalar:n,divideScalar:i,DenseMatrix:s}=t,o=Ql({typed:e,equalScalar:n}),a=tc({typed:e}),u=hc({typed:e,DenseMatrix:s}),l=rc({typed:e,equalScalar:n}),c=nc({typed:e,DenseMatrix:s}),p=Zl({typed:e}),h=Kl({typed:e});return e(pd,{"any, any":i,"SparseMatrix, SparseMatrix":function(t,e){return u(t,e,i,!1)},"SparseMatrix, DenseMatrix":function(t,e){return o(e,t,i,!0)},"DenseMatrix, SparseMatrix":function(t,e){return a(t,e,i,!1)},"DenseMatrix, DenseMatrix":function(t,e){return p(t,e,i)},"Array, Array":function(t,e){return this(r(t),r(e)).valueOf()},"Array, Matrix":function(t,e){return this(r(t),e)},"Matrix, Array":function(t,e){return this(t,r(e))},"SparseMatrix, any":function(t,e){return l(t,e,i,!1)},"DenseMatrix, any":function(t,e){return h(t,e,i,!1)},"any, SparseMatrix":function(t,e){return c(e,t,i,!0)},"any, DenseMatrix":function(t,e){return h(e,t,i,!0)},"Array, any":function(t,e){return h(r(t),e,i,!1).valueOf()},"any, Array":function(t,e){return h(r(e),t,i,!0).valueOf()}})})),fd="usolveAll",dd=nn(fd,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=t,u=Pf({DenseMatrix:a});return e(fd,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=[u(t,e,!0)._data.map((t=>t[0]))],l=t._size[0],c=t._size[1],p=t._values,h=t._index,f=t._ptr,d=c-1;d>=0;d--)for(var m=r.length,g=0;g<m;g++){for(var y=r[g],v=[],b=[],x=f[d],_=0,w=f[d+1]-1;w>=x;w--){var E=h[w];E===d?_=p[w]:E<d&&(v.push(p[w]),b.push(E))}if(o(_,0))if(o(y[d],0)){if(0===g){var S=[...y];S[d]=1;for(var A=0,N=b.length;A<N;A++){var M=b[A];S[M]=s(S[M],v[A])}r.push(S)}}else{if(0===g)return[];r.splice(g,1),g-=1,m-=1}else{y[d]=n(y[d],_);for(var k=0,C=b.length;k<C;k++){var T=b[k];y[T]=s(y[T],i(y[d],v[k]))}}}return r.map((t=>new a({data:t.map((t=>[t])),size:[l,1]})))}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return l(t,e)},"Array, Array | Matrix":function(t,e){return l(r(t),e).map((t=>t.valueOf()))}});function l(t,e){for(var r=[u(t,e,!0)._data.map((t=>t[0]))],l=t._data,c=t._size[0],p=t._size[1]-1;p>=0;p--)for(var h=r.length,f=0;f<h;f++){var d=r[f];if(o(l[p][p],0))if(o(d[p],0)){if(0===f){var m=[...d];m[p]=1;for(var g=p-1;g>=0;g--)m[g]=s(m[g],l[g][p]);r.push(m)}}else{if(0===f)return[];r.splice(f,1),f-=1,h-=1}else{d[p]=n(d[p],l[p][p]);for(var y=p-1;y>=0;y--)d[y]=s(d[y],i(d[p],l[y][p]))}}return r.map((t=>new a({data:t.map((t=>[t])),size:[c,1]})))}})),md="hypot",gd=nn(md,["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],(t=>{var{typed:e,abs:r,addScalar:n,divideScalar:i,multiplyScalar:s,sqrt:o,smaller:a,isPositive:u}=t;return e(md,{"... number | BigNumber":function(t){for(var e=0,l=0,c=0;c<t.length;c++){var p=r(t[c]);a(l,p)?(e=s(e,s(i(l,p),i(l,p))),e=n(e,1),l=p):e=n(e,u(p)?s(i(p,l),i(p,l)):p)}return s(l,o(e))},Array:function(t){return this.apply(this,Rs(t))},Matrix:function(t){return this.apply(this,Rs(t.toArray()))}})}));function yd(){return(yd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var vd=nn("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtract","complex"],(t=>{var{typed:e,matrix:r,zeros:n,identity:i,isZero:s,equal:o,sign:a,sqrt:u,conj:l,unaryMinus:c,addScalar:p,divideScalar:h,multiplyScalar:f,subtract:d,complex:m}=t;return yd(e("qr",{DenseMatrix:function(t){return y(t)},SparseMatrix:function(t){return function(t){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(t){var e=y(r(t));return{Q:e.Q.valueOf(),R:e.R.valueOf()}}}),{_denseQRimpl:g});function g(t){var e,r,m,g=t._size[0],y=t._size[1],v=i([g],"dense"),b=v._data,x=t.clone(),_=x._data,w=n([g],"");for(m=0;m<Math.min(y,g);++m){var E=_[m][m],S=c(o(E,0)?1:a(E)),A=l(S),N=0;for(e=m;e<g;e++)N=p(N,f(_[e][m],l(_[e][m])));var M=f(S,u(N));if(!s(M)){var k=d(E,M);for(w[m]=1,e=m+1;e<g;e++)w[e]=h(_[e][m],k);var C=c(l(h(k,M))),T=void 0;for(r=m;r<y;r++){for(T=0,e=m;e<g;e++)T=p(T,f(l(w[e]),_[e][r]));for(T=f(T,C),e=m;e<g;e++)_[e][r]=f(d(_[e][r],f(w[e],T)),A)}for(e=0;e<g;e++){for(T=0,r=m;r<g;r++)T=p(T,f(b[e][r],w[r]));for(T=f(T,C),r=m;r<g;++r)b[e][r]=h(d(b[e][r],f(T,l(w[r]))),A)}}}return{Q:v,R:x,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function y(t){var e=g(t),r=e.R._data;if(t._data.length>0)for(var n="Complex"===r[0][0].type?m(0):0,i=0;i<r.length;++i)for(var s=0;s<i&&s<(r[0]||[]).length;++s)r[i][s]=n;return e}})),bd=nn("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(t=>{var{typed:e,matrix:r,divideScalar:n,addScalar:i,multiply:s,unaryMinus:o,det:a,identity:u,abs:l}=t;return e("inv",{"Array | Matrix":function(t){var e=_r(t)?t.size():_s(t);switch(e.length){case 1:if(1===e[0])return _r(t)?r([n(1,t.valueOf()[0])]):[n(1,t[0])];throw new RangeError("Matrix must be square (size: "+ds(e)+")");case 2:var i=e[0],s=e[1];if(i===s)return _r(t)?r(c(t.valueOf(),i,s),t.storage()):c(t,i,s);throw new RangeError("Matrix must be square (size: "+ds(e)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+ds(e)+")")}},any:function(t){return n(1,t)}});function c(t,e,r){var c,p,h,f,d;if(1===e){if(0===(f=t[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,f)]]}if(2===e){var m=a(t);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[n(t[1][1],m),n(o(t[0][1]),m)],[n(o(t[1][0]),m),n(t[0][0],m)]]}var g=t.concat();for(c=0;c<e;c++)g[c]=g[c].concat();for(var y=u(e).valueOf(),v=0;v<r;v++){var b=l(g[v][v]),x=v;for(c=v+1;c<e;)l(g[c][v])>b&&(b=l(g[c][v]),x=c),c++;if(0===b)throw Error("Cannot calculate inverse, determinant is zero");(c=x)!==v&&(d=g[v],g[v]=g[c],g[c]=d,d=y[v],y[v]=y[c],y[c]=d);var _=g[v],w=y[v];for(c=0;c<e;c++){var E=g[c],S=y[c];if(c!==v){if(0!==E[v]){for(h=n(o(E[v]),_[v]),p=v;p<r;p++)E[p]=i(E[p],s(h,_[p]));for(p=0;p<r;p++)S[p]=i(S[p],s(h,w[p]))}}else{for(h=_[v],p=v;p<r;p++)E[p]=n(E[p],h);for(p=0;p<r;p++)S[p]=n(S[p],h)}}}return y}})),xd="expm",_d=nn(xd,["typed","abs","add","identity","inv","multiply"],(t=>{var{typed:e,abs:r,add:n,identity:i,inv:s,multiply:o}=t;return e(xd,{Matrix:function(t){var e=t.size();if(2!==e.length||e[0]!==e[1])throw new RangeError("Matrix must be square (size: "+ds(e)+")");for(var u=e[0],l=function(t,e){for(var r=0;r<30;r++)for(var n=0;n<=r;n++){var i=r-n;if(a(t,n,i)<1e-15)return{q:n,j:i}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(function(t){for(var e=t.size()[0],n=0,i=0;i<e;i++){for(var s=0,o=0;o<e;o++)s+=r(t.get([i,o]));n=Math.max(s,n)}return n}(t)),c=l.q,p=l.j,h=o(t,Math.pow(2,-p)),f=i(u),d=i(u),m=1,g=h,y=-1,v=1;v<=c;v++)v>1&&(g=o(g,h),y=-y),f=n(f,o(m=m*(c-v+1)/((2*c-v+1)*v),g)),d=n(d,o(m*y,g));for(var b=o(s(d),f),x=0;x<p;x++)b=o(b,b);return Sr(t)?t.createSparseMatrix(b):b}});function a(t,e,r){for(var n=1,i=2;i<=e;i++)n*=i;for(var s=n,o=e+1;o<=2*e;o++)s*=o;var a=s*(2*e+1);return 8*Math.pow(t/Math.pow(2,r),2*e)*n*n/(s*a)}})),wd=nn("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(t=>{var{typed:e,matrix:r,multiply:n,equalScalar:i,divideScalar:s,inv:o}=t,a=rc({typed:e,equalScalar:i}),u=Kl({typed:e});return e("divide",tn({"Array | Matrix, Array | Matrix":function(t,e){return n(t,o(e))},"DenseMatrix, any":function(t,e){return u(t,e,s,!1)},"SparseMatrix, any":function(t,e){return a(t,e,s,!1)},"Array, any":function(t,e){return u(r(t),e,s,!1).valueOf()},"any, Array | Matrix":function(t,e){return n(t,o(e))}},s.signatures))})),Ed="mean",Sd=nn(Ed,["typed","add","divide"],(t=>{var{typed:e,add:r,divide:n}=t;return e(Ed,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(t,e){try{var i=Qs(t,e,r),s=Array.isArray(t)?_s(t):t.size();return n(i,s[e])}catch(t){throw qh(t,"mean")}},"...":function(t){if(Zs(t))throw new TypeError("Scalar values expected in function mean");return i(t)}});function i(t){var e,i=0;if(Ks(t,(function(t){try{e=void 0===e?t:r(e,t),i++}catch(e){throw qh(e,"mean",t)}})),0===i)throw new Error("Cannot calculate the mean of an empty array");return n(e,i)}})),Ad="unbiased",Nd="variance",Md=nn(Nd,["typed","add","subtract","multiply","divide","apply","isNaN"],(t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:s,apply:o,isNaN:a}=t;return e(Nd,{"Array | Matrix":function(t){return u(t,Ad)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(t,e){return l(t,e,Ad)},"Array | Matrix, number | BigNumber, string":l,"...":function(t){return u(t,Ad)}});function u(t,e){var o,u=0;if(0===t.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Ks(t,(function(t){try{o=void 0===o?t:r(o,t),u++}catch(e){throw qh(e,"variance",t)}})),0===u)throw new Error("Cannot calculate variance of an empty array");var l=s(o,u);if(o=void 0,Ks(t,(function(t){var e=n(t,l);o=void 0===o?i(e,e):r(o,i(e,e))})),a(o))return o;switch(e){case"uncorrected":return s(o,u);case"biased":return s(o,u+1);case"unbiased":var c=mr(o)?o.mul(0):0;return 1===u?c:s(o,u-1);default:throw new Error('Unknown normalization "'+e+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(t,e,r){try{if(0===t.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(t,e,(t=>u(t,r)))}catch(t){throw qh(t,"variance")}}})),kd="kldivergence",Cd=nn(kd,["typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric"],(t=>{var{typed:e,matrix:r,divide:n,sum:i,multiply:s,dotDivide:o,log:a,isNumeric:u}=t;return e(kd,{"Array, Array":function(t,e){return l(r(t),r(e))},"Matrix, Array":function(t,e){return l(t,r(e))},"Array, Matrix":function(t,e){return l(r(t),e)},"Matrix, Matrix":function(t,e){return l(t,e)}});function l(t,e){var r=e.size().length,l=t.size().length;if(r>1)throw new Error("first object must be one dimensional");if(l>1)throw new Error("second object must be one dimensional");if(r!==l)throw new Error("Length of two vectors must be equal");if(0===i(t))throw new Error("Sum of elements in first object must be non zero");if(0===i(e))throw new Error("Sum of elements in second object must be non zero");var c=n(t,i(t)),p=n(e,i(e)),h=i(s(c,a(o(c,p))));return u(h)?h:Number.NaN}})),Td="bellNumbers",Od=nn(Td,["typed","addScalar","isNegative","isInteger","stirlingS2"],(t=>{var{typed:e,addScalar:r,isNegative:n,isInteger:i,stirlingS2:s}=t;return e(Td,{"number | BigNumber":function(t){if(!i(t)||n(t))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var e=0,o=0;o<=t;o++)e=r(e,s(t,o));return e}})})),Id="log1p",Pd=nn(Id,["typed","config","divideScalar","log","Complex"],(t=>{var{typed:e,config:r,divideScalar:n,log:i,Complex:s}=t;return e(Id,{number:function(t){return t>=-1||r.predictable?hn(t):o(new s(t,0))},Complex:o,BigNumber:function(t){var e=t.plus(1);return!e.isNegative()||r.predictable?e.ln():o(new s(t.toNumber(),0))},"Array | Matrix":function(t){return Js(t,this)},"any, any":function(t,e){return n(this(t),i(e))}});function o(t){var e=t.re+1;return new s(Math.log(Math.sqrt(e*e+t.im*t.im)),Math.atan2(t.im,e))}}));function Rd(){return(Rd=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Ld(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Dd(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ld(Object(r),!0).forEach((function(e){qd(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ld(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Bd=nn("Unit",["?on","config","addScalar","subtract","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],(t=>{var e,r,n,{on:i,config:s,addScalar:o,subtract:a,multiplyScalar:u,divideScalar:l,pow:c,abs:p,fix:h,round:f,equal:d,isNumeric:m,format:g,number:y,Complex:v,BigNumber:b,Fraction:x}=t,_=y;function w(t,e){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(null!=t&&!m(t)&&!gr(t))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(void 0!==e&&("string"!=typeof e||""===e))throw new TypeError("Second parameter in Unit constructor must be a string");if(void 0!==e){var r=w.parse(e);this.units=r.units,this.dimensions=r.dimensions}else{this.units=[{unit:D,prefix:I.NONE,power:0}],this.dimensions=[];for(var n=0;n<P.length;n++)this.dimensions[n]=0}this.value=null!=t?this._normalize(t):null,this.fixPrefix=!1,this.skipAutomaticSimplification=!0}function E(){for(;" "===n||"\t"===n;)A()}function S(t){return t>="0"&&t<="9"}function A(){r++,n=e.charAt(r)}function N(t){r=t,n=e.charAt(r)}function M(){var t="",e=r;if("+"===n?A():"-"===n&&(t+=n,A()),!function(t){return t>="0"&&t<="9"||"."===t}(n))return N(e),null;if("."===n){if(t+=n,A(),!S(n))return N(e),null}else{for(;S(n);)t+=n,A();"."===n&&(t+=n,A())}for(;S(n);)t+=n,A();if("E"===n||"e"===n){var i="",s=r;if(i+=n,A(),"+"!==n&&"-"!==n||(i+=n,A()),!S(n))return N(s),t;for(t+=i;S(n);)t+=n,A()}return t}function k(){for(var t="";S(n)||w.isValidAlpha(n);)t+=n,A();var e=t.charAt(0);return w.isValidAlpha(e)?t:null}function C(t){return n===t?(A(),t):null}w.prototype.type="Unit",w.prototype.isUnit=!0,w.parse=function(t,i){if(i=i||{},r=-1,n="","string"!=typeof(e=t))throw new TypeError("Invalid argument in Unit.parse, string expected");var o=new w;o.units=[];var a=1,u=!1;A(),E();var l=M(),c=null;if(l){if("BigNumber"===s.number)c=new b(l);else if("Fraction"===s.number)try{c=new x(l)}catch(t){c=parseFloat(l)}else c=parseFloat(l);E(),C("*")?(a=1,u=!0):C("/")&&(a=-1,u=!0)}for(var p=[],h=1;;){for(E();"("===n;)p.push(a),h*=a,a=1,A(),E();var f;if(!n)break;var d=n;if(null===(f=k()))throw new SyntaxError('Unexpected "'+d+'" in "'+e+'" at index '+r.toString());var m=T(f);if(null===m)throw new SyntaxError('Unit "'+f+'" not found.');var g=a*h;if(E(),C("^")){E();var y=M();if(null===y)throw new SyntaxError('In "'+t+'", "^" must be followed by a floating-point number');g*=y}o.units.push({unit:m.unit,prefix:m.prefix,power:g});for(var v=0;v<P.length;v++)o.dimensions[v]+=(m.unit.dimensions[v]||0)*g;for(E();")"===n;){if(0===p.length)throw new SyntaxError('Unmatched ")" in "'+e+'" at index '+r.toString());h/=p.pop(),A(),E()}if(u=!1,C("*")?(a=1,u=!0):C("/")?(a=-1,u=!0):a=1,m.unit.base){var _=m.unit.base.key;$.auto[_]={unit:m.unit,prefix:m.prefix}}}if(E(),n)throw new SyntaxError('Could not parse: "'+t+'"');if(u)throw new SyntaxError('Trailing characters: "'+t+'"');if(0!==p.length)throw new SyntaxError('Unmatched "(" in "'+e+'"');if(0===o.units.length&&!i.allowNoUnits)throw new SyntaxError('"'+t+'" contains no units');return o.value=void 0!==c?o._normalize(c):null,o},w.prototype.clone=function(){var t=new w;t.fixPrefix=this.fixPrefix,t.skipAutomaticSimplification=this.skipAutomaticSimplification,t.value=Qr(this.value),t.dimensions=this.dimensions.slice(0),t.units=[];for(var e=0;e<this.units.length;e++)for(var r in t.units[e]={},this.units[e])rn(this.units[e],r)&&(t.units[e][r]=this.units[e][r]);return t},w.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},w.prototype._normalize=function(t){var e,r,n,i,s;if(null==t||0===this.units.length)return t;if(this._isDerived()){var a=t;s=w._getNumberConverter(Jr(t));for(var l=0;l<this.units.length;l++)e=s(this.units[l].unit.value),i=s(this.units[l].prefix.value),n=s(this.units[l].power),a=u(a,c(u(e,i),n));return a}return e=(s=w._getNumberConverter(Jr(t)))(this.units[0].unit.value),r=s(this.units[0].unit.offset),i=s(this.units[0].prefix.value),u(o(t,r),u(e,i))},w.prototype._denormalize=function(t,e){var r,n,i,s,o;if(null==t||0===this.units.length)return t;if(this._isDerived()){var p=t;o=w._getNumberConverter(Jr(t));for(var h=0;h<this.units.length;h++)r=o(this.units[h].unit.value),s=o(this.units[h].prefix.value),i=o(this.units[h].power),p=l(p,c(u(r,s),i));return p}return r=(o=w._getNumberConverter(Jr(t)))(this.units[0].unit.value),s=o(this.units[0].prefix.value),n=o(this.units[0].unit.offset),a(l(l(t,r),null==e?s:e),n)};var T=Pn((t=>{if(rn(q,t)){var e=q[t];return{unit:e,prefix:e.prefixes[""]}}for(var r in q)if(rn(q,r)&&fs(t,r)){var n=q[r],i=t.length-r.length,s=t.substring(0,i),o=rn(n.prefixes,s)?n.prefixes[s]:void 0;if(void 0!==o)return{unit:n,prefix:o}}return null}),{hasher:t=>t[0],limit:100});function O(t){return t.equalBase(R.NONE)&&null!==t.value&&!s.predictable?t.value:t}w.isValuelessUnit=function(t){return null!==T(t)},w.prototype.hasBase=function(t){if("string"==typeof t&&(t=R[t]),!t)return!1;for(var e=0;e<P.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(t){for(var e=0;e<P.length;e++)if(Math.abs((this.dimensions[e]||0)-(t.dimensions[e]||0))>1e-12)return!1;return!0},w.prototype.equals=function(t){return this.equalBase(t)&&d(this.value,t.value)},w.prototype.multiply=function(t){for(var e=this.clone(),r=0;r<P.length;r++)e.dimensions[r]=(this.dimensions[r]||0)+(t.dimensions[r]||0);for(var n=0;n<t.units.length;n++){var i=Dd({},t.units[n]);e.units.push(i)}if(null!==this.value||null!==t.value){var s=null===this.value?this._normalize(1):this.value,o=null===t.value?t._normalize(1):t.value;e.value=u(s,o)}else e.value=null;return e.skipAutomaticSimplification=!1,O(e)},w.prototype.divide=function(t){for(var e=this.clone(),r=0;r<P.length;r++)e.dimensions[r]=(this.dimensions[r]||0)-(t.dimensions[r]||0);for(var n=0;n<t.units.length;n++){var i=Dd(Dd({},t.units[n]),{},{power:-t.units[n].power});e.units.push(i)}if(null!==this.value||null!==t.value){var s=null===this.value?this._normalize(1):this.value,o=null===t.value?t._normalize(1):t.value;e.value=l(s,o)}else e.value=null;return e.skipAutomaticSimplification=!1,O(e)},w.prototype.pow=function(t){for(var e=this.clone(),r=0;r<P.length;r++)e.dimensions[r]=(this.dimensions[r]||0)*t;for(var n=0;n<e.units.length;n++)e.units[n].power*=t;return null!==e.value?e.value=c(e.value,t):e.value=null,e.skipAutomaticSimplification=!1,O(e)},w.prototype.abs=function(){var t=this.clone();for(var e in t.value=null!==t.value?p(t.value):null,t.units)"VA"!==t.units[e].unit.name&&"VAR"!==t.units[e].unit.name||(t.units[e].unit=q.W);return t},w.prototype.to=function(t){var e,r=null===this.value?this._normalize(1):this.value;if("string"==typeof t){if(e=w.parse(t),!this.equalBase(e))throw new Error("Units do not match ('".concat(e.toString(),"' != '").concat(this.toString(),"')"));if(null!==e.value)throw new Error("Cannot convert to a unit with a value");return e.value=Qr(r),e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e}if(vr(t)){if(!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");return(e=t.clone()).value=Qr(r),e.fixPrefix=!0,e.skipAutomaticSimplification=!0,e}throw new Error("String or Unit expected as parameter")},w.prototype.toNumber=function(t){return _(this.toNumeric(t))},w.prototype.toNumeric=function(t){var e;return(e=t?this.to(t):this.clone())._isDerived()||0===e.units.length?e._denormalize(e.value):e._denormalize(e.value,e.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},w.fromJSON=function(t){var e=new w(t.value,t.unit);return e.fixPrefix=t.fixPrefix||!1,e},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var t,e,r=this.clone(),n=[];for(var i in z)if(rn(z,i)&&r.hasBase(R[i])){t=i;break}if("NONE"===t)r.units=[];else if(t&&rn(z,t)&&(e=z[t]),e)r.units=[{unit:e.unit,prefix:e.prefix,power:1}];else{for(var s=!1,o=0;o<P.length;o++){var a=P[o];Math.abs(r.dimensions[o]||0)>1e-12&&(rn(z,a)?n.push({unit:z[a].unit,prefix:z[a].prefix,power:r.dimensions[o]||0}):s=!0)}n.length<r.units.length&&!s&&(r.units=n)}return r},w.prototype.toSI=function(){for(var t=this.clone(),e=[],r=0;r<P.length;r++){var n=P[r];if(Math.abs(t.dimensions[r]||0)>1e-12){if(!rn($.si,n))throw new Error("Cannot express custom unit "+n+" in SI units");e.push({unit:$.si[n].unit,prefix:$.si[n].prefix,power:t.dimensions[r]||0})}}return t.units=e,t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t},w.prototype.formatUnits=function(){for(var t="",e="",r=0,n=0,i=0;i<this.units.length;i++)this.units[i].power>0?(r++,t+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(t+="^"+this.units[i].power)):this.units[i].power<0&&n++;if(n>0)for(var s=0;s<this.units.length;s++)this.units[s].power<0&&(r>0?(e+=" "+this.units[s].prefix.name+this.units[s].unit.name,Math.abs(this.units[s].power+1)>1e-15&&(e+="^"+-this.units[s].power)):(e+=" "+this.units[s].prefix.name+this.units[s].unit.name,e+="^"+this.units[s].power));t=t.substr(1),e=e.substr(1),r>1&&n>0&&(t="("+t+")"),n>1&&r>0&&(e="("+e+")");var o=t;return r>0&&n>0&&(o+=" / "),o+e},w.prototype.format=function(t){var e=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),r=!1;for(var n in void 0!==e.value&&null!==e.value&&gr(e.value)&&(r=Math.abs(e.value.re)<1e-14),e.units)rn(e.units,n)&&e.units[n].unit&&("VA"===e.units[n].unit.name&&r?e.units[n].unit=q.VAR:"VAR"!==e.units[n].unit.name||r||(e.units[n].unit=q.VA));1!==e.units.length||e.fixPrefix||Math.abs(e.units[0].power-Math.round(e.units[0].power))<1e-14&&(e.units[0].prefix=e._bestPrefix());var i=e._denormalize(e.value),s=null!==e.value?g(i,t||{}):"",o=e.formatUnits();return e.value&&gr(e.value)&&(s="("+s+")"),o.length>0&&s.length>0&&(s+=" "),s+o},w.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var t=null!==this.value?p(this.value):0,e=p(this.units[0].unit.value),r=this.units[0].prefix;if(0===t)return r;var n=this.units[0].power,i=Math.log(t/Math.pow(r.value*e,n))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return r;i=Math.abs(i);var s=this.units[0].unit.prefixes;for(var o in s)if(rn(s,o)){var a=s[o];if(a.scientific){var u=Math.abs(Math.log(t/Math.pow(a.value*e,n))/Math.LN10-1.2);(u<i||u===i&&a.name.length<r.name.length)&&(r=a,i=u)}}return r},w.prototype.splitUnit=function(t){for(var e=this.clone(),r=[],n=0;n<t.length&&(e=e.to(t[n]),n!==t.length-1);n++){var i=e.toNumeric(),s=f(i),u=new w(d(s,i)?s:h(e.toNumeric()),t[n].toString());r.push(u),e=a(e,u)}for(var l=0,c=0;c<r.length;c++)l=o(l,r[c].value);return d(l,this.value)&&(e.value=0),r.push(e),r};var I={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};I.SHORTLONG=Rd({},I.SHORT,I.LONG),I.BINARY_SHORT=Rd({},I.BINARY_SHORT_SI,I.BINARY_SHORT_IEC),I.BINARY_LONG=Rd({},I.BINARY_LONG_SI,I.BINARY_LONG_IEC);var P=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],R={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var L in R)rn(R,L)&&(R[L].key=L);var D={name:"",base:{},value:1,offset:0,dimensions:P.map((t=>0))},q={meter:{name:"meter",base:R.LENGTH,prefixes:I.LONG,value:1,offset:0},inch:{name:"inch",base:R.LENGTH,prefixes:I.NONE,value:.0254,offset:0},foot:{name:"foot",base:R.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yard:{name:"yard",base:R.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mile:{name:"mile",base:R.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},link:{name:"link",base:R.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rod:{name:"rod",base:R.LENGTH,prefixes:I.NONE,value:5.0292,offset:0},chain:{name:"chain",base:R.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:R.LENGTH,prefixes:I.NONE,value:1e-10,offset:0},m:{name:"m",base:R.LENGTH,prefixes:I.SHORT,value:1,offset:0},in:{name:"in",base:R.LENGTH,prefixes:I.NONE,value:.0254,offset:0},ft:{name:"ft",base:R.LENGTH,prefixes:I.NONE,value:.3048,offset:0},yd:{name:"yd",base:R.LENGTH,prefixes:I.NONE,value:.9144,offset:0},mi:{name:"mi",base:R.LENGTH,prefixes:I.NONE,value:1609.344,offset:0},li:{name:"li",base:R.LENGTH,prefixes:I.NONE,value:.201168,offset:0},rd:{name:"rd",base:R.LENGTH,prefixes:I.NONE,value:5.02921,offset:0},ch:{name:"ch",base:R.LENGTH,prefixes:I.NONE,value:20.1168,offset:0},mil:{name:"mil",base:R.LENGTH,prefixes:I.NONE,value:254e-7,offset:0},m2:{name:"m2",base:R.SURFACE,prefixes:I.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:R.SURFACE,prefixes:I.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:R.SURFACE,prefixes:I.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:R.SURFACE,prefixes:I.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:R.SURFACE,prefixes:I.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:R.SURFACE,prefixes:I.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:R.SURFACE,prefixes:I.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:R.SURFACE,prefixes:I.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:R.SURFACE,prefixes:I.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:R.SURFACE,prefixes:I.NONE,value:1e4,offset:0},m3:{name:"m3",base:R.VOLUME,prefixes:I.CUBIC,value:1,offset:0},L:{name:"L",base:R.VOLUME,prefixes:I.SHORT,value:.001,offset:0},l:{name:"l",base:R.VOLUME,prefixes:I.SHORT,value:.001,offset:0},litre:{name:"litre",base:R.VOLUME,prefixes:I.LONG,value:.001,offset:0},cuin:{name:"cuin",base:R.VOLUME,prefixes:I.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:R.VOLUME,prefixes:I.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:R.VOLUME,prefixes:I.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:R.VOLUME,prefixes:I.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:R.VOLUME,prefixes:I.NONE,value:15e-6,offset:0},drop:{name:"drop",base:R.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:R.VOLUME,prefixes:I.NONE,value:5e-8,offset:0},minim:{name:"minim",base:R.VOLUME,prefixes:I.NONE,value:6.161152e-8,offset:0},fluiddram:{name:"fluiddram",base:R.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:R.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:R.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:R.VOLUME,prefixes:I.NONE,value:1e-6,offset:0},cup:{name:"cup",base:R.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:R.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:R.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:R.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:R.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:R.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:R.VOLUME,prefixes:I.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:R.VOLUME,prefixes:I.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:R.VOLUME,prefixes:I.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:R.VOLUME,prefixes:I.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:R.VOLUME,prefixes:I.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:R.VOLUME,prefixes:I.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:R.VOLUME,prefixes:I.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:R.VOLUME,prefixes:I.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:R.VOLUME,prefixes:I.NONE,value:.1173478,offset:0},obl:{name:"obl",base:R.VOLUME,prefixes:I.NONE,value:.1589873,offset:0},g:{name:"g",base:R.MASS,prefixes:I.SHORT,value:.001,offset:0},gram:{name:"gram",base:R.MASS,prefixes:I.LONG,value:.001,offset:0},ton:{name:"ton",base:R.MASS,prefixes:I.SHORT,value:907.18474,offset:0},t:{name:"t",base:R.MASS,prefixes:I.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:R.MASS,prefixes:I.LONG,value:1e3,offset:0},grain:{name:"grain",base:R.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:R.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:R.MASS,prefixes:I.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:R.MASS,prefixes:I.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:R.MASS,prefixes:I.NONE,value:45.359237,offset:0},stick:{name:"stick",base:R.MASS,prefixes:I.NONE,value:.115,offset:0},stone:{name:"stone",base:R.MASS,prefixes:I.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:R.MASS,prefixes:I.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:R.MASS,prefixes:I.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:R.MASS,prefixes:I.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:R.MASS,prefixes:I.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:R.MASS,prefixes:I.NONE,value:45.359237,offset:0},s:{name:"s",base:R.TIME,prefixes:I.SHORT,value:1,offset:0},min:{name:"min",base:R.TIME,prefixes:I.NONE,value:60,offset:0},h:{name:"h",base:R.TIME,prefixes:I.NONE,value:3600,offset:0},second:{name:"second",base:R.TIME,prefixes:I.LONG,value:1,offset:0},sec:{name:"sec",base:R.TIME,prefixes:I.LONG,value:1,offset:0},minute:{name:"minute",base:R.TIME,prefixes:I.NONE,value:60,offset:0},hour:{name:"hour",base:R.TIME,prefixes:I.NONE,value:3600,offset:0},day:{name:"day",base:R.TIME,prefixes:I.NONE,value:86400,offset:0},week:{name:"week",base:R.TIME,prefixes:I.NONE,value:604800,offset:0},month:{name:"month",base:R.TIME,prefixes:I.NONE,value:2629800,offset:0},year:{name:"year",base:R.TIME,prefixes:I.NONE,value:31557600,offset:0},decade:{name:"decade",base:R.TIME,prefixes:I.NONE,value:315576e3,offset:0},century:{name:"century",base:R.TIME,prefixes:I.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:R.TIME,prefixes:I.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:R.FREQUENCY,prefixes:I.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:R.FREQUENCY,prefixes:I.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:R.ANGLE,prefixes:I.SHORT,value:1,offset:0},radian:{name:"radian",base:R.ANGLE,prefixes:I.LONG,value:1,offset:0},deg:{name:"deg",base:R.ANGLE,prefixes:I.SHORT,value:null,offset:0},degree:{name:"degree",base:R.ANGLE,prefixes:I.LONG,value:null,offset:0},grad:{name:"grad",base:R.ANGLE,prefixes:I.SHORT,value:null,offset:0},gradian:{name:"gradian",base:R.ANGLE,prefixes:I.LONG,value:null,offset:0},cycle:{name:"cycle",base:R.ANGLE,prefixes:I.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:R.ANGLE,prefixes:I.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:R.ANGLE,prefixes:I.NONE,value:null,offset:0},A:{name:"A",base:R.CURRENT,prefixes:I.SHORT,value:1,offset:0},ampere:{name:"ampere",base:R.CURRENT,prefixes:I.LONG,value:1,offset:0},K:{name:"K",base:R.TEMPERATURE,prefixes:I.NONE,value:1,offset:0},degC:{name:"degC",base:R.TEMPERATURE,prefixes:I.NONE,value:1,offset:273.15},degF:{name:"degF",base:R.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:459.67},degR:{name:"degR",base:R.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:0},kelvin:{name:"kelvin",base:R.TEMPERATURE,prefixes:I.NONE,value:1,offset:0},celsius:{name:"celsius",base:R.TEMPERATURE,prefixes:I.NONE,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:R.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:459.67},rankine:{name:"rankine",base:R.TEMPERATURE,prefixes:I.NONE,value:1/1.8,offset:0},mol:{name:"mol",base:R.AMOUNT_OF_SUBSTANCE,prefixes:I.SHORT,value:1,offset:0},mole:{name:"mole",base:R.AMOUNT_OF_SUBSTANCE,prefixes:I.LONG,value:1,offset:0},cd:{name:"cd",base:R.LUMINOUS_INTENSITY,prefixes:I.SHORT,value:1,offset:0},candela:{name:"candela",base:R.LUMINOUS_INTENSITY,prefixes:I.LONG,value:1,offset:0},N:{name:"N",base:R.FORCE,prefixes:I.SHORT,value:1,offset:0},newton:{name:"newton",base:R.FORCE,prefixes:I.LONG,value:1,offset:0},dyn:{name:"dyn",base:R.FORCE,prefixes:I.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:R.FORCE,prefixes:I.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:R.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:R.FORCE,prefixes:I.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:R.FORCE,prefixes:I.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:R.FORCE,prefixes:I.NONE,value:9.80665,offset:0},J:{name:"J",base:R.ENERGY,prefixes:I.SHORT,value:1,offset:0},joule:{name:"joule",base:R.ENERGY,prefixes:I.SHORT,value:1,offset:0},erg:{name:"erg",base:R.ENERGY,prefixes:I.NONE,value:1e-7,offset:0},Wh:{name:"Wh",base:R.ENERGY,prefixes:I.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:R.ENERGY,prefixes:I.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:R.ENERGY,prefixes:I.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:R.ENERGY,prefixes:I.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:R.POWER,prefixes:I.SHORT,value:1,offset:0},watt:{name:"watt",base:R.POWER,prefixes:I.LONG,value:1,offset:0},hp:{name:"hp",base:R.POWER,prefixes:I.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:R.POWER,prefixes:I.SHORT,value:v.I,offset:0},VA:{name:"VA",base:R.POWER,prefixes:I.SHORT,value:1,offset:0},Pa:{name:"Pa",base:R.PRESSURE,prefixes:I.SHORT,value:1,offset:0},psi:{name:"psi",base:R.PRESSURE,prefixes:I.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:R.PRESSURE,prefixes:I.NONE,value:101325,offset:0},bar:{name:"bar",base:R.PRESSURE,prefixes:I.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:R.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:R.PRESSURE,prefixes:I.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:R.PRESSURE,prefixes:I.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:R.PRESSURE,prefixes:I.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:R.ELECTRIC_CHARGE,prefixes:I.LONG,value:1,offset:0},C:{name:"C",base:R.ELECTRIC_CHARGE,prefixes:I.SHORT,value:1,offset:0},farad:{name:"farad",base:R.ELECTRIC_CAPACITANCE,prefixes:I.LONG,value:1,offset:0},F:{name:"F",base:R.ELECTRIC_CAPACITANCE,prefixes:I.SHORT,value:1,offset:0},volt:{name:"volt",base:R.ELECTRIC_POTENTIAL,prefixes:I.LONG,value:1,offset:0},V:{name:"V",base:R.ELECTRIC_POTENTIAL,prefixes:I.SHORT,value:1,offset:0},ohm:{name:"ohm",base:R.ELECTRIC_RESISTANCE,prefixes:I.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:R.ELECTRIC_INDUCTANCE,prefixes:I.LONG,value:1,offset:0},H:{name:"H",base:R.ELECTRIC_INDUCTANCE,prefixes:I.SHORT,value:1,offset:0},siemens:{name:"siemens",base:R.ELECTRIC_CONDUCTANCE,prefixes:I.LONG,value:1,offset:0},S:{name:"S",base:R.ELECTRIC_CONDUCTANCE,prefixes:I.SHORT,value:1,offset:0},weber:{name:"weber",base:R.MAGNETIC_FLUX,prefixes:I.LONG,value:1,offset:0},Wb:{name:"Wb",base:R.MAGNETIC_FLUX,prefixes:I.SHORT,value:1,offset:0},tesla:{name:"tesla",base:R.MAGNETIC_FLUX_DENSITY,prefixes:I.LONG,value:1,offset:0},T:{name:"T",base:R.MAGNETIC_FLUX_DENSITY,prefixes:I.SHORT,value:1,offset:0},b:{name:"b",base:R.BIT,prefixes:I.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:R.BIT,prefixes:I.BINARY_LONG,value:1,offset:0},B:{name:"B",base:R.BIT,prefixes:I.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:R.BIT,prefixes:I.BINARY_LONG,value:8,offset:0}},B={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function U(t){if("BigNumber"===t.number){var e=qn(b);q.rad.value=new b(1),q.deg.value=e.div(180),q.grad.value=e.div(200),q.cycle.value=e.times(2),q.arcsec.value=e.div(648e3),q.arcmin.value=e.div(10800)}else q.rad.value=1,q.deg.value=Math.PI/180,q.grad.value=Math.PI/200,q.cycle.value=2*Math.PI,q.arcsec.value=Math.PI/648e3,q.arcmin.value=Math.PI/10800;q.radian.value=q.rad.value,q.degree.value=q.deg.value,q.gradian.value=q.grad.value}U(s),i&&i("config",(function(t,e){t.number!==e.number&&U(t)}));var $={si:{NONE:{unit:D,prefix:I.NONE[""]},LENGTH:{unit:q.m,prefix:I.SHORT[""]},MASS:{unit:q.g,prefix:I.SHORT.k},TIME:{unit:q.s,prefix:I.SHORT[""]},CURRENT:{unit:q.A,prefix:I.SHORT[""]},TEMPERATURE:{unit:q.K,prefix:I.SHORT[""]},LUMINOUS_INTENSITY:{unit:q.cd,prefix:I.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:q.mol,prefix:I.SHORT[""]},ANGLE:{unit:q.rad,prefix:I.SHORT[""]},BIT:{unit:q.bits,prefix:I.SHORT[""]},FORCE:{unit:q.N,prefix:I.SHORT[""]},ENERGY:{unit:q.J,prefix:I.SHORT[""]},POWER:{unit:q.W,prefix:I.SHORT[""]},PRESSURE:{unit:q.Pa,prefix:I.SHORT[""]},ELECTRIC_CHARGE:{unit:q.C,prefix:I.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:q.F,prefix:I.SHORT[""]},ELECTRIC_POTENTIAL:{unit:q.V,prefix:I.SHORT[""]},ELECTRIC_RESISTANCE:{unit:q.ohm,prefix:I.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:q.H,prefix:I.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:q.S,prefix:I.SHORT[""]},MAGNETIC_FLUX:{unit:q.Wb,prefix:I.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:q.T,prefix:I.SHORT[""]},FREQUENCY:{unit:q.Hz,prefix:I.SHORT[""]}}};$.cgs=JSON.parse(JSON.stringify($.si)),$.cgs.LENGTH={unit:q.m,prefix:I.SHORT.c},$.cgs.MASS={unit:q.g,prefix:I.SHORT[""]},$.cgs.FORCE={unit:q.dyn,prefix:I.SHORT[""]},$.cgs.ENERGY={unit:q.erg,prefix:I.NONE[""]},$.us=JSON.parse(JSON.stringify($.si)),$.us.LENGTH={unit:q.ft,prefix:I.NONE[""]},$.us.MASS={unit:q.lbm,prefix:I.NONE[""]},$.us.TEMPERATURE={unit:q.degF,prefix:I.NONE[""]},$.us.FORCE={unit:q.lbf,prefix:I.NONE[""]},$.us.ENERGY={unit:q.BTU,prefix:I.BTU[""]},$.us.POWER={unit:q.hp,prefix:I.NONE[""]},$.us.PRESSURE={unit:q.psi,prefix:I.NONE[""]},$.auto=JSON.parse(JSON.stringify($.si));var z=$.auto;for(var F in w.setUnitSystem=function(t){if(!rn($,t))throw new Error("Unit system "+t+" does not exist. Choices are: "+Object.keys($).join(", "));z=$[t]},w.getUnitSystem=function(){for(var t in $)if(rn($,t)&&$[t]===z)return t},w.typeConverters={BigNumber:function(t){return new b(t+"")},Fraction:function(t){return new x(t)},Complex:function(t){return t},number:function(t){return t}},w._getNumberConverter=function(t){if(!w.typeConverters[t])throw new TypeError('Unsupported type "'+t+'"');return w.typeConverters[t]},q)if(rn(q,F)){var G=q[F];G.dimensions=G.base.dimensions}for(var V in B)if(rn(B,V)){var j=q[B[V]],H={};for(var W in j)rn(j,W)&&(H[W]=j[W]);H.name=V,q[V]=H}return w.isValidAlpha=function(t){return/^[a-zA-Z]$/.test(t)},w.createUnit=function(t,e){if("object"!=typeof t)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(e&&e.override)for(var r in t)if(rn(t,r)&&w.deleteUnit(r),t[r].aliases)for(var n=0;n<t[r].aliases.length;n++)w.deleteUnit(t[r].aliases[n]);var i;for(var s in t)rn(t,s)&&(i=w.createUnitSingle(s,t[s]));return i},w.createUnitSingle=function(t,e,r){if(null==e&&(e={}),"string"!=typeof t)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(rn(q,t))throw new Error('Cannot create unit "'+t+'": a unit with that name already exists');!function(t){for(var e=0;e<t.length;e++){if(n=t.charAt(e),0===e&&!w.isValidAlpha(n))throw new Error('Invalid unit name (must begin with alpha character): "'+t+'"');if(e>0&&!w.isValidAlpha(n)&&!S(n))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+t+'"')}}(t);var i,s,o,a=null,u=[],l=0;if(e&&"Unit"===e.type)a=e.clone();else if("string"==typeof e)""!==e&&(i=e);else{if("object"!=typeof e)throw new TypeError('Cannot create unit "'+t+'" from "'+e.toString()+'": expecting "string" or "Unit" or "Object"');i=e.definition,s=e.prefixes,l=e.offset,o=e.baseName,e.aliases&&(u=e.aliases.valueOf())}if(u)for(var c=0;c<u.length;c++)if(rn(q,u[c]))throw new Error('Cannot create alias "'+u[c]+'": a unit with that name already exists');if(i&&"string"==typeof i&&!a)try{a=w.parse(i,{allowNoUnits:!0})}catch(e){throw e.message='Could not create unit "'+t+'" from "'+i+'": '+e.message,e}else i&&"Unit"===i.type&&(a=i.clone());u=u||[],l=l||0,s=s&&s.toUpperCase&&I[s.toUpperCase()]||I.NONE;var p={};if(a){p={name:t,value:a.value,dimensions:a.dimensions.slice(0),prefixes:s,offset:l};var h=!1;for(var f in R)if(rn(R,f)){for(var d=!0,m=0;m<P.length;m++)if(Math.abs((p.dimensions[m]||0)-(R[f].dimensions[m]||0))>1e-12){d=!1;break}if(d){h=!0,p.base=R[f];break}}if(!h){o=o||t+"_STUFF";var g={dimensions:a.dimensions.slice(0)};g.key=o,R[o]=g,z[o]={unit:p,prefix:I.NONE[""]},p.base=R[o]}}else{if(o=o||t+"_STUFF",P.indexOf(o)>=0)throw new Error('Cannot create new base unit "'+t+'": a base unit with that name already exists (and cannot be overridden)');for(var y in P.push(o),R)rn(R,y)&&(R[y].dimensions[P.length-1]=0);for(var v={dimensions:[]},b=0;b<P.length;b++)v.dimensions[b]=0;v.dimensions[P.length-1]=1,v.key=o,R[o]=v,p={name:t,value:1,dimensions:R[o].dimensions.slice(0),prefixes:s,offset:l,base:R[o]},z[o]={unit:p,prefix:I.NONE[""]}}w.UNITS[t]=p;for(var x=0;x<u.length;x++){var _=u[x],E={};for(var A in p)rn(p,A)&&(E[A]=p[A]);E.name=_,w.UNITS[_]=E}return delete T.cache,new w(null,t)},w.deleteUnit=function(t){delete w.UNITS[t]},w.PREFIXES=I,w.BASE_DIMENSIONS=P,w.BASE_UNITS=R,w.UNIT_SYSTEMS=$,w.UNITS=q,w}),{isClass:!0}),Ud="createUnit",$d=nn(Ud,["typed","Unit"],(t=>{var{typed:e,Unit:r}=t;return e(Ud,{"Object, Object":function(t,e){return r.createUnit(t,e)},Object:function(t){return r.createUnit(t,{})},"string, Unit | string | Object, Object":function(t,e,n){var i={};return i[t]=e,r.createUnit(i,n)},"string, Unit | string | Object":function(t,e){var n={};return n[t]=e,r.createUnit(n,{})},string:function(t){var e={};return e[t]={},r.createUnit(e,{})}})})),zd=nn("eigs",["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","inv","bignumber","multiply","add"],(t=>{var{config:e,typed:r,matrix:n,addScalar:i,subtract:s,equal:o,abs:a,atan:u,cos:l,sin:c,multiplyScalar:p,inv:h,bignumber:f,multiply:d,add:m}=t;return r("eigs",{Array:function(t){var e=n(t),r=e.size();if(2!==r.length||r[0]!==r[1])throw new RangeError("Matrix must be square (size: "+ds(r)+")");var i=g(e,r[0]);return{values:i[0],vectors:i[1]}},Matrix:function(t){var e=t.size();if(2!==e.length||e[0]!==e[1])throw new RangeError("Matrix must be square (size: "+ds(e)+")");var r=g(t,e[0]);return{values:n(r[0]),vectors:n(r[1])}}});function g(t,r){var n=t.datatype();if(void 0===n&&(n=t.getDataType()),"number"!==n&&"BigNumber"!==n&&"Fraction"!==n)throw"mixed"===n?new TypeError("Mixed matrix element type is not supported"):new TypeError("Matrix element type not supported ("+n+")");if(function(t,e){for(var r=0;r<e;r++)for(var n=r;n<e;n++)if(!o(t[r][n],t[n][r]))throw new TypeError("Input matrix is not symmetric")}(t.toArray(),r),"number"===n)return y(t.toArray());if("Fraction"===n){for(var i=t.toArray(),l=0;l<r;l++)for(var c=l;c<r;c++)i[l][c]=i[l][c].valueOf(),i[c][l]=i[l][c];return y(t.toArray())}return"BigNumber"===n?function(t){for(var r,n=t.length,i=a(e.epsilon/n),o=new Array(n),l=0;l<n;l++)o[l]=A(n,0),o[l][l]=1;for(var c,m,g,y,v=E(t);a(v[1])>=a(i);){var _=v[0][0],w=v[0][1];t=x(t,(c=t[_][_],m=t[w][w],g=t[_][w],y=void 0,y=s(m,c),r=a(y)<=e.epsilon?f(-1).acos().div(4):p(.5,u(d(2,g,h(y))))),_,w),o=b(o,r,_,w),v=E(t)}for(var N=A(n,0),M=0;M<n;M++)N[M]=t[M][M];return S(Qr(N),Qr(o))}(t.toArray()):void 0}function y(t){for(var r,n=t.length,i=Math.abs(e.epsilon/n),s=new Array(n),o=0;o<n;o++)s[o]=A(n,0),s[o][o]=1;for(var a=w(t);Math.abs(a[1])>=Math.abs(i);){var u=a[0][0],l=a[0][1];t=_(t,(c=t[u][u],p=t[l][l],h=t[u][l],f=void 0,f=p-c,r=Math.abs(f)<=e.epsilon?Math.PI/4:.5*Math.atan(2*h/(p-c))),u,l),s=v(s,r,u,l),a=w(t)}for(var c,p,h,f,d=A(n,0),m=0;m<n;m++)d[m]=t[m][m];return S(Qr(d),Qr(s))}function v(t,e,r,n){for(var i=t.length,s=Math.cos(e),o=Math.sin(e),a=A(i,0),u=A(i,0),l=0;l<i;l++)a[l]=s*t[l][r]-o*t[l][n],u[l]=o*t[l][r]+s*t[l][n];for(var c=0;c<i;c++)t[c][r]=a[c],t[c][n]=u[c];return t}function b(t,e,r,n){for(var o=t.length,a=l(e),u=c(e),h=A(o,f(0)),d=A(o,f(0)),m=0;m<o;m++)h[m]=s(p(a,t[m][r]),p(u,t[m][n])),d[m]=i(p(u,t[m][r]),p(a,t[m][n]));for(var g=0;g<o;g++)t[g][r]=h[g],t[g][n]=d[g];return t}function x(t,e,r,n){for(var o=t.length,a=f(l(e)),u=f(c(e)),h=p(a,a),g=p(u,u),y=A(o,f(0)),v=A(o,f(0)),b=d(f(2),a,u,t[r][n]),x=i(s(p(h,t[r][r]),b),p(g,t[n][n])),_=m(p(g,t[r][r]),b,p(h,t[n][n])),w=0;w<o;w++)y[w]=s(p(a,t[r][w]),p(u,t[n][w])),v[w]=i(p(u,t[r][w]),p(a,t[n][w]));t[r][r]=x,t[n][n]=_,t[r][n]=f(0),t[n][r]=f(0);for(var E=0;E<o;E++)E!==r&&E!==n&&(t[r][E]=y[E],t[E][r]=y[E],t[n][E]=v[E],t[E][n]=v[E]);return t}function _(t,e,r,n){for(var i=t.length,s=Math.cos(e),o=Math.sin(e),a=s*s,u=o*o,l=A(i,0),c=A(i,0),p=a*t[r][r]-2*s*o*t[r][n]+u*t[n][n],h=u*t[r][r]+2*s*o*t[r][n]+a*t[n][n],f=0;f<i;f++)l[f]=s*t[r][f]-o*t[n][f],c[f]=o*t[r][f]+s*t[n][f];t[r][r]=p,t[n][n]=h,t[r][n]=0,t[n][r]=0;for(var d=0;d<i;d++)d!==r&&d!==n&&(t[r][d]=l[d],t[d][r]=l[d],t[n][d]=c[d],t[d][n]=c[d]);return t}function w(t){for(var e=t.length,r=0,n=[0,1],i=0;i<e;i++)for(var s=i+1;s<e;s++)Math.abs(r)<Math.abs(t[i][s])&&(r=Math.abs(t[i][s]),n=[i,s]);return[n,r]}function E(t){for(var e=t.length,r=0,n=[0,1],i=0;i<e;i++)for(var s=i+1;s<e;s++)a(r)<a(t[i][s])&&(r=a(t[i][s]),n=[i,s]);return[n,r]}function S(t,e){for(var r=t.length,n=Array(r),i=Array(r),s=0;s<r;s++)i[s]=Array(r);for(var o=0;o<r;o++){for(var a=0,u=t[0],l=0;l<t.length;l++)t[l]<u&&(u=t[a=l]);n[o]=t.splice(a,1)[0];for(var c=0;c<r;c++)i[c][o]=e[c][a],e[c].splice(a,1)}return[Qr(n),Qr(i)]}function A(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=e;return r}})),Fd=nn("intersect",["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar"],(t=>{var{typed:e,config:r,abs:n,add:i,addScalar:s,matrix:o,multiply:a,multiplyScalar:u,divideScalar:l,subtract:c,smaller:p,equalScalar:h}=t;return e("intersect",{"Array, Array, Array":function(t,e,r){if(!m(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(t){return 4===t.length&&f(t[0])&&f(t[1])&&f(t[2])&&f(t[3])}(r))throw new TypeError("Array with 4 numbers expected as third argument");return function(t,e,r,n,i,o,a,p,h,f){var d=u(t,a),m=u(n,a),g=u(e,p),y=u(i,p),v=u(r,h),b=u(o,h),x=l(c(c(c(f,d),g),v),c(c(c(s(s(m,y),b),d),g),v));return[s(t,u(x,c(n,t))),s(e,u(x,c(i,e))),s(r,u(x,c(o,r)))]}(t[0],t[1],t[2],e[0],e[1],e[2],r[0],r[1],r[2],r[3])},"Array, Array, Array, Array":function(t,e,o,f){if(2===t.length){if(!d(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!d(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!d(o))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!d(f))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(t,e,o,h){var f=t,d=o,m=c(f,e),g=c(d,h),y=c(u(m[0],g[1]),u(g[0],m[1]));if(p(n(y),r.epsilon))return null;var v=u(g[0],f[1]),b=u(g[1],f[0]),x=u(g[0],d[1]),_=u(g[1],d[0]),w=l(s(c(c(v,b),x),_),y);return i(a(m,w),f)}(t,e,o,f)}if(3===t.length){if(!m(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!m(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!m(o))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!m(f))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return y=t[0],v=t[1],b=t[2],x=e[0],_=e[1],w=e[2],E=o[0],S=o[1],A=o[2],C=g(y,E,N=f[0],E,v,S,M=f[1],S,b,A,k=f[2],A),T=g(N,E,x,y,M,S,_,v,k,A,w,b),O=g(y,E,x,y,v,S,_,v,b,A,w,b),I=g(N,E,N,E,M,S,M,S,k,A,k,A),P=g(x,y,x,y,_,v,_,v,w,b,w,b),R=l(c(u(C,T),u(O,I)),c(u(P,I),u(T,T))),L=l(s(C,u(R,T)),I),D=s(y,u(R,c(x,y))),q=s(v,u(R,c(_,v))),B=s(b,u(R,c(w,b))),U=s(E,u(L,c(N,E))),$=s(S,u(L,c(M,S))),z=s(A,u(L,c(k,A))),h(D,U)&&h(q,$)&&h(B,z)?[D,q,B]:null}throw new TypeError("Arrays with two or thee dimensional points expected");var y,v,b,x,_,w,E,S,A,N,M,k,C,T,O,I,P,R,L,D,q,B,U,$,z},"Matrix, Matrix, Matrix":function(t,e,r){return o(this(t.valueOf(),e.valueOf(),r.valueOf()))},"Matrix, Matrix, Matrix, Matrix":function(t,e,r,n){return o(this(t.valueOf(),e.valueOf(),r.valueOf(),n.valueOf()))}});function f(t){return"number"==typeof t||mr(t)}function d(t){return 2===t.length&&f(t[0])&&f(t[1])}function m(t){return 3===t.length&&f(t[0])&&f(t[1])&&f(t[2])}function g(t,e,r,n,i,o,a,l,p,h,f,d){var m=u(c(t,e),c(r,n)),g=u(c(i,o),c(a,l)),y=u(c(p,h),c(f,d));return s(s(m,g),y)}})),Gd=nn("std",["typed","sqrt","variance"],(t=>{var{typed:e,sqrt:r,variance:n}=t;return e("std",{"Array | Matrix":i,"Array | Matrix, string":i,"Array | Matrix, number | BigNumber":i,"Array | Matrix, number | BigNumber, string":i,"...":function(t){return i(t)}});function i(t,e){if(0===t.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{return r(n.apply(null,arguments))}catch(t){throw t instanceof TypeError&&-1!==t.message.indexOf(" variance")?new TypeError(t.message.replace(" variance"," std")):t}}})),Vd="usolve",jd=nn(Vd,["typed","matrix","divideScalar","multiplyScalar","subtract","equalScalar","DenseMatrix"],(t=>{var{typed:e,matrix:r,divideScalar:n,multiplyScalar:i,subtract:s,equalScalar:o,DenseMatrix:a}=t,u=Pf({DenseMatrix:a});return e(Vd,{"SparseMatrix, Array | Matrix":function(t,e){return function(t,e){for(var r=(e=u(t,e,!0))._data,l=t._size[0],c=t._size[1],p=t._values,h=t._index,f=t._ptr,d=[],m=c-1;m>=0;m--){var g=r[m][0]||0;if(o(g,0))d[m]=[0];else{for(var y=0,v=[],b=[],x=f[m],_=f[m+1]-1;_>=x;_--){var w=h[_];w===m?y=p[_]:w<m&&(v.push(p[_]),b.push(w))}if(o(y,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var E=n(g,y),S=0,A=b.length;S<A;S++){var N=b[S];r[N]=[s(r[N][0],i(E,v[S]))]}d[m]=[E]}}return new a({data:d,size:[l,1]})}(t,e)},"DenseMatrix, Array | Matrix":function(t,e){return l(t,e)},"Array, Array | Matrix":function(t,e){return l(r(t),e).valueOf()}});function l(t,e){for(var r=(e=u(t,e,!0))._data,l=t._size[0],c=t._size[1],p=[],h=t._data,f=c-1;f>=0;f--){var d=r[f][0]||0,m=void 0;if(o(d,0))m=0;else{var g=h[f][f];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=n(d,g);for(var y=f-1;y>=0;y--)r[y]=[s(r[y][0]||0,i(m,h[y][f]))]}p[f]=[m]}return new a({data:p,size:[l,1]})}})),Hd="norm",Wd=nn(Hd,["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],(t=>{var{typed:e,abs:r,add:n,pow:i,conj:s,sqrt:o,multiply:a,equalScalar:u,larger:l,smaller:c,matrix:p,ctranspose:h,eigs:f}=t;return e(Hd,{number:Math.abs,Complex:function(t){return t.abs()},BigNumber:function(t){return t.abs()},boolean:function(t){return Math.abs(t)},Array:function(t){return d(p(t),2)},Matrix:function(t){return d(t,2)},"number | Complex | BigNumber | boolean, number | BigNumber | string":function(t){return this(t)},"Array, number | BigNumber | string":function(t,e){return d(p(t),e)},"Matrix, number | BigNumber | string":function(t,e){return d(t,e)}});function d(t,e){var p=t.size();if(1===p.length)return function(t,e){if(e===Number.POSITIVE_INFINITY||"inf"===e)return function(t){var e=0;return t.forEach((function(t){var n=r(t);l(n,e)&&(e=n)}),!0),e}(t);if(e===Number.NEGATIVE_INFINITY||"-inf"===e)return function(t){var e;return t.forEach((function(t){var n=r(t);e&&!c(n,e)||(e=n)}),!0),e||0}(t);if("fro"===e)return d(t,2);if("number"==typeof e&&!isNaN(e)){if(!u(e,0)){var s=0;return t.forEach((function(t){s=n(i(r(t),e),s)}),!0),i(s,1/e)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}(t,e);if(2===p.length){if(p[0]&&p[1])return function(t,e){if(1===e)return function(t){var e=[],i=0;return t.forEach((function(t,s){var o=s[1],a=n(e[o]||0,r(t));l(a,i)&&(i=a),e[o]=a}),!0),i}(t);if(e===Number.POSITIVE_INFINITY||"inf"===e)return function(t){var e=[],i=0;return t.forEach((function(t,s){var o=s[0],a=n(e[o]||0,r(t));l(a,i)&&(i=a),e[o]=a}),!0),i}(t);if("fro"===e)return function(t){var e=0;return t.forEach((function(t,r){e=n(e,a(t,s(t)))})),r(o(e))}(t);if(2===e)return function(t){var e=t.size();if(e[0]!==e[1])throw new RangeError("Invalid matrix dimensions");var n=h(t),i=a(n,t),s=f(i).values,u=s.get([s.size()[0]-1]);return r(o(u))}(t);throw new Error("Unsupported parameter value "+e)}(t,e);throw new RangeError("Invalid matrix dimensions")}}}));function Yd(t,e){var r,n=e.length,i=[];if(t)for(r=0;r<n;r++)i[t[r]]=e[r];else for(r=0;r<n;r++)i[r]=e[r];return i}var Xd="lusolve",Zd=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],Kd=nn(Xd,Zd,(t=>{var{typed:e,matrix:r,lup:n,slu:i,usolve:s,lsolve:o,DenseMatrix:a}=t,u=Pf({DenseMatrix:a});return e(Xd,{"Array, Array | Matrix":function(t,e){t=r(t);var i=n(t);return c(i.L,i.U,i.p,null,e).valueOf()},"DenseMatrix, Array | Matrix":function(t,e){var r=n(t);return c(r.L,r.U,r.p,null,e)},"SparseMatrix, Array | Matrix":function(t,e){var r=n(t);return c(r.L,r.U,r.p,null,e)},"SparseMatrix, Array | Matrix, number, number":function(t,e,r,n){var s=i(t,r,n);return c(s.L,s.U,s.p,s.q,e)},"Object, Array | Matrix":function(t,e){return c(t.L,t.U,t.p,t.q,e)}});function l(t){if(_r(t))return t;if(xr(t))return r(t);throw new TypeError("Invalid Matrix LU decomposition")}function c(t,e,r,n,i){t=l(t),e=l(e),r&&((i=u(t,i,!0))._data=Yd(r,i._data));var a=o(t,i),c=s(e,a);return n&&(c._data=Yd(n,c._data)),c}})),Jd="sqrtm",Qd=["typed","abs","add","multiply","sqrt","subtract","inv","size","max","identity"],tm=nn(Jd,Qd,(t=>{var{typed:e,abs:r,add:n,multiply:i,sqrt:s,subtract:o,inv:a,size:u,max:l,identity:c}=t,p=1e-6;function h(t){var e,s=0,h=t,f=c(u(t));do{var d=h;if(h=i(.5,n(d,a(f))),f=i(.5,n(f,a(d))),(e=l(r(o(h,d))))>p&&++s>1e3)throw new Error("computing square root of matrix: iterative method could not converge")}while(e>p);return h}return e(Jd,{"Array | Matrix":function(t){var e=_r(t)?t.size():_s(t);switch(e.length){case 1:if(1===e[0])return s(t);throw new RangeError("Matrix must be square (size: "+ds(e)+")");case 2:if(e[0]===e[1])return h(t);throw new RangeError("Matrix must be square (size: "+ds(e)+")");default:throw new RangeError("Matrix must be at most two dimensional (size: "+ds(e)+")")}}})})),em="multinomial",rm=["typed","add","divide","multiply","factorial","isInteger","isPositive"],nm=nn(em,rm,(t=>{var{typed:e,add:r,divide:n,multiply:i,factorial:s,isInteger:o,isPositive:a}=t;return e(em,{"Array | Matrix":function(t){var e=0,u=1;return Ks(t,(function(t){if(!o(t)||!a(t))throw new TypeError("Positive integer value expected in function multinomial");e=r(e,t),u=i(u,s(t))})),n(s(e),u)}})})),im="rotationMatrix",sm=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],om=nn(im,sm,(t=>{var{typed:e,config:r,multiplyScalar:n,addScalar:i,unaryMinus:s,norm:o,BigNumber:a,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:p,sin:h}=t;return e(im,{"":function(){return"Matrix"===r.matrix?u([]):[]},string:function(t){return u(t)},"number | BigNumber | Complex | Unit":function(t){return f(t,"Matrix"===r.matrix?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(t,e){return f(t,e)},"number | BigNumber | Complex | Unit, Array":function(t,e){var r=u(e);return d(r),y(t,r,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(t,e){d(e);var n=e.storage()||("Matrix"===r.matrix?"dense":void 0);return y(t,e,n)},"number | BigNumber | Complex | Unit, Array, string":function(t,e,r){var n=u(e);return d(n),y(t,n,r)},"number | BigNumber | Complex | Unit, Matrix, string":function(t,e,r){return d(e),y(t,e,r)}});function f(t,e){var r=mr(t)?new a(-1):-1,i=p(t),s=h(t);return g([[i,n(r,s)],[s,i]],e)}function d(t){var e=t.size();if(e.length<1||3!==e[0])throw new RangeError("Vector must be of dimensions 1x3")}function m(t){return t.reduce(((t,e)=>n(t,e)))}function g(t,e){if(e){if("sparse"===e)return new c(t);if("dense"===e)return new l(t);throw new TypeError('Unknown matrix type "'.concat(e,'"'))}return t}function y(t,e,r){var n=o(e);if(0===n)throw new RangeError("Rotation around zero vector");var u=mr(t)?a:null,l=u?new u(1):1,c=u?new u(-1):-1,f=u?new u(e.get([0])/n):e.get([0])/n,d=u?new u(e.get([1])/n):e.get([1])/n,y=u?new u(e.get([2])/n):e.get([2])/n,v=p(t),b=i(l,s(v)),x=h(t);return g([[i(v,m([f,f,b])),i(m([f,d,b]),m([c,y,x])),i(m([f,y,b]),m([d,x]))],[i(m([f,d,b]),m([y,x])),i(v,m([d,d,b])),i(m([d,y,b]),m([c,f,x]))],[i(m([f,y,b]),m([c,d,x])),i(m([d,y,b]),m([f,x])),i(v,m([y,y,b]))]],r)}})),am="median",um=["typed","add","divide","compare","partitionSelect"],lm=nn(am,um,(t=>{var{typed:e,add:r,divide:n,compare:i,partitionSelect:s}=t;function o(t){try{var e=(t=Rs(t.valueOf())).length;if(0===e)throw new Error("Cannot calculate median of an empty array");if(e%2==0){for(var r=e/2-1,n=s(t,r+1),o=t[r],l=0;l<r;++l)i(t[l],o)>0&&(o=t[l]);return u(o,n)}var c=s(t,(e-1)/2);return a(c)}catch(t){throw qh(t,"median")}}var a=e({"number | BigNumber | Complex | Unit":function(t){return t}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(t,e){return n(r(t,e),2)}});return e(am,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(t,e){throw new Error("median(A, dim) is not yet supported")},"...":function(t){if(Zs(t))throw new TypeError("Scalar values expected in function median");return o(t)}})})),cm="rotate",pm=["typed","multiply","rotationMatrix"],hm=nn(cm,pm,(t=>{var{typed:e,multiply:r,rotationMatrix:n}=t;return e(cm,{"Array , number | BigNumber | Complex | Unit":function(t,e){return i(t,2),r(n(e),t).toArray()},"Matrix , number | BigNumber | Complex | Unit":function(t,e){return i(t,2),r(n(e),t)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(t,e,s){return i(t,3),r(n(e,s),t)},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(t,e,s){return i(t,3),r(n(e,s),t)}});function i(t,e){var r=Array.isArray(t)?_s(t):t.size();if(r.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(e));if(2===r.length&&1!==r[1])throw new RangeError("Vector must be of dimensions 1x".concat(e));if(r[0]!==e)throw new RangeError("Vector must be of dimensions 1x".concat(e))}})),fm=["typed","abs","map","median","subtract"],dm=nn("mad",fm,(t=>{var{typed:e,abs:r,map:n,median:i,subtract:s}=t;return e("mad",{"Array | Matrix":o,"...":function(t){return o(t)}});function o(t){if(0===(t=Rs(t.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var e=i(t);return i(n(t,(function(t){return r(s(t,e))})))}catch(t){throw t instanceof TypeError&&-1!==t.message.indexOf("median")?new TypeError(t.message.replace("median","mad")):qh(t,"mad")}}})),mm="unit",gm=["typed","Unit"],ym=nn(mm,gm,(t=>{var{typed:e,Unit:r}=t;return e(mm,{Unit:function(t){return t.clone()},string:function(t){return r.isValuelessUnit(t)?new r(null,t):r.parse(t,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string":function(t,e){return new r(t,e)},"Array | Matrix":function(t){return Js(t,this)}})})),vm=on({}),bm=Tn({}),xm=On({}),_m=Vn({}),wm=jn({}),Em=Gn({}),Sm=ui({config:fr}),Am=li({}),Nm=ci({}),Mm=ii({Complex:bm}),km=Qn({BigNumber:Sm,config:fr}),Cm=ei({BigNumber:Sm,config:fr}),Tm=Wn({BigNumber:Sm,config:fr}),Om=Yn({BigNumber:Sm,config:fr}),Im=ri({BigNumber:Sm,config:fr}),Pm=Xn({BigNumber:Sm,config:fr}),Rm=Ui({BigNumber:Sm,config:fr}),Lm=Ti({BigNumber:Sm,config:fr}),Dm=Xi({BigNumber:Sm,config:fr}),qm=Bi({BigNumber:Sm,config:fr}),Bm=cs({}),Um=Zn({BigNumber:Sm,config:fr}),$m=Hn({BigNumber:Sm,config:fr}),zm=ti({BigNumber:Sm,config:fr}),Fm=si({}),Gm=Gs({Matrix:Am}),Vm=Kn({BigNumber:Sm,config:fr}),jm=Hs({BigNumber:Sm,Complex:bm,DenseMatrix:Gm,Fraction:Bm}),Hm=no({typed:jm}),Wm=so({typed:jm}),Ym=ho({typed:jm}),Xm=mo({typed:jm}),Zm=vo({config:fr,typed:jm}),Km=bo({typed:jm}),Jm=_o({typed:jm}),Qm=wo({Complex:bm,typed:jm}),tg=So({typed:jm}),eg=Zo({BigNumber:Sm,config:fr,typed:jm}),rg=Jo({isInteger:Hm,typed:jm}),ng=ea({typed:jm}),ig=na({Complex:bm,typed:jm}),sg=sa({Complex:bm,config:fr,typed:jm}),og=oa({typed:jm}),ag=ua({BigNumber:Sm,Fraction:Bm,complex:Qm,typed:jm}),ug=ca({typed:jm}),lg=ka({typed:jm}),cg=Ca({typed:jm}),pg=Ta({typed:jm}),hg=Da({typed:jm}),fg=qa({typed:jm}),dg=$a({typed:jm}),mg=Fa({typed:jm}),gg=Va({typed:jm}),yg=Ka({typed:jm}),vg=Ja({format:yg,typed:jm}),bg=tu({typed:jm}),xg=nu({typed:jm}),_g=su({Complex:bm,config:fr,typed:jm}),wg=Su({BigNumber:Sm,typed:jm}),Eg=Nu({BigNumber:Sm,Complex:bm,config:fr,typed:jm}),Sg=ku({BigNumber:Sm,Complex:bm,config:fr,typed:jm}),Ag=Tu({Complex:bm,config:fr,typed:jm}),Ng=Ou({typed:jm}),Mg=Pu({Complex:bm,config:fr,typed:jm}),kg=Lu({typed:jm}),Cg=qu({BigNumber:Sm,typed:jm}),Tg=Uu({BigNumber:Sm,typed:jm}),Og=zu({BigNumber:Sm,typed:jm}),Ig=Gu({typed:jm}),Pg=Vu({typed:jm}),Rg=Yu({typed:jm}),Lg=Qu({config:fr,typed:jm}),Dg=rl({config:fr,typed:jm}),qg=Jn({BigNumber:Sm,config:fr}),Bg=il({typed:jm}),Ug=ol({isNumeric:Wm,typed:jm}),$g=ul({typed:jm}),zg=cl({typed:jm}),Fg=pl({Fraction:Bm,typed:jm}),Gg=fl({typed:jm}),Vg=ml({typed:jm}),jg=gl({typed:jm}),Hg=vl({Complex:bm,config:fr,typed:jm}),Wg=bl({Complex:bm,config:fr,typed:jm}),Yg=_l({typed:jm}),Xg=El({typed:jm}),Zg=Al({isNaN:Xm,isNumeric:Wm,typed:jm}),Kg=Nl({format:yg,typed:jm}),Jg=kl({Complex:bm,config:fr,typed:jm}),Qg=Tl({BigNumber:Sm,typed:jm}),ty=Ol({typed:jm}),ey=Il({typed:jm}),ry=Pl({BigNumber:Sm,typed:jm}),ny=Rl({typed:jm}),iy=Dl({typed:jm}),sy=Ul({config:fr,typed:jm}),oy=ni({BigNumber:Sm,config:fr}),ay=zl({typed:jm}),uy=Fl({Matrix:Am,equalScalar:Zm,typed:jm}),ly=Vl({DenseMatrix:Gm,Matrix:Am,SparseMatrix:uy,typed:jm}),cy=Hl({BigNumber:Sm,Complex:bm,Fraction:Bm,config:fr,isNegative:ay,matrix:ly,typed:jm,unaryMinus:Gg}),py=Jl({BigNumber:Sm,DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm}),hy=ic({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm}),fy=ac({BigNumber:Sm,equalScalar:Zm,matrix:ly,typed:jm}),dy=lc({BigNumber:Sm,config:fr,matrix:ly,typed:jm}),my=pc({equalScalar:Zm,matrix:ly,typed:jm}),gy=dc({DenseMatrix:Gm,matrix:ly,typed:jm}),yy=mc({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm}),vy=yc({isInteger:Hm,matrix:ly,typed:jm}),by=xc({DenseMatrix:Gm,SparseMatrix:uy,matrix:ly,typed:jm}),xy=wc({BigNumber:Sm,DenseMatrix:Gm,SparseMatrix:uy,config:fr,matrix:ly,typed:jm}),_y=Ec({BigNumber:Sm,config:fr,matrix:ly,typed:jm}),wy=Ac({isInteger:Hm,matrix:ly,typed:jm}),Ey=Tc({matrix:ly,config:fr,typed:jm}),Sy=Uc({matrix:ly,typed:jm}),Ay=jc({BigNumber:Sm,config:fr,matrix:ly,typed:jm}),Ny=Hc({format:yg,typed:jm}),My=Jc({BigNumber:Sm,DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm,zeros:Ay}),ky=rp({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm,zeros:Ay}),Cy=ip({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm,zeros:Ay}),Ty=op({BigNumber:Sm,DenseMatrix:Gm,Fraction:Bm,config:fr,equalScalar:Zm,matrix:ly,typed:jm}),Oy=up({matrix:ly,typed:jm}),Iy=cp({DenseMatrix:Gm,config:fr,matrix:ly,typed:jm}),Py=hp({DenseMatrix:Gm,config:fr,matrix:ly,typed:jm}),Ry=dp({DenseMatrix:Gm,config:fr,equalScalar:Zm,matrix:ly,typed:jm}),Ly=mp({DenseMatrix:Gm,smaller:Iy}),Dy=gp({larger:Py,smaller:Iy}),qy=vp({SparseMatrix:uy,typed:jm}),By=xp({BigNumber:Sm,Complex:bm,config:fr,typed:jm}),Uy=Ep({BigNumber:Sm,DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm}),$y=Sp({BigNumber:Sm,typed:jm}),zy=Ap({DenseMatrix:Gm,SparseMatrix:uy,addScalar:Vg,equalScalar:Zm,matrix:ly,typed:jm}),Fy=Np({addScalar:Vg,conj:Yg,multiplyScalar:og,size:Ey,typed:jm}),Gy=kp({addScalar:Vg,combinations:Rg,isInteger:Hm,isNegative:ay,isPositive:Ym,larger:Py,typed:jm}),Vy=Tp({typed:jm}),jy=Op({typed:jm}),Hy=Ip({config:fr,equalScalar:Zm,matrix:ly,round:My,typed:jm}),Wy=Rp({addScalar:Vg,dot:Fy,equalScalar:Zm,matrix:ly,multiplyScalar:og,typed:jm}),Yy=Dp({equalScalar:Zm,matrix:ly,multiplyScalar:og,typed:jm}),Xy=qp({typed:jm}),Zy=Up({matrix:ly,typed:jm}),Ky=zp({config:fr,matrix:ly}),Jy=Gp({matrix:ly,typed:jm}),Qy=Vp({matrix:ly,typed:jm}),tv=jp({Complex:bm,config:fr,fraction:Fg,identity:xy,matrix:ly,multiply:Wy,number:Km,typed:jm}),ev=Wp({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,pow:tv,typed:jm}),rv=Xp({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm,zeros:Ay}),nv=Jp({compare:Ty,typed:jm}),iv=th({compareText:Oy,isZero:Vy,typed:jm}),sv=rh({DenseMatrix:Gm,config:fr,matrix:ly,typed:jm}),ov=ih({compare:Ty,isNaN:Xm,isNumeric:Wm,typed:jm}),av=sh({ImmutableDenseMatrix:Ly}),uv=ah({BigNumber:Sm,Complex:bm,config:fr,typed:jm}),lv=uh({typed:jm}),cv=ch({DenseMatrix:Gm,Index:av,compareNatural:nv,size:Ey,subset:Sy,typed:jm}),pv=hh({DenseMatrix:Gm,Index:av,compareNatural:nv,size:Ey,subset:Sy,typed:jm}),hv=dh({Index:av,compareNatural:nv,size:Ey,subset:Sy,typed:jm}),fv=gh({compareNatural:nv,typed:jm}),dv=yh({add:zy,matrix:ly,typed:jm}),mv=vh({add:zy,compare:Ty,multiply:Wy,partitionSelect:ov,typed:jm}),gv=Eh({BigNumber:Sm,Complex:bm,config:fr,multiplyScalar:og,pow:tv,typed:jm}),yv=Sh({BigNumber:Sm,typed:jm}),vv=Ah({equalScalar:Zm,matrix:ly,typed:jm}),bv=Mh({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm}),xv=Ch({matrix:ly,multiplyScalar:og,typed:jm}),_v=Th({matrix:ly,typed:jm}),wv=Oh({bignumber:yv,fraction:Fg,number:Km}),Ev=Ih({equalScalar:Zm,matrix:ly,not:hg,typed:jm,zeros:Ay}),Sv=Rh({DenseMatrix:Gm,config:fr,matrix:ly,typed:jm}),Av=Dh({compare:Ty,compareNatural:nv,matrix:ly,typed:jm}),Nv=Bh({config:fr,numeric:wv,smaller:Iy,typed:jm}),Mv=Uh({BigNumber:Sm,typed:jm}),kv=zh({DenseMatrix:Gm,Index:av,compareNatural:nv,size:Ey,subset:Sy,typed:jm}),Cv=Gh({Index:av,compareNatural:nv,size:Ey,subset:Sy,typed:jm}),Tv=jh({Index:av,typed:jm}),Ov=Hh({add:zy,config:fr,numeric:wv,typed:jm}),Iv=Yh({gamma:gv,typed:jm}),Pv=Zh({factorial:Iv,typed:jm}),Rv=Jh({config:fr,equalScalar:Zm,matrix:ly,round:My,typed:jm}),Lv=tf({DenseMatrix:Gm,addScalar:Vg,equalScalar:Zm,matrix:ly,typed:jm,unaryMinus:Gg}),Dv=nf({matrix:ly,multiply:Wy,subtract:Lv,typed:jm}),qv=of({bignumber:yv,matrix:ly,config:fr,larger:Py,largerEq:sv,smaller:Iy,smallerEq:Sv,typed:jm}),Bv=af({Index:av,matrix:ly,range:qv,typed:jm}),Uv=lf({config:fr,multiplyScalar:og,numeric:wv,typed:jm}),$v=pf({DenseMatrix:Gm,equalScalar:Zm,matrix:ly,typed:jm}),zv=hf({config:fr,larger:Py,numeric:wv,typed:jm}),Fv=df({DenseMatrix:Gm,Index:av,compareNatural:nv,size:Ey,subset:Sy,typed:jm}),Gv=gf({Index:av,concat:vy,setDifference:cv,size:Ey,subset:Sy,typed:jm}),Vv=yf({Complex:bm,ceil:Rv,floor:Hy,matrix:ly,typed:jm}),jv=bf({Index:av,matrix:ly,range:qv,typed:jm}),Hv=_f({matrix:ly,number:Km,subtract:Lv,typed:jm}),Wv=Ef({conj:Yg,transpose:_v,typed:jm}),Yv=Af({equal:$v,typed:jm}),Xv=Mf({Index:av,compareNatural:nv,size:Ey,subset:Sy,typed:jm}),Zv=kf({DenseMatrix:Gm,matrix:ly,typed:jm}),Kv=Tf({numeric:wv,typed:jm}),Jv=If({Complex:bm,config:fr,divideScalar:Kv,typed:jm}),Qv=Lf({DenseMatrix:Gm,divideScalar:Kv,equalScalar:Zm,matrix:ly,multiplyScalar:og,subtract:Lv,typed:jm}),tb=qf({DenseMatrix:Gm,divideScalar:Kv,equalScalar:Zm,matrix:ly,multiplyScalar:og,subtract:Lv,typed:jm}),eb=Bf({FibonacciHeap:Dy,addScalar:Vg,equalScalar:Zm}),rb=$f({Index:av,concat:vy,setIntersect:pv,setSymDifference:Gv,size:Ey,subset:Sy,typed:jm}),nb=zf({DenseMatrix:Gm,Spa:eb,SparseMatrix:uy,abs:jy,addScalar:Vg,divideScalar:Kv,equalScalar:Zm,larger:Py,matrix:ly,multiplyScalar:og,subtract:Lv,typed:jm,unaryMinus:Gg}),ib=td({SparseMatrix:uy,abs:jy,add:zy,divideScalar:Kv,larger:Py,largerEq:sv,multiply:Wy,subtract:Lv,transpose:_v,typed:jm}),sb=ed({lup:nb,matrix:ly,multiply:Wy,subtract:Lv,typed:jm,unaryMinus:Gg}),ob=nd({abs:jy,addScalar:Vg,divideScalar:Kv,multiplyScalar:og,sqrt:Wg,subtract:Lv,typed:jm,unaryMinus:Gg}),ab=sd({addScalar:Vg,combinations:Rg,divideScalar:Kv,factorial:Iv,isInteger:Hm,isNegative:ay,larger:Py,multiplyScalar:og,pow:tv,subtract:Lv,typed:jm}),ub=ad({addScalar:Vg,combinations:Rg,divideScalar:Kv,isInteger:Hm,isNegative:ay,multiplyScalar:og,typed:jm}),lb=ld({prod:Uv,size:Ey,typed:jm}),cb=cd({Complex:bm,config:fr,divideScalar:Kv,typed:jm}),pb=hd({DenseMatrix:Gm,divideScalar:Kv,equalScalar:Zm,matrix:ly,typed:jm}),hb=dd({DenseMatrix:Gm,divideScalar:Kv,equalScalar:Zm,matrix:ly,multiplyScalar:og,subtract:Lv,typed:jm}),fb=gd({abs:jy,addScalar:Vg,divideScalar:Kv,isPositive:Ym,multiplyScalar:og,smaller:Iy,sqrt:Wg,typed:jm}),db=vd({addScalar:Vg,complex:Qm,conj:Yg,divideScalar:Kv,equal:$v,identity:xy,isZero:Vy,matrix:ly,multiplyScalar:og,sign:ag,sqrt:Wg,subtract:Lv,typed:jm,unaryMinus:Gg,zeros:Ay}),mb=bd({abs:jy,addScalar:Vg,det:sb,divideScalar:Kv,identity:xy,matrix:ly,multiply:Wy,typed:jm,unaryMinus:Gg}),gb=_d({abs:jy,add:zy,identity:xy,inv:mb,multiply:Wy,typed:jm}),yb=wd({divideScalar:Kv,equalScalar:Zm,inv:mb,matrix:ly,multiply:Wy,typed:jm}),vb=Sd({add:zy,divide:yb,typed:jm}),bb=Md({add:zy,apply:rg,divide:yb,isNaN:Xm,multiply:Wy,subtract:Lv,typed:jm}),xb=Cd({divide:yb,dotDivide:pb,isNumeric:Wm,log:cb,matrix:ly,multiply:Wy,sum:Ov,typed:jm}),_b=Od({addScalar:Vg,isInteger:Hm,isNegative:ay,stirlingS2:ab,typed:jm}),wb=Pd({Complex:bm,config:fr,divideScalar:Kv,log:cb,typed:jm}),Eb=Bd({BigNumber:Sm,Complex:bm,Fraction:Bm,abs:jy,addScalar:Vg,config:fr,divideScalar:Kv,equal:$v,fix:Vv,format:yg,isNumeric:Wm,multiplyScalar:og,number:Km,pow:tv,round:My,subtract:Lv}),Sb=$d({Unit:Eb,typed:jm}),Ab=zd({abs:jy,add:zy,addScalar:Vg,atan:Ng,bignumber:yv,config:fr,cos:ey,equal:$v,inv:mb,matrix:ly,multiply:Wy,multiplyScalar:og,sin:ny,subtract:Lv,typed:jm}),Nb=Fd({abs:jy,add:zy,addScalar:Vg,config:fr,divideScalar:Kv,equalScalar:Zm,matrix:ly,multiply:Wy,multiplyScalar:og,smaller:Iy,subtract:Lv,typed:jm}),Mb=Gd({sqrt:Wg,typed:jm,variance:bb}),kb=$i({BigNumber:Sm,Unit:Eb,config:fr}),Cb=xi({BigNumber:Sm,Unit:Eb,config:fr}),Tb=Fi({BigNumber:Sm,Unit:Eb,config:fr}),Ob=_i({BigNumber:Sm,Unit:Eb,config:fr}),Ib=Pi({BigNumber:Sm,Unit:Eb,config:fr}),Pb=ki({BigNumber:Sm,Unit:Eb,config:fr}),Rb=Gi({BigNumber:Sm,Unit:Eb,config:fr}),Lb=Vi({BigNumber:Sm,Unit:Eb,config:fr}),Db=hi({BigNumber:Sm,Unit:Eb,config:fr}),qb=Oi({BigNumber:Sm,Unit:Eb,config:fr}),Bb=Ai({BigNumber:Sm,Unit:Eb,config:fr}),Ub=mi({BigNumber:Sm,Unit:Eb,config:fr}),$b=Qi({BigNumber:Sm,Unit:Eb,config:fr}),zb=Wi({BigNumber:Sm,Unit:Eb,config:fr}),Fb=Ri({BigNumber:Sm,Unit:Eb,config:fr}),Gb=ss({BigNumber:Sm,Unit:Eb,config:fr}),Vb=rs({BigNumber:Sm,Unit:Eb,config:fr}),jb=os({BigNumber:Sm,Unit:Eb,config:fr}),Hb=Ii({BigNumber:Sm,Unit:Eb,config:fr}),Wb=di({BigNumber:Sm,Unit:Eb,config:fr}),Yb=Zi({BigNumber:Sm,Unit:Eb,config:fr}),Xb=Ki({BigNumber:Sm,Unit:Eb,config:fr}),Zb=yi({BigNumber:Sm,Unit:Eb,config:fr}),Kb=jd({DenseMatrix:Gm,divideScalar:Kv,equalScalar:Zm,matrix:ly,multiplyScalar:og,subtract:Lv,typed:jm}),Jb=Wd({abs:jy,add:zy,conj:Yg,ctranspose:Wv,eigs:Ab,equalScalar:Zm,larger:Py,matrix:ly,multiply:Wy,pow:tv,smaller:Iy,sqrt:Wg,typed:jm}),Qb=Kd({DenseMatrix:Gm,lsolve:Qv,lup:nb,matrix:ly,slu:ib,typed:jm,usolve:Kb}),tx=tm({abs:jy,add:zy,identity:xy,inv:mb,max:zv,multiply:Wy,size:Ey,sqrt:Wg,subtract:Lv,typed:jm}),ex=nm({add:zy,divide:yb,factorial:Iv,isInteger:Hm,isPositive:Ym,multiply:Wy,typed:jm}),rx=zi({BigNumber:Sm,Unit:Eb,config:fr}),nx=Mi({BigNumber:Sm,Unit:Eb,config:fr}),ix=gi({BigNumber:Sm,Unit:Eb,config:fr}),sx=Ci({BigNumber:Sm,Unit:Eb,config:fr}),ox=es({BigNumber:Sm,Unit:Eb,config:fr}),ax=ji({BigNumber:Sm,Unit:Eb,config:fr}),ux=ts({BigNumber:Sm,Unit:Eb,config:fr}),lx=Si({BigNumber:Sm,Unit:Eb,config:fr}),cx=ns({BigNumber:Sm,Unit:Eb,config:fr}),px=Li({BigNumber:Sm,Unit:Eb,config:fr}),hx=pi({BigNumber:Sm,Unit:Eb,config:fr}),fx=Ji({BigNumber:Sm,Unit:Eb,config:fr}),dx=om({BigNumber:Sm,DenseMatrix:Gm,SparseMatrix:uy,addScalar:Vg,config:fr,cos:ey,matrix:ly,multiplyScalar:og,norm:Jb,sin:ny,typed:jm,unaryMinus:Gg}),mx=lm({add:zy,compare:Ty,divide:yb,partitionSelect:ov,typed:jm}),gx=Ni({BigNumber:Sm,Unit:Eb,config:fr}),yx=bi({BigNumber:Sm,Unit:Eb,config:fr}),vx=wi({BigNumber:Sm,Unit:Eb,config:fr}),bx=Yi({BigNumber:Sm,Unit:Eb,config:fr}),xx=is({BigNumber:Sm,Unit:Eb,config:fr}),_x=qi({BigNumber:Sm,Unit:Eb,config:fr}),wx=hm({multiply:Wy,rotationMatrix:dx,typed:jm}),Ex=dm({abs:jy,map:mg,median:mx,subtract:Lv,typed:jm}),Sx=vi({BigNumber:Sm,Unit:Eb,config:fr}),Ax=Ei({BigNumber:Sm,Unit:Eb,config:fr}),Nx=Di({BigNumber:Sm,Unit:Eb,config:fr}),Mx=ym({Unit:Eb,typed:jm}),kx=Hi({BigNumber:Sm,Unit:Eb,config:fr}),Cx=fi({BigNumber:Sm,Unit:Eb,config:fr}),Tx={end:!0},Ox=nn("Node",["mathWithTransform"],(t=>{var{mathWithTransform:e}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.evaluate=function(t){return this.compile().evaluate(t)},r.prototype.type="Node",r.prototype.isNode=!0,r.prototype.comment="",r.prototype.compile=function(){var t=this._compile(e,{}),r={};return{evaluate:function(e){var n=e||{};return function(t){for(var e in t)if(rn(t,e)&&e in Tx)throw new Error('Scope contains an illegal symbol, "'+e+'" is a reserved keyword')}(n),t(n,r,null)}}},r.prototype._compile=function(t,e){throw new Error("Method _compile should be implemented by type "+this.type)},r.prototype.forEach=function(t){throw new Error("Cannot run forEach on a Node interface")},r.prototype.map=function(t){throw new Error("Cannot run map on a Node interface")},r.prototype._ifNode=function(t){if(!jr(t))throw new TypeError("Callback function must return a Node");return t},r.prototype.traverse=function(t){t(this,null,null),function t(e,r){e.forEach((function(e,n,i){r(e,n,i),t(e,r)}))}(this,t)},r.prototype.transform=function(t){return function e(r,n,i){var s=t(r,n,i);return s!==r?s:r.map(e)}(this,null,null)},r.prototype.filter=function(t){var e=[];return this.traverse((function(r,n,i){t(r,n,i)&&e.push(r)})),e},r.prototype.clone=function(){throw new Error("Cannot clone a Node interface")},r.prototype.cloneDeep=function(){return this.map((function(t){return t.cloneDeep()}))},r.prototype.equals=function(t){return!!t&&en(this,t)},r.prototype.toString=function(t){var e=this._getCustomString(t);return void 0!==e?e:this._toString(t)},r.prototype.toJSON=function(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)},r.prototype.toHTML=function(t){var e=this._getCustomString(t);return void 0!==e?e:this.toHTML(t)},r.prototype._toString=function(){throw new Error("_toString not implemented for "+this.type)},r.prototype.toTex=function(t){var e=this._getCustomString(t);return void 0!==e?e:this._toTex(t)},r.prototype._toTex=function(t){throw new Error("_toTex not implemented for "+this.type)},r.prototype._getCustomString=function(t){if(t&&"object"==typeof t)switch(typeof t.handler){case"object":case"undefined":return;case"function":return t.handler(this,t);default:throw new TypeError("Object or function expected as callback")}},r.prototype.getIdentifier=function(){return this.type},r.prototype.getContent=function(){return this},r}),{isClass:!0,isNode:!0}),Ix=nn("ArrayNode",["Node"],(t=>{var{Node:e}=t;function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(this.items=t||[],!Array.isArray(this.items)||!this.items.every(jr))throw new TypeError("Array containing Nodes expected")}return r.prototype=new e,r.prototype.type="ArrayNode",r.prototype.isArrayNode=!0,r.prototype._compile=function(t,e){var r=Ls(this.items,(function(r){return r._compile(t,e)}));if("Array"!==t.config.matrix){var n=t.matrix;return function(t,e,i){return n(Ls(r,(function(r){return r(t,e,i)})))}}return function(t,e,n){return Ls(r,(function(r){return r(t,e,n)}))}},r.prototype.forEach=function(t){for(var e=0;e<this.items.length;e++)t(this.items[e],"items["+e+"]",this)},r.prototype.map=function(t){for(var e=[],n=0;n<this.items.length;n++)e[n]=this._ifNode(t(this.items[n],"items["+n+"]",this));return new r(e)},r.prototype.clone=function(){return new r(this.items.slice(0))},r.prototype._toString=function(t){return"["+this.items.map((function(e){return e.toString(t)})).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ArrayNode",items:this.items}},r.fromJSON=function(t){return new r(t.items)},r.prototype.toHTML=function(t){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map((function(e){return e.toHTML(t)})).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},r.prototype._toTex=function(t){var e="\\begin{bmatrix}";return this.items.forEach((function(r){r.items?e+=r.items.map((function(e){return e.toTex(t)})).join("&"):e+=r.toTex(t),e+="\\\\"})),e+="\\end{bmatrix}"},r}),{isClass:!0,isNode:!0}),Px=nn("BlockNode",["ResultSet","Node"],(t=>{var{ResultSet:e,Node:r}=t;function n(t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(t))throw new Error("Array expected");this.blocks=t.map((function(t){var e=t&&t.node,r=!t||void 0===t.visible||t.visible;if(!jr(e))throw new TypeError('Property "node" must be a Node');if("boolean"!=typeof r)throw new TypeError('Property "visible" must be a boolean');return{node:e,visible:r}}))}return n.prototype=new r,n.prototype.type="BlockNode",n.prototype.isBlockNode=!0,n.prototype._compile=function(t,r){var n=Ls(this.blocks,(function(e){return{evaluate:e.node._compile(t,r),visible:e.visible}}));return function(t,r,i){var s=[];return Ds(n,(function(e){var n=e.evaluate(t,r,i);e.visible&&s.push(n)})),new e(s)}},n.prototype.forEach=function(t){for(var e=0;e<this.blocks.length;e++)t(this.blocks[e].node,"blocks["+e+"].node",this)},n.prototype.map=function(t){for(var e=[],r=0;r<this.blocks.length;r++){var i=this.blocks[r],s=this._ifNode(t(i.node,"blocks["+r+"].node",this));e[r]={node:s,visible:i.visible}}return new n(e)},n.prototype.clone=function(){return new n(this.blocks.map((function(t){return{node:t.node,visible:t.visible}})))},n.prototype._toString=function(t){return this.blocks.map((function(e){return e.node.toString(t)+(e.visible?"":";")})).join("\n")},n.prototype.toJSON=function(){return{mathjs:"BlockNode",blocks:this.blocks}},n.fromJSON=function(t){return new n(t.blocks)},n.prototype.toHTML=function(t){return this.blocks.map((function(e){return e.node.toHTML(t)+(e.visible?"":'<span class="math-separator">;</span>')})).join('<span class="math-separator"><br /></span>')},n.prototype._toTex=function(t){return this.blocks.map((function(e){return e.node.toTex(t)+(e.visible?"":";")})).join("\\;\\;\n")},n}),{isClass:!0,isNode:!0}),Rx=__webpack_require__(43770),Lx={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Dx={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},qx={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Dx.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Dx.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Dx.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Dx.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Dx.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Dx.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Dx.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Dx.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Dx.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Dx.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Dx.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Dx.bitAnd,"${args[1]}\\right)")},bitNot:{1:Dx.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Dx.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Dx.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Dx.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Dx.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Dx.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Dx.and,"${args[1]}\\right)")},not:{1:Dx.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Dx.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Dx.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Dx.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},sqrtm:{1:"{${args[0]}}".concat(Dx.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Dx.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Dx.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Dx.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Dx.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Dx.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Dx.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Dx.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Dx.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Dx.to,"${args[1]}\\right)")},numeric:function(t,e){return t.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(Lx.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Bx={deg:"^\\circ"};function Ux(t){return Rx(t,{preserveFormatting:!0})}function $x(t,e){return(e=void 0!==e&&e)?rn(Bx,t)?Bx[t]:"\\mathrm{"+Ux(t)+"}":rn(Lx,t)?Lx[t]:Ux(t)}var zx=nn("ConstantNode",["Node"],(t=>{var{Node:e}=t;function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.value=t}return r.prototype=new e,r.prototype.type="ConstantNode",r.prototype.isConstantNode=!0,r.prototype._compile=function(t,e){var r=this.value;return function(){return r}},r.prototype.forEach=function(t){},r.prototype.map=function(t){return this.clone()},r.prototype.clone=function(){return new r(this.value)},r.prototype._toString=function(t){return ds(this.value,t)},r.prototype.toHTML=function(t){var e=this._toString(t);switch(Jr(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+e+"</span>";case"string":return'<span class="math-string">'+e+"</span>";case"boolean":return'<span class="math-boolean">'+e+"</span>";case"null":return'<span class="math-null-symbol">'+e+"</span>";case"undefined":return'<span class="math-undefined">'+e+"</span>";default:return'<span class="math-symbol">'+e+"</span>"}},r.prototype.toJSON=function(){return{mathjs:"ConstantNode",value:this.value}},r.fromJSON=function(t){return new r(t.value)},r.prototype._toTex=function(t){var e=this._toString(t);switch(Jr(this.value)){case"string":return"\\mathtt{"+Ux(e)+"}";case"number":case"BigNumber":if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var r=e.toLowerCase().indexOf("e");return-1!==r?e.substring(0,r)+"\\cdot10^{"+e.substring(r+1)+"}":e;case"Fraction":return this.value.toLatex();default:return e}},r}),{isClass:!0,isNode:!0}),Fx=nn("ObjectNode",["Node"],(t=>{var{Node:e}=t;function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(this.properties=t||{},t&&("object"!=typeof t||!Object.keys(t).every((function(e){return jr(t[e])}))))throw new TypeError("Object containing Nodes expected")}return r.prototype=new e,r.prototype.type="ObjectNode",r.prototype.isObjectNode=!0,r.prototype._compile=function(t,e){var r={};for(var n in this.properties)if(rn(this.properties,n)){var i=ms(n),s=JSON.parse(i);if(!Pc(this.properties,s))throw new Error('No access to property "'+s+'"');r[s]=this.properties[n]._compile(t,e)}return function(t,e,n){var i={};for(var s in r)rn(r,s)&&(i[s]=r[s](t,e,n));return i}},r.prototype.forEach=function(t){for(var e in this.properties)rn(this.properties,e)&&t(this.properties[e],"properties["+ms(e)+"]",this)},r.prototype.map=function(t){var e={};for(var n in this.properties)rn(this.properties,n)&&(e[n]=this._ifNode(t(this.properties[n],"properties["+ms(n)+"]",this)));return new r(e)},r.prototype.clone=function(){var t={};for(var e in this.properties)rn(this.properties,e)&&(t[e]=this.properties[e]);return new r(t)},r.prototype._toString=function(t){var e=[];for(var r in this.properties)rn(this.properties,r)&&e.push(ms(r)+": "+this.properties[r].toString(t));return"{"+e.join(", ")+"}"},r.prototype.toJSON=function(){return{mathjs:"ObjectNode",properties:this.properties}},r.fromJSON=function(t){return new r(t.properties)},r.prototype.toHTML=function(t){var e=[];for(var r in this.properties)rn(this.properties,r)&&e.push('<span class="math-symbol math-property">'+gs(r)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[r].toHTML(t));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'},r.prototype._toTex=function(t){var e=[];for(var r in this.properties)rn(this.properties,r)&&e.push("\\mathbf{"+r+":} & "+this.properties[r].toTex(t)+"\\\\");return"\\left\\{\\begin{array}{ll}".concat(e.join("\n"),"\\end{array}\\right\\}")},r}),{isClass:!0,isNode:!0}),Gx=nn("ParenthesisNode",["Node"],(t=>{var{Node:e}=t;function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!jr(t))throw new TypeError('Node expected for parameter "content"');this.content=t}return r.prototype=new e,r.prototype.type="ParenthesisNode",r.prototype.isParenthesisNode=!0,r.prototype._compile=function(t,e){return this.content._compile(t,e)},r.prototype.getContent=function(){return this.content.getContent()},r.prototype.forEach=function(t){t(this.content,"content",this)},r.prototype.map=function(t){return new r(t(this.content,"content",this))},r.prototype.clone=function(){return new r(this.content)},r.prototype._toString=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?"("+this.content.toString(t)+")":this.content.toString(t)},r.prototype.toJSON=function(){return{mathjs:"ParenthesisNode",content:this.content}},r.fromJSON=function(t){return new r(t.content)},r.prototype.toHTML=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(t)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(t)},r.prototype._toTex=function(t){return!t||t&&!t.parenthesis||t&&"keep"===t.parenthesis?"\\left(".concat(this.content.toTex(t),"\\right)"):this.content.toTex(t)},r}),{isClass:!0,isNode:!0}),Vx=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{associativity:"left",associativeWith:[]}},{"OperatorNode:and":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{associativity:"left",associativeWith:[]},"OperatorNode:unequal":{associativity:"left",associativeWith:[]},"OperatorNode:smaller":{associativity:"left",associativeWith:[]},"OperatorNode:larger":{associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{associativity:"left",associativeWith:[]}},{"OperatorNode:to":{associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{associativity:"left",associativeWith:[]},"OperatorNode:mod":{associativity:"left",associativeWith:[]}},{"OperatorNode:unaryPlus":{associativity:"right"},"OperatorNode:unaryMinus":{associativity:"right"},"OperatorNode:bitNot":{associativity:"right"},"OperatorNode:not":{associativity:"right"}},{"OperatorNode:pow":{associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{associativity:"left"}},{"OperatorNode:transpose":{associativity:"left"}}];function jx(t,e){var r=t;"keep"!==e&&(r=t.getContent());for(var n=r.getIdentifier(),i=0;i<Vx.length;i++)if(n in Vx[i])return i;return null}function Hx(t,e){var r=t;"keep"!==e&&(r=t.getContent());var n=r.getIdentifier(),i=jx(r,e);if(null===i)return null;var s=Vx[i][n];if(rn(s,"associativity")){if("left"===s.associativity)return"left";if("right"===s.associativity)return"right";throw Error("'"+n+"' has the invalid associativity '"+s.associativity+"'.")}return null}function Wx(t,e,r){var n="keep"!==r?t.getContent():t,i="keep"!==r?t.getContent():e,s=n.getIdentifier(),o=i.getIdentifier(),a=jx(n,r);if(null===a)return null;var u=Vx[a][s];if(rn(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===o)return!0;return!1}return null}var Yx=nn("RelationalNode",["Node"],(t=>{var{Node:e}=t;function r(t,e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!Array.isArray(t))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(e))throw new TypeError("Parameter params must be an array");if(t.length!==e.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=t,this.params=e}return r.prototype=new e,r.prototype.type="RelationalNode",r.prototype.isRelationalNode=!0,r.prototype._compile=function(t,e){var r=this,n=this.params.map((r=>r._compile(t,e)));return function(e,i,s){for(var o,a=n[0](e,i,s),u=0;u<r.conditionals.length;u++)if(o=a,a=n[u+1](e,i,s),!Oc(t,r.conditionals[u])(o,a))return!1;return!0}},r.prototype.forEach=function(t){this.params.forEach(((e,r)=>t(e,"params["+r+"]",this)),this)},r.prototype.map=function(t){return new r(this.conditionals.slice(),this.params.map(((e,r)=>this._ifNode(t(e,"params["+r+"]",this))),this))},r.prototype.clone=function(){return new r(this.conditionals,this.params)},r.prototype._toString=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",r=jx(this,e),n=this.params.map((function(n,i){var s=jx(n,e);return"all"===e||null!==s&&s<=r?"("+n.toString(t)+")":n.toString(t)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},s=n[0],o=0;o<this.conditionals.length;o++)s+=" "+i[this.conditionals[o]]+" "+n[o+1];return s},r.prototype.toJSON=function(){return{mathjs:"RelationalNode",conditionals:this.conditionals,params:this.params}},r.fromJSON=function(t){return new r(t.conditionals,t.params)},r.prototype.toHTML=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",r=jx(this,e),n=this.params.map((function(n,i){var s=jx(n,e);return"all"===e||null!==s&&s<=r?'<span class="math-parenthesis math-round-parenthesis">(</span>'+n.toHTML(t)+'<span class="math-parenthesis math-round-parenthesis">)</span>':n.toHTML(t)})),i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="},s=n[0],o=0;o<this.conditionals.length;o++)s+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+gs(i[this.conditionals[o]])+"</span>"+n[o+1];return s},r.prototype._toTex=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",r=jx(this,e),n=this.params.map((function(n,i){var s=jx(n,e);return"all"===e||null!==s&&s<=r?"\\left("+n.toTex(t)+"\right)":n.toTex(t)})),i=n[0],s=0;s<this.conditionals.length;s++)i+=Dx[this.conditionals[s]]+n[s+1];return i},r}),{isClass:!0,isNode:!0}),Xx=nn("Chain",["?on","math"],(t=>{var{on:e,math:r}=t;function n(t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Kr(t)?this.value=t.value:this.value=t}function i(t,e){var r,i,o,a,u;r=n.prototype,i=t,o=function(){var t=e();if("function"==typeof t)return s(t)},u=!0,Object.defineProperty(r,i,{get:function(){return u&&(a=o(),u=!1),a},set:function(t){a=t,u=!1},configurable:!0,enumerable:!0})}function s(t){return function(){for(var e=[this.value],r=0;r<arguments.length;r++)e[r+1]=arguments[r];return new n(t.apply(t,e))}}n.prototype.type="Chain",n.prototype.isChain=!0,n.prototype.done=function(){return this.value},n.prototype.valueOf=function(){return this.value},n.prototype.toString=function(){return ds(this.value)},n.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},n.fromJSON=function(t){return new n(t.value)},n.createProxy=function(t,e){if("string"==typeof t)u=t,"function"==typeof(l=e)&&(n.prototype[u]=s(l));else{var r=function(e){rn(t,e)&&void 0===o[e]&&i(e,(()=>t[e]))};for(var a in t)r(a)}var u,l};var o={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return n.createProxy(r),e&&e("import",(function(t,e,r){r||i(t,e)})),n}),{isClass:!0}),Zx=nn("reviver",["classes"],(t=>{var{classes:e}=t;return function(t,r){var n=e[r&&r.mathjs];return n&&"function"==typeof n.fromJSON?n.fromJSON(r):r}})),Kx=nn("ConditionalNode",["Node"],(t=>{var{Node:e}=t;function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!jr(t))throw new TypeError("Parameter condition must be a Node");if(!jr(e))throw new TypeError("Parameter trueExpr must be a Node");if(!jr(n))throw new TypeError("Parameter falseExpr must be a Node");this.condition=t,this.trueExpr=e,this.falseExpr=n}return r.prototype=new e,r.prototype.type="ConditionalNode",r.prototype.isConditionalNode=!0,r.prototype._compile=function(t,e){var r=this.condition._compile(t,e),n=this.trueExpr._compile(t,e),i=this.falseExpr._compile(t,e);return function(t,e,s){return function(t){if("number"==typeof t||"boolean"==typeof t||"string"==typeof t)return!!t;if(t){if(mr(t))return!t.isZero();if(gr(t))return!(!t.re&&!t.im);if(vr(t))return!!t.value}if(null==t)return!1;throw new TypeError('Unsupported type of condition "'+Jr(t)+'"')}(r(t,e,s))?n(t,e,s):i(t,e,s)}},r.prototype.forEach=function(t){t(this.condition,"condition",this),t(this.trueExpr,"trueExpr",this),t(this.falseExpr,"falseExpr",this)},r.prototype.map=function(t){return new r(this._ifNode(t(this.condition,"condition",this)),this._ifNode(t(this.trueExpr,"trueExpr",this)),this._ifNode(t(this.falseExpr,"falseExpr",this)))},r.prototype.clone=function(){return new r(this.condition,this.trueExpr,this.falseExpr)},r.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",r=jx(this,e),n=this.condition.toString(t),i=jx(this.condition,e);("all"===e||"OperatorNode"===this.condition.type||null!==i&&i<=r)&&(n="("+n+")");var s=this.trueExpr.toString(t),o=jx(this.trueExpr,e);("all"===e||"OperatorNode"===this.trueExpr.type||null!==o&&o<=r)&&(s="("+s+")");var a=this.falseExpr.toString(t),u=jx(this.falseExpr,e);return("all"===e||"OperatorNode"===this.falseExpr.type||null!==u&&u<=r)&&(a="("+a+")"),n+" ? "+s+" : "+a},r.prototype.toJSON=function(){return{mathjs:"ConditionalNode",condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}},r.fromJSON=function(t){return new r(t.condition,t.trueExpr,t.falseExpr)},r.prototype.toHTML=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",r=jx(this,e),n=this.condition.toHTML(t),i=jx(this.condition,e);("all"===e||"OperatorNode"===this.condition.type||null!==i&&i<=r)&&(n='<span class="math-parenthesis math-round-parenthesis">(</span>'+n+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.trueExpr.toHTML(t),o=jx(this.trueExpr,e);("all"===e||"OperatorNode"===this.trueExpr.type||null!==o&&o<=r)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.falseExpr.toHTML(t),u=jx(this.falseExpr,e);return("all"===e||"OperatorNode"===this.falseExpr.type||null!==u&&u<=r)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),n+'<span class="math-operator math-conditional-operator">?</span>'+s+'<span class="math-operator math-conditional-operator">:</span>'+a},r.prototype._toTex=function(t){return"\\begin{cases} {"+this.trueExpr.toTex(t)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(t)+"}\\\\{"+this.falseExpr.toTex(t)+"}, &\\quad{\\text{otherwise}}\\end{cases}"},r}),{isClass:!0,isNode:!0}),Jx=nn("OperatorNode",["Node"],(t=>{var{Node:e}=t;function r(t,e,n,i){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof t)throw new TypeError('string expected for parameter "op"');if("string"!=typeof e)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(n)||!n.every(jr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===i,this.op=t,this.fn=e,this.args=n||[]}function n(t,e,r,n,i){var s,o=jx(t,e),a=Hx(t,e);if("all"===e||n.length>2&&"OperatorNode:add"!==t.getIdentifier()&&"OperatorNode:multiply"!==t.getIdentifier())return n.map((function(t){switch(t.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}));switch(n.length){case 0:s=[];break;case 1:var u=jx(n[0],e);if(i&&null!==u){var l,c;if("keep"===e?(l=n[0].getIdentifier(),c=t.getIdentifier()):(l=n[0].getContent().getIdentifier(),c=t.getContent().getIdentifier()),!1===Vx[o][c].latexLeftParens){s=[!1];break}if(!1===Vx[u][l].latexParens){s=[!1];break}}if(null===u){s=[!1];break}if(u<=o){s=[!0];break}s=[!1];break;case 2:var p,h,f=jx(n[0],e),d=Wx(t,n[0],e);p=null!==f&&(f===o&&"right"===a&&!d||f<o);var m,g,y,v=jx(n[1],e),b=Wx(t,n[1],e);h=null!==v&&(v===o&&"left"===a&&!b||v<o),i&&("keep"===e?(m=t.getIdentifier(),g=t.args[0].getIdentifier(),y=t.args[1].getIdentifier()):(m=t.getContent().getIdentifier(),g=t.args[0].getContent().getIdentifier(),y=t.args[1].getContent().getIdentifier()),null!==f&&(!1===Vx[o][m].latexLeftParens&&(p=!1),!1===Vx[f][g].latexParens&&(p=!1)),null!==v&&(!1===Vx[o][m].latexRightParens&&(h=!1),!1===Vx[v][y].latexParens&&(h=!1))),s=[p,h];break;default:"OperatorNode:add"!==t.getIdentifier()&&"OperatorNode:multiply"!==t.getIdentifier()||(s=n.map((function(r){var n=jx(r,e),i=Wx(t,r,e),s=Hx(r,e);return null!==n&&(o===n&&a===s&&!i||n<o)})))}return n.length>=2&&"OperatorNode:multiply"===t.getIdentifier()&&t.implicit&&"auto"===e&&"hide"===r&&(s=n.map((function(t,e){var r="ParenthesisNode"===t.getIdentifier();return!(!s[e]&&!r)}))),s}return r.prototype=new e,r.prototype.type="OperatorNode",r.prototype.isOperatorNode=!0,r.prototype._compile=function(t,e){if("string"!=typeof this.fn||!Rc(t,this.fn))throw t[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var r=Oc(t,this.fn),n=Ls(this.args,(function(r){return r._compile(t,e)}));if(1===n.length){var i=n[0];return function(t,e,n){return r(i(t,e,n))}}if(2===n.length){var s=n[0],o=n[1];return function(t,e,n){return r(s(t,e,n),o(t,e,n))}}return function(t,e,i){return r.apply(null,Ls(n,(function(r){return r(t,e,i)})))}},r.prototype.forEach=function(t){for(var e=0;e<this.args.length;e++)t(this.args[e],"args["+e+"]",this)},r.prototype.map=function(t){for(var e=[],n=0;n<this.args.length;n++)e[n]=this._ifNode(t(this.args[n],"args["+n+"]",this));return new r(this.op,this.fn,e,this.implicit)},r.prototype.clone=function(){return new r(this.op,this.fn,this.args.slice(0),this.implicit)},r.prototype.isUnary=function(){return 1===this.args.length},r.prototype.isBinary=function(){return 2===this.args.length},r.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",r=t&&t.implicit?t.implicit:"hide",i=this.args,s=n(this,e,r,i,!1);if(1===i.length){var o=Hx(this,e),a=i[0].toString(t);s[0]&&(a="("+a+")");var u=/[a-zA-Z]+/.test(this.op);return"right"===o?this.op+(u?" ":"")+a:"left"===o?a+(u?" ":"")+this.op:a+this.op}if(2===i.length){var l=i[0].toString(t),c=i[1].toString(t);return s[0]&&(l="("+l+")"),s[1]&&(c="("+c+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?l+" "+c:l+" "+this.op+" "+c}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var p=i.map((function(e,r){return e=e.toString(t),s[r]&&(e="("+e+")"),e}));return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?p.join(" "):p.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"},r.prototype.toJSON=function(){return{mathjs:"OperatorNode",op:this.op,fn:this.fn,args:this.args,implicit:this.implicit}},r.fromJSON=function(t){return new r(t.op,t.fn,t.args,t.implicit)},r.prototype.toHTML=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",r=t&&t.implicit?t.implicit:"hide",i=this.args,s=n(this,e,r,i,!1);if(1===i.length){var o=Hx(this,e),a=i[0].toHTML(t);return s[0]&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===o?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+gs(this.op)+"</span>"+a:a+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+gs(this.op)+"</span>"}if(2===i.length){var u=i[0].toHTML(t),l=i[1].toHTML(t);return s[0]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s[1]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?u+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+l:u+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+gs(this.op)+"</span>"+l}var c=i.map((function(e,r){return e=e.toHTML(t),s[r]&&(e='<span class="math-parenthesis math-round-parenthesis">(</span>'+e+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e}));return i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===r?c.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):c.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+gs(this.op)+"</span>"):'<span class="math-function">'+gs(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'},r.prototype._toTex=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",r=t&&t.implicit?t.implicit:"hide",i=this.args,s=n(this,e,r,i,!0),o=Dx[this.fn];if(o=void 0===o?this.op:o,1===i.length){var a=Hx(this,e),u=i[0].toTex(t);return s[0]&&(u="\\left(".concat(u,"\\right)")),"right"===a?o+u:u+o}if(2===i.length){var l=i[0],c=l.toTex(t);s[0]&&(c="\\left(".concat(c,"\\right)"));var p,h=i[1].toTex(t);switch(s[1]&&(h="\\left(".concat(h,"\\right)")),p="keep"===e?l.getIdentifier():l.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return o+"{"+c+"}{"+h+"}";case"OperatorNode:pow":switch(c="{"+c+"}",h="{"+h+"}",p){case"ConditionalNode":case"OperatorNode:divide":c="\\left(".concat(c,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===r)return c+"~"+h}return c+o+h}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var f=i.map((function(e,r){return e=e.toTex(t),s[r]&&(e="\\left(".concat(e,"\\right)")),e}));return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit?f.join("~"):f.join(o)}return"\\mathrm{"+this.fn+"}\\left("+i.map((function(e){return e.toTex(t)})).join(",")+"\\right)"},r.prototype.getIdentifier=function(){return this.type+":"+this.fn},r}),{isClass:!0,isNode:!0}),Qx=nn("RangeNode",["Node"],(t=>{var{Node:e}=t;function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!jr(t))throw new TypeError("Node expected");if(!jr(e))throw new TypeError("Node expected");if(n&&!jr(n))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=t,this.end=e,this.step=n||null}function n(t,e){var r=jx(t,e),n={},i=jx(t.start,e);if(n.start=null!==i&&i<=r||"all"===e,t.step){var s=jx(t.step,e);n.step=null!==s&&s<=r||"all"===e}var o=jx(t.end,e);return n.end=null!==o&&o<=r||"all"===e,n}return r.prototype=new e,r.prototype.type="RangeNode",r.prototype.isRangeNode=!0,r.prototype.needsEnd=function(){return this.filter((function(t){return Zr(t)&&"end"===t.name})).length>0},r.prototype._compile=function(t,e){var r=t.range,n=this.start._compile(t,e),i=this.end._compile(t,e);if(this.step){var s=this.step._compile(t,e);return function(t,e,o){return r(n(t,e,o),i(t,e,o),s(t,e,o))}}return function(t,e,s){return r(n(t,e,s),i(t,e,s))}},r.prototype.forEach=function(t){t(this.start,"start",this),t(this.end,"end",this),this.step&&t(this.step,"step",this)},r.prototype.map=function(t){return new r(this._ifNode(t(this.start,"start",this)),this._ifNode(t(this.end,"end",this)),this.step&&this._ifNode(t(this.step,"step",this)))},r.prototype.clone=function(){return new r(this.start,this.end,this.step&&this.step)},r.prototype._toString=function(t){var e,r=n(this,t&&t.parenthesis?t.parenthesis:"keep"),i=this.start.toString(t);if(r.start&&(i="("+i+")"),e=i,this.step){var s=this.step.toString(t);r.step&&(s="("+s+")"),e+=":"+s}var o=this.end.toString(t);return r.end&&(o="("+o+")"),e+":"+o},r.prototype.toJSON=function(){return{mathjs:"RangeNode",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(t){return new r(t.start,t.end,t.step)},r.prototype.toHTML=function(t){var e,r=n(this,t&&t.parenthesis?t.parenthesis:"keep"),i=this.start.toHTML(t);if(r.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e=i,this.step){var s=this.step.toHTML(t);r.step&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+='<span class="math-operator math-range-operator">:</span>'+s}var o=this.end.toHTML(t);return r.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+'<span class="math-operator math-range-operator">:</span>'+o},r.prototype._toTex=function(t){var e=n(this,t&&t.parenthesis?t.parenthesis:"keep"),r=this.start.toTex(t);if(e.start&&(r="\\left(".concat(r,"\\right)")),this.step){var i=this.step.toTex(t);e.step&&(i="\\left(".concat(i,"\\right)")),r+=":"+i}var s=this.end.toTex(t);return e.end&&(s="\\left(".concat(s,"\\right)")),r+":"+s},r}),{isClass:!0,isNode:!0}),t_=nn("FunctionAssignmentNode",["typed","Node"],(t=>{var{typed:e,Node:r}=t;function n(t,e,r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof t)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(e))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!jr(r))throw new TypeError('Node expected for parameter "expr"');if(t in Tx)throw new Error('Illegal function name, "'+t+'" is a reserved keyword');this.name=t,this.params=e.map((function(t){return t&&t.name||t})),this.types=e.map((function(t){return t&&t.type||"any"})),this.expr=r}function i(t,e){var r=jx(t,e),n=jx(t.expr,e);return"all"===e||null!==n&&n<=r}return n.prototype=new r,n.prototype.type="FunctionAssignmentNode",n.prototype.isFunctionAssignmentNode=!0,n.prototype._compile=function(t,r){var n=Object.create(r);Ds(this.params,(function(t){n[t]=!0}));var i=this.expr._compile(t,n),s=this.name,o=this.params,a=Us(this.types,","),u=s+"("+Us(this.params,", ")+")";return function(t,r,n){var l={};l[a]=function(){for(var e=Object.create(r),s=0;s<o.length;s++)e[o[s]]=arguments[s];return i(t,e,n)};var c=e(s,l);return c.syntax=u,Ic(t,s,c),c}},n.prototype.forEach=function(t){t(this.expr,"expr",this)},n.prototype.map=function(t){var e=this._ifNode(t(this.expr,"expr",this));return new n(this.name,this.params.slice(0),e)},n.prototype.clone=function(){return new n(this.name,this.params.slice(0),this.expr)},n.prototype._toString=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",r=this.expr.toString(t);return i(this,e)&&(r="("+r+")"),this.name+"("+this.params.join(", ")+") = "+r},n.prototype.toJSON=function(){var t=this.types;return{mathjs:"FunctionAssignmentNode",name:this.name,params:this.params.map((function(e,r){return{name:e,type:t[r]}})),expr:this.expr}},n.fromJSON=function(t){return new n(t.name,t.params,t.expr)},n.prototype.toHTML=function(t){for(var e=t&&t.parenthesis?t.parenthesis:"keep",r=[],n=0;n<this.params.length;n++)r.push('<span class="math-symbol math-parameter">'+gs(this.params[n])+"</span>");var s=this.expr.toHTML(t);return i(this,e)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+gs(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+r.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+s},n.prototype._toTex=function(t){var e=t&&t.parenthesis?t.parenthesis:"keep",r=this.expr.toTex(t);return i(this,e)&&(r="\\left(".concat(r,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map($x).join(",")+"\\right):="+r},n}),{isClass:!0,isNode:!0}),e_="chain",r_=nn(e_,["typed","Chain"],(t=>{var{typed:e,Chain:r}=t;return e(e_,{"":function(){return new r},any:function(t){return new r(t)}})}));function n_(t){return t&&t.isIndexError?new xs(t.index+1,t.min+1,void 0!==t.max?t.max+1:void 0):t}function i_(t){var{subset:e}=t;return function(t,r){try{if(Array.isArray(t))return e(t,r);if(t&&"function"==typeof t.subset)return t.subset(r);if("string"==typeof t)return e(t,r);if("object"==typeof t){if(!r.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Oc(t,r.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(t){throw n_(t)}}}var s_=nn("AccessorNode",["subset","Node"],(t=>{var{subset:e,Node:r}=t,n=i_({subset:e});function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!jr(t))throw new TypeError('Node expected for parameter "object"');if(!Vr(e))throw new TypeError('IndexNode expected for parameter "index"');this.object=t||null,this.index=e,Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function s(t){return!(Dr(t)||qr(t)||zr(t)||Gr(t)||Hr(t)||Yr(t)||Zr(t))}return i.prototype=new r,i.prototype.type="AccessorNode",i.prototype.isAccessorNode=!0,i.prototype._compile=function(t,e){var r=this.object._compile(t,e),i=this.index._compile(t,e);if(this.index.isObjectProperty()){var s=this.index.getObjectProperty();return function(t,e,n){return Oc(r(t,e,n),s)}}return function(t,e,s){var o=r(t,e,s),a=i(t,e,o);return n(o,a)}},i.prototype.forEach=function(t){t(this.object,"object",this),t(this.index,"index",this)},i.prototype.map=function(t){return new i(this._ifNode(t(this.object,"object",this)),this._ifNode(t(this.index,"index",this)))},i.prototype.clone=function(){return new i(this.object,this.index)},i.prototype._toString=function(t){var e=this.object.toString(t);return s(this.object)&&(e="("+e+")"),e+this.index.toString(t)},i.prototype.toHTML=function(t){var e=this.object.toHTML(t);return s(this.object)&&(e='<span class="math-parenthesis math-round-parenthesis">(</span>'+e+'<span class="math-parenthesis math-round-parenthesis">)</span>'),e+this.index.toHTML(t)},i.prototype._toTex=function(t){var e=this.object.toTex(t);return s(this.object)&&(e="\\left(' + object + '\\right)"),e+this.index.toTex(t)},i.prototype.toJSON=function(){return{mathjs:"AccessorNode",object:this.object,index:this.index}},i.fromJSON=function(t){return new i(t.object,t.index)},i}),{isClass:!0,isNode:!0}),o_=nn("IndexNode",["Range","Node","size"],(t=>{var{Range:e,Node:r,size:n}=t;function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(this.dimensions=t,this.dotNotation=e||!1,!Array.isArray(t)||!t.every(jr))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}function s(t,r,n){return new e(mr(t)?t.toNumber():t,mr(r)?r.toNumber():r,mr(n)?n.toNumber():n)}return i.prototype=new r,i.prototype.type="IndexNode",i.prototype.isIndexNode=!0,i.prototype._compile=function(t,e){var r=Ls(this.dimensions,(function(r,i){if(Xr(r)){if(r.needsEnd()){var o=Object.create(e);o.end=!0;var a=r.start._compile(t,o),u=r.end._compile(t,o),l=r.step?r.step._compile(t,o):function(){return 1};return function(t,e,r){var o=n(r).valueOf(),c=Object.create(e);return c.end=o[i],s(a(t,c,r),u(t,c,r),l(t,c,r))}}var c=r.start._compile(t,e),p=r.end._compile(t,e),h=r.step?r.step._compile(t,e):function(){return 1};return function(t,e,r){return s(c(t,e,r),p(t,e,r),h(t,e,r))}}if(Zr(r)&&"end"===r.name){var f=Object.create(e);f.end=!0;var d=r._compile(t,f);return function(t,e,r){var s=n(r).valueOf(),o=Object.create(e);return o.end=s[i],d(t,o,r)}}var m=r._compile(t,e);return function(t,e,r){return m(t,e,r)}})),i=Oc(t,"index");return function(t,e,n){var s=Ls(r,(function(r){return r(t,e,n)}));return i(...s)}},i.prototype.forEach=function(t){for(var e=0;e<this.dimensions.length;e++)t(this.dimensions[e],"dimensions["+e+"]",this)},i.prototype.map=function(t){for(var e=[],r=0;r<this.dimensions.length;r++)e[r]=this._ifNode(t(this.dimensions[r],"dimensions["+r+"]",this));return new i(e,this.dotNotation)},i.prototype.clone=function(){return new i(this.dimensions.slice(0),this.dotNotation)},i.prototype.isObjectProperty=function(){return 1===this.dimensions.length&&zr(this.dimensions[0])&&"string"==typeof this.dimensions[0].value},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this.dimensions[0].value:null},i.prototype._toString=function(t){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"IndexNode",dimensions:this.dimensions,dotNotation:this.dotNotation}},i.fromJSON=function(t){return new i(t.dimensions,t.dotNotation)},i.prototype.toHTML=function(t){for(var e=[],r=0;r<this.dimensions.length;r++)e[r]=this.dimensions[r].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+gs(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'},i.prototype._toTex=function(t){var e=this.dimensions.map((function(e){return e.toTex(t)}));return this.dotNotation?"."+this.getObjectProperty():"_{"+e.join(",")+"}"},i}),{isClass:!0,isNode:!0}),a_=nn("AssignmentNode",["subset","?matrix","Node"],(t=>{var{subset:e,matrix:r,Node:n}=t,i=i_({subset:e}),s=function(t){var{subset:e,matrix:r}=t;return function(t,n,i){try{if(Array.isArray(t))return r(t).subset(n,i).valueOf();if(t&&"function"==typeof t.subset)return t.subset(n,i);if("string"==typeof t)return e(t,n,i);if("object"==typeof t){if(!n.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Ic(t,n.getObjectProperty(),i),t}throw new TypeError("Cannot apply index: unsupported type of object")}catch(t){throw n_(t)}}}({subset:e,matrix:r});function o(t,e,r){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");if(this.object=t,this.index=r?e:null,this.value=r||e,!Zr(t)&&!Dr(t))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Zr(t)&&"end"===t.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!Vr(this.index))throw new TypeError('IndexNode expected as "index"');if(!jr(this.value))throw new TypeError('Node expected as "value"');Object.defineProperty(this,"name",{get:function(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}function a(t,e){e||(e="keep");var r=jx(t,e),n=jx(t.value,e);return"all"===e||null!==n&&n<=r}return o.prototype=new n,o.prototype.type="AssignmentNode",o.prototype.isAssignmentNode=!0,o.prototype._compile=function(t,e){var r=this.object._compile(t,e),n=this.index?this.index._compile(t,e):null,o=this.value._compile(t,e),a=this.object.name;if(this.index){if(this.index.isObjectProperty()){var u=this.index.getObjectProperty();return function(t,e,n){var i=r(t,e,n),s=o(t,e,n);return Ic(i,u,s)}}if(Zr(this.object))return function(t,e,i){var u=r(t,e,i),l=o(t,e,i),c=n(t,e,u);return Ic(t,a,s(u,c,l)),l};var l=this.object.object._compile(t,e);if(this.object.index.isObjectProperty()){var c=this.object.index.getObjectProperty();return function(t,e,r){var i=l(t,e,r),a=Oc(i,c),u=n(t,e,a),p=o(t,e,r);return Ic(i,c,s(a,u,p)),p}}var p=this.object.index._compile(t,e);return function(t,e,r){var a=l(t,e,r),u=p(t,e,a),c=i(a,u),h=n(t,e,c),f=o(t,e,r);return s(a,u,s(c,h,f)),f}}if(!Zr(this.object))throw new TypeError("SymbolNode expected as object");return function(t,e,r){return Ic(t,a,o(t,e,r))}},o.prototype.forEach=function(t){t(this.object,"object",this),this.index&&t(this.index,"index",this),t(this.value,"value",this)},o.prototype.map=function(t){return new o(this._ifNode(t(this.object,"object",this)),this.index?this._ifNode(t(this.index,"index",this)):null,this._ifNode(t(this.value,"value",this)))},o.prototype.clone=function(){return new o(this.object,this.index,this.value)},o.prototype._toString=function(t){var e=this.object.toString(t),r=this.index?this.index.toString(t):"",n=this.value.toString(t);return a(this,t&&t.parenthesis)&&(n="("+n+")"),e+r+" = "+n},o.prototype.toJSON=function(){return{mathjs:"AssignmentNode",object:this.object,index:this.index,value:this.value}},o.fromJSON=function(t){return new o(t.object,t.index,t.value)},o.prototype.toHTML=function(t){var e=this.object.toHTML(t),r=this.index?this.index.toHTML(t):"",n=this.value.toHTML(t);return a(this,t&&t.parenthesis)&&(n='<span class="math-paranthesis math-round-parenthesis">(</span>'+n+'<span class="math-paranthesis math-round-parenthesis">)</span>'),e+r+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+n},o.prototype._toTex=function(t){var e=this.object.toTex(t),r=this.index?this.index.toTex(t):"",n=this.value.toTex(t);return a(this,t&&t.parenthesis)&&(n="\\left(".concat(n,"\\right)")),e+r+":="+n},o}),{isClass:!0,isNode:!0}),u_=nn("SymbolNode",["math","?Unit","Node"],(t=>{var{math:e,Unit:r,Node:n}=t;function i(t){return!!r&&r.isValuelessUnit(t)}function s(t){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if("string"!=typeof t)throw new TypeError('String expected for parameter "name"');this.name=t}return s.prototype=new n,s.prototype.type="SymbolNode",s.prototype.isSymbolNode=!0,s.prototype._compile=function(t,e){var n=this.name;if(!0===e[n])return function(t,e,r){return e[n]};if(n in t)return function(e,r,i){return Oc(n in e?e:t,n)};var o=i(n);return function(t,e,i){return n in t?Oc(t,n):o?new r(null,n):s.onUndefinedSymbol(n)}},s.prototype.forEach=function(t){},s.prototype.map=function(t){return this.clone()},s.onUndefinedSymbol=function(t){throw new Error("Undefined symbol "+t)},s.prototype.clone=function(){return new s(this.name)},s.prototype._toString=function(t){return this.name},s.prototype.toHTML=function(t){var e=gs(this.name);return"true"===e||"false"===e?'<span class="math-symbol math-boolean">'+e+"</span>":"i"===e?'<span class="math-symbol math-imaginary-symbol">'+e+"</span>":"Infinity"===e?'<span class="math-symbol math-infinity-symbol">'+e+"</span>":"NaN"===e?'<span class="math-symbol math-nan-symbol">'+e+"</span>":"null"===e?'<span class="math-symbol math-null-symbol">'+e+"</span>":"undefined"===e?'<span class="math-symbol math-undefined-symbol">'+e+"</span>":'<span class="math-symbol">'+e+"</span>"},s.prototype.toJSON=function(){return{mathjs:"SymbolNode",name:this.name}},s.fromJSON=function(t){return new s(t.name)},s.prototype._toTex=function(t){var r=!1;void 0===e[this.name]&&i(this.name)&&(r=!0);var n=$x(this.name,r);return"\\"===n[0]?n:" "+n},s}),{isClass:!0,isNode:!0});function l_(){return(l_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var c_=nn("FunctionNode",["math","Node","SymbolNode"],(t=>{var{math:e,Node:r,SymbolNode:n}=t;function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("string"==typeof t&&(t=new n(t)),!jr(t))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(e)||!e.every(jr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=t,this.args=e||[],Object.defineProperty(this,"name",{get:function(){return this.fn.name||""}.bind(this),set:function(){throw new Error("Cannot assign a new name, name is read-only")}})}i.prototype=new r,i.prototype.type="FunctionNode",i.prototype.isFunctionNode=!0,i.prototype._compile=function(t,e){if(!(this instanceof i))throw new TypeError("No valid FunctionNode");var r=Ls(this.args,(function(r){return r._compile(t,e)}));if(Zr(this.fn)){var n=this.fn.name,s=n in t?Oc(t,n):void 0;function o(e){return n in e?Oc(e,n):n in t?Oc(t,n):i.onUndefinedFunction(n)}if("function"==typeof s&&!0===s.rawArgs){var a=this.args;return function(e,r,n){return o(e)(a,t,l_({},e,r))}}if(1===r.length){var u=r[0];return function(t,e,r){return o(t)(u(t,e,r))}}if(2===r.length){var l=r[0],c=r[1];return function(t,e,r){return o(t)(l(t,e,r),c(t,e,r))}}return function(t,e,n){return o(t).apply(null,Ls(r,(function(r){return r(t,e,n)})))}}if(Dr(this.fn)&&Vr(this.fn.index)&&this.fn.index.isObjectProperty()){var p=this.fn.object._compile(t,e),h=this.fn.index.getObjectProperty(),f=this.args;return function(e,n,i){var s=p(e,n,i);return function(t,e){if(!Rc(t,e))throw new Error('No access to method "'+e+'"')}(s,h),s[h]&&s[h].rawArgs?s[h](f,t,l_({},e,n)):s[h].apply(s,Ls(r,(function(t){return t(e,n,i)})))}}var d=this.fn._compile(t,e),m=this.args;return function(e,n,i){var s=d(e,n,i);return s&&s.rawArgs?s(m,t,l_({},e,n)):s.apply(s,Ls(r,(function(t){return t(e,n,i)})))}},i.prototype.forEach=function(t){t(this.fn,"fn",this);for(var e=0;e<this.args.length;e++)t(this.args[e],"args["+e+"]",this)},i.prototype.map=function(t){for(var e=this._ifNode(t(this.fn,"fn",this)),r=[],n=0;n<this.args.length;n++)r[n]=this._ifNode(t(this.args[n],"args["+n+"]",this));return new i(e,r)},i.prototype.clone=function(){return new i(this.fn,this.args.slice(0))},i.onUndefinedFunction=function(t){throw new Error("Undefined function "+t)};var s=i.prototype.toString;function o(t,e,r){for(var n,i="",s=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,o=0;null!==(n=s.exec(t));)if(i+=t.substring(o,n.index),o=n.index,"$$"===n[0])i+="$",o++;else{o+=n[0].length;var a=e[n[1]];if(!a)throw new ReferenceError("Template: Property "+n[1]+" does not exist.");if(void 0===n[2])switch(typeof a){case"string":i+=a;break;case"object":if(jr(a))i+=a.toTex(r);else{if(!Array.isArray(a))throw new TypeError("Template: "+n[1]+" has to be a Node, String or array of Nodes");i+=a.map((function(t,e){if(jr(t))return t.toTex(r);throw new TypeError("Template: "+n[1]+"["+e+"] is not a Node.")})).join(",")}break;default:throw new TypeError("Template: "+n[1]+" has to be a Node, String or array of Nodes")}else{if(!jr(a[n[2]]&&a[n[2]]))throw new TypeError("Template: "+n[1]+"["+n[2]+"] is not a Node.");i+=a[n[2]].toTex(r)}}return i+t.slice(o)}i.prototype.toString=function(t){var e,r=this.fn.toString(t);return t&&"object"==typeof t.handler&&rn(t.handler,r)&&(e=t.handler[r](this,t)),void 0!==e?e:s.call(this,t)},i.prototype._toString=function(t){var e=this.args.map((function(e){return e.toString(t)}));return(Fr(this.fn)?"("+this.fn.toString(t)+")":this.fn.toString(t))+"("+e.join(", ")+")"},i.prototype.toJSON=function(){return{mathjs:"FunctionNode",fn:this.fn,args:this.args}},i.fromJSON=function(t){return new i(t.fn,t.args)},i.prototype.toHTML=function(t){var e=this.args.map((function(e){return e.toHTML(t)}));return'<span class="math-function">'+gs(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+e.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'};var a=i.prototype.toTex;return i.prototype.toTex=function(t){var e;return t&&"object"==typeof t.handler&&rn(t.handler,this.name)&&(e=t.handler[this.name](this,t)),void 0!==e?e:a.call(this,t)},i.prototype._toTex=function(t){var r,n,i=this.args.map((function(e){return e.toTex(t)}));switch(qx[this.name]&&(r=qx[this.name]),!e[this.name]||"function"!=typeof e[this.name].toTex&&"object"!=typeof e[this.name].toTex&&"string"!=typeof e[this.name].toTex||(r=e[this.name].toTex),typeof r){case"function":n=r(this,t);break;case"string":n=o(r,this,t);break;case"object":switch(typeof r[i.length]){case"function":n=r[i.length](this,t);break;case"string":n=o(r[i.length],this,t)}}return void 0!==n?n:o("\\mathrm{${name}}\\left(${args}\\right)",this,t)},i.prototype.getIdentifier=function(){return this.type+":"+this.name},i}),{isClass:!0,isNode:!0});function p_(){return(p_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var h_="parse",f_=nn(h_,["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],(t=>{var{typed:e,numeric:r,config:n,AccessorNode:i,ArrayNode:s,AssignmentNode:o,BlockNode:a,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:p,IndexNode:h,ObjectNode:f,OperatorNode:d,ParenthesisNode:m,RangeNode:g,RelationalNode:y,SymbolNode:v}=t,b=e(h_,{string:function(t){return R(t,{})},"Array | Matrix":function(t){return x(t,{})},"string, Object":function(t,e){return R(t,void 0!==e.nodes?e.nodes:{})},"Array | Matrix, Object":x});function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==e.nodes?e.nodes:{};return Js(t,(function(t){if("string"!=typeof t)throw new TypeError("String expected");return R(t,r)}))}var _={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},w={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},S=["NaN","Infinity"];function A(t,e){return t.expression.substr(t.index,e)}function N(t){return A(t,1)}function M(t){t.index++}function k(t){return t.expression.charAt(t.index-1)}function C(t){return t.expression.charAt(t.index+1)}function T(t){for(t.tokenType=0,t.token="",t.comment="";b.isWhitespace(N(t),t.nestingLevel);)M(t);if("#"===N(t))for(;"\n"!==N(t)&&""!==N(t);)t.comment+=N(t),M(t);if(""!==N(t)){if("\n"===N(t)&&!t.nestingLevel)return t.tokenType=1,t.token=N(t),void M(t);var e=N(t),r=A(t,2),n=A(t,3);if(3===n.length&&_[n])return t.tokenType=1,t.token=n,M(t),M(t),void M(t);if(2===r.length&&_[r])return t.tokenType=1,t.token=r,M(t),void M(t);if(_[e])return t.tokenType=1,t.token=e,void M(t);if(b.isDigitDot(e)){t.tokenType=2;var i=A(t,2);if("0b"===i||"0o"===i||"0x"===i){for(t.token+=N(t),M(t),t.token+=N(t),M(t);b.isHexDigit(N(t));)t.token+=N(t),M(t);if("."===N(t))for(t.token+=".",M(t);b.isHexDigit(N(t));)t.token+=N(t),M(t);else if("i"===N(t))for(t.token+="i",M(t);b.isDigit(N(t));)t.token+=N(t),M(t);return}if("."===N(t))t.token+=N(t),M(t),b.isDigit(N(t))||(t.tokenType=1);else{for(;b.isDigit(N(t));)t.token+=N(t),M(t);b.isDecimalMark(N(t),C(t))&&(t.token+=N(t),M(t))}for(;b.isDigit(N(t));)t.token+=N(t),M(t);if("E"===N(t)||"e"===N(t))if(b.isDigit(C(t))||"-"===C(t)||"+"===C(t)){if(t.token+=N(t),M(t),"+"!==N(t)&&"-"!==N(t)||(t.token+=N(t),M(t)),!b.isDigit(N(t)))throw et(t,'Digit expected, got "'+N(t)+'"');for(;b.isDigit(N(t));)t.token+=N(t),M(t);if(b.isDecimalMark(N(t),C(t)))throw et(t,'Digit expected, got "'+N(t)+'"')}else if("."===C(t))throw M(t),et(t,'Digit expected, got "'+N(t)+'"')}else{if(!b.isAlpha(N(t),k(t),C(t))){for(t.tokenType=4;""!==N(t);)t.token+=N(t),M(t);throw et(t,'Syntax error in part "'+t.token+'"')}for(;b.isAlpha(N(t),k(t),C(t))||b.isDigit(N(t));)t.token+=N(t),M(t);rn(w,t.token)?t.tokenType=1:t.tokenType=3}}else t.tokenType=1}function O(t){do{T(t)}while("\n"===t.token)}function I(t){t.nestingLevel++}function P(t){t.nestingLevel--}function R(t,e){var r={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:0,nestingLevel:0,conditionalLevel:null};p_(r,{expression:t,extraNodes:e}),T(r);var n=function(t){var e,r,n=[];for(""!==t.token&&"\n"!==t.token&&";"!==t.token&&((e=L(t)).comment=t.comment);"\n"===t.token||";"===t.token;)0===n.length&&e&&(r=";"!==t.token,n.push({node:e,visible:r})),T(t),"\n"!==t.token&&";"!==t.token&&""!==t.token&&((e=L(t)).comment=t.comment,r=";"!==t.token,n.push({node:e,visible:r}));return n.length>0?new a(n):(e||((e=new l(void 0)).comment=t.comment),e)}(r);if(""!==r.token)throw 1===r.tokenType?rt(r,"Unexpected operator "+r.token):et(r,'Unexpected part "'+r.token+'"');return n}function L(t){var e,r,n,i,s=function(t){for(var e=function(t){for(var e=D(t);"or"===t.token;)O(t),e=new d("or","or",[e,D(t)]);return e}(t);"?"===t.token;){var r=t.conditionalLevel;t.conditionalLevel=t.nestingLevel,O(t);var n=e,i=L(t);if(":"!==t.token)throw et(t,"False part of conditional expression expected");t.conditionalLevel=null,O(t);var s=L(t);e=new u(n,i,s),t.conditionalLevel=r}return e}(t);if("="===t.token){if(Zr(s))return e=s.name,O(t),n=L(t),new o(new v(e),n);if(Dr(s))return O(t),n=L(t),new o(s.object,s.index,n);if(Gr(s)&&Zr(s.fn)&&(i=!0,r=[],e=s.name,s.args.forEach((function(t,e){Zr(t)?r[e]=t.name:i=!1})),i))return O(t),n=L(t),new c(e,r,n);throw et(t,"Invalid left hand side of assignment operator =")}return s}function D(t){for(var e=q(t);"xor"===t.token;)O(t),e=new d("xor","xor",[e,q(t)]);return e}function q(t){for(var e=B(t);"and"===t.token;)O(t),e=new d("and","and",[e,B(t)]);return e}function B(t){for(var e=U(t);"|"===t.token;)O(t),e=new d("|","bitOr",[e,U(t)]);return e}function U(t){for(var e=$(t);"^|"===t.token;)O(t),e=new d("^|","bitXor",[e,$(t)]);return e}function $(t){for(var e=z(t);"&"===t.token;)O(t),e=new d("&","bitAnd",[e,z(t)]);return e}function z(t){for(var e=[F(t)],r=[],n={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};rn(n,t.token);){var i={name:t.token,fn:n[t.token]};r.push(i),O(t),e.push(F(t))}return 1===e.length?e[0]:2===e.length?new d(r[0].name,r[0].fn,e):new y(r.map((t=>t.fn)),e)}function F(t){var e,r,n,i;e=G(t);for(var s={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};rn(s,t.token);)n=s[r=t.token],O(t),i=[e,G(t)],e=new d(r,n,i);return e}function G(t){var e,r,n,i;e=V(t);for(var s={to:"to",in:"to"};rn(s,t.token);)n=s[r=t.token],O(t),"in"===r&&""===t.token?e=new d("*","multiply",[e,new v("in")],!0):(i=[e,V(t)],e=new d(r,n,i));return e}function V(t){var e,r=[];if(e=":"===t.token?new l(1):j(t),":"===t.token&&t.conditionalLevel!==t.nestingLevel){for(r.push(e);":"===t.token&&r.length<3;)O(t),")"===t.token||"]"===t.token||","===t.token||""===t.token?r.push(new v("end")):r.push(j(t));e=3===r.length?new g(r[0],r[2],r[1]):new g(r[0],r[1])}return e}function j(t){var e,r,n,i;e=H(t);for(var s={"+":"add","-":"subtract"};rn(s,t.token);)n=s[r=t.token],O(t),i=[e,H(t)],e=new d(r,n,i);return e}function H(t){var e,r,n,i;r=e=W(t);for(var s={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};rn(s,t.token);)i=s[n=t.token],O(t),r=W(t),e=new d(n,i,[e,r]);return e}function W(t){var e,r;for(r=e=Y(t);3===t.tokenType||"in"===t.token&&zr(e)||!(2!==t.tokenType||zr(r)||Wr(r)&&"!"!==r.op)||"("===t.token;)r=Y(t),e=new d("*","multiply",[e,r],!0);return e}function Y(t){for(var e=X(t),r=e,n=[];"/"===t.token&&zr(r);){if(n.push(p_({},t)),O(t),2!==t.tokenType){p_(t,n.pop());break}if(n.push(p_({},t)),O(t),3!==t.tokenType&&"("!==t.token){n.pop(),p_(t,n.pop());break}p_(t,n.pop()),n.pop(),r=X(t),e=new d("/","divide",[e,r])}return e}function X(t){var e,i,o,a={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return rn(a,t.token)?(o=a[t.token],e=t.token,O(t),i=[X(t)],new d(e,o,i)):function(t){var e,i,o,a;return e=function(t){var e,i,o;e=function(t){var e=[];if(3===t.tokenType&&rn(t.extraNodes,t.token)){var i=t.extraNodes[t.token];if(T(t),"("===t.token){if(e=[],I(t),T(t),")"!==t.token)for(e.push(L(t));","===t.token;)T(t),e.push(L(t));if(")"!==t.token)throw et(t,"Parenthesis ) expected");P(t),T(t)}return new i(e)}return function(t){var e;return 3===t.tokenType||1===t.tokenType&&t.token in w?(e=t.token,T(t),Z(t,rn(E,e)?new l(E[e]):-1!==S.indexOf(e)?new l(r(e,"number")):new v(e))):function(t){var e;return'"'===t.token?(e=K(t),Z(t,new l(e))):function(t){var e;return"'"===t.token?(e=J(t),Z(t,new l(e))):function(t){var e,i,o,a;if("["===t.token){if(I(t),T(t),"]"!==t.token){var u=Q(t);if(";"===t.token){for(o=1,i=[u];";"===t.token;)T(t),i[o]=Q(t),o++;if("]"!==t.token)throw et(t,"End of matrix ] expected");P(t),T(t),a=i[0].items.length;for(var c=1;c<o;c++)if(i[c].items.length!==a)throw rt(t,"Column dimensions mismatch ("+i[c].items.length+" !== "+a+")");e=new s(i)}else{if("]"!==t.token)throw et(t,"End of matrix ] expected");P(t),T(t),e=u}}else P(t),T(t),e=new s([]);return Z(t,e)}return function(t){if("{"===t.token){var e;I(t);var i={};do{if(T(t),"}"!==t.token){if('"'===t.token)e=K(t);else if("'"===t.token)e=J(t);else{if(!(3===t.tokenType||1===t.tokenType&&t.token in w))throw et(t,"Symbol or string expected as object key");e=t.token,T(t)}if(":"!==t.token)throw et(t,"Colon : expected after object key");T(t),i[e]=L(t)}}while(","===t.token);if("}"!==t.token)throw et(t,"Comma , or bracket } expected after object value");P(t),T(t);var s=new f(i);return Z(t,s)}return function(t){var e;return 2===t.tokenType?(e=t.token,T(t),new l(r(e,n.number))):function(t){var e;if("("===t.token){if(I(t),T(t),e=L(t),")"!==t.token)throw et(t,"Parenthesis ) expected");return P(t),T(t),Z(t,e=new m(e))}return function(t){throw""===t.token?et(t,"Unexpected end of expression"):et(t,"Value expected")}(t)}(t)}(t)}(t)}(t)}(t)}(t)}(t)}(t);for(var a={"!":"factorial","'":"ctranspose"};rn(a,t.token);)o=a[i=t.token],T(t),e=Z(t,e=new d(i,o,[e]));return e}(t),("^"===t.token||".^"===t.token)&&(o="^"===(i=t.token)?"pow":"dotPow",O(t),a=[e,X(t)],e=new d(i,o,a)),e}(t)}function Z(t,e,r){for(var n;!("("!==t.token&&"["!==t.token&&"."!==t.token||r&&-1===r.indexOf(t.token));)if(n=[],"("===t.token){if(!Zr(e)&&!Dr(e))return e;if(I(t),T(t),")"!==t.token)for(n.push(L(t));","===t.token;)T(t),n.push(L(t));if(")"!==t.token)throw et(t,"Parenthesis ) expected");P(t),T(t),e=new p(e,n)}else if("["===t.token){if(I(t),T(t),"]"!==t.token)for(n.push(L(t));","===t.token;)T(t),n.push(L(t));if("]"!==t.token)throw et(t,"Parenthesis ] expected");P(t),T(t),e=new i(e,new h(n))}else{if(T(t),3!==t.tokenType)throw et(t,"Property name expected after dot");n.push(new l(t.token)),T(t),e=new i(e,new h(n,!0))}return e}function K(t){for(var e="";""!==N(t)&&'"'!==N(t);)"\\"===N(t)&&(e+=N(t),M(t)),e+=N(t),M(t);if(T(t),'"'!==t.token)throw et(t,'End of string " expected');return T(t),JSON.parse('"'+e+'"')}function J(t){for(var e="";""!==N(t)&&"'"!==N(t);)"\\"===N(t)&&(e+=N(t),M(t)),e+=N(t),M(t);if(T(t),"'"!==t.token)throw et(t,"End of string ' expected");return T(t),JSON.parse('"'+e+'"')}function Q(t){for(var e=[L(t)],r=1;","===t.token;)T(t),e[r]=L(t),r++;return new s(e)}function tt(t){return t.index-t.token.length+1}function et(t,e){var r=tt(t),n=new SyntaxError(e+" (char "+r+")");return n.char=r,n}function rt(t,e){var r=tt(t),n=new SyntaxError(e+" (char "+r+")");return n.char=r,n}return b.isAlpha=function(t,e,r){return b.isValidLatinOrGreek(t)||b.isValidMathSymbol(t,r)||b.isValidMathSymbol(e,t)},b.isValidLatinOrGreek=function(t){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(t)},b.isValidMathSymbol=function(t,e){return/^[\uD835]$/.test(t)&&/^[\uDC00-\uDFFF]$/.test(e)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(e)},b.isWhitespace=function(t,e){return" "===t||"\t"===t||"\n"===t&&e>0},b.isDecimalMark=function(t,e){return"."===t&&"/"!==e&&"*"!==e&&"^"!==e},b.isDigitDot=function(t){return t>="0"&&t<="9"||"."===t},b.isDigit=function(t){return t>="0"&&t<="9"},b.isHexDigit=function(t){return t>="0"&&t<="9"||t>="a"&&t<="f"||t>="A"&&t<="F"},b})),d_="evaluate",m_=nn(d_,["typed","parse"],(t=>{var{typed:e,parse:r}=t;return e(d_,{string:function(t){return r(t).compile().evaluate({})},"string, Object":function(t,e){return r(t).compile().evaluate(e)},"Array | Matrix":function(t){var e={};return Js(t,(function(t){return r(t).compile().evaluate(e)}))},"Array | Matrix, Object":function(t,e){return Js(t,(function(t){return r(t).compile().evaluate(e)}))}})})),g_=nn("Help",["parse"],(t=>{var{parse:e}=t;function r(t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(!t)throw new Error('Argument "doc" missing');this.doc=t}return r.prototype.type="Help",r.prototype.isHelp=!0,r.prototype.toString=function(){var t=this.doc||{},r="\n";if(t.name&&(r+="Name: "+t.name+"\n\n"),t.category&&(r+="Category: "+t.category+"\n\n"),t.description&&(r+="Description:\n    "+t.description+"\n\n"),t.syntax&&(r+="Syntax:\n    "+t.syntax.join("\n    ")+"\n\n"),t.examples){r+="Examples:\n";for(var n={},i=0;i<t.examples.length;i++){var s=t.examples[i];r+="    "+s+"\n";var o=void 0;try{o=e(s).compile().evaluate(n)}catch(t){o=t}void 0===o||Cr(o)||(r+="        "+ds(o,{precision:14})+"\n")}r+="\n"}return t.seealso&&t.seealso.length&&(r+="See also: "+t.seealso.join(", ")+"\n"),r},r.prototype.toJSON=function(){var t=Qr(this.doc);return t.mathjs="Help",t},r.fromJSON=function(t){var e={};return Object.keys(t).filter((t=>"mathjs"!==t)).forEach((r=>{e[r]=t[r]})),new r(e)},r.prototype.valueOf=r.prototype.toString,r}),{isClass:!0}),y_=nn("Parser",["parse"],(t=>{var{parse:e}=t;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.scope={}}return r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(t){return e(t).compile().evaluate(this.scope)},r.prototype.get=function(t){return t in this.scope?Oc(this.scope,t):void 0},r.prototype.getAll=function(){return tn({},this.scope)},r.prototype.set=function(t,e){return Ic(this.scope,t,e)},r.prototype.remove=function(t){delete this.scope[t]},r.prototype.clear=function(){for(var t in this.scope)rn(this.scope,t)&&delete this.scope[t]},r}),{isClass:!0}),v_={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},b_={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},x_={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(num,den)"],description:"Create a fraction from a number or from a numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["[]","[1, 2, 3]","A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[0:2, 0:2] = ones(2, 2)"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:b_,E:b_,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:v_,PI:v_,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAll:{name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["derivative","parse","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAll:{name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[1, 2], [3, 4]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number, number": f(x)=x+x })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:{name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(" + 4 + ")")'],seealso:[]},help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},count:{name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diff:{name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["diff([1, 2, 4, 7, 0])","diff([1, 2, 4, 7, 0], 0)","diff(matrix([1, 2, 4, 7, 0]))","diff([[1, 2], [3, 4]])","diff([[1, 2], [3, 4]], 0)","diff([[1, 2], [3, 4]], 1)","diff([[1, 2], [3, 4]], bignumber(1))","diff(matrix([[1, 2], [3, 4]]), 1)","diff([[1, 2], matrix([3, 4])], 1)"],seealso:["subtract","partitionSelect"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["forEach([1, 2, 3], function(val) { console.log(val) })"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and eigenvectors of a real symmetric matrix",examples:["eigs([[5, 2.3], [2.3, 1]])"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1)'],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])"],seealso:["size","squeeze","resize"]},rotate:{name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], math.pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrix:{name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"])',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string. Indexes are one-based. Both the ranges lower-bound and upper-bound are included.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dim)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dim)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dim)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:{name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},bin:{name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},oct:{name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},hex:{name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},typeOf:{name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction)','numeric(4, "Fraction")','numeric(fraction(2, 5), "number)'],seealso:["number","fraction","bignumber","string","format"]}},__="help",w_=nn(__,["typed","mathWithTransform","Help"],(t=>{var{typed:e,mathWithTransform:r,Help:n}=t;return e(__,{any:function(t){var e,i=t;if("string"!=typeof t)for(e in r)if(rn(r,e)&&t===r[e]){i=e;break}var s=Oc(x_,i);if(!s){var o="function"==typeof i?i.name:i;throw new Error('No documentation found on "'+o+'"')}return new n(s)}})})),E_="compile",S_=nn(E_,["typed","parse"],(t=>{var{typed:e,parse:r}=t;return e(E_,{string:function(t){return r(t).compile()},"Array | Matrix":function(t){return Js(t,(function(t){return r(t).compile()}))}})})),A_=nn("simplifyUtil",["FunctionNode","OperatorNode","SymbolNode"],(t=>{var{FunctionNode:e,OperatorNode:r,SymbolNode:n}=t,i={add:!0,multiply:!0},s={add:!0,multiply:!0};function o(t,e){if(!Wr(t))return!1;var r=t.fn.toString();return e&&rn(e,r)&&rn(e[r],"associative")?e[r].associative:s[r]||!1}function a(t){var e,r=[];return o(t)?(e=t.op,function t(n){for(var i=0;i<n.args.length;i++){var s=n.args[i];Wr(s)&&e===s.op?t(s):r.push(s)}}(t),r):t.args}function u(t){return Wr(t)?function(e){try{return new r(t.op,t.fn,e,t.implicit)}catch(t){return console.error(t),[]}}:function(r){return new e(new n(t.name),r)}}return{createMakeNodeFunction:u,isCommutative:function(t,e){if(!Wr(t))return!0;var r=t.fn.toString();return e&&rn(e,r)&&rn(e[r],"commutative")?e[r].commutative:i[r]||!1},isAssociative:o,flatten:function t(e){if(!e.args||0===e.args.length)return e;e.args=a(e);for(var r=0;r<e.args.length;r++)t(e.args[r])},allChildren:a,unflattenr:function t(e){if(e.args&&0!==e.args.length){for(var r=u(e),n=e.args.length,i=0;i<n;i++)t(e.args[i]);if(n>2&&o(e)){for(var s=e.args.pop();e.args.length>0;)s=r([e.args.pop(),s]);e.args=s.args}}},unflattenl:function t(e){if(e.args&&0!==e.args.length){for(var r=u(e),n=e.args.length,i=0;i<n;i++)t(e.args[i]);if(n>2&&o(e)){for(var s=e.args.shift();e.args.length>0;)s=r([s,e.args.shift()]);e.args=s.args}}}}})),N_=nn("simplifyCore",["equal","isZero","add","subtract","multiply","divide","pow","ConstantNode","OperatorNode","FunctionNode","ParenthesisNode"],(t=>{var{equal:e,isZero:r,add:n,subtract:i,multiply:s,divide:o,pow:a,ConstantNode:u,OperatorNode:l,FunctionNode:c,ParenthesisNode:p}=t,h=new u(0),f=new u(1);return function t(d){if(Wr(d)&&d.isUnary()){var m=t(d.args[0]);if("+"===d.op)return m;if("-"===d.op){if(Wr(m)){if(m.isUnary()&&"-"===m.op)return m.args[0];if(m.isBinary()&&"subtract"===m.fn)return new l("-","subtract",[m.args[1],m.args[0]])}return new l(d.op,d.fn,[m])}}else if(Wr(d)&&d.isBinary()){var g=t(d.args[0]),y=t(d.args[1]);if("+"===d.op){if(zr(g)){if(r(g.value))return y;if(zr(y))return new u(n(g.value,y.value))}return zr(y)&&r(y.value)?g:Wr(y)&&y.isUnary()&&"-"===y.op?new l("-","subtract",[g,y.args[0]]):new l(d.op,d.fn,y?[g,y]:[g])}if("-"===d.op){if(zr(g)&&y){if(zr(y))return new u(i(g.value,y.value));if(r(g.value))return new l("-","unaryMinus",[y])}if("subtract"===d.fn)return zr(y)&&r(y.value)?g:Wr(y)&&y.isUnary()&&"-"===y.op?t(new l("+","add",[g,y.args[0]])):new l(d.op,d.fn,[g,y])}else{if("*"===d.op){if(zr(g)){if(r(g.value))return h;if(e(g.value,1))return y;if(zr(y))return new u(s(g.value,y.value))}if(zr(y)){if(r(y.value))return h;if(e(y.value,1))return g;if(Wr(g)&&g.isBinary()&&g.op===d.op){var v=g.args[0];if(zr(v)){var b=new u(s(v.value,y.value));return new l(d.op,d.fn,[b,g.args[1]],d.implicit)}}return new l(d.op,d.fn,[y,g],d.implicit)}return new l(d.op,d.fn,[g,y],d.implicit)}if("/"===d.op){if(zr(g)){if(r(g.value))return h;if(zr(y)&&(e(y.value,1)||e(y.value,2)||e(y.value,4)))return new u(o(g.value,y.value))}return new l(d.op,d.fn,[g,y])}if("^"===d.op){if(zr(y)){if(r(y.value))return f;if(e(y.value,1))return g;if(zr(g))return new u(a(g.value,y.value));if(Wr(g)&&g.isBinary()&&"^"===g.op){var x=g.args[1];if(zr(x))return new l(d.op,d.fn,[g.args[0],new u(s(x.value,y.value))])}}return new l(d.op,d.fn,[g,y])}}}else{if(Yr(d)){var _=t(d.content);return Yr(_)||Zr(_)||zr(_)?_:new p(_)}if(Gr(d)){var w=d.args.map(t).map((function(t){return Yr(t)?t.content:t}));return new c(t(d.fn),w)}}return d}})),M_=nn("simplifyConstant",["typed","config","mathWithTransform","?fraction","?bignumber","ConstantNode","OperatorNode","FunctionNode","SymbolNode"],(t=>{var{typed:e,config:r,mathWithTransform:n,fraction:i,bignumber:s,ConstantNode:o,OperatorNode:a,FunctionNode:u,SymbolNode:l}=t,{isCommutative:c,isAssociative:p,allChildren:h,createMakeNodeFunction:f}=A_({FunctionNode:u,OperatorNode:a,SymbolNode:l});function d(t,e,r){try{return y(n[t].apply(null,e),r)}catch(i){return e=e.map((function(t){return yr(t)?t.valueOf():t})),y(n[t].apply(null,e),r)}}var m=e({Fraction:function(t){var e,r=t.s*t.n;return e=r<0?new a("-","unaryMinus",[new o(-r)]):new o(r),1===t.d?e:new a("/","divide",[e,new o(t.d)])},number:function(t){return t<0?v(new o(-t)):new o(t)},BigNumber:function(t){return t<0?v(new o(-t)):new o(t)},Complex:function(t){throw new Error("Cannot convert Complex number to Node")}});function g(t,e){if(e&&!1!==e.exactFractions&&isFinite(t)&&i){var r=i(t),n=e&&"number"==typeof e.fractionsLimit?e.fractionsLimit:1/0;if(r.valueOf()===t&&r.n<n&&r.d<n)return r}return t}var y=e({"string, Object":function(t,e){return"BigNumber"===r.number?(void 0===s&&Nc(),s(t)):"Fraction"===r.number?(void 0===i&&Mc(),i(t)):g(parseFloat(t),e)},"Fraction, Object":function(t,e){return t},"BigNumber, Object":function(t,e){return t},"number, Object":function(t,e){return g(t,e)},"Complex, Object":function(t,e){return 0!==t.im?t:g(t.re,e)}});function v(t){return new a("-","unaryMinus",[t])}function b(t,e,r,n){return e.reduce((function(e,i){if(jr(e)||jr(i))jr(e)?jr(i)||(i=m(i)):e=m(e);else{try{return d(t,[e,i],n)}catch(t){}e=m(e),i=m(i)}return r([e,i])}))}function x(t,e){switch(t.type){case"SymbolNode":return t;case"ConstantNode":return"number"!=typeof t.value&&isNaN(t.value)?t:y(t.value,e);case"FunctionNode":if(n[t.name]&&n[t.name].rawArgs)return t;if(-1===["add","multiply"].indexOf(t.name)){var r=t.args.map((t=>x(t,e)));if(!r.some(jr))try{return d(t.name,r,e)}catch(t){}return r=r.map((function(t){return jr(t)?t:m(t)})),new u(t.name,r)}case"OperatorNode":var i,s,o=t.fn.toString(),a=f(t);if(Wr(t)&&t.isUnary())s=jr((i=[x(t.args[0],e)])[0])?a(i):d(o,i,e);else if(p(t))if(i=(i=h(t)).map((t=>x(t,e))),c(o)){for(var l=[],g=[],v=0;v<i.length;v++)jr(i[v])?g.push(i[v]):l.push(i[v]);l.length>1?(s=b(o,l,a,e),g.unshift(s),s=b(o,g,a,e)):s=b(o,i,a,e)}else s=b(o,i,a,e);else s=b(o,i=t.args.map((t=>x(t,e))),a,e);return s;case"ParenthesisNode":return x(t.content,e);case"AccessorNode":case"ArrayNode":case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"IndexNode":case"ObjectNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(t.type))}}return function(t,e){var r=x(t,e);return jr(r)?r:m(r)}})),k_=nn("resolve",["parse","FunctionNode","OperatorNode","ParenthesisNode"],(t=>{var{parse:e,FunctionNode:r,OperatorNode:n,ParenthesisNode:i}=t;return function t(s,o){if(!o)return s;if(Zr(s)){var a=o[s.name];if(jr(a))return t(a,o);if("number"==typeof a)return e(String(a))}else{if(Wr(s)){var u=s.args.map((function(e){return t(e,o)}));return new n(s.op,s.fn,u,s.implicit)}if(Yr(s))return new i(t(s.content,o));if(Gr(s)){var l=s.args.map((function(e){return t(e,o)}));return new r(s.name,l)}}return s}})),C_=nn("simplify",["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","?fraction","?bignumber","mathWithTransform","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],(t=>{var{config:e,typed:r,parse:n,add:i,subtract:s,multiply:o,divide:a,pow:u,isZero:l,equal:c,fraction:p,bignumber:h,mathWithTransform:f,ConstantNode:d,FunctionNode:m,OperatorNode:g,ParenthesisNode:y,SymbolNode:v}=t,b=M_({typed:r,config:e,mathWithTransform:f,fraction:p,bignumber:h,ConstantNode:d,OperatorNode:g,FunctionNode:m,SymbolNode:v}),x=N_({equal:c,isZero:l,add:i,subtract:s,multiply:o,divide:a,pow:u,ConstantNode:d,OperatorNode:g,FunctionNode:m,ParenthesisNode:y}),_=k_({parse:n,FunctionNode:m,OperatorNode:g,ParenthesisNode:y}),{isCommutative:w,isAssociative:E,flatten:S,unflattenr:A,unflattenl:N,createMakeNodeFunction:M}=A_({FunctionNode:m,OperatorNode:g,SymbolNode:v}),k=r("simplify",{string:function(t){return this(n(t),this.rules,{},{})},"string, Object":function(t,e){return this(n(t),this.rules,e,{})},"string, Object, Object":function(t,e,r){return this(n(t),this.rules,e,r)},"string, Array":function(t,e){return this(n(t),e,{},{})},"string, Array, Object":function(t,e,r){return this(n(t),e,r,{})},"string, Array, Object, Object":function(t,e,r,i){return this(n(t),e,r,i)},"Node, Object":function(t,e){return this(t,this.rules,e,{})},"Node, Object, Object":function(t,e,r){return this(t,this.rules,e,r)},Node:function(t){return this(t,this.rules,{},{})},"Node, Array":function(t,e){return this(t,e,{},{})},"Node, Array, Object":function(t,e,r){return this(t,e,r,{})},"Node, Array, Object, Object":function(t,e,r,i){e=function(t){for(var e=[],r=0;r<t.length;r++){var i=t[r],s=void 0,o=typeof i;switch(o){case"string":var a=i.split("->");if(2!==a.length)throw SyntaxError("Could not parse rule: "+i);i={l:a[0],r:a[1]};case"object":if(s={l:C(n(i.l)),r:C(n(i.r))},i.context&&(s.evaluate=i.context),i.evaluate&&(s.evaluate=n(i.evaluate)),E(s.l)){var u=M(s.l),l=new v("_p"+O++);s.expanded={},s.expanded.l=u([s.l.clone(),l]),S(s.expanded.l),A(s.expanded.l),s.expanded.r=u([s.r,l])}break;case"function":s=i;break;default:throw TypeError("Unsupported type of rule: "+o)}e.push(s)}return e}(e);for(var s=_(t,r),o={},a=(s=C(s)).toString({parenthesis:"all"});!o[a];){o[a]=!0,O=0;for(var u=0;u<e.length;u++)"function"==typeof e[u]?s=e[u](s,i):(S(s),s=I(s,e[u])),N(s);a=s.toString({parenthesis:"all"})}return s}});function C(t){return t.transform((function(t,e,r){return Yr(t)?C(t.content):t}))}k.simplifyCore=x,k.resolve=_;var T={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};k.rules=[x,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},b,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"},{l:"n1/(n2/n3)",r:"(n1*n3)/n2"}];var O=0;var I=r("applyRule",{"Node, Object":function(t,e){var r=t;if(r instanceof g||r instanceof m){if(r.args)for(var n=0;n<r.args.length;n++)r.args[n]=I(r.args[n],e)}else r instanceof y&&r.content&&(r.content=I(r.content,e));var i=e.r,s=L(e.l,r)[0];if(!s&&e.expanded&&(i=e.expanded.r,s=L(e.expanded.l,r)[0]),s){var o=r.implicit;r=i.clone(),o&&"implicit"in i&&(r.implicit=!0),r=r.transform((function(t){return t.isSymbolNode&&rn(s.placeholders,t.name)?s.placeholders[t.name].clone():t}))}return r}});function P(t,e){var r={placeholders:{}};if(!t.placeholders&&!e.placeholders)return r;if(!t.placeholders)return e;if(!e.placeholders)return t;for(var n in t.placeholders)if(rn(t.placeholders,n)&&(r.placeholders[n]=t.placeholders[n],rn(e.placeholders,n)&&!D(t.placeholders[n],e.placeholders[n])))return null;for(var i in e.placeholders)rn(e.placeholders,i)&&(r.placeholders[i]=e.placeholders[i]);return r}function R(t,e){var r,n=[];if(0===t.length||0===e.length)return n;for(var i=0;i<t.length;i++)for(var s=0;s<e.length;s++)(r=P(t[i],e[s]))&&n.push(r);return n}function L(t,e,r){var n=[{placeholders:{}}];if(t instanceof g&&e instanceof g||t instanceof m&&e instanceof m){if(t instanceof g){if(t.op!==e.op||t.fn!==e.fn)return[]}else if(t instanceof m&&t.name!==e.name)return[];if(!(1===e.args.length&&1===t.args.length||!E(e)&&e.args.length===t.args.length||r)){if(e.args.length>=2&&2===t.args.length){for(var i=function(t,e){var r,n,i=[],s=M(t);if(w(t,e))for(var o=0;o<t.args.length;o++)(n=t.args.slice(0)).splice(o,1),r=1===n.length?n[0]:s(n),i.push(s([t.args[o],r]));else r=1===(n=t.args.slice(1)).length?n[0]:s(n),i.push(s([t.args[0],r]));return i}(e,t.context),s=[],o=0;o<i.length;o++){var a=L(t,i[o],!0);s=s.concat(a)}return s}if(t.args.length>2)throw Error("Unexpected non-binary associative function: "+t.toString());return[]}for(var u=[],l=0;l<t.args.length;l++){var p=L(t.args[l],e.args[l]);if(0===p.length)return[];u.push(p)}n=function(t){if(0===t.length)return t;for(var e=t.reduce(R),r=[],n={},i=0;i<e.length;i++){var s=JSON.stringify(e[i]);n[s]||(n[s]=!0,r.push(e[i]))}return r}(u)}else if(t instanceof v){if(0===t.name.length)throw new Error("Symbol in rule has 0 length...!?");if(T[t.name]){if(t.name!==e.name)return[]}else if("n"===t.name[0]||"_p"===t.name.substring(0,2))n[0].placeholders[t.name]=e;else if("v"===t.name[0]){if(zr(e))return[];n[0].placeholders[t.name]=e}else{if("c"!==t.name[0])throw new Error("Invalid symbol in rule: "+t.name);if(!(e instanceof d))return[];n[0].placeholders[t.name]=e}}else{if(!(t instanceof d))return[];if(!c(t.value,e.value))return[]}return n}function D(t,e){if(t instanceof d&&e instanceof d){if(!c(t.value,e.value))return!1}else if(t instanceof v&&e instanceof v){if(t.name!==e.name)return!1}else{if(!(t instanceof g&&e instanceof g||t instanceof m&&e instanceof m))return!1;if(t instanceof g){if(t.op!==e.op||t.fn!==e.fn)return!1}else if(t instanceof m&&t.name!==e.name)return!1;if(t.args.length!==e.args.length)return!1;for(var r=0;r<t.args.length;r++)if(!D(t.args[r],e.args[r]))return!1}return!0}return k})),T_="rationalize",O_=nn(T_,["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplify","?bignumber","?fraction","mathWithTransform","ConstantNode","OperatorNode","FunctionNode","SymbolNode","ParenthesisNode"],(t=>{var{config:e,typed:r,equal:n,isZero:i,add:s,subtract:o,multiply:a,divide:u,pow:l,parse:c,simplify:p,fraction:h,bignumber:f,mathWithTransform:d,ConstantNode:m,OperatorNode:g,FunctionNode:y,SymbolNode:v,ParenthesisNode:b}=t,x=M_({typed:r,config:e,mathWithTransform:d,fraction:h,bignumber:f,ConstantNode:m,OperatorNode:g,FunctionNode:y,SymbolNode:v}),_=N_({equal:n,isZero:i,add:s,subtract:o,multiply:a,divide:u,pow:l,ConstantNode:m,OperatorNode:g,FunctionNode:y,ParenthesisNode:b});return r(T_,{string:function(t){return this(c(t),{},!1)},"string, boolean":function(t,e){return this(c(t),{},e)},"string, Object":function(t,e){return this(c(t),e,!1)},"string, Object, boolean":function(t,e,r){return this(c(t),e,r)},Node:function(t){return this(t,{},!1)},"Node, boolean":function(t,e){return this(t,{},e)},"Node, Object":function(t,e){return this(t,e,!1)},"Node, Object, boolean":function(t,e,r){var n=function(){var t=[_,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},x,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],e=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],r=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],n={};return n.firstRules=t.concat(e,r),n.distrDivRules=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],n.sucDivRules=r,n.firstRulesAgain=t.concat(e),n.finalRules=[_,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},x,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],n}(),i=function(t,e,r,n){var i=[],s=p(t,n,e,{exactFractions:!1}),o="+-*"+((r=!!r)?"/":"");!function t(e){var r=e.type;if("FunctionNode"===r)throw new Error("There is an unsolved function call");if("OperatorNode"===r)if("^"===e.op){if("ConstantNode"!==e.args[1].type||!un(parseFloat(e.args[1].value)))throw new Error("There is a non-integer exponent");t(e.args[0])}else{if(-1===o.indexOf(e.op))throw new Error("Operator "+e.op+" invalid in polynomial expression");for(var n=0;n<e.args.length;n++)t(e.args[n])}else if("SymbolNode"===r){var s=e.name;-1===i.indexOf(s)&&i.push(s)}else if("ParenthesisNode"===r)t(e.content);else if("ConstantNode"!==r)throw new Error("type "+r+" is not allowed in polynomial expression")}(s);var a={};return a.expression=s,a.variables=i,a}(t,e,!0,n.firstRules),s=i.variables.length;if(t=i.expression,s>=1){var o,a;t=w(t);var u,l=!0,c=!1;for(t=p(t,n.firstRules,{},{exactFractions:!1});a=l?n.distrDivRules:n.sucDivRules,l=!l,(u=(t=p(t,a)).toString())!==o;)c=!0,o=u;c&&(t=p(t,n.firstRulesAgain,{},{exactFractions:!1})),t=p(t,n.finalRules,{},{exactFractions:!1})}var h=[],f={};return"OperatorNode"===t.type&&t.isBinary()&&"/"===t.op?(1===s&&(t.args[0]=E(t.args[0],h),t.args[1]=E(t.args[1])),r&&(f.numerator=t.args[0],f.denominator=t.args[1])):(1===s&&(t=E(t,h)),r&&(f.numerator=t,f.denominator=null)),r?(f.coefficients=h,f.variables=i.variables,f.expression=t,f):t}});function w(t,e,r){var n=t.type,i=arguments.length>1;if("OperatorNode"===n&&t.isBinary()){var s,o=!1;if("^"===t.op&&("ParenthesisNode"!==t.args[0].type&&"OperatorNode"!==t.args[0].type||"ConstantNode"!==t.args[1].type||(o=(s=parseFloat(t.args[1].value))>=2&&un(s))),o){if(s>2){var a=t.args[0],u=new g("^","pow",[t.args[0].cloneDeep(),new m(s-1)]);t=new g("*","multiply",[a,u])}else t=new g("*","multiply",[t.args[0],t.args[0].cloneDeep()]);i&&("content"===r?e.content=t:e.args[r]=t)}}if("ParenthesisNode"===n)w(t.content,t,"content");else if("ConstantNode"!==n&&"SymbolNode"!==n)for(var l=0;l<t.args.length;l++)w(t.args[l],t,l);if(!i)return t}function E(t,e){void 0===e&&(e=[]),e[0]=0;var r=0,n="";!function t(i,s,o){var a=i.type;if("FunctionNode"===a)throw new Error("There is an unsolved function call");if("OperatorNode"===a){if(-1==="+-*^".indexOf(i.op))throw new Error("Operator "+i.op+" invalid");if(null!==s){if(("unaryMinus"===i.fn||"pow"===i.fn)&&"add"!==s.fn&&"subtract"!==s.fn&&"multiply"!==s.fn)throw new Error("Invalid "+i.op+" placing");if(("subtract"===i.fn||"add"===i.fn||"multiply"===i.fn)&&"add"!==s.fn&&"subtract"!==s.fn)throw new Error("Invalid "+i.op+" placing");if(("subtract"===i.fn||"add"===i.fn||"unaryMinus"===i.fn)&&0!==o.noFil)throw new Error("Invalid "+i.op+" placing")}"^"!==i.op&&"*"!==i.op||(o.fire=i.op);for(var u=0;u<i.args.length;u++)"unaryMinus"===i.fn&&(o.oper="-"),"+"!==i.op&&"subtract"!==i.fn||(o.fire="",o.cte=1,o.oper=0===u?"+":i.op),o.noFil=u,t(i.args[u],i,o)}else if("SymbolNode"===a){if(i.name!==n&&""!==n)throw new Error("There is more than one variable");if(n=i.name,null===s)return void(e[1]=1);if("^"===s.op&&0!==o.noFil)throw new Error("In power the variable should be the first parameter");if("*"===s.op&&1!==o.noFil)throw new Error("In multiply the variable should be the second parameter");""!==o.fire&&"*"!==o.fire||(r<1&&(e[1]=0),e[1]+=o.cte*("+"===o.oper?1:-1),r=Math.max(1,r))}else{if("ConstantNode"!==a)throw new Error("Type "+a+" is not allowed");var l=parseFloat(i.value);if(null===s)return void(e[0]=l);if("^"===s.op){if(1!==o.noFil)throw new Error("Constant cannot be powered");if(!un(l)||l<=0)throw new Error("Non-integer exponent is not allowed");for(var c=r+1;c<l;c++)e[c]=0;return l>r&&(e[l]=0),e[l]+=o.cte*("+"===o.oper?1:-1),void(r=Math.max(l,r))}o.cte=l,""===o.fire&&(e[0]+=o.cte*("+"===o.oper?1:-1))}}(t,null,{cte:1,oper:"+",fire:""});for(var i,s=!0,o=r=e.length-1;o>=0;o--)if(0!==e[o]){var a=new m(s?e[o]:Math.abs(e[o])),u=e[o]<0?"-":"+";if(o>0){var l=new v(n);if(o>1){var c=new m(o);l=new g("^","pow",[l,c])}a=-1===e[o]&&s?new g("-","unaryMinus",[l]):1===Math.abs(e[o])?l:new g("*","multiply",[a,l])}i=s?a:"+"===u?new g("+","add",[i,a]):new g("-","subtract",[i,a]),s=!1}return s?new m(0):i}})),I_="parser",P_=nn(I_,["typed","Parser"],(t=>{var{typed:e,Parser:r}=t;return e(I_,{"":function(){return new r}})})),R_=nn("derivative",["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],(t=>{var{typed:e,config:r,parse:n,simplify:i,equal:s,isZero:o,numeric:a,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:p,SymbolNode:h}=t,f=e("derivative",{"Node, SymbolNode, Object":function(t,e,r){var n={};m(n,t,e.name);var s=g(t,n);return r.simplify?i(s):s},"Node, SymbolNode":function(t,e){return this(t,e,{simplify:!0})},"string, SymbolNode":function(t,e){return this(n(t),e)},"string, SymbolNode, Object":function(t,e,r){return this(n(t),e,r)},"string, string":function(t,e){return this(n(t),n(e))},"string, string, Object":function(t,e,r){return this(n(t),n(e),r)},"Node, string":function(t,e){return this(t,n(e))},"Node, string, Object":function(t,e,r){return this(t,n(e),r)}});f._simplify=!0,f.toTex=function(t){return d.apply(null,t.args)};var d=e("_derivTex",{"Node, SymbolNode":function(t,e){return zr(t)&&"string"===Jr(t.value)?d(n(t.value).toString(),e.toString(),1):d(t.toString(),e.toString(),1)},"Node, ConstantNode":function(t,e){if("string"===Jr(e.value))return d(t,n(e.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(t,e,r){return d(t.toString(),e.name,r.value)},"string, string, number":function(t,e,r){return(1===r?"{d\\over d"+e+"}":"{d^{"+r+"}\\over d"+e+"^{"+r+"}}")+"\\left[".concat(t,"\\right]")}}),m=e("constTag",{"Object, ConstantNode, string":function(t,e){return t[e]=!0,!0},"Object, SymbolNode, string":function(t,e,r){return e.name!==r&&(t[e]=!0,!0)},"Object, ParenthesisNode, string":function(t,e,r){return m(t,e.content,r)},"Object, FunctionAssignmentNode, string":function(t,e,r){return-1===e.params.indexOf(r)?(t[e]=!0,!0):m(t,e.expr,r)},"Object, FunctionNode | OperatorNode, string":function(t,e,r){if(e.args.length>0){for(var n=m(t,e.args[0],r),i=1;i<e.args.length;++i)n=m(t,e.args[i],r)&&n;if(n)return t[e]=!0,!0}return!1}}),g=e("_derivative",{"ConstantNode, Object":function(t){return y(0)},"SymbolNode, Object":function(t,e){return void 0!==e[t]?y(0):y(1)},"ParenthesisNode, Object":function(t,e){return new p(g(t.content,e))},"FunctionAssignmentNode, Object":function(t,e){return void 0!==e[t]?y(0):g(t.expr,e)},"FunctionNode, Object":function(t,e){if(1!==t.args.length&&function(t){if("log"!==t.name&&"nthRoot"!==t.name&&"pow"!==t.name||2!==t.args.length){for(var e=0;e<t.args.length;++e)t.args[e]=y(0);throw t.compile().evaluate(),new Error("Expected TypeError, but none found")}}(t),void 0!==e[t])return y(0);var r,n,i,s,o=t.args[0],a=!1,u=!1;switch(t.name){case"cbrt":a=!0,n=new c("*","multiply",[y(3),new c("^","pow",[o,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(1===t.args.length)a=!0,n=new c("*","multiply",[y(2),new l("sqrt",[o])]);else if(2===t.args.length)return e[r=new c("/","divide",[y(1),t.args[1]])]=e[t.args[1]],g(new c("^","pow",[o,r]),e);break;case"log10":r=y(10);case"log":if(r||1!==t.args.length){if(1===t.args.length&&r||2===t.args.length&&void 0!==e[t.args[1]])n=new c("*","multiply",[o.clone(),new l("log",[r||t.args[1]])]),a=!0;else if(2===t.args.length)return g(new c("/","divide",[new l("log",[o]),new l("log",[t.args[1]])]),e)}else n=o.clone(),a=!0;break;case"pow":return e[r]=e[t.args[1]],g(new c("^","pow",[o,t.args[1]]),e);case"exp":n=new l("exp",[o.clone()]);break;case"sin":n=new l("cos",[o.clone()]);break;case"cos":n=new c("-","unaryMinus",[new l("sin",[o.clone()])]);break;case"tan":n=new c("^","pow",[new l("sec",[o.clone()]),y(2)]);break;case"sec":n=new c("*","multiply",[t,new l("tan",[o.clone()])]);break;case"csc":u=!0,n=new c("*","multiply",[t,new l("cot",[o.clone()])]);break;case"cot":u=!0,n=new c("^","pow",[new l("csc",[o.clone()]),y(2)]);break;case"asin":a=!0,n=new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])]);break;case"acos":a=!0,u=!0,n=new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])]);break;case"atan":a=!0,n=new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)]);break;case"asec":a=!0,n=new c("*","multiply",[new l("abs",[o.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acsc":a=!0,u=!0,n=new c("*","multiply",[new l("abs",[o.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acot":a=!0,u=!0,n=new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)]);break;case"sinh":n=new l("cosh",[o.clone()]);break;case"cosh":n=new l("sinh",[o.clone()]);break;case"tanh":n=new c("^","pow",[new l("sech",[o.clone()]),y(2)]);break;case"sech":u=!0,n=new c("*","multiply",[t,new l("tanh",[o.clone()])]);break;case"csch":u=!0,n=new c("*","multiply",[t,new l("coth",[o.clone()])]);break;case"coth":u=!0,n=new c("^","pow",[new l("csch",[o.clone()]),y(2)]);break;case"asinh":a=!0,n=new l("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)])]);break;case"acosh":a=!0,n=new l("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),y(2)]),y(1)])]);break;case"atanh":a=!0,n=new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])]);break;case"asech":a=!0,u=!0,n=new c("*","multiply",[o.clone(),new l("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])])])]);break;case"acsch":a=!0,u=!0,n=new c("*","multiply",[new l("abs",[o.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),y(2)]),y(1)])])]);break;case"acoth":a=!0,u=!0,n=new c("-","subtract",[y(1),new c("^","pow",[o.clone(),y(2)])]);break;case"abs":n=new c("/","divide",[new l(new h("abs"),[o.clone()]),o.clone()]);break;case"gamma":default:throw new Error('Function "'+t.name+'" is not supported by derivative, or a wrong number of arguments is passed')}a?(i="/",s="divide"):(i="*",s="multiply");var p=g(o,e);return u&&(p=new c("-","unaryMinus",[p])),new c(i,s,[p,n])},"OperatorNode, Object":function(t,e){if(void 0!==e[t])return y(0);if("+"===t.op)return new c(t.op,t.fn,t.args.map((function(t){return g(t,e)})));if("-"===t.op){if(t.isUnary())return new c(t.op,t.fn,[g(t.args[0],e)]);if(t.isBinary())return new c(t.op,t.fn,[g(t.args[0],e),g(t.args[1],e)])}if("*"===t.op){var r=t.args.filter((function(t){return void 0!==e[t]}));if(r.length>0){var n=t.args.filter((function(t){return void 0===e[t]})),i=1===n.length?n[0]:new c("*","multiply",n),a=r.concat(g(i,e));return new c("*","multiply",a)}return new c("+","add",t.args.map((function(r){return new c("*","multiply",t.args.map((function(t){return t===r?g(t,e):t.clone()})))})))}if("/"===t.op&&t.isBinary()){var u=t.args[0],p=t.args[1];return void 0!==e[p]?new c("/","divide",[g(u,e),p]):void 0!==e[u]?new c("*","multiply",[new c("-","unaryMinus",[u]),new c("/","divide",[g(p,e),new c("^","pow",[p.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[g(u,e),p.clone()]),new c("*","multiply",[u.clone(),g(p,e)])]),new c("^","pow",[p.clone(),y(2)])])}if("^"===t.op&&t.isBinary()){var h=t.args[0],f=t.args[1];if(void 0!==e[h])return zr(h)&&(o(h.value)||s(h.value,1))?y(0):new c("*","multiply",[t,new c("*","multiply",[new l("log",[h.clone()]),g(f.clone(),e)])]);if(void 0!==e[f]){if(zr(f)){if(o(f.value))return y(0);if(s(f.value,1))return g(h,e)}var d=new c("^","pow",[h.clone(),new c("-","subtract",[f,y(1)])]);return new c("*","multiply",[f.clone(),new c("*","multiply",[g(h,e),d])])}return new c("*","multiply",[new c("^","pow",[h.clone(),f.clone()]),new c("+","add",[new c("*","multiply",[g(h,e),new c("/","divide",[f.clone(),h.clone()])]),new c("*","multiply",[g(f,e),new l("log",[h.clone()])])])])}throw new Error('Operator "'+t.op+'" is not supported by derivative, or a wrong number of arguments is passed')}});function y(t,e){return new u(a(t,e||r.number))}return f})),L_=nn("apply",["typed","isInteger"],(t=>{var{typed:e,isInteger:r}=t,n=Jo({typed:e,isInteger:r});return e("apply",{"...any":function(t){var e=t[1];dr(e)?t[1]=e-1:mr(e)&&(t[1]=e.minus(1));try{return n.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0});function D_(t,e,r){var n=t.filter((function(t){return Zr(t)&&!(t.name in e)&&!(t.name in r)}))[0];if(!n)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=n.name,s=Object.create(r),o=t.compile();return function(t){return s[i]=t,o.evaluate(s)}}var q_=nn("filter",["typed"],(t=>{var{typed:e}=t;function r(t,e,r){var i,s;return t[0]&&(i=t[0].compile().evaluate(r)),t[1]&&(s=Zr(t[1])||Fr(t[1])?t[1].compile().evaluate(r):D_(t[1],e,r)),n(i,s)}r.rawArgs=!0;var n=e("filter",{"Array, function":B_,"Matrix, function":function(t,e){return t.create(B_(t.toArray(),e))},"Array, RegExp":Bs,"Matrix, RegExp":function(t,e){return t.create(Bs(t.toArray(),e))}});return r}),{isTransformFunction:!0});function B_(t,e){var r=Rn(e);return qs(t,(function(t,n,i){return 1===r?e(t):2===r?e(t,[n+1]):e(t,[n+1],i)}))}var U_=nn("map",["typed"],(t=>{var{typed:e}=t;function r(t,e,r){var i,s;return t[0]&&(i=t[0].compile().evaluate(r)),t[1]&&(s=Zr(t[1])||Fr(t[1])?t[1].compile().evaluate(r):D_(t[1],e,r)),n(i,s)}r.rawArgs=!0;var n=e("map",{"Array, function":function(t,e){return $_(t,e,t)},"Matrix, function":function(t,e){return t.create($_(t.valueOf(),e,t))}});return r}),{isTransformFunction:!0});function $_(t,e,r){var n=Rn(e);return function t(i,s){return Array.isArray(i)?Ls(i,(function(e,r){return t(e,s.concat(r+1))})):1===n?e(i):2===n?e(i,s):e(i,s,r)}(t,[])}var z_=nn("forEach",["typed"],(t=>{var{typed:e}=t;function r(t,e,r){var i,s;return t[0]&&(i=t[0].compile().evaluate(r)),t[1]&&(s=Zr(t[1])||Fr(t[1])?t[1].compile().evaluate(r):D_(t[1],e,r)),n(i,s)}r.rawArgs=!0;var n=e("forEach",{"Array | Matrix, function":function(t,e){var r=Rn(e);!function n(i,s){Array.isArray(i)?Ds(i,(function(t,e){n(t,s.concat(e+1))})):1===r?e(i):2===r?e(i,s):e(i,s,t)}(t.valueOf(),[])}});return r}),{isTransformFunction:!0}),F_=nn("subset",["typed","matrix"],(t=>{var{typed:e,matrix:r}=t,n=Uc({typed:e,matrix:r});return e("subset",{"...any":function(t){try{return n.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),G_=nn("index",["Index"],(t=>{var{Index:e}=t;return function(){for(var t=[],r=0,n=arguments.length;r<n;r++){var i=arguments[r];if(Ar(i))i.start--,i.end-=i.step>0?0:2;else if(i&&!0===i.isSet)i=i.map((function(t){return t-1}));else if(xr(i)||_r(i))i=i.map((function(t){return t-1}));else if(dr(i))i--;else if(mr(i))i=i.toNumber()-1;else if("string"!=typeof i)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");t[r]=i}var s=new e;return e.apply(s,t),s}}),{isTransformFunction:!0}),V_=nn("concat",["typed","matrix","isInteger"],(t=>{var{typed:e,matrix:r,isInteger:n}=t,i=yc({typed:e,matrix:r,isInteger:n});return e("concat",{"...any":function(t){var e=t.length-1,r=t[e];dr(r)?t[e]=r-1:mr(r)&&(t[e]=r.minus(1));try{return i.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0});function j_(t){if(2===t.length&&wr(t[0])){var e=(t=t.slice())[1];dr(e)?t[1]=e-1:mr(e)&&(t[1]=e.minus(1))}return t}var H_=nn("max",["typed","config","numeric","larger"],(t=>{var{typed:e,config:r,numeric:n,larger:i}=t,s=hf({typed:e,config:r,numeric:n,larger:i});return e("max",{"...any":function(t){t=j_(t);try{return s.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),W_=nn("min",["typed","config","numeric","smaller"],(t=>{var{typed:e,config:r,numeric:n,smaller:i}=t,s=Bh({typed:e,config:r,numeric:n,smaller:i});return e("min",{"...any":function(t){t=j_(t);try{return s.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),Y_=nn("sum",["typed","config","add","numeric"],(t=>{var{typed:e,config:r,add:n,numeric:i}=t,s=Hh({typed:e,config:r,add:n,numeric:i});return e("sum",{"...any":function(t){t=j_(t);try{return s.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),X_=nn("column",["typed","Index","matrix","range"],(t=>{var{typed:e,Index:r,matrix:n,range:i}=t,s=bf({typed:e,Index:r,matrix:n,range:i});return e("column",{"...any":function(t){var e=t.length-1,r=t[e];dr(r)&&(t[e]=r-1);try{return s.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),Z_=nn("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq"],(t=>{var{typed:e,config:r,matrix:n,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:u}=t,l=of({typed:e,config:r,matrix:n,bignumber:i,smaller:s,smallerEq:o,larger:a,largerEq:u});return e("range",{"...any":function(t){return"boolean"!=typeof t[t.length-1]&&t.push(!0),l.apply(null,t)}})}),{isTransformFunction:!0}),K_="diff",J_=nn(K_,["typed","matrix","subtract","number","bignumber"],(t=>{var{typed:e,matrix:r,subtract:n,number:i,bignumber:s}=t,o=_f({typed:e,matrix:r,subtract:n,number:i,bignumber:s});return e(K_,{"...any":function(t){t=j_(t);try{return o.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),Q_=nn("row",["typed","Index","matrix","range"],(t=>{var{typed:e,Index:r,matrix:n,range:i}=t,s=af({typed:e,Index:r,matrix:n,range:i});return e("row",{"...any":function(t){var e=t.length-1,r=t[e];dr(r)&&(t[e]=r-1);try{return s.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),tw=nn("mean",["typed","add","divide"],(t=>{var{typed:e,add:r,divide:n}=t,i=Sd({typed:e,add:r,divide:n});return e("mean",{"...any":function(t){t=j_(t);try{return i.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),ew="variance",rw=nn(ew,["typed","add","subtract","multiply","divide","apply","isNaN"],(t=>{var{typed:e,add:r,subtract:n,multiply:i,divide:s,apply:o,isNaN:a}=t,u=Md({typed:e,add:r,subtract:n,multiply:i,divide:s,apply:o,isNaN:a});return e(ew,{"...any":function(t){t=j_(t);try{return u.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0}),nw=nn("std",["typed","sqrt","variance"],(t=>{var{typed:e,sqrt:r,variance:n}=t,i=Gd({typed:e,sqrt:r,variance:n});return e("std",{"...any":function(t){t=j_(t);try{return i.apply(null,t)}catch(t){throw n_(t)}}})}),{isTransformFunction:!0});function iw(){return(iw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var sw={},ow={},aw={},uw=Ox({mathWithTransform:ow}),lw=Ix({Node:uw}),cw=Px({Node:uw,ResultSet:vm}),pw=zx({Node:uw}),hw=Fx({Node:uw}),fw=Gx({Node:uw}),dw=Yx({Node:uw}),mw=Xx({math:sw}),gw=Zx({classes:aw}),yw=Kx({Node:uw}),vw=Jx({Node:uw}),bw=Qx({Node:uw}),xw=t_({Node:uw,typed:jm}),_w=r_({Chain:mw,typed:jm}),ww=s_({Node:uw,subset:Sy}),Ew=o_({Node:uw,Range:xm,size:Ey}),Sw=a_({matrix:ly,Node:uw,subset:Sy}),Aw=u_({Unit:Eb,Node:uw,math:sw}),Nw=c_({Node:uw,SymbolNode:Aw,math:sw}),Mw=f_({AccessorNode:ww,ArrayNode:lw,AssignmentNode:Sw,BlockNode:cw,ConditionalNode:yw,ConstantNode:pw,FunctionAssignmentNode:xw,FunctionNode:Nw,IndexNode:Ew,ObjectNode:hw,OperatorNode:vw,ParenthesisNode:fw,RangeNode:bw,RelationalNode:dw,SymbolNode:Aw,config:fr,numeric:wv,typed:jm}),kw=m_({parse:Mw,typed:jm}),Cw=g_({parse:Mw}),Tw=y_({parse:Mw}),Ow=w_({Help:Cw,mathWithTransform:ow,typed:jm}),Iw=S_({parse:Mw,typed:jm}),Pw=C_({bignumber:yv,fraction:Fg,ConstantNode:pw,FunctionNode:Nw,OperatorNode:vw,ParenthesisNode:fw,SymbolNode:Aw,add:zy,config:fr,divide:yb,equal:$v,isZero:Vy,mathWithTransform:ow,multiply:Wy,parse:Mw,pow:tv,subtract:Lv,typed:jm});iw(sw,{reviver:gw,false:_m,null:wm,true:Em,replacer:Nm,i:Mm,LN10:km,LOG10E:Cm,NaN:Tm,pi:Om,SQRT1_2:Im,tau:Pm,efimovFactor:Rm,fineStructure:Lm,sackurTetrode:Dm,weakMixingAngle:qm,e:Um,Infinity:$m,LOG2E:zm,PI:Om,version:Fm,E:Um,phi:Vm,typed:jm,isInteger:Hm,isNumeric:Wm,isPositive:Ym,isNaN:Xm,equalScalar:Zm,number:Km,boolean:Jm,complex:Qm,splitUnit:tg,unaryPlus:eg,apply:rg,cube:ng,expm1:ig,log10:sg,multiplyScalar:og,sign:ag,square:ug,bitNot:lg,arg:cg,im:pg,not:hg,filter:fg,forEach:dg,map:mg,erf:gg,format:yg,oct:vg,print:bg,isPrime:xg,acos:_g,acot:wg,acsc:Eg,asec:Sg,asin:Ag,atan:Ng,atanh:Mg,cosh:kg,coth:Cg,csch:Tg,sech:Og,sinh:Ig,tanh:Pg,chain:_w,combinations:Rg,pickRandom:Lg,randomInt:Dg,LN2:qg,clone:Bg,hasNumericValue:Ug,typeOf:$g,string:zg,fraction:Fg,unaryMinus:Gg,addScalar:Vg,exp:jg,log2:Hg,sqrt:Wg,conj:Yg,getMatrixDataType:Xg,mode:Zg,bin:Kg,acosh:Jg,acsch:Qg,asinh:ty,cos:ey,csc:ry,sin:ny,combinationsWithRep:iy,random:sy,SQRT2:oy,isNegative:ay,matrix:ly,cbrt:cy,gcd:py,mod:hy,nthRoot:fy,xgcd:dy,bitAnd:my,bitXor:gy,or:yy,concat:vy,diag:by,identity:xy,ones:_y,reshape:wy,size:Ey,subset:Sy,zeros:Ay,hex:Ny,round:My,leftShift:ky,rightLogShift:Cy,compare:Ty,compareText:Oy,smaller:Iy,larger:Py,unequal:Ry,sparse:qy,acoth:By,atan2:Uy,sec:$y,add:zy,dot:Fy,composition:Gy,isZero:Vy,abs:jy,floor:Hy,multiply:Wy,dotMultiply:Yy,re:Xy,flatten:Zy,resize:Ky,squeeze:Jy,to:Qy,pow:tv,dotPow:ev,rightArithShift:rv,compareNatural:nv,equalText:iv,largerEq:sv,partitionSelect:ov,asech:uv,tan:lv,setDifference:cv,setIntersect:pv,setMultiplicity:hv,setSize:fv,trace:dv,quantileSeq:mv,gamma:gv,bignumber:yv,lcm:vv,bitOr:bv,kron:xv,transpose:_v,numeric:wv,and:Ev,smallerEq:Sv,sort:Av,min:Nv,cot:Mv,setDistinct:kv,setPowerset:Cv,index:Tv,sum:Ov,factorial:Iv,permutations:Pv,ceil:Rv,subtract:Lv,cross:Dv,range:qv,row:Bv,prod:Uv,equal:$v,max:zv,setCartesian:Fv,setSymDifference:Gv,fix:Vv,column:jv,diff:Hv,ctranspose:Wv,deepEqual:Yv,setIsSubset:Xv,xor:Zv,divideScalar:Kv,nthRoots:Jv,lsolve:Qv,lsolveAll:tb,setUnion:rb,lup:nb,slu:ib,det:sb,distance:ob,stirlingS2:ab,catalan:ub,count:lb,log:cb,dotDivide:pb,usolveAll:hb,hypot:fb,qr:db,inv:mb,expm:gb,divide:yb,mean:vb,variance:bb,kldivergence:xb,bellNumbers:_b,log1p:wb,createUnit:Sb,eigs:Ab,intersect:Nb,std:Mb,atomicMass:kb,bohrMagneton:Cb,boltzmann:Tb,conductanceQuantum:Ob,deuteronMass:Ib,electronMass:Pb,faraday:Rb,firstRadiation:Lb,gravitationConstant:Db,hartreeEnergy:qb,klitzing:Bb,magneticConstant:Ub,molarMass:$b,molarPlanckConstant:zb,neutronMass:Fb,planckCharge:Gb,planckLength:Vb,planckTemperature:jb,protonMass:Hb,reducedPlanckConstant:Wb,secondRadiation:Yb,stefanBoltzmann:Xb,vacuumImpedance:Zb,usolve:Kb,norm:Jb,lusolve:Qb,sqrtm:tx,multinomial:ex,avogadro:rx,classicalElectronRadius:nx,electricConstant:ix,fermiCoupling:sx,gravity:ox,loschmidt:ax,molarMassC12:ux,nuclearMagneton:lx,planckMass:cx,quantumOfCirculation:px,speedOfLight:hx,wienDisplacement:fx,rotationMatrix:dx,median:mx,bohrRadius:gx,elementaryCharge:yx,inverseConductanceQuantum:vx,molarVolume:bx,planckTime:xx,thomsonCrossSection:_x,rotate:wx,parse:Mw,evaluate:kw,mad:Ex,coulomb:Sx,magneticFluxQuantum:Ax,rydberg:Nx,unit:Mx,help:Ow,gasConstant:kx,compile:Iw,simplify:Pw,rationalize:O_({bignumber:yv,fraction:Fg,ConstantNode:pw,FunctionNode:Nw,OperatorNode:vw,ParenthesisNode:fw,SymbolNode:Aw,add:zy,config:fr,divide:yb,equal:$v,isZero:Vy,mathWithTransform:ow,multiply:Wy,parse:Mw,pow:tv,simplify:Pw,subtract:Lv,typed:jm}),parser:P_({Parser:Tw,typed:jm}),planckConstant:Cx,derivative:R_({ConstantNode:pw,FunctionNode:Nw,OperatorNode:vw,ParenthesisNode:fw,SymbolNode:Aw,config:fr,equal:$v,isZero:Vy,numeric:wv,parse:Mw,simplify:Pw,typed:jm}),config:fr}),iw(ow,sw,{apply:L_({isInteger:Hm,typed:jm}),filter:q_({typed:jm}),map:U_({typed:jm}),forEach:z_({typed:jm}),subset:F_({matrix:ly,typed:jm}),index:G_({Index:av}),concat:V_({isInteger:Hm,matrix:ly,typed:jm}),max:H_({config:fr,larger:Py,numeric:wv,typed:jm}),min:W_({config:fr,numeric:wv,smaller:Iy,typed:jm}),sum:Y_({add:zy,config:fr,numeric:wv,typed:jm}),column:X_({Index:av,matrix:ly,range:qv,typed:jm}),range:Z_({bignumber:yv,matrix:ly,config:fr,larger:Py,largerEq:sv,smaller:Iy,smallerEq:Sv,typed:jm}),diff:J_({bignumber:yv,matrix:ly,number:Km,subtract:Lv,typed:jm}),row:Q_({Index:av,matrix:ly,range:qv,typed:jm}),mean:tw({add:zy,divide:yb,typed:jm}),variance:rw({add:zy,apply:rg,divide:yb,isNaN:Xm,multiply:Wy,subtract:Lv,typed:jm}),std:nw({sqrt:Wg,typed:jm,variance:bb})}),iw(aw,{ResultSet:vm,Complex:bm,Range:xm,Node:uw,ArrayNode:lw,BlockNode:cw,ConstantNode:pw,ObjectNode:hw,ParenthesisNode:fw,RelationalNode:dw,Chain:mw,BigNumber:Sm,Matrix:Am,ConditionalNode:yw,OperatorNode:vw,Fraction:Bm,RangeNode:bw,DenseMatrix:Gm,FunctionAssignmentNode:xw,SparseMatrix:uy,ImmutableDenseMatrix:Ly,FibonacciHeap:Dy,AccessorNode:ww,IndexNode:Ew,Index:av,AssignmentNode:Sw,Spa:eb,Unit:Eb,SymbolNode:Aw,FunctionNode:Nw,Help:Cw,Parser:Tw}),mw.createProxy(sw);function Rw(t,e,r=1e-6){return Math.abs(t-e)<r}function Lw(t,e,r=[]){const n=e-t;let i=Math.floor(Math.random()*(n+1));if(Number.isInteger(r)&&(r=[r]),r.length>0)for(;-1!==r.indexOf(t+i);)i=Math.floor(Math.random()*(n+1));return t+i}function Dw(t,e){for(let r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1)}function qw(t,e,r=[],n=1){const i=[];for(let r=t;r<=e;r=zw(r+n))i.push(r);for(let t=0;t<r.length;t++)Dw(i,r[t]);return i}function Bw(t){return t<0?-1:1}function Uw(t,e=2){const r=Math.pow(10,e);return Math.round(t*r)/r}function $w(t,e=2){const r=Math.pow(10,e);return String(Math.round(t*r)/r).replace(".",",")}function zw(t,e=!1){return e?Uw(parseFloat(cr().eval("float("+t+")")),e):parseFloat(cr().eval("float("+t+")"))}function Fw(t){let e="";return t<=26?e=String.fromCharCode(64+t):t%26==0?(e=String.fromCharCode(64+Math.floor(t/26)-1),e+=String.fromCharCode(90)):(e=String.fromCharCode(64+Math.floor(t/26)),e+=String.fromCharCode(64+t%26)),e}function Gw(t){if(sortieHtml)return Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(t).toString().replace(/\s+/g,"\\thickspace ");{let e;return e=t>999||Hw(t)>3?"\\numprint{"+t.toString().replace(".",",")+"}":t.toString().replace(".",","),e}}function Vw(t){if(sortieHtml)return Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(t).toString().replace(/\s+/g," ");{let e;return e=t>999||Hw(t)>3?"\\numprint{"+t.toString().replace(".",",")+"}":t.toString().replace(".",","),e}}function jw(t){const e=t.toString(),r=e.split(".")[0],n=e.split(".")[1];let i="";if(r.length>3){for(let t=0;t<Math.floor(r.length/3);t++)i=" "+r.slice(r.length-3*t-3,r.length-3*t)+i;i=r.slice(0,r.length-NaN)+i}else i=r;return" "===i[0]&&(i=i.substring(1,i.length)),void 0!==n&&(i+=","+n),i}function Hw(t){return String(t).indexOf(".")>0?String(t).split(".")[1].length:0}function Ww(t,e){let r=e;if(Number.isInteger(t)&&Number.isInteger(e)){for(;r%t!=0;)r+=1;return r}return Rw(Math.floor(e/t,e/t))?e:(reste=e/t-Math.floor(e/t),e-reste*t+t)}function Yw(t,e){const r=Ww(t,e);return r!==e?r-t:e}Object.fromEntries||Object.defineProperty(Object,"fromEntries",{value(t){if(!t||!t[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");const e={};return Object.keys(t).forEach((r=>{const[n,i]=t[r];e[n]=i})),e}}),Math.degres=function(t){return 180*t/Math.PI},Math.radians=function(t){return t*Math.PI/180};let Xw=0;function Zw(){this.positionLabel="above",this.isVisible=!0,this.color="black",this.style="",this.styleTikz="",this.epaisseur=1,this.opacite=1,this.pointilles=!1,this.id=Xw,Xw++,mathalea.objets2D.push(this)}function Kw(t,e,r,n="above"){this.typeObjet="point",Xw++,this.id=Xw,1===arguments.length?this.nom=t:2===arguments.length?(this.x=Uw(t,3),this.y=Uw(e,3)):(this.x=Uw(t,3),this.y=Uw(e,3),this.nom=r),this.positionLabel=n,this.xSVG=function(t){return Uw(this.x*t,3)},this.ySVG=function(t){return-Uw(this.y*t,3)},this.nom||(this.nom=" ")}function Jw(...t){return new Kw(...t)}function Qw(...t){Zw.call(this),this.taille=3,this.epaisseur=1,this.opacite=.8,this.style="x","string"==typeof t[t.length-1]?(this.color=t[t.length-1],t.length--):this.color="black",this.svg=function(e){const r=[];let n,i,s,o,a;for(const u of t)u.constructor===Kw&&("x"===this.style?(n=RE(Jw(u.x-this.taille/e,u.y+this.taille/e),Jw(u.x+this.taille/e,u.y-this.taille/e),this.color),i=RE(Jw(u.x-this.taille/e,u.y-this.taille/e),Jw(u.x+this.taille/e,u.y+this.taille/e),this.color),n.epaisseur=this.epaisseur,i.epaisseur=this.epaisseur,n.opacite=this.opacite,i.opacite=this.opacite,r.push(n,i),n.isVisible=!1,i.isVisible=!1):"o"===this.style?(s=Jw(u.x,u.y),a=YE(s,this.taille/e,this.color),a.epaisseur=this.epaisseur,a.opacite=this.opacite,a.couleurDeRemplissage=this.color,a.opaciteDeRemplissage=this.opacite/2,r.push(a)):"#"===this.style?(s=Jw(u.x-this.taille/e,u.y-this.taille/e),o=Jw(u.x+this.taille/e,u.y-this.taille/e),a=zE(s,o,this.color),a.epaisseur=this.epaisseur,a.opacite=this.opacite,a.couleurDeRemplissage=this.color,a.opaciteDeRemplissage=this.opacite/2,r.push(a)):"+"===this.style?(n=RE(Jw(u.x,u.y+this.taille/e),Jw(u.x,u.y-this.taille/e),this.color),i=RE(Jw(u.x-this.taille/e,u.y),Jw(u.x+this.taille/e,u.y),this.color),n.epaisseur=this.epaisseur,i.epaisseur=this.epaisseur,n.opacite=this.opacite,i.opacite=this.opacite,r.push(n,i)):"|"===this.style&&(n=RE(Jw(u.x,u.y+this.taille/e),Jw(u.x,u.y-this.taille/e),this.color),n.epaisseur=this.epaisseur,n.opacite=this.opacite,r.push(n)));let u="";for(const t of r)u+="\n\t"+t.svg(e);return u=`<g id="${this.id}">`+u+"</g>",u},this.tikz=function(){const e=[];let r,n,i,s,o;const a=this.taille*mathalea.scale/20;for(const u of t)u.constructor===Kw&&("x"===this.style?(r=RE(Jw(u.x-a,u.y+a),Jw(u.x+a,u.y-a),this.color),n=RE(Jw(u.x-a,u.y-a),Jw(u.x+a,u.y+a),this.color),r.epaisseur=this.epaisseur,n.epaisseur=this.epaisseur,r.opacite=this.opacite,n.opacite=this.opacite,e.push(r,n)):"o"===this.style?(i=Jw(u.x,u.y),o=YE(i,a,this.color),o.epaisseur=this.epaisseur,o.opacite=this.opacite,o.couleurDeRemplissage=this.color,o.opaciteDeRemplissage=this.opacite/2,e.push(o)):"#"===this.style?(i=Jw(u.x-a,u.y-a),s=Jw(u.x+a,u.y-a),o=FE(i,s,this.color),o.epaisseur=this.epaisseur,o.opacite=this.opacite,o.couleurDeRemplissage=this.color,o.opaciteDeRemplissage=this.opacite/2,e.push(o)):"+"===this.style?(r=RE(Jw(u.x,u.y+a),Jw(u.x,u.y-a),this.color),n=RE(Jw(u.x-a,u.y),Jw(u.x+a,u.y),this.color),r.epaisseur=this.epaisseur,n.epaisseur=this.epaisseur,r.opacite=this.opacite,n.opacite=this.opacite,e.push(r,n)):"|"===this.style&&(r=RE(Jw(u.x,u.y+a),Jw(u.x,u.y-a),this.color),r.epaisseur=this.epaisseur,r.opacite=this.opacite,e.push(r)));let u="";for(const t of e)u+="\n\t"+t.tikz();return u}}function tE(...t){return new Qw(...t)}function eE(t,e){let r,n;Zw.call(this),this.lieu=t,this.taille=.2,this.x=t.x,this.y=t.y,e.constructor===Kw&&(r=iE(t,e,1),this.direction=dS(r,t,90)),e.constructor===hE&&(n=gE(t,e),n.isVisible=!1,this.direction=iE(Jw(n.x1,n.y1),Jw(n.x2,n.y2),1)),this.svg=function(t){const e=RE(iE(this.lieu,this.direction,20*this.taille/t),iE(this.lieu,this.direction,20*-this.taille/t));return this.id=e.id,e.isVisible=!1,e.svg(t)},this.tikz=function(){return RE(iE(this.lieu,this.direction,this.taille/mathalea.scale),iE(this.lieu,this.direction,-this.taille/mathalea.scale)).tikz()}}function rE(t,e){return new eE(t,e)}function nE(t,e,r,n="above"){return new Kw(zw((t.x+e.x)/2),zw((t.y+e.y)/2),r,n)}function iE(t,e,r,n="",i="above"){return void 0!==r&&"string"!=typeof r||(r=zw(DA(t,e)*Lw(15,85)/100)),gS(e,t,zw(r/DA(t,e)),n,i)}function sE(t,e,r){return 0==(r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y)}function oE(t,e,r,n="above"){return 0===t.b?Jw(zw(-t.c/t.a),e,r,n):0===t.a?Jw(e,zw(-t.c/t.b),r,n):Jw(e,zw((-t.c-t.a*e)/t.b),r,n)}function aE(t,e,r="",n="above"){let i,s;return e.a*t.b-e.b*t.a==0?(console.log("Les droites sont parallèles, pas de point d'intersection"),!1):(s=zw((e.c*t.a-t.c*e.a)/(e.a*t.b-e.b*t.a)),i=0===t.a?zw((-e.c-e.b*s)/e.a):zw((-t.c-t.b*s)/t.a),Jw(i,s,r,n))}function uE(...t){const e=t.length,r=Lw(1,360),n=t[0],i=Jw(n.x+1,n.y),s=t[1];return!(e<2)&&(2===e?xS(i,n,r,s):3===e?"number"==typeof t[2]?xS(i,n,t[2],s):xS(i,n,r,s,t[2]):4===e?"number"==typeof t[2]?xS(i,n,t[2],s,t[3]):xS(i,n,r,s,t[2],t[3]):xS(i,n,t[2],s,t[3],t[4]))}function lE(...t){Zw.call(this),this.taille=1,"string"==typeof t[t.length-1]?(this.color=t[t.length-1],t.length--):this.color="black",this.svg=function(e){let r,n,i="";Array.isArray(t[0])?this.listePoints=t[0]:this.listePoints=t;for(const t of this.listePoints)switch(r=t.x,n=t.y,t.positionLabel){case"left":i+=IA(t.nom,r-10/e,n,this.color,10,10*this.taille,"").svg(e)+"\n";break;case"right":i+=IA(t.nom,r+10/e,n,this.color,10,10*this.taille,"").svg(e)+"\n";break;case"below":i+=IA(t.nom,r,n-10/e,this.color,10,10*this.taille,"").svg(e)+"\n";break;case"above":i+=IA(t.nom,r,n+10/e,this.color,10,10*this.taille,"").svg(e)+"\n";break;case"above right":i+=IA(t.nom,r+10/e,n+10/e,this.color,10,10*this.taille,"").svg(e)+"\n";break;case"below left":i+=IA(t.nom,r-10/e,n-10/e,this.color,10,10*this.taille,"").svg(e)+"\n";break;case"below right":i+=IA(t.nom,r+10/e,n-10/e,this.color,10,10*this.taille,"").svg(e)+"\n";break;default:i+=IA(t.nom,r-10/e,n+10/e,this.color,10,10*this.taille,"").svg(e)+"\n"}return i=`<g id="${this.id}">${i}</g>`,i},this.tikz=function(){let e="",r="";"black"!==this.color&&(r=`,${this.color}`);for(const n of t)e+=`\t\\draw (${n.x},${n.y}) node[${n.positionLabel}${r}] {$${n.nom}$};\n`;return e}}function cE(...t){return new lE(...t)}function pE(t,e="",r="above"){let n=0,i=0,s=0;for(const e of t.listePoints)n+=e.x,i+=e.y,s++;return new Kw(zw(n/s),zw(i/s),e,r)}function hE(t,e,r,n){let i,s,o,a,u,l,c,p;if(Zw.call(this),2===arguments.length?(this.nom="",this.x1=t.x,this.y1=t.y,this.x2=e.x,this.y2=e.y,this.a=zw(this.y1-this.y2),this.b=zw(this.x2-this.x1),this.c=zw((this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1)):3===arguments.length?"number"==typeof t?(this.nom="",this.a=t,this.b=e,this.c=r,i=t,s=e,o=r,Rw(i,0)?(this.x1=0,this.x2=1,this.y1=zw(-o/s),this.y2=zw(-o/s)):Rw(s,0)?(this.y1=0,this.y2=1,this.x1=zw(-o/i),this.x2=zw(-o/i)):(this.x1=0,this.y1=zw(-o/s),this.x2=1,this.y2=zw((-o-i)/s))):(this.x1=t.x,this.y1=t.y,this.x2=e.x,this.y2=e.y,this.a=zw(this.y1-this.y2),this.b=zw(this.x2-this.x1),this.c=zw((this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1),this.nom=r):4===arguments.length&&("number"==typeof t?(this.a=t,this.b=e,this.c=r,i=t,s=e,o=r,this.nom=n,Rw(i,0)?(this.x1=0,this.x2=1,this.y1=zw(-o/s),this.y2=zw(-o/s)):Rw(s,0)?(this.y1=0,this.y2=1,this.x1=zw(-o/i),this.x2=zw(-o/i)):(this.x1=0,this.y1=zw(-o/s),this.x2=1,this.y2=zw((-o-i)/s))):(this.x1=t.x,this.y1=t.y,this.x2=e.x,this.y2=e.y,this.a=zw(this.y1-this.y2),this.b=zw(this.x2-this.x1),this.c=zw((this.x1-this.x2)*this.y1+(this.y2-this.y1)*this.x1),this.nom=r,this.color=n)),0!==this.b&&(this.pente=zw(-this.a/this.b)),this.x1>this.x2&&(a=this.x1,u=this.y1,this.x1=this.x2+0,this.y1=this.y2+0,this.x2=a,this.y2=u),this.normal=TE(this.a,this.b),this.directeur=TE(this.b,-this.a),this.angleAvecHorizontale=UA(Jw(1,0),Jw(0,0),Jw(this.directeur.x,this.directeur.y)),""!==this.nom){if(Rw(this.b,0,.1))l=-this.c/this.a+.8,c=mathalea.fenetreMathalea2d[1]+1;else if(Rw(this.a,0,.1))l=mathalea.fenetreMathalea2d[0]+.8,c=-this.c/this.b+.8;else{const t=(-this.a*(mathalea.fenetreMathalea2d[0]+1)-this.c)/this.b,e=(-this.a*(mathalea.fenetreMathalea2d[2]-1)-this.c)/this.b,r=(-this.b*(mathalea.fenetreMathalea2d[1]+1)-this.c)/this.a,n=(-this.b*(mathalea.fenetreMathalea2d[3]-1)-this.c)/this.a;t>mathalea.fenetreMathalea2d[1]&&t<mathalea.fenetreMathalea2d[3]?(l=mathalea.fenetreMathalea2d[0]+1,c=t+this.pente):e>mathalea.fenetreMathalea2d[1]&&e<mathalea.fenetreMathalea2d[3]?(l=mathalea.fenetreMathalea2d[2]-1,c=e-this.pente):r>mathalea.fenetreMathalea2d[0]&&r<mathalea.fenetreMathalea2d[2]?(l=r,c=mathalea.fenetreMathalea2d[1]+Math.abs(this.pente)):n>mathalea.fenetreMathalea2d[0]&&n<mathalea.fenetreMathalea2d[2]?(l=n,c=mathalea.fenetreMathalea2d[3]+this.pente):(l=(mathalea.fenetreMathalea2d[0]+mathalea.fenetreMathalea2d[2])/2,c=oE(this,l).y)}l=Uw(l,2),c=Uw(c,2),p=IA(this.nom,l,c,"black",20,0,"")}this.svg=function(t){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);const e=Jw(this.x1,this.y1),r=Jw(this.x2,this.y2),n=iE(e,r,-50),i=iE(r,e,-50);return""===this.nom?`<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${i.xSVG(t)}" y2="${i.ySVG(t)}" stroke="${this.color}" ${this.style} id ="${this.id}" />`:`<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${i.xSVG(t)}" y2="${i.ySVG(t)}" stroke="${this.color}" ${this.style} id ="${this.id}" />`+p.svg(t)},this.tikz=function(){const t=[];if(this.color.length>1&&"black"!==this.color&&t.push(this.color),1!==this.epaisseur&&t.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:t.push(" dash dot ");break;case 2:t.push(" densely dash dot dot ");break;case 3:t.push(" dash dot dot ");break;case 4:t.push(" dotted ");break;default:t.push(" dashed ")}1!==this.opacite&&t.push(`opacity = ${this.opacite}`);let e=[];t.length>0&&(e="["+t.join(",")+"]");const r=Jw(this.x1,this.y1),n=Jw(this.x2,this.y2),i=iE(r,n,-50),s=iE(n,r,-50);return""!==this.nom?`\\draw${e} (${i.x},${i.y})--(${s.x},${s.y});`+p.tikz():`\\draw${e} (${i.x},${i.y})--(${s.x},${s.y});`},this.svgml=function(t,e){const r=Jw(this.x1,this.y1),n=Jw(this.x2,this.y2),i=RE(iE(r,n,-50),iE(n,r,-50),this.color);return i.isVisible=!1,i.svgml(t,e)+p.svg(t)},this.tikzml=function(t){const e=Jw(this.x1,this.y1),r=Jw(this.x2,this.y2),n=RE(iE(e,r,-50),iE(r,e,-50),this.color);return n.isVisible=!1,n.tikzml(t)+p.tikz()}}function fE(...t){return new hE(...t)}function dE(t,e,r="",n="black"){return fE(t,Jw(zw(t.x+e.x),zw(t.y+e.y)),r,n)}function mE(t,e,r="",n="black"){return dE(t,e.directeur,r,n)}function gE(t,e,r="",n="black"){return dE(t,e.normal,r,n)}function yE(t,e,r="",n="black"){return fE(t,Jw(zw(t.x+1),zw(t.y+e)),r,n)}function vE(t,e,r="",n="black"){const i=nE(t,e);return fE(dS(t,i,90),dS(t,i,-90),r,n)}function bE(t,e,r="black",n="×"){Zw.call(this),this.color=r;const i=nE(t,e),s=LS(dS(t,i,90),i,e,this.color),o=HS(n,this.color,t,i,i,e);s.isVisible=!1,o.isVisible=!1,this.svg=function(t){return`<g id="${this.id}">${s.svg(t)+"\n"+o.svg(t)}</g>`},this.tikz=function(){return s.tikz()+"\n"+o.tikz()},this.svgml=function(t,e){return s.svgml(t,e)+"\n"+o.svg(t)},this.tikzml=function(t){return s.tikzml(t)+"\n"+o.tikz()}}function xE(...t){return new bE(...t)}function _E(t,e,r="black",n="×",i=!0){Zw.call(this),this.color=r;const s=nE(t,e),o=fE(t,e),a=rE(s,o),u=HS(n,r,t,s,s,e);let l="";this.svg=function(t){return l=i?a.svg(t)+"\n"+u.svg(t):u.svg(t),l=`<g id="${this.id}">${l}</g>`,a.isVisible=!1,o.isVisible=!1,u.isVisible=!1,l},this.tikz=function(){return i?a.tikz()+"\n"+u.tikz():u.tikz()}}function wE(t,e,r=!1,n="blue",i="×",s="||",o="red",a=2){Zw.call(this);const u=nE(t,e),l=dS(t,u,90),c=dS(t,u,-90),p=iE(u,l,.785*DA(t,e)),h=iE(u,c,.785*DA(t,e)),f=rS(t,p),d=rS(e,p),m=rS(t,h),g=rS(e,h),y=vE(t,e);f.isVisible=!1,d.isVisible=!1,m.isVisible=!1,g.isVisible=!1,y.isVisible=!1,y.color=o,y.epaisseur=a;const v=xE(t,e,n,i);v.isVisible=!1;const b=[f,d,m,g,y,v];if(r){const r=RE(t,p);r.pointilles=!0;const i=RE(e,p);i.pointilles=!0;const o=RE(t,h);o.pointilles=!0;const a=RE(e,h);a.pointilles=!0;const u=HS(s,n,t,p,e,p,t,h,e,h);b.push(r,i,o,a,u,v)}this.svg=function(t){let e="";for(const r of b)e+="\n\t"+r.svg(t);return e=`<g id="${this.id}">${e}</g>`,e},this.tikz=function(){let t="";for(const e of b)t+="\n\t"+e.tikz();return t},this.svgml=function(t,e){let r="";for(const n of b)void 0===n.svgml?r+="\n\t"+n.svg(t):r+="\n\t"+n.svgml(t,e);return r},this.tikzml=function(t){let e="";for(const r of b)void 0===r.tikzml?e+="\n\t"+r.tikz():e+="\n\t"+r.tikzml(t);return e}}function EE(t,e,r,n="black"){const i=zw(UA(t,e,r)/2);return LE(e,dS(iE(e,t,3),e,i),n)}function SE(t,e,r,n="black",i="×"){Zw.call(this),this.color=n,this.mark=i,this.centre=e,this.depart=iE(e,t,1.5),this.demiangle=zw(UA(t,e,r)/2),this.lieu=dS(this.depart,e,this.demiangle),this.arrivee=iE(e,r,1.5),this.svg=function(t){const r=YS(iE(this.centre,this.depart,30/t),e,this.demiangle,30/t,this.mark,this.color,2,1),n=YS(iE(this.centre,this.lieu,30/t),e,this.demiangle,30/t,this.mark,this.color,2,1);return r.svg(t)+"\n"+n.svg(t)+"\n"},this.tikz=function(){const t=YS(iE(this.centre,this.depart,1.5/mathalea.scale),e,this.demiangle,1.5/mathalea.scale,this.mark,this.color,2,1),r=YS(iE(this.centre,this.lieu,1.5/mathalea.scale),e,this.demiangle,1.5/mathalea.scale,this.mark,this.color,2,1);return t.tikz()+"\n"+r.tikz()+"\n"}}function AE(t,e,r,n=!1,i="blue",s="×",o=5,a="red",u=2){const l=iE(e,t,o),c=iE(e,r,o),p=RE(e,l),h=RE(e,c);p.styleExtremites="-|",h.styleExtremites="-|";const f=fE(l,c);f.isVisible=!1;const d=yS(e,f),m=rS(c,d),g=rS(l,d),y=EE(t,e,r);y.color=a,y.epaisseur=u;const v=[p,h,m,g,y];if(n){const t=RE(l,d),r=RE(c,d);t.pointilles=!0,r.pointilles=!0;const n=HS(s,i,e,l,l,d,e,c,c,d);v.push(t,r,n)}this.svg=function(t){let e="";for(const r of v)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of v)t+="\n\t"+e.tikz();return t}}function NE(...t){if(Zw.call(this),Array.isArray(t[0])?(this.listePoints=t[0],this.color=t[1]):this.listePoints=t,this.nom="",t.length<15)for(const e of t)this.nom+=e.nom;this.svg=function(t){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);let e="";for(const r of this.listePoints)e+=`${zw(r.x*t)},${zw(-r.y*t)} `;return`<polyline points="${e}" fill="none" stroke="${this.color}" ${this.style} id="${this.id}" />`},this.tikz=function(){const t=[];if(this.color.length>1&&"black"!==this.color&&t.push(this.color),1!==this.epaisseur&&t.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:t.push(" dash dot ");break;case 2:t.push(" densely dash dot dot ");break;case 3:t.push(" dash dot dot ");break;case 4:t.push(" dotted ");break;default:t.push(" dashed ")}1!==this.opacite&&t.push(`opacity = ${this.opacite}`);let e=[];t.length>0&&(e="["+t.join(",")+"]");let r="";for(const t of this.listePoints)r+=`(${t.x},${t.y})--`;return r=r.substr(0,r.length-2),`\\draw${e} ${r};`},this.svgml=function(t,e){let r,n="";for(let i=1;i<this.listePoints.length;i++)r=RE(this.listePoints[i-1],this.listePoints[i]),r.epaisseur=this.epaisseur,r.color=this.color,r.opacite=this.opacite,n+=r.svgml(t,e);return n},this.tikzml=function(t){const e=[];this.color.length>1&&"black"!==this.color&&e.push(this.color),1!==this.epaisseur&&e.push(`line width = ${this.epaisseur}`),1!==this.opacite&&e.push(`opacity = ${this.opacite}`),e.push(`decorate,decoration={random steps , segment length=3pt, amplitude = ${t}pt}`);let r=[];e.length>0&&(r="["+e.join(",")+"]");let n="";for(const t of this.listePoints)n+=`(${t.x},${t.y})--`;return n=n.substr(0,n.length-2),`\\draw${r} ${n};`}}function ME(...t){return new NE(...t)}function kE(t=10,e=5,r=5,n=Jw(0,0),i=!0,s=30,o=.5){const a=[],u=n,l=Jw(u.x+t,u.y),c=Jw(l.x,l.y+e),p=Jw(u.x,u.y+e),h=qE(u,l,c,p),f=uE(u,zw(r*o),s),d=hS(l,TE(u,f)),m=hS(c,TE(u,f)),g=hS(p,TE(u,f)),y=RE(u,f),v=RE(l,d),b=RE(c,m),x=RE(p,g),_=RE(f,d),w=RE(d,m),E=RE(m,g),S=RE(g,f);y.pointilles=!0,_.pointilles=!0,S.pointilles=!0,a.push(h,y,v,b,x,_,w,E,S),i&&(a.push(FS(RE(l,u),"",1)),a.push(FS(RE(u,p),"",1)),a.push(FS(RE(d,l),r+" cm",1))),this.svg=function(t){let e="";for(const r of a)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of a)t+="\n\t"+e.tikz();return t}}function CE(t,e,r=""){Zw.call(this),1===arguments.length?this.nom=t:("number"==typeof t?(this.x=t,this.y=e):(this.x=zw(e.x-t.x),this.y=zw(e.y-t.y)),this.nom=r),this.norme=function(){return zw(Math.sqrt(this.x**2+this.y**2))},this.oppose=function(){this.x=-this.x,this.y=-this.y},this.xSVG=function(t){return this.x*t},this.ySVG=function(t){return-this.y*t},this.representant=function(t){const e=RE(t,Jw(t.x+this.x,t.y+this.y));return e.styleExtremites="|->",e},this.representantNomme=function(t,e,r=1,n="black"){const i=Jw(t.x+this.x,t.y+this.y),s=RE(t,i).angleAvecHorizontale,o=hS(nE(t,i),xS(this,t,90,1/this.norme()));return IE(e,o.x,o.y,r,s,n)}}function TE(...t){return new CE(...t)}function OE(t,e,r,n=1,i=0,s="black"){Zw.call(this),this.nom=t,this.x=e,this.y=r,this.color=s,this.angle=i,this.taille=n;const o=[];let a,u;const l=CA(this.nom,this.x,this.y,-this.angle,this.color,this.taille,"middle",!0),c=Jw(this.x,this.y),p=Jw(c.x+1.1*this.nom.length,c.y),h=xS(p,c,90+this.angle,.5/this.nom.length),f=hS(h,TE(p,c));u=hS(h,TE(c,p)),a=TE(f,u),a=dS(a,c,this.angle),u=hS(f,a);const d=RE(f,u);d.styleExtremites="->",d.tailleExtremites=3,d.color=this.color,o.push(l,d),this.svg=function(t){let e="";for(const r of o)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of o)t+="\n\t"+e.tikz();return t}}function IE(t,e,r,n=1,i=0,s="black"){return new OE(t,e,r,n,i,s)}function PE(t,e,r,n,i){Zw.call(this),this.typeObjet="segment",this.styleExtremites="",this.tailleExtremites=4,2===arguments.length?(this.x1=Uw(t.x,2),this.y1=Uw(t.y,2),this.x2=Uw(e.x,2),this.y2=Uw(e.y,2)):3===arguments.length?(this.x1=Uw(t.x,2),this.y1=Uw(t.y,2),this.x2=Uw(e.x,2),this.y2=Uw(e.y,2),this.color=r):4===arguments.length?(this.x1=Uw(t,2),this.y1=Uw(e,2),this.x2=Uw(r,2),this.y2=Uw(n,2)):(this.x1=Uw(t,2),this.y1=Uw(e,2),this.x2=Uw(r,2),this.y2=Uw(n,2),this.color=i),this.extremite1=Jw(this.x1,this.y1),this.extremite2=Jw(this.x2,this.y2),this.longueur=zw(Math.sqrt((this.x2-this.x1)**2+(this.y2-this.y1)**2)),this.angleAvecHorizontale=UA(Jw(this.x1+1,this.y1),this.extremite1,this.extremite2),this.svg=function(t){const e=this.tailleExtremites;if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);let r="";const n=Jw(this.x1,this.y1),i=Jw(this.x2,this.y2);if(this.styleExtremites.length>1){if("|"===this.styleExtremites.substr(-1)){const s=iE(i,n,e/mathalea.pixelsParCm),o=dS(s,i,90),a=dS(s,i,-90);r+=`<line x1="${o.xSVG(t)}" y1="${o.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color}" />`}if(">"===this.styleExtremites.substr(-1)){const s=iE(i,n,e/mathalea.pixelsParCm),o=dS(i,s,90),a=dS(i,s,-90);r+=`<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${o.xSVG(t)}" y2="${o.ySVG(t)}" stroke="${this.color}" />`,r+=`\n\t<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color}" />`}if("<"===this.styleExtremites.substr(-1)){const s=iE(i,n,-e/mathalea.pixelsParCm),o=dS(i,s,90),a=dS(i,s,-90);r+=`<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${o.xSVG(t)}" y2="${o.ySVG(t)}" stroke="${this.color}" />`,r+=`\n\t<line x1="${i.xSVG(t)}" y1="${i.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color}" />`}if("<"===this.styleExtremites[0]){const s=iE(n,i,e/mathalea.pixelsParCm),o=dS(n,s,90),a=dS(n,s,-90);r+=`<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${o.xSVG(t)}" y2="${o.ySVG(t)}" stroke="${this.color}" />`,r+=`\n\t<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color}" />`}if(">"===this.styleExtremites[0]){const s=iE(n,i,-e/mathalea.pixelsParCm),o=dS(n,s,90),a=dS(n,s,-90);r+=`<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${o.xSVG(t)}" y2="${o.ySVG(t)}" stroke="${this.color}" />`,r+=`\n\t<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color}" />`}if("|"===this.styleExtremites[0]){const s=iE(n,i,e/mathalea.pixelsParCm),o=dS(s,n,90),a=dS(s,n,-90);r+=`<line x1="${o.xSVG(t)}" y1="${o.ySVG(t)}" x2="${a.xSVG(t)}" y2="${a.ySVG(t)}" stroke="${this.color}" />`}}return r+=`\n\t<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${i.xSVG(t)}" y2="${i.ySVG(t)}" stroke="${this.color}" ${this.style} />`,r=this.styleExtremites.length>0?`<g id="${this.id}">${r}</g>`:r.replace("/>",`id="${this.id}" />`),r},this.tikz=function(){let t=[];const e=[];if(this.color.length>1&&"black"!==this.color&&e.push(this.color),1!==this.epaisseur&&e.push(`line width = ${this.epaisseur}`),1!==this.opacite&&e.push(`opacity = ${this.opacite}`),this.pointilles)switch(this.pointilles){case 1:e.push(" dash dot ");break;case 2:e.push(" densely dash dot dot ");break;case 3:e.push(" dash dot dot ");break;case 4:e.push(" dotted ");break;default:e.push(" dashed ")}return this.styleExtremites.length>1&&e.push(this.styleExtremites),e.length>0&&(t="["+e.join(",")+"]"),`\\draw${t} (${this.x1},${this.y1})--(${this.x2},${this.y2});`},this.svgml=function(t,e){this.style='fill="none"',1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `);const r=Jw(this.x1,this.y1),n=Jw(this.x2,this.y2),i=DA(r,n),s=(n.xSVG(t)-r.xSVG(t))/i/2,o=(n.ySVG(t)-r.ySVG(t))/i/2;let a=`<path d="M ${r.xSVG(t)}, ${r.ySVG(t)} Q ${Math.round(r.xSVG(t),0)}, ${Uw(r.ySVG(t),0)} `,u=1;for(let n=0;n<2*i+.25;n+=.5)u++,a+=`${Math.round(r.xSVG(t)+n*s+Lw(-2,2,0)*e)}, ${Math.round(r.ySVG(t)+n*o+Lw(-2,2,0)*e)} `;return a+=u%2==1?` ${Math.round(n.xSVG(t),0)}, ${Uw(n.ySVG(t),0)}" stroke="${this.color}" ${this.style}/>`:` ${Math.round(n.xSVG(t),0)}, ${Uw(n.ySVG(t),0)} ${Uw(n.xSVG(t),0)}, ${Uw(n.ySVG(t),0)}" stroke="${this.color}" ${this.style}/>`,a},this.tikzml=function(t){const e=Jw(this.x1,this.y1),r=Jw(this.x2,this.y2);let n=[];const i=[];return this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),this.styleExtremites.length>1&&i.push(this.styleExtremites),i.push(`decorate,decoration={random steps , amplitude = ${t}pt}`),n="["+i.join(",")+"]",`\\draw${n} (${e.x},${e.y})--(${r.x},${r.y});`}}function RE(...t){return new PE(...t)}function LE(t,e,r="black"){return RE(t,iE(e,t,-10),r)}function DE(...t){Zw.call(this),this.couleurDeRemplissage="none",this.opaciteDeRemplissage=1.1,this.hachures=!1,this.couleurDesHachures="black",this.epaisseurDesHachures=1,this.distanceDesHachures=10,Array.isArray(t[0])?(this.listePoints=t[0],t[1]&&(this.color=t[1]),this.nom=this.listePoints.join()):(this.listePoints=t,this.nom=this.listePoints.join()),this.binomesXY=function(t){let e="";for(const r of this.listePoints)e+=`${zw(r.x*t)},${zw(-r.y*t)} `;return e},this.svg=function(t){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return this.hachures?(this.couleurDeRemplissage.length<1&&(this.couleurDeRemplissage="none"),GA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})+`<polygon points="${this.binomesXY(t)}" stroke="${this.color}" ${this.style} id="${this.id}" fill="url(#pattern${this.id})" />`):(""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),`<polygon points="${this.binomesXY(t)}" stroke="${this.color}" ${this.style} id="${this.id}" />`)},this.tikz=function(){const t=[];if(this.color.length>1&&"black"!==this.color&&t.push(this.color),1!==this.epaisseur&&t.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:t.push(" dash dot ");break;case 2:t.push(" densely dash dot dot ");break;case 3:t.push(" dash dot dot ");break;case 4:t.push(" dotted ");break;default:t.push(" dashed ")}1!==this.opacite&&t.push(`opacity=${this.opacite}`),1!==this.opaciteDeRemplissage&&t.push(`fill opacity = ${this.opaciteDeRemplissage}`),""!==this.couleurDeRemplissage&&t.push(`fill = ${this.couleurDeRemplissage}`),this.hachures&&this.hachures&&t.push(GA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage}));let e=[];t.length>0&&(e="["+t.join(",")+"]");let r="";for(const t of this.listePoints)r+=`(${t.x},${t.y})--`;return""===this.couleurDeRemplissage?`\\draw ${e} ${r}cycle;`:`\\filldraw ${e} ${r}cycle;`},this.svgml=function(t,e){let r,n,i="",s=this.listePoints[0];for(let o=1;o<=this.listePoints.length;o++)n=this.listePoints[o%this.listePoints.length],s=this.listePoints[o-1],r=RE(s,n),r.isVisible=!0,r.epaisseur=this.epaisseur,r.color=this.color,r.opacite=this.opacite,i+=r.svgml(t,e);return i},this.tikzml=function(t){let e,r,n,i="";for(let s=1;s<=this.listePoints.length;s++)n=this.listePoints[s%this.listePoints.length],r=this.listePoints[s-1],e=RE(r,n),e.isVisible=!1,e.epaisseur=this.epaisseur,e.color=this.color,e.opacite=this.opacite,i+="\t"+e.tikzml(t)+"\n";return i}}function qE(...t){return new DE(...t)}function BE(...t){const e=qE(...t);return e.sommets=HE(e),[e,e.sommets]}function UE(t,e,r,n="black"){const i=[t,e];for(let t=1;t<r-1;t++)i[t+1]=dS(i[t-1],i[t],zw(360/r-180));return qE(i,n)}function $E(t,e,r,n="black"){const i=[t,e];for(let t=1;t<r-1;t++)i[t+1]=dS(i[t-1],i[t],zw(180-360/r));return qE(i,n)}function zE(t,e,r){return UE(t,e,4,r)}function FE(t,e,r){return $E(t,e,4,r)}function GE(t,e="black",r="×"){const n=[];n.push(HS(r,e,t.listePoints)),n.push(LS(t.listePoints[0],t.listePoints[1],t.listePoints[2],e)),n.push(LS(t.listePoints[1],t.listePoints[2],t.listePoints[3],e)),n.push(LS(t.listePoints[2],t.listePoints[3],t.listePoints[0],e)),n.push(LS(t.listePoints[3],t.listePoints[0],t.listePoints[1],e)),this.svg=function(t){let e="";for(const r of n)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of n)t+="\n\t"+e.tikz();return t}}function VE(t,e,r,n,i=1){const s=YE(t,r),o=YE(e,n);let a;return a=1===i?KE(s,o):KE(s,o,"",2),s.isVisible=!1,o.isVisible=!1,qE(t,e,a)}function jE(t,e="",r=.5){Zw.call(this),this.poly=t,this.dist=r;for(let r=0;r<t.listePoints.length;r++)""!==e&&(t.listePoints[r].nom=e[r]);this.svg=function(t){let e,r="";const n=this.poly,i=this.dist,s=pE(n);for(let o=0;o<n.listePoints.length;o++)e=iE(s,n.listePoints[o],DA(s,n.listePoints[o])+20*i/t),e.positionLabel="center",r+="\n\t"+TA(n.listePoints[o].nom,e,"black",12,12,"").svg(t);return r},this.tikz=function(){let t,e="";const r=this.poly,n=this.dist,i=pE(r);for(let s=0;s<r.listePoints.length;s++)t=iE(i,r.listePoints[s],DA(i,r.listePoints[s])+n/mathalea.scale),e+="\n\t"+kA(`$${r.listePoints[s].nom}$`,t,"milieu").tikz();return e}}function HE(...t){return new jE(...t)}function WE(t,e,r){Zw.call(this),r&&(this.color=r,this.styleTikz=`[${r}]`),this.centre=t,this.rayon=e,this.couleurDeRemplissage="",this.opaciteDeRemplissage=1.1,this.hachures=!1,this.couleurDesHachures="black",this.epaisseurDesHachures=1,this.distanceDesHachures=10,this.svg=function(r){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return this.hachures?(this.couleurDeRemplissage.length<1&&(this.couleurDeRemplissage="none"),GA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})+`<circle cx="${t.xSVG(r)}" cy="${t.ySVG(r)}" r="${e*r}" stroke="${this.color}" ${this.style} id="${this.id}" fill="url(#pattern${this.id})" />`):(1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),`<circle cx="${t.xSVG(r)}" cy="${t.ySVG(r)}" r="${e*r}" stroke="${this.color}" ${this.style} id="${this.id}" />`)},this.tikz=function(){let r=[];const n=[];if(this.color.length>1&&"black"!==this.color&&n.push(this.color),1!==this.epaisseur&&n.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:n.push(" dash dot ");break;case 2:n.push(" densely dash dot dot ");break;case 3:n.push(" dash dot dot ");break;case 4:n.push(" dotted ");break;default:n.push(" dashed ")}return 1!==this.opacite&&n.push(`opacity = ${this.opacite}`),this.hachures&&this.hachures&&n.push(GA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})),n.length>0&&(r="["+n.join(",")+"]"),`\\draw${r} (${t.x},${t.y}) circle (${e});`},this.svgml=function(r,n){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);let i=`<path d="M ${t.xSVG(r)+e*r} ${t.ySVG(r)} C ${t.xSVG(r)+e*r} ${t.ySVG(r)}, `;for(let s=1;s<101;s++)i+=`${Uw(t.xSVG(r)+e*Math.cos(2*s*Math.PI/101)*r+Lw(-1,1)*n,2)} ${Uw(t.ySVG(r)+e*Math.sin(2*s*Math.PI/100)*r+Lw(-1,1)*n,2)}, `;return i+=` ${t.xSVG(r)+e*r} ${t.ySVG(r)} Z" stroke="${this.color}" ${this.style}"/>`,i},this.tikzml=function(r){let n=[];const i=[];return this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.push(`decorate,decoration={random steps , amplitude = ${r}pt}`),n="["+i.join(",")+"]",`\\draw${n} (${t.x},${t.y}) circle (${e});`}}function YE(...t){return new WE(...t)}function XE(t,e,r,n){Zw.call(this),n&&(this.color=n,this.styleTikz=`[${n}]`),this.centre=t,this.rx=e,this.ry=r,this.couleurDeRemplissage="",this.opaciteDeRemplissage=1.1,this.svg=function(n){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return 1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),`<ellipse cx="${t.xSVG(n)}" cy="${t.ySVG(n)}" rx="${zw(e*n)}" ry="${zw(r*n)}" stroke="${this.color}" ${this.style} id="${this.id}" />`},this.tikz=function(){let n=[];const i=[];if(this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:i.push(" dash dot ");break;case 2:i.push(" densely dash dot dot ");break;case 3:i.push(" dash dot dot ");break;case 4:i.push(" dotted ");break;default:i.push(" dashed ")}return 1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.length>0&&(n="["+i.join(",")+"]"),`\\draw${n} (${t.x},${t.y}) ellipse (${e}cm and ${r}cm);`},this.tikzml=function(n){let i=[];const s=[];return this.color.length>1&&"black"!==this.color&&s.push(this.color),1!==this.epaisseur&&s.push(`line width = ${this.epaisseur}`),1!==this.opacite&&s.push(`opacity = ${this.opacite}`),s.push(`decorate,decoration={random steps , amplitude = ${n}pt}`),i="["+s.join(",")+"]",`\\draw${i} (${t.x},${t.y}) ellipse (${e}cm and ${r}cm);`}}function ZE(t,e,r="",n=1){const i=e.centre,s=e.rayon,o=t.a,a=t.b,u=t.c,l=i.x,c=i.y;let p,h,f,d,m,g;if(0===a){if(f=zw(-u/o),m=f,p=zw(4*(-l*l-u*u/(o*o)-2*l*u/o+s*s)),p<0)return!1;Rw(p,0)?(d=zw(c+Math.sqrt(p)/2),g=d):(d=zw(c-Math.sqrt(p)/2),g=zw(c+Math.sqrt(p)/2))}else if(0===o){if(d=zw(-u/a),g=d,p=zw(4*(-c*c-u*u/(a*a)-2*c*u/a+s*s)),p<0)return!1;Rw(p,0)?(f=zw(l+Math.sqrt(p)/2),m=f):(f=zw(l-Math.sqrt(p)/2),m=zw(l+Math.sqrt(p)/2))}else{if(p=zw((2*(o*u/(a*a)+c*o/a-l))**2-4*(1+(o/a)**2)*(l*l+c*c+(u/a)**2+2*c*u/a-s*s)),p<0)return!1;Rw(p,0)?(h=zw(Math.sqrt(p)),f=zw((-2*(o*u/(a*a)+c*o/a-l)-h)/(2*(1+(o/a)**2))),m=f,d=zw((-o*f-u)/a),g=d):(h=zw(Math.sqrt(p)),f=zw((-2*(o*u/(a*a)+c*o/a-l)-h)/(2*(1+(o/a)**2))),m=zw((-2*(o*u/(a*a)+c*o/a-l)+h)/(2*(1+(o/a)**2))),d=zw((-o*f-u)/a),g=zw((-o*m-u)/a))}return 1===n?g>d?Jw(m,g,r):Jw(f,d,r):g>d?Jw(f,d,r):Jw(m,g,r)}function KE(t,e,r="",n=1){const i=t.centre,s=e.centre,o=t.rayon,a=e.rayon,u=i.x,l=s.x,c=i.y,p=l-u,h=s.y-c,f=Math.sqrt(h*h+p*p);if(f>o+a)return!1;if(f<Math.abs(o-a))return!1;const d=(o*o-a*a+f*f)/(2*f),m=u+p*d/f,g=c+h*d/f,y=Math.sqrt(o*o-d*d),v=y/f*-h,b=p*(y/f),x=m+v,_=m-v,w=g+b,E=g-b;return 1===n?E>w?Jw(_,E,r):Jw(x,w,r):E>w?Jw(x,w,r):Jw(_,E,r)}function JE(t,e,r="black"){WE.call(this,t,DA(t,e),r)}function QE(t,e,r,n=!1,i="none",s="black",o=.2){Zw.call(this),this.color=s,this.couleurDeRemplissage=i,this.opaciteDeRemplissage=o,this.hachures=!1,this.couleurDesHachures="black",this.epaisseurDesHachures=1,this.distanceDesHachures=10,"number"!=typeof r&&(r=Uw(UA(t,e,r),1));let a=DA(e,t),u=0,l=0;const c=Uw(UA(Jw(e.x+1,e.y),e,t),1),p=Uw(c+r,1);r>180?(r-=360,u=1,l=0):r<-180?(r=360+r,u=1,l=1):(u=0,l=1-(r>0));const h=dS(t,e,r);let f,d,m,g,y,v,b,x;this.svg=n?function(r){if(this.style="",1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return this.hachures?(this.couleurDeRemplissage.length<1&&(this.couleurDeRemplissage="none"),GA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})+`<path d="M${t.xSVG(r)} ${t.ySVG(r)} A ${Uw(a*r,1)} ${Uw(a*r,1)} 0 ${u} ${l} ${h.xSVG(r)} ${h.ySVG(r)} L ${e.xSVG(r)} ${e.ySVG(r)} Z" stroke="${this.color}"  ${this.style} id="${this.id}" fill="url(#pattern${this.id})" />`):(1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),"none"!==this.couleurDeRemplissage&&(this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),`<path d="M${t.xSVG(r)} ${t.ySVG(r)} A ${Uw(a*r,1)} ${Uw(a*r,1)} 0 ${u} ${l} ${h.xSVG(r)} ${h.ySVG(r)} L ${e.xSVG(r)} ${e.ySVG(r)} Z" stroke="${this.color}" fill="${this.couleurDeRemplissage}" ${this.style}/>`)}:function(e){if(this.style="",1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}return 1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),`<path d="M${t.xSVG(e)} ${t.ySVG(e)} A ${Uw(a*e,1)} ${Uw(a*e,1)} 0 ${u} ${l} ${h.xSVG(e)} ${h.ySVG(e)}" stroke="${this.color}" fill="${i}" ${this.style} id="${this.id}" />`},this.tikz=function(){let r=[];const s=[];if(this.color.length>1&&"black"!==this.color&&s.push(this.color),1!==this.epaisseur&&s.push(`line width = ${this.epaisseur}`),this.pointilles)switch(this.pointilles){case 1:s.push(" dash dot ");break;case 2:s.push(" densely dash dot dot ");break;case 3:s.push(" dash dot dot ");break;case 4:s.push(" dotted ");break;default:s.push(" dashed ")}return 1!==this.opacite&&s.push(`opacity = ${this.opacite}`),n&&"none"!==i&&s.push(`fill opacity = ${this.opaciteDeRemplissage}`),n&&"none"!==i&&s.push(`fill = ${this.couleurDeRemplissage}`),this.hachures&&s.push(GA({motif:this.hachures,id:this.id,distanceDesHachures:this.distanceDesHachures,epaisseurDesHachures:this.epaisseurDesHachures,couleurDesHachures:this.couleurDesHachures,couleurDeRemplissage:this.couleurDeRemplissage,opaciteDeRemplissage:this.opaciteDeRemplissage})),s.length>0&&(r="["+s.join(",")+"]"),n?`\\filldraw  ${r} (${h.x},${h.y}) -- (${e.x},${e.y}) -- (${t.x},${t.y}) arc (${c}:${p}:${Uw(DA(e,t),2)}) -- cycle ;`:`\\draw${r} (${t.x},${t.y}) arc (${c}:${p}:${Uw(DA(e,t),2)}) ;`},this.svgml=function(i,o){if(this.style="",n){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage||"none"===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `),f=DA(t,e),d=r/f/10,m=`<path d="M${t.xSVG(i)} ${t.ySVG(i)} C `;for(let n=0;n<=r;n+=d)g=dS(t,e,n),m+=`${Math.round(g.xSVG(i)+Lw(-1,1)*o)} ${Math.round(g.ySVG(i)+Lw(-1,1)*o)}, `;g=dS(t,e,f*d),m+=`${Math.round(g.xSVG(i)+Lw(-1,1)*o)} ${Math.round(g.ySVG(i)+Lw(-1,1)*o)} `,a=DA(e,t),y=(t.xSVG(i)-e.xSVG(i))/(4*a),v=(t.ySVG(i)-e.ySVG(i))/(4*a),b=(e.xSVG(i)-g.xSVG(i))/(4*a),x=(e.ySVG(i)-g.ySVG(i))/(4*a);for(let t=0;t<=4*a;t++)m+=`${Math.round(g.xSVG(i)+t*b+Lw(-1,1)*o)} ${Math.round(g.ySVG(i)+t*x+Lw(-1,1)*o)}, `;for(let t=0;t<=4*a;t++)m+=`${Math.round(e.xSVG(i)+t*y+Lw(-1,1)*o)} ${Math.round(e.ySVG(i)+t*v+Lw(-1,1)*o)}, `;return m+=`${Math.round(e.xSVG(i)+4*a*y+Lw(-1,1)*o)} ${Math.round(e.ySVG(i)+4*a*v+Lw(-1,1)*o)} Z `,m+=`" stroke="${s}" ${this.style} />`,m}1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),this.style+=' fill="none" ',f=DA(t,e),d=r/f/10,m=`<path d="M${t.xSVG(i)} ${t.ySVG(i)} C `;for(let n=0;Math.abs(n)<=Math.abs(r);n+=d)g=dS(t,e,n),m+=`${Math.round(g.xSVG(i)+Lw(-1,1)*o)} ${Math.round(g.ySVG(i)+Lw(-1,1)*o)}, `;return g=dS(t,e,r),m+=`${Math.round(g.xSVG(i)+Lw(-1,1)*o)} ${Math.round(g.ySVG(i)+Lw(-1,1)*o)} `,m+=`" stroke="${s}" ${this.style}/>`,m},this.tikzml=function(s){let o=[];const a=[],u=Uw(UA(Jw(e.x+1,e.y),e,t),1),l=Uw(u+r,1),c=dS(t,e,r);return this.color.length>1&&"black"!==this.color&&a.push(this.color),1!==this.epaisseur&&a.push(`line width = ${this.epaisseur}`),1!==this.opacite&&a.push(`opacity = ${this.opacite}`),n&&"none"!==i&&a.push(`fill opacity = ${this.opaciteDeRemplissage}`),n&&"none"!==i&&a.push(`fill = ${this.couleurDeRemplissage}`),a.push(`decorate,decoration={random steps , amplitude = ${s}pt}`),o="["+a.join(",")+"]",n?`\\filldraw  ${o} (${c.x},${c.y}) -- (${e.x},${e.y}) -- (${t.x},${t.y}) arc (${u}:${l}:${Uw(DA(e,t),2)}) -- cycle ;`:`\\draw${o} (${t.x},${t.y}) arc (${u}:${l}:${Uw(DA(e,t),2)}) ;`}}function tS(...t){return new QE(...t)}function eS(t,e,r,n=!1,i="none",s="black",o=.2){let a;a=zw(r<0?(r+180)/2:(r-180)/2);const u=vE(t,e,"black");u.isVisible=!1;const l=fE(e,t);l.isVisible=!1;const c=dS(l,e,a);c.isVisible=!1;const p=zw((-c.c+u.c*c.a/u.a)/(c.b-c.a*u.b/u.a)),h=Jw(zw(-u.c/u.a-u.b*p/u.a),p);QE.call(this,t,h,r,n,i,s,o)}function rS(t,e,r=20,n="gray",i=1.1,s=1,o=!1){const a=tS(dS(e,t,-r/2),t,r,!1);return a.epaisseur=s,a.opacite=i,a.color=n,a.pointilles=o,a}function nS(t,e,r){Zw.call(this),this.svg=function(n){return`<path d="M${t.xSVG(n)} ${t.ySVG(n)} Q ${e.xSVG(n)} ${e.ySVG(n)}, ${r.xSVG(n)} ${r.ySVG(n)}" stroke="black" fill="transparent"/>`}}function iS(t,e,r,n="black"){Zw.call(this),this.svg=function(i){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);const s=Math.round(DA(t,e)),o=(e.xSVG(i)-t.xSVG(i))/(4*s),a=(e.ySVG(i)-t.ySVG(i))/(4*s);let u=`<path d="M${t.xSVG(i)} ${t.ySVG(i)} C `;for(let e=0;e<=4*s;e++)u+=`${Uw(t.xSVG(i)+e*o+Lw(-1,1)*r,0)} ${Uw(t.ySVG(i)+e*a+Lw(-1,1)*r,0)}, `;return u+=`${e.xSVG(i)} ${e.ySVG(i)}" stroke="${n}" ${this.style}"/>`,u},this.tikz=function(){let n=[];const i=[];return this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.push(`decorate,decoration={random steps , amplitude = ${r}pt}`),n="["+i.join(",")+"]",`\\draw ${n} (${t.x},${t.y})--(${e.x},${e.y});`}}function sS(t,e,r,n="black"){Zw.call(this),this.color=n,this.svg=function(i){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);let s=`<path d="M ${t.xSVG(i)+e*i} ${t.ySVG(i)} C ${t.xSVG(i)+e*i} ${t.ySVG(i)}, `;for(let n=1;n<101;n++)s+=`${Uw(t.xSVG(i)+e*Math.cos(2*n*Math.PI/101)*i+Lw(-1,1)*r,2)} ${Uw(t.ySVG(i)+e*Math.sin(2*n*Math.PI/100)*i+Lw(-1,1)*r,2)}, `;return s+=` ${t.xSVG(i)+e*i} ${t.ySVG(i)} Z" stroke="${n}" ${this.style}"/>`,s},this.tikz=function(){let n=[];const i=[];return this.color.length>1&&"black"!==this.color&&i.push(this.color),1!==this.epaisseur&&i.push(`line width = ${this.epaisseur}`),1!==this.opacite&&i.push(`opacity = ${this.opacite}`),i.push(`decorate,decoration={random steps , amplitude = ${r}pt}`),n="["+i.join(",")+"]",`\\draw${n} (${t.x},${t.y}) circle (${e});`}}function oS(t,e,r,n="black"){Zw.call(this),this.svg=function(i){const s=fE(t,e,n);return s.isVisible=!1,s.svgml(i,r)},this.tikz=function(){const i=fE(t,e,n);return i.isVisible=!1,i.tikzml(r)}}function aS(t,e){Zw.call(this),this.couleurDeRemplissage="",this.opaciteDeRemplissage=1.1,this.listePoints=t,this.svg=function(t){let r,n,i,s="";for(let o=1;o<=this.listePoints.length;o++)i=this.listePoints[o%this.listePoints.length],n=this.listePoints[o-1],r=RE(n,i),r.isVisible=!1,r.epaisseur=this.epaisseur,r.color=this.color,r.opacite=this.opacite,s+=r.svgml(t,e);return s},this.tikz=function(){let t,r,n,i="";for(let s=1;s<=this.listePoints.length;s++)n=this.listePoints[s%this.listePoints.length],r=this.listePoints[s-1],t=RE(r,n),t.isVisible=!1,t.epaisseur=this.epaisseur,t.color=this.color,t.opacite=this.opacite,i+=t.tikzml(e);return i}}function uS(t,e,r,n,i=!1,s="none",o="black",a=.2){Zw.call(this),this.couleurDeRemplissage=s,this.opaciteDeRemplissage=a,this.color=o,this.svg=function(s){1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),1!==this.opacite&&(this.style+=` stroke-opacity="${this.opacite}" `),""===this.couleurDeRemplissage||"none"===this.couleurDeRemplissage?this.style+=' fill="none" ':(this.style+=` fill="${this.couleurDeRemplissage}" `,this.style+=` fill-opacity="${this.opaciteDeRemplissage}" `);const a=Math.round(2*DA(t,e)*Math.PI*r/360),u=r/a;let l,c=`<path d="M${t.xSVG(s)} ${t.ySVG(s)} C `;for(let r=0;r<=a;r++)l=dS(t,e,r*u),c+=`${Uw(l.xSVG(s)+Lw(-1,1)*n,0)} ${Uw(l.ySVG(s)+Lw(-1,1)*n,0)}, `;c+=`${Uw(l.xSVG(s)+Lw(-1,1)*n,0)} ${Uw(l.ySVG(s)+Lw(-1,1)*n,0)} `;const p=Math.abs(Math.round(DA(e,t))),h=(t.xSVG(s)-e.xSVG(s))/(4*p),f=(t.ySVG(s)-e.ySVG(s))/(4*p),d=(e.xSVG(s)-l.xSVG(s))/(4*p),m=(e.ySVG(s)-l.ySVG(s))/(4*p);if(i){for(let t=0;t<=4*p;t++)c+=`${Uw(l.xSVG(s)+t*d+Lw(-1,1)*n,0)} ${Uw(l.ySVG(s)+t*m+Lw(-1,1)*n,0)}, `;for(let t=0;t<=4*p;t++)c+=`${Uw(e.xSVG(s)+t*h+Lw(-1,1)*n,0)} ${Uw(e.ySVG(s)+t*f+Lw(-1,1)*n,0)}, `;c+=`${Uw(e.xSVG(s)+4*p*h+Lw(-1,1)*n,0)} ${Uw(e.ySVG(s)+4*p*f+Lw(-1,1)*n,0)} Z `}return c+=`" stroke="${o}" ${this.style}"/>`,c},this.tikz=function(){let o=[];const a=[],u=UA(Jw(e.x+1,e.y),e,t),l=u+r,c=dS(t,e,r);return this.color.length>1&&"black"!==this.color&&a.push(this.color),1!==this.epaisseur&&a.push(`line width = ${this.epaisseur}`),1!==this.opacite&&a.push(`opacity = ${this.opacite}`),i&&"none"!==s&&a.push(`fill opacity = ${this.opaciteDeRemplissage}`),i&&"none"!==s&&a.push(`fill = ${this.couleurDeRemplissage}`),a.push(`decorate,decoration={random steps , amplitude = ${n}pt}`),o="["+a.join(",")+"]",i?`\\filldraw  ${o} (${c.x},${c.y}) -- (${e.x},${e.y}) -- (${t.x},${t.y}) arc (${u}:${l}:${DA(e,t)}) -- cycle ;`:`\\draw${o} (${t.x},${t.y}) arc (${u}:${l}:${DA(e,t)}) ;`}}function lS({x:t=0,y:e=0,rang:r=4,num:n,taille:i=.6,color:s="gray",opacite:o=.5}){Zw.call(this),this.x=t,this.y=e,this.rang=r,void 0!==n&&(this.num=n),this.taille=i,this.color=s,this.opacite=o;const a=[];let u,l,c;void 0!==n&&(u=CA(n,t-r*this.taille/4,e-r*this.taille/4,"milieu",this.color),u.opacite=.5,u.taille=30*this.taille,u.contour=!0,a.push(u)),this.num=n,a.push(sA(zw(t-r*this.taille/2),zw(e-r*this.taille/2),zw(t+r*this.taille/2),zw(e+r*this.taille/2),this.color,this.opacite,this.taille,!1));for(let n=0;n<r;n++)l=CA(Fw(1+n),t-r*this.taille/2+(2*n+1)*this.taille/2,e-(r+1)*this.taille/2,"milieu"),c=CA(n+1,t-(r+1)*this.taille/2,e-r*this.taille/2+(2*n+1)*this.taille/2,"milieu"),l.taille=10*this.taille,c.taille=10*this.taille,a.push(l),a.push(c);this.svg=function(t){let e="";for(const r of a)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of a)t+="\n\t"+e.tikz();return t}}function cS({x:t=0,y:e=0,rang:r=3,num:n,taille:i=.3}){Zw.call(this),this.x=t,this.y=e,this.num=n,this.taille=i,this.rang=r,this.opacite=.5,this.color="gray";const s=[];let o,a;const u=Jw(this.x,this.y,this.y),l=Jw(this.x+this.rang*this.taille,this.y),c=iE(u,l,DA(u,l)+.3);for(let t=0;t<8;t++)a=RE(u,dS(l,u,45*t)),a.color=this.color,a.opacite=this.opacite,s.push(a),s.push(kA(Fw(1+t),dS(c,u,45*t+22.5),"milieu","gray"));for(let t=0;t<this.rang;t++)o=YE(Jw(this.x,this.y),this.taille*(1+t)),o.opacite=this.opacite,o.color=this.color,s.push(o);const p=CA(Vw(n),this.x,this.y,0,"gray");p.opacite=.5,p.taille=30,p.contour=!0,s.push(p),this.svg=function(t){let e="";for(const r of s)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of s)t+="\n\t"+e.tikz();return t}}function pS({x:t=0,y:e=0,taille:r=5,depart:n=0,nbDivisions:i=18,nbSubDivisions:s=3,semi:o=!1,label:a=!0}){Zw.call(this),this.x=t,this.y=e,this.taille=r,this.opacite=.5,this.color="gray";const u=[];let l,c,p,h;h=o?180:360;const f=Jw(this.x,this.y);c=dS(Jw(this.x+this.taille,this.y),f,n);let d=iE(f,c,DA(f,c)+1);const m=[],g=tS(c,f,h-.1,!1,"none","gray"),y=tS(d,f,h-.1,!1,"none","gray");p=RE(c,d),u.push(g,y,p);for(let t=0;t<i;t++){for(let t=1;t<s;t++)m[t-1]=dS(p,f,t*h/i/s),m[t-1].pointilles=1,m[t-1].color=this.color,m[t-1].opacite=this.opacite,u.push(m[t-1]);a&&(l=kA(Fw(1+t),dS(nE(c,d),f,h/i/2),"milieu","gray"),l.contour=!0,u.push(l)),p.color=this.color,p.opacite=this.opacite,u.push(p),c=dS(c,f,h/i),d=dS(d,f,h/i),p=RE(c,d)}this.svg=function(t){let e="";for(const r of u)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of u)t+="\n\t"+e.tikz();return t}}function hS(t,e,r="",n="above"){if(t.constructor===Kw)return Jw(zw(t.x+e.x),zw(t.y+e.y),r,n);if(t.constructor===DE){const r=[];for(let n=0;n<t.listePoints.length;n++)r[n]=hS(t.listePoints[n],e),r[n].nom=t.listePoints[n].nom+"'";return qE(r)}if(t.constructor===hE)return fE(hS(Jw(t.x1,t.y1),e),hS(Jw(t.x2,t.y2),e));if(t.constructor===PE){const r=RE(hS(t.extremite1,e),hS(t.extremite2,e));return r.styleExtremites=t.styleExtremites,r}return t.constructor===CE?t:void 0}function fS(t,e,r,n="",i="above"){if(t.constructor===Kw)return Jw(zw(t.x+r.x-e.x),zw(t.y+r.y-e.y),n,i);if(t.constructor===DE){const n=[];for(let i=0;i<t.listePoints.length;i++)n[i]=fS(t.listePoints[i],t,e,r),n[i].nom=e.listePoints[i].nom+"'";return qE(n)}if(t.constructor===hE)return fE(fS(Jw(t.x1,t.y1),e,r),fS(Jw(t.x2,t.y2),e,r));if(t.constructor===PE){const n=RE(fS(t.extremite1,e,r),fS(t.extremite2,e,r));return n.styleExtremites=t.styleExtremites,n}return e.constructor===CE?e:void 0}function dS(t,e,r,n="",i="above"){if(t.constructor===Kw)return Jw(zw(e.x+(t.x-e.x)*Math.cos(r*Math.PI/180)-(t.y-e.y)*Math.sin(r*Math.PI/180)),zw(e.y+(t.x-e.x)*Math.sin(r*Math.PI/180)+(t.y-e.y)*Math.cos(r*Math.PI/180)),n,i);if(t.constructor===DE){const n=[];for(let i=0;i<t.listePoints.length;i++)n[i]=dS(t.listePoints[i],e,r),n[i].nom=t.listePoints[i].nom+"'";return qE(n)}if(t.constructor===hE)return fE(dS(Jw(t.x1,t.y1),e,r),dS(Jw(t.x2,t.y2),e,r));if(t.constructor===PE){const n=RE(dS(t.extremite1,e,r),dS(t.extremite2,e,r));return n.styleExtremites=t.styleExtremites,n}return t.constructor===CE?TE(zw(t.x*Math.cos(r*Math.PI/180)-t.y*Math.sin(r*Math.PI/180)),zw(t.x*Math.sin(r*Math.PI/180)+t.y*Math.cos(r*Math.PI/180))):void 0}function mS(t,e,r){Zw.call(this);const n=[],i=tS(t,e,20*r),s=dS(t,e,20*r),o=xS(s,e,-5*r,.95),a=xS(s,e,-5*r,1.05),u=RE(s,o),l=RE(s,a);n.push(i,u,l),this.svg=function(t){let e="";for(const r of n)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of n)t+="\n\t"+e.tikz();return t}}function gS(t,e,r,n="",i="above"){if(t.constructor===Kw)return new Kw(zw(e.x+r*(t.x-e.x)),zw(e.y+r*(t.y-e.y)),n,i);if(t.constructor===DE){const n=[];for(let i=0;i<t.listePoints.length;i++)n[i]=gS(t.listePoints[i],e,r),n[i].nom=t.listePoints[i].nom+"'";return qE(n)}if(t.constructor===hE)return fE(gS(Jw(t.x1,t.y1),e,r),gS(Jw(t.x2,t.y2),e,r));if(t.constructor===PE){const n=RE(gS(t.extremite1,e,r),gS(t.extremite2,e,r));return n.styleExtremites=t.styleExtremites,n}return t.constructor===CE?TE(t.x*r,t.y*r):void 0}function yS(t,e,r="",n="above"){let i,s;const o=e.a,a=e.b,u=e.c,l=1/(o*o+a*a);if(t.constructor===Kw)return 0===o?(i=t.x,s=zw(-(t.y+2*u/a))):0===a?(s=t.y,i=zw(-(t.x+2*u/o))):(i=zw(l*((a*a-o*o)*t.x-2*o*a*t.y-2*o*u)),s=zw(l*((o*o-a*a)*t.y-2*o*a*t.x+o*o*u/a-a*u)-u/a)),Jw(i,s,r,n);if(t.constructor===DE){const r=[];for(let n=0;n<t.listePoints.length;n++)r[n]=yS(t.listePoints[n],e),r[n].nom=t.listePoints[n].nom+"'";return qE(r)}if(t.constructor===hE)return fE(yS(Jw(t.x1,t.y1),e),yS(Jw(t.x2,t.y2),e));if(t.constructor===PE){const r=RE(yS(t.extremite1,e),yS(t.extremite2,e));return r.styleExtremites=t.styleExtremites,r}if(t.constructor===CE){let r;return r=Rw(a,0)?Jw(zw(-u/o),0):Jw(0,zw(-u/a)),TE(r,yS(hS(r,t),e))}}function vS(t,e,r="",n="above"){const i=e.a,s=e.b,o=e.c,a=zw(1/(i*i+s*s));let u,l;if(t.constructor===Kw)return 0===i?(u=t.x,l=zw(-o/s)):0===s?(l=t.y,u=zw(-o/i)):(u=zw(a*(s*s*t.x-i*s*t.y-i*o)),l=zw(a*(-i*s*t.x+i*i*t.y+i*i*o/s)-o/s)),Jw(u,l,r,n);if(t.constructor===CE){let r;return r=Rw(s,0)?Jw(zw(-o/i),0):Jw(0,zw(-o/s)),TE(r,vS(hS(r,t),e))}}function bS(t,e,r,n="",i="above"){const s=e.a,o=e.b,a=e.c,u=zw(1/(s*s+o*o));let l,c;if(t.constructor===Kw)return 0===s?(l=t.x,c=zw(r*t.y+a*(r-1)/o)):0===o?(c=t.y,l=zw(r*t.x+a*(r-1)/s)):(l=zw(u*(o*o*t.x-s*o*t.y-s*a)*(1-r)+r*t.x),c=zw(u*(s*s*t.y-s*o*t.x+s*s*a/o)*(1-r)+r*a/o+r*t.y-a/o)),Jw(l,c,n,i);if(t.constructor===DE){const n=[];for(let i=0;i<t.listePoints.length;i++)n[i]=bS(t.listePoints[i],e,r),n[i].nom=t.listePoints[i].nom+"'";return qE(n)}if(t.constructor===hE)return fE(bS(Jw(t.x1,t.y1),e,r),bS(Jw(t.x2,t.y2),e,r));if(t.constructor===PE){const n=RE(bS(t.extremite1,e,r),bS(t.extremite2,e,r));return n.styleExtremites=t.styleExtremites,n}if(t.constructor===CE){let n;return n=Rw(o,0)?Jw(zw(-a/s),0):Jw(0,zw(-a/o)),TE(n,bS(hS(n,t),e,r))}}function xS(t,e,r,n,i="",s="above"){if(t.constructor===Kw){const o=Math.radians(r);return Jw(zw(e.x+n*(Math.cos(o)*(t.x-e.x)-Math.sin(o)*(t.y-e.y))),zw(e.y+n*(Math.cos(o)*(t.y-e.y)+Math.sin(o)*(t.x-e.x))),i,s)}if(t.constructor===DE){const i=[];for(let s=0;s<t.listePoints.length;s++)i[s]=xS(t.listePoints[s],e,r,n),i[s].nom=t.listePoints[s].nom+"'";return qE(i)}if(t.constructor===hE)return fE(xS(Jw(t.x1,t.y1),e,r,n),xS(Jw(t.x2,t.y2),e,r,n));if(t.constructor===PE){const i=RE(xS(t.extremite1,e,r,n),xS(t.extremite2,e,r,n));return i.styleExtremites=t.styleExtremites,i}return t.constructor===CE?gS(dS(t,e,r),e,n):void 0}function _S(t,e,r='begin="0s" dur="2s" repeatCount="indefinite"'){Zw.call(this),this.svg=function(n){let i="<g> ";if(Array.isArray(t))for(const e of t)i+="\n"+e.svg(n);else i+="\n"+t.svg(n);if(Array.isArray(e)){i+='<animateMotion path="M 0 0 l';for(const t of e)i+=` ${t.xSVG(n)} ${t.ySVG(n)} `;i+=`${r} />`}else i+=`<animateMotion path="M 0 0 l ${e.xSVG(n)} ${e.ySVG(n)} " ${r} />`;return i+="</g>",i}}function wS(t,e,r,n='begin="0s" dur="2s" repeatCount="indefinite"'){Zw.call(this),this.svg=function(i){let s="<g> ";if(Array.isArray(t))for(const e of t)s+="\n"+e.svg(i);else s+="\n"+t.svg(i);return s+=`<animateTransform\n  attributeName="transform"\n  type="rotate"\n  from="0 ${e.xSVG(i)} ${e.ySVG(i)}"\n  to="${-r} ${e.xSVG(i)} ${e.ySVG(i)}"\n  ${n}\n  />`,s+="</g>",s}}function ES(t,e,r,n='begin="0s" dur="2s" repeatCount="indefinite"'){Zw.call(this),this.svg=function(i){const s=t.binomesXY(i),o=gS(t,e,r);o.isVisible=!1;const a=o.binomesXY(i);return`<polygon stroke="${t.color}" stroke-width="${t.epaisseur}" fill="${t.couleurDeRemplissage}" >\n  <animate attributeName="points" ${n}\n  from="${s}"\n  to="${a}"\n  />\n  </polygon>`}}function SS(t,e,r='begin="0s" dur="2s" repeatCount="indefinite"'){Zw.call(this),this.svg=function(n){const i=t.binomesXY(n),s=yS(t,e);s.isVisible=!1;const o=s.binomesXY(n);return`<polygon stroke="${t.color}" stroke-width="${t.epaisseur}" fill="${t.couleurDeRemplissage}" >\n    <animate attributeName="points" ${r}\n    from="${i}"\n    to="${o}"\n    />\n    </polygon>`}}function AS(t,e,r,n='begin="0s" dur="2s" repeatCount="indefinite"'){Zw.call(this),this.svg=function(i){const s=t.binomesXY(i),o=bS(t,e,r);o.isVisible=!1;const a=o.binomesXY(i);return`<polygon stroke="${t.color}" stroke-width="${t.epaisseur}" fill="${t.couleurDeRemplissage}" >\n    <animate attributeName="points" ${n}\n    from="${s}"\n    to="${a}"\n    />\n    </polygon>`}}function NS(t){document.getElementById(t).style.visibility="visible"}function MS(t){document.getElementById(t).style.visibility="hidden"}function kS(t,e=1,r=5,n="Infinity"){let i=1;const s=setInterval((function(){if(document.getElementById(t.id))if(clearInterval(s),MS(t.id),1===n)setTimeout((function(){NS(t.id)}),1e3*e);else{const s=setInterval((function(){MS(t.id)}),1e3*r);setTimeout((function(){NS(t.id);const e=setInterval((function(){NS(t.id),i++,"number"==typeof n&&i>=n&&(clearInterval(s),clearInterval(e))}),1e3*r)}),1e3*e)}}),100)}function CS(t,e,r,n="black"){return fE(t,nE(e,r),"",n)}function TS(t,e,r,n="black"){const i=fE(e,r);return i.isVisible=!1,fE(vS(t,i),t,"",n)}function OS(t,e,r,n="black"){Zw.call(this),this.color=n;const i=fE(e,r),s=vS(t,i),o=dS(t,s,-90);e.x<r.x?s.x>r.x||s.x<e.x?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1:r.x<e.x?s.x<r.x||s.x>e.x?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1:e.y<r.y?s.y>r.y||s.y<e.y?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1:r.y<e.y&&(s.y<r.y||s.y>e.y?(i.isVisible=!0,i.pointilles=!0):i.isVisible=!1);const a=LS(t,s,o,this.color);this.svg=function(t){return i.isVisible?a.svg(t)+"\n\t"+i.svg(t):a.svg(t)},this.tikz=function(){return i.isVisible?a.tikz()+"\n\t"+i.tikz():a.tikz()}}function IS(t,e,r="black",n="//"){Zw.call(this),this.color=r;const i=nE(t,e),s=HS(n,this.color,t,i,i,e);this.svg=function(t){return s.svg(t)},this.tikz=function(t){return s.tikz(t)}}function PS(t,e,r,n="",i="above"){const s=vE(t,e),o=vE(e,r);s.isVisible=!1,o.isVisible=!1;const a=aE(s,o);return Jw(a.x,a.y,n,i)}function RS(t,e,r,n="black",i=.4){Zw.call(this),this.sommet=e,this.depart=t,this.arrivee=r,this.taille=i,this.color=n,this.svg=function(e){const i=iE(this.sommet,this.depart,20*this.taille/e),s=iE(this.sommet,this.arrivee,20*this.taille/e);let o={};o=UA(t,this.sommet,r)>0?dS(this.sommet,i,-90):dS(this.sommet,i,90);const a=ME([i,o,s],n);return a.isVisible=!1,this.id=a.id,a.svg(e)},this.tikz=function(){const e=iE(this.sommet,this.depart,this.taille/mathalea.scale),i=iE(this.sommet,this.arrivee,this.taille/mathalea.scale);let s={};return s=UA(t,this.sommet,r)>0?dS(this.sommet,e,-90):dS(this.sommet,e,90),ME([e,s,i],n).tikz()},this.svgml=function(e,i){const s=iE(this.sommet,this.depart,20*this.taille/e),o=iE(this.sommet,this.arrivee,20*this.taille/e);let a={};return a=UA(t,this.sommet,r)>0?dS(this.sommet,s,-90):dS(this.sommet,s,90),ME([s,a,o],n).svgml(e,i)},this.tikzml=function(e){const i=iE(this.sommet,this.depart,this.taille/mathalea.scale),s=iE(this.sommet,this.arrivee,this.taille/mathalea.scale);let o={};return o=UA(t,this.sommet,r)>0?dS(this.sommet,i,-90):dS(this.sommet,i,90),ME([i,o,s],n).tikzml(e)}}function LS(t,e,r,n="black",i=.4){return new RS(t,e,r,n,i)}function DS(t,e,r="black",n=.5){Zw.call(this),this.color=r,this.extremite1=t,this.extremite2=e,this.distance=n,this.svg=function(t){const e=nE(this.extremite1,this.extremite2),r=iE(e,dS(this.extremite1,e,-90),20*this.distance/t);let n;const i=RE(this.extremite1,this.extremite2);i.isVisible=!1;const s=jw(Uw(i.longueur,1));return n=this.extremite2.x>this.extremite1.x?-i.angleAvecHorizontale:180-i.angleAvecHorizontale,kA(s+" cm",r,n,this.color).svg(t)},this.tikz=function(){const t=nE(this.extremite1,this.extremite2),e=iE(t,dS(this.extremite1,t,-90),this.distance/mathalea.scale);let r;const n=RE(this.extremite1,this.extremite2);n.isVisible=!1;const i=jw(Uw(n.longueur,1));return r=this.extremite2.x>this.extremite1.x?-n.angleAvecHorizontale:180-n.angleAvecHorizontale,kA(i+" cm",e,r,this.color).tikz()}}function qS(...t){return new DS(...t)}function BS(t,e,r,n="black",i=.5){Zw.call(this),this.color=n,this.extremite1=e,this.extremite2=r,this.distance=i,this.texte=t,this.svg=function(t){const e=nE(this.extremite1,this.extremite2),r=iE(e,dS(this.extremite1,e,-90),20*this.distance/t),n=RE(this.extremite1,this.extremite2);let i;return n.isVisible=!1,i=this.extremite2.x>this.extremite1.x?-n.angleAvecHorizontale:180-n.angleAvecHorizontale,kA(this.texte,r,i,this.color).svg(t)},this.tikz=function(){const t=nE(this.extremite1,this.extremite2),e=iE(t,dS(this.extremite1,t,-90),this.distance/mathalea.scale),r=RE(this.extremite1,this.extremite2);let n;return r.isVisible=!1,n=this.extremite2.x>this.extremite1.x?-r.angleAvecHorizontale:180-r.angleAvecHorizontale,kA(this.texte,e,n,this.color).tikz()}}function US(...t){return new BS(...t)}function $S(t,e,r,n="black",i=1.5,s=""){Zw.call(this),this.depart=t,this.arrivee=r,this.sommet=e,this.distance=i,this.svg=function(t){let r;const i=iE(this.sommet,this.depart,this.distance),o=dS(iE(this.sommet,i,this.distance+10/t),this.sommet,UA(this.depart,this.sommet,this.arrivee)/2,"","center");let a;return""!==s?(a=s,r=30):(a=$w(BA(this.depart,this.sommet,this.arrivee),0)+"°",r=20),"\n"+TA(a,o,n,r,10,"").svg(t)+"\n"+tS(i,e,UA(this.depart,this.sommet,this.arrivee)).svg(t)},this.tikz=function(){let t;const r=iE(this.sommet,this.depart,this.distance),i=dS(iE(this.sommet,r,this.distance+.5),this.sommet,UA(this.depart,this.sommet,this.arrivee)/2,"","center");let o;return""!==s?(o=s,t=30):(o=$w(BA(this.depart,this.sommet,this.arrivee),0)+"°",t=20),"\n"+TA(o,i,n,t,10,"").tikz()+"\n"+tS(r,e,UA(this.depart,this.sommet,this.arrivee)).tikz()}}function zS(t,e="",r=.5,n="black",i=1,s=.5,o="black"){Zw.call(this),this.positionCoteSVG=20*r/mathalea.pixelsParCm,this.positionCoteTIKZ=r/mathalea.scale,this.positionValeur=s,this.seg=t,this.cote=e,this.svg=function(t){let e;const r=this.seg.extremite1,s=this.seg.extremite2,a=xS(TE(r,s),r,90,this.positionCoteSVG/this.seg.longueur),u=RE(hS(r,a),hS(s,a),n);return DA(r,s)>1?u.styleExtremites="<->":u.styleExtremites=">-<",u.epaisseur=i,e=""===this.cote?qS(u.extremite1,u.extremite2,o,this.positionValeur):US(this.cote,u.extremite1,u.extremite2,o,this.positionValeur),"\n\t"+u.svg(t)+"\n\t"+e.svg(t)},this.tikz=function(){let t;const e=this.seg.extremite1,r=this.seg.extremite2,s=xS(TE(e,r),e,90,this.positionCoteTIKZ/this.seg.longueur),a=RE(hS(e,s),hS(r,s),n);return DA(e,r)>1?a.styleExtremites="<->":a.styleExtremites=">-<",a.epaisseur=i,t=""===this.cote?qS(a.extremite1,a.extremite2,o,this.positionValeur):US(this.cote,a.extremite1,a.extremite2,o,this.positionValeur),"\n\t"+a.tikz()+"\n\t"+t.tikz()}}function FS(...t){return new zS(...t)}function GS(t,e,r="||",n="black"){Zw.call(this),this.color=n;const i=nE(t,e),s=RE(t,e);let o;return s.isVisible=!1,o=e.x>t.x?-parseInt(s.angleAvecHorizontale):180-parseInt(s.angleAvecHorizontale),kA(r,i,o,this.color)}function VS(...t){return new GS(...t)}function jS(t="||",e="black",...r){Zw.call(this),this.svg=function(n){let i="";if(Array.isArray(r[0])){for(let s=0;s<r[0].length-1;s++){const o=VS(r[0][s],r[0][s+1],t,e);o.isVisible=!1,i+=o.svg(n),i+="\n"}const s=VS(r[0][r[0].length-1],r[0][0],t,e);s.isVisible=!1,i+=s.svg(n),i+="\n"}else if(r[0].constructor===PE)for(let s=0;s<r.length;s++){const o=VS(r[s].extremite1,r[s].extremite2,t,e);o.isVisible=!1,i+=o.svg(n),i+="\n"}else for(let s=0;s<r.length;s+=2){const o=VS(r[s],r[s+1],t,e);o.isVisible=!1,i+=o.svg(n),i+="\n"}return i=`<g id="${this.id}">${i}</g>`,i},this.tikz=function(){let n="";if(Array.isArray(r[0])){for(let i=0;i<r[0].length-1;i++)n+=VS(r[0][i],r[0][i+1],t,e).tikz(),n+="\n";n+=VS(r[0][r[0].length-1],r[0][0],t,e).tikz(),n+="\n"}else if(r[0].constructor===PE)for(let i=0;i<r.length;i++)n+=VS(r[i].extremite1,r[i].extremite2,t,e).tikz(),n+="\n";else for(let i=0;i<r.length;i+=2)n+=VS(r[i],r[i+1],t,e).tikz(),n+="\n";return n}}function HS(t="||",e="black",...r){return new jS(t,e,...r)}function WS(t,e,r,n=.8,i="",s="black",o=1,a=1,u="none",l=.2,c=!1){let p;Zw.call(this),this.color=s,this.debut=t,this.centre=e,this.taille=n,this.mark=i,this.epaisseur=o,this.opacite=a,"none"!==u?(this.couleurDeRemplissage=u,this.opaciteDeRemplissage=l):this.couleurDeRemplissage="none",p="none"!==u,this.angle=r,this.svg=function(t){let e="";const o=[],a=iE(this.centre,this.debut,20*this.taille/mathalea.pixelsParCm),u=dS(a,this.centre,this.angle/2),l=iE(this.centre,u,n+12/t),h=fE(this.centre,u);h.isVisible=!1;const f=$w(Math.abs(r),0)+"°",d=tS(a,this.centre,this.angle,p,this.couleurDeRemplissage,this.color);if(d.isVisible=!1,o.push(d),d.opacite=this.opacite,d.epaisseur=this.epaisseur,d.couleurDeRemplissage=this.couleurDeRemplissage,d.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark){const t=kA(i,u,90-h.angleAvecHorizontale,s);t.isVisible=!1,o.push(t)}if(c){const t=kA(f,l,"milieu",s);t.isVisible=!1,o.push(t)}for(const r of o)e+="\n\t"+r.svg(t);return o.length>1?e=`<g id="${this.id}">${e}</g>`:this.id=d.id,e},this.tikz=function(){let t="";const e=iE(this.centre,this.debut,this.taille/mathalea.scale),o=dS(e,this.centre,this.angle/2),a=iE(this.centre,o,n+.6/mathalea.scale),u=$w(Math.abs(r),0)+"°",l=fE(this.centre,o);l.isVisible=!1;const h=tS(e,this.centre,this.angle,p,this.couleurDeRemplissage,this.color);return h.opacite=this.opacite,h.epaisseur=this.epaisseur,h.couleurDeRemplissage=this.couleurDeRemplissage,h.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark&&(t+=kA(i,o,90-l.angleAvecHorizontale,s).tikz()+"\n"),c&&(t+=kA(u,a,"milieu",s).tikz()+"\n"),t+=h.tikz(),t},this.svgml=function(t,e){let o="";const a=iE(this.centre,this.debut,20*this.taille/mathalea.pixelsParCm),u=dS(a,this.centre,this.angle/2),l=iE(this.centre,u,n+12/t),p=$w(Math.abs(r),0)+"°",h=fE(this.centre,u);h.isVisible=!1;const f=tS(a,this.centre,this.angle,!1,this.couleurDeRemplissage,this.color);return f.opacite=this.opacite,f.epaisseur=this.epaisseur,f.couleurDeRemplissage=this.couleurDeRemplissage,f.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark&&(o+=kA(i,u,90-h.angleAvecHorizontale,s).svg(t)+"\n"),c&&(o+=kA(p,l,"milieu",s).svg(t)+"\n"),o+=f.svgml(t,e),o},this.tikzml=function(t){let e="";const o=iE(this.centre,this.debut,this.taille/mathalea.scale),a=dS(o,this.centre,this.angle/2),u=iE(this.centre,a,n+.6/mathalea.scale),l=$w(Math.abs(r),0)+"°",h=fE(this.centre,a);h.isVisible=!1;const f=tS(o,this.centre,this.angle,p,this.couleurDeRemplissage,this.color);return f.opacite=this.opacite,f.epaisseur=this.epaisseur,f.couleurDeRemplissage=this.couleurDeRemplissage,f.opaciteDeRemplissage=this.opaciteDeRemplissage,""!==this.mark&&(e+=kA(i,a,90-h.angleAvecHorizontale,s).tikz()+"\n"),c&&(e+=kA(l,u,"milieu",s).tikz()+"\n"),e+=f.tikzml(t),e}}function YS(t,e,r,n=.8,i="",s="black",o=1,a=1,u="none",l=.2,c=!1){return"number"!=typeof r&&(r=UA(t,e,r)),90===r||-90===r?new RS(t,e,dS(t,e,r),s,n):new WS(t,e,r,n,i,s,o,a,u,l,c)}function XS(t,e,r,n,i){Zw.call(this);const s=[];s.push(CA(t,e,r,"milieu",n,1,"middle",!0));const o=RE(e-.6,r+.4-i/10,e+.1,r+.4+i/10),a=RE(e+.1,r+.4+i/10,e+.8,r+.4-i/10);o.color=n,a.color=n,s.push(o,a),this.svg=function(t){let e="";for(const r of s)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of s)t+="\n\t"+e.tikz();return t}}function ZS(t=0,e=0,r="H",n="dd",i=10,s=10,o=15,a=0,u=1,l="O",c="I",p=!0,...h){Zw.call(this);let f,d,m,g,y=[1,0];const v=u-a;"H"!==r&&(y=[0,1]);const b=[];for(let r=0;r<h.length;r++)b.push(CA(h[r][0],t+(-a+h[r][1])*y[0]*i/v+.8*y[1],e+(-a+h[r][1])*y[1]*i/v+.8*y[0])),b.push(CA("X",t+(-a+h[r][1])*y[0]*i/v,e+(-a+h[r][1])*y[1]*i/v,"milieu","blue"));g=RE(Jw(t+o*y[0],e+o*y[1]),Jw(t+(o-.3)*y[0]+.3*y[1],e+(o-.3)*y[1]+.3*y[0])),g.epaisseur=2,b.push(g),g=RE(Jw(t+o*y[0],e+o*y[1]),Jw(t+(o-.3)*y[0]-.3*y[1],e+(o-.3)*y[1]-.3*y[0])),g.epaisseur=2,b.push(g);const x=Uw(i/s,2);f=RE("dd"===n?Jw(t,e):Jw(t-.5*y[0],e-.5*y[1]),Jw(t+o*y[0],e+o*y[1]));const _=CA(l,t-.8*y[1],e-.8*y[0]),w=CA(c,t-.8*y[1]+i*y[0],e-.8*y[0]+i*y[1]);d=0;for(let r=0;r<o;r+=x)d%s==0?(m=RE(Jw(t+r*y[0]-.3*y[1],e-.3*y[0]+r*y[1]),Jw(t+r*y[0]+.3*y[1],e+.3*y[0]+r*y[1])),m.epaisseur=2,b.push(m),p&&0!==d&&d!==s&&b.push(CA(Vw(Uw(zw(a+r/i*v),3)),t+r*y[0]-.8*y[1],e+r*y[1]-.8*y[0]))):(m=RE(Jw(t+r*y[0]-.2*y[1],e-.2*y[0]+r*y[1]),Jw(t+r*y[0]+.2*y[1],e+.2*y[0]+r*y[1])),b.push(m)),d++;b.push(f,_,w,void 0),this.svg=function(t){let e="";for(const r of b)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of b)t+="\n\t"+e.tikz();return t},this.svgml=function(t,e){let r="";for(const n of b)mathalea.mainlevee&&void 0!==n.svgml?r+="\t"+n.svgml(t,e)+"\n":r+="\t"+n.svg(t)+"\n";return r},this.tikzml=function(t){let e="";for(const r of b)mathalea.mainlevee&&void 0!==r.tikzml?e+="\t"+r.tikzml(t)+"\n":e+="\t"+r.tikz()+"\n";return e}}function KS({Unite:t=10,Min:e=0,Max:r=2,x:n=0,y:i=0,axeEpaisseur:s=2,axeCouleur:o="black",axeStyle:a="->",axeHauteur:u=4,axePosition:l="H",thickEpaisseur:c=2,thickCouleur:p=o,thickDistance:h=1,thickOffset:f=.1,thickSecDist:d=.1,thickSec:m=!1,thickTerDist:g=.01,thickTer:y=!1,pointListe:v=!1,pointCouleur:b="blue",pointTaille:x=4,pointStyle:_="+",pointOpacite:w=.8,pointEpaisseur:E=2,labelsPrincipaux:S=!0,labelsSecondaires:A=!1,step1:N=1,step2:M=1,labelDistance:k=(u+10)/mathalea.pixelsParCm,labelListe:C=!1,Legende:T="",LegendePosition:O=zw((r-e)*t+1.5)}={}){Zw.call(this),this.Unite=t,this.Min=e,this.Max=r;const I=[];let P,R,L,D,q,B=(r-e)*t+1.1,U=[1,0];"H"!==l&&(U=[0,1]),"->"===a?(B+=.2,P=RE(Jw(n-.2*U[0],i-.2*U[1]),Jw(n+B*U[0],i+B*U[1]),o),P.styleExtremites="->",P.tailleExtremites=u,P.epaiseur=s):(P=RE(Jw(n,i),Jw(n+B*U[0],i+B*U[1]),o),P.styleExtremites="|->",P.epaiseur=s,P.tailleExtremites=u),I.push(P);const $=10/mathalea.pixelsParCm;q=zw(y?1/g:m?1/d:1/h);const z=Math.round((e+f)*q),F=Math.round((r-f)*q),G=Math.round(h*q),V=Math.round(d*q);for(let r=z;r<=F;r++)D=zw((r-e*q)/q),r%G==0?(P=RE(Jw(n+D*t*U[0]-u/8*$*U[1],i-u/8*$*U[0]+D*t*U[1]),Jw(n+D*t*U[0]+u/8*$*U[1],i+u/8*$*U[0]+D*t*U[1]),p),P.epaisseur=c,I.push(P)):r%V==0&&m?(P=RE(Jw(n+D*t*U[0]-u/12*$*U[1],i-u/12*$*U[0]+D*t*U[1]),Jw(n+D*t*U[0]+u/12*$*U[1],i+u/12*$*U[0]+D*t*U[1]),p),P.epaisseur=c/2,P.opacite=.8,I.push(P)):y&&(P=RE(Jw(n+D*t*U[0]-u/16*$*U[1],i-u/16*$*U[0]+D*t*U[1]),Jw(n+D*t*U[0]+u/16*$*U[1],i+u/16*$*U[0]+D*t*U[1]),p),P.epaisseur=c/4,P.opacite=.6,I.push(P));if(S)for(let r=z;r<=F;r++)r%(N*G)==0&&(D=zw((r-e*q)/q),R=CA(`${Vw(Uw(zw(e+D),3))}`,n+D*t*U[0]-k*U[1],i+D*t*U[1]-k*U[0]),I.push(R));if(A)for(let r=z;r<=F;r++)r%(M*V)==0&&r%G!=0&&(D=zw((r-e*q)/q),R=CA(`${Vw(Uw(zw(e+D),3))}`,n+D*t*U[0]-k*U[1],i+D*t*U[1]-k*U[0]),I.push(R));let j;if(C)for(const r of C)j=CA(r[1],n-k*U[1]+(r[0]-e)*U[0]*t,i-k*U[0]+(r[0]-e)*U[1]*t),I.push(j);if(""!==T&&I.push(CA(T,n+O*U[0],i+O*U[1])),v)for(const r of v)L=Jw(n+(r[0]-e)*U[0]*t,i+(r[0]-e)*U[1]*t,r[1],"above"),R=tE(L,b),R.taille=x,R.opacite=w,R.style=_,R.epaisseur=E,I.push(R,cE(L));this.svg=function(t){let e="";for(const r of I)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of I)t+="\n\t"+e.tikz();return t},this.svgml=function(t,e){let r="";for(const n of I)void 0===n.svgml?r+="\t"+n.svg(t)+"\n":r+="\t"+n.svgml(t,e)+"\n";return r},this.tikzml=function(t){let e="";for(const r of I)void 0===r.tikzml?e+="\t"+r.tikz()+"\n":e+="\t"+r.tikzml(t)+"\n";return e}}function JS(t=-30,e=-30,r=30,n=30,i=.2,s=1,o=1,a=2,u="black"){Zw.call(this);const l=[];let c,p;c=e>0?e:0,p=t>0?t:0;const h=RE(t,c,r,c);h.styleExtremites="->",h.epaisseur=a,h.color=u;const f=RE(p,e,p,n);f.styleExtremites="->",f.epaisseur=a,l.push(h,f),f.color=u;for(let e=t;e<r;e=zw(e+s)){const t=RE(e,c-i,e,c+i);t.epaisseur=a,t.color=u,l.push(t)}for(let t=e;t<n;t=zw(t+o)){const e=RE(p-i,t,p+i,t);e.epaisseur=a,e.color=u,l.push(e)}this.svg=function(t){let e="";for(const r of l)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of l)t+="\n\t"+e.tikz();return t},this.commentaire=`Axes(xmin = ${t}, ymin = ${e}, xmax = ${r}, ymax = ${n}, thick = ${i})`}function QS(...t){return new JS(...t)}function tA(t=1,e=20,r=1,n="black",i=-.6,s=1){Zw.call(this);const o=[];for(let a=Math.ceil(t/s);zw(a*s)<=e;a=zw(a+r))o.push(kA(Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(zw(a*s)).toString(),Jw(a,i),"milieu",n));this.svg=function(t){let e="";for(const r of o)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of o)t+="\n\t"+e.tikz();return t},this.commentaire=`labelX(xmin=${t},xmax=${e},step=${r},color=${n},pos=${i},coeff=${s})`}function eA(...t){return new tA(...t)}function rA(t=1,e=20,r=1,n="black",i=-.6,s=1){Zw.call(this);const o=[];for(let a=Math.ceil(t/s);zw(a*s)<=e;a=zw(a+r))o.push(kA(Intl.NumberFormat("fr-FR",{maximumFractionDigits:20}).format(zw(a*s)).toString(),Jw(i,a),"milieu",n));this.svg=function(t){let e="";for(const r of o)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of o)t+="\n\t"+e.tikz();return t},this.commentaire=`labelX(ymin=${t},ymax=${e},step=${r},color=${n},pos=${i})`}function nA(...t){return new rA(...t)}function iA(t=-30,e=-30,r=30,n=30,i="gray",s=.4,o=1,a=!1){Zw.call(this),this.color=i,this.opacite=s;const u=[];for(let i=Uw(t,2);i<=Uw(r,2);i=Uw(zw(i+o),2)){const t=RE(i,e,i,n);t.color=this.color,t.opacite=this.opacite,a&&(t.pointilles=!0),u.push(t)}for(let i=Uw(e,2);i<=Uw(n+.005,2);i=Uw(zw(i+o),2)){const e=RE(t,i,r,i);e.color=this.color,e.opacite=this.opacite,a&&(e.pointilles=!0),u.push(e)}this.commentaire=`Grille(xmin = ${t}, ymin = ${e}, xmax = ${r}, ymax = ${n}, color = ${i}, opacite = ${s}, pas = ${o})`,this.svg=function(t){let e="";for(const r of u)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of u)t+="\n\t"+e.tikz();return t}}function sA(...t){return new iA(...t)}function oA(t=-30,e=-30,r=30,n=30,i="gray",s=.4,o=1,a=!1){Zw.call(this),this.color=i,this.opacite=s;const u=[];for(let i=e;i<=n;i+=o){const e=RE(t,i,r,i);e.color=this.color,e.opacite=this.opacite,a&&(e.pointilles=!0),u.push(e)}this.svg=function(t){let e="";for(const r of u)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of u)t+="\n\t"+e.tikz();return t}}function aA(...t){return new oA(...t)}function uA(t=-30,e=-30,r=30,n=30,i="gray",s=.4,o=1,a=!1){Zw.call(this),this.color=i,this.opacite=s;const u=[];for(let i=Uw(t,2);i<=Uw(r,2);i=Uw(zw(i+o),2)){const t=RE(i,e,i,n);t.color=this.color,t.opacite=this.opacite,a&&(t.pointilles=!0),u.push(t)}this.svg=function(t){let e="";for(const r of u)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of u)t+="\n\t"+e.tikz();return t}}function lA(t=0,e=0,r=15,n=15,i=.5,s=.2){Zw.call(this);const o=[];for(let i=e;i<=n;i=zw(i+.25))if(i%1!=0){const e=RE(t,i,r,i);e.color="red",e.opacite=s,o.push(e)}o.push(sA(t,e,r,n,"blue",i,1)),this.svg=function(t){let e="";for(const r of o)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of o)t+="\n\t"+e.tikz();return t}}function cA({xmin:t=-10,xmax:e=10,ymin:r=-10,ymax:n=10,xscale:i=1,yscale:s=1,xstep:o=1,ystep:a=1,graduationColor:u="black",afficheZero:l=!1,afficheNumeros:c=!0,afficheLabelX:p=!0,afficheLabelY:h=!0,axesEpaisseur:f=2,axesColor:d="black",grilleHorizontaleVisible:m=!1,grillePrincipaleDistance:g=1,grillePrincipaleColor:y="gray",grillePrincipaleOpacite:v=1.1,grillePrincipalePointilles:b=!1,grillePrincipaleVisible:x=!0,grilleSecondaireDistance:_=.1,grilleSecondaireColor:w="gray",grilleSecondaireOpacite:E=.3,grilleSecondairePointilles:S=!1,grilleSecondaireVisible:A=!1,graduationsxMin:N=t,graduationsxMax:M=e,graduationsyMin:k=r,graduationsyMax:C=n,positionLabelX:T=-.6,positionLabelY:O=-.6,legendeX:I="x",legendeY:P="y",positionLegendeX:R,positionLegendeY:L}={}){let D,q;Zw.call(this),D=r>0?r:0,q=t>0?t:0,1!==s&&(r=Yw(s,r),n=Ww(s,n)),1!==i&&(t=Yw(i,t),e=Ww(i,e)),this.svg=function(B){let U="";return x&&(U+=m?aA(zw(t/i),zw(r/s),zw(e/i),zw(n/s),y,v,g,b).svg(B):sA(zw(t/i),zw(r/s),zw(e/i),zw(n/s),y,v,g,b).svg(B)),A&&(U+=sA(zw(t/i),zw(r/s),zw(e/i),zw(n/s),w,E,_,S).svg(B)),U+=QS(zw(t/i),zw(r/s),zw(e/i),zw(n/s),4/B,o,a,f,d).svg(B),c&&(l?(p&&(U+=eA(Ww(o,N),M,o,u,zw(D/s)+20*T/B,i).svg(B)),h&&(U+=nA(Ww(a,k),C,a,u,zw(q/i)+20*O/B,s).svg(B))):(p&&(U+=eA(Ww(o,N),-1,o,u,zw(D/s)+20*T/B,i).svg(B)),h&&(U+=nA(Ww(a,k),-1,a,u,zw(q/i)+20*O/B,s).svg(B)),p&&(U+=eA(Math.max(o,Ww(o,N)),M,o,u,zw(D/s)+20*T/B,i).svg(B)),h&&(U+=nA(Math.max(a,Ww(a,k)),C,a,u,zw(q/i)+20*O/B,s).svg(B)))),void 0===R&&(R=[e+4/B,D+6/B]),void 0===L&&(L=[q+6/B,n+8/B]),U+=CA(I,zw(R[0]/i),zw(R[1]/s),"droite").svg(B),U+=CA(P,zw(L[0]/i),zw(L[1]/s),"droite").svg(B),U},this.tikz=function(){let c="";return x&&(c+=m?aA(zw(t/i),zw(r/s),zw(e/i),zw(n/s),y,v,g,b).tikz():sA(zw(t/i),zw(r/s),zw(e/i),zw(n/s),y,v,g,b).tikz()),A&&(c+=sA(zw(t/i),zw(r/s),zw(e/i),zw(n/s),w,E,_,S).tikz()),c+=QS(zw(t/i),zw(r/s),zw(e/i),zw(n/s),.2/mathalea.scale,o,a,f,d).tikz(),l?(p&&(c+=eA(Ww(o,N),M,o,u,zw(D/s)+T/mathalea.scale,i).tikz()),h&&(c+=nA(Ww(a,k),C,a,u,zw(q/i)+O/mathalea.scale,s).tikz())):(p&&(c+=eA(Ww(o,N),-1,o,u,zw(D/s)+T/mathalea.scale,i).tikz()),h&&(c+=nA(Ww(a,k),-1,a,u,zw(q/i)+O/mathalea.scale,s).tikz()),p&&(c+=eA(Math.max(o,Ww(o,N)),M,o,u,zw(D/s)+T/mathalea.scale,i).tikz()),h&&(c+=nA(Math.max(a,Ww(a,k)),C,a,u,zw(q/i)+O/mathalea.scale,s).tikz())),void 0===R&&(R=[e+.2/mathalea.scale,D+.3/mathalea.scale]),void 0===L&&(L=[q+.3/mathalea.scale,n+.2/mathalea.scale]),c+=CA(I,zw(R[0]/i),zw(R[1]/s),"droite").tikz(),c+=CA(P,zw(L[0]/i),zw(L[1]/s),"droite").tikz(),c},this.xscale=i,this.yscale=s}function pA({xUnite:t=1,yUnite:e=1,xMin:r=-10,xMax:n=10,yMin:i=-10,yMax:s=10,axesEpaisseur:o=2,axesCouleur:a="black",axeXStyle:u="->",axeYStyle:l="->",thickEpaisseur:c=2,thickHauteur:p=.2,thickCouleur:h=a,xThickDistance:f=1,xThickListe:d=!1,xThickMin:m=r+f,xThickMax:g=n-f,yThickDistance:y=1,yThickListe:v=!1,yThickMin:b=i+y,yThickMax:x=s-y,xLabelDistance:_=f,xLabelListe:w=!1,xLabelMin:E=m,xLabelMax:S=g,yLabelDistance:A=y,yLabelListe:N=!1,yLabelMin:M=b,yLabelMax:k=x,xLegende:C="",xLegendePosition:T=[zw(n*t)+.5,.5],yLegende:O="",yLegendePosition:I=[.5,zw(s*e)+.5],grille:P=!0,grilleDistance:R=!1,grilleCouleur:L="black",grilleOpacite:D=.5,grilleEpaisseur:q=1,grilleSecondaire:B=!1,grilleSecondaireDistance:U=!1,grilleSecondaireCouleur:$="gray",grilleSecondaireOpacite:z=.3,grilleSecondaireEpaisseur:F=1,grilleX:G=P,grilleXListe:V=!1,grilleXDistance:j=R,grilleXMin:H=!1,grilleXMax:W=!1,grilleXCouleur:Y=L,grilleXOpacite:X=D,grilleY:Z=P,grilleYListe:K=!1,grilleYDistance:J=R,grilleYMin:Q=!1,grilleYMax:tt=!1,grilleYCouleur:et=L,grilleYOpacite:rt=D,grilleSecondaireX:nt=B,grilleSecondaireXListe:it=!1,grilleSecondaireXDistance:st=U,grilleSecondaireXMin:ot=!1,grilleSecondaireXMax:at=!1,grilleSecondaireXCouleur:ut=$,grilleSecondaireXOpacite:lt=z,grilleSecondaireY:ct=B,grilleSecondaireYListe:pt=!1,grilleSecondaireYDistance:ht=U,grilleSecondaireYMin:ft=!1,grilleSecondaireYMax:dt=!1,grilleSecondaireYCouleur:mt=$,grilleSecondaireYOpacite:gt=z}={}){Zw.call(this),this.xUnite=t,this.yUnite=e,this.xMin=r,this.xMax=n,this.yMin=i,this.yMax=s;const yt=[],vt=Math.max(0,i),bt=RE(zw(r*t),zw(vt*e),zw(n*t),zw(vt*e));bt.epaisseur=o,bt.styleExtremites=u,bt.color=a;const xt=Math.max(0,r),_t=RE(zw(xt*t),zw(i*e),zw(xt*t),zw(s*e));_t.epaisseur=o,_t.styleExtremites=l,_t.color=a,yt.push(bt,_t),bt.isVisible=!1,_t.isVisible=!1,d||(d=qw(m,g,[0],f));for(const r of d){const n=RE(zw(r*t),zw(vt*e-p),zw(r*t),zw(vt*e+p));n.isVisible=!1,n.epaisseur=c,n.color=h,yt.push(n)}v||(v=qw(b,x,[0],y));for(const r of v){const n=RE(zw(xt*t-p),zw(r*e),zw(xt*t+p),zw(r*e));n.isVisible=!1,n.epaisseur=c,n.color=h,yt.push(n)}w||(w=qw(E,S,[0],_));for(const r of w){const n=CA(Gw(r),zw(r*t),zw(vt*e)-.5,"milieu","black",1,"middle",!0);n.isVisible=!1,yt.push(n)}N||(N=qw(M,k,[0],A));for(const r of N){const n=CA(Gw(r),zw(xt*t)-.5,zw(r*e),"milieu","black",1,"middle",!0);n.isVisible=!1,yt.push(n)}if(C.length>0&&yt.push(CA(C,T[0],T[1],"droite")),O.length>0&&yt.push(CA(O,I[0],I[1],"droite")),Z){K||("number"!=typeof Q&&(Q=b),"number"!=typeof tt&&(tt=x),J||(J=y),K=qw(Q,tt,[0],J));for(const i of K){const s=RE(zw(r*t),zw(i*e),zw(n*t),zw(i*e));s.isVisible=!1,s.color=et,s.opacite=rt,s.epaisseur=q,"pointilles"===Z&&(s.pointilles=!0),yt.push(s)}}if(G){V||("number"!=typeof H&&(H=m),"number"!=typeof W&&(W=g),"number"!=typeof j&&(j=f),V=qw(H,W,[0],j));for(const r of V){const n=RE(zw(r*t),zw(i*e),zw(r*t),zw(s*e));n.isVisible=!1,n.color=Y,n.opacite=X,n.epaisseur=q,"pointilles"===G&&(n.pointilles=!0),yt.push(n)}}if(ct){pt||("number"!=typeof ft&&(ft=b),"number"!=typeof dt&&(dt=x),"number"!=typeof ht&&(ht=zw(y/2)),pt=qw(ft,dt,[0],ht));for(const i of pt){const s=RE(zw(r*t),zw(i*e),zw(n*t),zw(i*e));s.isVisible=!1,s.color=mt,s.opacite=gt,s.epaisseur=F,"pointilles"===ct&&(s.pointilles=!0),yt.push(s)}}if(nt){it||("number"!=typeof ot&&(ot=m/2),"number"!=typeof at&&(at=g),"number"!=typeof st&&(st=zw(f/2)),it=qw(ot,at,[0],st));for(const r of it){const n=RE(zw(r*t),zw(i*e),zw(r*t),zw(s*e));n.isVisible=!1,n.color=ut,n.opacite=lt,n.epaisseur=F,"pointilles"===nt&&(n.pointilles=!0),yt.push(n)}}this.svg=function(t){let e="";for(const r of yt)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of yt)t+="\n\t"+e.tikz();return t},this.svgml=function(t,e){let r="";for(const n of yt)void 0===n.svgml?r+="\n\t"+n.svg(t):r+="\n\t"+n.svgml(t,e);return r},this.tikzml=function(t){let e="";for(const r of yt)void 0===r.tikzml?e+="\n\t"+r.tikz():e+="\n\t"+r.tikzml(t);return e}}function hA(t,e,r={xUnite:1,yUnite:1}){return Jw(zw(t*r.xUnite),zw(e*r.yUnite))}function fA(t,e,{couleurDesPoints:r="red",couleurDuTrait:n="blue",styleDuTrait:i="",epaisseurDuTrait:s=2,styleDesPoints:o="x",tailleDesPoints:a=3}={}){Zw.call(this);const u=[],l=[];for(const[n,i]of t){const t=hA(n,i,e);l.push(t);const s=tE(t);s.color=r,s.style=o,s.taille=a,s.isVisible=!1,t.isVisible=!1,u.push(s)}const c=ME(...l);c.isVisible=!1,c.epaisseur=s,c.color=n,"pointilles"===i&&(c.pointilles=!0),u.push(c),this.svg=function(t){let e="";for(const r of u)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of u)t+="\n\t"+e.tikz();return t},this.svgml=function(t,e){let r="";for(const n of u)void 0===n.svgml?r+="\n\t"+n.svg(t):r+="\n\t"+n.svgml(t,e);return r},this.tikzml=function(t){let e="";for(const r of u)void 0===r.tikzml?e+="\n\t"+r.tikz():e+="\n\t"+r.tikzml(t);return e}}function dA(t,e,r="",{epaisseur:n=.6,couleurDeRemplissage:i="blue",color:s="black",opaciteDeRemplissage:o=.3,angle:a=66,unite:u=1,hachures:l=!1}={}){Zw.call(this);const c=qE(Jw(zw(t-n/2),0),Jw(zw(t-n/2),zw(e*u)),Jw(zw(t+n/2),zw(e*u)),Jw(zw(t+n/2),0));c.couleurDeRemplissage=i,c.opaciteDeRemplissage=o,c.color=s,l&&(c.hachures=l);const p=CA(r,t,-.2,a,"black",1,"gauche");this.tikz=function(){return c.tikz()+"\n"+p.tikz()},this.svg=function(t){return c.svg(t)+"\n"+p.svg(t)}}function mA(t,e,r="",{epaisseur:n=.6,couleurDeRemplissage:i="blue",color:s="black",opaciteDeRemplissage:o=.3,unite:a=1}={}){Zw.call(this);const u=qE(Jw(0,zw(e-n/2)),Jw(0,zw(e+n/2)),Jw(zw(a*t),zw(e+n/2)),Jw(zw(a*t),zw(e-n/2)));u.couleurDeRemplissage=i,u.opaciteDeRemplissage=o,u.color=s;const l=CA(r,-.2,e,"gauche","black");this.tikz=function(){return u.tikz()+"\n"+l.tikz()},this.svg=function(t){return u.svg(t)+"\n"+l.svg(t)}}function gA(t,e,r=1,n=1,i="red",s="",o=""){Zw.call(this),this.x=t,this.y=e,this.xscale=r,this.yscale=n,""===s&&(s=t.toString()),""===o&&(o=e.toString()),this.text_abs=s,this.text_ord=o,this.color=i,this.svg=function(t){const e=zw(this.x/this.xscale),r=zw(this.y/this.yscale),n=Jw(e,r),i=Jw(e,0),s=Jw(0,r),o=RE(i,n,this.color),a=RE(n,s,this.color);return o.styleExtremites="->",a.styleExtremites="->",o.pointilles=!0,a.pointilles=!0,"\t\n"+o.svg(t)+"\t\n"+a.svg(t)+"\t\n"+CA(this.text_abs,e,-20/t,"milieu",this.color).svg(t)+"\t\n"+CA(this.text_ord,-20/t,r,"milieu",this.color).svg(t)},this.tikz=function(){const t=zw(this.x/this.xscale),e=zw(this.y/this.yscale),r=Jw(t,e),n=Jw(t,0),i=Jw(0,e),s=RE(n,r,this.color),o=RE(r,i,this.color);return s.styleExtremites="->",o.styleExtremites="->",s.pointilles=!0,o.pointilles=!0,"\t\n"+s.tikz()+"\t\n"+o.tikz()+"\t\n"+CA(this.text_abs,t,-1/mathalea.scale,"milieu",this.color).tikz()+"\t\n"+CA(this.text_ord,-1/mathalea.scale,e,"milieu",this.color).tikz()},this.svgml=function(r,n){const i=zw(this.x/this.xscale),s=zw(this.y/this.yscale),o=Jw(t,e),a=Jw(i,0),u=Jw(0,s),l=RE(a,o,this.color),c=RE(o,u,this.color);return l.styleExtremites="->",c.styleExtremites="->",l.pointilles=!0,c.pointilles=!0,"\t\n"+l.svgml(r,n)+"\t\n"+c.svgml(r,n)+"\t\n"+CA(this.text_abs,i,-20/r,"milieu",this.color).svg(r)+"\t\n"+CA(this.text_ord,-20/r,s,"milieu",this.color).svg(r)},this.tikzml=function(r){const n=zw(this.x/this.xscale),s=zw(this.y/this.yscale),o=Jw(t,e),a=Jw(n,0),u=Jw(0,s),l=RE(a,o,i),c=RE(o,u,i);return l.styleExtremites="->",c.styleExtremites="->",l.pointilles=!0,c.pointilles=!0,"\t\n"+l.tikzml(r)+"\t\n"+c.tikzml(r)+"\t\n"+CA(this.text_abs,n,-1/mathalea.scale,"milieu",this.color).tikz()+"\t\n"+CA(this.text_ord,-1/mathalea.scale,s,"milieu",this.color).tikz()}}function yA(t,e,r,n,i,s,o){Zw.call(this),this.x=t,this.y=e,this.xscale=r,this.yscale=n,""===o&&(o=this.x.toString()),""===s&&(s=this.y.toString()),this.text_abs=o,this.text_ord=s,this.color=i,this.svg=function(t){const e=zw(this.x/this.xscale),r=zw(this.y/this.yscale),n=Jw(e,r),s=Jw(e,0),o=Jw(0,r),a=RE(n,s,i),u=RE(o,n,i);return a.styleExtremites="->",u.styleExtremites="->",a.pointilles=!0,u.pointilles=!0,"\t\n"+a.svg(t)+"\t\n"+u.svg(t)+"\t\n"+CA(this.text_abs,e,-20/t,"milieu",this.color).svg(t)+"\t\n"+CA(this.text_ord,-20/t,r,"milieu",this.color).svg(t)},this.tikz=function(){const t=zw(this.x/this.xscale),e=zw(this.y/this.yscale),r=Jw(t,e),n=Jw(t,0),s=Jw(0,e),o=RE(r,n,i),a=RE(s,r,i);return o.styleExtremites="->",a.styleExtremites="->",o.pointilles=!0,a.pointilles=!0,"\t\n"+o.tikz()+"\t\n"+a.tikz()+"\t\n"+CA(this.text_abs,t,-1/mathalea.scale,"milieu",this.color).tikz()+"\t\n"+CA(this.text_ord,-1/mathalea.scale,e,"milieu",this.color).tikz()},this.svgml=function(t,e){const r=zw(this.x/this.xscale),n=zw(this.y/this.yscale),s=Jw(r,n),o=Jw(r,0),a=Jw(0,n),u=RE(s,o,i),l=RE(a,s,i);return u.styleExtremites="->",l.styleExtremites="->",u.pointilles=!0,l.pointilles=!0,"\t\n"+u.svgml(t,e)+"\t\n"+l.svgml(t,e)+"\t\n"+CA(this.text_abs,r,-20/t,"milieu",this.color).svg(t)+"\t\n"+CA(this.text_ord,-20/t,n,"milieu",this.color).svg(t)},this.tikzml=function(t){const e=zw(this.x/this.xscale),r=zw(this.y/this.yscale),n=Jw(e,r),s=Jw(e,0),o=Jw(0,r),a=RE(n,s,i),u=RE(o,n,i);return a.styleExtremites="->",u.styleExtremites="->",a.pointilles=!0,u.pointilles=!0,"\t\n"+a.tikzml(t)+"\t\n"+u.tikzml(t)+"\t\n"+CA(this.text_abs,e,-1/mathalea.scale,"milieu",this.color).tikz()+"\t\n"+CA(this.text_ord,-1/mathalea.scale,r,"milieu",this.color).tikz()}}function vA(t,e=-20,r=30,n="black",i=2,s=[1,1],o=.1){let a,u;Zw.call(this),this.color=n,s.constructor===cA?(a=s.xscale,u=s.yscale):(a=s[0],u=s[1]);const l=[];for(let n=zw(e/a);n<=zw(r/a);n=zw(n+o))isFinite(t(n*a))&&l.push(Jw(n,t(n*a)/u));const c=ME([...l],this.color);return c.epaisseur=i,c}function bA(t,e=-20,r=30,n="black",i=2,s=[1,1],o=.1){return new vA(t,e,r,n,i,s,o)}function xA(t,{repere:e={},color:r="black",epaisseur:n=2,step:i=!1,xMin:s=-10,xMax:o=10,yMin:a=-10,yMax:u=10,xUnite:l=1,yUnite:c=1}={}){let p,h,f,d,m,g;Zw.call(this),this.color=r,p=e.xMin,h=e.yMin,f=e.xMax,d=e.yMax,m=e.xUnite,g=e.yUnite,isNaN(p)&&(p=s),isNaN(f)&&(f=o),isNaN(h)&&(h=a),isNaN(d)&&(d=u),isNaN(m)&&(m=l),isNaN(g)&&(g=c);const y=[];let v,b=[];v=i||zw(.2/l);for(let e=p;e<=f;e+=v){if(t(e)<d+.2&&t(e)>h-.2)b.push(Jw(zw(e*m),zw(t(e)*g)));else{const t=ME([...b],this.color);t.epaisseur=n,y.push(t),b=[]}const r=ME([...b],this.color);r.epaisseur=n,y.push(r)}this.svg=function(t){let e="";for(const r of y)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of y)t+="\n\t"+e.tikz();return t},this.svgml=function(t,e){let r="";for(const n of y)void 0===n.svgml?r+="\n\t"+n.svg(t):r+="\n\t"+n.svgml(t,e);return r},this.tikzml=function(t){let e="";for(const r of y)void 0===r.tikzml?e+="\n\t"+r.tikz():e+="\n\t"+r.tikzml(t);return e}}function _A(...t){return new xA(...t)}const wA=(t,e,r)=>{const n=(1-Math.cos(r*Math.PI))/2;return t*(1-n)+e*n};function EA(t,e="black",r=2,n=[1,1],i,s){Zw.call(this);const o=[];for(let a=0;a<t.length-1;a++){const u=t[a][0],l=t[a][1],c=t[a+1][0],p=t[a+1][1];let h,f;h=i>u?i:u,f=s<c?s:c;const d=bA((t=>wA(l,p,zw((t-u)/(c-u)))),h,f,e,r,n);o.push(d),this.svg=function(t){let e="";for(const r of o)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of o)t+="\n\t"+e.tikz();return t}}}function SA(t,{color:e="black",epaisseur:r=1,repere:n={},step:i=.2}={}){Zw.call(this);const s=[];for(let o=0;o<t.length-1;o++){const a=t[o][0],u=t[o][1],l=t[o+1][0],c=t[o+1][1],p=t=>wA(u,c,zw((t-a)/(l-a)));let h,f;h=n.xMin>a?n.xMin:a,f=n.xMax<l?n.xMax:l;const d=_A(p,{step:i,xMin:h,xMax:f,color:e,epaisseur:r,xUnite:n.xUnite,yUnite:n.yUnite,yMin:n.yMin,yMax:n.yMax});s.push(d),this.svg=function(t){let e="";for(const r of s)e+="\n\t"+r.svg(t);return e},this.tikz=function(){let t="";for(const e of s)t+="\n\t"+e.tikz();return t}}}function AA(t,e="blue"){Zw.call(this),this.epaisseur=2,this.color=e,this.taille=.2,this.svg=function(e){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}let r=`<polyline points="${zw(t.xSVG(e)+20*this.taille)},${zw(t.ySVG(e)+2*this.taille*20/e*e)} ${t.xSVG(e)},${zw(t.ySVG(e)+2*this.taille*20)} ${t.xSVG(e)},${zw(t.ySVG(e)+-2*this.taille*20)} ${zw(t.xSVG(e)+20*this.taille)},${zw(t.ySVG(e)+-2*this.taille*20)}" fill="none" stroke="${this.color}" ${this.style} />`;return r+=`\n\t<text x="${t.xSVG(e)}" y="${zw(t.ySVG(e)+20*this.taille*5)}" text-anchor="middle" dominant-baseline="central" fill="${this.color}">${t.nom}</text>\n `,r},this.tikz=function(){let e=`\\draw[very thick,${this.color}] (${zw(t.x+this.taille/mathalea.scale)},${t.y+this.taille/mathalea.scale})--(${t.x},${t.y+this.taille/mathalea.scale})--(${t.x},${t.y-this.taille/mathalea.scale})--(${zw(t.x+this.taille/mathalea.scale)},${t.y-this.taille/mathalea.scale});`;return e+=`\n\t\\draw[${this.color}] (${t.x},${t.y-this.taille/mathalea.scale}) node[below] {$${t.nom}$};`,e}}function NA(t,e="blue"){Zw.call(this),this.epaisseur=2,this.color=e,this.taille=.2,this.svg=function(e){if(1!==this.epaisseur&&(this.style+=` stroke-width="${this.epaisseur}" `),this.pointilles)switch(this.pointilles){case 1:this.style+=' stroke-dasharray="6 10" ';break;case 2:this.style+=' stroke-dasharray="6 3" ';break;case 3:this.style+=' stroke-dasharray="3 2 6 2 " ';break;case 4:this.style+=' stroke-dasharray="1 2" ';break;default:this.style+=' stroke-dasharray="5 5" '}let r=`<polyline points="${zw(t.xSVG(e)-20*this.taille)},${zw(t.ySVG(e)+2*this.taille*20)} ${t.xSVG(e)},${zw(t.ySVG(e)+2*this.taille*20)} ${t.xSVG(e)},${zw(t.ySVG(e)-2*this.taille*20)} ${zw(t.xSVG(e)-20*this.taille)},${zw(t.ySVG(e)-2*this.taille*20)}" fill="none" stroke="${this.color}" ${this.style} />`;return r+=`\n\t<text x="${t.xSVG(e)}" y="${t.ySVG(e)+5*this.taille*20}" text-anchor="middle" dominant-baseline="central" fill="${this.color}">${t.nom}</text>\n `,r},this.tikz=function(){let e=`\\draw[very thick,${this.color}] (${zw(t.x-this.taille/mathalea.scale)},${t.y+this.taille/mathalea.scale})--(${t.x},${t.y+this.taille/mathalea.scale})--(${t.x},${t.y-this.taille/mathalea.scale})--(${zw(t.x-this.taille/mathalea.scale)},${t.y-this.taille/mathalea.scale});`;return e+=`\n\t\\draw[${this.color}] (${t.x},${t.y-this.taille/mathalea.scale}) node[below] {$${t.nom}$};`,e}}function MA(t,e,r="milieu",n="black",i=1,s="middle",o=!1){Zw.call(this),this.color=n,this.contour=!1,this.taille=10*i,this.opacite=1,this.svg=function(n){let i="",a="";if(o&&(a=' font-family= "KaTeX_Math" '),this.contour?a+=` style="font-size:${this.taille}px;fill:none;fill-opacity:${this.opacite};stroke:${this.color};stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:${this.opacite}" `:a+=` style="font-size:${this.taille}px;fill:${this.color};fill-opacity:${this.opacite}" `,"number"==typeof r)i=`<text ${a} x="${e.xSVG(n)}" y="${e.ySVG(n)}" text-anchor = ${s} dominant-baseline = "central" fill="${this.color}" transform="rotate(${r} ${e.xSVG(n)} ${e.ySVG(n)})" id="${this.id}" >${t}</text>\n `;else switch(r){case"milieu":i=`<text ${a} x="${e.xSVG(n)}" y="${e.ySVG(n)}" text-anchor="middle" dominant-baseline="central" fill="${this.color}" id="${this.id}" >${t}</text>\n `;break;case"gauche":i=`<text x="${e.xSVG(n)}" y="${e.ySVG(n)}" text-anchor="end" dominant-baseline="central" fill="${this.color}" id="${this.id}" >${t}</text>\n `;break;case"droite":i=`<text x="${e.xSVG(n)}" y="${e.ySVG(n)}" text-anchor="start" dominant-baseline="central" fill="${this.color}" id="${this.id}" >${t}</text>\n `}return i},this.tikz=function(){let a="";if(o&&(t="$"+t+"$"),"number"==typeof r){let i="center";"gauche"===s&&(i="west"),"droite"===s&&(i="east"),a=`\\draw [${n}] (${e.x},${e.y}) node[anchor = ${i}, rotate = ${-r}] {${t}};`}else{let s="";"gauche"===r&&(s=`node[anchor = east,scale=${i}]`),"droite"===r&&(s=`node[anchor = west,scale=${i}]`),"milieu"===r&&(s=`node[anchor = center,scale=${i}]`),a=`\\draw [${n}] (${e.x},${e.y}) ${s} {${t}};`}return a}}function kA(...t){return new MA(...t)}function CA(t,e,r,n="milieu",i,s=1,o="middle",a=!1){return new MA(t,Jw(e,r),n,i,s,o,a)}function TA(t,e,r="black",n=200,i=12,s="white"){let o,a;const u=mathalea.pixelsParCm;switch(e.positionLabel){case"above":o=e.x,a=e.y+15/u;break;case"below":o=e.x,a=e.y-15/u;break;case"left":o=e.x-15/u,a=e.y;break;case"right":o=e.x+15/u,a=e.y;break;case"above right":o=e.x+15/u,a=e.y+15/u;break;case"above left":o=e.x-15/u,a=e.y+15/u;break;case"below right":o=e.x+15/u,a=e.y-15/u;break;case"below left":o=e.x-15/u,a=e.y-15/u;break;case"center":default:o=e.x,a=e.y}return IA(t,o,a,r,n,i,s)}function OA(t,e,r,n="black",i=200,s=12,o="white"){Zw.call(this),this.x=e,this.y=r,this.size=i,this.hauteurLigne=s,this.colorBackground=o,this.color=n,this.texte=t,this.svg=function(t){const e=zw(this.size/2),r=.25*mathalea.pixelsParCm;return""!==o?`<foreignObject style=" overflow: visible; line-height: 0;" x="${Uw(this.x*t,2)-e}" y="${Uw(-this.y*t,2)-this.hauteurLigne/2-r}"  width="${this.size}" height="${this.hauteurLigne}" id="${this.id}" ><div style="margin:auto;width:${this.size}px;height:${s}px;position:fixed!important; text-align:center">\n    $\\colorbox{${this.colorBackground}}{$\\color{${n}}{${this.texte}}$}$</div></foreignObject>`:`<foreignObject style=" overflow: visible; line-height: 0;" x="${Uw(this.x*t,2)-e}" y="${Uw(-this.y*t,2)-this.hauteurLigne/2-r}"  width="${this.size}" height="${this.hauteurLigne}" id="${this.id}" ><div style="width:${this.size}px;height:${this.hauteurLigne}px;position:fixed!important; text-align:center">\n      $\\color{${this.color}}{${this.texte}}$</div></foreignObject>`},this.tikz=function(){let i;return i=""!==o?`\\draw (${e},${r}) node[anchor = center] {\\colorbox{${o}}{\\color{${n}}{${t}}}};`:`\\draw (${e},${r}) node[anchor = center] {$\\color{${n}}{${t}}$};`,i}}function IA(t,e,r,n="black",i=200,s=12,o="white"){return new OA(t,e,r,n,i,s,o)}function PA({x:t=0,y:e=0,fraction:r={num:1,den:2},couleur:n="black"}={}){Zw.call(this);const i=Math.abs(r.num),s=Math.abs(r.den),o=Bw(r.num)*Bw(r.den),a=10*Math.max(Math.floor(Math.log10(i))+1,Math.floor(Math.log10(s))+1);this.svg=function(r){const u=RE(t-a/r/2,e,t+a/r/2,e,n);u.isVisible=!1;let l=u.svg(r);-1===o&&(l+=RE(zw(t-(a+15)/r/2,0),e,zw(t-(a+5)/r/2,0),e,n).svg(r));const c=CA(Vw(i),t,zw(e+10/r),"milieu",n);l+=c.svg(r);const p=CA(Vw(s),t,zw(e-10/r),"milieu",n);return l+=p.svg(r),c.isVisible=!1,p.isVisible=!1,l=`<g id="${this.id}">${l}</g>`,l},this.tikz=function(){let r=RE(t,e,zw(t+a/30/mathalea.scale,2),e,n).tikz();return-1===o&&(r+=RE(zw(t-(a/30+.785)/mathalea.scale/2,2),e,zw(t-(a/30+.25)/mathalea.scale/2,2),e,n).tikz()),r+=CA(Vw(i),zw(t+a/60/mathalea.scale,2),zw(e+10/30/mathalea.scale,2),"milieu",n).tikz(),r+=CA(Vw(s),zw(t+a/60/mathalea.scale,2),zw(e-10/30/mathalea.scale,2),"milieu",n).tikz(),r}}function RA(t){return new PA(t)}function LA(t){if("number"==typeof t)return CA(t.toString(),0,0,"droite");CA(t,0,0,"droite")}function DA(t,e,r){return void 0===r?zw(Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)):zw(Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),r)}function qA(t){return zw(Math.sqrt(t.x**2+t.y**2))}function BA(t,e,r){const n=DA(e,t),i=DA(e,r),s=DA(t,r),o=TE(e,t),a=TE(e,r);return o.x*a.y-o.y*a.x==0?o.x*a.x>0?0:o.x*a.x<0?180:o.y*a.y>0?0:180:zw(180*Math.acos((s**2-n**2-i**2)/(-2*n*i))/Math.PI,2)}function UA(t,e,r){const n=dS(t,e,90),i=TE(e,r),s=TE(e,n);return Bw(i.x*s.x+i.y*s.y)*BA(t,e,r)}function $A(t){return t<-180?t+360:t>180?t-360:t}function zA(){Zw.call(this),this.x=0,this.y=0,this.xSVG=function(t){return this.x*t},this.ySVG=function(t){return-this.y*t},this.orientation=0,this.historiquePositions=[],this.crayonBaisse=!1,this.isVisible=!0,this.costume='<radialGradient id="Ball" cx="29.7275" cy="-13.1396" r="38.5299" gradientUnits="userSpaceOnUse">\n  <stop offset="0" style="stop-color:#FFFF99"/>\n  <stop offset="1" style="stop-color:#FF9400"/>\n</radialGradient> <circle fill="url(#Ball)"  r="22.5" stroke-width="1" ',this.listeTraces=[],this.color="black",this.epaisseur=2,this.pointilles=!1,this.opacite=1,this.style="",this.svg=function(t){let e="";for(const r of this.listeTraces){const n=Jw(r[0],r[1]),i=Jw(r[2],r[3]),s=r[4],o=r[5],a=r[6],u=r[7];let l="";1!==o&&(l+=` stroke-width="${o}" `),a&&(l+=' stroke-dasharray="4 3" '),1!==u&&(l+=` stroke-opacity="${u}" `),e+=`\n\t<line x1="${n.xSVG(t)}" y1="${n.ySVG(t)}" x2="${i.xSVG(t)}" y2="${i.ySVG(t)}" stroke="${s}" ${l}  />`}if(this.isVisible){e+=`\n<g>${this.costume} x="${this.listeTraces[0][0]*t}" y="${-this.listeTraces[0][1]*t}">\n<animateMotion path="M ${this.listeTraces[0][0]*t} ${-this.listeTraces[0][1]*t} L`;for(let r=0;r<this.listeTraces.length;r++){const n=Jw(this.listeTraces[r][2],this.listeTraces[r][3]);e+=` ${n.xSVG(t)} ${n.ySVG(t)} `}e+='" \'begin="10s" dur="10s" repeatCount="indefinite"\' />;\n    </circle>\n    </g>'}return e},this.tikz=function(){let t="";for(const e of this.listeTraces){const r=Jw(e[0],e[1]),n=Jw(e[2],e[3]),i=e[4],s=e[5],o=e[6],a=e[7];let u=[];const l=[];i.length>1&&"black"!==i&&l.push(i),1!==s&&l.push(`line width = ${s}`),1!==a&&l.push(`opacity = ${a}`),o&&l.push("dashed"),l.length>0&&(u="["+l.join(",")+"]"),t+=`\n\t\\draw${u} (${r.x},${r.y})--(${n.x},${n.y});`}return t}}function FA(t){Zw.call(this),this.x=t.x,this.y=t.y,this.svg=function(){return`<g id="${this.id}" stroke="#000000" fill="none" transform="translate(${(this.x-.2)*mathalea.pixelsParCm},${-60-(this.y-.2)*mathalea.pixelsParCm}) scale(.1) ">\n   <path id="rect2990" d="m70.064 422.35 374.27-374.26 107.58 107.58-374.26 374.27-129.56 21.97z" stroke-width="30"/>\n   <path id="path3771" d="m70.569 417.81 110.61 110.61" stroke-width="25"/>\n   <path id="path3777" d="m491.47 108.37-366.69 366.68" stroke-width="25"/>\n   <path id="path3763" d="m54.222 507.26 40.975 39.546" stroke-width="25"/>\n  </g>`}}function GA({motif:t="north east lines",id:e,distanceDesHachures:r=10,epaisseurDesHachures:n=1,couleurDesHachures:i="black",couleurDeRemplissage:s="none",opaciteDeRemplissage:o=.5}){let a="";if(sortieHtml){switch(s.length<1&&(s="none"),t){case"north east lines":a+=`<pattern id="pattern${e}" width="${r}" height="${r}"  patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">\n            <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n            <line x1="0" y1="0" x2="0" y2="${r}" style="stroke:${i}; stroke-width:${n}" />\n            </pattern>`;break;case"horizontal lines":a+=`<pattern id="pattern${e}" width="${r}" height="${r}"  patternUnits="userSpaceOnUse">\n            <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n            <line x1="0" y1="${zw(r/2)}" x2="${zw(r)}" y2="${zw(r/2)}" style="stroke:${i}; stroke-width:${n}" />\n            </pattern>`;break;case"vertical lines":a+=`<pattern id="pattern${e}" width="${r}" height="${r}"  patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n            <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n            <line x1="0" y1="0" x2="0" y2="${r}" style="stroke:${i}; stroke-width:${n}" />\n            </pattern>`;break;case"dots":a+=`<pattern id="pattern${e}" width="${r}" height="${r}"  patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n            <circle cx="3" cy="3" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            <circle cx="8" cy="3" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            <circle cx="3" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            <circle cx="8" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n            </pattern>`;break;case"crosshatch dots":a+=`<pattern id="pattern${e}" width="12" height="12" x="12" y="12" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <circle cx="2" cy="2" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="8" cy="2" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="5" cy="5" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="2" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="8" cy="8" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="5" cy="11" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="11" cy="5" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          <circle cx="11" cy="11" r="1.5" fill="${s}" fill-opacity="${o}"/>\n          </pattern>`;break;case"fivepointed stars":a+=`<pattern id="pattern${e}" width="12" height="12" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polygon points="10,5 6.2,4.2 6.6,0.2 4.6,3.6 1,2 3.6,5 1,8 4.6,6.4 6.6,9.8 6.2,5.8 " stroke="${i}"  fill="${s}" fill-opacity="${o}" />\n          </pattern>`;break;case"sixpointed stars":a+=`<pattern id="pattern${e}"  width="12" height="12" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n        <polygon points="10,5 7.6,3.4 7.6,0.6 5,2 2.6,0.6 2.4,3.4 0,5 2.4,6.4 2.6,9.4 5,8 7.6,9.4 7.6,6.4 " stroke="${i}" fill="${s}" fill-opacity="${o}" />\n        </pattern>`;break;case"crosshatch":a+=`<pattern id="pattern${e}" width="12" height="12" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polygon points="2,2 7.6,7.6 7,8.4 9.8,8.4 9.8,5.6 9,6.2 3.4,0.6 " stroke="${i}"  fill="${s}" fill-opacity="${o}" />\n          </pattern>`;break;case"bricks":a+=`<pattern id="pattern${e}" width="18" height="16" x="18" y="16" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <line x1="4" y1="2" x2="4" y2="4" stroke="${i}" fill="${s}" fill-opacity="${o}"  />\n          <line x1="0" y1="4" x2="16" y2="4" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          <line x1="14" y1="4" x2="14" y2="12" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          <line x1="16" y1="12" x2="0" y2="12" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          <line x1="4" y1="12" x2="4" y2="16" stroke="${i}" fill="${s}" fill-opacity="${o}"   />\n          </pattern>`;break;case"grid":a+=`<pattern id="pattern${e}" width="10" height="10" x="10" y="10" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polyline points="8,8 0,8 0,0 " fill="none" stroke="${i}" />\n          </pattern>`;break;case"checkerboard":a+=`<pattern id="pattern${e}" width="8" height="8" x="8" y="8" patternTransform="rotate(0 0 0)" patternUnits="userSpaceOnUse">\n          <polygon points="4,4 8,4 8,0 4,0 "  fill="${s}" fill-opacity="${o}" />\n          <polygon points="0,4 4,4 4,8 0,8 "  fill="${s}" fill-opacity="${o}" />\n        \n          </pattern>`;break;default:a+=`<pattern id="pattern${e}" width="${r}" height="${r}"  patternTransform="rotate(45 0 0)" patternUnits="userSpaceOnUse">\n        <rect x="0" y="0" width="${r}" height="${r}" fill="${s}" fill-opacity="${o}"/>\n        <line x1="0" y1="0" x2="0" y2="${r}" style="stroke:${i}; stroke-width:${n}" />\n        </pattern>`}return a}if(mathalea.sortieNB)switch(t){case"north east lines":case"horizontal lines":case"vertical lines":case"dots":case"crosshatch dots":case"fivepointed stars":case"sixpointed stars":case"crosshatch":case"bricks":case"grid":case"checkerboard":a=`pattern = ${t}`;break;default:a="pattern = north east lines"}else switch(t){case"north east lines":case"horizontal lines":case"vertical lines":case"dots":case"crosshatch dots":case"fivepointed stars":case"sixpointed stars":case"crosshatch":case"bricks":case"grid":case"checkerboard":a=`pattern color = ${i} , pattern = ${t}`;break;default:a=`pattern color = ${i} , pattern = north east lines`}return`${a}`}function VA(){this.murs2d=[],this.chemin2d=[],this.nombres2d=[],this.chemin=[],this.niveau=3,this.nombres=[[]];const t="brown",e=[[[1,0],[2,0],[3,0],[4,0],[5,0],[5,1],[6,1]],[[1,0],[2,0],[3,0],[4,0],[4,1],[5,1],[6,1]],[[1,0],[2,0],[2,1],[3,1],[4,1],[5,1],[6,1]],[[1,0],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1]],[[1,0],[2,0],[3,0],[4,0],[5,0],[5,1],[5,2],[6,2]],[[1,0],[2,0],[3,0],[4,0],[4,1],[5,1],[5,2],[6,2]],[[1,0],[2,0],[3,0],[4,0],[4,1],[4,2],[5,2],[6,2]],[[1,0],[2,0],[3,0],[3,1],[4,1],[5,1],[5,2],[6,2]],[[1,0],[2,0],[3,0],[3,1],[3,2],[4,2],[5,2],[6,2]],[[1,0],[2,0],[2,1],[3,1],[4,1],[4,2],[5,2],[6,2]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[5,2],[6,2]],[[1,0],[1,1],[2,1],[3,1],[4,1],[4,0],[5,0],[6,0]],[[1,0],[1,1],[2,1],[3,1],[4,1],[5,1],[5,2],[6,2]],[[1,0],[1,1],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[5,2],[5,1],[6,1]],[[1,0],[2,0],[3,0],[3,1],[3,2],[4,2],[5,2],[5,1],[6,1]],[[1,0],[1,1],[1,2],[2,2],[3,2],[3,1],[4,1],[5,1],[6,1]],[[1,0],[1,1],[1,2],[2,2],[3,2],[4,2],[4,1],[5,1],[6,1]],[[1,0],[2,0],[3,0],[3,1],[3,2],[4,2],[5,2],[5,1],[5,0],[6,0]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[4,1],[4,0],[5,0],[6,0]],[[1,0],[1,1],[2,1],[2,2],[3,2],[4,2],[5,2],[5,1],[5,0],[6,0]],[[1,0],[1,1],[1,2],[2,2],[3,2],[4,2],[4,1],[4,0],[5,0],[6,0]],[[1,0],[1,1],[1,2],[2,2],[3,2],[3,1],[3,0],[4,0],[5,0],[5,1],[5,2],[6,2]],[[1,0],[1,1],[1,2],[2,2],[3,2],[3,1],[3,0],[4,0],[5,0],[5,1],[5,2],[6,2]]];let r;for(let t=0;t<24;t++){r=[];for(let n=0;n<e[t].length;n++)r.push([e[t][n][0],2-e[t][n][1]]);e.push(r)}this.choisitChemin=function(t){const r=function(t,e=[]){const r=t.slice();for(let t=0;t<e.length;t++)Dw(r,e[t]);return r[Math.floor(Math.random()*r.length)]}([0,24]);let n;switch(t){case 1:n=Lw(0,3)+r;break;case 2:n=Lw(4,13)+r;break;case 3:n=Lw(14,17)+r;break;case 4:n=Lw(18,21)+r;break;case 5:n=Lw(22,23)+r;break;case 6:n=Lw(0,23)+r}return e[n]},this.construitMurs=function(t){let e;const r=[];let n,i,s,o,a;e=0===t[0][1]?0:2;for(let t=0;t<6;t++)0===e?(n=RE(Jw(3*t,1),Jw(3*t,2)),n.epaisseur=2,r.push(n),t>0&&(i=RE(Jw(3*t,10),Jw(3*t,9)),i.epaisseur=2,r.push(i))):(n=RE(Jw(3*t,10),Jw(3*t,9)),n.epaisseur=2,r.push(n),t>0&&(i=RE(Jw(3*t,1),Jw(3*t,2)),i.epaisseur=2,r.push(i)));0===e?(n=RE(Jw(0,10),Jw(0,3)),n.epaisseur=3,r.push(n),n=RE(Jw(-3,1),Jw(0,1),"green"),n.epaisseur=3,r.push(n),n=RE(Jw(-3,1),Jw(-3,4),"green"),n.epaisseur=3,r.push(n),n=RE(Jw(-3,4),Jw(0,4),"green"),n.epaisseur=3,r.push(n),r.push(kA("Départ",Jw(-1.5,2.5),"milieu","blue",1.5,0,!1))):(n=RE(Jw(0,1),Jw(0,8)),n.epaisseur=3,r.push(n),n=RE(Jw(-3,10),Jw(0,10),"green"),n.epaisseur=3,r.push(n),n=RE(Jw(-3,7),Jw(-3,10),"green"),n.epaisseur=3,r.push(n),n=RE(Jw(-3,7),Jw(0,7),"green"),n.epaisseur=3,r.push(n),r.push(kA("Départ",Jw(-1.5,8.5),"milieu","blue",1.5,0,!1)));for(let t=1;t<6;t++)n=RE(Jw(3*t,8),Jw(3*t,6),"black"),n.epaisseur=2,i=RE(Jw(3*t-.5,7),Jw(3*t+.5,7),"black"),i.epaisseur=2,s=RE(Jw(3*t,5),Jw(3*t,3),"black"),s.epaisseur=2,o=RE(Jw(3*t-.5,4),Jw(3*t+.5,4),"black"),o.epaisseur=2,r.push(i,s,o,n);n=RE(Jw(18,9),Jw(18,10)),n.epaisseur=3,r.push(n),n=RE(Jw(0,10),Jw(18,10)),n.epaisseur=3,r.push(n),n=RE(Jw(18,9),Jw(18,10)),n.epaisseur=3,r.push(n),n=RE(Jw(18,1),Jw(18,2)),n.epaisseur=3,r.push(n),n=RE(Jw(0,1),Jw(18,1)),n.epaisseur=3,r.push(n);for(let t=0;t<2;t++)n=RE(Jw(18,6-3*t),Jw(20,6-3*t)),n.epaisseur=3,i=RE(Jw(18,7-3*t),Jw(17,7-3*t)),i.epaisseur=3,s=RE(Jw(18,8-3*t),Jw(20,8-3*t)),s.epaisseur=3,o=RE(Jw(18,8-3*t),Jw(18,6-3*t)),o.epaisseur=3,a=RE(Jw(0,7-3*t),Jw(1,7-3*t)),a.epaisseur=3,r.push(n,i,s,o,a);for(let t=1;t<=3;t++)r.push(kA(`Sortie ${t}`,Jw(19.5,11.5-3*t),"milieu","blue",1.5,0,!1));return n=RE(Jw(18,9),Jw(20,9)),n.epaisseur=3,i=RE(Jw(18,2),Jw(20,2)),i.epaisseur=3,r.push(n,i),r},this.traceChemin=function(e){let r=e[0][1],n=0;const i=[];let s;for(let o=0;o<e.length;o++)s=RE(Jw(3*n-1.5,3*r+2.5),Jw(3*e[o][0]-1.5,3*e[o][1]+2.5),t),s.pointilles=!0,s.stylePointilles=2,s.epaisseur=5,s.opacite=.3,i.push(s),n=e[o][0],r=e[o][1];return s=RE(Jw(3*n-1.5,3*r+2.5),Jw(3*n+1.5,3*r+2.5),t),s.pointilles=!0,s.stylePointilles=2,s.epaisseur=5,s.opacite=.3,i.push(s),i},this.placeNombres=function(t,e){const r=[];for(let n=1;n<7;n++)for(let i=0;i<3;i++)"number"==typeof t[n-1][i]?r.push(kA(Vw(t[n-1][i]),Jw(3*n-1.5,2.5+3*i),"milieu","black",e,0,!0)):"string"==typeof t[n-1][i]?r.push(CA(t[n-1][i],3*n-1.5,2.5+3*i,"milieu","black",e,0,!0)):r.push(RA({x:3*n-1.5,y:2.5+3*i,fraction:t[n-1][i]}));return r}}function jA(){this.type=1,this.polygones=[],this.barycentres=[],this.tracesCentres=[],this.numeros=[],this.coordonnees=[],this.Nx=1,this.Ny=1,this.echelle=20,this.fenetre={},this.construit=function(t=1,e=1,r=1,n=3){let i,s,o,a,u,l,c,p,h,f,d,m,g,y,v,b,x,_,w=0,E=0,S=0,A=0;switch(i=Jw(0,0),s=Jw(n,0),t){case 1:o=TE(i,s),a=dS(o,i,-90),a=gS(a,i,1.73205);for(let t=0;t<r;t++){for(let t=0;t<e;t++){c=UE(i,s,3),p=dS(c,i,60),h=dS(c,i,-60),f=dS(c,i,-120),this.polygones.push(c,p,h,f);for(const t of c.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of p.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of h.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of f.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);i=hS(i,o),s=hS(s,o)}i=hS(i,TE(-e*o.x,-2*o.y)),s=hS(s,TE(-e*o.x,-2*o.y)),i=hS(i,a),s=hS(s,a)}break;case 2:o=TE(i,s),o=gS(o,i,2),a=dS(o,i,-90);for(let t=0;t<r;t++){for(let t=0;t<e;t++){c=UE(i,s,4),p=dS(c,i,90),h=dS(c,i,-90),f=dS(c,i,-180),this.polygones.push(c,p,h,f);for(const t of c.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of p.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of h.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of f.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);i=hS(i,o),s=hS(s,o)}i=hS(i,TE(-e*o.x,-2*o.y)),s=hS(s,TE(-e*o.x,-2*o.y)),i=hS(i,a),s=hS(s,a)}break;case 3:s=gS(s,i,.8),o=TE(i,s),o=gS(o,i,2),a=dS(o,i,-90),a=gS(a,i,1.73205);for(let t=0;t<r;t++){for(let t=0;t<e;t++){u=xS(s,i,30,1.1547),c=UE(i,u,6),p=dS(c,i,-120),h=hS(c,o),f=hS(p,o),this.polygones.push(c,p,h,f);for(const t of c.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of p.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of h.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of f.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);i=hS(i,TE(2*o.x,0)),s=hS(s,TE(2*o.x,0))}i=hS(i,TE(2*-e*o.x,a.y)),s=hS(s,TE(2*-e*o.x,a.y))}break;case 4:o=TE(i,s),o=gS(o,i,2.73205),a=dS(o,i,-90);for(let t=0;t<r;t++){for(let t=0;t<e;t++){u=dS(s,i,60),c=UE(i,s,3),p=dS(c,i,150),m=dS(c,s,-150),g=dS(c,s,60),v=dS(p,u,150),b=dS(v,i,-60),x=dS(p,s,60),_=dS(m,i,-60),h=UE(i,u,4),f=$E(s,u,4),d=dS(f,s,-150),y=dS(h,i,150),this.polygones.push(c,p,h,f,d,m,g,y,v,b,x,_);for(const t of c.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of p.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of x.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of _.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of h.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of f.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of d.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of m.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of g.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of y.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of v.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of b.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);i=hS(i,TE(o.x,0)),s=hS(s,TE(o.x,0))}i=hS(i,TE(-e*o.x,a.y)),s=hS(s,TE(-e*o.x,a.y))}break;case 5:o=TE(i,s),o=gS(o,i,2.4142),a=dS(o,i,-90);for(let t=0;t<r;t++){for(let t=0;t<e;t++){u=dS(i,s,-135),c=UE(i,s,8),p=$E(i,s,8),h=hS(c,o),f=hS(p,o),d=$E(s,u,4),m=hS(d,o),g=hS(d,a),y=hS(m,a),this.polygones.push(c,p,h,f,d,m,g,y);for(const t of c.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of p.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of h.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of f.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of d.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of m.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of g.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of y.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);i=hS(i,TE(2*o.x,0)),s=hS(s,TE(2*o.x,0))}i=hS(i,TE(2*-e*o.x,2*a.y)),s=hS(s,TE(2*-e*o.x,2*a.y))}break;case 6:o=TE(i,s),a=dS(o,i,60),o=TE(o.x+a.x,o.y+a.y),a=dS(o,i,-60);for(let t=0;t<r;t++){for(let t=0;t<e;t++){u=dS(i,s,120),l=dS(s,u,60),c=qE(i,s,u,l),p=dS(c,u,-60),h=dS(c,i,60),f=hS(p,o),d=hS(c,o),m=hS(h,o),g=hS(c,a),y=hS(p,a),v=hS(h,a),this.polygones.push(c,p,h,f,d,m,g,y,v);for(const t of c.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of p.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of h.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of f.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of d.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of m.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of g.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of y.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of v.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);i=hS(i,TE(a.x+o.x,a.y+o.y)),s=hS(s,TE(a.x+o.x,a.y+o.y))}i=hS(i,TE(-e*(a.x+o.x)+2*a.x-o.x,2*a.y-o.y)),s=hS(s,TE(-e*(a.x+o.x)+2*a.x-o.x,2*a.y-o.y))}break;case 7:o=TE(i,s),o=gS(o,i,2),a=dS(o,i,-60);for(let t=0;t<r;t++){for(let t=0;t<e;t++){u=dS(i,s,-120),l=dS(s,u,-120),c=UE(i,s,6),p=UE(u,s,3),h=dS(p,u,180),f=hS(h,a),d=hS(p,a),m=dS(c,s,180),this.polygones.push(c,p,h,m,d,f);for(const t of c.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of p.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of h.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of f.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of d.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);for(const t of m.listePoints)w=Math.min(w,t.x),S=Math.max(S,t.x),E=Math.min(E,t.y),A=Math.max(A,t.y);i=hS(i,o),s=hS(s,o)}i=hS(i,TE(-e*o.x+2*a.x-o.x,2*a.y-o.y)),s=hS(s,TE(-e*o.x+2*a.x-o.x,2*a.y-o.y))}}this.echelle=Uw(80/Math.sqrt(S-w),0),this.fenetre={xmin:w-.5,ymin:E-.5,xmax:S+.5,ymax:A+.5,pixelsParCm:this.echelle,scale:Uw(this.echelle/30,2)},function(t){let e,r;for(let n=0;n<t.length;n++){e=pE(t[n]);for(let i=n+1;i<t.length;)r=pE(t[i]),Rw(e.x,r.x,.1)&&Rw(e.y,r.y,.1)?t.splice(i,1):i++}}(this.polygones),this.nb_polygones=this.polygones.length;for(let t=0;t<this.nb_polygones;t++)this.barycentres.push(pE(this.polygones[t])),this.tracesCentres.push(tE(this.barycentres[t])),this.tracesCentres[t].opacite=.5,this.tracesCentres[t].color="blue",this.tracesCentres[t].taille=2,this.coordonnees.push([Uw(this.barycentres[t].x,2),Uw(this.barycentres[t].y,2)]),this.numeros.push(CA(Vw(t+1),this.barycentres[t].x+.5,this.barycentres[t].y,"milieu","black",50/this.echelle,0,!0))}}function HA(){this.idIEP=0,this.idHTML=0,this.tempo=5,this.vitesse=10,this.couleur="blue",this.couleurCompas="forestgreen",this.couleurTexte="black",this.couleurPoint="black",this.couleurCodage="#f15929",this.couleurTraitsDeConstruction="gray",this.epaisseur=2,this.epaisseurTraitsDeConstruction=1,this.pointilles=!1,this.liste_script=[],this.translationX=0,this.translationY=10,this.recadre=function(t,e){this.translationX=1-t,this.translationY=e+3},this.xMin=0,this.yMin=0,this.xMax=0,this.yMax=0,this.taille=function(t,e){this.liste_script.push(`<viewBox width="${t}" height="${e}" />`)},this.x=function(t){const e=zw(30*(t.x+this.translationX),0);return t.x>this.xMax&&(this.xMax=t.x),t.x<this.xMin&&(this.xMin=t.x),e},this.y=function(t){const e=zw(30*(-t.y+this.translationY),0);return t.y<this.yMin&&(this.yMin=t.y),t.y>this.yMax&&(this.yMax=t.y),e},this.regle={visibilite:!1,position:Jw(0,0),angle:0,longueur:15,zoom:100},this.crayon={visibilite:!1,position:Jw(0,0),angle:0,zoom:100},this.equerre={visibilite:!1,position:Jw(0,0),angle:0,zoom:100},this.requerre={visibilite:!1,position:Jw(0,0),angle:0,zoom:100},this.rapporteur={visibilite:!1,position:Jw(0,0),angle:0,zoom:100},this.compas={visibilite:!1,position:Jw(0,0),angle:0,orientation:"droite",ecartement:0,leve:!1,zoom:100},this.xml="",this.script=function(){if(this.xml.length>1)return this.xml;{let t='<?xml version="1.0" encoding="UTF-8"?>\n';return t+='<INSTRUMENPOCHE version="2">\n',t+=this.liste_script.join("\n"),t+="\n</INSTRUMENPOCHE>",t}},this.html=function(t,e){if(window.sortieHtml){const r=`IEP_${t}_${e}`;window.listeScriptsIep[r]=this.script();const n=`<div id="IEPContainer${r}" ></div>`;return window.listeAnimationsIepACharger.push(r),n}},this.htmlBouton=function(t,e=""){if(window.sortieHtml){const r=`IEP_${t}_${e}`;window.listeScriptsIep[r]=this.script();const n=`<br><button class="ui mini compact button" id="btnAnimation${r}" onclick="toggleVisibilityIEP('${r}')" style="margin-top:20px"><i class="large play circle outline icon"></i>Voir animation</button>\n            <div id="IEPContainer${r}" style="display: none;" ></div>`;return window.toggleVisibilityIEP||(window.toggleVisibilityIEP=function(t){const e=document.getElementById(`IEPContainer${t}`),r=document.getElementById(`btnAnimation${t}`),n=window.listeScriptsIep[t];"none"===e.style.display?(e.style.display="block",e.style.marginTop="30px",r.innerHTML='<i class="large stop circle outline icon"></i>Masquer animation',or(e,n,{zoom:!0,autostart:!0}).then((t=>{})).catch((t=>{console.log(t)}))):(e.style.display="none",r.innerHTML='<i class="large play circle outline icon"></i>Voir animation')}),n}return""},this.montrer=function(t,e,{tempo:r=this.tempo,vitesse:n=this.vitesse}={}){if(!this[t].visibilite||this[t].position!==e){let i,s="";i=void 0===e?this[t].position:e,this[t].visibilite?this.deplacer(t,i,{tempo:r,vitesse:n}):(s=`<action objet="${t}" mouvement="montrer" abscisse="${this.x(i)}" ordonnee="${this.y(i)}" tempo="${r}" />`,this[t].visibilite=!0),this[t].position=i,this.liste_script.push(s)}},this.regleMontrer=function(t,e){this.montrer("regle",t,e)},this.crayonMontrer=function(t,e){this.montrer("crayon",t,e)},this.equerreMontrer=function(t,e){this.montrer("equerre",t,e)},this.requerreMontrer=function(t,e){this.montrer("requerre",t,e)},this.compasMontrer=function(t,e){this.montrer("compas",t,e)},this.rapporteurMontrer=function(t,e){this.montrer("rapporteur",t,e)},this.masquer=function(t,{tempo:e=this.tempo}={}){if(this[t].visibilite){const r=`<action objet="${t}" mouvement="masquer" tempo="${e}" />`;this[t].visibilite=!1,this.liste_script.push(r)}},this.regleMasquer=function(t){this.masquer("regle",t)},this.crayonMasquer=function(t){this.masquer("crayon",t)},this.equerreMasquer=function(t){this.masquer("equerre",t)},this.requerreMasquer=function(t){this.masquer("requerre",t)},this.compasMasquer=function(t){this.masquer("compas",t)},this.rapporteurMasquer=function(t){this.masquer("rapporteur",t)},this.deplacer=function(t,e,{tempo:r=this.tempo,vitesse:n=this.vitesse}={}){if(this[t].position!==e){const i=`<action objet="${t}" mouvement="translation" abscisse="${this.x(e)}" ordonnee="${this.y(e)}" tempo="${r}" vitesse="${n}" />`;this[t].position=e,this.liste_script.push(i)}},this.regleDeplacer=function(t,e){this.deplacer("regle",t,e)},this.texteDeplacer=function(t,e,{tempo:r=this.tempo,vitesse:n=this.vitesse}={}){const i=`<action objet="texte" id="${t}" mouvement="translation" abscisse="${this.x(e)}" ordonnee="${this.y(e)}" tempo="${r}" vitesse="${n}" />`;this.liste_script.push(i)},this.crayonDeplacer=function(t,e){this.deplacer("crayon",t,e)},this.equerreDeplacer=function(t,e){this.deplacer("equerre",t,e)},this.requerreDeplacer=function(t,e){this.deplacer("requerre",t,e)},this.compasDeplacer=function(t,e){this.deplacer("compas",t,e)},this.rapporteurDeplacer=function(t,e){this.deplacer("rapporteur",t,e)},this.rotation=function(t,e,{tempo:r=this.tempo,sens:n=zw(this.vitesse/2,0)}={}){let i;if(i="point"===e.typeObjet?fE(this[t].position,e).angleAvecHorizontale:e,this[t].angle!==e){const e=`<action objet="${t}" mouvement="rotation" angle="${-1*i}" tempo="${r}" sens="${n}" />`;this[t].angle=i,"number"==typeof i&&isFinite(i)?this.liste_script.push(e):console.log("Angle de rotation non défini pour l'objet .",t)}},this.regleRotation=function(t,e){this.rotation("regle",t,e)},this.crayonRotation=function(t,e){this.rotation("crayon",t,e)},this.equerreRotation=function(t,e){this.rotation("equerre",t,e)},this.requerreRotation=function(t,e){this.rotation("requerre",t,e)},this.compasRotation=function(t,e){this.rotation("compas",t,e)},this.rapporteurRotation=function(t,e){this.rotation("rapporteur",t,e)},this.regleZoom=function(t,{tempo:e=0}={}){this.regle.zoom=t,this.liste_script.push(`<action echelle="${t}" mouvement="zoom" objet="regle" tempo="${e}" />`)},this.equerreZoom=function(t,{tempo:e=0}={}){this.equerre.zoom=t,this.liste_script.push(`<action echelle="${t}" mouvement="zoom" objet="equerre" tempo="${e}" />`)},this.requerreZoom=function(t,{tempo:e=0}={}){this.requerre.zoom=t,this.liste_script.push(`<action echelle="${t}" mouvement="zoom" objet="requerre" tempo="${e}" />`)},this.rapporteurZoom=function(t,{tempo:e=0}={}){this.rapporteur.zoom=t,this.liste_script.push(`<action echelle="${t}" mouvement="zoom" objet="rapporteur" tempo="${e}" />`)},this.compasZoom=function(t,{tempo:e=0}={}){this.compas.zoom=t,this.liste_script.push(`<action echelle="${t}" mouvement="zoom" objet="compas" />`)},this.pointCreer=function(t,{dx:e=.1,dy:r,label:n=t.nom,tempo:i=this.tempo,couleur:s=this.couleurPoint,couleurLabel:o=this.couleurTexte,id:a}={}){let u;if(void 0!==a?t.id=a:(this.idIEP++,t.id=this.idIEP),n){u=`<action abscisse="${this.x(t)}" ordonnee="${this.y(t)}" couleur="${s}" id="${t.id}" mouvement="creer" objet="point" />`;const i=Jw(t.x,t.y);void 0!==e&&(i.x+=e),void 0!==r&&(i.y+=r),this.textePoint(`$${n}$`,i,{tempo:0,couleur:o})}else u=`<action abscisse="${this.x(t)}" ordonnee="${this.y(t)}" couleur="${s}" id="${t.id}" mouvement="creer" objet="point" tempo="${i}" />`;this.liste_script.push(u)},this.pointsCreer=function(...t){if("point"===t[t.length-1].typeObjet)for(const e of t)this.pointCreer(e,{tempo:0});else{const e=t[t.length-1],r=t=>t.slice(0,-1);for(const n of r(t))this.pointCreer(n,e)}},this.pointMasquer=function(t,{tempo:e=0}={}){this.liste_script.push(`<action id="${t.id}" mouvement="masquer" objet="point" tempo="${e}" />`)},this.pointMontrer=function(t,{tempo:e=this.tempo}={}){this.liste_script.push(`<action id="${t.id}" mouvement="montrer" objet="point" tempo="${e}" />`)},this.pointDeplacer=function(t,e,r,{tempo:n=this.tempo,vitesse:i=this.vitesse}={}){const s=Jw(e,r);this.liste_script.push(`<action abscisse="${this.x(s)}" ordonnee="${this.y(s)}" id="${t.id}" mouvement="translation" objet="point" tempo="${n}" vitesse="${i}" />`)},this.pointNommer=function(t,e,{dx:r,dy:n,couleur:i=this.couleurPoint,tempo:s=this.tempo}={}){const o=Jw(t.x,t.y);void 0!==r&&(o.x+=r),void 0!==n&&(o.y+=n),this.textePoint(`$${e}$`,o,{tempo:s,couleur:i})},this.compasRetourner=function({tempo:t=this.tempo}={}){const e=`<action mouvement="retourner" objet="compas" tempo="${t}" />`;"droite"===this.compas.orientation?this.compas.orientation="gauche":this.compas.orientation="droite",this.liste_script.push(e)},this.compasEcarter=function(t,{tempo:e=this.tempo,vitesse:r=this.vitesse}={}){const n=`<action ecart="${zw(30*t,1)}" mouvement="ecarter" objet="compas" tempo="${e}" vitesse="${r}" />`;this.compas.ecartement=t,this.liste_script.push(n)},this.compasEcarterAvecRegle=function(t,{tempo:e=this.tempo,vitesse:r=this.vitesse,sens:n=this.vitesse/2}={}){this.regleRotation(0,{tempo:0,sens:n}),this.regleMontrer(this.compas.position,{tempo:0}),this.regleDeplacer(this.compas.position,{tempo:0,vitesse:r}),this.compasMontrer(),this.compasRotation(0,{tempo:0,sens:n}),this.compasEcarter(t,{tempo:e,vitesse:r,sens:n})},this.compasEcarter2Points=function(t,e,{tempo:r=this.tempo,vitesse:n=this.vitesse,sens:i=zw(this.vitesse/2)}={}){this.compasMontrer(t),this.compasDeplacer(t,{tempo:r,vitesse:n});const s=RE(t,e);s.isVisible=!1;const o=s.angleAvecHorizontale;this.compasRotation(o,{tempo:r,sens:i}),this.compasEcarter(DA(t,e),{tempo:r,vitesse:n})},this.compasLever=function({tempo:t=this.tempo}={}){if(!this.compas.leve){const e=`<action mouvement="lever" objet="compas" tempo="${t} />`;this.compas.leve=!0,this.liste_script.push(e)}},this.compasCoucher=function({tempo:t=this.tempo}={}){if(this.compas.leve){const e=`<action mouvement="coucher" objet="compas" tempo="${t}" />`;this.compas.leve=!1,this.liste_script.push(e)}},this.compasTracerArc2Angles=function(t,e,{tempo:r=this.tempo,sens:n=zw(this.vitesse/2,0),epaisseur:i=this.epaisseur,couleur:s=this.couleurCompas,pointilles:o=this.pointilles}={}){const a=o?'pointille="tiret"':"";this.idIEP+=1,Math.abs(this.compas.angle-t)>Math.abs(this.compas.angle-e)&&([t,e]=[e,t]);let u,l=`<action sens="${n}" angle="${-t}" mouvement="rotation" objet="compas" tempo="${r}" />\n`;return l+='<action mouvement="lever" objet="compas" />\n',l+=`<action sens="${n}" angle="${-t}" mouvement="rotation" objet="compas" />\n`,u=e>t?n:-1*n,l+=`<action couleur="${s}" epaisseur="${i}" sens="${u}" debut="${-t}" fin="${-e}" mouvement="tracer" objet="compas"  ${a} id="${this.idIEP}" />\n`,l+=`<action mouvement="coucher" objet="compas" tempo="${r}"/>`,this.compas.angle=e,this.liste_script.push(l),this.idIEP},this.compasTracerArcCentrePoint=function(t,e,{delta:r=10,tempo:n=this.tempo,vitesse:i=this.vitesse,sens:s=zw(this.vitesse/2,0),epaisseur:o=this.epaisseur,couleur:a=this.couleurCompas,pointilles:u=this.pointilles}={}){this.compasMontrer(),this.compasDeplacer(t,{tempo:n,vitesse:i});const l=RE(t,e);l.visibility=!1;const c=l.angleAvecHorizontale-r,p=l.angleAvecHorizontale+r;return Math.abs(this.compas.ecartement-DA(this.compas.position,e))>.1&&this.compasEcarter(DA(t,e),{tempo:n,vitesse:i}),this.compasTracerArc2Angles(c,p,{tempo:n,vitesse:i,epaisseur:o,sens:s,couleur:a,pointilles:u})},this.compasCercleCentrePoint=function(t,e,{tempo:r=this.tempo,couleur:n=this.couleur,vitesse:i=this.vitesse,sens:s=zw(this.vitesse/2),epaisseur:o=this.epaisseur,pointilles:a=this.pointilles}={}){this.compasEcarter2Points(t,e,{vitesse:i,tempo:r});const u=fE(t,e).angleAvecHorizontale;this.compasTracerArc2Angles(u,u+360,{tempo:r,vitesse:i,sens:s,epaisseur:o,couleur:n,pointilles:a})},this.requerreGlisserEquerre=function(t,{tempo:e=this.tempo,vitesse:r=this.vitesse}={}){this.liste_script.push(`<action abscisse="${30*t}" mouvement="glisser" objet="requerre" tempo="${e}" vitesse="${r}" />`)},this.rapporteurMasquerGraduationsExterieures=function({tempo:t=this.tempo}={}){this.liste_script.push(`<action mouvement="masquer_nombres" objet="rapporteur" tempo="${t}"/>`)},this.rapporteurMontrerGraduationsExterieures=function({tempo:t=this.tempo}={}){this.liste_script.push(`<action mouvement="montrer_nombres" objet="rapporteur" tempo="${t}"/>`)},this.rapporteurMasquerGraduationsInterieures=function({tempo:t=this.tempo}={}){this.liste_script.push(`<action mouvement="vide" objet="rapporteur" tempo="${t}"/>`)},this.rapporteurMontrerGraduationsInterieures=function({tempo:t=this.tempo}={}){this.liste_script.push(`<action mouvement="graduations" objet="rapporteur" tempo="${t}"/>`)},this.rapporteurDeplacerRotation2Points=function(t,e,{tempo:r=this.tempo,vitesse:n=this.vitesse,sens:i=zw(this.vitesse/2)}={}){const s=fE(t,e);s.isVisible=!1,this.rapporteurMontrer(),this.rapporteurDeplacer(t,{tempo:r,vitesse:n}),this.rapporteurRotation(s.angleAvecHorizontale,{tempo:r,vitesse:n,sens:i})},this.rapporteurCrayonMarqueAngle=function(t,{tempo:e=this.tempo,vitesse:r=this.vitesse,couleur:n=this.couleurTraitsDeConstruction,epaisseur:i=this.epaisseurTraitsDeConstruction}={}){const s=this.rapporteur.position,o=uE(s,5.2,t+this.rapporteur.angle),a=uE(s,5.5,t+this.rapporteur.angle);this.crayonMontrer(),this.crayonDeplacer(o,{tempo:e,vitesse:r}),this.tracer(a,{tempo:e,vitesse:r,couleur:n,epaisseur:i})},this.rapporteurTracerDemiDroiteAngle=function(t,e,r,{longueur:n=.9*this.regle.longueur,couleur:i=this.couleur,tempo:s=this.tempo,vitesse:o=this.vitesse,sens:a=zw(this.vitesse/2),epaisseur:u=this.epaisseur,pointilles:l=this.pointilles}={}){if(r>0)this.rapporteurDeplacerRotation2Points(t,e,{tempo:s,vitesse:o,sens:a}),this.rapporteurCrayonMarqueAngle(r,{tempo:s,vitesse:o,sens:a});else{const n=dS(e,t,180);this.rapporteurDeplacerRotation2Points(t,n,{tempo:s,vitesse:o,sens:a}),this.rapporteurCrayonMarqueAngle(180-Math.abs(r),{tempo:s,vitesse:o,sens:a})}const c=fE(t,e);c.isVisible=!1;const p=uE(t,zw(5.2*this.rapporteur.zoom/100,1),c.angleAvecHorizontale+r);this.rapporteurMasquer({tempo:s}),this.regleDemiDroiteOriginePoint(t,p,{longueur:n,couleur:i,tempo:s,vitesse:o,sens:a,epaisseur:u,pointilles:l})},this.regleMasquerGraduations=function({tempo:t=this.tempo}={}){this.liste_script.push(`<action mouvement="vide" objet="regle" tempo="${t}"/>`)},this.regleMontrerGraduations=function({tempo:t=this.tempo}={}){this.liste_script.push(`<action mouvement="graduations" objet="regle" tempo="${t}"/>`)},this.regleModifierLongueur=function(t=20,{tempo:e=this.tempo}={}){this.regle.longueur=t,this.liste_script.push(`<action mouvement="modifier_longueur" objet="regle" longueur="${t}" tempo="${e}"/>`)},this.regleDemiDroiteOriginePoint=function(t,e,r={}){r.longueur||(r.longueur=this.regle.longueur);const n=iE(t,e,r.longueur);this.regleSegment(t,n,r)},this.regleDroite=function(t,e,r={}){r.longueur||(r.longueur=this.regle.longueur);const n=gS(e,t,zw((.5*-r.longueur+.5*DA(t,e))/DA(t,e))),i=gS(t,e,zw((.5*-r.longueur+.5*DA(t,e))/DA(t,e)));this.x(t)<=this.x(e)?(this.regleMontrer(n),this.regleRotation(i,r),this.regleSegment(n,i,r)):(this.regleMontrer(i),this.regleRotation(n,r),this.regleSegment(i,n,r))},this.regleProlongerSegment=function(t,e,r={}){if(r.longueur||(r.longueur=this.regle.longueur-3),r.longueur>0){const n=iE(e,t,3),i=iE(e,t,-r.longueur);this.regleSegment(n,i,r)}else{const n=iE(t,e,3),i=iE(t,e,r.longueur);this.regleSegment(n,i,r)}},this.tracer=function(t,{tempo:e=this.tempo,vitesse:r=this.vitesse,epaisseur:n=this.epaisseur,couleur:i=this.couleur,pointilles:s=this.pointilles,vecteur:o=!1}={}){const a=s?'pointille="tiret"':"",u=o?'style="vecteur"':"";this.idIEP+=1;const l=`<action abscisse="${this.x(t)}" ordonnee="${this.y(t)}" epaisseur="${n}" couleur="${i}" mouvement="tracer" objet="crayon" tempo="${e}" vitesse="${r}"  ${a} ${u} id="${this.idIEP}" />`;return this.crayon.position=t,this.liste_script.push(l),this.idIEP},this.trait=function(t,e,r={}){return this.crayonDeplacer(t,r),this.tracer(e,r)},this.traitRapide=function(t,e,r={}){return r.tempo=0,r.vitesse=1e4,this.crayonDeplacer(t,r),this.tracer(e,r)},this.traitMasquer=function(t,{tempo:e=0,vitesse:r=200}={}){this.liste_script.push(`<action mouvement="masquer" objet="trait" id="${t}" vitesse="${r}" />`)},this.regleSegment=function(t,e,r){let n,i,s,o;return"segment"===t.typeObjet?(n=t.extremite1,i=t.extremite2,s=e):(n=t,i=e,s=r),n.x<=i.x?(this.regleMontrer(n,s),this.regleRotation(i,s)):(this.regleMontrer(i,s),this.regleRotation(n,s)),DA(this.crayon.position,n)<DA(this.crayon.position,i)?(this.crayonMontrer(n,s),o=this.tracer(i,s)):(this.crayonMontrer(i,s),o=this.tracer(n,s)),o},this.polygoneTracer=function(...t){for(let e=0;e<t.length-1;e++)this.regleSegment(t[e],t[e+1]);this.regleSegment(t[t.length-1],t[0])},this.polygoneRapide=function(...t){for(let e=0;e<t.length-1;e++)this.traitRapide(t[e],t[e+1]);this.traitRapide(t[t.length-1],t[0])},this.textePoint=function(t,e,{tempo:r=this.tempo,police:n=!1,couleur:i=this.couleurTexte,taille:s,couleurFond:o,opaciteFond:a,couleurCadre:u,epaisseurCadre:l,marge:c,margeGauche:p,margeDroite:h,margeHaut:f,margeBas:d}={}){this.idIEP++;const m=n?`police="${n}"`:"";let g="";void 0!==o&&(g+=` couleur_fond="${o}"`),void 0!==a&&(g+=` opacite_fond="${a}"`),void 0!==u&&(g+=` couleur_cadre="${u}"`),void 0!==l&&(g+=` epaisseur_cadre="${l}"`),void 0!==c&&(g+=` marge="${c}"`),void 0!==p&&(g+=` marge_gauche="${p}"`),void 0!==h&&(g+=` marge_droite="${h}"`),void 0!==d&&(g+=` marge_bas="${d}"`),void 0!==f&&(g+=` marge_haut="${f}"`),void 0!==s&&(g+=` taille="${s}"`);let y=`<action abscisse="${this.x(e)}" ordonnee="${this.y(e)}" id="${this.idIEP}" mouvement="creer" objet="texte" />`;return y+=`\n<action ${m} couleur="${i}" texte="${t}" id="${this.idIEP}" mouvement="ecrire" objet="texte" ${g} tempo="${r}" />`,this.liste_script.push(y),this.idIEP},this.textePosition=function(t,e,r,n){const i=Jw(e,r);return this.textePoint(t,i,n)},this.longueurSegment=function(t,e,r,n){const i=zw(DA(t,e,1)),s=TE(t,e),o=TE(-s.y*r/qA(s),s.x*r/qA(s)),a=hS(hS(iE(t,e,i/2-.7),o),TE(0,1));return this.textePoint(`${i} cm`,a,n)},this.mesureAngle=function(t,e,r){const n=UA(t,e,r),i=hS(gS(dS(t,e,n/2),e,1.3/DA(e,t)),TE(-.2,.5));return this.textePoint(Math.abs(n)+"°",i)},this.texteMasquer=function(t,{tempo:e=0}={}){this.liste_script.push(`<action mouvement="masquer" objet="texte" id="${t}"  />`)},this.pause=function(){this.liste_script.push('<action mouvement="pause" />')},this.segmentCodage=function(t,e={},r={}){let n,i={};"segment"===t.typeObjet?(n=t,i=e):(n=RE(t,e),i={...r}),void 0===i.tempo&&(i.tempo=this.tempo),void 0===i.couleur&&(i.couleur=this.couleurCodage),void 0===i.codage&&(i.codage="\\"),this.idIEP++;const s=this.idIEP,o=nE(n.extremite1,n.extremite2),a=`<action abscisse="${this.x(o)}" ordonnee="${this.y(o)}" forme="${i.codage}"  couleur="${i.couleur}" id="${s}" tempo="${i.tempo}" mouvement="creer" objet="longueur" />`;return this.liste_script.push(a),s},this.segmentCodageMasquer=function(t,{tempo:e=this.tempo}={}){this.liste_script.push(`<action id="${t}" mouvement="masquer" objet="longueur" tempo="${e}" />`)},this.segmentCodageMontrer=function(t,{tempo:e=this.tempo}={}){this.liste_script.push(`<action id="${t}" mouvement="montrer" objet="longueur" tempo="${e}" />`)},this.codageAngleDroit=function(t,e,r,n={}){this.crayonMontrer(),void 0===n.longueur&&(n.longueur=.3),void 0===n.couleur&&(n.couleur=this.couleurCodage);const i=iE(e,r,n.longueur),s=iE(e,t,n.longueur),o=fS(s,e,i),a={...n};return a.tempo=0,[this.trait(i,o,a),this.trait(o,s,n)]},this.codageAngleDroitMasquer=function(t,{tempo:e=0}={}){this.traitMasquer(t[0],{tempo:e}),this.traitMasquer(t[1],{tempo:e})},this.angleCodage=function(t,e,r,{couleur:n=this.couleurCodage,codage:i="plein",rayon:s=1,tempo:o=this.tempo}={}){const a=t.id+"_"+e.id+"_"+r.id,u=fE(e,t),l=fE(e,r);u.isVisible=!1,l.isVisible=!1;const c=-u.angleAvecHorizontale,p=-l.angleAvecHorizontale,h=`<action abscisse="${this.x(e)}" ordonnee="${this.y(e)}" rayon="${30*s}" angle1="${c}" angle2="${p}" forme="${i}"  couleur="${n}" id="${a}" tempo="${o}" mouvement="creer" objet="angle" />`;return this.liste_script.push(h),a},this.angleCodageMasquer=function(t,e,r,{tempo:n=0}={}){const i=t.id+"_"+e.id+"_"+r.id;this.liste_script.push(`<action id="${i}" mouvement="masquer" objet="angle" tempo="${n}" />`)},this.angleCodageMontrer=function(t,e,r,{tempo:n=0}={}){const i=t.id+"_"+e.id+"_"+r.id;this.liste_script.push(`<action id="${i}" mouvement="montrer" objet="angle" tempo="${n}" />`)},this.image=function(t,e=Jw(0,0)){let r;return this.idIEP++,r=`<action id="${this.idIEP}" url="${t}" mouvement="chargement" objet="image" />`,r+=`\n<action abscisse="${this.x(e)}" ordonnee="${this.y(e)}" id="${this.idIEP}" mouvement="translation" objet="image" vitesse="100000" />`,this.liste_script.push(r),this.idIEP},this.paralleleRegleEquerre2points3epoint=function(t,e,r,n){let i,s,o;t.x<e.x?(i=t,s=e):(i=e,s=t);const a=fE(t,e),u=vS(r,a);o=u.x<s.x?iE(u,s,-2):u.x>s.x?iE(u,s,2):iE(u,i,2);const l=vS(o,mE(r,a)),c=iE(l,r,6);if(u.x<i.x&&DA(u,i)>3&&(this.regleProlongerSegment(s,i),this.regleMasquer()),u.x>s.x&&DA(u,s)>3&&this.regleProlongerSegment(i,s),this.equerreMontrer(o),c.x>l.x?this.equerreRotation(a.angleAvecHorizontale-90):this.equerreRotation(a.angleAvecHorizontale+90),o.y>l.y)this.regle.visibilite?(this.regleDeplacer(o,{vitesse:this.vitesse,tempo:0}),this.regleRotation(l,{sens:this.vitesse/2,tempo:0})):(this.regleDeplacer(o,{vitesse:1e3,tempo:0}),this.regleRotation(l,{sens:1e3,tempo:0}));else{const t=iE(l,o,-2);this.regle.visibilite?(this.regleDeplacer(t,{vitesse:this.vitesse,tempo:0}),this.regleRotation(o,{sens:this.vitesse/2,tempo:0})):(this.regleDeplacer(t,{vitesse:1e3,tempo:0}),this.regleRotation(o,{sens:1e3,tempo:0}))}this.regleMontrer(),this.equerreDeplacer(l,n),this.crayonMontrer(),this.crayonDeplacer(l,n),this.tracer(c,n)},this.perpendiculaireRegleEquerre2points3epoint=function(t,e,r,n){const i=this.regle.longueur,s=this.equerre.zoom,o=fE(t,e);let a;a=sE(r,t,e)?7.5:DA(vS(r,o),r)+2,this.equerreZoom(zw(100*a/7.5)),this.regleModifierLongueur(Math.max(2*a,15)),this.perpendiculaireRegleEquerreDroitePoint(o,r),this.equerreZoom(s),this.regleModifierLongueur(i)},this.perpendiculaireRegleEquerreDroitePoint=function(t,e){const r=vS(e,t),n=dS(e,r,90),i=dS(n,r,180),s=UA(Jw(1e4,r.y),r,i);this.equerreRotation(s),this.equerreMontrer(r),this.regleSegment(r,e),this.equerreMasquer(),this.codageAngleDroit(n,r,e),this.regleProlongerSegment(e,r,{longueur:2*DA(e,r)})},this.mediatriceAuCompas=function(t,e,r={}){void 0===r.longueur1&&(r.longueur1=3),void 0===r.longueur2&&(r.longueur2=-3),void 0===r.codage&&(r.codage="X"),void 0===r.couleurCodage&&(r.couleurCodage=this.couleurCodage),void 0===r.couleurCompas&&(r.couleurCompas=this.couleurCompas);const n=nE(t,e),i=dS(t,n,-90),s=iE(n,i,r.longueur1),o=iE(n,i,r.longueur2);let a,u,l,c;return this.compasMontrer(),this.compasDeplacer(t,r),r.longueur1===-1*r.longueur2?(this.compasEcarter(DA(t,s),{vitesse:r.vitesse,sens:r.vitesse}),a=this.compasTracerArcCentrePoint(t,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),u=this.compasTracerArcCentrePoint(t,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),l=this.compasTracerArcCentrePoint(e,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),c=this.compasTracerArcCentrePoint(e,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo})):(this.compasEcarter(DA(t,s),r),a=this.compasTracerArcCentrePoint(t,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),u=this.compasTracerArcCentrePoint(e,s,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),l=this.compasTracerArcCentrePoint(e,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo}),c=this.compasTracerArcCentrePoint(t,o,{delta:r.delta,couleur:r.couleurCompas,sens:r.sens,vitesse:r.vitesse,tempo:r.tempo})),this.compasMasquer(),s.x<=o.x?this.regleDroite(s,o,r):this.regleDroite(o,s,r),this.regleMasquer(),[a,u,l,c,this.segmentCodage(t,n,{codage:r.codage,couleur:r.couleurCodage,tempo:r.tempo}),this.segmentCodage(n,e,{codage:r.codage,couleur:r.couleurCodage,tempo:r.tempo}),this.codageAngleDroit(t,n,i,{couleur:r.couleurCodage,tempo:r.tempo,vitesse:r.vitesse})]},this.mediatriceRegleEquerre=function(t,e,r="X"){const n=nE(t,e);this.regleMontrer(),this.regleDeplacer(t),this.regleRotation(e),this.crayonMontrer();const i=dS(t,n,-90),s=dS(t,n,90),o=iE(n,i,.2),a=iE(n,s,.2);this.y(o)>this.y(a)?this.trait(n,o):this.trait(n,a),this.regleMasquer(),this.x(t)<this.x(e)?(this.equerreDeplacer(t),this.equerreMontrer(),this.equerreRotation(e)):(this.equerreDeplacer(e),this.equerreMontrer(),this.equerreRotation(t)),this.equerreDeplacer(n),this.crayonDeplacer(n),this.trait(n,i),this.equerreMasquer(),this.regleDroite(i,s),this.regleMasquer(),this.segmentCodage(t,n,r),this.segmentCodage(n,e,r),this.codageAngleDroit(t,n,i)},this.hauteur=function(t,e,r,n=!0){const i=fE(t,e);i.isVisible=!1;const s=vS(r,i);let o,a;this.x(t)<this.x(e)?(o=t,a=e):(o=e,a=t),this.x(s)<this.x(o)&&this.regleProlongerSegment(a,o,DA(o,s)+2,this.couleur,this.tempo,this.vitesse,this.epaisseurTraitsDeConstruction,!0),this.x(s)>this.x(a)&&this.regleProlongerSegment(o,a,DA(a,s)+2,this.couleur,this.tempo,this.vitesse,this.epaisseurTraitsDeConstruction,!0),(this.x(s)<this.x(o)||this.x(s)>this.x(a))&&this.regleMasquer(),this.x(t)<this.x(e)?(this.equerreDeplacer(t),this.equerreMontrer(),this.equerreRotation(e)):(this.equerreDeplacer(e),this.equerreMontrer(),this.equerreRotation(t)),this.equerreDeplacer(s),this.crayonMontrer(),this.crayonDeplacer(s),this.trait(s,r),this.equerreMasquer(),n&&this.codageAngleDroit(t,s,r),this.crayonMasquer()},this.mediane=function(t,e,r,n={}){void 0===n.codage&&(n.codage="X"),void 0===n.couleurTraitsDeConstruction&&(n.couleurTraitsDeConstruction=this.couleurTraitsDeConstruction),void 0===n.epaisseurTraitsDeConstruction&&(n.epaisseurTraitsDeConstruction=this.epaisseurTraitsDeConstruction);const i=nE(t,e);this.regleMontrer(t,n),this.regleRotation(e,n),this.crayonMontrer();const s=dS(t,i,-90),o=dS(t,i,90),a=iE(i,s,.2),u=iE(i,o,.2);a.y>u.y?this.trait(i,a,{vitesse:n.vitesse,tempo:n.tempo,couleur:n.couleurTraitsDeConstruction,epaisseur:n.epaisseurTraitsDeConstruction}):this.trait(i,u,{vitesse:n.vitesse,tempo:n.tempo,couleur:n.couleurTraitsDeConstruction,epaisseur:n.epaisseurTraitsDeConstruction}),this.regleSegment(i,r,n),n.codage&&(this.segmentCodage(t,i,n),this.segmentCodage(i,e,n))},this.bissectriceAuCompas=function(t,e,r,{codage:n="/",l:i=2,couleur:s=this.couleur,tempo:o=this.tempo,vitesse:a=this.vitesse,sens:u=zw(this.vitesse/2,0),epaisseur:l=this.epaisseur,pointilles:c=this.pointilles,couleurCodage:p=this.couleurCodage,masquerTraitsDeConstructions:h=!0}={}){const f=iE(e,t,i),d=iE(e,r,i),m=dS(e,f,-(180-UA(t,e,r))),g={couleur:s,tempo:o,vitesse:a,sens:u,pointilles:!1},y=this.compasTracerArcCentrePoint(e,f,g),v=this.compasTracerArcCentrePoint(e,d,g),b=this.compasTracerArcCentrePoint(f,m,g),x=this.compasTracerArcCentrePoint(d,m,g);return this.compasMasquer(),this.regleDemiDroiteOriginePoint(e,m,{longueur:DA(e,t),couleur:s,tempo:o,vitesse:a,sens:u,epaisseur:l,pointilles:c}),this.regleMasquer(),this.crayonMasquer(),n&&(this.angleCodage(t,e,m,{couleur:p,codage:n,tempo:o}),this.angleCodage(m,e,r,{couleur:p,codage:n,tempo:o})),h&&(this.traitMasquer(y),this.traitMasquer(v),this.traitMasquer(b),this.traitMasquer(x)),{arc1:y,arc2:v,arc3:b,arc4:x}},this.cercleCirconscrit=function(t,e,r,n={}){void 0===n.couleur&&(n.couleur=this.couleur),void 0===n.couleurMediatrice&&(n.couleurMediatrice=n.couleur),void 0===n.couleurCercle&&(n.couleurCercle=n.couleur),n.codage="X",n.couleur=n.couleurMediatrice;const i=this.mediatriceAuCompas(t,e,n);this.traitMasquer(i[0]),this.traitMasquer(i[1]),this.traitMasquer(i[2]),this.traitMasquer(i[3]),n.codage="||";const s=this.mediatriceAuCompas(e,r,n);this.traitMasquer(s[0]),this.traitMasquer(s[1]),this.traitMasquer(s[2]),this.traitMasquer(s[3]),n.codage="///";const o=this.mediatriceAuCompas(t,r,n);this.traitMasquer(o[0]),this.traitMasquer(o[1]),this.traitMasquer(o[2]),this.traitMasquer(o[3]);const a=PS(t,e,r);n.couleur=n.couleurCercle,this.compasCercleCentrePoint(a,t,n)},this.triangle3longueurs=function(t,e,r,n,i=!0){const s=Jw(6,0),o=uE(s,e,Lw(-20,20)),a=VE(s,o,r,n).listePoints[2];return 3!==t.length?i=!1:(s.nom=t[0],o.nom=t[1],a.nom=t[2]),i&&this.textePosition(`${s.nom+o.nom} = ${Vw(e)} cm`,0,-2),this.pointCreer(s),this.regleSegment(s,o),this.pointCreer(o),this.crayonMasquer(),i&&this.textePosition(`${s.nom+a.nom} = ${Vw(r)} cm donc ${a.nom} appartient au cercle de centre ${s.nom} et de rayon ${Vw(r)} cm.`,0,-3),this.couleur="forestgreen",this.epaisseur=2,this.compasMontrer(s),this.compasEcarterAvecRegle(r),this.compasTracerArcCentrePoint(s,a,40),i&&this.textePosition(`${o.nom+a.nom} = ${Vw(n)} cm donc ${a.nom} appartient au cercle de centre ${o.nom} et de rayon ${Vw(n)} cm.`,0,-4),this.compasDeplacer(o),this.compasEcarterAvecRegle(n),this.compasTracerArcCentrePoint(o,a),this.compasMasquer(),this.couleur="blue",this.epaisseur=3,i&&this.textePosition(`Le point ${a.nom} est à une intersection des deux cercles.`,0,-5),this.pointCreer(a),this.regleSegment(o,a),this.regleSegment(a,s),this.crayonMasquer(),this.regleMasquer(),[s,o,a]},this.triangleRectangleCoteHypotenuse=function(t,e,r,n=!0){const i=Jw(6,0),s=uE(i,e,Lw(-20,20)),o=fE(i,s);o.isVisible=!1;const a=gE(s,o);a.isVisible=!1;const u=YE(i,r);u.isVisible=!1;const l=ZE(a,u),c=gS(l,s,1.2);return 3!==t.length?n=!1:(i.nom=t[0],s.nom=t[1],l.nom=t[2]),DA(i,l)>8&&this.equerreZoom(150),n&&this.textePosition(`${i.nom+s.nom} = ${Vw(e)} cm`,0,-2),this.equerreRotation(o.angleAvecHorizontale),this.pointCreer(i),this.regleSegment(i,s),this.pointCreer(s),n&&this.textePosition(`${i.nom+s.nom+l.nom} est un triangle rectangle en ${s.nom} donc ${l.nom} appartient à la perpendiculaire à (${i.nom+s.nom}) passant par ${s.nom}.`,0,-3),this.equerreMontrer(i),this.equerreDeplacer(s),this.tracer(c),this.equerreMasquer(),this.codageAngleDroit(i,s,l),this.crayonMasquer(),n&&this.textePosition(`${i.nom+l.nom} = ${Vw(r)} cm donc ${l.nom} appartient au cercle de centre ${i.nom} et de rayon ${Vw(r)} cm.`,0,-4),this.compasMontrer(i),this.compasEcarterAvecRegle(r),this.couleur="forestgreen",this.epaisseur=2,this.compasTracerArcCentrePoint(i,l),this.couleur="blue",this.epaisseur=2,n&&this.textePosition(`${l.nom} est à une intersection de la perpendiculaire et du cercle.`,0,-5),this.crayonMontrer(l),this.pointCreer(l),this.compasMasquer(),this.regleSegment(i,l),this.regleMasquer(),this.crayonMasquer(),[i,s,l]},this.triangleRectangle2Cotes=function(t,e,r,n=!0){const i=Jw(6,0),s=uE(i,e,Lw(-20,20)),o=fE(i,s);o.isVisible=!1;const a=gE(s,o);a.isVisible=!1;const u=YE(s,r);u.isVisible=!1;const l=ZE(a,u),c=gS(l,s,1.2);return 3!==t.length?n=!1:(i.nom=t[0],s.nom=t[1],l.nom=t[2]),DA(i,l)>8&&this.equerreZoom(150),n&&this.textePosition(`${i.nom+s.nom} = ${Vw(e)} cm`,0,-2),this.equerreRotation(o.angleAvecHorizontale),this.pointCreer(i),this.regleSegment(i,s),this.pointCreer(s),n&&this.textePosition(`${i.nom+s.nom+l.nom} est un triangle rectangle en ${s.nom} donc ${l.nom} appartient à la perpendiculaire à (${i.nom+s.nom}) passant par ${s.nom}.`,0,-3),this.equerreMontrer(i),this.equerreDeplacer(s),this.tracer(c),this.equerreMasquer(),this.codageAngleDroit(i,s,l),n&&this.textePosition(`${s.nom+l.nom} = ${Vw(r)} cm donc ${l.nom} est à ${Vw(r)} cm de ${s.nom} sur la perpendiculaire à (${i.nom+s.nom}) passant par ${s.nom}.`,0,-4),this.regleMontrer(s),this.regleRotation(l),this.crayonDeplacer(l),this.pointCreer(l),this.couleur="blue",this.epaisseur=2,this.compasMasquer(),this.regleSegment(i,l),this.regleMasquer(),this.crayonMasquer(),[i,s,l]},this.triangle1longueur2angles=function(t,e,r,n,i=!0,s=!1){const o=Lw(-20,20),a=r,u=n,l=Jw(6,0),c=uE(l,e,o),p=uE(l,5.2,a+o),h=iE(l,p,10),f=iE(p,h,.4),d=uE(c,3,180-u+o),m=iE(c,d,10),g=iE(d,m,-.4),y=uE(c,5.2,180-u+o),v=iE(y,m,.4),b=dS(fE(l,c),l,a);p.isVisible=!1;const x=dS(fE(c,l),c,-u);x.isVisible=!1;const _=aE(b,x);return 3!==t.length?i=!1:(l.nom=t[0],c.nom=t[1],_.nom=t[2]),this.couleur="blue",this.epaisseur=3,this.pointCreer(l),i&&this.textePosition(`On trace le côté [${l.nom+c.nom}] de ${Vw(e)} cm.`,0,-4),this.regleSegment(l,c),this.pointCreer(c),this.couleur="grey",this.epaisseur=1,this.rapporteurMontrer(l),this.rapporteurDeplacer(l),this.rapporteurRotation(o),i&&this.textePosition(`On place un repère à ${a} degrés pour tracer la demi-droite [${l.nom+_.nom}).`,0,-5),this.epaisseur=3,this.trait(p,f,20),this.epaisseur=1,this.rapporteurMasquer(),this.regleSegment(l,h),this.regleMasquer(),this.angleCodage(c,l,_),this.rapporteurMontrer(l),this.rapporteurDeplacer(c),i&&this.textePosition(`On place un repère à ${u} degrés pour tracer la demi-droite [${c.nom+_.nom}).`,0,-6),this.epaisseur=3,this.trait(d,g,10),this.trait(y,v,20),this.epaisseur=1,this.rapporteurMasquer(),this.regleMontrer(c),this.regleSegment(c,m),this.angleCodage(_,c,l),this.pointCreer(_,"",0),this.pointNommer(_,_.nom,-.5,1),this.couleur="blue",this.epaisseur=3,this.regleSegment(c,_),this.regleSegment(_,l),this.regleMasquer(),this.crayonMasquer(),i&&s&&this.textePosition(`On peut mesurer ${l.nom+_.nom} ≈ ${Vw(DA(l,_,1))} cm et ${c.nom+_.nom} ≈ ${Vw(DA(c,_,1))} cm.`,0,-7),[l,c,_]},this.triangle2longueurs1angle=function(t,e,r,n,i=!0,s=!1){const o=Lw(-20,20),a=n,u=Jw(6,0),l=uE(u,e,o),c=uE(u,5.2,a+o),p=iE(u,c,10),h=iE(c,p,.4),f=iE(u,p,r);return 3!==t.length?i=!1:(u.nom=t[0],l.nom=t[1],f.nom=t[2]),this.couleur="blue",this.epaisseur=3,this.pointCreer(u),i&&this.textePosition(`On trace le côté [${u.nom+l.nom}] de ${Vw(e)} cm.`,0,-4),this.regleSegment(u,l),this.pointCreer(l),this.couleur="grey",this.epaisseur=1,this.rapporteurMontrer(u),this.rapporteurDeplacer(u),this.rapporteurRotation(o),i&&this.textePosition(`On place un repère à ${a} degrés pour tracer la demi-droite [${u.nom+f.nom}).`,0,-5),this.epaisseur=3,this.trait(c,h,20),this.epaisseur=1,this.rapporteurMasquer(),this.regleSegment(u,p),this.angleCodage(l,u,f),this.rapporteurMasquer(),i&&this.textePosition(`On place le point ${f.nom} sur la demi-droite [${u.nom+f.nom}) à ${r} cm de ${u.nom}.`,0,-6),this.epaisseur=3,this.couleur="blue",this.crayonDeplacer(f),this.pointCreer(f),this.regleSegment(u,f),this.crayonMasquer(),i&&this.textePosition(`On trace le côté [${l.nom+f.nom}].`,0,-7),this.regleMontrer(f),this.crayonMontrer(f),this.regleSegment(f,l),this.regleMasquer(),this.crayonMasquer(),[u,l,f]},this.triangleEquilateral2Sommets=function(t,e,r=""){const n=dS(e,t,60);return n.nom=r,this.traitRapide(t,e),this.pointCreer(t,t.nom,0),this.pointCreer(e,e.nom,0),this.compasEcarter2Points(t,e),this.compasTracerArcCentrePoint(t,n),this.compasTracerArcCentrePoint(e,n),this.pointCreer(n),this.compasMasquer(),this.regleSegment(t,n),this.regleSegment(n,e),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(t,e),this.segmentCodage(t,n),this.segmentCodage(e,n),[t,e,n]},this.triangleEquilateral=function(t,e){const r=Jw(6,0),n=uE(r,e,Lw(-20,20)),i=dS(n,r,60);return 3===t.length&&(r.nom=t[0],n.nom=t[1],i.nom=t[2]),this.regleSegment(r,n),this.pointCreer(r),this.pointCreer(n),this.compasEcarter2Points(r,n),this.compasTracerArcCentrePoint(r,i),this.compasTracerArcCentrePoint(n,i),this.pointCreer(i),this.compasMasquer(),this.regleSegment(r,i),this.regleSegment(i,n),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(r,n),this.segmentCodage(r,i),this.segmentCodage(n,i),[r,n,i]},this.parallelogramme3sommetsConsecutifs=function(t,e,r,n="",i=!0,s=!0){const o=fS(r,e,t);o.nom=n;const a=Math.min(t.x,e.x,r.x,o.x),u=Math.min(t.y,e.y,r.y,o.y);this.traitRapide(t,e),this.traitRapide(e,r),this.pointCreer(t,t.nom,0),this.pointCreer(e,e.nom,0),this.pointCreer(r,r.nom,0),this.textePosition(`${t.nom+e.nom+r.nom+o.nom} est un parallélogramme donc ses côtés opposés sont de même longueur.`,a-1,u-1),this.compasEcarter2Points(e,t),this.textePosition(`${e.nom+t.nom} = ${r.nom+o.nom}`,a-1,u-2),this.compasTracerArcCentrePoint(r,o),this.compasEcarter2Points(e,r),this.textePosition(`${e.nom+r.nom} = ${t.nom+o.nom}`,a-1,u-3),this.compasTracerArcCentrePoint(t,o,10),this.pointCreer(o),this.compasMasquer(),this.regleSegment(r,o),this.regleSegment(o,t),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(t,e,{codage:"///",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(o,r,{codage:"///",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(e,r,{codage:"//",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(t,o,{codage:"//",couleur:this.couleurCodage,tempo:0})},this.parallelogramme2sommetsConsecutifsCentre=function(t,e,r,n="",i="",s=!0){const o=fS(r,t,r);o.nom=n;const a=fS(r,e,r);a.nom=i;const u=t.nom+e.nom+o.nom+a.nom;(DA(t,o)>12||DA(e,a)>12)&&this.regleModifierLongueur(30);const l=Math.min(t.x,e.x,o.x,a.x),c=Math.min(t.y,e.y,o.y,a.y);this.traitRapide(t,e),this.pointCreer(t,{tempo:0}),this.pointCreer(e,{tempo:0}),this.pointCreer(r,{tempo:0}),s&&4===u.length&&this.textePosition(`${t.nom+e.nom+o.nom+a.nom} est un parallélogramme donc ses diagonales se coupent en leur milieu.`,l-1,c-1),this.pointilles=!0,this.epaisseur=1,this.couleur=this.couleurTraitsDeConstruction,this.regleDemiDroiteOriginePoint(t,r,{longueur:DA(t,o)+3}),this.regleMasquer(),this.crayonMasquer(),this.compasEcarter2Points(t,r),s&&4===u.length&&this.textePosition(`${t.nom+r.nom} = ${r.nom+o.nom}`,l-1,c-2),this.pointilles=!1,this.compasTracerArcCentrePoint(r,o),this.compasMasquer(),this.pointilles=!0,this.regleDemiDroiteOriginePoint(e,r,{longueur:DA(e,a)+3}),this.regleMasquer(),this.crayonMasquer(),this.pointilles=!1,this.compasEcarter2Points(e,r),s&&4===u.length&&this.textePosition(`${e.nom+r.nom} = ${r.nom+a.nom}`,l-1,c-3),this.compasTracerArcCentrePoint(r,a),this.compasMasquer(),this.couleur="blue",this.epaisseur=3,this.pointCreer(a),this.regleSegment(t,a),this.regleSegment(a,o),this.regleSegment(o,e),this.regleMasquer(),this.compasMasquer(),this.crayonMasquer(),this.segmentCodage(t,r,{codage:"//",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(r,o,{codage:"//",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(e,r,{codage:"O",couleur:this.couleurCodage,tempo:0}),this.segmentCodage(r,a,{codage:"O",couleur:this.couleurCodage,tempo:0})},this.parallelogrammeAngleCentre=function(t,e,r,n){const i=iE(e,r,DA(e,r)+2),s=iE(e,t,DA(e,t)+2),o=fS(r,e,t);this.traitRapide(e,i),this.traitRapide(e,s),this.pointCreer(n,{tempo:0}),this.pointCreer(e,{tempo:0}),this.regleDemiDroiteOriginePoint(e,n,{couleur:this.couleurTraitsDeConstruction,epaisseur:1,pointilles:!0}),this.pointilles=!1,this.regleMasquer(),this.crayonMasquer(),this.compasEcarter2Points(e,n),this.compasTracerArcCentrePoint(n,o,{couleur:this.couleurTraitsDeConstruction}),this.compasMasquer(),this.paralleleRegleEquerre2points3epoint(i,e,o,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.equerreMasquer(),this.regleDroite(o,t,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.paralleleRegleEquerre2points3epoint(e,s,o,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.equerreMasquer(),this.regleDroite(o,r,{couleur:this.couleurTraitsDeConstruction,epaisseur:1}),this.pointCreer(t,{tempo:0}),this.pointCreer(r,{tempo:0}),this.pointCreer(o,{tempo:0}),this.regleSegment(r,o),this.regleSegment(o,t),this.regleMasquer(),this.crayonMasquer()},this.carre1point1longueur=function(t,e,r){const n=uE(e=Jw(5,0,t[0]),r,Lw(-20,20),t[1]),i=dS(e,n,-90,t[2]),s=dS(n,e,90,t[3]),o=iE(e,s,r+2,"E"),a=iE(s,i,r+2,"F");return this.equerreZoom(100*(r+3)/7.5),this.tempo=20,this.textePosition(`1) On veut construire un carré dont les côtés mesurent ${r} cm, donc on commence par tracer un segment, ici [${t[0]+t[1]}], de cette longueur.`,0,-2),this.pointCreer(e,{tempo:0}),this.pointNommer(e,e.nom,{dx:-.5,dy:0}),this.regleSegment(e,n),this.pointCreer(n),this.regleMasquer(),this.longueurSegment(e,n,-1),this.textePosition(`2) Un carré possède 4 angles droits, donc on trace la perpendiculaire à (${t[0]+t[1]}) passant par ${t[0]}.`,0,-3),this.equerreMontrer(),this.equerreDeplacer(e),this.equerreRotation(n),this.trait(e,o),this.equerreMasquer(),this.codageAngleDroit(n,e,s),this.textePosition(`3) Les 4 côtés d'un carré sont de la même longueur, donc on place le point ${t[3]} sur cette perpendiculaire, à ${r} cm de ${t[0]}.`,0,-4),this.regleSegment(e,s),this.pointCreer(s,{tempo:0}),this.pointNommer(s,s.nom,{dx:-.7,dy:.5}),this.regleMasquer(),this.segmentCodage(e,n),this.segmentCodage(e,s),this.textePosition(`4) De même, on trace la perpendiculaire à (${t[0]+t[3]}) passant par ${t[3]}, puis on place le point ${t[2]} sur cette perpendiculaire, à ${r} cm de ${t[3]}.`,0,-5),this.equerreMontrer(),this.equerreDeplacer(s),this.equerreRotation(e),this.trait(s,a),this.equerreMasquer(),this.codageAngleDroit(e,s,i),this.regleSegment(s,i),this.pointCreer(i,{tempo:0}),this.pointNommer(i,i.nom,{dx:0,dy:.9}),this.regleMasquer(),this.segmentCodage(s,i),this.textePosition(`5) On trace le segment [${t[1]+t[2]}].`,0,-6),this.regleSegment(i,n),this.regleMasquer(),this.segmentCodage(n,i),this.textePosition(`6) On vérifie que ${t[1]+t[2]} = ${r} cm et que les deux derniers angles tracés sont droits.`,0,-7),this.equerreMontrer(i,{tempo:0}),this.equerreRotation(s),this.equerreMasquer(),this.codageAngleDroit(s,i,n),this.equerreMontrer(n,{tempo:0}),this.equerreRotation(i),this.equerreMasquer(),this.codageAngleDroit(i,n,e),BE(e,n,i,s)},this.rotationPoint=function(t,e,r,n,{couleur:i=this.couleur,couleurCodage:s=this.couleurCodage,codage:o=!0}={}){this.epaisseur=.5,this.couleur="grey",void 0!==n&&""!==n||(n=t.nom+"'");const a=dS(t,e,r,n);this.regleSegment(e,t),this.rapporteurMontrer(e),this.rapporteurTracerDemiDroiteAngle(e,t,r),this.regleMasquer(),this.rapporteurMasquer(),this.compasEcarter2Points(e,t),this.compasTracerArcCentrePoint(e,a),this.compasMasquer(),this.pointCreer(a,{couleur:i,couleurLabel:i}),o&&(90===Math.abs(r)?this.codageAngleDroit(t,e,a,{couleur:s}):(this.angleCodage(t,e,a,{couleur:s}),this.textePoint(Math.abs(r)+"°",hS(gS(dS(t,e,r/2),e,1.3/DA(e,t)),TE(-.2,.5)))))},this.symetrieAxialePoint=function(t,e,r,{couleur:n=this.couleur,couleurCodage:i=this.couleurCodage,codage:s="//"}={}){this.epaisseur=.5,this.couleur="grey",void 0!==r&&""!==r||(r=t.nom+"'");const o=yS(t,e,r);if(0!==DA(t,o)){const e=nE(t,o),r=dS(t,e,90),n=dS(r,e,180);this.regleMasquerGraduations(),this.perpendiculaireRegleEquerre2points3epoint(r,n,t),this.compasEcarter2Points(e,t),this.compasTracerArcCentrePoint(e,o),this.regleSegment(t,o),this.regleMasquer(),this.equerreMasquer(),this.segmentCodage(t,e,{codage:s,couleur:i}),this.segmentCodage(o,e,{codage:s,couleur:i}),this.crayonMasquer(),this.compasMasquer()}this.pointCreer(o,{couleur:n,couleurLabel:n})},this.translationPoint=function(t,e,r,n,{couleur:i="black",couleurCodage:s=this.couleurCodage}={}){const o=TE(e,r);this.epaisseur=.5,this.couleur="grey",void 0!==n&&""!==n||(n=t.nom+"'");const a=hS(t,o,n);0!==DA(e,t)&&(this.compasEcarter2Points(e,t),this.compasTracerArcCentrePoint(r,a),this.compasEcarter2Points(e,r),this.compasTracerArcCentrePoint(t,a)),this.compasMasquer(),this.pointCreer(a,{couleur:i,couleurLabel:i});const u=Lw(0,4),l=Lw(0,4,u),c=["/","//","///","O","\\\\"],p=c[u],h=c[l];this.couleur="green",this.traitRapide(t,a),this.traitRapide(e,r),this.segmentCodage(t,a,{codage:p,couleur:s}),this.segmentCodage(e,r,{codage:p,couleur:s}),this.couleur="red",this.traitRapide(r,a),this.traitRapide(e,t),this.segmentCodage(r,a,{codage:h,couleur:s}),this.segmentCodage(e,t,{codage:h,couleur:s})},this.demiTourPoint=function(t,e,r,{couleur:n="black",couleurCodage:i=this.couleurCodage,codage:s="//"}={}){this.epaisseur=.5,this.couleur="grey",void 0!==r&&""!==r||(r=t.nom+"'");const o=dS(t,e,180,r);this.compasEcarter2Points(e,t),this.compasTracerArcCentrePoint(e,o),this.compasMasquer(),this.crayonDeplacer(t),this.regleSegment(t,o),this.couleur=n,this.epaisseur=2,this.pointCreer(o,{couleur:n,couleurLabel:n}),this.regleMasquer(),this.crayonMasquer(),this.segmentCodage(t,e,{codage:s,couleur:i}),this.segmentCodage(e,o,{codage:s,couleur:i})},this.homothetiePoint=function(t,e,r,n,{couleur:i=this.couleur,positionTexte:s={x:0,y:0}}={}){this.epaisseur=1;const o=this.couleur;let a;this.couleur="grey",void 0!==n&&""!==n||(n=t.nom+"'");const u=gS(t,e,r,n);a=r>0?this.textePosition(`Comme le rapport est positif alors les points ${t.nom} et ${u.nom} sont du même côté de ${e.nom}`,s.x,s.y,{taille:15}):this.textePosition(`Comme le rapport est négatif alors ${e.nom} est entre les points ${t.nom} et ${u.nom}`,s.x,s.y,{taille:15}),this.regleSegment(t,e);const l=Uw(DA(t,e),1),c=Uw(zw(l*Math.abs(r))),p=this.textePosition(`La mesure de ${e.nom}${t.nom} est ${Gw(Uw(l,1))} cm et le rapport de l'homothetie est ${Gw(r)}`,s.x,s.y-1,{taille:15}),h=this.textePosition(`donc ${e.nom}${u.nom} mesure ${Gw(l)} cm × ${Gw(Math.abs(r))} = ${Gw(c)} cm`,s.x,s.y-2,{taille:15});this.regleSegment(e,u),this.pointCreer(u,{couleur:i,couleurLabel:i}),this.regleMasquer(),this.crayonMasquer(),this.pause(),this.texteMasquer(p),this.texteMasquer(h),this.texteMasquer(a),this.couleur=o},this.rotationPolygone=function(t,e,r,n=[],{couleur:i=this.couleur,couleurCodage:s=this.couleurCodage}={}){let o;const a=dS(t,e,r);this.epaisseur=.5,this.couleur="grey";let u,l=0;for(const a of t.listePoints)o=void 0!==n[l]?n[l]:a.nom+"'",u=l<1,0!==DA(e,a)&&this.rotationPoint(a,e,r,o,{couleur:i,couleurCodage:s,codage:u}),l++;this.epaisseur=2,this.couleur=i,this.polygoneRapide(...a.listePoints)},this.symetrieAxialePolygone=function(t,e,r=[],{couleur:n=this.couleur,couleurCodage:i=this.couleurCodage}={}){let s;const o=yS(t,e);this.epaisseur=.5,this.couleur="grey";let a=0;const u=["/","//","///","O","\\\\"];for(const o of t.listePoints)s=void 0!==r[a]?r[a]:o.nom+"'",this.symetrieAxialePoint(o,e,s,{couleur:n,couleurCodage:i,codage:u[a]}),a++;this.compasMasquer(),this.crayonMasquer(),this.epaisseur=2,this.couleur=n,this.polygoneRapide(...o.listePoints),this.polygoneRapide(o)},this.translationPolygone=function(t,e,r,n=[],{couleur:i=this.couleur,couleurCodage:s=this.couleurCodage,codage:o="O"}={}){let a;const u=hS(t,TE(e,r));this.epaisseur=.5,this.couleur="grey";let l=0;for(const u of t.listePoints)a=void 0!==n[l]?n[l]:u.nom+"'",this.translationPoint(u,e,r,a,{couleur:i,couleurCodage:s,codage:o});this.epaisseur=2,this.couleur=i,this.polygoneRapide(...u.listePoints),this.polygoneRapide(u),l++},this.demiTourPolygone=function(t,e,r=[],{couleur:n=this.couleur,couleurCodage:i=this.couleurCodage}={}){const s=dS(t,e,180);let o;this.epaisseur=.5,this.couleur="grey";let a=0;const u=["/","//","///","O","\\\\"];for(const s of t.listePoints)o=void 0!==r[a]?r[a]:s.nom+"'",this.demiTourPoint(s,e,o,{couleur:n,couleurCodage:i,codage:u[a]}),a++;this.epaisseur=2,this.couleur=n,this.polygoneRapide(...s.listePoints),this.polygoneRapide(s)},this.homothetiePolygone=function(t,e,r,n=[],{couleur:i=this.couleur}={}){let s;const o=gS(t,e,r);this.epaisseur=1,this.couleur="grey";const a=this.textePosition("Comme k est "+(r>=0?"positif":"négatif")+" alors "+(r>=0?"les figures sont du même côté de "+e.nom:e.nom+" est entre les figures"),0,0,{taille:15});let u=0;for(const o of t.listePoints)s=void 0!==n[u]?n[u]:o.nom+"'",this.homothetiePoint(o,e,r,s,{couleur:i}),u++;this.epaisseur=2,this.couleur=i,this.polygoneRapide(...o.listePoints),this.texteMasquer(a)}}var WA=__webpack_require__(90187),YA=__webpack_require__.n(WA);window.mathalea={sortieNB:!1,anglePerspective:30,coeffPerspective:.5,pixelsParCm:20,scale:1,unitesLutinParCm:50,mainlevee:!1,amplitude:1,fenetreMathalea2d:[-1,-10,29,10],objets2D:[]},window.sortieHtml=!0,window.est_diaporama=!1,window.randint=Lw,window.texNombre=Gw,window.nombreDecimal=function(t,e=!1){return jw(e?zw(t,1):zw(t))},window.calcul=zw,window.numId=0,window.angleScratchTo2d=function(t){let e=90-t;return e<-180&&(e+=360),$A(e)},window.appartientSegment=function(t,e,r){const n=(r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y),i=(t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y),s=(r.x-e.x)**2+(r.y-e.y)**2;return 0===n&&i>0&&i<s},window.appartientDroite=sE,window.appartientDemiDroite=function(t,e,r){const n=(r.x-e.x)*(t.y-e.y)-(t.x-e.x)*(r.y-e.y),i=(t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y);return 0===n&&i>0},window.scratchblock=function(t){const e=/[\\{}]/,r=/[[]<>]/,n=/[{ ]/,i=function(t,s,o){let a,u,l,c,p,h=[],f=[],d=[],m=[];const g=function(t){let e;return"}"===t[0]?"}":(e=t.split(n)[0],e)}(t.substring(s));switch(g.substring(0,5)){case"\\bloc":switch(u=g.split("{")[0],a=u.length,u=u.substring(6),o++,u){case"stop":f=i(t,s+a+1,o),d=i(t,f[1],f[2]),h=[`${f[0]} ${d[0]} `,d[1],d[2]];break;case"move":case"control":f=i(t,s+a+1,o),h=[f[0],f[1],f[2]];break;case"list":f=i(t,s+a+1,o),h=[f[0]+" :: list",f[1],f[2]];break;case"init":f=i(t,s+a+1,o),h=[f[0],f[1],f[2]];break;case"space\n":h=["\n",11+s,--o];break;case"if":for(f=i(t,s+a+1,o),d=i(t,f[1],f[2]),m=i(t,d[1],d[2]),h=[`${f[0]} ${d[0]} ${m[0]}`,m[1]+1,m[2]-1],c=(o=h[2])+1,p=t.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)f=i(t,h[1],c),h[0]+=" "+f[0],h[1]=f[1],c=f[2];h[0]+=" fin";break;case"ifelse":for(f=i(t,s+a+1,o),d=i(t,f[1],f[2]),m=i(t,d[1],d[2]),h=[`${f[0]} ${d[0]} ${m[0]}`,m[1]+1,m[2]-1],c=(o=h[2])+1,p=t.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)f=i(t,h[1],c),h[0]+=" "+f[0],h[1]=f[1],c=f[2];for(h[0]+=" sinon",c=o+1,p=t.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)f=i(t,h[1],c),h[0]+=" "+f[0],h[1]=f[1],c=f[2];h[0]+=" fin";break;case"repeat":for(f=i(t,s+a+1,o),"indéfiniment"!==f[0].split(" ")[1]?"jusqu'à"!==f[0].split(" ")[1]?(d=i(t,f[1],f[2]),m=i(t,d[1],d[2]),h=[`${f[0]} ${d[0]} ${m[0]}`,m[1]+1,m[2]-1],o=h[2]):(d=i(t,f[1],f[2]),h=[`${f[0]} ${d[0]} `,d[1]+1,d[2]-1],o=h[2]):(h=[`${f[0]} `,f[1]+1,f[2]-1],o=h[2]),c=o+1,p=t.substring(h[1]).indexOf("{")+h[1],h[1]=p+1,h[0]+="\n";c>o;)f=i(t,h[1],c),h[0]+=" "+f[0],h[1]=f[1],c=f[2];h[0]+=" fin";break;default:f=i(t,s+a+1,o),h=[f[0],f[1],f[2]]}break;case"\\oval":switch(u=g.split("{")[0],a=u.length,u=u.substring(5),o++,"*"===u.charAt(u.length-1)?(l=!0,u=u.substring(0,u.length-1)):l=!1,u){case"num":f=i(t,s+a+1,o),h=isNaN(f[0])&&f[0].indexOf(r)?[`[${f[0]}]`,f[1]+1,f[2]-1]:[`(${f[0]})`,f[1]+1,f[2]-1];break;case"moreblocks":f=i(t,s+a+1,o),h=l?[`(${f[0]} v)`,f[1],f[2]]:[`(${f[0]})`,f[1],f[2]];break;case"variable":f=i(t,s+a+1,o),h=l?[`(${f[0]} v)`,f[1]+1,f[2]-1]:[`(${f[0]})`,f[1]+1,f[2]-1];break;case"sound":f=i(t,s+a+1,o),h=l?[`(${f[0]} v :: sound)`,f[1]+1,f[2]-1]:[`(${f[0]} :: sound)`,f[1]+1,f[2]-1];break;case"sensing":f=i(t,s+a+1,o),h=l?[`(${f[0]} v :: sensing)`,f[1]+1,f[2]-1]:[`(${f[0]} :: sensing)`,f[1]+1,f[2]-1];break;case"operator":for(f=i(t,s+a+1,o),d=i(t,f[1],f[2]),h=[`(${f[0]} ${d[0]}`,d[1],d[2]];"}"!==t.charAt(d[1]);)d=i(t,d[1],d[2]),h[0]+=" "+d[0];h[0]+=")",h[1]=d[1]+1,h[2]=d[2]-1;break;default:f=i(t,s+a+1,o),h=l?[`(${f[0]} v)`,f[1]+1,f[2]-1]:[`(${f[0]})`,f[1]+1,f[2]-1]}break;case"\\bool":switch(u=g.split(/\{ /)[0],a=u.length,u=u.substring(5,9),u){case"oper":for(o++,f=i(t,s+a+1,o),d=i(t,f[1],f[2]),h=[`<${f[0]} ${d[0]}`,d[1],d[2]];"}"!==t.charAt(d[1]);)d=i(t,d[1],d[2]),h[0]+=" "+d[0];h[0]+=" :: operators boolean>",h[1]=d[1]+1,h[2]=d[2]-1;break;case"empt":h=["< vide :: operators boolean>",s+a+1,o];break;case"sens":for(o++,f=i(t,s+a+1,o),d=i(t,f[1],f[2]),h=[`<${f[0]} ${d[0]}`,d[1],d[2]];"}"!==t.charAt(d[1]);)d=i(t,d[1],d[2]),h[0]+=" "+d[0];h[0]+=" :: sensing>",h[1]=d[1]+1,h[2]=d[2]-1;break;case"list":for(o++,f=i(t,s+a+1,o),d=i(t,f[1],f[2]),h=[`<${f[0]} ${d[0]}`,d[1],d[2]];"}"!==t.charAt(d[1]);)d=i(t,d[1],d[2]),h[0]+=" "+d[0];h[0]+=" :: list>",h[1]=d[1]+1,h[2]=d[2]-1;break;default:f=i(t,s+a+1,o),h=[`<${f[0]}>`,f[1],f[2]]}break;case"\\init":u=g.split("{")[0],a=u.length,o++,f=i(t,s+a+1,o),d=i(t,f[1],f[2]),h=[`${f[0]} ${d[0]} `,d[1],d[2]];break;case"\\name":for(u=g.split("{")[0],a=u.length,o++,f=i(t,s+a+1,o),d=i(t,f[1],f[2]),h=[`${f[0]} ${d[0]}`,d[1],d[2]];"}"!==t.charAt(d[1]);)d=i(t,d[1],d[2]),h[0]+=" "+d[0];h[1]=d[1]+1,h[2]=d[2]-1;break;default:switch(g){case"}":h=[" ",1+s,--o];break;case"\\begin":o++,"["===t.substring(15+s)[0]?s=t.substring(15+s).indexOf("]")+16+s:s+=15,h=[" \x3c!-- Code Scratch  --\x3e",s,o];break;case"\\end":h=[" \x3c!-- Fin du Code Scratch  --\x3e\n",13+s,--o];break;case"\\turnleft":h=["gauche ",11+s,o];break;case"\\turnright":h=["droite ",12+s,o];break;case"\\greenflag":h=[" @greenFlag ",10+s,o];break;case"\\selectmenu":o++,f=i(t,12+s,o),h=[`[${f[0]} v]`,f[1]+1,f[2]-1];break;default:u=t.substring(s).split(e)[0],h=[u,u.length+s,o]}}return h};let s,o,a="",u=[],l=0;if((t.match(/\{/g)||[]).length!==(t.match(/\}/g)||[]).length)return console.log("Il n'y a pas le même nombre de { que de }. Je préfère m'arrêter."),!1;if(sortieHtml){for(a="<pre class='blocks'>",o=0,s=!1;!s;)u=i(t,o,l),a+=u[0],o=u[1],l=u[2],0===l&&(s=!0);a+="</pre>\n"}else a=t;return a},window.motifs=function(t){switch(t){case 0:return"north east lines";case 1:return"horizontal lines";case 2:return"vertical lines";case 3:return"dots";case 4:return"crosshatch dots";case 5:return"fivepointed stars";case 6:return"sixpointed stars";case 7:return"bricks";case 8:return"checkerboard";case 9:return"grid";case 10:return"crosshatch";default:return"north east lines"}},window.nomVecteurParPosition=IE,window.point=Jw,window.tracePoint=tE,window.tracePointSurDroite=rE,window.milieu=nE,window.pointSurSegment=iE,window.pointSurCercle=function(t,e,r,n="above"){return"number"!=typeof e&&(e=Lw(-180,180)),Jw(t.centre.x+t.rayon*Math.cos(Math.radians(e)),t.centre.y+t.rayon*Math.sin(Math.radians(e)),r,n)},window.pointSurDroite=oE,window.pointIntersectionDD=aE,window.pointAdistance=uE,window.labelPoint=cE,window.barycentre=pE,window.droite=fE,window.droiteParPointEtVecteur=dE,window.droiteParPointEtParallele=mE,window.droiteParPointEtPerpendiculaire=gE,window.droiteHorizontaleParPoint=function(t,e="",r="black"){return yE(t,0,e,r)},window.droiteVerticaleParPoint=function(t,e="",r){return dE(t,TE(0,1),e,r)},window.droiteParPointEtPente=yE,window.mediatrice=vE,window.codageMediatrice=xE,window.codageMilieu=function(...t){return new _E(...t)},window.constructionMediatrice=function(...t){return new wE(...t)},window.bissectrice=EE,window.codageBissectrice=function(...t){return new SE(...t)},window.constructionBissectrice=function(...t){return new AE(...t)},window.polyline=ME,window.pave=function(...t){return new kE(...t)},window.vecteur=TE,window.segment=RE,window.segmentAvecExtremites=function(...t){const e=RE(...t);return e.styleExtremites="|-|",e},window.demiDroite=LE,window.demiDroiteAvecExtremite=function(t,e,r="black"){const n=RE(t,iE(e,t,-10),r);return n.styleExtremites="|-",n},window.polygone=qE,window.polygoneAvecNom=BE,window.polygoneRegulier=UE,window.polygoneRegulierIndirect=$E,window.carre=zE,window.carreIndirect=FE,window.codageCarre=function(...t){return new GE(...t)},window.polygoneRegulierParCentreEtRayon=function(t,e,r,n="black"){const i=[];i[0]=Jw(zw(t.x+e),t.y);for(let e=1;e<r;e++)i[e]=dS(i[e-1],t,zw(-360/r));return qE(i,n)},window.triangle2points2longueurs=VE,window.triangle2points2angles=function(t,e,r,n,i=1){1===i?n*=-1:r*=-1;const s=dS(iE(t,e,1),t,r),o=dS(iE(e,t,1),e,n),a=fE(t,s),u=fE(e,o);return a.isVisible=!1,u.isVisible=!1,qE(t,e,aE(a,u,"C"))},window.triangle2points1angle1longueur=function(t,e,r,n,i=1){return r=1===i?Math.abs(r)%180:-Math.abs(r)%180,qE(t,e,dS(iE(t,e,n),t,r))},window.triangle2points1angle1longueurOppose=function(t,e,r,n,i=1){let s;r=i%2==1?Math.abs(r)%180:-Math.abs(r)%180;const o=fE(t,e),a=dS(o,t,r),u=YE(e,n);return o.isVisible=!1,a.isVisible=!1,u.isVisible=!1,s=ZE(a,u,"",i+1>>1==1?1:2),qE(t,e,s)},window.nommePolygone=HE,window.deplaceLabel=function(t,e,r){for(let n=0;n<t.listePoints.length;n++)for(const i in e)t.listePoints[n].nom===e[i]&&(t.listePoints[n].positionLabel=r,cE(t.listePoints[n]))},window.aireTriangle=function(t){if(3!==t.listePoints.length)return!1;const e=t.listePoints[0],r=t.listePoints[1],n=t.listePoints[2];return.5*Math.abs((r.x-e.x)*(n.y-e.y)-(n.x-e.x)*(r.y-e.y))},window.cercle=YE,window.ellipse=function(...t){return new XE(...t)},window.pointIntersectionLC=ZE,window.pointIntersectionCC=KE,window.cercleCentrePoint=function(...t){return new JE(...t)},window.arc=tS,window.arcPointPointAngle=function(...t){return new eS(...t)},window.traceCompas=rS,window.courbeDeBezier=function(...t){return new nS(...t)},window.segmentMainLevee=function(t,e,r,n="black",i=1){return new iS(t,e,r,n,i)},window.cercleMainLevee=function(t,e,r,n="black",i=1){return new sS(t,e,r,n,i)},window.droiteMainLevee=function(t,e,r,n="black",i=1){return new oS(t,e,r,n,i)},window.polygoneMainLevee=function(t,e,r="black"){return new aS(t,e,r)},window.arcMainLevee=function(t,e,r,n,i=!1,s="none",o="black",a=.2){return new uS(t,e,r,n,i,s,o,a)},window.dansLaCibleCarree=function(t,e,r,n,i){const s=i[0].charCodeAt(0)-64,o=Math.floor(4*n),a=parseInt(i[1]),u=zw(Lw(-o,o)/10),l=zw(Lw(-o,o)/10),c=n/2;return a>r||s>r?"Cette cellule n'existe pas dans la cible":[Uw(t+u-s*n+c+r*c,2),Uw(e+l-2*a*c+(r+1)*c,2)]},window.dansLaCibleRonde=function(t,e,r,n,i){const s=i[0].charCodeAt(0)-64,o=Math.floor(4*n),a=parseInt(i[1]),u=zw(Lw(-o,o)/10),l=zw(45*(s-1)-157.5+Lw(-20,20)),c=zw(n/2+(a-1)*n+u),p=xS(Jw(1,0),Jw(0,0),l,c);return p.x+=t,p.y+=e,a>r||s>8?"Cette cellule n'existe pas dans la cible":[Uw(p.x,2),Uw(p.y,2)]},window.cibleCarree=function({x:t=0,y:e=0,rang:r=4,num:n,taille:i=.6}){return new lS({x:t,y:e,rang:r,num:n,taille:i})},window.cibleRonde=function({x:t=0,y:e=0,rang:r=3,num:n=1,taille:i=.3}){return new cS({x:t,y:e,rang:r,num:n,taille:i})},window.cibleCouronne=function({x:t=0,y:e=0,taille:r=5,depart:n=0,nbDivisions:i=18,nbSubDivisions:s=3,semi:o=!1,label:a=!0}){return new pS({x:t,y:e,taille:r,depart:n,nbDivisions:i,nbSubDivisions:s,semi:o,label:a})},window.translation=hS,window.translation2Points=fS,window.rotation=dS,window.sens_de_rotation=function(t,e,r){return new mS(t,e,r)},window.homothetie=gS,window.symetrieAxiale=yS,window.distancePointDroite=function(t,e){return DA(t,vS(t,e),9)},window.projectionOrtho=vS,window.affiniteOrtho=bS,window.similitude=xS,window.translationAnimee=function(...t){return new _S(...t)},window.rotationAnimee=function(...t){return new wS(...t)},window.homothetieAnimee=function(...t){return new ES(...t)},window.symetrieAnimee=function(...t){return new SS(...t)},window.affiniteOrthoAnimee=function(...t){return new AS(...t)},window.montrerParDiv=NS,window.cacherParDiv=MS,window.afficherTempo=kS,window.afficherTempoId=function(t,e=1,r=5,n="Infinity"){let i=1;const s=setInterval((function(){if(document.getElementById(t))if(clearInterval(s),MS(t),1===n)setTimeout((function(){NS(t)}),1e3*e);else{const s=setInterval((function(){MS(t)}),1e3*r);setTimeout((function(){NS(t);const e=setInterval((function(){NS(t),i++,"number"==typeof n&&i>=n&&(clearInterval(s),clearInterval(e))}),1e3*r)}),1e3*e)}}),100)},window.afficherUnParUn=function(t,e=1,r="Infinity",n=5){let i=e;const s=t.length*e+n;for(const n of t)kS(n,i,s,r),i+=e},window.medianeTriangle=CS,window.centreGraviteTriangle=function(t,e,r,n=""){const i=CS(e,t,r),s=CS(t,e,r);i.isVisible=!1,s.isVisible=!1;const o=aE(i,s);return Jw(o.x,o.y,"",n)},window.hauteurTriangle=TS,window.CodageHauteurTriangle=OS,window.codageHauteurTriangle=function(...t){return new OS(...t)},window.codageMedianeTriangle=function(...t){return new IS(...t)},window.orthoCentre=function(t,e,r,n="",i="above"){const s=TS(e,t,r),o=TS(t,e,r);s.isVisible=!1,o.isVisible=!1;const a=aE(s,o);return Jw(a.x,a.y,n,i)},window.centreCercleCirconscrit=PS,window.codageAngleDroit=LS,window.afficheLongueurSegment=qS,window.texteSurSegment=US,window.afficheMesureAngle=function(...t){return new $S(...t)},window.afficheCoteSegment=FS,window.codeSegment=VS,window.codeSegments=HS,window.codeAngle=YS,window.nomAngleSaillantParPosition=function(t,e,r,n){return new XS(t,e,r,n,1)},window.nomAngleRentrantParPosition=function(t,e,r,n){return new XS(t,e,r,n,-1)},window.droiteGraduee=function(...t){return new ZS(...t)},window.droiteGraduee2=function(...t){return new KS(...t)},window.axes=QS,window.labelX=eA,window.labelY=nA,window.grille=sA,window.grilleHorizontale=aA,window.grilleVerticale=function(...t){return new uA(...t)},window.seyes=function(...t){return new lA(...t)},window.repere=function(...t){return new cA(...t)},window.repere2=function(...t){return new pA(...t)},window.pointDansRepere=hA,window.traceGraphiqueCartesien=function(...t){return new fA(...t)},window.traceBarre=function(...t){return new dA(...t)},window.traceBarreHorizontale=function(...t){return new mA(...t)},window.lectureImage=function(...t){return new gA(...t)},window.lectureAntecedent=function(...t){return new yA(...t)},window.courbe=bA,window.courbe2=_A,window.courbeInterpolee=function(...t){return new EA(...t)},window.graphiqueInterpole=function(...t){return new SA(...t)},window.imageInterpolee=function(t,e){const r=t[0][0],n=t[0][1],i=t[1][0],s=t[1][1];return wA(n,s,zw((e-r)/(i-r)))},window.antecedentInterpole=function(t,e){const r=t[0][0],n=t[0][1],i=t[1][0],s=t[1][1];return function(t,e,r,n,i=.01){let s,o;for(t>e&&(s=t,t=e,e=s),s=(e+t)/2,o=r(s);Math.abs(o-n)>i;)r(t)<r(e)?o>n?e=s:t=s:o>n?t=s:e=s,s=(t+e)/2,o=r(s);return s}(r,i,(t=>wA(n,s,zw((t-r)/(i-r)))),e,.01)},window.crochetD=function(...t){return new AA(...t)},window.crochetG=function(...t){return new NA(...t)},window.intervalle=function(t,e,r="blue",n=0){const i=RE(Jw(t.x,t.y+n),Jw(e.x,e.y+n));return i.epaisseur=3,i.color=r,i},window.texteParPoint=kA,window.texteParPosition=CA,window.latexParPoint=TA,window.latexParCoordonnees=IA,window.fractionParPosition=RA,window.print2d=function(...t){const e=[];for(let r=0;r<t.length;r++)e.push(LA(t[r]));return e},window.longueur=DA,window.norme=qA,window.angle=BA,window.angleOriente=UA,window.angleradian=function(t,e,r){const n=DA(e,t),i=DA(e,r),s=DA(t,r);return zw(Math.acos((s**2-n**2-i**2)/(-2*n*i)),2)},window.creerLutin=function(...t){return new zA(...t)},window.avance=function(t,e=mathalea.lutin){const r=e.x,n=e.y;e.x=zw(e.x+t/mathalea.unitesLutinParCm*Math.cos(Math.radians(e.orientation))),e.y=zw(e.y+t/mathalea.unitesLutinParCm*Math.sin(Math.radians(e.orientation))),e.historiquePositions.push([e.x,e.y]),e.crayonBaisse&&e.listeTraces.push([r,n,e.x,e.y,e.color,e.epaisseur,e.pointilles,e.opacite])},window.baisseCrayon=function(t=mathalea.lutin){t.crayonBaisse=!0},window.leveCrayon=function(t=mathalea.lutin){t.crayonBaisse=!1},window.orienter=function(t,e=mathalea.lutin){e.orientation=$A(t)},window.tournerG=function(t,e=mathalea.lutin){e.orientation=$A(e.orientation+t)},window.tournerD=function(t,e=mathalea.lutin){e.orientation=$A(e.orientation-t)},window.allerA=function(t,e,r=mathalea.lutin){const n=r.x,i=r.y;r.x=zw(t/mathalea.unitesLutinParCm),r.y=zw(e/mathalea.unitesLutinParCm),r.historiquePositions.push([r.x,r.y]),r.crayonBaisse&&r.listeTraces.push([n,i,r.x,r.y,r.color,r.epaisseur,r.pointilles,r.opacite])},window.mettrexA=function(t,e=mathalea.lutin){const r=e.x;e.x=zw(t/mathalea.unitesLutinParCm),e.historiquePositions.push([e.x,e.y]),e.crayonBaisse&&e.listeTraces.push([r,e.y,e.x,e.y,e.color,e.epaisseur,e.pointilles])},window.mettreyA=function(t,e=mathalea.lutin){const r=e.y;e.y=zw(t/mathalea.unitesLutinParCm),e.historiquePositions.push([e.x,e.y]),e.crayonBaisse&&e.listeTraces.push([e.x,r,e.x,e.y,e.color,e.epaisseur,e.pointilles])},window.ajouterAx=function(t,e=mathalea.lutin){const r=e.x;e.x+=zw(t/mathalea.unitesLutinParCm),e.historiquePositions.push([e.x,e.y]),e.crayonBaisse&&e.listeTraces.push([r,e.y,e.x,e.y,e.color,e.epaisseur,e.pointilles])},window.ajouterAy=function(t,e=mathalea.lutin){const r=e.y;e.y+=zw(t/mathalea.unitesLutinParCm),e.historiquePositions.push([e.x,e.y]),e.crayonBaisse&&e.listeTraces.push([e.x,r,e.x,e.y,e.color,e.epaisseur,e.pointilles])},window.afficherCrayon=function(...t){return new FA(...t)},window.codeSvg=function(t,e,r,...n){let i="";const s=t[0],o=-1*t[3],a=t[2],u=-1*t[1];i=`<svg width="${(a-s)*e}" height="${(u-o)*e}" viewBox="${s*e} ${o*e} ${(a-s)*e} ${(u-o)*e}" xmlns="http://www.w3.org/2000/svg">\n`;for(const t of n){if(Array.isArray(t))for(let n=0;n<t.length;n++)try{t[n].isVisible&&(r&&void 0!==t[n].svgml?i+="\t"+t[n].svgml(e,mathalea.amplitude)+"\n":i+="\t"+t[n].svg(e)+"\n")}catch(t){}try{t.isVisible&&(r&&void 0!==t.svgml?i+="\t"+t.svgml(e,mathalea.amplitude)+"\n":i+="\t"+t.svg(e)+"\n")}catch(t){}}return i+="</svg>",i},window.codeTikz=function(t,e,r,...n){let i="";const s=t[0],o=-1*t[3],a=t[2],u=-1*t[1],l=sortieHtml;sortieHtml=!1,i+=1===e?"\\begin{tikzpicture}[baseline]\n":`\\begin{tikzpicture}[baseline,scale = ${e}]\n`,i+=`\\tikzset{\n    point/.style={\n      thick,\n      draw,\n      cross out,\n      inner sep=0pt,\n      minimum width=5pt,\n      minimum height=5pt,\n    },\n  }\n  \\clip (${s},${o}) rectangle (${a},${u});\n\n  \n\n`;for(const t of n){if(Array.isArray(t))for(let e=0;e<t.length;e++)try{t[e].isVisible&&(r&&void 0!==t[e].tikzml?i+="\t"+t[e].tikzml(mathalea.amplitude)+"\n":i+="\t"+t[e].tikz()+"\n")}catch(t){}try{t.isVisible&&(r&&void 0!==t.tikzml?i+="\t"+t.tikzml(mathalea.amplitude)+"\n":i+="\t"+t.tikz()+"\n")}catch(t){}}return i+="\\end{tikzpicture}\n",sortieHtml=l,i},window.mathalea2d=function({xmin:t=0,ymin:e=0,xmax:r=15,ymax:n=6,pixelsParCm:i=20,scale:s=1,optionsTikz:o,mainlevee:a=!1,amplitude:u=1}={},...l){let c="";if(sortieHtml){c=`<svg class="mathalea2d" width="${(r-t)*i}" height="${(n-e)*i}" viewBox="${t*i} ${-n*i} ${(r-t)*i} ${(n-e)*i}" xmlns="http://www.w3.org/2000/svg">\n`;for(const t of l){if(Array.isArray(t))for(let e=0;e<t.length;e++)try{t[e].isVisible&&(a&&void 0!==t[e].svgml?c+="\t"+t[e].svgml(i,u)+"\n":c+="\t"+t[e].svg(i)+"\n")}catch(t){}try{t.isVisible&&(a&&void 0!==t.svgml?c+="\t"+t.svgml(i,u)+"\n":c+="\t"+t.svg(i)+"\n")}catch(e){console.log("le try tout seul",e.message,t)}}c+="\n</svg>",c=c.replace(/\\thickspace/gm," ")}else{const i=[];if(void 0!==o&&("string"==typeof o?i.push(o):o.forEach((t=>i.push(t)))),1===s){c="\\begin{tikzpicture}[baseline";for(let t=0;t<i.length;t++)c+=`,${i[t]}`;c+="]\n"}else{c=`\\begin{tikzpicture}[baseline,scale = ${s}`;for(let t=0;t<i.length;t++)c+=`,${i[t]}`;c+="]\n"}c+=`\n    \\tikzset{\n      point/.style={\n        thick,\n        draw,\n        cross out,\n        inner sep=0pt,\n        minimum width=5pt,\n        minimum height=5pt,\n      },\n    }\n    \\clip (${t},${e}) rectangle (${r},${n});\n\n\n    `;for(const t of l){if(Array.isArray(t))for(let e=0;e<t.length;e++)try{t[e].isVisible&&(a&&void 0!==t[e].tikzml?c+="\t"+t[e].tikzml(u)+"\n":c+="\t"+t[e].tikz()+"\n")}catch(t){}try{t.isVisible&&(a&&void 0!==t.tikzml?c+="\t"+t.tikzml(u)+"\n":c+="\t"+t.tikz()+"\n")}catch(t){}}c+="\n\\end{tikzpicture}"}return c},window.labyrinthe=function(){return new VA},window.pavage=function(){return new jA},window.anim=new HA,document.addEventListener("DOMContentLoaded",(t=>{$(".ui.dropdown").dropdown()}));const XA=document.getElementById("submit"),ZA=document.getElementById("telecharger"),KA=document.getElementById("url"),JA=document.getElementById("containerIep");let QA='\n<?xml version="1.0" encoding="UTF-8"?>\n<INSTRUMENPOCHE version="2">\n</INSTRUMENPOCHE>\n';const tN=document.getElementById("editeur"),eN=ur()(tN,{value:"",mode:"javascript",lineNumbers:!0,autofocus:!0,theme:"monokai",autoCloseBrackets:!0,showHint:!0,extraKeys:{"Ctrl-Space":"autocomplete"},matchBrackets:!0,lineWrapping:!0});eN.setSize(500,550),cmResize(eN),document.getElementById("xmlSrc").style.width="500px",document.getElementById("xmlSrc").style.height="500px";const rN=new URL(window.location.href);function nN(){window.localStorage.setItem("Script Mathalea 2D IEP",eN.getValue()),ZA&&(ZA.style.visibility="visible"),KA&&(KA.style.visibility="visible"),window.anim=new HA,window.mathalea={sortieNB:!1,anglePerspective:30,coeffPerspective:.5,pixelsParCm:20,scale:1,unitesLutinParCm:50,mainlevee:!1,amplitude:1,fenetreMathalea2d:[-1,-10,29,10],objets2D:[]},window.sortieHtml=!0,window.est_diaporama=!1,window.numId=0;const t=new(YA())({ecmaVer:10,sandBox:!0});t.import({anim:window.anim,mathalea:window.mathalea,randint:window.randint,texNombre:window.texNombre,angleScratchTo2d:window.angleScratchTo2d,appartientSegment:window.appartientSegment,appartientDroite:window.appartientDroite,appartientDemiDroite:window.appartientDemiDroite,scratchblock:window.scratchblock,motifs:window.motifs,nomVecteurParPosition:window.nomVecteurParPosition,point:window.point,tracePoint:window.tracePoint,tracePointSurDroite:window.tracePointSurDroite,milieu:window.milieu,pointSurSegment:window.pointSurSegment,pointSurCercle:window.pointSurCercle,pointSurDroite:window.pointSurDroite,pointIntersectionDD:window.pointIntersectionDD,pointAdistance:window.pointAdistance,labelPoint:window.labelPoint,barycentre:window.barycentre,droite:window.droite,droiteParPointEtVecteur:window.droiteParPointEtVecteur,droiteParPointEtParallele:window.droiteParPointEtParallele,droiteParPointEtPerpendiculaire:window.droiteParPointEtPerpendiculaire,droiteHorizontaleParPoint:window.droiteHorizontaleParPoint,droiteVerticaleParPoint:window.droiteVerticaleParPoint,droiteParPointEtPente:window.droiteParPointEtPente,mediatrice:window.mediatrice,codageMediatrice:window.codageMediatrice,codageMilieu:window.codageMilieu,constructionMediatrice:window.constructionMediatrice,bissectrice:window.bissectrice,codageBissectrice:window.codageBissectrice,constructionBissectrice:window.constructionBissectrice,polyline:window.polyline,pave:window.pave,vecteur:window.vecteur,segment:window.segment,segmentAvecExtremites:window.segmentAvecExtremites,demiDroite:window.demiDroite,demiDroiteAvecExtremite:window.demiDroiteAvecExtremite,polygone:window.polygone,polygoneAvecNom:window.polygoneAvecNom,polygoneRegulier:window.polygoneRegulier,polygoneRegulierIndirect:window.polygoneRegulierIndirect,carre:window.carre,carreIndirect:window.carreIndirect,codageCarre:window.codageCarre,polygoneRegulierParCentreEtRayon:window.polygoneRegulierParCentreEtRayon,triangle2points2longueurs:window.triangle2points2longueurs,triangle2points2angles:window.triangle2points2angles,triangle2points1angle1longueur:window.triangle2points1angle1longueur,triangle2points1angle1longueurOppose:window.triangle2points1angle1longueurOppose,nommePolygone:window.nommePolygone,deplaceLabel:window.deplaceLabel,aireTriangle:window.aireTriangle,cercle:window.cercle,ellipse:window.ellipse,pointIntersectionLC:window.pointIntersectionLC,pointIntersectionCC:window.pointIntersectionCC,cercleCentrePoint:window.cercleCentrePoint,arc:window.arc,arcPointPointAngle:window.arcPointPointAngle,traceCompas:window.traceCompas,courbeDeBezier:window.courbeDeBezier,segmentMainLevee:window.segmentMainLevee,cercleMainLevee:window.cercleMainLevee,droiteMainLevee:window.droiteMainLevee,polygoneMainLevee:window.polygoneMainLevee,arcMainLevee:window.arcMainLevee,dansLaCibleCarree:window.dansLaCibleCarree,dansLaCibleRonde:window.dansLaCibleRonde,cibleCarree:window.cibleCarree,cibleRonde:window.cibleRonde,cibleCouronne:window.cibleCouronne,translation:window.translation,translation2Points:window.translation2Points,rotation:window.rotation,sens_de_rotation:window.sens_de_rotation,homothetie:window.homothetie,symetrieAxiale:window.symetrieAxiale,distancePointDroite:window.distancePointDroite,projectionOrtho:window.projectionOrtho,affiniteOrtho:window.affiniteOrtho,similitude:window.similitude,translationAnimee:window.translationAnimee,rotationAnimee:window.rotationAnimee,homothetieAnimee:window.homothetieAnimee,symetrieAnimee:window.symetrieAnimee,affiniteOrthoAnimee:window.affiniteOrthoAnimee,montrerParDiv:window.montrerParDiv,cacherParDiv:window.cacherParDiv,afficherTempo:window.afficherTempo,afficherTempoId:window.afficherTempoId,afficherUnParUn:window.afficherUnParUn,medianeTriangle:window.medianeTriangle,centreGraviteTriangle:window.centreGraviteTriangle,hauteurTriangle:window.hauteurTriangle,CodageHauteurTriangle:window.CodageHauteurTriangle,codageHauteurTriangle:window.codageHauteurTriangle,codageMedianeTriangle:window.codageMedianeTriangle,orthoCentre:window.orthoCentre,centreCercleCirconscrit:window.centreCercleCirconscrit,codageAngleDroit:window.codageAngleDroit,afficheLongueurSegment:window.afficheLongueurSegment,texteSurSegment:window.texteSurSegment,afficheMesureAngle:window.afficheMesureAngle,afficheCoteSegment:window.afficheCoteSegment,codeSegment:window.codeSegment,codeSegments:window.codeSegments,codeAngle:window.codeAngle,nomAngleSaillantParPosition:window.nomAngleSaillantParPosition,nomAngleRentrantParPosition:window.nomAngleRentrantParPosition,droiteGraduee:window.droiteGraduee,droiteGraduee2:window.droiteGraduee2,axes:window.axes,labelX:window.labelX,labelY:window.labelY,grille:window.grille,grilleHorizontale:window.grilleHorizontale,grilleVerticale:window.grilleVerticale,seyes:window.seyes,repere:window.repere,repere2:window.repere2,pointDansRepere:window.pointDansRepere,traceGraphiqueCartesien:window.traceGraphiqueCartesien,traceBarre:window.traceBarre,traceBarreHorizontale:window.traceBarreHorizontale,lectureImage:window.lectureImage,lectureAntecedent:window.lectureAntecedent,courbe:window.courbe,courbe2:window.courbe2,courbeInterpolee:window.courbeInterpolee,graphiqueInterpole:window.graphiqueInterpole,imageInterpolee:window.imageInterpolee,antecedentInterpole:window.antecedentInterpole,crochetD:window.crochetD,crochetG:window.crochetG,intervalle:window.intervalle,texteParPoint:window.texteParPoint,texteParPosition:window.texteParPosition,latexParPoint:window.latexParPoint,latexParCoordonnees:window.latexParCoordonnees,fractionParPosition:window.fractionParPosition,print2d:window.print2d,longueur:window.longueur,norme:window.norme,angle:window.angle,angleOriente:window.angleOriente,angleradian:window.angleradian,creerLutin:window.creerLutin,avance:window.avance,baisseCrayon:window.baisseCrayon,leveCrayon:window.leveCrayon,orienter:window.orienter,tournerG:window.tournerG,tournerD:window.tournerD,allerA:window.allerA,mettrexA:window.mettrexA,mettreyA:window.mettreyA,ajouterAx:window.ajouterAx,ajouterAy:window.ajouterAy,afficherCrayon:window.afficherCrayon,codeSvg:window.codeSvg,codeTikz:window.codeTikz,mathalea2d:window.mathalea2d,labyrinthe:window.labyrinthe,pavage:window.pavage}),ZA&&(ZA.style.visibility="visible"),KA&&(KA.style.visibility="visible"),window.mathalea.objets2D=[],t.run(eN.getValue()),t.run("exports.anim = anim"),t.run("exports.codeSvgFigure = codeSvg(mathalea.fenetreMathalea2d, mathalea.pixelsParCm, mathalea.mainlevee, mathalea.objets2D)"),QA=window.anim.script();const e=t.exports.codeSvgFigure;document.getElementById("svg").innerHTML=e,document.getElementById("xmlSrc").value=QA,or(JA,QA,{autostart:!0}).then((t=>{document.querySelectorAll("svg.svgIep").forEach((t=>{}))})).catch((t=>{console.log(t)})),document.getElementById("telecharger")&&(ZA.onclick=function(){!function(t,e){const r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download","mathalea2d.iep"),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(eN.getValue())}),document.getElementById("url")&&(KA.onclick=function(){const t=encodeURIComponent(eN.getValue());window.open(`/iep.html?script=${t}`)})}function iN(t){try{t.preventDefault(),t.stopPropagation();const e=document.getElementById("xmlSrc");or(JA,e.value,{autostart:!0}).then((t=>{document.querySelectorAll("svg.svgIep").forEach((t=>{}))})).catch((t=>{console.log(t)}))}catch(t){console.log("Plantage à l'affichage, xml probablement malformé"),console.error(t)}}rN.searchParams.get("url")?fetch(`/assets/iep/${rN.searchParams.get("url")}.iep`).then((function(t){return t.ok?t.text():`//Fichier /fichiers/iep/${rN.searchParams.get("url")}.iep non trouvé`})).then((t=>{eN.setValue(t),nN()})):rN.searchParams.get("script")?(eN.setValue(decodeURIComponent(rN.searchParams.get("script"))),nN()):window.localStorage.getItem("Script Mathalea 2D IEP")&&(eN.setValue(window.localStorage.getItem("Script Mathalea 2D IEP")),XA.click()),eN.on("inputRead",(function(t,e){";"!==e.text[0]&&" "!==e.text[0]&&ur().commands.autocomplete(t,null,{completeSingle:!1})})),XA.addEventListener("click",nN),document.getElementById("previewBtn").addEventListener("click",iN,!1);const sN=document.getElementById("xmlSrc");sN.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}),!1),sN.addEventListener("drop",(function(t){t.stopPropagation(),t.preventDefault();try{const e=t.dataTransfer.files;if(e&&e[0]){const t=e[0];if(console.log("On récupère le fichier ",t.name),".xml"===t.name.substr(-4)){const e=new FileReader;e.onload=function(t){document.getElementById("xmlSrc").value=t.target.result,iN(t)},e.readAsText(t)}else console.log("On ne gère que les fichiers xml")}}catch(t){console.log("Plantage à la récupération du fichier"),console.log(t)}}),!1)})()})();