(self.webpackChunkmathalea=self.webpackChunkmathalea||[]).push([[10229],{62733:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(63861);class o{constructor(e,t){this.mesure=e,this.unite=t;const r=s(t);this.puissanceUnite=r.puissanceUnite,this.uniteDeReference=r.uniteDeReference,this.prefixe=r.prefixe,this.puissancePrefixe=r.puissancePrefixe}convertirEn(e){const t=s(e);if(t.puissanceUnite===this.puissanceUnite&&t.uniteDeReference===this.uniteDeReference)return new o((0,n.n0o)(this.mesure*10**((this.puissancePrefixe-t.puissancePrefixe)*this.puissanceUnite)),e);console.error("Conversion impossible")}estEgal(e){const t=this.convertirEn(this.uniteDeReference),r=e.convertirEn(this.uniteDeReference);return t.mesure===r.mesure}}const i=o;function s(e){let t,r;e.indexOf("^")>0?(t=e.split("^")[1],r=e.split("^")[0]):(t=1,r=e);const n=r.substring(0,r.length-1),o=function(e){let t;switch(e){case"m":t=-3;break;case"c":t=-2;break;case"d":t=-1;break;case"":t=0;break;case"da":t=1;break;case"h":t=2;break;case"k":t=3;break;case"M":t=6;break;case"G":t=9;break;case"T":t=12;break;case"\\mu{}":t=-6;break;case"n":t=-9;break;default:t=!1}return t}(n);return{prefixe:n,uniteDeReference:e.substring(n.length),puissanceUnite:t,puissancePrefixe:o}}},23552:(e,t,r)=>{"use strict";r.d(t,{tt:()=>o,F4:()=>i,U2:()=>s,Ue:()=>c,MN:()=>a,Lp:()=>u,b0:()=>l});const n=(e,t)=>"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,t);function o(e,t){try{if(e&&e.style)if("string"==typeof t)(t=t.split(";")).forEach((function(t){if(t=/([\w]+):(.+)/.exec(t)){const[,r,n]=t;e.style[r]=n}}));else if("object"==typeof t)for(const r in t)n(t,r)&&(e.style[r]=t[r])}catch(r){console.error(r)}}function i(e,t){e.appendChild(window.document.createTextNode(t))}function s(e,t=!0){if("string"!=typeof e)throw TypeError("argument invalide");const r=document.getElementById(e);if(!r&&t)throw Error(`L’élément html ${e} n’existe pas`);return r}function c(e,t,r){const s=window.document.createElement(e);let c;try{if(t)for(c in t)n(t,c)&&("class"===c?s.className=t.class:"className"===c?s.className=t.className:"style"===c?o(s,t.style):s.setAttribute(c,t[c]))}catch(a){console.error(a)}return r&&i(s,r),s}function a(e,t,r,n){const o=c(t,r,n);return e.appendChild(o),o}async function u(e,t){const r=await fetch(e);t.innerHTML=await r.text()}async function l(e,t,r="div",n){return u(e,a(t,r,n))}},10229:(e,t,r)=>{"use strict";r.d(t,{Sq:()=>d,l3:()=>p,te:()=>h,G5:()=>x,Iq:()=>E,g9:()=>b});var n=r(62259),o=r(63861),i=r(27715),s=r(23552),c=r(70420),a=r(36475),u=r(62733),l=r(38072);function d(e){n.Do.isAmc?("AMCNum"!==e.amcType&&"AMCOpenNum"!==e.amcType||f(e),"qcmMono"!==e.amcType&&"qcmMult"!==e.amcType||m(e)):n.Do.isHtml&&!n.Do.isDiaporama&&("qcm"===e.interactifType&&m(e),"numerique"===e.interactifType&&f(e),"cliqueFigure"===e.interactifType&&function(e){document.addEventListener("exercicesAffiches",(()=>{for(let i=0;i<e.nbQuestions;i++)for(const t of e.figures[i]){const e=document.getElementById(t.id);e.hasMathaleaListener||(e.addEventListener("mouseover",r),e.addEventListener("mouseout",n),e.addEventListener("click",o),e.etat=!1,e.style.margin="10px",e.hasMathaleaListener=!0)}const t=document.querySelector(`#btnValidationEx${e.numeroExercice}-${e.id}`);function r(){this.style.border="1px solid #1DA962"}function n(){this.style.border="none"}function o(){this.etat?(this.style.border="none",this.addEventListener("mouseover",r),this.addEventListener("mouseout",n),this.addEventListener("click",o),this.etat=!1):(this.removeEventListener("mouseover",r),this.removeEventListener("mouseout",n),this.style.border="3px solid #f15929",this.etat=!0)}t&&(t.hasMathaleaListener||(t.addEventListener("click",(t=>{let i=0,c=0,a=0;for(let u=0;u<e.nbQuestions;u++){let t=(0,s.U2)(`resultatCheckEx${e.numeroExercice}Q${u}`,!1);if(!t){const r=(0,s.U2)(`exercice${e.numeroExercice}`);t=(0,s.MN)(r,"div",{id:`resultatCheckEx${e.numeroExercice}Q${u}`})}(0,s.tt)(t,"marginBottom: 20px"),t&&(t.innerHTML="");const l=[];let d=!1;for(const i of e.figures[u]){const e=document.getElementById(i.id);l.push(e),e.removeEventListener("mouseover",r),e.removeEventListener("mouseout",n),e.removeEventListener("click",o),e.hasMathaleaListener=!1,e.etat&&a++,e.etat!==i.solution&&(d=!0)}a>0&&!d?(t.innerHTML="😎",i++):(t.innerHTML="☹️",c++)}b(e,i,c)})),t.hasMathaleaListener=!0))}))}(e),"custom"===e.interactifType&&function(e){document.addEventListener("exercicesAffiches",(()=>{const t=document.querySelector(`#btnValidationEx${e.numeroExercice}-${e.id}`);t&&(t.hasMathaleaListener||(t.addEventListener("click",(r=>{let n=(0,s.U2)(`feedbackEx${e.numeroExercice}`,!1);if(!n){const t=(0,s.U2)(`exercice${e.numeroExercice}`);n=(0,s.MN)(t,"div",{id:`feedbackEx${e.numeroExercice}`})}(0,s.tt)(n,"marginBottom: 20px"),n&&(n.innerHTML=""),e.correctionInteractive(n),t.classList.add("disabled")})),t.hasMathaleaListener=!0))}))}(e),"mathLive"===e.interactifType&&function(e){const t=new c.ComputeEngine;document.addEventListener("exercicesAffiches",(()=>{const r=document.querySelector(`#btnValidationEx${e.numeroExercice}-${e.id}`);r&&(r.hasMathaleaListener||(r.addEventListener("click",(n=>{let o=0,i=0,s=!1;for(const r in e.autoCorrection){const n=document.querySelector(`#resultatCheckEx${e.numeroExercice}Q${r}`),u=document.getElementById(`champTexteEx${e.numeroExercice}Q${r}`);let l=[];l=Array.isArray(e.autoCorrection[r].reponse.valeur)?e.autoCorrection[r].reponse.valeur:[e.autoCorrection[r].reponse.valeur];let d="KO",m=u.value;for(let o of l)if("calcul"===e.autoCorrection[r].reponse.param.formatInteractif)"string"==typeof o&&(o=o.replaceAll("dfrac","frac")),"number"==typeof o&&(m=m.toString().replace(",",".")),t.same(t.canonical((0,c.parse)(m)),t.canonical((0,c.parse)(o)))&&(d="OK");else if("fractionPlusSimple"===e.autoCorrection[r].reponse.param.formatInteractif){const e=(0,c.parse)(m);if(e&&e[1].num&&e[2].num){new a.Z(parseInt(e[1].num),parseInt(e[2].num)).estUneSimplification(o)&&(d="OK")}}else if("fractionEgale"===e.autoCorrection[r].reponse.param.formatInteractif){const e=(0,c.parse)(m);if(e&&e[1].num&&e[2].num){new a.Z(parseInt(e[1].num),parseInt(e[2].num)).egal(o)&&(d="OK")}}else if("fraction"===e.autoCorrection[r].reponse.param.formatInteractif){const e=(0,c.parse)(m);if(e&&e[1].num&&e[2].num){const t=new a.Z(parseInt(e[1].num),parseInt(e[2].num));t.num===o.num&&t.den===o.den&&(d="OK")}}else if("longueur"===e.autoCorrection[r].reponse.param.formatInteractif){const e=g(m);e?e.estEgal(o)&&(d="OK"):d="essaieEncore"}else m===o&&(d="OK");"OK"===d?(n.innerHTML="😎",n.style.fontSize="large",o++):"essaieEncore"===d?(n.innerHTML="<em>Il faut saisir une longueur et une unité (cm par exemple).</em>",n.style.color="#f15929",n.style.fontWeight="bold",s=!0):(n.innerHTML="☹️",n.style.fontSize="large",i++),"essaieEncore"!==d&&(u.readOnly=!0)}s||(r.classList.add("disabled"),b(e,o,i))})),r.hasMathaleaListener=!0))}))}(e))}function m(e){console.log("Dans ExerciceQcm : ",e.nbQuestions,e.titre,e.numeroExercice,e.id),document.addEventListener("exercicesAffiches",(()=>{$(".ui.checkbox").checkbox();const t=document.querySelector(`#btnValidationEx${e.numeroExercice}-${e.id}`);t&&(t.hasMathaleaListener||(t.addEventListener("click",(r=>{let n=0,o=0;for(let t=0;t<e.nbQuestions;t++){let r,c=0,a=0,u=0;for(let n=0;n<e.autoCorrection[t].propositions.length;n++)e.autoCorrection[t].propositions[n].statut&&u++;const l=document.querySelector(`#resultatCheckEx${e.numeroExercice}Q${t}`);e.autoCorrection[t].propositions.forEach(((n,o)=>{const i=document.querySelector(`#labelEx${e.numeroExercice}Q${t}R${o}`),s=document.querySelector(`#checkEx${e.numeroExercice}Q${t}R${o}`);n.statut?(i.style.backgroundColor="rgba(123, 239, 178, 0.5)",s.checked&&(c++,r=o)):!0===s.checked&&(i.style.backgroundColor="rgba(217, 30, 24, 0.5)",a++,r=o)}));let d="positive";if(0===a&&c===u?(l.innerHTML="😎",n++):(l.innerHTML="☹️",d="error",o++),l.style.fontSize="large",r>-1&&e.autoCorrection[t].propositions[r].feedback){const n=(0,s.U2)(`feedbackEx${e.numeroExercice}Q${t}`,!1);n&&(n.innerHTML=""),(0,i.$N)({id:`feedbackEx${e.numeroExercice}Q${t}`,message:e.autoCorrection[t].propositions[r].feedback,type:d})}}document.querySelectorAll(`.ui.checkbox.ex${e.numeroExercice}`).forEach((function(e){e.classList.add("read-only")})),t.classList.add("disabled"),b(e,n,o)})),t.hasMathaleaListener=!0))}))}function p(e,t){let r="",i="",s="";if(s=n.Do.isHtml?"&emsp;":"\\qquad",void 0!==e.autoCorrection[t].options?e.autoCorrection[t].options.ordered||(e.autoCorrection[t].propositions=(0,o.o$l)(e.autoCorrection[t].propositions,e.autoCorrection[t].options.lastChoice)):e.autoCorrection[t].propositions=(0,o.o$l)(e.autoCorrection[t].propositions),function(e){let t=!1;for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;)e[r].texte===e[n].texte?(t=!0,e[r].statut?e.splice(n,1):e[n].statut?(e.splice(n,1),e[r].statut=!0):e.splice(n,1)):n++;return t}(e.autoCorrection[t].propositions)&&console.log("doublons trouvés"),!n.Do.isAmc){n.Do.isHtml?r+=`<br>  <form id="formEx${e.numeroExercice}Q${t}">`:r+="<br>";for(let o=0;o<e.autoCorrection[t].propositions.length;o++)n.Do.isHtml?r+=`<div class="ui checkbox ex${e.numeroExercice} monQcm">\n            <input type="checkbox" tabindex="0" class="hidden" id="checkEx${e.numeroExercice}Q${t}R${o}">\n            <label id="labelEx${e.numeroExercice}Q${t}R${o}">${e.autoCorrection[t].propositions[o].texte+s}</label>\n          </div>`:r+=`$\\square\\;$ ${e.autoCorrection[t].propositions[o].texte}`+s,e.autoCorrection[t].propositions[o].statut?i+=`$\\blacksquare\\;$ ${e.autoCorrection[t].propositions[o].texte}`+s:i+=`$\\square\\;$ ${e.autoCorrection[t].propositions[o].texte}`+s,void 0!==e.autoCorrection[t].options&&e.autoCorrection[t].options.vertical&&(r+="<br>",i+="<br>");n.Do.isHtml&&(r+=`<span id="resultatCheckEx${e.numeroExercice}Q${t}"></span>`,r+=`\n<div id="feedbackEx${e.numeroExercice}Q${t}"></span></form>`)}return{texte:r,texteCorr:i}}function f(e){console.log("Dans ExerciceNumerique : ",e.nbQuestions,e.titre,e.numeroExercice,e.id),document.addEventListener("exercicesAffiches",(()=>{const t=document.querySelector(`#btnValidationEx${e.numeroExercice}-${e.id}`);t&&(t.hasMathaleaListener||(t.addEventListener("click",(r=>{let n=0,o=0;for(const t in e.autoCorrection){const r=document.querySelector(`#resultatCheckEx${e.numeroExercice}Q${t}`),i=document.getElementById(`champTexteEx${e.numeroExercice}Q${t}`);i.value.replaceAll(" ","")===e.autoCorrection[t].reponse.valeur.toString().replaceAll(" ","").replaceAll(".",",")?(r.innerHTML="😎",n++):(r.innerHTML="☹️",o++),i.readOnly=!0,r.style.fontSize="large"}t.classList.add("disabled"),b(e,n,o)})),t.hasMathaleaListener=!0))}))}function h(e,t,{texte:r="",texteApres:o="",inline:i=!0,numeric:s=!0,indice:c}={}){return n.Do.isHtml&&e.interactif?`<div class="ui form ${i?"inline":""}" >\n      <div class="inline  field" >\n      <label>${r}</label>\n        <input type="text" ${s?'type="number" min="0" inputmode="numeric" pattern="[0-9]*"':""}  id="champTexteEx${e.numeroExercice}Q${t}${c||""}" >\n        <span>${o}</span>\n        <span id="resultatCheckEx${e.numeroExercice}Q${t}"></span>\n      </div>\n      </div>`:""}function x(e,t,r=""){return n.Do.isHtml&&e.interactif?""===r?`<math-field virtual-keyboard-mode=manual id="champTexteEx${e.numeroExercice}Q${t}"></math-field><div style="margin-top:10px" id="resultatCheckEx${e.numeroExercice}Q${t}"></div>`:`<math-field virtual-keyboard-mode=manual class="${r}" id="champTexteEx${e.numeroExercice}Q${t}"></math-field><div style="margin-top:10px" id="resultatCheckEx${e.numeroExercice}Q${t}"></div>`:""}function E(e,t,r,{digits:n=0,decimals:o=0,signe:i=!1,exposantNbChiffres:s=0,exposantSigne:c=!1,approx:a=0,formatInteractif:u="calcul"}={}){let l=[];l=Array.isArray(r)?r:[r],void 0===e.autoCorrection[t]&&(e.autoCorrection[t]={}),void 0===e.autoCorrection[t].reponse&&(e.autoCorrection[t].reponse={}),e.autoCorrection[t].reponse.param={digits:n,decimals:o,signe:i,exposantNbChiffres:s,exposantSigne:c,approx:a,formatInteractif:u},e.autoCorrection[t].reponse.valeur=l}function g(e){const t=e.split("\\operatorname{"),r=parseFloat(t[0].replace(",","."));if(t[1]){const e=t[1].split("}"),n=e[0]+e[1];return new u.Z(r,n)}return!1}function b(e,t,r){const n=(0,s.U2)(`exercice${e.numeroExercice}`);let o=(0,s.U2)(`score${e.numeroExercice}`,!1);!function(e,t,r){const n=(0,l.Yf)();null===n?console.log("userId KO : "+n):(console.log("userId OK : "+n),fetch("scoresManage.php",{method:"POST",mode:"same-origin",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({isSubmitUserId:!1,isVerifResult:!0,userId:n,prof1:n[0],prof2:n[1],prof3:n[2],classe1:n[3],classe2:n[4],eleve1:n[5],eleve2:n[6],exId:e.id,sup:e.sup,sup2:e.sup2,sup3:e.sup3,nbBonnesReponses:t,nbQuestions:t+r,score:t/(t+r)*100})}))}(e,t,r),o||(o=(0,s.MN)(n,"div",{className:"score",id:`score${e.numeroExercice}`})),o.innerHTML=`${t} / ${t+r}`,o.style.color="#f15929",o.style.fontWeight="bold",o.style.fontSize="x-large",o.style.display="inline"}},38072:(e,t,r)=>{"use strict";r.d(t,{ik:()=>o,sY:()=>i,Yf:()=>s,ES:()=>c,x:()=>a});var n=r(62259);function o(){const e=window.location.search;return new URLSearchParams(e).get("filtre")}function i(){const e=window.location.search;return new URLSearchParams(e).get("v")}function s(){const e=window.location.search;return new URLSearchParams(e).get("userId")}function c(){const e=new URL(window.location.href).searchParams.getAll("ex"),t=[];for(let r=0;r<e.length;r++){const n=e[r].split(","),o={};if(o.id=n[0],n.shift(),n.length>0)for(const e in n)n[e]=n[e].split("="),"true"===n[e][1]||"false"===n[e][1]?o[n[e][0]]="true"===n[e][1]:isNaN(n[e][1])?o[n[e][0]]=n[e][1]:o[n[e][0]]=parseInt(n[e][1]);void 0!==o.sup&&(o.s=o.sup),void 0!==o.sup2&&(o.s2=o.sup2),void 0!==o.sup3&&(o.s3=o.sup3),void 0!==o.interactif&&(o.i=o.interactif),void 0!==o.nbQuestions&&(o.n=o.nbQuestions),void 0!==o.video&&(o.v=o.video),t.push(o)}return t}function a(){window.history.pushState("","",function(){const e=window.location.href.split("?")[0],t=window.location.search,r=new URLSearchParams(t);n.Do.userId&&r.set("userId",n.Do.userId),n.Do.vue&&r.set("v",n.Do.vue);const o=r.entries();let i=e+"?";for(const n of o)i+=n[0]+"="+n[1]+"&";return i=i.slice(0,-1),i=new URL(i),i}())}},27715:(e,t,r)=>{"use strict";r.d(t,{JF:()=>s,$N:()=>c});var n=r(23552);const o=["info","warning","error","positive"];function i(e,{message:t,type:r="error",titre:i}={}){if(o.includes(r)||(console.error(Error(`type de message inconnu : ${r}`)),r="error"),!t)throw Error("Message obligatoire pour tout retour utilisateur");const s="info"===r?"":r,c=(0,n.MN)(e,"div",{className:`ui message ${s}`}),a="error"===r?"frown outline":"warning"===r?"bullhorn":"bell outline";if((0,n.MN)(c,"i",{className:"close icon"}).addEventListener("click",(()=>c.remove())),i){const e=(0,n.MN)(c,"div",{className:"header"});(0,n.MN)(e,"i",{className:`${a} icon`}),(0,n.F4)(e,i)}return/<[a-zA-Z0-9_ "']+/.test(t)?c.innerHTML+=t:(0,n.F4)(c,t),c}function s({code:e,exercice:t}){const r=(0,n.U2)("containerErreur");switch(e){case"codeExerciceInconnu":i(r,{titre:"le code de l’exercice n’est pas valide",message:`L'identifiant ${t} ne correspond à aucun exercice MathALEA. <br> Ceci est peut-être dû à un lien incomplet ou obsolète. `,type:"error"});break;case"mg32load":i(r,{titre:"Erreur de chargement du module mg32",message:"Une erreur est survenue lors du chargement d'un module pour l'affichage de l'exercice. <br>\n          Essayez de rafraichir la page. <br> Si l'erreur persiste merci de contacter : <a href=\"mailto:contact@coopmaths.fr\">contact@coopmaths.fr</a>",type:"warning"});break;case"scratchLoad":i(r,{titre:"Erreur de chargement du module scratch",message:"Une erreur est survenue lors du chargement d'un module pour l'affichage de l'exercice. <br>\n          Essayez de rafraichir la page. <br> Si l'erreur persiste merci de contacter : <a href=\"mailto:contact@coopmaths.fr\">contact@coopmaths.fr</a>",type:"warning"});break;case"noLatex":i(r,{titre:"Pas de contenu Latex pour cet exercice",message:`L'exercice ${t} n'a, pour l'instant, pas de version Latex`,type:"warning"});break;default:console.error(Error(`code ${e} non géré par messageUtilisateur`)),i(r,{titre:"Erreur interne",message:'Une erreur est survenue.<br>\n          Essayez de rafraichir la page. <br> Si l\'erreur persiste merci de contacter : <a href="mailto:contact@coopmaths.fr">contact@coopmaths.fr</a>',type:"warning"})}}function c({id:e,message:t="",type:r="error"}={}){if(!e||!t)return console.error(TypeError("arguments manquants"));const o=i((0,n.U2)(e),{message:t,type:r});return o.style.width="400px",o}}}]);
//# sourceMappingURL=10229.74e8cceb6fc785bea464.js.map